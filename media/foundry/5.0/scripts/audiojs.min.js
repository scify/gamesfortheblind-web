!function(){var moduleFactory=function($){var module=this,exports=function(){!function(audiojs,audiojsInstance,container){var path=$.path+"/scripts/audiojs/",ns=$.globalNamespace+".audiojs";container[audiojs]={instanceCount:0,instances:{},flashSource:'      <object classid="clsid:D27CDB6E-AE6D-11cf-96B8-444553540000" id="$1" width="1" height="1" name="$1" style="position: absolute; left: -1px;">         <param name="movie" value="$2?playerInstance='+ns+'.instances[\'$1\']&datetime=$3">         <param name="allowscriptaccess" value="always">         <embed name="$1" src="$2?playerInstance='+ns+'.instances[\'$1\']&datetime=$3" width="1" height="1" allowscriptaccess="always">       </object>',settings:{autoplay:!1,loop:!1,preload:!0,imageLocation:path+"player-graphics.gif",swfLocation:path+"audiojs.swf",useFlash:function(){var a=document.createElement("audio");
return!(a.canPlayType&&a.canPlayType("audio/mpeg;").replace(/no/,""))}(),hasFlash:function(){if(navigator.plugins&&navigator.plugins.length&&navigator.plugins["Shockwave Flash"])return!0;if(navigator.mimeTypes&&navigator.mimeTypes.length){var mimeType=navigator.mimeTypes["application/x-shockwave-flash"];return mimeType&&mimeType.enabledPlugin}try{{new ActiveXObject("ShockwaveFlash.ShockwaveFlash")}return!0}catch(e){}return!1}(),createPlayer:{markup:'          <div class="play-pause">             <p class="play"></p>             <p class="pause"></p>             <p class="loading"></p>             <p class="error"></p>           </div>           <div class="scrubber">             <div class="progress"></div>             <div class="loaded"></div>           </div>           <div class="time">             <em class="played">00:00</em>/<strong class="duration">00:00</strong>           </div>           <div class="error-message"></div>',playPauseClass:"play-pause",scrubberClass:"scrubber",progressClass:"progress",loaderClass:"loaded",timeClass:"time",durationClass:"duration",playedClass:"played",errorMessageClass:"error-message",playingClass:"playing",loadingClass:"loading",errorClass:"error"},css:'        .audiojs audio { position: absolute; left: -1px; }         .audiojs { width: 460px; height: 36px; background: #404040; overflow: hidden; font-family: monospace; font-size: 12px;           background-image: -webkit-gradient(linear, left top, left bottom, color-stop(0, #444), color-stop(0.5, #555), color-stop(0.51, #444), color-stop(1, #444));           background-image: -moz-linear-gradient(center top, #444 0%, #555 50%, #444 51%, #444 100%);           -webkit-box-shadow: 1px 1px 8px rgba(0, 0, 0, 0.3); -moz-box-shadow: 1px 1px 8px rgba(0, 0, 0, 0.3);           -o-box-shadow: 1px 1px 8px rgba(0, 0, 0, 0.3); box-shadow: 1px 1px 8px rgba(0, 0, 0, 0.3); }         .audiojs .play-pause { width: 25px; height: 40px; padding: 4px 6px; margin: 0px; float: left; overflow: hidden; border-right: 1px solid #000; }         .audiojs p { display: none; width: 25px; height: 40px; margin: 0px; cursor: pointer; }         .audiojs .play { display: block; }         .audiojs .scrubber { position: relative; float: left; width: 280px; background: #5a5a5a; height: 14px; margin: 10px; border-top: 1px solid #3f3f3f; border-left: 0px; border-bottom: 0px; overflow: hidden; }         .audiojs .progress { position: absolute; top: 0px; left: 0px; height: 14px; width: 0px; background: #ccc; z-index: 1;           background-image: -webkit-gradient(linear, left top, left bottom, color-stop(0, #ccc), color-stop(0.5, #ddd), color-stop(0.51, #ccc), color-stop(1, #ccc));           background-image: -moz-linear-gradient(center top, #ccc 0%, #ddd 50%, #ccc 51%, #ccc 100%); }         .audiojs .loaded { position: absolute; top: 0px; left: 0px; height: 14px; width: 0px; background: #000;           background-image: -webkit-gradient(linear, left top, left bottom, color-stop(0, #222), color-stop(0.5, #333), color-stop(0.51, #222), color-stop(1, #222));           background-image: -moz-linear-gradient(center top, #222 0%, #333 50%, #222 51%, #222 100%); }         .audiojs .time { float: left; height: 36px; line-height: 36px; margin: 0px 0px 0px 6px; padding: 0px 6px 0px 12px; border-left: 1px solid #000; color: #ddd; text-shadow: 1px 1px 0px rgba(0, 0, 0, 0.5); }         .audiojs .time em { padding: 0px 2px 0px 0px; color: #f9f9f9; font-style: normal; }         .audiojs .time strong { padding: 0px 0px 0px 2px; font-weight: normal; }         .audiojs .error-message { float: left; display: none; margin: 0px 10px; height: 36px; width: 400px; overflow: hidden; line-height: 36px; white-space: nowrap; color: #fff;           text-overflow: ellipsis; -o-text-overflow: ellipsis; -icab-text-overflow: ellipsis; -khtml-text-overflow: ellipsis; -moz-text-overflow: ellipsis; -webkit-text-overflow: ellipsis; }         .audiojs .error-message a { color: #eee; text-decoration: none; padding-bottom: 1px; border-bottom: 1px solid #999; white-space: wrap; }                 .audiojs .play { background: url("$1") -2px -1px no-repeat; }         .audiojs .loading { background: url("$1") -2px -31px no-repeat; }         .audiojs .error { background: url("$1") -2px -61px no-repeat; }         .audiojs .pause { background: url("$1") -2px -91px no-repeat; }                 .playing .play, .playing .loading, .playing .error { display: none; }         .playing .pause { display: block; }                 .loading .play, .loading .pause, .loading .error { display: none; }         .loading .loading { display: block; }                 .error .time, .error .play, .error .pause, .error .scrubber, .error .loading { display: none; }         .error .error { display: block; }         .error .play-pause p { cursor: auto; }         .error .error-message { display: block; }',trackEnded:function(){},flashError:function(){var player=this.settings.createPlayer,errorMessage=getByClass(player.errorMessageClass,this.wrapper),html='Missing <a href="http://get.adobe.com/flashplayer/">flash player</a> plugin.';
this.mp3&&(html+=' <a href="'+this.mp3+'">Download audio file</a>.'),container[audiojs].helpers.removeClass(this.wrapper,player.loadingClass),container[audiojs].helpers.addClass(this.wrapper,player.errorClass),errorMessage.innerHTML=html},loadError:function(){var player=this.settings.createPlayer,errorMessage=getByClass(player.errorMessageClass,this.wrapper);container[audiojs].helpers.removeClass(this.wrapper,player.loadingClass),container[audiojs].helpers.addClass(this.wrapper,player.errorClass),errorMessage.innerHTML='Error loading: "'+this.mp3+'"'
},init:function(){var player=this.settings.createPlayer;container[audiojs].helpers.addClass(this.wrapper,player.loadingClass)},loadStarted:function(){var player=this.settings.createPlayer,duration=getByClass(player.durationClass,this.wrapper),m=Math.floor(this.duration/60),s=Math.floor(this.duration%60);container[audiojs].helpers.removeClass(this.wrapper,player.loadingClass),duration.innerHTML=(10>m?"0":"")+m+":"+(10>s?"0":"")+s},loadProgress:function(percent){var player=this.settings.createPlayer,loaded=getByClass(player.loaderClass,this.wrapper);
loaded.style.width=100*percent+"%"},playPause:function(){this.playing?this.settings.play():this.settings.pause()},play:function(){var player=this.settings.createPlayer;container[audiojs].helpers.addClass(this.wrapper,player.playingClass)},pause:function(){var player=this.settings.createPlayer;container[audiojs].helpers.removeClass(this.wrapper,player.playingClass)},updatePlayhead:function(percent){var player=this.settings.createPlayer,progress=getByClass(player.progressClass,this.wrapper);progress.style.width=100*percent+"%";
var played=getByClass(player.playedClass,this.wrapper),p=this.duration*percent,m=Math.floor(p/60),s=Math.floor(p%60);played.innerHTML=(10>m?"0":"")+m+":"+(10>s?"0":"")+s}},create:function(element,options){var options=options||{};return element.length?this.createAll(options,element):this.newInstance(element,options)},createAll:function(options,elements){var audioElements=elements||document.getElementsByTagName("audio"),instances=[];options=options||{};for(var i=0,ii=audioElements.length;ii>i;i++)instances.push(this.newInstance(audioElements[i],options));
return instances},newInstance:function(element,options){{var element=element,s=this.helpers.clone(this.settings),id="audiojs"+this.instanceCount,wrapperId="audiojs_wrapper"+this.instanceCount;this.instanceCount++}null!=element.getAttribute("autoplay")&&(s.autoplay=!0),null!=element.getAttribute("loop")&&(s.loop=!0),"none"==element.getAttribute("preload")&&(s.preload=!1),options&&this.helpers.merge(s,options),s.createPlayer.markup?element=this.createPlayer(element,s.createPlayer,wrapperId):element.parentNode.setAttribute("id",wrapperId);
var audio=new container[audiojsInstance](element,s);return s.css&&this.helpers.injectCss(audio,s.css),s.useFlash&&s.hasFlash?(this.injectFlash(audio,id),this.attachFlashEvents(audio.wrapper,audio)):s.useFlash&&!s.hasFlash&&this.settings.flashError.apply(audio),(!s.useFlash||s.useFlash&&s.hasFlash)&&this.attachEvents(audio.wrapper,audio),this.instances[id]=audio,audio},createPlayer:function(element,player,id){var wrapper=document.createElement("div"),newElement=element.cloneNode(!0);return wrapper.setAttribute("class","audiojs"),wrapper.setAttribute("className","audiojs"),wrapper.setAttribute("id",id),newElement.outerHTML&&!document.createElement("audio").canPlayType?(newElement=this.helpers.cloneHtml5Node(element),wrapper.innerHTML=player.markup,wrapper.appendChild(newElement),element.outerHTML=wrapper.outerHTML,wrapper=document.getElementById(id)):(wrapper.appendChild(newElement),wrapper.innerHTML=wrapper.innerHTML+player.markup,element.parentNode.replaceChild(wrapper,element)),wrapper.getElementsByTagName("audio")[0]
},attachEvents:function(wrapper,audio){if(audio.settings.createPlayer){var player=audio.settings.createPlayer,playPause=getByClass(player.playPauseClass,wrapper),scrubber=getByClass(player.scrubberClass,wrapper),leftPos=function(elem){var curleft=0;if(elem.offsetParent)do curleft+=elem.offsetLeft;while(elem=elem.offsetParent);return curleft};container[audiojs].events.addListener(playPause,"click",function(){audio.playPause.apply(audio)}),container[audiojs].events.addListener(scrubber,"click",function(e){var relativeLeft=e.clientX-leftPos(this);
audio.skipTo(relativeLeft/scrubber.offsetWidth)}),audio.settings.useFlash||(container[audiojs].events.trackLoadProgress(audio),container[audiojs].events.addListener(audio.element,"timeupdate",function(){audio.updatePlayhead.apply(audio)}),container[audiojs].events.addListener(audio.element,"ended",function(){audio.trackEnded.apply(audio)}),container[audiojs].events.addListener(audio.source,"error",function(){clearInterval(audio.readyTimer),clearInterval(audio.loadTimer),audio.settings.loadError.apply(audio)}))
}},attachFlashEvents:function(element,audio){audio.swfReady=!1,audio.load=function(mp3){audio.mp3=mp3,audio.swfReady&&audio.element.load(mp3)},audio.loadProgress=function(percent,duration){audio.loadedPercent=percent,audio.duration=duration,audio.settings.loadStarted.apply(audio),audio.settings.loadProgress.apply(audio,[percent])},audio.skipTo=function(percent){percent>audio.loadedPercent||(audio.updatePlayhead.call(audio,[percent]),audio.element.skipTo(percent))},audio.updatePlayhead=function(percent){audio.settings.updatePlayhead.apply(audio,[percent])
},audio.play=function(){audio.settings.preload||(audio.settings.preload=!0,audio.element.init(audio.mp3)),audio.playing=!0,audio.element.pplay(),audio.settings.play.apply(audio)},audio.pause=function(){audio.playing=!1,audio.element.ppause(),audio.settings.pause.apply(audio)},audio.setVolume=function(v){audio.element.setVolume(v)},audio.loadStarted=function(){audio.swfReady=!0,audio.settings.preload&&audio.element.init(audio.mp3),audio.settings.autoplay&&audio.play.apply(audio)}},injectFlash:function(audio,id){var flashSource=this.flashSource.replace(/\$1/g,id);
flashSource=flashSource.replace(/\$2/g,audio.settings.swfLocation),flashSource=flashSource.replace(/\$3/g,+new Date+Math.random());var html=audio.wrapper.innerHTML,div=document.createElement("div");div.innerHTML=flashSource+html,audio.wrapper.innerHTML=div.innerHTML,audio.element=this.helpers.getSwf(id)},helpers:{merge:function(obj1,obj2){for(attr in obj2)(obj1.hasOwnProperty(attr)||obj2.hasOwnProperty(attr))&&(obj1[attr]=obj2[attr])},clone:function(obj){if(null==obj||"object"!=typeof obj)return obj;var temp=new obj.constructor;
for(var key in obj)temp[key]=arguments.callee(obj[key]);return temp},addClass:function(element,className){var re=new RegExp("(\\s|^)"+className+"(\\s|$)");re.test(element.className)||(element.className+=" "+className)},removeClass:function(element,className){var re=new RegExp("(\\s|^)"+className+"(\\s|$)");element.className=element.className.replace(re," ")},injectCss:function(audio,string){for(var prepend="",styles=document.getElementsByTagName("style"),css=string.replace(/\$1/g,audio.settings.imageLocation),i=0,ii=styles.length;ii>i;i++){var title=styles[i].getAttribute("title");
if(title&&~title.indexOf("audiojs")){if(style=styles[i],style.innerHTML===css)return;prepend=style.innerHTML;break}}var head=document.getElementsByTagName("head")[0],firstchild=head.firstChild,style=document.createElement("style");head&&(style.setAttribute("type","text/css"),style.setAttribute("title","audiojs"),style.styleSheet?style.styleSheet.cssText=prepend+css:style.appendChild(document.createTextNode(prepend+css)),firstchild?head.insertBefore(style,firstchild):head.appendChild(styleElement))},cloneHtml5Node:function(audioTag){var fragment=document.createDocumentFragment(),doc=fragment.createElement?fragment:document;
doc.createElement("audio");var div=doc.createElement("div");return fragment.appendChild(div),div.innerHTML=audioTag.outerHTML,div.firstChild},getSwf:function(name){var swf=document[name]||window[name];return swf.length>1?swf[swf.length-1]:swf}},events:{memoryLeaking:!1,listeners:[],addListener:function(element,eventName,func){element.addEventListener?element.addEventListener(eventName,func,!1):element.attachEvent&&(this.listeners.push(element),this.memoryLeaking||(window.attachEvent("onunload",function(){if(this.listeners)for(var i=0,ii=this.listeners.length;ii>i;i++)container[audiojs].events.purge(this.listeners[i])
}),this.memoryLeaking=!0),element.attachEvent("on"+eventName,function(){func.call(element,window.event)}))},trackLoadProgress:function(audio){if(audio.settings.preload){var readyTimer,loadTimer,audio=audio,ios=/(ipod|iphone|ipad)/i.test(navigator.userAgent);readyTimer=setInterval(function(){audio.element.readyState>-1&&(ios||audio.init.apply(audio)),audio.element.readyState>1&&(audio.settings.autoplay&&audio.play.apply(audio),clearInterval(readyTimer),loadTimer=setInterval(function(){audio.loadProgress.apply(audio),audio.loadedPercent>=1&&clearInterval(loadTimer)
},200))},200),audio.readyTimer=readyTimer,audio.loadTimer=loadTimer}},purge:function(d){var i,a=d.attributes;if(a)for(i=0;i<a.length;i+=1)"function"==typeof d[a[i].name]&&(d[a[i].name]=null);if(a=d.childNodes)for(i=0;i<a.length;i+=1)purge(d.childNodes[i])},ready:function(){return function(fn){var win=window,done=!1,top=!0,doc=win.document,root=doc.documentElement,add=doc.addEventListener?"addEventListener":"attachEvent",rem=doc.addEventListener?"removeEventListener":"detachEvent",pre=doc.addEventListener?"":"on",init=function(e){("readystatechange"!=e.type||"complete"==doc.readyState)&&(("load"==e.type?win:doc)[rem](pre+e.type,init,!1),!done&&(done=!0)&&fn.call(win,e.type||e))
},poll=function(){try{root.doScroll("left")}catch(e){return void setTimeout(poll,50)}init("poll")};if("complete"==doc.readyState)fn.call(win,"lazy");else{if(doc.createEventObject&&root.doScroll){try{top=!win.frameElement}catch(e){}top&&poll()}doc[add](pre+"DOMContentLoaded",init,!1),doc[add](pre+"readystatechange",init,!1),win[add](pre+"load",init,!1)}}}()}},container[audiojsInstance]=function(element,settings){this.element=element,this.wrapper=element.parentNode,this.source=element.getElementsByTagName("source")[0]||element,this.mp3=function(element){var source=element.getElementsByTagName("source")[0];
return element.getAttribute("src")||(source?source.getAttribute("src"):null)}(element),this.settings=settings,this.loadStartedCalled=!1,this.loadedPercent=0,this.duration=1,this.playing=!1},container[audiojsInstance].prototype={updatePlayhead:function(){var percent=this.element.currentTime/this.duration;this.settings.updatePlayhead.apply(this,[percent])},skipTo:function(percent){percent>this.loadedPercent||(this.element.currentTime=this.duration*percent,this.updatePlayhead())},load:function(mp3){this.loadStartedCalled=!1,this.source.setAttribute("src",mp3),this.element.load(),this.mp3=mp3,container[audiojs].events.trackLoadProgress(this)
},loadError:function(){this.settings.loadError.apply(this)},init:function(){this.settings.init.apply(this)},loadStarted:function(){return this.element.duration?(this.duration=this.element.duration,this.updatePlayhead(),void this.settings.loadStarted.apply(this)):!1},loadProgress:function(){if(null!=this.element.buffered&&this.element.buffered.length){this.loadStartedCalled||(this.loadStartedCalled=this.loadStarted());var durationLoaded=this.element.buffered.end(this.element.buffered.length-1);this.loadedPercent=durationLoaded/this.duration,this.settings.loadProgress.apply(this,[this.loadedPercent])
}},playPause:function(){this.playing?this.pause():this.play()},play:function(){var ios=/(ipod|iphone|ipad)/i.test(navigator.userAgent);ios&&0==this.element.readyState&&this.init.apply(this),this.settings.preload||(this.settings.preload=!0,this.element.setAttribute("preload","auto"),container[audiojs].events.trackLoadProgress(this)),this.playing=!0,this.element.play(),this.settings.play.apply(this)},pause:function(){this.playing=!1,this.element.pause(),this.settings.pause.apply(this)},setVolume:function(v){this.element.volume=v
},trackEnded:function(){this.skipTo.apply(this,[0]),this.settings.loop||this.pause.apply(this),this.settings.trackEnded.apply(this)}};var getByClass=function(searchClass,node){var matches=[];if(node=node||document,node.getElementsByClassName)matches=node.getElementsByClassName(searchClass);else{var i,l,els=node.getElementsByTagName("*"),pattern=new RegExp("(^|\\s)"+searchClass+"(\\s|$)");for(i=0,l=els.length;l>i;i++)pattern.test(els[i].className)&&matches.push(els[i])}return matches.length>1?matches:matches[0]
}}("audiojs","audiojsInstance",$)};exports(),module.resolveWith(exports)};FD50.module("audiojs",moduleFactory)}();