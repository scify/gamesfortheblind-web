!function(a,b){"object"==typeof module&&"object"==typeof module.exports?module.exports=a.document?b(a,!0):function(a){if(!a.document)throw new Error("jQuery requires a window with a document");return b(a)}:b(a)}("undefined"!=typeof window?window:this,function(a){function s(a){var b=a.length,c=n.type(a);return"function"===c||n.isWindow(a)?!1:1===a.nodeType&&b?!0:"array"===c||0===b||"number"==typeof b&&b>0&&b-1 in a}function x(a,b,c){if(n.isFunction(b))return n.grep(a,function(a,d){return!!b.call(a,d,a)!==c});
if(b.nodeType)return n.grep(a,function(a){return a===b!==c});if("string"==typeof b){if(w.test(b))return n.filter(b,a,c);b=n.filter(b,a)}return n.grep(a,function(a){return n.inArray(a,b)>=0!==c})}function E(a,b){do a=a[b];while(a&&1!==a.nodeType);return a}function H(a){var b=G[a]={};return n.each(a.match(F)||[],function(a,c){b[c]=!0}),b}function J(){z.addEventListener?(z.removeEventListener("DOMContentLoaded",K,!1),a.removeEventListener("load",K,!1)):(z.detachEvent("onreadystatechange",K),a.detachEvent("onload",K))
}function K(){(z.addEventListener||"load"===event.type||"complete"===z.readyState)&&(J(),n.ready())}function P(a,b,c){if(void 0===c&&1===a.nodeType){var d="data-"+b.replace(O,"-$1").toLowerCase();if(c=a.getAttribute(d),"string"==typeof c){try{c="true"===c?!0:"false"===c?!1:"null"===c?null:+c+""===c?+c:N.test(c)?n.parseJSON(c):c}catch(e){}n.data(a,b,c)}else c=void 0}return c}function Q(a){var b;for(b in a)if(("data"!==b||!n.isEmptyObject(a[b]))&&"toJSON"!==b)return!1;return!0}function R(a,b,d,e){if(n.acceptData(a)){var f,g,h=n.expando,i=a.nodeType,j=i?n.cache:a,k=i?a[h]:a[h]&&h;
if(k&&j[k]&&(e||j[k].data)||void 0!==d||"string"!=typeof b)return k||(k=i?a[h]=c.pop()||n.guid++:h),j[k]||(j[k]=i?{}:{toJSON:n.noop}),("object"==typeof b||"function"==typeof b)&&(e?j[k]=n.extend(j[k],b):j[k].data=n.extend(j[k].data,b)),g=j[k],e||(g.data||(g.data={}),g=g.data),void 0!==d&&(g[n.camelCase(b)]=d),"string"==typeof b?(f=g[b],null==f&&(f=g[n.camelCase(b)])):f=g,f}}function S(a,b,c){if(n.acceptData(a)){var d,e,f=a.nodeType,g=f?n.cache:a,h=f?a[n.expando]:n.expando;if(g[h]){if(b&&(d=c?g[h]:g[h].data)){n.isArray(b)?b=b.concat(n.map(b,n.camelCase)):b in d?b=[b]:(b=n.camelCase(b),b=b in d?[b]:b.split(" ")),e=b.length;
for(;e--;)delete d[b[e]];if(c?!Q(d):!n.isEmptyObject(d))return}(c||(delete g[h].data,Q(g[h])))&&(f?n.cleanData([a],!0):l.deleteExpando||g!=g.window?delete g[h]:g[h]=null)}}}function bb(){return!0}function cb(){return!1}function db(){try{return z.activeElement}catch(a){}}function eb(a){var b=fb.split("|"),c=a.createDocumentFragment();if(c.createElement)for(;b.length;)c.createElement(b.pop());return c}function vb(a,b){var c,d,e=0,f=typeof a.getElementsByTagName!==L?a.getElementsByTagName(b||"*"):typeof a.querySelectorAll!==L?a.querySelectorAll(b||"*"):void 0;
if(!f)for(f=[],c=a.childNodes||a;null!=(d=c[e]);e++)!b||n.nodeName(d,b)?f.push(d):n.merge(f,vb(d,b));return void 0===b||b&&n.nodeName(a,b)?n.merge([a],f):f}function wb(a){X.test(a.type)&&(a.defaultChecked=a.checked)}function xb(a,b){return n.nodeName(a,"table")&&n.nodeName(11!==b.nodeType?b:b.firstChild,"tr")?a.getElementsByTagName("tbody")[0]||a.appendChild(a.ownerDocument.createElement("tbody")):a}function yb(a){return a.type=(null!==n.find.attr(a,"type"))+"/"+a.type,a}function zb(a){var b=qb.exec(a.type);
return b?a.type=b[1]:a.removeAttribute("type"),a}function Ab(a,b){for(var c,d=0;null!=(c=a[d]);d++)n._data(c,"globalEval",!b||n._data(b[d],"globalEval"))}function Bb(a,b){if(1===b.nodeType&&n.hasData(a)){var c,d,e,f=n._data(a),g=n._data(b,f),h=f.events;if(h){delete g.handle,g.events={};for(c in h)for(d=0,e=h[c].length;e>d;d++)n.event.add(b,c,h[c][d])}g.data&&(g.data=n.extend({},g.data))}}function Cb(a,b){var c,d,e;if(1===b.nodeType){if(c=b.nodeName.toLowerCase(),!l.noCloneEvent&&b[n.expando]){e=n._data(b);for(d in e.events)n.removeEvent(b,d,e.handle);
b.removeAttribute(n.expando)}"script"===c&&b.text!==a.text?(yb(b).text=a.text,zb(b)):"object"===c?(b.parentNode&&(b.outerHTML=a.outerHTML),l.html5Clone&&a.innerHTML&&!n.trim(b.innerHTML)&&(b.innerHTML=a.innerHTML)):"input"===c&&X.test(a.type)?(b.defaultChecked=b.checked=a.checked,b.value!==a.value&&(b.value=a.value)):"option"===c?b.defaultSelected=b.selected=a.defaultSelected:("input"===c||"textarea"===c)&&(b.defaultValue=a.defaultValue)}}function Fb(b,c){var d=n(c.createElement(b)).appendTo(c.body),e=a.getDefaultComputedStyle?a.getDefaultComputedStyle(d[0]).display:n.css(d[0],"display");
return d.detach(),e}function Gb(a){var b=z,c=Eb[a];return c||(c=Fb(a,b),"none"!==c&&c||(Db=(Db||n("<iframe frameborder='0' width='0' height='0'/>")).appendTo(b.documentElement),b=(Db[0].contentWindow||Db[0].contentDocument).document,b.write(),b.close(),c=Fb(a,b),Db.detach()),Eb[a]=c),c}function Mb(a,b){return{get:function(){var c=a();if(null!=c)return c?(delete this.get,void 0):(this.get=b).apply(this,arguments)}}}function Vb(a,b){if(b in a)return b;for(var c=b.charAt(0).toUpperCase()+b.slice(1),d=b,e=Ub.length;e--;)if(b=Ub[e]+c,b in a)return b;
return d}function Wb(a,b){for(var c,d,e,f=[],g=0,h=a.length;h>g;g++)d=a[g],d.style&&(f[g]=n._data(d,"olddisplay"),c=d.style.display,b?(f[g]||"none"!==c||(d.style.display=""),""===d.style.display&&V(d)&&(f[g]=n._data(d,"olddisplay",Gb(d.nodeName)))):f[g]||(e=V(d),(c&&"none"!==c||!e)&&n._data(d,"olddisplay",e?c:n.css(d,"display"))));for(g=0;h>g;g++)d=a[g],d.style&&(b&&"none"!==d.style.display&&""!==d.style.display||(d.style.display=b?f[g]||"":"none"));return a}function Xb(a,b,c){var d=Qb.exec(b);return d?Math.max(0,d[1]-(c||0))+(d[2]||"px"):b
}function Yb(a,b,c,d,e){for(var f=c===(d?"border":"content")?4:"width"===b?1:0,g=0;4>f;f+=2)"margin"===c&&(g+=n.css(a,c+U[f],!0,e)),d?("content"===c&&(g-=n.css(a,"padding"+U[f],!0,e)),"margin"!==c&&(g-=n.css(a,"border"+U[f]+"Width",!0,e))):(g+=n.css(a,"padding"+U[f],!0,e),"padding"!==c&&(g+=n.css(a,"border"+U[f]+"Width",!0,e)));return g}function Zb(a,b,c){var d=!0,e="width"===b?a.offsetWidth:a.offsetHeight,f=Jb(a),g=l.boxSizing()&&"border-box"===n.css(a,"boxSizing",!1,f);if(0>=e||null==e){if(e=Kb(a,b,f),(0>e||null==e)&&(e=a.style[b]),Ib.test(e))return e;
d=g&&(l.boxSizingReliable()||e===a.style[b]),e=parseFloat(e)||0}return e+Yb(a,b,c||(g?"border":"content"),d,f)+"px"}function $b(a,b,c,d,e){return new $b.prototype.init(a,b,c,d,e)}function gc(){return setTimeout(function(){_b=void 0}),_b=n.now()}function hc(a,b){var c,d={height:a},e=0;for(b=b?1:0;4>e;e+=2-b)c=U[e],d["margin"+c]=d["padding"+c]=a;return b&&(d.opacity=d.width=a),d}function ic(a,b,c){for(var d,e=(fc[b]||[]).concat(fc["*"]),f=0,g=e.length;g>f;f++)if(d=e[f].call(c,b,a))return d}function jc(a,b,c){var d,e,f,g,h,i,j,k,m=this,o={},p=a.style,q=a.nodeType&&V(a),r=n._data(a,"fxshow");
c.queue||(h=n._queueHooks(a,"fx"),null==h.unqueued&&(h.unqueued=0,i=h.empty.fire,h.empty.fire=function(){h.unqueued||i()}),h.unqueued++,m.always(function(){m.always(function(){h.unqueued--,n.queue(a,"fx").length||h.empty.fire()})})),1===a.nodeType&&("height"in b||"width"in b)&&(c.overflow=[p.overflow,p.overflowX,p.overflowY],j=n.css(a,"display"),k=Gb(a.nodeName),"none"===j&&(j=k),"inline"===j&&"none"===n.css(a,"float")&&(l.inlineBlockNeedsLayout&&"inline"!==k?p.zoom=1:p.display="inline-block")),c.overflow&&(p.overflow="hidden",l.shrinkWrapBlocks()||m.always(function(){p.overflow=c.overflow[0],p.overflowX=c.overflow[1],p.overflowY=c.overflow[2]
}));for(d in b)if(e=b[d],bc.exec(e)){if(delete b[d],f=f||"toggle"===e,e===(q?"hide":"show")){if("show"!==e||!r||void 0===r[d])continue;q=!0}o[d]=r&&r[d]||n.style(a,d)}if(!n.isEmptyObject(o)){r?"hidden"in r&&(q=r.hidden):r=n._data(a,"fxshow",{}),f&&(r.hidden=!q),q?n(a).show():m.done(function(){n(a).hide()}),m.done(function(){var b;n._removeData(a,"fxshow");for(b in o)n.style(a,b,o[b])});for(d in o)g=ic(q?r[d]:0,d,m),d in r||(r[d]=g.start,q&&(g.end=g.start,g.start="width"===d||"height"===d?1:0))}}function kc(a,b){var c,d,e,f,g;
for(c in a)if(d=n.camelCase(c),e=b[d],f=a[c],n.isArray(f)&&(e=f[1],f=a[c]=f[0]),c!==d&&(a[d]=f,delete a[c]),g=n.cssHooks[d],g&&"expand"in g){f=g.expand(f),delete a[d];for(c in f)c in a||(a[c]=f[c],b[c]=e)}else b[d]=e}function lc(a,b,c){var d,e,f=0,g=ec.length,h=n.Deferred().always(function(){delete i.elem}),i=function(){if(e)return!1;for(var b=_b||gc(),c=Math.max(0,j.startTime+j.duration-b),d=c/j.duration||0,f=1-d,g=0,i=j.tweens.length;i>g;g++)j.tweens[g].run(f);return h.notifyWith(a,[j,f,c]),1>f&&i?c:(h.resolveWith(a,[j]),!1)
},j=h.promise({elem:a,props:n.extend({},b),opts:n.extend(!0,{specialEasing:{}},c),originalProperties:b,originalOptions:c,startTime:_b||gc(),duration:c.duration,tweens:[],createTween:function(b,c){var d=n.Tween(a,j.opts,b,c,j.opts.specialEasing[b]||j.opts.easing);return j.tweens.push(d),d},stop:function(b){var c=0,d=b?j.tweens.length:0;if(e)return this;for(e=!0;d>c;c++)j.tweens[c].run(1);return b?h.resolveWith(a,[j,b]):h.rejectWith(a,[j,b]),this}}),k=j.props;for(kc(k,j.opts.specialEasing);g>f;f++)if(d=ec[f].call(j,a,k,j.opts))return d;
return n.map(k,ic,j),n.isFunction(j.opts.start)&&j.opts.start.call(a,j),n.fx.timer(n.extend(i,{elem:a,anim:j,queue:j.opts.queue})),j.progress(j.opts.progress).done(j.opts.done,j.opts.complete).fail(j.opts.fail).always(j.opts.always)}function Mc(a){return function(b,c){"string"!=typeof b&&(c=b,b="*");var d,e=0,f=b.toLowerCase().match(F)||[];if(n.isFunction(c))for(;d=f[e++];)"+"===d.charAt(0)?(d=d.slice(1)||"*",(a[d]=a[d]||[]).unshift(c)):(a[d]=a[d]||[]).push(c)}}function Nc(a,b,c,d){function g(h){var i;return e[h]=!0,n.each(a[h]||[],function(a,h){var j=h(b,c,d);
return"string"!=typeof j||f||e[j]?f?!(i=j):void 0:(b.dataTypes.unshift(j),g(j),!1)}),i}var e={},f=a===Jc;return g(b.dataTypes[0])||!e["*"]&&g("*")}function Oc(a,b){var c,d,e=n.ajaxSettings.flatOptions||{};for(d in b)void 0!==b[d]&&((e[d]?a:c||(c={}))[d]=b[d]);return c&&n.extend(!0,a,c),a}function Pc(a,b,c){for(var d,e,f,g,h=a.contents,i=a.dataTypes;"*"===i[0];)i.shift(),void 0===e&&(e=a.mimeType||b.getResponseHeader("Content-Type"));if(e)for(g in h)if(h[g]&&h[g].test(e)){i.unshift(g);break}if(i[0]in c)f=i[0];
else{for(g in c){if(!i[0]||a.converters[g+" "+i[0]]){f=g;break}d||(d=g)}f=f||d}return f?(f!==i[0]&&i.unshift(f),c[f]):void 0}function Qc(a,b,c,d){var e,f,g,h,i,j={},k=a.dataTypes.slice();if(k[1])for(g in a.converters)j[g.toLowerCase()]=a.converters[g];for(f=k.shift();f;)if(a.responseFields[f]&&(c[a.responseFields[f]]=b),!i&&d&&a.dataFilter&&(b=a.dataFilter(b,a.dataType)),i=f,f=k.shift())if("*"===f)f=i;else if("*"!==i&&i!==f){if(g=j[i+" "+f]||j["* "+f],!g)for(e in j)if(h=e.split(" "),h[1]===f&&(g=j[i+" "+h[0]]||j["* "+h[0]])){g===!0?g=j[e]:j[e]!==!0&&(f=h[0],k.unshift(h[1]));
break}if(g!==!0)if(g&&a["throws"])b=g(b);else try{b=g(b)}catch(l){return{state:"parsererror",error:g?l:"No conversion from "+i+" to "+f}}}return{state:"success",data:b}}function Wc(a,b,c,d){var e;if(n.isArray(b))n.each(b,function(b,e){c||Sc.test(a)?d(a,e):Wc(a+"["+("object"==typeof e?b:"")+"]",e,c,d)});else if(c||"object"!==n.type(b))d(a,b);else for(e in b)Wc(a+"["+e+"]",b[e],c,d)}function $c(){try{return new a.XMLHttpRequest}catch(b){}}function _c(){try{return new a.ActiveXObject("Microsoft.XMLHTTP")}catch(b){}}function ed(a){return n.isWindow(a)?a:9===a.nodeType?a.defaultView||a.parentWindow:!1
}var c=[],d=c.slice,e=c.concat,f=c.push,g=c.indexOf,h={},i=h.toString,j=h.hasOwnProperty,k="".trim,l={},m="1.11.1pre",n=function(a,b){return new n.fn.init(a,b)},o=/^[\s\uFEFF\xA0]+|[\s\uFEFF\xA0]+$/g,p=/^-ms-/,q=/-([\da-z])/gi,r=function(a,b){return b.toUpperCase()};n.fn=n.prototype={jquery:m,constructor:n,selector:"",length:0,toArray:function(){return d.call(this)},get:function(a){return null!=a?0>a?this[a+this.length]:this[a]:d.call(this)},pushStack:function(a){var b=n.merge(this.constructor(),a);return b.prevObject=this,b.context=this.context,b
},each:function(a,b){return n.each(this,a,b)},map:function(a){return this.pushStack(n.map(this,function(b,c){return a.call(b,c,b)}))},slice:function(){return this.pushStack(d.apply(this,arguments))},first:function(){return this.eq(0)},last:function(){return this.eq(-1)},eq:function(a){var b=this.length,c=+a+(0>a?b:0);return this.pushStack(c>=0&&b>c?[this[c]]:[])},end:function(){return this.prevObject||this.constructor(null)},push:f,sort:c.sort,splice:c.splice},n.extend=n.fn.extend=function(){var a,b,c,d,e,f,g=arguments[0]||{},h=1,i=arguments.length,j=!1;
for("boolean"==typeof g&&(j=g,g=arguments[h]||{},h++),"object"==typeof g||n.isFunction(g)||(g={}),h===i&&(g=this,h--);i>h;h++)if(null!=(e=arguments[h]))for(d in e)a=g[d],c=e[d],g!==c&&(j&&c&&(n.isPlainObject(c)||(b=n.isArray(c)))?(b?(b=!1,f=a&&n.isArray(a)?a:[]):f=a&&n.isPlainObject(a)?a:{},g[d]=n.extend(j,f,c)):void 0!==c&&(g[d]=c));return g},n.extend({expando:"jQuery"+(m+Math.random()).replace(/\D/g,""),isReady:!0,error:function(a){throw new Error(a)},noop:function(){},isFunction:function(a){return"function"===n.type(a)
},isArray:Array.isArray||function(a){return"array"===n.type(a)},isWindow:function(a){return null!=a&&a==a.window},isNumeric:function(a){return a-parseFloat(a)>=0},isEmptyObject:function(a){var b;for(b in a)return!1;return!0},isPlainObject:function(a){var b;if(!a||"object"!==n.type(a)||a.nodeType||n.isWindow(a))return!1;try{if(a.constructor&&!j.call(a,"constructor")&&!j.call(a.constructor.prototype,"isPrototypeOf"))return!1}catch(c){return!1}if(l.ownLast)for(b in a)return j.call(a,b);for(b in a);return void 0===b||j.call(a,b)
},type:function(a){return null==a?a+"":"object"==typeof a||"function"==typeof a?h[i.call(a)]||"object":typeof a},globalEval:function(b){b&&n.trim(b)&&(a.execScript||function(b){a.eval.call(a,b)})(b)},camelCase:function(a){return a.replace(p,"ms-").replace(q,r)},nodeName:function(a,b){return a.nodeName&&a.nodeName.toLowerCase()===b.toLowerCase()},each:function(a,b,c){var d,e=0,f=a.length,g=s(a);if(c){if(g)for(;f>e&&(d=b.apply(a[e],c),d!==!1);e++);else for(e in a)if(d=b.apply(a[e],c),d===!1)break}else if(g)for(;f>e&&(d=b.call(a[e],e,a[e]),d!==!1);e++);else for(e in a)if(d=b.call(a[e],e,a[e]),d===!1)break;
return a},trim:k&&!k.call("\ufeff\xa0")?function(a){return null==a?"":k.call(a)}:function(a){return null==a?"":(a+"").replace(o,"")},makeArray:function(a,b){var c=b||[];return null!=a&&(s(Object(a))?n.merge(c,"string"==typeof a?[a]:a):f.call(c,a)),c},inArray:function(a,b,c){var d;if(b){if(g)return g.call(b,a,c);for(d=b.length,c=c?0>c?Math.max(0,d+c):c:0;d>c;c++)if(c in b&&b[c]===a)return c}return-1},merge:function(a,b){for(var c=+b.length,d=0,e=a.length;c>d;)a[e++]=b[d++];if(c!==c)for(;void 0!==b[d];)a[e++]=b[d++];
return a.length=e,a},grep:function(a,b,c){for(var d,e=[],f=0,g=a.length,h=!c;g>f;f++)d=!b(a[f],f),d!==h&&e.push(a[f]);return e},map:function(a,b,c){var d,f=0,g=a.length,h=s(a),i=[];if(h)for(;g>f;f++)d=b(a[f],f,c),null!=d&&i.push(d);else for(f in a)d=b(a[f],f,c),null!=d&&i.push(d);return e.apply([],i)},guid:1,proxy:function(a,b){var c,e,f;return"string"==typeof b&&(f=a[b],b=a,a=f),n.isFunction(a)?(c=d.call(arguments,2),e=function(){return a.apply(b||this,c.concat(d.call(arguments)))},e.guid=a.guid=a.guid||n.guid++,e):void 0
},now:function(){return+new Date},support:l}),n.each("Boolean Number String Function Array Date RegExp Object Error".split(" "),function(a,b){h["[object "+b+"]"]=b.toLowerCase()});var t=function(a){function eb(a,b,d,e){var f,g,i,j,k,n,q,r,v,w;if((b?b.ownerDocument||b:u)!==m&&l(b),b=b||m,d=d||[],!a||"string"!=typeof a)return d;if(1!==(j=b.nodeType)&&9!==j)return[];if(o&&!e){if(f=$.exec(a))if(i=f[1]){if(9===j){if(g=b.getElementById(i),!g||!g.parentNode)return d;if(g.id===i)return d.push(g),d}else if(b.ownerDocument&&(g=b.ownerDocument.getElementById(i))&&s(b,g)&&g.id===i)return d.push(g),d
}else{if(f[2])return H.apply(d,b.getElementsByTagName(a)),d;if((i=f[3])&&c.getElementsByClassName&&b.getElementsByClassName)return H.apply(d,b.getElementsByClassName(i)),d}if(c.qsa&&(!p||!p.test(a))){if(r=q=t,v=b,w=9===j&&a,1===j&&"object"!==b.nodeName.toLowerCase()){for(n=pb(a),(q=b.getAttribute("id"))?r=q.replace(ab,"\\$&"):b.setAttribute("id",r),r="[id='"+r+"'] ",k=n.length;k--;)n[k]=r+qb(n[k]);v=_.test(a)&&nb(b.parentNode)||b,w=n.join(",")}if(w)try{return H.apply(d,v.querySelectorAll(w)),d}catch(x){}finally{q||b.removeAttribute("id")
}}}return h(a.replace(Q,"$1"),b,d,e)}function fb(){function b(c,e){return a.push(c+" ")>d.cacheLength&&delete b[a.shift()],b[c+" "]=e}var a=[];return b}function gb(a){return a[t]=!0,a}function hb(a){var b=m.createElement("div");try{return!!a(b)}catch(c){return!1}finally{b.parentNode&&b.parentNode.removeChild(b),b=null}}function ib(a,b){for(var c=a.split("|"),e=a.length;e--;)d.attrHandle[c[e]]=b}function jb(a,b){var c=b&&a,d=c&&1===a.nodeType&&1===b.nodeType&&(~b.sourceIndex||C)-(~a.sourceIndex||C);if(d)return d;
if(c)for(;c=c.nextSibling;)if(c===b)return-1;return a?1:-1}function kb(a){return function(b){var c=b.nodeName.toLowerCase();return"input"===c&&b.type===a}}function lb(a){return function(b){var c=b.nodeName.toLowerCase();return("input"===c||"button"===c)&&b.type===a}}function mb(a){return gb(function(b){return b=+b,gb(function(c,d){for(var e,f=a([],c.length,b),g=f.length;g--;)c[e=f[g]]&&(c[e]=!(d[e]=c[e]))})})}function nb(a){return a&&typeof a.getElementsByTagName!==B&&a}function ob(){}function pb(a,b){var c,e,f,g,h,i,j,k=y[a+" "];
if(k)return b?0:k.slice(0);for(h=a,i=[],j=d.preFilter;h;){(!c||(e=R.exec(h)))&&(e&&(h=h.slice(e[0].length)||h),i.push(f=[])),c=!1,(e=S.exec(h))&&(c=e.shift(),f.push({value:c,type:e[0].replace(Q," ")}),h=h.slice(c.length));for(g in d.filter)!(e=W[g].exec(h))||j[g]&&!(e=j[g](e))||(c=e.shift(),f.push({value:c,type:g,matches:e}),h=h.slice(c.length));if(!c)break}return b?h.length:h?eb.error(a):y(a,i).slice(0)}function qb(a){for(var b=0,c=a.length,d="";c>b;b++)d+=a[b].value;return d}function rb(a,b,c){var d=b.dir,e=c&&"parentNode"===d,f=w++;
return b.first?function(b,c,f){for(;b=b[d];)if(1===b.nodeType||e)return a(b,c,f)}:function(b,c,g){var h,i,j=[v,f];if(g){for(;b=b[d];)if((1===b.nodeType||e)&&a(b,c,g))return!0}else for(;b=b[d];)if(1===b.nodeType||e){if(i=b[t]||(b[t]={}),(h=i[d])&&h[0]===v&&h[1]===f)return j[2]=h[2];if(i[d]=j,j[2]=a(b,c,g))return!0}}}function sb(a){return a.length>1?function(b,c,d){for(var e=a.length;e--;)if(!a[e](b,c,d))return!1;return!0}:a[0]}function tb(a,b,c){for(var d=0,e=b.length;e>d;d++)eb(a,b[d],c);return c}function ub(a,b,c,d,e){for(var f,g=[],h=0,i=a.length,j=null!=b;i>h;h++)(f=a[h])&&(!c||c(f,d,e))&&(g.push(f),j&&b.push(h));
return g}function vb(a,b,c,d,e,f){return d&&!d[t]&&(d=vb(d)),e&&!e[t]&&(e=vb(e,f)),gb(function(f,g,h,i){var j,k,l,m=[],n=[],o=g.length,p=f||tb(b||"*",h.nodeType?[h]:h,[]),q=!a||!f&&b?p:ub(p,m,a,h,i),r=c?e||(f?a:o||d)?[]:g:q;if(c&&c(q,r,h,i),d)for(j=ub(r,n),d(j,[],h,i),k=j.length;k--;)(l=j[k])&&(r[n[k]]=!(q[n[k]]=l));if(f){if(e||a){if(e){for(j=[],k=r.length;k--;)(l=r[k])&&j.push(q[k]=l);e(null,r=[],j,i)}for(k=r.length;k--;)(l=r[k])&&(j=e?J.call(f,l):m[k])>-1&&(f[j]=!(g[j]=l))}}else r=ub(r===g?r.splice(o,r.length):r),e?e(null,g,r,i):H.apply(g,r)
})}function wb(a){for(var b,c,e,f=a.length,g=d.relative[a[0].type],h=g||d.relative[" "],j=g?1:0,k=rb(function(a){return a===b},h,!0),l=rb(function(a){return J.call(b,a)>-1},h,!0),m=[function(a,c,d){return!g&&(d||c!==i)||((b=c).nodeType?k(a,c,d):l(a,c,d))}];f>j;j++)if(c=d.relative[a[j].type])m=[rb(sb(m),c)];else{if(c=d.filter[a[j].type].apply(null,a[j].matches),c[t]){for(e=++j;f>e&&!d.relative[a[e].type];e++);return vb(j>1&&sb(m),j>1&&qb(a.slice(0,j-1).concat({value:" "===a[j-2].type?"*":""})).replace(Q,"$1"),c,e>j&&wb(a.slice(j,e)),f>e&&wb(a=a.slice(e)),f>e&&qb(a))
}m.push(c)}return sb(m)}function xb(a,b){var c=b.length>0,e=a.length>0,f=function(f,g,h,j,k){var l,n,o,p=0,q="0",r=f&&[],s=[],t=i,u=f||e&&d.find.TAG("*",k),w=v+=null==t?1:Math.random()||.1,x=u.length;for(k&&(i=g!==m&&g);q!==x&&null!=(l=u[q]);q++){if(e&&l){for(n=0;o=a[n++];)if(o(l,g,h)){j.push(l);break}k&&(v=w)}c&&((l=!o&&l)&&p--,f&&r.push(l))}if(p+=q,c&&q!==p){for(n=0;o=b[n++];)o(r,s,g,h);if(f){if(p>0)for(;q--;)r[q]||s[q]||(s[q]=F.call(j));s=ub(s)}H.apply(j,s),k&&!f&&s.length>0&&p+b.length>1&&eb.uniqueSort(j)
}return k&&(v=w,i=t),r};return c?gb(f):f}var b,c,d,e,f,g,h,i,j,k,l,m,n,o,p,q,r,s,t="sizzle"+-new Date,u=a.document,v=0,w=0,x=fb(),y=fb(),z=fb(),A=function(a,b){return a===b&&(k=!0),0},B="undefined",C=1<<31,D={}.hasOwnProperty,E=[],F=E.pop,G=E.push,H=E.push,I=E.slice,J=E.indexOf||function(a){for(var b=0,c=this.length;c>b;b++)if(this[b]===a)return b;return-1},K="checked|selected|async|autofocus|autoplay|controls|defer|disabled|hidden|ismap|loop|multiple|open|readonly|required|scoped",L="[\\x20\\t\\r\\n\\f]",M="(?:\\\\.|[\\w-]|[^\\x00-\\xa0])+",N=M.replace("w","w#"),O="\\["+L+"*("+M+")"+L+"*(?:([*^$|!~]?=)"+L+"*(?:(['\"])((?:\\\\.|[^\\\\])*?)\\3|("+N+")|)|)"+L+"*\\]",P=":("+M+")(?:\\(((['\"])((?:\\\\.|[^\\\\])*?)\\3|((?:\\\\.|[^\\\\()[\\]]|"+O.replace(3,8)+")*)|.*)\\)|)",Q=new RegExp("^"+L+"+|((?:^|[^\\\\])(?:\\\\.)*)"+L+"+$","g"),R=new RegExp("^"+L+"*,"+L+"*"),S=new RegExp("^"+L+"*([>+~]|"+L+")"+L+"*"),T=new RegExp("="+L+"*([^\\]'\"]*?)"+L+"*\\]","g"),U=new RegExp(P),V=new RegExp("^"+N+"$"),W={ID:new RegExp("^#("+M+")"),CLASS:new RegExp("^\\.("+M+")"),TAG:new RegExp("^("+M.replace("w","w*")+")"),ATTR:new RegExp("^"+O),PSEUDO:new RegExp("^"+P),CHILD:new RegExp("^:(only|first|last|nth|nth-last)-(child|of-type)(?:\\("+L+"*(even|odd|(([+-]|)(\\d*)n|)"+L+"*(?:([+-]|)"+L+"*(\\d+)|))"+L+"*\\)|)","i"),bool:new RegExp("^(?:"+K+")$","i"),needsContext:new RegExp("^"+L+"*[>+~]|:(even|odd|eq|gt|lt|nth|first|last)(?:\\("+L+"*((?:-\\d)?\\d*)"+L+"*\\)|)(?=[^-]|$)","i")},X=/^(?:input|select|textarea|button)$/i,Y=/^h\d$/i,Z=/^[^{]+\{\s*\[native \w/,$=/^(?:#([\w-]+)|(\w+)|\.([\w-]+))$/,_=/[+~]/,ab=/'|\\/g,bb=new RegExp("\\\\([\\da-f]{1,6}"+L+"?|("+L+")|.)","ig"),cb=function(a,b,c){var d="0x"+b-65536;
return d!==d||c?b:0>d?String.fromCharCode(d+65536):String.fromCharCode(d>>10|55296,1023&d|56320)};try{H.apply(E=I.call(u.childNodes),u.childNodes),E[u.childNodes.length].nodeType}catch(db){H={apply:E.length?function(a,b){G.apply(a,I.call(b))}:function(a,b){for(var c=a.length,d=0;a[c++]=b[d++];);a.length=c-1}}}c=eb.support={},f=eb.isXML=function(a){var b=a&&(a.ownerDocument||a).documentElement;return b?"HTML"!==b.nodeName:!1},l=eb.setDocument=function(a){var b,e=a?a.ownerDocument||a:u,g=e.defaultView;return e!==m&&9===e.nodeType&&e.documentElement?(m=e,n=e.documentElement,o=!f(e),g&&g!==g.top&&(g.addEventListener?g.addEventListener("unload",function(){l()
},!1):g.attachEvent&&g.attachEvent("onunload",function(){l()})),c.attributes=hb(function(a){return a.className="i",!a.getAttribute("className")}),c.getElementsByTagName=hb(function(a){return a.appendChild(e.createComment("")),!a.getElementsByTagName("*").length}),c.getElementsByClassName=Z.test(e.getElementsByClassName)&&hb(function(a){return a.innerHTML="<div class='a'></div><div class='a i'></div>",a.firstChild.className="i",2===a.getElementsByClassName("i").length}),c.getById=hb(function(a){return n.appendChild(a).id=t,!e.getElementsByName||!e.getElementsByName(t).length
}),c.getById?(d.find.ID=function(a,b){if(typeof b.getElementById!==B&&o){var c=b.getElementById(a);return c&&c.parentNode?[c]:[]}},d.filter.ID=function(a){var b=a.replace(bb,cb);return function(a){return a.getAttribute("id")===b}}):(delete d.find.ID,d.filter.ID=function(a){var b=a.replace(bb,cb);return function(a){var c=typeof a.getAttributeNode!==B&&a.getAttributeNode("id");return c&&c.value===b}}),d.find.TAG=c.getElementsByTagName?function(a,b){return typeof b.getElementsByTagName!==B?b.getElementsByTagName(a):void 0
}:function(a,b){var c,d=[],e=0,f=b.getElementsByTagName(a);if("*"===a){for(;c=f[e++];)1===c.nodeType&&d.push(c);return d}return f},d.find.CLASS=c.getElementsByClassName&&function(a,b){return typeof b.getElementsByClassName!==B&&o?b.getElementsByClassName(a):void 0},q=[],p=[],(c.qsa=Z.test(e.querySelectorAll))&&(hb(function(a){a.innerHTML="<select t=''><option selected=''></option></select>",a.querySelectorAll("[t^='']").length&&p.push("[*^$]="+L+"*(?:''|\"\")"),a.querySelectorAll("[selected]").length||p.push("\\["+L+"*(?:value|"+K+")"),a.querySelectorAll(":checked").length||p.push(":checked")
}),hb(function(a){var b=e.createElement("input");b.setAttribute("type","hidden"),a.appendChild(b).setAttribute("name","D"),a.querySelectorAll("[name=d]").length&&p.push("name"+L+"*[*^$|!~]?="),a.querySelectorAll(":enabled").length||p.push(":enabled",":disabled"),a.querySelectorAll("*,:x"),p.push(",.*:")})),(c.matchesSelector=Z.test(r=n.webkitMatchesSelector||n.mozMatchesSelector||n.oMatchesSelector||n.msMatchesSelector))&&hb(function(a){c.disconnectedMatch=r.call(a,"div"),r.call(a,"[s!='']:x"),q.push("!=",P)
}),p=p.length&&new RegExp(p.join("|")),q=q.length&&new RegExp(q.join("|")),b=Z.test(n.compareDocumentPosition),s=b||Z.test(n.contains)?function(a,b){var c=9===a.nodeType?a.documentElement:a,d=b&&b.parentNode;return a===d||!(!d||1!==d.nodeType||!(c.contains?c.contains(d):a.compareDocumentPosition&&16&a.compareDocumentPosition(d)))}:function(a,b){if(b)for(;b=b.parentNode;)if(b===a)return!0;return!1},A=b?function(a,b){if(a===b)return k=!0,0;var d=!a.compareDocumentPosition-!b.compareDocumentPosition;return d?d:(d=(a.ownerDocument||a)===(b.ownerDocument||b)?a.compareDocumentPosition(b):1,1&d||!c.sortDetached&&b.compareDocumentPosition(a)===d?a===e||a.ownerDocument===u&&s(u,a)?-1:b===e||b.ownerDocument===u&&s(u,b)?1:j?J.call(j,a)-J.call(j,b):0:4&d?-1:1)
}:function(a,b){if(a===b)return k=!0,0;var c,d=0,f=a.parentNode,g=b.parentNode,h=[a],i=[b];if(!f||!g)return a===e?-1:b===e?1:f?-1:g?1:j?J.call(j,a)-J.call(j,b):0;if(f===g)return jb(a,b);for(c=a;c=c.parentNode;)h.unshift(c);for(c=b;c=c.parentNode;)i.unshift(c);for(;h[d]===i[d];)d++;return d?jb(h[d],i[d]):h[d]===u?-1:i[d]===u?1:0},e):m},eb.matches=function(a,b){return eb(a,null,null,b)},eb.matchesSelector=function(a,b){if((a.ownerDocument||a)!==m&&l(a),b=b.replace(T,"='$1']"),!(!c.matchesSelector||!o||q&&q.test(b)||p&&p.test(b)))try{var d=r.call(a,b);
if(d||c.disconnectedMatch||a.document&&11!==a.document.nodeType)return d}catch(e){}return eb(b,m,null,[a]).length>0},eb.contains=function(a,b){return(a.ownerDocument||a)!==m&&l(a),s(a,b)},eb.attr=function(a,b){(a.ownerDocument||a)!==m&&l(a);var e=d.attrHandle[b.toLowerCase()],f=e&&D.call(d.attrHandle,b.toLowerCase())?e(a,b,!o):void 0;return void 0!==f?f:c.attributes||!o?a.getAttribute(b):(f=a.getAttributeNode(b))&&f.specified?f.value:null},eb.error=function(a){throw new Error("Syntax error, unrecognized expression: "+a)
},eb.uniqueSort=function(a){var b,d=[],e=0,f=0;if(k=!c.detectDuplicates,j=!c.sortStable&&a.slice(0),a.sort(A),k){for(;b=a[f++];)b===a[f]&&(e=d.push(f));for(;e--;)a.splice(d[e],1)}return j=null,a},e=eb.getText=function(a){var b,c="",d=0,f=a.nodeType;if(f){if(1===f||9===f||11===f){if("string"==typeof a.textContent)return a.textContent;for(a=a.firstChild;a;a=a.nextSibling)c+=e(a)}else if(3===f||4===f)return a.nodeValue}else for(;b=a[d++];)c+=e(b);return c},d=eb.selectors={cacheLength:50,createPseudo:gb,match:W,attrHandle:{},find:{},relative:{">":{dir:"parentNode",first:!0}," ":{dir:"parentNode"},"+":{dir:"previousSibling",first:!0},"~":{dir:"previousSibling"}},preFilter:{ATTR:function(a){return a[1]=a[1].replace(bb,cb),a[3]=(a[4]||a[5]||"").replace(bb,cb),"~="===a[2]&&(a[3]=" "+a[3]+" "),a.slice(0,4)
},CHILD:function(a){return a[1]=a[1].toLowerCase(),"nth"===a[1].slice(0,3)?(a[3]||eb.error(a[0]),a[4]=+(a[4]?a[5]+(a[6]||1):2*("even"===a[3]||"odd"===a[3])),a[5]=+(a[7]+a[8]||"odd"===a[3])):a[3]&&eb.error(a[0]),a},PSEUDO:function(a){var b,c=!a[5]&&a[2];return W.CHILD.test(a[0])?null:(a[3]&&void 0!==a[4]?a[2]=a[4]:c&&U.test(c)&&(b=pb(c,!0))&&(b=c.indexOf(")",c.length-b)-c.length)&&(a[0]=a[0].slice(0,b),a[2]=c.slice(0,b)),a.slice(0,3))}},filter:{TAG:function(a){var b=a.replace(bb,cb).toLowerCase();return"*"===a?function(){return!0
}:function(a){return a.nodeName&&a.nodeName.toLowerCase()===b}},CLASS:function(a){var b=x[a+" "];return b||(b=new RegExp("(^|"+L+")"+a+"("+L+"|$)"))&&x(a,function(a){return b.test("string"==typeof a.className&&a.className||typeof a.getAttribute!==B&&a.getAttribute("class")||"")})},ATTR:function(a,b,c){return function(d){var e=eb.attr(d,a);return null==e?"!="===b:b?(e+="","="===b?e===c:"!="===b?e!==c:"^="===b?c&&0===e.indexOf(c):"*="===b?c&&e.indexOf(c)>-1:"$="===b?c&&e.slice(-c.length)===c:"~="===b?(" "+e+" ").indexOf(c)>-1:"|="===b?e===c||e.slice(0,c.length+1)===c+"-":!1):!0
}},CHILD:function(a,b,c,d,e){var f="nth"!==a.slice(0,3),g="last"!==a.slice(-4),h="of-type"===b;return 1===d&&0===e?function(a){return!!a.parentNode}:function(b,c,i){var j,k,l,m,n,o,p=f!==g?"nextSibling":"previousSibling",q=b.parentNode,r=h&&b.nodeName.toLowerCase(),s=!i&&!h;if(q){if(f){for(;p;){for(l=b;l=l[p];)if(h?l.nodeName.toLowerCase()===r:1===l.nodeType)return!1;o=p="only"===a&&!o&&"nextSibling"}return!0}if(o=[g?q.firstChild:q.lastChild],g&&s){for(k=q[t]||(q[t]={}),j=k[a]||[],n=j[0]===v&&j[1],m=j[0]===v&&j[2],l=n&&q.childNodes[n];l=++n&&l&&l[p]||(m=n=0)||o.pop();)if(1===l.nodeType&&++m&&l===b){k[a]=[v,n,m];
break}}else if(s&&(j=(b[t]||(b[t]={}))[a])&&j[0]===v)m=j[1];else for(;(l=++n&&l&&l[p]||(m=n=0)||o.pop())&&((h?l.nodeName.toLowerCase()!==r:1!==l.nodeType)||!++m||(s&&((l[t]||(l[t]={}))[a]=[v,m]),l!==b)););return m-=e,m===d||m%d===0&&m/d>=0}}},PSEUDO:function(a,b){var c,e=d.pseudos[a]||d.setFilters[a.toLowerCase()]||eb.error("unsupported pseudo: "+a);return e[t]?e(b):e.length>1?(c=[a,a,"",b],d.setFilters.hasOwnProperty(a.toLowerCase())?gb(function(a,c){for(var d,f=e(a,b),g=f.length;g--;)d=J.call(a,f[g]),a[d]=!(c[d]=f[g])
}):function(a){return e(a,0,c)}):e}},pseudos:{not:gb(function(a){var b=[],c=[],d=g(a.replace(Q,"$1"));return d[t]?gb(function(a,b,c,e){for(var f,g=d(a,null,e,[]),h=a.length;h--;)(f=g[h])&&(a[h]=!(b[h]=f))}):function(a,e,f){return b[0]=a,d(b,null,f,c),!c.pop()}}),has:gb(function(a){return function(b){return eb(a,b).length>0}}),contains:gb(function(a){return function(b){return(b.textContent||b.innerText||e(b)).indexOf(a)>-1}}),lang:gb(function(a){return V.test(a||"")||eb.error("unsupported lang: "+a),a=a.replace(bb,cb).toLowerCase(),function(b){var c;
do if(c=o?b.lang:b.getAttribute("xml:lang")||b.getAttribute("lang"))return c=c.toLowerCase(),c===a||0===c.indexOf(a+"-");while((b=b.parentNode)&&1===b.nodeType);return!1}}),target:function(b){var c=a.location&&a.location.hash;return c&&c.slice(1)===b.id},root:function(a){return a===n},focus:function(a){return a===m.activeElement&&(!m.hasFocus||m.hasFocus())&&!!(a.type||a.href||~a.tabIndex)},enabled:function(a){return a.disabled===!1},disabled:function(a){return a.disabled===!0},checked:function(a){var b=a.nodeName.toLowerCase();
return"input"===b&&!!a.checked||"option"===b&&!!a.selected},selected:function(a){return a.parentNode&&a.parentNode.selectedIndex,a.selected===!0},empty:function(a){for(a=a.firstChild;a;a=a.nextSibling)if(a.nodeType<6)return!1;return!0},parent:function(a){return!d.pseudos.empty(a)},header:function(a){return Y.test(a.nodeName)},input:function(a){return X.test(a.nodeName)},button:function(a){var b=a.nodeName.toLowerCase();return"input"===b&&"button"===a.type||"button"===b},text:function(a){var b;return"input"===a.nodeName.toLowerCase()&&"text"===a.type&&(null==(b=a.getAttribute("type"))||"text"===b.toLowerCase())
},first:mb(function(){return[0]}),last:mb(function(a,b){return[b-1]}),eq:mb(function(a,b,c){return[0>c?c+b:c]}),even:mb(function(a,b){for(var c=0;b>c;c+=2)a.push(c);return a}),odd:mb(function(a,b){for(var c=1;b>c;c+=2)a.push(c);return a}),lt:mb(function(a,b,c){for(var d=0>c?c+b:c;--d>=0;)a.push(d);return a}),gt:mb(function(a,b,c){for(var d=0>c?c+b:c;++d<b;)a.push(d);return a})}},d.pseudos.nth=d.pseudos.eq;for(b in{radio:!0,checkbox:!0,file:!0,password:!0,image:!0})d.pseudos[b]=kb(b);for(b in{submit:!0,reset:!0})d.pseudos[b]=lb(b);
return ob.prototype=d.filters=d.pseudos,d.setFilters=new ob,g=eb.compile=function(a,b){var c,d=[],e=[],f=z[a+" "];if(!f){for(b||(b=pb(a)),c=b.length;c--;)f=wb(b[c]),f[t]?d.push(f):e.push(f);f=z(a,xb(e,d)),f.selector=a}return f},h=eb.select=function(a,b,e,f){var h,i,j,k,l,m="function"==typeof a&&a,n=!f&&pb(a=m.selector||a);if(e=e||[],1===n.length){if(i=n[0]=n[0].slice(0),i.length>2&&"ID"===(j=i[0]).type&&c.getById&&9===b.nodeType&&o&&d.relative[i[1].type]){if(b=(d.find.ID(j.matches[0].replace(bb,cb),b)||[])[0],!b)return e;
m&&(b=b.parentNode),a=a.slice(i.shift().value.length)}for(h=W.needsContext.test(a)?0:i.length;h--&&(j=i[h],!d.relative[k=j.type]);)if((l=d.find[k])&&(f=l(j.matches[0].replace(bb,cb),_.test(i[0].type)&&nb(b.parentNode)||b))){if(i.splice(h,1),a=f.length&&qb(i),!a)return H.apply(e,f),e;break}}return(m||g(a,n))(f,b,!o,e,_.test(a)&&nb(b.parentNode)||b),e},c.sortStable=t.split("").sort(A).join("")===t,c.detectDuplicates=!!k,l(),c.sortDetached=hb(function(a){return 1&a.compareDocumentPosition(m.createElement("div"))
}),hb(function(a){return a.innerHTML="<a href='#'></a>","#"===a.firstChild.getAttribute("href")})||ib("type|href|height|width",function(a,b,c){return c?void 0:a.getAttribute(b,"type"===b.toLowerCase()?1:2)}),c.attributes&&hb(function(a){return a.innerHTML="<input/>",a.firstChild.setAttribute("value",""),""===a.firstChild.getAttribute("value")})||ib("value",function(a,b,c){return c||"input"!==a.nodeName.toLowerCase()?void 0:a.defaultValue}),hb(function(a){return null==a.getAttribute("disabled")})||ib(K,function(a,b,c){var d;
return c?void 0:a[b]===!0?b.toLowerCase():(d=a.getAttributeNode(b))&&d.specified?d.value:null}),eb}(a);n.find=t,n.expr=t.selectors,n.expr[":"]=n.expr.pseudos,n.unique=t.uniqueSort,n.text=t.getText,n.isXMLDoc=t.isXML,n.contains=t.contains;var u=n.expr.match.needsContext,v=/^<(\w+)\s*\/?>(?:<\/\1>|)$/,w=/^.[^:#\[\.,]*$/;n.filter=function(a,b,c){var d=b[0];return c&&(a=":not("+a+")"),1===b.length&&1===d.nodeType?n.find.matchesSelector(d,a)?[d]:[]:n.find.matches(a,n.grep(b,function(a){return 1===a.nodeType}))},n.fn.extend({find:function(a){var b,c=[],d=this,e=d.length;
if("string"!=typeof a)return this.pushStack(n(a).filter(function(){for(b=0;e>b;b++)if(n.contains(d[b],this))return!0}));for(b=0;e>b;b++)n.find(a,d[b],c);return c=this.pushStack(e>1?n.unique(c):c),c.selector=this.selector?this.selector+" "+a:a,c},filter:function(a){return this.pushStack(x(this,a||[],!1))},not:function(a){return this.pushStack(x(this,a||[],!0))},is:function(a){return!!x(this,"string"==typeof a&&u.test(a)?n(a):a||[],!1).length}});var y,z=a.document,A=/^(?:\s*(<[\w\W]+>)[^>]*|#([\w-]*))$/,B=n.fn.init=function(a,b){var c,d;
if(!a)return this;if("string"==typeof a){if(c="<"===a.charAt(0)&&">"===a.charAt(a.length-1)&&a.length>=3?[null,a,null]:A.exec(a),!c||!c[1]&&b)return!b||b.jquery?(b||y).find(a):this.constructor(b).find(a);if(c[1]){if(b=b instanceof n?b[0]:b,n.merge(this,n.parseHTML(c[1],b&&b.nodeType?b.ownerDocument||b:z,!0)),v.test(c[1])&&n.isPlainObject(b))for(c in b)n.isFunction(this[c])?this[c](b[c]):this.attr(c,b[c]);return this}if(d=z.getElementById(c[2]),d&&d.parentNode){if(d.id!==c[2])return y.find(a);this.length=1,this[0]=d
}return this.context=z,this.selector=a,this}return a.nodeType?(this.context=this[0]=a,this.length=1,this):n.isFunction(a)?"undefined"!=typeof y.ready?y.ready(a):a(n):(void 0!==a.selector&&(this.selector=a.selector,this.context=a.context),n.makeArray(a,this))};B.prototype=n.fn,y=n(z);var C=/^(?:parents|prev(?:Until|All))/,D={children:!0,contents:!0,next:!0,prev:!0};n.extend({dir:function(a,b,c){for(var d=[],e=a[b];e&&9!==e.nodeType&&(void 0===c||1!==e.nodeType||!n(e).is(c));)1===e.nodeType&&d.push(e),e=e[b];return d
},sibling:function(a,b){for(var c=[];a;a=a.nextSibling)1===a.nodeType&&a!==b&&c.push(a);return c}}),n.fn.extend({has:function(a){var b,c=n(a,this),d=c.length;return this.filter(function(){for(b=0;d>b;b++)if(n.contains(this,c[b]))return!0})},closest:function(a,b){for(var c,d=0,e=this.length,f=[],g=u.test(a)||"string"!=typeof a?n(a,b||this.context):0;e>d;d++)for(c=this[d];c&&c!==b;c=c.parentNode)if(c.nodeType<11&&(g?g.index(c)>-1:1===c.nodeType&&n.find.matchesSelector(c,a))){f.push(c);break}return this.pushStack(f.length>1?n.unique(f):f)
},index:function(a){return a?"string"==typeof a?n.inArray(this[0],n(a)):n.inArray(a.jquery?a[0]:a,this):this[0]&&this[0].parentNode?this.first().prevAll().length:-1},add:function(a,b){return this.pushStack(n.unique(n.merge(this.get(),n(a,b))))},addBack:function(a){return this.add(null==a?this.prevObject:this.prevObject.filter(a))}}),n.each({parent:function(a){var b=a.parentNode;return b&&11!==b.nodeType?b:null},parents:function(a){return n.dir(a,"parentNode")},parentsUntil:function(a,b,c){return n.dir(a,"parentNode",c)
},next:function(a){return E(a,"nextSibling")},prev:function(a){return E(a,"previousSibling")},nextAll:function(a){return n.dir(a,"nextSibling")},prevAll:function(a){return n.dir(a,"previousSibling")},nextUntil:function(a,b,c){return n.dir(a,"nextSibling",c)},prevUntil:function(a,b,c){return n.dir(a,"previousSibling",c)},siblings:function(a){return n.sibling((a.parentNode||{}).firstChild,a)},children:function(a){return n.sibling(a.firstChild)},contents:function(a){return n.nodeName(a,"iframe")?a.contentDocument||a.contentWindow.document:n.merge([],a.childNodes)
}},function(a,b){n.fn[a]=function(c,d){var e=n.map(this,b,c);return"Until"!==a.slice(-5)&&(d=c),d&&"string"==typeof d&&(e=n.filter(d,e)),this.length>1&&(D[a]||(e=n.unique(e)),C.test(a)&&(e=e.reverse())),this.pushStack(e)}});var F=/\S+/g,G={};n.Callbacks=function(a){a="string"==typeof a?G[a]||H(a):n.extend({},a);var b,c,d,e,f,g,h=[],i=!a.once&&[],j=function(l){for(c=a.memory&&l,d=!0,f=g||0,g=0,e=h.length,b=!0;h&&e>f;f++)if(h[f].apply(l[0],l[1])===!1&&a.stopOnFalse){c=!1;break}b=!1,h&&(i?i.length&&j(i.shift()):c?h=[]:k.disable())
},k={add:function(){if(h){var d=h.length;!function f(b){n.each(b,function(b,c){var d=n.type(c);"function"===d?a.unique&&k.has(c)||h.push(c):c&&c.length&&"string"!==d&&f(c)})}(arguments),b?e=h.length:c&&(g=d,j(c))}return this},remove:function(){return h&&n.each(arguments,function(a,c){for(var d;(d=n.inArray(c,h,d))>-1;)h.splice(d,1),b&&(e>=d&&e--,f>=d&&f--)}),this},has:function(a){return a?n.inArray(a,h)>-1:!(!h||!h.length)},empty:function(){return h=[],e=0,this},disable:function(){return h=i=c=void 0,this},disabled:function(){return!h
},lock:function(){return i=void 0,c||k.disable(),this},locked:function(){return!i},fireWith:function(a,c){return!h||d&&!i||(c=c||[],c=[a,c.slice?c.slice():c],b?i.push(c):j(c)),this},fire:function(){return k.fireWith(this,arguments),this},fired:function(){return!!d}};return k},n.extend({Deferred:function(a){var b=[["resolve","done",n.Callbacks("once memory"),"resolved"],["reject","fail",n.Callbacks("once memory"),"rejected"],["notify","progress",n.Callbacks("memory")]],c="pending",d={state:function(){return c
},always:function(){return e.done(arguments).fail(arguments),this},then:function(){var a=arguments;return n.Deferred(function(c){n.each(b,function(b,f){var g=n.isFunction(a[b])&&a[b];e[f[1]](function(){var a=g&&g.apply(this,arguments);a&&n.isFunction(a.promise)?a.promise().done(c.resolve).fail(c.reject).progress(c.notify):c[f[0]+"With"](this===d?c.promise():this,g?[a]:arguments)})}),a=null}).promise()},promise:function(a){return null!=a?n.extend(a,d):d}},e={};return d.pipe=d.then,n.each(b,function(a,f){var g=f[2],h=f[3];
d[f[1]]=g.add,h&&g.add(function(){c=h},b[1^a][2].disable,b[2][2].lock),e[f[0]]=function(){return e[f[0]+"With"](this===e?d:this,arguments),this},e[f[0]+"With"]=g.fireWith}),d.promise(e),a&&a.call(e,e),e},when:function(a){var i,j,k,b=0,c=d.call(arguments),e=c.length,f=1!==e||a&&n.isFunction(a.promise)?e:0,g=1===f?a:n.Deferred(),h=function(a,b,c){return function(e){b[a]=this,c[a]=arguments.length>1?d.call(arguments):e,c===i?g.notifyWith(b,c):--f||g.resolveWith(b,c)}};if(e>1)for(i=new Array(e),j=new Array(e),k=new Array(e);e>b;b++)c[b]&&n.isFunction(c[b].promise)?c[b].promise().done(h(b,k,c)).fail(g.reject).progress(h(b,j,i)):--f;
return f||g.resolveWith(k,c),g.promise()}});var I;n.fn.ready=function(a){return n.ready.promise().done(a),this},n.extend({isReady:!1,readyWait:1,holdReady:function(a){a?n.readyWait++:n.ready(!0)},ready:function(a){if(a===!0?!--n.readyWait:!n.isReady){if(!z.body)return setTimeout(n.ready);n.isReady=!0,a!==!0&&--n.readyWait>0||(I.resolveWith(z,[n]),n.fn.trigger&&n(z).trigger("ready").off("ready"))}}}),n.ready.promise=function(b){if(!I)if(I=n.Deferred(),"complete"===z.readyState)setTimeout(n.ready);else if(z.addEventListener)z.addEventListener("DOMContentLoaded",K,!1),a.addEventListener("load",K,!1);
else{z.attachEvent("onreadystatechange",K),a.attachEvent("onload",K);var c=!1;try{c=null==a.frameElement&&z.documentElement}catch(d){}c&&c.doScroll&&!function e(){if(!n.isReady){try{c.doScroll("left")}catch(a){return setTimeout(e,50)}J(),n.ready()}}()}return I.promise(b)};var M,L="undefined";for(M in n(l))break;l.ownLast="0"!==M,l.inlineBlockNeedsLayout=!1,n(function(){var a,b,c=z.getElementsByTagName("body")[0];c&&(a=z.createElement("div"),a.style.cssText="border:0;width:0;height:0;position:absolute;top:0;left:-9999px;margin-top:1px",b=z.createElement("div"),c.appendChild(a).appendChild(b),typeof b.style.zoom!==L&&(b.style.cssText="border:0;margin:0;width:1px;padding:1px;display:inline;zoom:1",(l.inlineBlockNeedsLayout=3===b.offsetWidth)&&(c.style.zoom=1)),c.removeChild(a),a=b=null)
}),function(){var a=z.createElement("div");if(null==l.deleteExpando){l.deleteExpando=!0;try{delete a.test}catch(b){l.deleteExpando=!1}}a=null}(),n.acceptData=function(a){var b=n.noData[(a.nodeName+" ").toLowerCase()],c=+a.nodeType||1;return 1!==c&&9!==c?!1:!b||b!==!0&&a.getAttribute("classid")===b};var N=/^(?:\{[\w\W]*\}|\[[\w\W]*\])$/,O=/([A-Z])/g;n.extend({cache:{},noData:{"applet ":!0,"embed ":!0,"object ":"clsid:D27CDB6E-AE6D-11cf-96B8-444553540000"},hasData:function(a){return a=a.nodeType?n.cache[a[n.expando]]:a[n.expando],!!a&&!Q(a)
},data:function(a,b,c){return R(a,b,c)},removeData:function(a,b){return S(a,b)},_data:function(a,b,c){return R(a,b,c,!0)},_removeData:function(a,b){return S(a,b,!0)}}),n.fn.extend({data:function(a,b){var c,d,e,f=this[0],g=f&&f.attributes;if(void 0===a){if(this.length&&(e=n.data(f),1===f.nodeType&&!n._data(f,"parsedAttrs"))){for(c=g.length;c--;)d=g[c].name,0===d.indexOf("data-")&&(d=n.camelCase(d.slice(5)),P(f,d,e[d]));n._data(f,"parsedAttrs",!0)}return e}return"object"==typeof a?this.each(function(){n.data(this,a)
}):arguments.length>1?this.each(function(){n.data(this,a,b)}):f?P(f,a,n.data(f,a)):void 0},removeData:function(a){return this.each(function(){n.removeData(this,a)})}}),n.extend({queue:function(a,b,c){var d;return a?(b=(b||"fx")+"queue",d=n._data(a,b),c&&(!d||n.isArray(c)?d=n._data(a,b,n.makeArray(c)):d.push(c)),d||[]):void 0},dequeue:function(a,b){b=b||"fx";var c=n.queue(a,b),d=c.length,e=c.shift(),f=n._queueHooks(a,b),g=function(){n.dequeue(a,b)};"inprogress"===e&&(e=c.shift(),d--),e&&("fx"===b&&c.unshift("inprogress"),delete f.stop,e.call(a,g,f)),!d&&f&&f.empty.fire()
},_queueHooks:function(a,b){var c=b+"queueHooks";return n._data(a,c)||n._data(a,c,{empty:n.Callbacks("once memory").add(function(){n._removeData(a,b+"queue"),n._removeData(a,c)})})}}),n.fn.extend({queue:function(a,b){var c=2;return"string"!=typeof a&&(b=a,a="fx",c--),arguments.length<c?n.queue(this[0],a):void 0===b?this:this.each(function(){var c=n.queue(this,a,b);n._queueHooks(this,a),"fx"===a&&"inprogress"!==c[0]&&n.dequeue(this,a)})},dequeue:function(a){return this.each(function(){n.dequeue(this,a)})},clearQueue:function(a){return this.queue(a||"fx",[])
},promise:function(a,b){var c,d=1,e=n.Deferred(),f=this,g=this.length,h=function(){--d||e.resolveWith(f,[f])};for("string"!=typeof a&&(b=a,a=void 0),a=a||"fx";g--;)c=n._data(f[g],a+"queueHooks"),c&&c.empty&&(d++,c.empty.add(h));return h(),e.promise(b)}});var T=/[+-]?(?:\d*\.|)\d+(?:[eE][+-]?\d+|)/.source,U=["Top","Right","Bottom","Left"],V=function(a,b){return a=b||a,"none"===n.css(a,"display")||!n.contains(a.ownerDocument,a)},W=n.access=function(a,b,c,d,e,f,g){var h=0,i=a.length,j=null==c;if("object"===n.type(c)){e=!0;
for(h in c)n.access(a,b,h,c[h],!0,f,g)}else if(void 0!==d&&(e=!0,n.isFunction(d)||(g=!0),j&&(g?(b.call(a,d),b=null):(j=b,b=function(a,b,c){return j.call(n(a),c)})),b))for(;i>h;h++)b(a[h],c,g?d:d.call(a[h],h,b(a[h],c)));return e?a:j?b.call(a):i?b(a[0],c):f},X=/^(?:checkbox|radio)$/i;!function(){var a=z.createDocumentFragment(),b=z.createElement("div"),c=z.createElement("input");if(b.setAttribute("className","t"),b.innerHTML="  <link/><table></table><a href='/a'>a</a>",l.leadingWhitespace=3===b.firstChild.nodeType,l.tbody=!b.getElementsByTagName("tbody").length,l.htmlSerialize=!!b.getElementsByTagName("link").length,l.html5Clone="<:nav></:nav>"!==z.createElement("nav").cloneNode(!0).outerHTML,c.type="checkbox",c.checked=!0,a.appendChild(c),l.appendChecked=c.checked,b.innerHTML="<textarea>x</textarea>",l.noCloneChecked=!!b.cloneNode(!0).lastChild.defaultValue,a.appendChild(b),b.innerHTML="<input type='radio' checked='checked' name='t'/>",l.checkClone=b.cloneNode(!0).cloneNode(!0).lastChild.checked,l.noCloneEvent=!0,b.attachEvent&&(b.attachEvent("onclick",function(){l.noCloneEvent=!1
}),b.cloneNode(!0).click()),null==l.deleteExpando){l.deleteExpando=!0;try{delete b.test}catch(d){l.deleteExpando=!1}}a=b=c=null}(),function(){var b,c,d=z.createElement("div");for(b in{submit:!0,change:!0,focusin:!0})c="on"+b,(l[b+"Bubbles"]=c in a)||(d.setAttribute(c,"t"),l[b+"Bubbles"]=d.attributes[c].expando===!1);d=null}();var Y=/^(?:input|select|textarea)$/i,Z=/^key/,$=/^(?:mouse|contextmenu)|click/,_=/^(?:focusinfocus|focusoutblur)$/,ab=/^([^.]*)(?:\.(.+)|)$/;n.event={global:{},add:function(a,b,c,d,e){var f,g,h,i,j,k,l,m,o,p,q,r=n._data(a);
if(r){for(c.handler&&(i=c,c=i.handler,e=i.selector),c.guid||(c.guid=n.guid++),(g=r.events)||(g=r.events={}),(k=r.handle)||(k=r.handle=function(a){return typeof n===L||a&&n.event.triggered===a.type?void 0:n.event.dispatch.apply(k.elem,arguments)},k.elem=a),b=(b||"").match(F)||[""],h=b.length;h--;)f=ab.exec(b[h])||[],o=q=f[1],p=(f[2]||"").split(".").sort(),o&&(j=n.event.special[o]||{},o=(e?j.delegateType:j.bindType)||o,j=n.event.special[o]||{},l=n.extend({type:o,origType:q,data:d,handler:c,guid:c.guid,selector:e,needsContext:e&&n.expr.match.needsContext.test(e),namespace:p.join(".")},i),(m=g[o])||(m=g[o]=[],m.delegateCount=0,j.setup&&j.setup.call(a,d,p,k)!==!1||(a.addEventListener?a.addEventListener(o,k,!1):a.attachEvent&&a.attachEvent("on"+o,k))),j.add&&(j.add.call(a,l),l.handler.guid||(l.handler.guid=c.guid)),e?m.splice(m.delegateCount++,0,l):m.push(l),n.event.global[o]=!0);
a=null}},remove:function(a,b,c,d,e){var f,g,h,i,j,k,l,m,o,p,q,r=n.hasData(a)&&n._data(a);if(r&&(k=r.events)){for(b=(b||"").match(F)||[""],j=b.length;j--;)if(h=ab.exec(b[j])||[],o=q=h[1],p=(h[2]||"").split(".").sort(),o){for(l=n.event.special[o]||{},o=(d?l.delegateType:l.bindType)||o,m=k[o]||[],h=h[2]&&new RegExp("(^|\\.)"+p.join("\\.(?:.*\\.|)")+"(\\.|$)"),i=f=m.length;f--;)g=m[f],!e&&q!==g.origType||c&&c.guid!==g.guid||h&&!h.test(g.namespace)||d&&d!==g.selector&&("**"!==d||!g.selector)||(m.splice(f,1),g.selector&&m.delegateCount--,l.remove&&l.remove.call(a,g));
i&&!m.length&&(l.teardown&&l.teardown.call(a,p,r.handle)!==!1||n.removeEvent(a,o,r.handle),delete k[o])}else for(o in k)n.event.remove(a,o+b[j],c,d,!0);n.isEmptyObject(k)&&(delete r.handle,n._removeData(a,"events"))}},trigger:function(b,c,d,e){var f,g,h,i,k,l,m,o=[d||z],p=j.call(b,"type")?b.type:b,q=j.call(b,"namespace")?b.namespace.split("."):[];if(h=l=d=d||z,3!==d.nodeType&&8!==d.nodeType&&!_.test(p+n.event.triggered)&&(p.indexOf(".")>=0&&(q=p.split("."),p=q.shift(),q.sort()),g=p.indexOf(":")<0&&"on"+p,b=b[n.expando]?b:new n.Event(p,"object"==typeof b&&b),b.isTrigger=e?2:3,b.namespace=q.join("."),b.namespace_re=b.namespace?new RegExp("(^|\\.)"+q.join("\\.(?:.*\\.|)")+"(\\.|$)"):null,b.result=void 0,b.target||(b.target=d),c=null==c?[b]:n.makeArray(c,[b]),k=n.event.special[p]||{},e||!k.trigger||k.trigger.apply(d,c)!==!1)){if(!e&&!k.noBubble&&!n.isWindow(d)){for(i=k.delegateType||p,_.test(i+p)||(h=h.parentNode);h;h=h.parentNode)o.push(h),l=h;
l===(d.ownerDocument||z)&&o.push(l.defaultView||l.parentWindow||a)}for(m=0;(h=o[m++])&&!b.isPropagationStopped();)b.type=m>1?i:k.bindType||p,f=(n._data(h,"events")||{})[b.type]&&n._data(h,"handle"),f&&f.apply(h,c),f=g&&h[g],f&&f.apply&&n.acceptData(h)&&(b.result=f.apply(h,c),b.result===!1&&b.preventDefault());if(b.type=p,!e&&!b.isDefaultPrevented()&&(!k._default||k._default.apply(o.pop(),c)===!1)&&n.acceptData(d)&&g&&d[p]&&!n.isWindow(d)){l=d[g],l&&(d[g]=null),n.event.triggered=p;try{d[p]()}catch(r){}n.event.triggered=void 0,l&&(d[g]=l)
}return b.result}},dispatch:function(a){a=n.event.fix(a);var b,c,e,f,g,h=[],i=d.call(arguments),j=(n._data(this,"events")||{})[a.type]||[],k=n.event.special[a.type]||{};if(i[0]=a,a.delegateTarget=this,!k.preDispatch||k.preDispatch.call(this,a)!==!1){for(h=n.event.handlers.call(this,a,j),b=0;(f=h[b++])&&!a.isPropagationStopped();)for(a.currentTarget=f.elem,g=0;(e=f.handlers[g++])&&!a.isImmediatePropagationStopped();)(!a.namespace_re||a.namespace_re.test(e.namespace))&&(a.handleObj=e,a.data=e.data,c=((n.event.special[e.origType]||{}).handle||e.handler).apply(f.elem,i),void 0!==c&&(a.result=c)===!1&&(a.preventDefault(),a.stopPropagation()));
return k.postDispatch&&k.postDispatch.call(this,a),a.result}},handlers:function(a,b){var c,d,e,f,g=[],h=b.delegateCount,i=a.target;if(h&&i.nodeType&&(!a.button||"click"!==a.type))for(;i!=this;i=i.parentNode||this)if(1===i.nodeType&&(i.disabled!==!0||"click"!==a.type)){for(e=[],f=0;h>f;f++)d=b[f],c=d.selector+" ",void 0===e[c]&&(e[c]=d.needsContext?n(c,this).index(i)>=0:n.find(c,this,null,[i]).length),e[c]&&e.push(d);e.length&&g.push({elem:i,handlers:e})}return h<b.length&&g.push({elem:this,handlers:b.slice(h)}),g
},fix:function(a){if(a[n.expando])return a;var b,c,d,e=a.type,f=a,g=this.fixHooks[e];for(g||(this.fixHooks[e]=g=$.test(e)?this.mouseHooks:Z.test(e)?this.keyHooks:{}),d=g.props?this.props.concat(g.props):this.props,a=new n.Event(f),b=d.length;b--;)c=d[b],a[c]=f[c];return a.target||(a.target=f.srcElement||z),3===a.target.nodeType&&(a.target=a.target.parentNode),a.metaKey=!!a.metaKey,g.filter?g.filter(a,f):a},props:"altKey bubbles cancelable ctrlKey currentTarget eventPhase metaKey relatedTarget shiftKey target timeStamp view which".split(" "),fixHooks:{},keyHooks:{props:"char charCode key keyCode".split(" "),filter:function(a,b){return null==a.which&&(a.which=null!=b.charCode?b.charCode:b.keyCode),a
}},mouseHooks:{props:"button buttons clientX clientY fromElement offsetX offsetY pageX pageY screenX screenY toElement".split(" "),filter:function(a,b){var c,d,e,f=b.button,g=b.fromElement;return null==a.pageX&&null!=b.clientX&&(d=a.target.ownerDocument||z,e=d.documentElement,c=d.body,a.pageX=b.clientX+(e&&e.scrollLeft||c&&c.scrollLeft||0)-(e&&e.clientLeft||c&&c.clientLeft||0),a.pageY=b.clientY+(e&&e.scrollTop||c&&c.scrollTop||0)-(e&&e.clientTop||c&&c.clientTop||0)),!a.relatedTarget&&g&&(a.relatedTarget=g===a.target?b.toElement:g),a.which||void 0===f||(a.which=1&f?1:2&f?3:4&f?2:0),a
}},special:{load:{noBubble:!0},focus:{trigger:function(){if(this!==db()&&this.focus)try{return this.focus(),!1}catch(a){}},delegateType:"focusin"},blur:{trigger:function(){return this===db()&&this.blur?(this.blur(),!1):void 0},delegateType:"focusout"},click:{trigger:function(){return n.nodeName(this,"input")&&"checkbox"===this.type&&this.click?(this.click(),!1):void 0},_default:function(a){return n.nodeName(a.target,"a")}},beforeunload:{postDispatch:function(a){void 0!==a.result&&(a.originalEvent.returnValue=a.result)
}}},simulate:function(a,b,c,d){var e=n.extend(new n.Event,c,{type:a,isSimulated:!0,originalEvent:{}});d?n.event.trigger(e,null,b):n.event.dispatch.call(b,e),e.isDefaultPrevented()&&c.preventDefault()}},n.removeEvent=z.removeEventListener?function(a,b,c){a.removeEventListener&&a.removeEventListener(b,c,!1)}:function(a,b,c){var d="on"+b;a.detachEvent&&(typeof a[d]===L&&(a[d]=null),a.detachEvent(d,c))},n.Event=function(a,b){return this instanceof n.Event?(a&&a.type?(this.originalEvent=a,this.type=a.type,this.isDefaultPrevented=a.defaultPrevented||void 0===a.defaultPrevented&&(a.returnValue===!1||a.getPreventDefault&&a.getPreventDefault())?bb:cb):this.type=a,b&&n.extend(this,b),this.timeStamp=a&&a.timeStamp||n.now(),this[n.expando]=!0,void 0):new n.Event(a,b)
},n.Event.prototype={isDefaultPrevented:cb,isPropagationStopped:cb,isImmediatePropagationStopped:cb,preventDefault:function(){var a=this.originalEvent;this.isDefaultPrevented=bb,a&&(a.preventDefault?a.preventDefault():a.returnValue=!1)},stopPropagation:function(){var a=this.originalEvent;this.isPropagationStopped=bb,a&&(a.stopPropagation&&a.stopPropagation(),a.cancelBubble=!0)},stopImmediatePropagation:function(){this.isImmediatePropagationStopped=bb,this.stopPropagation()}},n.each({mouseenter:"mouseover",mouseleave:"mouseout"},function(a,b){n.event.special[a]={delegateType:b,bindType:b,handle:function(a){var c,d=this,e=a.relatedTarget,f=a.handleObj;
return(!e||e!==d&&!n.contains(d,e))&&(a.type=f.origType,c=f.handler.apply(this,arguments),a.type=b),c}}}),l.submitBubbles||(n.event.special.submit={setup:function(){return n.nodeName(this,"form")?!1:(n.event.add(this,"click._submit keypress._submit",function(a){var b=a.target,c=n.nodeName(b,"input")||n.nodeName(b,"button")?b.form:void 0;c&&!n._data(c,"submitBubbles")&&(n.event.add(c,"submit._submit",function(a){a._submit_bubble=!0}),n._data(c,"submitBubbles",!0))}),void 0)},postDispatch:function(a){a._submit_bubble&&(delete a._submit_bubble,this.parentNode&&!a.isTrigger&&n.event.simulate("submit",this.parentNode,a,!0))
},teardown:function(){return n.nodeName(this,"form")?!1:(n.event.remove(this,"._submit"),void 0)}}),l.changeBubbles||(n.event.special.change={setup:function(){return Y.test(this.nodeName)?(("checkbox"===this.type||"radio"===this.type)&&(n.event.add(this,"propertychange._change",function(a){"checked"===a.originalEvent.propertyName&&(this._just_changed=!0)}),n.event.add(this,"click._change",function(a){this._just_changed&&!a.isTrigger&&(this._just_changed=!1),n.event.simulate("change",this,a,!0)})),!1):(n.event.add(this,"beforeactivate._change",function(a){var b=a.target;
Y.test(b.nodeName)&&!n._data(b,"changeBubbles")&&(n.event.add(b,"change._change",function(a){!this.parentNode||a.isSimulated||a.isTrigger||n.event.simulate("change",this.parentNode,a,!0)}),n._data(b,"changeBubbles",!0))}),void 0)},handle:function(a){var b=a.target;return this!==b||a.isSimulated||a.isTrigger||"radio"!==b.type&&"checkbox"!==b.type?a.handleObj.handler.apply(this,arguments):void 0},teardown:function(){return n.event.remove(this,"._change"),!Y.test(this.nodeName)}}),l.focusinBubbles||n.each({focus:"focusin",blur:"focusout"},function(a,b){var c=function(a){n.event.simulate(b,a.target,n.event.fix(a),!0)
};n.event.special[b]={setup:function(){var d=this.ownerDocument||this,e=n._data(d,b);e||d.addEventListener(a,c,!0),n._data(d,b,(e||0)+1)},teardown:function(){var d=this.ownerDocument||this,e=n._data(d,b)-1;e?n._data(d,b,e):(d.removeEventListener(a,c,!0),n._removeData(d,b))}}}),n.fn.extend({on:function(a,b,c,d,e){var f,g;if("object"==typeof a){"string"!=typeof b&&(c=c||b,b=void 0);for(f in a)this.on(f,b,c,a[f],e);return this}if(null==c&&null==d?(d=b,c=b=void 0):null==d&&("string"==typeof b?(d=c,c=void 0):(d=c,c=b,b=void 0)),d===!1)d=cb;
else if(!d)return this;return 1===e&&(g=d,d=function(a){return n().off(a),g.apply(this,arguments)},d.guid=g.guid||(g.guid=n.guid++)),this.each(function(){n.event.add(this,a,d,c,b)})},one:function(a,b,c,d){return this.on(a,b,c,d,1)},off:function(a,b,c){var d,e;if(a&&a.preventDefault&&a.handleObj)return d=a.handleObj,n(a.delegateTarget).off(d.namespace?d.origType+"."+d.namespace:d.origType,d.selector,d.handler),this;if("object"==typeof a){for(e in a)this.off(e,b,a[e]);return this}return(b===!1||"function"==typeof b)&&(c=b,b=void 0),c===!1&&(c=cb),this.each(function(){n.event.remove(this,a,c,b)
})},trigger:function(a,b){return this.each(function(){n.event.trigger(a,b,this)})},triggerHandler:function(a,b){var c=this[0];return c?n.event.trigger(a,b,c,!0):void 0}});var fb="abbr|article|aside|audio|bdi|canvas|data|datalist|details|figcaption|figure|footer|header|hgroup|mark|meter|nav|output|progress|section|summary|time|video",gb=/ jQuery\d+="(?:null|\d+)"/g,hb=new RegExp("<(?:"+fb+")[\\s/>]","i"),ib=/^\s+/,jb=/<(?!area|br|col|embed|hr|img|input|link|meta|param)(([\w:]+)[^>]*)\/>/gi,kb=/<([\w:]+)/,lb=/<tbody/i,mb=/<|&#?\w+;/,nb=/<(?:script|style|link)/i,ob=/checked\s*(?:[^=]|=\s*.checked.)/i,pb=/^$|\/(?:java|ecma)script/i,qb=/^true\/(.*)/,rb=/^\s*<!(?:\[CDATA\[|--)|(?:\]\]|--)>\s*$/g,sb={option:[1,"<select multiple='multiple'>","</select>"],legend:[1,"<fieldset>","</fieldset>"],area:[1,"<map>","</map>"],param:[1,"<object>","</object>"],thead:[1,"<table>","</table>"],tr:[2,"<table><tbody>","</tbody></table>"],col:[2,"<table><tbody></tbody><colgroup>","</colgroup></table>"],td:[3,"<table><tbody><tr>","</tr></tbody></table>"],_default:l.htmlSerialize?[0,"",""]:[1,"X<div>","</div>"]},tb=eb(z),ub=tb.appendChild(z.createElement("div"));
sb.optgroup=sb.option,sb.tbody=sb.tfoot=sb.colgroup=sb.caption=sb.thead,sb.th=sb.td,n.extend({clone:function(a,b,c){var d,e,f,g,h,i=n.contains(a.ownerDocument,a);if(l.html5Clone||n.isXMLDoc(a)||!hb.test("<"+a.nodeName+">")?f=a.cloneNode(!0):(ub.innerHTML=a.outerHTML,ub.removeChild(f=ub.firstChild)),!(l.noCloneEvent&&l.noCloneChecked||1!==a.nodeType&&11!==a.nodeType||n.isXMLDoc(a)))for(d=vb(f),h=vb(a),g=0;null!=(e=h[g]);++g)d[g]&&Cb(e,d[g]);if(b)if(c)for(h=h||vb(a),d=d||vb(f),g=0;null!=(e=h[g]);g++)Bb(e,d[g]);
else Bb(a,f);return d=vb(f,"script"),d.length>0&&Ab(d,!i&&vb(a,"script")),d=h=e=null,f},buildFragment:function(a,b,c,d){for(var e,f,g,h,i,j,k,m=a.length,o=eb(b),p=[],q=0;m>q;q++)if(f=a[q],f||0===f)if("object"===n.type(f))n.merge(p,f.nodeType?[f]:f);else if(mb.test(f)){for(h=h||o.appendChild(b.createElement("div")),i=(kb.exec(f)||["",""])[1].toLowerCase(),k=sb[i]||sb._default,h.innerHTML=k[1]+f.replace(jb,"<$1></$2>")+k[2],e=k[0];e--;)h=h.lastChild;if(!l.leadingWhitespace&&ib.test(f)&&p.push(b.createTextNode(ib.exec(f)[0])),!l.tbody)for(f="table"!==i||lb.test(f)?"<table>"!==k[1]||lb.test(f)?0:h:h.firstChild,e=f&&f.childNodes.length;e--;)n.nodeName(j=f.childNodes[e],"tbody")&&!j.childNodes.length&&f.removeChild(j);
for(n.merge(p,h.childNodes),h.textContent="";h.firstChild;)h.removeChild(h.firstChild);h=o.lastChild}else p.push(b.createTextNode(f));for(h&&o.removeChild(h),l.appendChecked||n.grep(vb(p,"input"),wb),q=0;f=p[q++];)if((!d||-1===n.inArray(f,d))&&(g=n.contains(f.ownerDocument,f),h=vb(o.appendChild(f),"script"),g&&Ab(h),c))for(e=0;f=h[e++];)pb.test(f.type||"")&&c.push(f);return h=null,o},cleanData:function(a,b){for(var d,e,f,g,h=0,i=n.expando,j=n.cache,k=l.deleteExpando,m=n.event.special;null!=(d=a[h]);h++)if((b||n.acceptData(d))&&(f=d[i],g=f&&j[f])){if(g.events)for(e in g.events)m[e]?n.event.remove(d,e):n.removeEvent(d,e,g.handle);
j[f]&&(delete j[f],k?delete d[i]:typeof d.removeAttribute!==L?d.removeAttribute(i):d[i]=null,c.push(f))}}}),n.fn.extend({text:function(a){return W(this,function(a){return void 0===a?n.text(this):this.empty().append((this[0]&&this[0].ownerDocument||z).createTextNode(a))},null,a,arguments.length)},append:function(){return this.domManip(arguments,function(a){if(1===this.nodeType||11===this.nodeType||9===this.nodeType){var b=xb(this,a);b.appendChild(a)}})},prepend:function(){return this.domManip(arguments,function(a){if(1===this.nodeType||11===this.nodeType||9===this.nodeType){var b=xb(this,a);
b.insertBefore(a,b.firstChild)}})},before:function(){return this.domManip(arguments,function(a){this.parentNode&&this.parentNode.insertBefore(a,this)})},after:function(){return this.domManip(arguments,function(a){this.parentNode&&this.parentNode.insertBefore(a,this.nextSibling)})},remove:function(a,b){for(var c,d=a?n.filter(a,this):this,e=0;null!=(c=d[e]);e++)b||1!==c.nodeType||n.cleanData(vb(c)),c.parentNode&&(b&&n.contains(c.ownerDocument,c)&&Ab(vb(c,"script")),c.parentNode.removeChild(c));return this},empty:function(){for(var a,b=0;null!=(a=this[b]);b++){for(1===a.nodeType&&n.cleanData(vb(a,!1));a.firstChild;)a.removeChild(a.firstChild);
a.options&&n.nodeName(a,"select")&&(a.options.length=0)}return this},clone:function(a,b){return a=null==a?!1:a,b=null==b?a:b,this.map(function(){return n.clone(this,a,b)})},html:function(a){return W(this,function(a){var b=this[0]||{},c=0,d=this.length;if(void 0===a)return 1===b.nodeType?b.innerHTML.replace(gb,""):void 0;if(!("string"!=typeof a||nb.test(a)||!l.htmlSerialize&&hb.test(a)||!l.leadingWhitespace&&ib.test(a)||sb[(kb.exec(a)||["",""])[1].toLowerCase()])){a=a.replace(jb,"<$1></$2>");try{for(;d>c;c++)b=this[c]||{},1===b.nodeType&&(n.cleanData(vb(b,!1)),b.innerHTML=a);
b=0}catch(e){}}b&&this.empty().append(a)},null,a,arguments.length)},replaceWith:function(){var a=arguments[0];return this.domManip(arguments,function(b){a=this.parentNode,n.cleanData(vb(this)),a&&a.replaceChild(b,this)}),a&&(a.length||a.nodeType)?this:this.remove()},detach:function(a){return this.remove(a,!0)},domManip:function(a,b){a=e.apply([],a);var c,d,f,g,h,i,j=0,k=this.length,m=this,o=k-1,p=a[0],q=n.isFunction(p);if(q||k>1&&"string"==typeof p&&!l.checkClone&&ob.test(p))return this.each(function(c){var d=m.eq(c);
q&&(a[0]=p.call(this,c,d.html())),d.domManip(a,b)});if(k&&(i=n.buildFragment(a,this[0].ownerDocument,!1,this),c=i.firstChild,1===i.childNodes.length&&(i=c),c)){for(g=n.map(vb(i,"script"),yb),f=g.length;k>j;j++)d=i,j!==o&&(d=n.clone(d,!0,!0),f&&n.merge(g,vb(d,"script"))),b.call(this[j],d,j);if(f)for(h=g[g.length-1].ownerDocument,n.map(g,zb),j=0;f>j;j++)d=g[j],pb.test(d.type||"")&&!n._data(d,"globalEval")&&n.contains(h,d)&&(d.src?n._evalUrl&&n._evalUrl(d.src):n.globalEval((d.text||d.textContent||d.innerHTML||"").replace(rb,"")));
i=c=null}return this}}),n.each({appendTo:"append",prependTo:"prepend",insertBefore:"before",insertAfter:"after",replaceAll:"replaceWith"},function(a,b){n.fn[a]=function(a){for(var c,d=0,e=[],g=n(a),h=g.length-1;h>=d;d++)c=d===h?this:this.clone(!0),n(g[d])[b](c),f.apply(e,c.get());return this.pushStack(e)}});var Db,Eb={};!function(){var a,b,c=z.createElement("div"),d="-webkit-box-sizing:content-box;-moz-box-sizing:content-box;box-sizing:content-box;display:block;padding:0;margin:0;border:0";c.innerHTML="  <link/><table></table><a href='/a'>a</a><input type='checkbox'/>",a=c.getElementsByTagName("a")[0],a.style.cssText="float:left;opacity:.5",l.opacity=/^0.5/.test(a.style.opacity),l.cssFloat=!!a.style.cssFloat,c.style.backgroundClip="content-box",c.cloneNode(!0).style.backgroundClip="",l.clearCloneStyle="content-box"===c.style.backgroundClip,a=c=null,l.shrinkWrapBlocks=function(){var a,c,e,f;
if(null==b){if(a=z.getElementsByTagName("body")[0],!a)return;f="border:0;width:0;height:0;position:absolute;top:0;left:-9999px",c=z.createElement("div"),e=z.createElement("div"),a.appendChild(c).appendChild(e),b=!1,typeof e.style.zoom!==L&&(e.style.cssText=d+";width:1px;padding:1px;zoom:1",e.innerHTML="<div></div>",e.firstChild.style.width="5px",b=3!==e.offsetWidth),a.removeChild(c),a=c=e=null}return b}}();var Jb,Kb,Hb=/^margin/,Ib=new RegExp("^("+T+")(?!px)[a-z%]+$","i"),Lb=/^(top|right|bottom|left)$/;a.getComputedStyle?(Jb=function(a){return a.ownerDocument.defaultView.getComputedStyle(a,null)
},Kb=function(a,b,c){var d,e,f,g,h=a.style;return c=c||Jb(a),g=c?c.getPropertyValue(b)||c[b]:void 0,c&&(""!==g||n.contains(a.ownerDocument,a)||(g=n.style(a,b)),Ib.test(g)&&Hb.test(b)&&(d=h.width,e=h.minWidth,f=h.maxWidth,h.minWidth=h.maxWidth=h.width=g,g=c.width,h.width=d,h.minWidth=e,h.maxWidth=f)),void 0===g?g:g+""}):z.documentElement.currentStyle&&(Jb=function(a){return a.currentStyle},Kb=function(a,b,c){var d,e,f,g,h=a.style;return c=c||Jb(a),g=c?c[b]:void 0,null==g&&h&&h[b]&&(g=h[b]),Ib.test(g)&&!Lb.test(b)&&(d=h.left,e=a.runtimeStyle,f=e&&e.left,f&&(e.left=a.currentStyle.left),h.left="fontSize"===b?"1em":g,g=h.pixelLeft+"px",h.left=d,f&&(e.left=f)),void 0===g?g:g+""||"auto"
}),function(){function j(){var b,c,g=z.getElementsByTagName("body")[0];g&&(b=z.createElement("div"),c=z.createElement("div"),b.style.cssText=h,g.appendChild(b).appendChild(c),c.style.cssText="-webkit-box-sizing:border-box;-moz-box-sizing:border-box;box-sizing:border-box;position:absolute;display:block;padding:1px;border:1px;width:4px;margin-top:1%;top:1%",n.swap(g,null!=g.style.zoom?{zoom:1}:{},function(){d=4===c.offsetWidth}),e=!0,f=!1,a.getComputedStyle&&(f="1%"!==(a.getComputedStyle(c,null)||{}).top,e="4px"===(a.getComputedStyle(c,null)||{width:"4px"}).width),g.removeChild(b),c=g=null)
}var b,c,d,e,f,g=z.createElement("div"),h="border:0;width:0;height:0;position:absolute;top:0;left:-9999px",i="-webkit-box-sizing:content-box;-moz-box-sizing:content-box;box-sizing:content-box;display:block;padding:0;margin:0;border:0";g.innerHTML="  <link/><table></table><a href='/a'>a</a><input type='checkbox'/>",b=g.getElementsByTagName("a")[0],b.style.cssText="float:left;opacity:.5",l.opacity=/^0.5/.test(b.style.opacity),l.cssFloat=!!b.style.cssFloat,g.style.backgroundClip="content-box",g.cloneNode(!0).style.backgroundClip="",l.clearCloneStyle="content-box"===g.style.backgroundClip,b=g=null,n.extend(l,{reliableHiddenOffsets:function(){if(null!=c)return c;
var a,b,d,e=z.createElement("div"),f=z.getElementsByTagName("body")[0];if(f)return e.setAttribute("className","t"),e.innerHTML="  <link/><table></table><a href='/a'>a</a><input type='checkbox'/>",a=z.createElement("div"),a.style.cssText=h,f.appendChild(a).appendChild(e),e.innerHTML="<table><tr><td></td><td>t</td></tr></table>",b=e.getElementsByTagName("td"),b[0].style.cssText="padding:0;margin:0;border:0;display:none",d=0===b[0].offsetHeight,b[0].style.display="",b[1].style.display="none",c=d&&0===b[0].offsetHeight,f.removeChild(a),e=f=null,c
},boxSizing:function(){return null==d&&j(),d},boxSizingReliable:function(){return null==e&&j(),e},pixelPosition:function(){return null==f&&j(),f},reliableMarginRight:function(){var b,c,d,e,f=!0;if(a.getComputedStyle){if(b=z.getElementsByTagName("body")[0],!b)return;c=z.createElement("div"),d=z.createElement("div"),c.style.cssText=h,b.appendChild(c).appendChild(d),e=d.appendChild(z.createElement("div")),e.style.cssText=d.style.cssText=i,e.style.marginRight=e.style.width="0",d.style.width="1px",f=!parseFloat((a.getComputedStyle(e,null)||{}).marginRight),b.removeChild(c)
}return f}})}(),n.swap=function(a,b,c,d){var e,f,g={};for(f in b)g[f]=a.style[f],a.style[f]=b[f];e=c.apply(a,d||[]);for(f in b)a.style[f]=g[f];return e};var Nb=/alpha\([^)]*\)/i,Ob=/opacity\s*=\s*([^)]*)/,Pb=/^(none|table(?!-c[ea]).+)/,Qb=new RegExp("^("+T+")(.*)$","i"),Rb=new RegExp("^([+-])=("+T+")","i"),Sb={position:"absolute",visibility:"hidden",display:"block"},Tb={letterSpacing:0,fontWeight:400},Ub=["Webkit","O","Moz","ms"];n.extend({cssHooks:{opacity:{get:function(a,b){if(b){var c=Kb(a,"opacity");return""===c?"1":c
}}}},cssNumber:{columnCount:!0,fillOpacity:!0,fontWeight:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,widows:!0,zIndex:!0,zoom:!0},cssProps:{"float":l.cssFloat?"cssFloat":"styleFloat"},style:function(a,b,c,d){if(a&&3!==a.nodeType&&8!==a.nodeType&&a.style){var e,f,g,h=n.camelCase(b),i=a.style;if(b=n.cssProps[h]||(n.cssProps[h]=Vb(i,h)),g=n.cssHooks[b]||n.cssHooks[h],void 0===c)return g&&"get"in g&&void 0!==(e=g.get(a,!1,d))?e:i[b];if(f=typeof c,"string"===f&&(e=Rb.exec(c))&&(c=(e[1]+1)*e[2]+parseFloat(n.css(a,b)),f="number"),null!=c&&c===c&&("number"!==f||n.cssNumber[h]||(c+="px"),l.clearCloneStyle||""!==c||0!==b.indexOf("background")||(i[b]="inherit"),!(g&&"set"in g&&void 0===(c=g.set(a,c,d)))))try{i[b]="",i[b]=c
}catch(j){}}},css:function(a,b,c,d){var e,f,g,h=n.camelCase(b);return b=n.cssProps[h]||(n.cssProps[h]=Vb(a.style,h)),g=n.cssHooks[b]||n.cssHooks[h],g&&"get"in g&&(f=g.get(a,!0,c)),void 0===f&&(f=Kb(a,b,d)),"normal"===f&&b in Tb&&(f=Tb[b]),""===c||c?(e=parseFloat(f),c===!0||n.isNumeric(e)?e||0:f):f}}),n.each(["height","width"],function(a,b){n.cssHooks[b]={get:function(a,c,d){return c?0===a.offsetWidth&&Pb.test(n.css(a,"display"))?n.swap(a,Sb,function(){return Zb(a,b,d)}):Zb(a,b,d):void 0},set:function(a,c,d){var e=d&&Jb(a);
return Xb(a,c,d?Yb(a,b,d,l.boxSizing()&&"border-box"===n.css(a,"boxSizing",!1,e),e):0)}}}),l.opacity||(n.cssHooks.opacity={get:function(a,b){return Ob.test((b&&a.currentStyle?a.currentStyle.filter:a.style.filter)||"")?.01*parseFloat(RegExp.$1)+"":b?"1":""},set:function(a,b){var c=a.style,d=a.currentStyle,e=n.isNumeric(b)?"alpha(opacity="+100*b+")":"",f=d&&d.filter||c.filter||"";c.zoom=1,(b>=1||""===b)&&""===n.trim(f.replace(Nb,""))&&c.removeAttribute&&(c.removeAttribute("filter"),""===b||d&&!d.filter)||(c.filter=Nb.test(f)?f.replace(Nb,e):f+" "+e)
}}),n.cssHooks.marginRight=Mb(l.reliableMarginRight,function(a,b){return b?n.swap(a,{display:"inline-block"},Kb,[a,"marginRight"]):void 0}),n.each({margin:"",padding:"",border:"Width"},function(a,b){n.cssHooks[a+b]={expand:function(c){for(var d=0,e={},f="string"==typeof c?c.split(" "):[c];4>d;d++)e[a+U[d]+b]=f[d]||f[d-2]||f[0];return e}},Hb.test(a)||(n.cssHooks[a+b].set=Xb)}),n.fn.extend({css:function(a,b){return W(this,function(a,b,c){var d,e,f={},g=0;if(n.isArray(b)){for(d=Jb(a),e=b.length;e>g;g++)f[b[g]]=n.css(a,b[g],!1,d);
return f}return void 0!==c?n.style(a,b,c):n.css(a,b)},a,b,arguments.length>1)},show:function(){return Wb(this,!0)},hide:function(){return Wb(this)},toggle:function(a){return"boolean"==typeof a?a?this.show():this.hide():this.each(function(){V(this)?n(this).show():n(this).hide()})}}),n.Tween=$b,$b.prototype={constructor:$b,init:function(a,b,c,d,e,f){this.elem=a,this.prop=c,this.easing=e||"swing",this.options=b,this.start=this.now=this.cur(),this.end=d,this.unit=f||(n.cssNumber[c]?"":"px")},cur:function(){var a=$b.propHooks[this.prop];
return a&&a.get?a.get(this):$b.propHooks._default.get(this)},run:function(a){var b,c=$b.propHooks[this.prop];return this.pos=b=this.options.duration?n.easing[this.easing](a,this.options.duration*a,0,1,this.options.duration):a,this.now=(this.end-this.start)*b+this.start,this.options.step&&this.options.step.call(this.elem,this.now,this),c&&c.set?c.set(this):$b.propHooks._default.set(this),this}},$b.prototype.init.prototype=$b.prototype,$b.propHooks={_default:{get:function(a){var b;return null==a.elem[a.prop]||a.elem.style&&null!=a.elem.style[a.prop]?(b=n.css(a.elem,a.prop,""),b&&"auto"!==b?b:0):a.elem[a.prop]
},set:function(a){n.fx.step[a.prop]?n.fx.step[a.prop](a):a.elem.style&&(null!=a.elem.style[n.cssProps[a.prop]]||n.cssHooks[a.prop])?n.style(a.elem,a.prop,a.now+a.unit):a.elem[a.prop]=a.now}}},$b.propHooks.scrollTop=$b.propHooks.scrollLeft={set:function(a){a.elem.nodeType&&a.elem.parentNode&&(a.elem[a.prop]=a.now)}},n.easing={linear:function(a){return a},swing:function(a){return.5-Math.cos(a*Math.PI)/2}},n.fx=$b.prototype.init,n.fx.step={};var _b,ac,bc=/^(?:toggle|show|hide)$/,cc=new RegExp("^(?:([+-])=|)("+T+")([a-z%]*)$","i"),dc=/queueHooks$/,ec=[jc],fc={"*":[function(a,b){var c=this.createTween(a,b),d=c.cur(),e=cc.exec(b),f=e&&e[3]||(n.cssNumber[a]?"":"px"),g=(n.cssNumber[a]||"px"!==f&&+d)&&cc.exec(n.css(c.elem,a)),h=1,i=20;
if(g&&g[3]!==f){f=f||g[3],e=e||[],g=+d||1;do h=h||".5",g/=h,n.style(c.elem,a,g+f);while(h!==(h=c.cur()/d)&&1!==h&&--i)}return e&&(g=c.start=+g||+d||0,c.unit=f,c.end=e[1]?g+(e[1]+1)*e[2]:+e[2]),c}]};n.Animation=n.extend(lc,{tweener:function(a,b){n.isFunction(a)?(b=a,a=["*"]):a=a.split(" ");for(var c,d=0,e=a.length;e>d;d++)c=a[d],fc[c]=fc[c]||[],fc[c].unshift(b)},prefilter:function(a,b){b?ec.unshift(a):ec.push(a)}}),n.speed=function(a,b,c){var d=a&&"object"==typeof a?n.extend({},a):{complete:c||!c&&b||n.isFunction(a)&&a,duration:a,easing:c&&b||b&&!n.isFunction(b)&&b};
return d.duration=n.fx.off?0:"number"==typeof d.duration?d.duration:d.duration in n.fx.speeds?n.fx.speeds[d.duration]:n.fx.speeds._default,(null==d.queue||d.queue===!0)&&(d.queue="fx"),d.old=d.complete,d.complete=function(){n.isFunction(d.old)&&d.old.call(this),d.queue&&n.dequeue(this,d.queue)},d},n.fn.extend({fadeTo:function(a,b,c,d){return this.filter(V).css("opacity",0).show().end().animate({opacity:b},a,c,d)},animate:function(a,b,c,d){var e=n.isEmptyObject(a),f=n.speed(b,c,d),g=function(){var b=lc(this,n.extend({},a),f);
(e||n._data(this,"finish"))&&b.stop(!0)};return g.finish=g,e||f.queue===!1?this.each(g):this.queue(f.queue,g)},stop:function(a,b,c){var d=function(a){var b=a.stop;delete a.stop,b(c)};return"string"!=typeof a&&(c=b,b=a,a=void 0),b&&a!==!1&&this.queue(a||"fx",[]),this.each(function(){var b=!0,e=null!=a&&a+"queueHooks",f=n.timers,g=n._data(this);if(e)g[e]&&g[e].stop&&d(g[e]);else for(e in g)g[e]&&g[e].stop&&dc.test(e)&&d(g[e]);for(e=f.length;e--;)f[e].elem!==this||null!=a&&f[e].queue!==a||(f[e].anim.stop(c),b=!1,f.splice(e,1));
(b||!c)&&n.dequeue(this,a)})},finish:function(a){return a!==!1&&(a=a||"fx"),this.each(function(){var b,c=n._data(this),d=c[a+"queue"],e=c[a+"queueHooks"],f=n.timers,g=d?d.length:0;for(c.finish=!0,n.queue(this,a,[]),e&&e.stop&&e.stop.call(this,!0),b=f.length;b--;)f[b].elem===this&&f[b].queue===a&&(f[b].anim.stop(!0),f.splice(b,1));for(b=0;g>b;b++)d[b]&&d[b].finish&&d[b].finish.call(this);delete c.finish})}}),n.each(["toggle","show","hide"],function(a,b){var c=n.fn[b];n.fn[b]=function(a,d,e){return null==a||"boolean"==typeof a?c.apply(this,arguments):this.animate(hc(b,!0),a,d,e)
}}),n.each({slideDown:hc("show"),slideUp:hc("hide"),slideToggle:hc("toggle"),fadeIn:{opacity:"show"},fadeOut:{opacity:"hide"},fadeToggle:{opacity:"toggle"}},function(a,b){n.fn[a]=function(a,c,d){return this.animate(b,a,c,d)}}),n.timers=[],n.fx.tick=function(){var a,b=n.timers,c=0;for(_b=n.now();c<b.length;c++)a=b[c],a()||b[c]!==a||b.splice(c--,1);b.length||n.fx.stop(),_b=void 0},n.fx.timer=function(a){n.timers.push(a),a()?n.fx.start():n.timers.pop()},n.fx.interval=13,n.fx.start=function(){ac||(ac=setInterval(n.fx.tick,n.fx.interval))
},n.fx.stop=function(){clearInterval(ac),ac=null},n.fx.speeds={slow:600,fast:200,_default:400},n.fn.delay=function(a,b){return a=n.fx?n.fx.speeds[a]||a:a,b=b||"fx",this.queue(b,function(b,c){var d=setTimeout(b,a);c.stop=function(){clearTimeout(d)}})},function(){var a,b,c,d,e=z.createElement("div");e.setAttribute("className","t"),e.innerHTML="  <link/><table></table><a href='/a'>a</a><input type='checkbox'/>",a=e.getElementsByTagName("a")[0],c=z.createElement("select"),d=c.appendChild(z.createElement("option")),b=e.getElementsByTagName("input")[0],a.style.cssText="top:1px",l.getSetAttribute="t"!==e.className,l.style=/top/.test(a.getAttribute("style")),l.hrefNormalized="/a"===a.getAttribute("href"),l.checkOn=!!b.value,l.optSelected=d.selected,l.enctype=!!z.createElement("form").enctype,c.disabled=!0,l.optDisabled=!d.disabled,b=z.createElement("input"),b.setAttribute("value",""),l.input=""===b.getAttribute("value"),b.value="t",b.setAttribute("type","radio"),l.radioValue="t"===b.value,a=b=c=d=e=null
}();var mc=/\r/g;n.fn.extend({val:function(a){var b,c,d,e=this[0];{if(arguments.length)return d=n.isFunction(a),this.each(function(c){var e;1===this.nodeType&&(e=d?a.call(this,c,n(this).val()):a,null==e?e="":"number"==typeof e?e+="":n.isArray(e)&&(e=n.map(e,function(a){return null==a?"":a+""})),b=n.valHooks[this.type]||n.valHooks[this.nodeName.toLowerCase()],b&&"set"in b&&void 0!==b.set(this,e,"value")||(this.value=e))});if(e)return b=n.valHooks[e.type]||n.valHooks[e.nodeName.toLowerCase()],b&&"get"in b&&void 0!==(c=b.get(e,"value"))?c:(c=e.value,"string"==typeof c?c.replace(mc,""):null==c?"":c)
}}}),n.extend({valHooks:{option:{get:function(a){var b=n.find.attr(a,"value");return null!=b?b:n.text(a)}},select:{get:function(a){for(var b,c,d=a.options,e=a.selectedIndex,f="select-one"===a.type||0>e,g=f?null:[],h=f?e+1:d.length,i=0>e?h:f?e:0;h>i;i++)if(c=d[i],!(!c.selected&&i!==e||(l.optDisabled?c.disabled:null!==c.getAttribute("disabled"))||c.parentNode.disabled&&n.nodeName(c.parentNode,"optgroup"))){if(b=n(c).val(),f)return b;g.push(b)}return g},set:function(a,b){for(var c,d,e=a.options,f=n.makeArray(b),g=e.length;g--;)if(d=e[g],n.inArray(n.valHooks.option.get(d),f)>=0)try{d.selected=c=!0
}catch(h){d.scrollHeight}else d.selected=!1;return c||(a.selectedIndex=-1),e}}}}),n.each(["radio","checkbox"],function(){n.valHooks[this]={set:function(a,b){return n.isArray(b)?a.checked=n.inArray(n(a).val(),b)>=0:void 0}},l.checkOn||(n.valHooks[this].get=function(a){return null===a.getAttribute("value")?"on":a.value})});var nc,oc,pc=n.expr.attrHandle,qc=/^(?:checked|selected)$/i,rc=l.getSetAttribute,sc=l.input;n.fn.extend({attr:function(a,b){return W(this,n.attr,a,b,arguments.length>1)},removeAttr:function(a){return this.each(function(){n.removeAttr(this,a)
})}}),n.extend({attr:function(a,b,c){var d,e,f=a.nodeType;if(a&&3!==f&&8!==f&&2!==f)return typeof a.getAttribute===L?n.prop(a,b,c):(1===f&&n.isXMLDoc(a)||(b=b.toLowerCase(),d=n.attrHooks[b]||(n.expr.match.bool.test(b)?oc:nc)),void 0===c?d&&"get"in d&&null!==(e=d.get(a,b))?e:(e=n.find.attr(a,b),null==e?void 0:e):null!==c?d&&"set"in d&&void 0!==(e=d.set(a,c,b))?e:(a.setAttribute(b,c+""),c):(n.removeAttr(a,b),void 0))},removeAttr:function(a,b){var c,d,e=0,f=b&&b.match(F);if(f&&1===a.nodeType)for(;c=f[e++];)d=n.propFix[c]||c,n.expr.match.bool.test(c)?sc&&rc||!qc.test(c)?a[d]=!1:a[n.camelCase("default-"+c)]=a[d]=!1:n.attr(a,c,""),a.removeAttribute(rc?c:d)
},attrHooks:{type:{set:function(a,b){if(!l.radioValue&&"radio"===b&&n.nodeName(a,"input")){var c=a.value;return a.setAttribute("type",b),c&&(a.value=c),b}}}}}),oc={set:function(a,b,c){return b===!1?n.removeAttr(a,c):sc&&rc||!qc.test(c)?a.setAttribute(!rc&&n.propFix[c]||c,c):a[n.camelCase("default-"+c)]=a[c]=!0,c}},n.each(n.expr.match.bool.source.match(/\w+/g),function(a,b){var c=pc[b]||n.find.attr;pc[b]=sc&&rc||!qc.test(b)?function(a,b,d){var e,f;return d||(f=pc[b],pc[b]=e,e=null!=c(a,b,d)?b.toLowerCase():null,pc[b]=f),e
}:function(a,b,c){return c?void 0:a[n.camelCase("default-"+b)]?b.toLowerCase():null}}),sc&&rc||(n.attrHooks.value={set:function(a,b,c){return n.nodeName(a,"input")?(a.defaultValue=b,void 0):nc&&nc.set(a,b,c)}}),rc||(nc={set:function(a,b,c){var d=a.getAttributeNode(c);return d||a.setAttributeNode(d=a.ownerDocument.createAttribute(c)),d.value=b+="","value"===c||b===a.getAttribute(c)?b:void 0}},pc.id=pc.name=pc.coords=function(a,b,c){var d;return c?void 0:(d=a.getAttributeNode(b))&&""!==d.value?d.value:null},n.valHooks.button={get:function(a,b){var c=a.getAttributeNode(b);
return c&&c.specified?c.value:void 0},set:nc.set},n.attrHooks.contenteditable={set:function(a,b,c){nc.set(a,""===b?!1:b,c)}},n.each(["width","height"],function(a,b){n.attrHooks[b]={set:function(a,c){return""===c?(a.setAttribute(b,"auto"),c):void 0}}})),l.style||(n.attrHooks.style={get:function(a){return a.style.cssText||void 0},set:function(a,b){return a.style.cssText=b+""}});var tc=/^(?:input|select|textarea|button|object)$/i,uc=/^(?:a|area)$/i;n.fn.extend({prop:function(a,b){return W(this,n.prop,a,b,arguments.length>1)
},removeProp:function(a){return a=n.propFix[a]||a,this.each(function(){try{this[a]=void 0,delete this[a]}catch(b){}})}}),n.extend({propFix:{"for":"htmlFor","class":"className"},prop:function(a,b,c){var d,e,f,g=a.nodeType;if(a&&3!==g&&8!==g&&2!==g)return f=1!==g||!n.isXMLDoc(a),f&&(b=n.propFix[b]||b,e=n.propHooks[b]),void 0!==c?e&&"set"in e&&void 0!==(d=e.set(a,c,b))?d:a[b]=c:e&&"get"in e&&null!==(d=e.get(a,b))?d:a[b]},propHooks:{tabIndex:{get:function(a){var b=n.find.attr(a,"tabindex");return b?parseInt(b,10):tc.test(a.nodeName)||uc.test(a.nodeName)&&a.href?0:-1
}}}}),l.hrefNormalized||n.each(["href","src"],function(a,b){n.propHooks[b]={get:function(a){return a.getAttribute(b,4)}}}),l.optSelected||(n.propHooks.selected={get:function(a){var b=a.parentNode;return b&&(b.selectedIndex,b.parentNode&&b.parentNode.selectedIndex),null}}),n.each(["tabIndex","readOnly","maxLength","cellSpacing","cellPadding","rowSpan","colSpan","useMap","frameBorder","contentEditable"],function(){n.propFix[this.toLowerCase()]=this}),l.enctype||(n.propFix.enctype="encoding");var vc=/[\t\r\n\f]/g;
n.fn.extend({addClass:function(a){var b,c,d,e,f,g,h=0,i=this.length,j="string"==typeof a&&a;if(n.isFunction(a))return this.each(function(b){n(this).addClass(a.call(this,b,this.className))});if(j)for(b=(a||"").match(F)||[];i>h;h++)if(c=this[h],d=1===c.nodeType&&(c.className?(" "+c.className+" ").replace(vc," "):" ")){for(f=0;e=b[f++];)d.indexOf(" "+e+" ")<0&&(d+=e+" ");g=n.trim(d),c.className!==g&&(c.className=g)}return this},removeClass:function(a){var b,c,d,e,f,g,h=0,i=this.length,j=0===arguments.length||"string"==typeof a&&a;
if(n.isFunction(a))return this.each(function(b){n(this).removeClass(a.call(this,b,this.className))});if(j)for(b=(a||"").match(F)||[];i>h;h++)if(c=this[h],d=1===c.nodeType&&(c.className?(" "+c.className+" ").replace(vc," "):"")){for(f=0;e=b[f++];)for(;d.indexOf(" "+e+" ")>=0;)d=d.replace(" "+e+" "," ");g=a?n.trim(d):"",c.className!==g&&(c.className=g)}return this},toggleClass:function(a,b){var c=typeof a;return"boolean"==typeof b&&"string"===c?b?this.addClass(a):this.removeClass(a):n.isFunction(a)?this.each(function(c){n(this).toggleClass(a.call(this,c,this.className,b),b)
}):this.each(function(){if("string"===c)for(var b,d=0,e=n(this),f=a.match(F)||[];b=f[d++];)e.hasClass(b)?e.removeClass(b):e.addClass(b);else(c===L||"boolean"===c)&&(this.className&&n._data(this,"__className__",this.className),this.className=this.className||a===!1?"":n._data(this,"__className__")||"")})},hasClass:function(a){for(var b=" "+a+" ",c=0,d=this.length;d>c;c++)if(1===this[c].nodeType&&(" "+this[c].className+" ").replace(vc," ").indexOf(b)>=0)return!0;return!1}}),n.each("blur focus focusin focusout load resize scroll unload click dblclick mousedown mouseup mousemove mouseover mouseout mouseenter mouseleave change select submit keydown keypress keyup error contextmenu".split(" "),function(a,b){n.fn[b]=function(a,c){return arguments.length>0?this.on(b,null,a,c):this.trigger(b)
}}),n.fn.extend({hover:function(a,b){return this.mouseenter(a).mouseleave(b||a)},bind:function(a,b,c){return this.on(a,null,b,c)},unbind:function(a,b){return this.off(a,null,b)},delegate:function(a,b,c,d){return this.on(b,a,c,d)},undelegate:function(a,b,c){return 1===arguments.length?this.off(a,"**"):this.off(b,a||"**",c)}});var wc=n.now(),xc=/\?/,yc=/(,)|(\[|{)|(}|])|"(?:[^"\\\r\n]|\\["\\\/bfnrt]|\\u[\da-fA-F]{4})*"\s*:?|true|false|null|-?(?!0\d)\d+(?:\.\d+|)(?:[eE][+-]?\d+|)/g;n.parseJSON=function(b){if(a.JSON&&a.JSON.parse)return a.JSON.parse(b+"");
var c,d=null,e=n.trim(b+"");return e&&!n.trim(e.replace(yc,function(a,b,e,f){return c&&b&&(d=0),0===d?a:(c=e||b,d+=!f-!e,"")}))?Function("return "+e)():n.error("Invalid JSON: "+b)},n.parseXML=function(b){var c,d;if(!b||"string"!=typeof b)return null;try{a.DOMParser?(d=new DOMParser,c=d.parseFromString(b,"text/xml")):(c=new ActiveXObject("Microsoft.XMLDOM"),c.async="false",c.loadXML(b))}catch(e){c=void 0}return c&&c.documentElement&&!c.getElementsByTagName("parsererror").length||n.error("Invalid XML: "+b),c};
var zc,Ac,Bc=/#.*$/,Cc=/([?&])_=[^&]*/,Dc=/^(.*?):[ \t]*([^\r\n]*)\r?$/gm,Ec=/^(?:about|app|app-storage|.+-extension|file|res|widget):$/,Fc=/^(?:GET|HEAD)$/,Gc=/^\/\//,Hc=/^([\w.+-]+:)(?:\/\/(?:[^\/?#]*@|)([^\/?#:]*)(?::(\d+)|)|)/,Ic={},Jc={},Kc="*/".concat("*");try{Ac=location.href}catch(Lc){Ac=z.createElement("a"),Ac.href="",Ac=Ac.href}zc=Hc.exec(Ac.toLowerCase())||[],n.extend({active:0,lastModified:{},etag:{},ajaxSettings:{url:Ac,type:"GET",isLocal:Ec.test(zc[1]),global:!0,processData:!0,async:!0,contentType:"application/x-www-form-urlencoded; charset=UTF-8",accepts:{"*":Kc,text:"text/plain",html:"text/html",xml:"application/xml, text/xml",json:"application/json, text/javascript"},contents:{xml:/xml/,html:/html/,json:/json/},responseFields:{xml:"responseXML",text:"responseText",json:"responseJSON"},converters:{"* text":String,"text html":!0,"text json":n.parseJSON,"text xml":n.parseXML},flatOptions:{url:!0,context:!0}},ajaxSetup:function(a,b){return b?Oc(Oc(a,n.ajaxSettings),b):Oc(n.ajaxSettings,a)
},ajaxPrefilter:Mc(Ic),ajaxTransport:Mc(Jc),ajax:function(a,b){function w(a,b,c,d){var j,r,s,u,w,x=b;2!==t&&(t=2,g&&clearTimeout(g),i=void 0,f=d||"",v.readyState=a>0?4:0,j=a>=200&&300>a||304===a,c&&(u=Pc(k,v,c)),u=Qc(k,u,v,j),j?(k.ifModified&&(w=v.getResponseHeader("Last-Modified"),w&&(n.lastModified[e]=w),w=v.getResponseHeader("etag"),w&&(n.etag[e]=w)),204===a||"HEAD"===k.type?x="nocontent":304===a?x="notmodified":(x=u.state,r=u.data,s=u.error,j=!s)):(s=x,(a||!x)&&(x="error",0>a&&(a=0))),v.status=a,v.statusText=(b||x)+"",j?o.resolveWith(l,[r,x,v]):o.rejectWith(l,[v,x,s]),v.statusCode(q),q=void 0,h&&m.trigger(j?"ajaxSuccess":"ajaxError",[v,k,j?r:s]),p.fireWith(l,[v,x]),h&&(m.trigger("ajaxComplete",[v,k]),--n.active||n.event.trigger("ajaxStop")))
}"object"==typeof a&&(b=a,a=void 0),b=b||{};var c,d,e,f,g,h,i,j,k=n.ajaxSetup({},b),l=k.context||k,m=k.context&&(l.nodeType||l.jquery)?n(l):n.event,o=n.Deferred(),p=n.Callbacks("once memory"),q=k.statusCode||{},r={},s={},t=0,u="canceled",v={readyState:0,getResponseHeader:function(a){var b;if(2===t){if(!j)for(j={};b=Dc.exec(f);)j[b[1].toLowerCase()]=b[2];b=j[a.toLowerCase()]}return null==b?null:b},getAllResponseHeaders:function(){return 2===t?f:null},setRequestHeader:function(a,b){var c=a.toLowerCase();return t||(a=s[c]=s[c]||a,r[a]=b),this
},overrideMimeType:function(a){return t||(k.mimeType=a),this},statusCode:function(a){var b;if(a)if(2>t)for(b in a)q[b]=[q[b],a[b]];else v.always(a[v.status]);return this},abort:function(a){var b=a||u;return i&&i.abort(b),w(0,b),this}};if(o.promise(v).complete=p.add,v.success=v.done,v.error=v.fail,k.url=((a||k.url||Ac)+"").replace(Bc,"").replace(Gc,zc[1]+"//"),k.type=b.method||b.type||k.method||k.type,k.dataTypes=n.trim(k.dataType||"*").toLowerCase().match(F)||[""],null==k.crossDomain&&(c=Hc.exec(k.url.toLowerCase()),k.crossDomain=!(!c||c[1]===zc[1]&&c[2]===zc[2]&&(c[3]||("http:"===c[1]?"80":"443"))===(zc[3]||("http:"===zc[1]?"80":"443")))),k.data&&k.processData&&"string"!=typeof k.data&&(k.data=n.param(k.data,k.traditional)),Nc(Ic,k,b,v),2===t)return v;
h=k.global,h&&0===n.active++&&n.event.trigger("ajaxStart"),k.type=k.type.toUpperCase(),k.hasContent=!Fc.test(k.type),e=k.url,k.hasContent||(k.data&&(e=k.url+=(xc.test(e)?"&":"?")+k.data,delete k.data),k.cache===!1&&(k.url=Cc.test(e)?e.replace(Cc,"$1_="+wc++):e+(xc.test(e)?"&":"?")+"_="+wc++)),k.ifModified&&(n.lastModified[e]&&v.setRequestHeader("If-Modified-Since",n.lastModified[e]),n.etag[e]&&v.setRequestHeader("If-None-Match",n.etag[e])),(k.data&&k.hasContent&&k.contentType!==!1||b.contentType)&&v.setRequestHeader("Content-Type",k.contentType),v.setRequestHeader("Accept",k.dataTypes[0]&&k.accepts[k.dataTypes[0]]?k.accepts[k.dataTypes[0]]+("*"!==k.dataTypes[0]?", "+Kc+"; q=0.01":""):k.accepts["*"]);
for(d in k.headers)v.setRequestHeader(d,k.headers[d]);if(k.beforeSend&&(k.beforeSend.call(l,v,k)===!1||2===t))return v.abort();u="abort";for(d in{success:1,error:1,complete:1})v[d](k[d]);return i=Nc(Jc,k,b,v),v.send=function(){v.readyState=1,h&&m.trigger("ajaxSend",[v,k]),k.async&&k.timeout>0&&(g=setTimeout(function(){v.abort("timeout")},k.timeout));try{t=1,i.send(r,w)}catch(a){if(!(2>t))throw a;w(-1,a)}},i?b.autostart!==!1&&v.send():w(-1,"No Transport"),v},getJSON:function(a,b,c){return n.get(a,b,c,"json")},getScript:function(a,b){return n.get(a,void 0,b,"script")
}}),n.each(["get","post"],function(a,b){n[b]=function(a,c,d,e){return n.isFunction(c)&&(e=e||d,d=c,c=void 0),n.ajax({url:a,type:b,dataType:e,data:c,success:d})}}),n.each(["ajaxStart","ajaxStop","ajaxComplete","ajaxError","ajaxSuccess","ajaxSend"],function(a,b){n.fn[b]=function(a){return this.on(b,a)}}),n._evalUrl=function(a){return n.ajax({url:a,type:"GET",dataType:"script",async:!1,global:!1,"throws":!0})},n.fn.extend({wrapAll:function(a){if(n.isFunction(a))return this.each(function(b){n(this).wrapAll(a.call(this,b))
});if(this[0]){var b=n(a,this[0].ownerDocument).eq(0).clone(!0);this[0].parentNode&&b.insertBefore(this[0]),b.map(function(){for(var a=this;a.firstChild&&1===a.firstChild.nodeType;)a=a.firstChild;return a}).append(this)}return this},wrapInner:function(a){return n.isFunction(a)?this.each(function(b){n(this).wrapInner(a.call(this,b))}):this.each(function(){var b=n(this),c=b.contents();c.length?c.wrapAll(a):b.append(a)})},wrap:function(a){var b=n.isFunction(a);return this.each(function(c){n(this).wrapAll(b?a.call(this,c):a)
})},unwrap:function(){return this.parent().each(function(){n.nodeName(this,"body")||n(this).replaceWith(this.childNodes)}).end()}}),n.expr.filters.hidden=function(a){return a.offsetWidth<=0&&a.offsetHeight<=0||!l.reliableHiddenOffsets()&&"none"===(a.style&&a.style.display||n.css(a,"display"))},n.expr.filters.visible=function(a){return!n.expr.filters.hidden(a)};var Rc=/%20/g,Sc=/\[\]$/,Tc=/\r?\n/g,Uc=/^(?:submit|button|image|reset|file)$/i,Vc=/^(?:input|select|textarea|keygen)/i;n.param=function(a,b){var c,d=[],e=function(a,b){b=n.isFunction(b)?b():null==b?"":b,d[d.length]=encodeURIComponent(a)+"="+encodeURIComponent(b)
};if(void 0===b&&(b=n.ajaxSettings&&n.ajaxSettings.traditional),n.isArray(a)||a.jquery&&!n.isPlainObject(a))n.each(a,function(){e(this.name,this.value)});else for(c in a)Wc(c,a[c],b,e);return d.join("&").replace(Rc,"+")},n.fn.extend({serialize:function(){return n.param(this.serializeArray())},serializeArray:function(){return this.map(function(){var a=n.prop(this,"elements");return a?n.makeArray(a):this}).filter(function(){var a=this.type;return this.name&&!n(this).is(":disabled")&&Vc.test(this.nodeName)&&!Uc.test(a)&&(this.checked||!X.test(a))
}).map(function(a,b){var c=n(this).val();return null==c?null:n.isArray(c)?n.map(c,function(a){return{name:b.name,value:a.replace(Tc,"\r\n")}}):{name:b.name,value:c.replace(Tc,"\r\n")}}).get()}}),n.ajaxSettings.xhr=void 0!==a.ActiveXObject?function(){return!this.isLocal&&/^(get|post|head|put|delete|options)$/i.test(this.type)&&$c()||_c()}:$c;var Xc=0,Yc={},Zc=n.ajaxSettings.xhr();a.ActiveXObject&&n(a).on("unload",function(){for(var a in Yc)Yc[a](void 0,!0)}),l.cors=!!Zc&&"withCredentials"in Zc,Zc=l.ajax=!!Zc,Zc&&n.ajaxTransport(function(a){if(!a.crossDomain||l.cors){var b;
return{send:function(c,d){var e,f=a.xhr(),g=++Xc;if(f.open(a.type,a.url,a.async,a.username,a.password),a.xhrFields)for(e in a.xhrFields)f[e]=a.xhrFields[e];a.mimeType&&f.overrideMimeType&&f.overrideMimeType(a.mimeType),a.crossDomain||c["X-Requested-With"]||(c["X-Requested-With"]="XMLHttpRequest");for(e in c)void 0!==c[e]&&f.setRequestHeader(e,c[e]+"");f.send(a.hasContent&&a.data||null),b=function(c,e){var h,i,j;if(b&&(e||4===f.readyState))if(delete Yc[g],b=void 0,f.onreadystatechange=n.noop,e)4!==f.readyState&&f.abort();
else{j={},h=f.status,"string"==typeof f.responseText&&(j.text=f.responseText);try{i=f.statusText}catch(k){i=""}h||!a.isLocal||a.crossDomain?1223===h&&(h=204):h=j.text?200:404}j&&d(h,i,j,f.getAllResponseHeaders())},a.async?4===f.readyState?setTimeout(b):f.onreadystatechange=Yc[g]=b:b()},abort:function(){b&&b(void 0,!0)}}}}),n.ajaxSetup({accepts:{script:"text/javascript, application/javascript, application/ecmascript, application/x-ecmascript"},contents:{script:/(?:java|ecma)script/},converters:{"text script":function(a){return n.globalEval(a),a
}}}),n.ajaxPrefilter("script",function(a){void 0===a.cache&&(a.cache=!1),a.crossDomain&&(a.type="GET",a.global=!1)}),n.ajaxTransport("script",function(a){if(a.crossDomain){var b,c=z.head||n("head")[0]||z.documentElement;return{send:function(d,e){b=z.createElement("script"),b.async=!0,a.scriptCharset&&(b.charset=a.scriptCharset),b.src=a.url,b.onload=b.onreadystatechange=function(a,c){(c||!b.readyState||/loaded|complete/.test(b.readyState))&&(b.onload=b.onreadystatechange=null,b.parentNode&&b.parentNode.removeChild(b),b=null,c||e(200,"success"))
},c.insertBefore(b,c.firstChild)},abort:function(){b&&b.onload(void 0,!0)}}}});var ad=[],bd=/(=)\?(?=&|$)|\?\?/;n.ajaxSetup({jsonp:"callback",jsonpCallback:function(){var a=ad.pop()||n.expando+"_"+wc++;return this[a]=!0,a}}),n.ajaxPrefilter("json jsonp",function(b,c,d){var e,f,g,h=b.jsonp!==!1&&(bd.test(b.url)?"url":"string"==typeof b.data&&!(b.contentType||"").indexOf("application/x-www-form-urlencoded")&&bd.test(b.data)&&"data");return h||"jsonp"===b.dataTypes[0]?(e=b.jsonpCallback=n.isFunction(b.jsonpCallback)?b.jsonpCallback():b.jsonpCallback,h?b[h]=b[h].replace(bd,"$1"+e):b.jsonp!==!1&&(b.url+=(xc.test(b.url)?"&":"?")+b.jsonp+"="+e),b.converters["script json"]=function(){return g||n.error(e+" was not called"),g[0]
},b.dataTypes[0]="json",f=a[e],a[e]=function(){g=arguments},d.always(function(){a[e]=f,b[e]&&(b.jsonpCallback=c.jsonpCallback,ad.push(e)),g&&n.isFunction(f)&&f(g[0]),g=f=void 0}),"script"):void 0}),n.parseHTML=function(a,b,c){if(!a||"string"!=typeof a)return null;"boolean"==typeof b&&(c=b,b=!1),b=b||z;var d=v.exec(a),e=!c&&[];return d?[b.createElement(d[1])]:(d=n.buildFragment([a],b,e),e&&e.length&&n(e).remove(),n.merge([],d.childNodes))};var cd=n.fn.load;n.fn.load=function(a,b,c){if("string"!=typeof a&&cd)return cd.apply(this,arguments);
var d,e,f,g=this,h=a.indexOf(" ");return h>=0&&(d=a.slice(h,a.length),a=a.slice(0,h)),n.isFunction(b)?(c=b,b=void 0):b&&"object"==typeof b&&(f="POST"),g.length>0&&n.ajax({url:a,type:f,dataType:"html",data:b}).done(function(a){e=arguments,g.html(d?n("<div>").append(n.parseHTML(a)).find(d):a)}).complete(c&&function(a,b){g.each(c,e||[a.responseText,b,a])}),this},n.expr.filters.animated=function(a){return n.grep(n.timers,function(b){return a===b.elem}).length};var dd=a.document.documentElement;return n.offset={setOffset:function(a,b,c){var d,e,f,g,h,i,j,k=n.css(a,"position"),l=n(a),m={};
"static"===k&&(a.style.position="relative"),h=l.offset(),f=n.css(a,"top"),i=n.css(a,"left"),j=("absolute"===k||"fixed"===k)&&n.inArray("auto",[f,i])>-1,j?(d=l.position(),g=d.top,e=d.left):(g=parseFloat(f)||0,e=parseFloat(i)||0),n.isFunction(b)&&(b=b.call(a,c,h)),null!=b.top&&(m.top=b.top-h.top+g),null!=b.left&&(m.left=b.left-h.left+e),"using"in b?b.using.call(a,m):l.css(m)}},n.fn.extend({offset:function(a){if(arguments.length)return void 0===a?this:this.each(function(b){n.offset.setOffset(this,a,b)});var b,c,d={top:0,left:0},e=this[0],f=e&&e.ownerDocument;
if(f)return b=f.documentElement,n.contains(b,e)?(typeof e.getBoundingClientRect!==L&&(d=e.getBoundingClientRect()),c=ed(f),{top:d.top+(c.pageYOffset||b.scrollTop)-(b.clientTop||0),left:d.left+(c.pageXOffset||b.scrollLeft)-(b.clientLeft||0)}):d},position:function(){if(this[0]){var a,b,c={top:0,left:0},d=this[0];return"fixed"===n.css(d,"position")?b=d.getBoundingClientRect():(a=this.offsetParent(),b=this.offset(),n.nodeName(a[0],"html")||(c=a.offset()),c.top+=n.css(a[0],"borderTopWidth",!0),c.left+=n.css(a[0],"borderLeftWidth",!0)),{top:b.top-c.top-n.css(d,"marginTop",!0),left:b.left-c.left-n.css(d,"marginLeft",!0)}
}},offsetParent:function(){return this.map(function(){for(var a=this.offsetParent||dd;a&&!n.nodeName(a,"html")&&"static"===n.css(a,"position");)a=a.offsetParent;return a||dd})}}),n.each({scrollLeft:"pageXOffset",scrollTop:"pageYOffset"},function(a,b){var c=/Y/.test(b);n.fn[a]=function(d){return W(this,function(a,d,e){var f=ed(a);return void 0===e?f?b in f?f[b]:f.document.documentElement[d]:a[d]:(f?f.scrollTo(c?n(f).scrollLeft():e,c?e:n(f).scrollTop()):a[d]=e,void 0)},a,d,arguments.length,null)}}),n.each(["top","left"],function(a,b){n.cssHooks[b]=Mb(l.pixelPosition,function(a,c){return c?(c=Kb(a,b),Ib.test(c)?n(a).position()[b]+"px":c):void 0
})}),n.each({Height:"height",Width:"width"},function(a,b){n.each({padding:"inner"+a,content:b,"":"outer"+a},function(c,d){n.fn[d]=function(d,e){var f=arguments.length&&(c||"boolean"!=typeof d),g=c||(d===!0||e===!0?"margin":"border");return W(this,function(b,c,d){var e;return n.isWindow(b)?b.document.documentElement["client"+a]:9===b.nodeType?(e=b.documentElement,Math.max(b.body["scroll"+a],e["scroll"+a],b.body["offset"+a],e["offset"+a],e["client"+a])):void 0===d?n.css(b,c,g):n.style(b,c,d,g)},b,f?d:void 0,f,null)
}})}),n.fn.size=function(){return this.length},n.fn.andSelf=n.fn.addBack,function(){var a,b;n.uaMatch=function(a){a=a.toLowerCase();var b=/(chrome)[ \/]([\w.]+)/.exec(a)||/(webkit)[ \/]([\w.]+)/.exec(a)||/(opera)(?:.*version|)[ \/]([\w.]+)/.exec(a)||/(msie) ([\w.]+)/.exec(a)||a.indexOf("compatible")<0&&/(mozilla)(?:.*? rv:([\w.]+)|)/.exec(a)||[];return{browser:b[1]||"",version:b[2]||"0"}},a=n.uaMatch(navigator.userAgent),b={},a.browser&&(b[a.browser]=!0,b.version=a.version),b.chrome?b.webkit=!0:b.webkit&&(b.safari=!0),n.browser=b
}(),n.version="5.0",n.long_version="5.0.10",n.uid=function(a,b){return(a?a:"")+Math.random().toString().replace(".","")+(b?b:"")},n.globalNamespace=n.uid("Foundry"),a[n.globalNamespace]=n,n.run=function(a){return n.isFunction(a)?a(n):null},n.initialize=function(b){n.initialized||(n.extend(n,b),"development"==n.environment&&(a.F=n),n.initialized=!0,FD50.module.execute())},FD50.jquery(n),"function"==typeof define&&define.amd&&define("jquery",[],function(){return n}),n}),FD50.plugin("lodash",function(a){function P(a,b,c){for(var d=(c||0)-1,e=a?a.length:0;++d<e;)if(a[d]===b)return d;
return-1}function Q(a,b){var c=typeof b;if(a=a.cache,"boolean"==c||null==b)return a[b]?0:-1;"number"!=c&&"string"!=c&&(c="object");var d="number"==c?b:f+b;return a=(a=a[c])&&a[d],"object"==c?a&&P(a,b)>-1?0:-1:a?0:-1}function R(a){var b=this.cache,c=typeof a;if("boolean"==c||null==a)b[a]=!0;else{"number"!=c&&"string"!=c&&(c="object");var d="number"==c?a:f+a,e=b[c]||(b[c]={});"object"==c?(e[d]||(e[d]=[])).push(a):e[d]=!0}}function S(a){return a.charCodeAt(0)}function T(a,b){for(var c=a.criteria,d=b.criteria,e=-1,f=c.length;++e<f;){var g=c[e],h=d[e];
if(g!==h){if(g>h||"undefined"==typeof g)return 1;if(h>g||"undefined"==typeof h)return-1}}return a.index-b.index}function U(a){var b=-1,c=a.length,d=a[0],e=a[c/2|0],f=a[c-1];if(d&&"object"==typeof d&&e&&"object"==typeof e&&f&&"object"==typeof f)return!1;var g=X();g["false"]=g["null"]=g["true"]=g.undefined=!1;var h=X();for(h.array=a,h.cache=g,h.push=R;++b<c;)h.push(a[b]);return h}function V(a){return"\\"+J[a]}function W(){return c.pop()||[]}function X(){return d.pop()||{array:null,cache:null,criteria:null,"false":!1,index:0,"null":!1,number:null,object:null,push:null,string:null,"true":!1,undefined:!1,value:null}
}function Y(a){a.length=0,c.length<h&&c.push(a)}function Z(a){var b=a.cache;b&&Z(b),a.array=a.cache=a.criteria=a.object=a.number=a.string=a.value=null,d.length<h&&d.push(a)}function $(a,b,c){b||(b=0),"undefined"==typeof c&&(c=a?a.length:0);for(var d=-1,e=c-b||0,f=Array(0>e?0:e);++d<e;)f[d]=a[b+d];return f}function _(a){function Cb(a){return a&&"object"==typeof a&&!Zb(a)&&mb.call(a,"__wrapped__")?a:new Db(a)}function Db(a,b){this.__chain__=!!b,this.__wrapped__=a}function Fb(a){function e(){if(c){var a=$(c);nb.apply(a,arguments)
}if(this instanceof e){var f=Hb(b.prototype),g=b.apply(f,a||arguments);return zc(g)?g:f}return b.apply(d,a||arguments)}var b=a[0],c=a[2],d=a[4];return Vb(e,a),e}function Gb(a,b,c,d,e){if(c){var f=c(a);if("undefined"!=typeof f)return f}var g=zc(a);if(!g)return a;var h=fb.call(a);if(!F[h])return a;var i=Bb[h];switch(h){case y:case z:return new i(+a);case B:case E:return new i(a);case D:return f=i(a.source,n.exec(a)),f.lastIndex=a.lastIndex,f}var j=Zb(a);if(b){var k=!d;d||(d=W()),e||(e=W());for(var l=d.length;l--;)if(d[l]==a)return e[l];
f=j?i(a.length):{}}else f=j?$(a):ec({},a);return j&&(mb.call(a,"index")&&(f.index=a.index),mb.call(a,"input")&&(f.input=a.input)),b?(d.push(a),e.push(f),(j?Vc:nc)(a,function(a,g){f[g]=Gb(a,b,c,d,e)}),k&&(Y(d),Y(e)),f):f}function Hb(a){return zc(a)?sb(a):{}}function Ib(a,b,c){if("function"!=typeof a)return $d;if("undefined"==typeof b||!("prototype"in a))return a;var d=a.__bindData__;if("undefined"==typeof d&&(Eb.funcNames&&(d=!a.name),d=d||!Eb.funcDecomp,!d)){var e=kb.call(a);Eb.funcNames||(d=!o.test(e)),d||(d=s.test(e),Vb(a,d))
}if(d===!1||d!==!0&&1&d[1])return a;switch(c){case 1:return function(c){return a.call(b,c)};case 2:return function(c,d){return a.call(b,c,d)};case 3:return function(c,d,e){return a.call(b,c,d,e)};case 4:return function(c,d,e,f){return a.call(b,c,d,e,f)}}return Jd(a,b)}function Jb(a){function m(){var a=h?f:this;if(d){var n=$(d);nb.apply(n,arguments)}if((e||j)&&(n||(n=$(arguments)),e&&nb.apply(n,e),j&&n.length<g))return c|=16,Jb([b,k?c:-4&c,n,null,f,g]);if(n||(n=arguments),i&&(b=a[l]),this instanceof m){a=Hb(b.prototype);
var o=b.apply(a,n);return zc(o)?o:a}return b.apply(a,n)}var b=a[0],c=a[1],d=a[2],e=a[3],f=a[4],g=a[5],h=1&c,i=2&c,j=4&c,k=8&c,l=b;return Vb(m,a),m}function Kb(a,b){var c=-1,d=Tb(),e=a?a.length:0,f=e>=g&&d===P,h=[];if(f){var i=U(b);i?(d=Q,b=i):f=!1}for(;++c<e;){var j=a[c];d(b,j)<0&&h.push(j)}return f&&Z(b),h}function Lb(a,b,c,d){for(var e=(d||0)-1,f=a?a.length:0,g=[];++e<f;){var h=a[e];if(h&&"object"==typeof h&&"number"==typeof h.length&&(Zb(h)||Yb(h))){b||(h=Lb(h,b,c));var i=-1,j=h.length,k=g.length;for(g.length+=j;++i<j;)g[k++]=h[i]
}else c||g.push(h)}return g}function Mb(a,b,c,d,e,f){if(c){var g=c(a,b);if("undefined"!=typeof g)return!!g}if(a===b)return 0!==a||1/a==1/b;var h=typeof a,i=typeof b;if(!(a!==a||a&&I[h]||b&&I[i]))return!1;if(null==a||null==b)return a===b;var j=fb.call(a),k=fb.call(b);if(j==w&&(j=C),k==w&&(k=C),j!=k)return!1;switch(j){case y:case z:return+a==+b;case B:return a!=+a?b!=+b:0==a?1/a==1/b:a==+b;case D:case E:return a==R(b)}var l=j==x;if(!l){var m=mb.call(a,"__wrapped__"),n=mb.call(b,"__wrapped__");if(m||n)return Mb(m?a.__wrapped__:a,n?b.__wrapped__:b,c,d,e,f);
if(j!=C)return!1;var o=a.constructor,p=b.constructor;if(o!=p&&!(yc(o)&&o instanceof o&&yc(p)&&p instanceof p)&&"constructor"in a&&"constructor"in b)return!1}var q=!e;e||(e=W()),f||(f=W());for(var r=e.length;r--;)if(e[r]==a)return f[r]==b;var s=0;if(g=!0,e.push(a),f.push(b),l){if(r=a.length,s=b.length,g=s==r,g||d)for(;s--;){var t=r,u=b[s];if(d)for(;t--&&!(g=Mb(a[t],u,c,d,e,f)););else if(!(g=Mb(a[s],u,c,d,e,f)))break}}else lc(b,function(b,h,i){return mb.call(i,h)?(s++,g=mb.call(a,h)&&Mb(a[h],b,c,d,e,f)):void 0
}),g&&!d&&lc(a,function(a,b,c){return mb.call(c,b)?g=--s>-1:void 0});return e.pop(),f.pop(),q&&(Y(e),Y(f)),g}function Nb(a,b,c,d,e){(Zb(b)?Vc:nc)(b,function(b,f){var g,h,i=b,j=a[f];if(b&&((h=Zb(b))||Dc(b))){for(var k=d.length;k--;)if(g=d[k]==b){j=e[k];break}if(!g){var l;c&&(i=c(j,b),(l="undefined"!=typeof i)&&(j=i)),l||(j=h?Zb(j)?j:[]:Dc(j)?j:{}),d.push(b),e.push(j),l||Nb(j,b,c,d,e)}}else c&&(i=c(j,b),"undefined"==typeof i&&(i=b)),"undefined"!=typeof i&&(j=i);a[f]=j})}function Ob(a,b){return a+jb(Ab()*(b-a+1))
}function Pb(a,b,c){var d=-1,e=Tb(),f=a?a.length:0,h=[],i=!b&&f>=g&&e===P,j=c||i?W():h;if(i){var k=U(j);e=Q,j=k}for(;++d<f;){var l=a[d],m=c?c(l,d,a):l;(b?!d||j[j.length-1]!==m:e(j,m)<0)&&((c||i)&&j.push(m),h.push(l))}return i?(Y(j.array),Z(j)):c&&Y(j),h}function Qb(a){return function(b,c,d){var e={};c=Cb.createCallback(c,d,3);var f=-1,g=b?b.length:0;if("number"==typeof g)for(;++f<g;){var h=b[f];a(e,h,c(h,f,b),b)}else nc(b,function(b,d,f){a(e,b,c(b,d,f),f)});return e}}function Rb(a,b,c,d,e,f){var g=1&b,h=2&b,i=4&b,k=16&b,l=32&b;
if(!h&&!yc(a))throw new bb;k&&!c.length&&(b&=-17,k=c=!1),l&&!d.length&&(b&=-33,l=d=!1);var m=a&&a.__bindData__;if(m&&m!==!0)return m=$(m),m[2]&&(m[2]=$(m[2])),m[3]&&(m[3]=$(m[3])),!g||1&m[1]||(m[4]=e),!g&&1&m[1]&&(b|=8),!i||4&m[1]||(m[5]=f),k&&nb.apply(m[2]||(m[2]=[]),c),l&&qb.apply(m[3]||(m[3]=[]),d),m[1]|=b,Rb.apply(null,m);var n=1==b||17===b?Fb:Jb;return n([a,b,c,d,e,f])}function Sb(a){return ac[a]}function Tb(){var a=(a=Cb.indexOf)===sd?P:a;return a}function Ub(a){return"function"==typeof a&&gb.test(a)}function Wb(a){var b,c;
return a&&fb.call(a)==C&&(b=a.constructor,!yc(b)||b instanceof b)?(lc(a,function(a,b){c=b}),"undefined"==typeof c||mb.call(a,c)):!1}function Xb(a){return bc[a]}function Yb(a){return a&&"object"==typeof a&&"number"==typeof a.length&&fb.call(a)==w||!1}function fc(a,b,c,d){return"boolean"!=typeof b&&null!=b&&(d=c,c=b,b=!1),Gb(a,b,"function"==typeof c&&Ib(c,d,1))}function gc(a,b,c){return Gb(a,!0,"function"==typeof b&&Ib(b,c,1))}function hc(a,b){var c=Hb(a);return b?ec(c,b):c}function jc(a,b,c){var d;return b=Cb.createCallback(b,c,3),nc(a,function(a,c,e){return b(a,c,e)?(d=c,!1):void 0
}),d}function kc(a,b,c){var d;return b=Cb.createCallback(b,c,3),oc(a,function(a,c,e){return b(a,c,e)?(d=c,!1):void 0}),d}function mc(a,b,c){var d=[];lc(a,function(a,b){d.push(b,a)});var e=d.length;for(b=Ib(b,c,3);e--&&b(d[e--],d[e],a)!==!1;);return a}function oc(a,b,c){var d=_b(a),e=d.length;for(b=Ib(b,c,3);e--;){var f=d[e];if(b(a[f],f,a)===!1)break}return a}function pc(a){var b=[];return lc(a,function(a,c){yc(a)&&b.push(c)}),b.sort()}function qc(a,b){return a?mb.call(a,b):!1}function rc(a){for(var b=-1,c=_b(a),d=c.length,e={};++b<d;){var f=c[b];
e[a[f]]=f}return e}function sc(a){return a===!0||a===!1||a&&"object"==typeof a&&fb.call(a)==y||!1}function tc(a){return a&&"object"==typeof a&&fb.call(a)==z||!1}function uc(a){return a&&1===a.nodeType||!1}function vc(a){var b=!0;if(!a)return b;var c=fb.call(a),d=a.length;return c==x||c==E||c==w||c==C&&"number"==typeof d&&yc(a.splice)?!d:(nc(a,function(){return b=!1}),b)}function wc(a,b,c,d){return Mb(a,b,"function"==typeof c&&Ib(c,d,2))}function xc(a){return ub(a)&&!vb(parseFloat(a))}function yc(a){return"function"==typeof a
}function zc(a){return!(!a||!I[typeof a])}function Ac(a){return Cc(a)&&a!=+a}function Bc(a){return null===a}function Cc(a){return"number"==typeof a||a&&"object"==typeof a&&fb.call(a)==B||!1}function Ec(a){return a&&"object"==typeof a&&fb.call(a)==D||!1}function Fc(a){return"string"==typeof a||a&&"object"==typeof a&&fb.call(a)==E||!1}function Gc(a){return"undefined"==typeof a}function Hc(a,b,c){var d={};return b=Cb.createCallback(b,c,3),nc(a,function(a,c,e){d[c]=b(a,c,e)}),d}function Ic(a){var b=arguments,c=2;
if(!zc(a))return a;if("number"!=typeof b[2]&&(c=b.length),c>3&&"function"==typeof b[c-2])var d=Ib(b[--c-1],b[c--],2);else c>2&&"function"==typeof b[c-1]&&(d=b[--c]);for(var e=$(arguments,1,c),f=-1,g=W(),h=W();++f<c;)Nb(a,e[f],d,g,h);return Y(g),Y(h),a}function Jc(a,b,c){var d={};if("function"!=typeof b){var e=[];lc(a,function(a,b){e.push(b)}),e=Kb(e,Lb(arguments,!0,!1,1));for(var f=-1,g=e.length;++f<g;){var h=e[f];d[h]=a[h]}}else b=Cb.createCallback(b,c,3),lc(a,function(a,c,e){b(a,c,e)||(d[c]=a)});return d}function Kc(a){for(var b=-1,d=_b(a),e=d.length,f=c(e);++b<e;){var g=d[b];
f[b]=[g,a[g]]}return f}function Lc(a,b,c){var d={};if("function"!=typeof b)for(var e=-1,f=Lb(arguments,!0,!1,1),g=zc(a)?f.length:0;++e<g;){var h=f[e];h in a&&(d[h]=a[h])}else b=Cb.createCallback(b,c,3),lc(a,function(a,c,e){b(a,c,e)&&(d[c]=a)});return d}function Mc(a,b,c,d){var e=Zb(a);if(null==c)if(e)c=[];else{var f=a&&a.constructor,g=f&&f.prototype;c=Hb(g)}return b&&(b=Cb.createCallback(b,d,4),(e?Vc:nc)(a,function(a,d,e){return b(c,a,d,e)})),c}function Nc(a){for(var b=-1,d=_b(a),e=d.length,f=c(e);++b<e;)f[b]=a[d[b]];
return f}function Oc(a){for(var b=arguments,d=-1,e=Lb(b,!0,!1,1),f=b[2]&&b[2][b[1]]===a?1:e.length,g=c(f);++d<f;)g[d]=a[e[d]];return g}function Pc(a,b,c){var d=-1,e=Tb(),f=a?a.length:0,g=!1;return c=(0>c?xb(0,f+c):c)||0,Zb(a)?g=e(a,b,c)>-1:"number"==typeof f?g=(Fc(a)?a.indexOf(b,c):e(a,b,c))>-1:nc(a,function(a){return++d>=c?!(g=a===b):void 0}),g}function Rc(a,b,c){var d=!0;b=Cb.createCallback(b,c,3);var e=-1,f=a?a.length:0;if("number"==typeof f)for(;++e<f&&(d=!!b(a[e],e,a)););else nc(a,function(a,c,e){return d=!!b(a,c,e)
});return d}function Sc(a,b,c){var d=[];b=Cb.createCallback(b,c,3);var e=-1,f=a?a.length:0;if("number"==typeof f)for(;++e<f;){var g=a[e];b(g,e,a)&&d.push(g)}else nc(a,function(a,c,e){b(a,c,e)&&d.push(a)});return d}function Tc(a,b,c){b=Cb.createCallback(b,c,3);var d=-1,e=a?a.length:0;if("number"!=typeof e){var g;return nc(a,function(a,c,d){return b(a,c,d)?(g=a,!1):void 0}),g}for(;++d<e;){var f=a[d];if(b(f,d,a))return f}}function Uc(a,b,c){var d;return b=Cb.createCallback(b,c,3),Wc(a,function(a,c,e){return b(a,c,e)?(d=a,!1):void 0
}),d}function Vc(a,b,c){var d=-1,e=a?a.length:0;if(b=b&&"undefined"==typeof c?b:Ib(b,c,3),"number"==typeof e)for(;++d<e&&b(a[d],d,a)!==!1;);else nc(a,b);return a}function Wc(a,b,c){var d=a?a.length:0;if(b=b&&"undefined"==typeof c?b:Ib(b,c,3),"number"==typeof d)for(;d--&&b(a[d],d,a)!==!1;);else{var e=_b(a);d=e.length,nc(a,function(a,c,f){return c=e?e[--d]:--d,b(f[c],c,f)})}return a}function Zc(a,b){var d=$(arguments,2),e=-1,f="function"==typeof b,g=a?a.length:0,h=c("number"==typeof g?g:0);return Vc(a,function(a){h[++e]=(f?b:a[b]).apply(a,d)
}),h}function $c(a,b,d){var e=-1,f=a?a.length:0;if(b=Cb.createCallback(b,d,3),"number"==typeof f)for(var g=c(f);++e<f;)g[e]=b(a[e],e,a);else g=[],nc(a,function(a,c,d){g[++e]=b(a,c,d)});return g}function _c(a,b,c){var d=-1/0,e=d;if("function"!=typeof b&&c&&c[b]===a&&(b=null),null==b&&Zb(a))for(var f=-1,g=a.length;++f<g;){var h=a[f];h>e&&(e=h)}else b=null==b&&Fc(a)?S:Cb.createCallback(b,c,3),Vc(a,function(a,c,f){var g=b(a,c,f);g>d&&(d=g,e=a)});return e}function ad(a,b,c){var d=1/0,e=d;if("function"!=typeof b&&c&&c[b]===a&&(b=null),null==b&&Zb(a))for(var f=-1,g=a.length;++f<g;){var h=a[f];
e>h&&(e=h)}else b=null==b&&Fc(a)?S:Cb.createCallback(b,c,3),Vc(a,function(a,c,f){var g=b(a,c,f);d>g&&(d=g,e=a)});return e}function cd(a,b,c,d){if(!a)return c;var e=arguments.length<3;b=Cb.createCallback(b,d,4);var f=-1,g=a.length;if("number"==typeof g)for(e&&(c=a[++f]);++f<g;)c=b(c,a[f],f,a);else nc(a,function(a,d,f){c=e?(e=!1,a):b(c,a,d,f)});return c}function dd(a,b,c,d){var e=arguments.length<3;return b=Cb.createCallback(b,d,4),Wc(a,function(a,d,f){c=e?(e=!1,a):b(c,a,d,f)}),c}function ed(a,b,c){return b=Cb.createCallback(b,c,3),Sc(a,function(a,c,d){return!b(a,c,d)
})}function fd(a,c,d){if(a&&"number"!=typeof a.length&&(a=Nc(a)),null==c||d)return a?a[Ob(0,a.length-1)]:b;var e=gd(a);return e.length=yb(xb(0,c),e.length),e}function gd(a){var b=-1,d=a?a.length:0,e=c("number"==typeof d?d:0);return Vc(a,function(a){var c=Ob(0,++b);e[b]=e[c],e[c]=a}),e}function hd(a){var b=a?a.length:0;return"number"==typeof b?b:_b(a).length}function id(a,b,c){var d;b=Cb.createCallback(b,c,3);var e=-1,f=a?a.length:0;if("number"==typeof f)for(;++e<f&&!(d=b(a[e],e,a)););else nc(a,function(a,c,e){return!(d=b(a,c,e))
});return!!d}function jd(a,b,d){var e=-1,f=Zb(b),g=a?a.length:0,h=c("number"==typeof g?g:0);for(f||(b=Cb.createCallback(b,d,3)),Vc(a,function(a,c,d){var g=h[++e]=X();f?g.criteria=$c(b,function(b){return a[b]}):(g.criteria=W())[0]=b(a,c,d),g.index=e,g.value=a}),g=h.length,h.sort(T);g--;){var i=h[g];h[g]=i.value,f||Y(i.criteria),Z(i)}return h}function kd(a){return a&&"number"==typeof a.length?$(a):Nc(a)}function md(a){for(var b=-1,c=a?a.length:0,d=[];++b<c;){var e=a[b];e&&d.push(e)}return d}function nd(a){return Kb(a,Lb(arguments,!0,!0,1))
}function od(a,b,c){var d=-1,e=a?a.length:0;for(b=Cb.createCallback(b,c,3);++d<e;)if(b(a[d],d,a))return d;return-1}function pd(a,b,c){var d=a?a.length:0;for(b=Cb.createCallback(b,c,3);d--;)if(b(a[d],d,a))return d;return-1}function qd(a,c,d){var e=0,f=a?a.length:0;if("number"!=typeof c&&null!=c){var g=-1;for(c=Cb.createCallback(c,d,3);++g<f&&c(a[g],g,a);)e++}else if(e=c,null==e||d)return a?a[0]:b;return $(a,0,yb(xb(0,e),f))}function rd(a,b,c,d){return"boolean"!=typeof b&&null!=b&&(d=c,c="function"!=typeof b&&d&&d[b]===a?null:b,b=!1),null!=c&&(a=$c(a,c,d)),Lb(a,b)
}function sd(a,b,c){if("number"==typeof c){var d=a?a.length:0;c=0>c?xb(0,d+c):c||0}else if(c){var e=Bd(a,b);return a[e]===b?e:-1}return P(a,b,c)}function td(a,b,c){var d=0,e=a?a.length:0;if("number"!=typeof b&&null!=b){var f=e;for(b=Cb.createCallback(b,c,3);f--&&b(a[f],f,a);)d++}else d=null==b||c?1:b||d;return $(a,0,yb(xb(0,e-d),e))}function ud(){for(var a=[],b=-1,c=arguments.length,d=W(),e=Tb(),f=e===P,h=W();++b<c;){var i=arguments[b];(Zb(i)||Yb(i))&&(a.push(i),d.push(f&&i.length>=g&&U(b?a[b]:h)))}var j=a[0],k=-1,l=j?j.length:0,m=[];
a:for(;++k<l;){var n=d[0];if(i=j[k],(n?Q(n,i):e(h,i))<0){for(b=c,(n||h).push(i);--b;)if(n=d[b],(n?Q(n,i):e(a[b],i))<0)continue a;m.push(i)}}for(;c--;)n=d[c],n&&Z(n);return Y(d),Y(h),m}function vd(a,c,d){var e=0,f=a?a.length:0;if("number"!=typeof c&&null!=c){var g=f;for(c=Cb.createCallback(c,d,3);g--&&c(a[g],g,a);)e++}else if(e=c,null==e||d)return a?a[f-1]:b;return $(a,xb(0,f-e))}function wd(a,b,c){var d=a?a.length:0;for("number"==typeof c&&(d=(0>c?xb(0,d+c):yb(c,d-1))+1);d--;)if(a[d]===b)return d;return-1}function xd(a){for(var b=arguments,c=0,d=b.length,e=a?a.length:0;++c<d;)for(var f=-1,g=b[c];++f<e;)a[f]===g&&(pb.call(a,f--,1),e--);
return a}function yd(a,b,d){a=+a||0,d="number"==typeof d?d:+d||1,null==b&&(b=a,a=0);for(var e=-1,f=xb(0,hb((b-a)/(d||1))),g=c(f);++e<f;)g[e]=a,a+=d;return g}function zd(a,b,c){var d=-1,e=a?a.length:0,f=[];for(b=Cb.createCallback(b,c,3);++d<e;){var g=a[d];b(g,d,a)&&(f.push(g),pb.call(a,d--,1),e--)}return f}function Ad(a,b,c){if("number"!=typeof b&&null!=b){var d=0,e=-1,f=a?a.length:0;for(b=Cb.createCallback(b,c,3);++e<f&&b(a[e],e,a);)d++}else d=null==b||c?1:xb(0,b);return $(a,d)}function Bd(a,b,c,d){var e=0,f=a?a.length:e;
for(c=c?Cb.createCallback(c,d,1):$d,b=c(b);f>e;){var g=e+f>>>1;c(a[g])<b?e=g+1:f=g}return e}function Cd(){return Pb(Lb(arguments,!0,!0))}function Dd(a,b,c,d){return"boolean"!=typeof b&&null!=b&&(d=c,c="function"!=typeof b&&d&&d[b]===a?null:b,b=!1),null!=c&&(c=Cb.createCallback(c,d,3)),Pb(a,b,c)}function Ed(a){return Kb(a,$(arguments,1))}function Fd(){for(var a=-1,b=arguments.length;++a<b;){var c=arguments[a];if(Zb(c)||Yb(c))var d=d?Pb(Kb(d,c).concat(Kb(c,d))):c}return d||[]}function Gd(){for(var a=arguments.length>1?arguments:arguments[0],b=-1,d=a?_c(bd(a,"length")):0,e=c(0>d?0:d);++b<d;)e[b]=bd(a,b);
return e}function Hd(a,b){var c=-1,d=a?a.length:0,e={};for(b||!d||Zb(a[0])||(b=[]);++c<d;){var f=a[c];b?e[f]=b[c]:f&&(e[f[0]]=f[1])}return e}function Id(a,b){if(!yc(b))throw new bb;return function(){return--a<1?b.apply(this,arguments):void 0}}function Jd(a,b){return arguments.length>2?Rb(a,17,$(arguments,2),null,b):Rb(a,1,null,null,b)}function Kd(a){for(var b=arguments.length>1?Lb(arguments,!0,!1,1):pc(a),c=-1,d=b.length;++c<d;){var e=b[c];a[e]=Rb(a[e],1,null,null,a)}return a}function Ld(a,b){return arguments.length>2?Rb(b,19,$(arguments,2),null,a):Rb(b,3,null,null,a)
}function Md(){for(var a=arguments,b=a.length;b--;)if(!yc(a[b]))throw new bb;return function(){for(var b=arguments,c=a.length;c--;)b=[a[c].apply(this,b)];return b[0]}}function Nd(a,b){return b="number"==typeof b?b:+b||a.length,Rb(a,4,null,null,null,b)}function Od(a,c,d){var e,f,g,h,i,j,k,l=0,m=!1,n=!0;if(!yc(a))throw new bb;if(c=xb(0,c)||0,d===!0){var o=!0;n=!1}else zc(d)&&(o=d.leading,m="maxWait"in d&&(xb(c,d.maxWait)||0),n="trailing"in d?d.trailing:n);var p=function(){var d=c-(ce()-h);if(0>=d){f&&ib(f);var m=k;
f=j=k=b,m&&(l=ce(),g=a.apply(i,e),j||f||(e=i=null))}else j=ob(p,d)},q=function(){j&&ib(j),f=j=k=b,(n||m!==c)&&(l=ce(),g=a.apply(i,e),j||f||(e=i=null))};return function(){if(e=arguments,h=ce(),i=this,k=n&&(j||!o),m===!1)var b=o&&!j;else{f||o||(l=h);var d=m-(h-l),r=0>=d;r?(f&&(f=ib(f)),l=h,g=a.apply(i,e)):f||(f=ob(q,d))}return r&&j?j=ib(j):j||c===m||(j=ob(p,c)),b&&(r=!0,g=a.apply(i,e)),!r||j||f||(e=i=null),g}}function Pd(a){if(!yc(a))throw new bb;var c=$(arguments,1);return ob(function(){a.apply(b,c)},1)}function Qd(a,c){if(!yc(a))throw new bb;
var d=$(arguments,2);return ob(function(){a.apply(b,d)},c)}function Rd(a,b){if(!yc(a))throw new bb;var c=function(){var d=c.cache,e=b?b.apply(this,arguments):f+arguments[0];return mb.call(d,e)?d[e]:d[e]=a.apply(this,arguments)};return c.cache={},c.reset=function(){var a=c.cache,d=b?b.apply(this,arguments):f+arguments[0];mb.call(a,d)&&delete a[d]},c}function Sd(a){var b,c;if(!yc(a))throw new bb;return function(){return b?c:(b=!0,c=a.apply(this,arguments),a=null,c)}}function Td(a){return Rb(a,16,$(arguments,1))
}function Ud(a){return Rb(a,32,null,$(arguments,1))}function Vd(a,b,c){var d=!0,e=!0;if(!yc(a))throw new bb;return c===!1?d=!1:zc(c)&&(d="leading"in c?c.leading:d,e="trailing"in c?c.trailing:e),G.leading=d,G.maxWait=b,G.trailing=e,Od(a,b,G)}function Wd(a,b){return Rb(b,16,[a])}function Xd(a){return function(){return a}}function Yd(a,b,c){var d=typeof a;if(null==a||"function"==d)return Ib(a,b,c);if("object"!=d)return ee(a);var e=_b(a),f=e[0],g=a[f];return 1!=e.length||g!==g||zc(g)?function(b){for(var c=e.length,d=!1;c--&&(d=Mb(b[e[c]],a[e[c]],null,!0)););return d
}:function(a){var b=a[f];return g===b&&(0!==g||1/g==1/b)}}function Zd(a){return null==a?"":R(a).replace(dc,Sb)}function $d(a){return a}function _d(a,b,c){var d=!0,e=b&&pc(b);b&&(c||e.length)||(null==c&&(c=b),f=Db,b=a,a=Cb,e=pc(b)),c===!1?d=!1:zc(c)&&"chain"in c&&(d=c.chain);var f=a,g=yc(f);Vc(e,function(c){var e=a[c]=b[c];g&&(f.prototype[c]=function(){var b=this.__chain__,c=this.__wrapped__,g=[c];nb.apply(g,arguments);var h=e.apply(a,g);if(d||b){if(c===h&&zc(h))return this;h=new f(h),h.__chain__=b}return h})
})}function ae(){return a._=eb,this}function be(){}function ee(a){return function(b){return b[a]}}function fe(a,b,c){var d=null==a,e=null==b;if(null==c&&("boolean"==typeof a&&e?(c=a,a=1):e||"boolean"!=typeof b||(c=b,e=!0)),d&&e&&(b=1),a=+a||0,e?(b=a,a=0):b=+b||0,c||a%1||b%1){var f=Ab();return yb(a+f*(b-a+parseFloat("1e-"+((f+"").length-1))),b)}return Ob(a,b)}function ge(a,b){if(a){var c=a[b];return yc(c)?a[b]():c}}function he(a,c,d){var e=Cb.templateSettings;a=R(a||""),d=ic({},d,e);var i,f=ic({},d.imports,e.imports),g=_b(f),h=Nc(f),n=0,o=d.interpolate||r,q="__p += '",s=O((d.escape||r).source+"|"+o.source+"|"+(o===p?m:r).source+"|"+(d.evaluate||r).source+"|$","g");
a.replace(s,function(b,c,d,e,f,g){return d||(d=e),q+=a.slice(n,g).replace(t,V),c&&(q+="' +\n__e("+c+") +\n'"),f&&(i=!0,q+="';\n"+f+";\n__p += '"),d&&(q+="' +\n((__t = ("+d+")) == null ? '' : __t) +\n'"),n=g+b.length,b}),q+="';\n";var u=d.variable,w=u;w||(u="obj",q="with ("+u+") {\n"+q+"\n}\n"),q=(i?q.replace(j,""):q).replace(k,"$1").replace(l,"$1;"),q="function("+u+") {\n"+(w?"":u+" || ("+u+" = {});\n")+"var __t, __p = '', __e = _.escape"+(i?", __j = Array.prototype.join;\nfunction print() { __p += __j.call(arguments, '') }\n":";\n")+q+"return __p\n}";
var x="\n/*\n//# sourceURL="+(d.sourceURL||"/lodash/template/source["+v++ +"]")+"\n*/";try{var y=J(g,"return "+q+x).apply(b,h)}catch(z){throw z.source=q,z}return c?y(c):(y.source=q,y)}function ie(a,b,d){a=(a=+a)>-1?a:0;var e=-1,f=c(a);for(b=Ib(b,d,1);++e<a;)f[e]=b(e);return f}function je(a){return null==a?"":R(a).replace(cc,Xb)}function ke(a){var b=++e;return R(null==a?"":a)+b}function le(a){return a=new Db(a),a.__chain__=!0,a}function me(a,b){return b(a),a}function ne(){return this.__chain__=!0,this}function oe(){return R(this.__wrapped__)
}function pe(){return this.__wrapped__}a=a?ab.defaults(K.Object(),a,ab.pick(K,u)):K;var c=a.Array,d=a.Boolean,h=a.Date,J=a.Function,L=a.Math,M=a.Number,N=a.Object,O=a.RegExp,R=a.String,bb=a.TypeError,cb=[],db=N.prototype,eb=a._,fb=db.toString,gb=O("^"+R(fb).replace(/[.*+?^${}()|[\]\\]/g,"\\$&").replace(/toString| for [^\]]+/g,".*?")+"$"),hb=L.ceil,ib=a.clearTimeout,jb=L.floor,kb=J.prototype.toString,lb=Ub(lb=N.getPrototypeOf)&&lb,mb=db.hasOwnProperty,nb=cb.push,ob=a.setTimeout,pb=cb.splice,qb=cb.unshift,rb=function(){try{var a={},b=Ub(b=N.defineProperty)&&b,c=b(a,a,a)&&b
}catch(d){}return c}(),sb=Ub(sb=N.create)&&sb,tb=Ub(tb=c.isArray)&&tb,ub=a.isFinite,vb=a.isNaN,wb=Ub(wb=N.keys)&&wb,xb=L.max,yb=L.min,zb=a.parseInt,Ab=L.random,Bb={};Bb[x]=c,Bb[y]=d,Bb[z]=h,Bb[A]=J,Bb[C]=N,Bb[B]=M,Bb[D]=O,Bb[E]=R,Db.prototype=Cb.prototype;var Eb=Cb.support={};Eb.funcDecomp=!Ub(a.WinRTError)&&s.test(_),Eb.funcNames="string"==typeof J.name,Cb.templateSettings={escape:/<%-([\s\S]+?)%>/g,evaluate:/<%([\s\S]+?)%>/g,interpolate:p,variable:"",imports:{_:Cb}},sb||(Hb=function(){function b(){}return function(c){if(zc(c)){b.prototype=c;
var d=new b;b.prototype=null}return d||a.Object()}}());var Vb=rb?function(a,b){H.value=b,rb(a,"__bindData__",H)}:be,Zb=tb||function(a){return a&&"object"==typeof a&&"number"==typeof a.length&&fb.call(a)==x||!1},$b=function(a){var b,c=a,d=[];if(!c)return d;if(!I[typeof a])return d;for(b in c)mb.call(c,b)&&d.push(b);return d},_b=wb?function(a){return zc(a)?wb(a):[]}:$b,ac={"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#39;"},bc=rc(ac),cc=O("("+_b(bc).join("|")+")","g"),dc=O("["+_b(ac).join("")+"]","g"),ec=function(a,b,c){var d,e=a,f=e;
if(!e)return f;var g=arguments,h=0,i="number"==typeof c?2:g.length;if(i>3&&"function"==typeof g[i-2])var j=Ib(g[--i-1],g[i--],2);else i>2&&"function"==typeof g[i-1]&&(j=g[--i]);for(;++h<i;)if(e=g[h],e&&I[typeof e])for(var k=-1,l=I[typeof e]&&_b(e),m=l?l.length:0;++k<m;)d=l[k],f[d]=j?j(f[d],e[d]):e[d];return f},ic=function(a,b,c){var d,e=a,f=e;if(!e)return f;for(var g=arguments,h=0,i="number"==typeof c?2:g.length;++h<i;)if(e=g[h],e&&I[typeof e])for(var j=-1,k=I[typeof e]&&_b(e),l=k?k.length:0;++j<l;)d=k[j],"undefined"==typeof f[d]&&(f[d]=e[d]);
return f},lc=function(a,b,c){var d,e=a,f=e;if(!e)return f;if(!I[typeof e])return f;b=b&&"undefined"==typeof c?b:Ib(b,c,3);for(d in e)if(b(e[d],d,a)===!1)return f;return f},nc=function(a,b,c){var d,e=a,f=e;if(!e)return f;if(!I[typeof e])return f;b=b&&"undefined"==typeof c?b:Ib(b,c,3);for(var g=-1,h=I[typeof e]&&_b(e),i=h?h.length:0;++g<i;)if(d=h[g],b(e[d],d,a)===!1)return f;return f},Dc=lb?function(a){if(!a||fb.call(a)!=C)return!1;var b=a.valueOf,c=Ub(b)&&(c=lb(b))&&lb(c);return c?a==c||lb(a)==c:Wb(a)}:Wb,Qc=Qb(function(a,b,c){mb.call(a,c)?a[c]++:a[c]=1
}),Xc=Qb(function(a,b,c){(mb.call(a,c)?a[c]:a[c]=[]).push(b)}),Yc=Qb(function(a,b,c){a[c]=b}),bd=$c,ld=Sc,ce=Ub(ce=h.now)&&ce||function(){return(new h).getTime()},de=8==zb(i+"08")?zb:function(a,b){return zb(Fc(a)?a.replace(q,""):a,b||0)};return Cb.after=Id,Cb.assign=ec,Cb.at=Oc,Cb.bind=Jd,Cb.bindAll=Kd,Cb.bindKey=Ld,Cb.chain=le,Cb.compact=md,Cb.compose=Md,Cb.constant=Xd,Cb.countBy=Qc,Cb.create=hc,Cb.createCallback=Yd,Cb.curry=Nd,Cb.debounce=Od,Cb.defaults=ic,Cb.defer=Pd,Cb.delay=Qd,Cb.difference=nd,Cb.filter=Sc,Cb.flatten=rd,Cb.forEach=Vc,Cb.forEachRight=Wc,Cb.forIn=lc,Cb.forInRight=mc,Cb.forOwn=nc,Cb.forOwnRight=oc,Cb.functions=pc,Cb.groupBy=Xc,Cb.indexBy=Yc,Cb.initial=td,Cb.intersection=ud,Cb.invert=rc,Cb.invoke=Zc,Cb.keys=_b,Cb.map=$c,Cb.mapValues=Hc,Cb.max=_c,Cb.memoize=Rd,Cb.merge=Ic,Cb.min=ad,Cb.omit=Jc,Cb.once=Sd,Cb.pairs=Kc,Cb.partial=Td,Cb.partialRight=Ud,Cb.pick=Lc,Cb.pluck=bd,Cb.property=ee,Cb.pull=xd,Cb.range=yd,Cb.reject=ed,Cb.remove=zd,Cb.rest=Ad,Cb.shuffle=gd,Cb.sortBy=jd,Cb.tap=me,Cb.throttle=Vd,Cb.times=ie,Cb.toArray=kd,Cb.transform=Mc,Cb.union=Cd,Cb.uniq=Dd,Cb.values=Nc,Cb.where=ld,Cb.without=Ed,Cb.wrap=Wd,Cb.xor=Fd,Cb.zip=Gd,Cb.zipObject=Hd,Cb.collect=$c,Cb.drop=Ad,Cb.each=Vc,Cb.eachRight=Wc,Cb.extend=ec,Cb.methods=pc,Cb.object=Hd,Cb.select=Sc,Cb.tail=Ad,Cb.unique=Dd,Cb.unzip=Gd,_d(Cb),Cb.clone=fc,Cb.cloneDeep=gc,Cb.contains=Pc,Cb.escape=Zd,Cb.every=Rc,Cb.find=Tc,Cb.findIndex=od,Cb.findKey=jc,Cb.findLast=Uc,Cb.findLastIndex=pd,Cb.findLastKey=kc,Cb.has=qc,Cb.identity=$d,Cb.indexOf=sd,Cb.isArguments=Yb,Cb.isArray=Zb,Cb.isBoolean=sc,Cb.isDate=tc,Cb.isElement=uc,Cb.isEmpty=vc,Cb.isEqual=wc,Cb.isFinite=xc,Cb.isFunction=yc,Cb.isNaN=Ac,Cb.isNull=Bc,Cb.isNumber=Cc,Cb.isObject=zc,Cb.isPlainObject=Dc,Cb.isRegExp=Ec,Cb.isString=Fc,Cb.isUndefined=Gc,Cb.lastIndexOf=wd,Cb.mixin=_d,Cb.noConflict=ae,Cb.noop=be,Cb.now=ce,Cb.parseInt=de,Cb.random=fe,Cb.reduce=cd,Cb.reduceRight=dd,Cb.result=ge,Cb.runInContext=_,Cb.size=hd,Cb.some=id,Cb.sortedIndex=Bd,Cb.template=he,Cb.unescape=je,Cb.uniqueId=ke,Cb.all=Rc,Cb.any=id,Cb.detect=Tc,Cb.findWhere=Tc,Cb.foldl=cd,Cb.foldr=dd,Cb.include=Pc,Cb.inject=cd,_d(function(){var a={};
return nc(Cb,function(b,c){Cb.prototype[c]||(a[c]=b)}),a}(),!1),Cb.first=qd,Cb.last=vd,Cb.sample=fd,Cb.take=qd,Cb.head=qd,nc(Cb,function(a,b){var c="sample"!==b;Cb.prototype[b]||(Cb.prototype[b]=function(b,d){var e=this.__chain__,f=a(this.__wrapped__,b,d);return e||null!=b&&(!d||c&&"function"==typeof b)?new Db(f,e):f})}),Cb.VERSION="2.4.1",Cb.prototype.chain=ne,Cb.prototype.toString=oe,Cb.prototype.value=pe,Cb.prototype.valueOf=pe,Vc(["join","pop","shift"],function(a){var b=cb[a];Cb.prototype[a]=function(){var a=this.__chain__,c=b.apply(this.__wrapped__,arguments);
return a?new Db(c,a):c}}),Vc(["push","reverse","sort","unshift"],function(a){var b=cb[a];Cb.prototype[a]=function(){return b.apply(this.__wrapped__,arguments),this}}),Vc(["concat","slice","splice"],function(a){var b=cb[a];Cb.prototype[a]=function(){return new Db(b.apply(this.__wrapped__,arguments),this.__chain__)}}),Cb}var b,c=[],d=[],e=0,f=+new Date+"",g=75,h=40,i=" 	\f\xa0\ufeff\n\r\u2028\u2029\u1680\u180e\u2000\u2001\u2002\u2003\u2004\u2005\u2006\u2007\u2008\u2009\u200a\u202f\u205f\u3000",j=/\b__p \+= '';/g,k=/\b(__p \+=) '' \+/g,l=/(__e\(.*?\)|\b__t\)) \+\n'';/g,m=/\$\{([^\\}]*(?:\\.[^\\}]*)*)\}/g,n=/\w*$/,o=/^\s*function[ \n\r\t]+\w/,p=/<%=([\s\S]+?)%>/g,q=RegExp("^["+i+"]*0+(?=.$)"),r=/($^)/,s=/\bthis\b/,t=/['\n\r\t\u2028\u2029\\]/g,u=["Array","Boolean","Date","Function","Math","Number","Object","RegExp","String","_","attachEvent","clearTimeout","isFinite","isNaN","parseInt","setTimeout"],v=0,w="[object Arguments]",x="[object Array]",y="[object Boolean]",z="[object Date]",A="[object Function]",B="[object Number]",C="[object Object]",D="[object RegExp]",E="[object String]",F={};
F[A]=!1,F[w]=F[x]=F[y]=F[z]=F[B]=F[C]=F[D]=F[E]=!0;var G={leading:!1,maxWait:0,trailing:!1},H={configurable:!1,enumerable:!1,value:null,writable:!1},I={"boolean":!1,"function":!0,object:!0,number:!1,string:!1,undefined:!1},J={"\\":"\\","'":"'","\n":"n","\r":"r","	":"t","\u2028":"u2028","\u2029":"u2029"},K=I[typeof window]&&window||this,L=I[typeof exports]&&exports&&!exports.nodeType&&exports,M=I[typeof module]&&module&&!module.nodeType&&module,O=(M&&M.exports===L&&L,I[typeof global]&&global);!O||O.global!==O&&O.window!==O||(K=O);
var ab=a._=_();a.each(ab,function(b,c){Object.hasOwnProperty.call(ab,b)&&!/VERSION/.test(name)&&(a[b]||(a[b]=c))})}),FD50.plugin("bootstrap3",function(a){var b=a;if(window["Foundry5/Bootstrap"])throw new Error("An instance of Bootstrap has been initialized before this.");window["Foundry5/Bootstrap"]={version:"3.0.3",foundry:b},+function(a){"use strict";function b(){var a=document.createElement("bootstrap"),b={WebkitTransition:"webkitTransitionEnd",MozTransition:"transitionend",OTransition:"oTransitionEnd otransitionend",transition:"transitionend"};
for(var c in b)if(void 0!==a.style[c])return{end:b[c]}}a.fn.emulateTransitionEnd=function(b){var c=!1,d=this;a(this).one(a.support.transition.end,function(){c=!0});var e=function(){c||a(d).trigger(a.support.transition.end)};return setTimeout(e,b),this},a(function(){a.support.transition=b()})}(b),+function(a){"use strict";var b='[data-bp-dismiss="alert"]',c=function(c){a(c).on("click",b,this.close)};c.prototype.close=function(b){function f(){e.trigger("closed.bs.alert").remove()}var c=a(this),d=c.attr("data-target");
d||(d=c.attr("href"),d=d&&d.replace(/.*(?=#[^\s]*$)/,""));var e=a(d);b&&b.preventDefault(),e.length||(e=c.hasClass("alert")?c:c.parent()),e.trigger(b=a.Event("close.bs.alert")),b.isDefaultPrevented()||(e.removeClass("in"),a.support.transition&&e.hasClass("fade")?e.one(a.support.transition.end,f).emulateTransitionEnd(150):f())};var d=a.fn.alert;a.fn.alert=function(b){return this.each(function(){var d=a(this),e=d.data("bs.alert");e||d.data("bs.alert",e=new c(this)),"string"==typeof b&&e[b].call(d)})},a.fn.alert.Constructor=c,a.fn.alert.noConflict=function(){return a.fn.alert=d,this
},a(document).on("click.bs.alert.data-api",b,c.prototype.close)}(b),+function(a){"use strict";var b=function(c,d){this.$element=a(c),this.options=a.extend({},b.DEFAULTS,d)};b.DEFAULTS={loadingText:"loading..."},b.prototype.setState=function(a){var b="disabled",c=this.$element,d=c.is("input")?"val":"html",e=c.data();a+="Text",e.resetText||c.data("resetText",c[d]()),c[d](e[a]||this.options[a]),setTimeout(function(){"loadingText"==a?c.addClass(b).attr(b,b):c.removeClass(b).removeAttr(b)},0)},b.prototype.toggle=function(){var a=this.$element.closest('[data-bp-toggle="buttons"]'),b=!0;
if(a.length){var c=this.$element.find("input");"radio"===c.prop("type")&&(c.prop("checked")&&this.$element.hasClass("active")?b=!1:a.find(".active").removeClass("active")),b&&c.prop("checked",!this.$element.hasClass("active")).trigger("change")}b&&this.$element.toggleClass("active")};var c=a.fn.button;a.fn.button=function(c){return this.each(function(){var d=a(this),e=d.data("bs.button"),f="object"==typeof c&&c;e||d.data("bs.button",e=new b(this,f)),"toggle"==c?e.toggle():c&&e.setState(c)})},a.fn.button.Constructor=b,a.fn.button.noConflict=function(){return a.fn.button=c,this
},a(document).on("click.bs.button.data-api","[data-bp-toggle^=button]",function(b){var c=a(b.target);c.hasClass("btn")||(c=c.closest(".btn")),c.button("toggle"),b.preventDefault()})}(b),+function(a){"use strict";var b=function(b,c){this.$element=a(b),this.$indicators=this.$element.find(".carousel-indicators"),this.options=c,this.paused=this.sliding=this.interval=this.$active=this.$items=null,"hover"==this.options.pause&&this.$element.on("mouseenter",a.proxy(this.pause,this)).on("mouseleave",a.proxy(this.cycle,this))
};b.DEFAULTS={interval:5e3,pause:"hover",wrap:!0},b.prototype.cycle=function(b){return b||(this.paused=!1),this.interval&&clearInterval(this.interval),this.options.interval&&!this.paused&&(this.interval=setInterval(a.proxy(this.next,this),this.options.interval)),this},b.prototype.getActiveIndex=function(){return this.$active=this.$element.find(".item.active"),this.$items=this.$active.parent().children(),this.$items.index(this.$active)},b.prototype.to=function(b){var c=this,d=this.getActiveIndex();return b>this.$items.length-1||0>b?void 0:this.sliding?this.$element.one("slid.bs.carousel",function(){c.to(b)
}):d==b?this.pause().cycle():this.slide(b>d?"next":"prev",a(this.$items[b]))},b.prototype.pause=function(b){return b||(this.paused=!0),this.$element.find(".next, .prev").length&&a.support.transition.end&&(this.$element.trigger(a.support.transition.end),this.cycle(!0)),this.interval=clearInterval(this.interval),this},b.prototype.next=function(){return this.sliding?void 0:this.slide("next")},b.prototype.prev=function(){return this.sliding?void 0:this.slide("prev")},b.prototype.slide=function(b,c){var d=this.$element.find(".item.active"),e=c||d[b](),f=this.interval,g="next"==b?"left":"right",h="next"==b?"first":"last",i=this;
if(!e.length){if(!this.options.wrap)return;e=this.$element.find(".item")[h]()}this.sliding=!0,f&&this.pause();var j=a.Event("slide.bs.carousel",{relatedTarget:e[0],direction:g});if(!e.hasClass("active")){if(this.$indicators.length&&(this.$indicators.find(".active").removeClass("active"),this.$element.one("slid.bs.carousel",function(){var b=a(i.$indicators.children()[i.getActiveIndex()]);b&&b.addClass("active")})),a.support.transition&&this.$element.hasClass("slide")){if(this.$element.trigger(j),j.isDefaultPrevented())return;
e.addClass(b),e[0].offsetWidth,d.addClass(g),e.addClass(g),d.one(a.support.transition.end,function(){e.removeClass([b,g].join(" ")).addClass("active"),d.removeClass(["active",g].join(" ")),i.sliding=!1,setTimeout(function(){i.$element.trigger("slid.bs.carousel")},0)}).emulateTransitionEnd(600)}else{if(this.$element.trigger(j),j.isDefaultPrevented())return;d.removeClass("active"),e.addClass("active"),this.sliding=!1,this.$element.trigger("slid.bs.carousel")}return f&&this.cycle(),this}};var c=a.fn.carousel;a.fn.carousel=function(c){return this.each(function(){var d=a(this),e=d.data("bs.carousel"),f=a.extend({},b.DEFAULTS,d.data(),"object"==typeof c&&c),g="string"==typeof c?c:f.slide;
e||d.data("bs.carousel",e=new b(this,f)),"number"==typeof c?e.to(c):g?e[g]():f.interval&&e.pause().cycle()})},a.fn.carousel.Constructor=b,a.fn.carousel.noConflict=function(){return a.fn.carousel=c,this},a(document).on("click.bs.carousel.data-api","[data-bp-slide], [data-bp-slide-to]",function(b){var d,c=a(this),e=a(c.attr("data-target")||(d=c.attr("href"))&&d.replace(/.*(?=#[^\s]+$)/,"")),f=a.extend({},e.data(),c.data()),g=c.attr("data-bp-slide-to");g&&(f.interval=!1),e.carousel(f),(g=c.attr("data-bp-slide-to"))&&e.data("bs.carousel").to(g),b.preventDefault()
}),a(window).on("load",function(){a('[data-bp-ride="carousel"]').each(function(){var b=a(this);b.carousel(b.data())})})}(b),+function(a){"use strict";var b=function(c,d){this.$element=a(c),this.options=a.extend({},b.DEFAULTS,d),this.transitioning=null,this.options.parent&&(this.$parent=a(this.options.parent)),this.options.toggle&&this.toggle()};b.DEFAULTS={toggle:!0},b.prototype.dimension=function(){var a=this.$element.hasClass("width");return a?"width":"height"},b.prototype.show=function(){if(!this.transitioning&&!this.$element.hasClass("in")){var b=a.Event("show.bs.collapse");
if(this.$element.triggerHandler(b),!b.isDefaultPrevented()){var c=this.$parent&&this.$parent.find("> .panel > .in");if(c&&c.length){var d=c.data("bs.collapse");if(d&&d.transitioning)return;c.collapse("hide"),d||c.data("bs.collapse",null)}var e=this.dimension();this.$element.removeClass("collapse").addClass("collapsing")[e](0),this.transitioning=1;var f=function(){this.$element.removeClass("collapsing").addClass("in")[e]("auto"),this.transitioning=0,this.$element.trigger("shown.bs.collapse")};if(!a.support.transition)return f.call(this);
var g=a.camelCase(["scroll",e].join("-"));this.$element.one(a.support.transition.end,a.proxy(f,this)).emulateTransitionEnd(350)[e](this.$element[0][g])}}},b.prototype.hide=function(){if(!this.transitioning&&this.$element.hasClass("in")){var b=a.Event("hide.bs.collapse");if(this.$element.triggerHandler(b),!b.isDefaultPrevented()){var c=this.dimension();this.$element[c](this.$element[c]())[0].offsetHeight,this.$element.addClass("collapsing").removeClass("collapse").removeClass("in"),this.transitioning=1;var d=function(){this.transitioning=0,this.$element.trigger("hidden.bs.collapse").removeClass("collapsing").addClass("collapse")
};return a.support.transition?(this.$element[c](0).one(a.support.transition.end,a.proxy(d,this)).emulateTransitionEnd(350),void 0):d.call(this)}}},b.prototype.toggle=function(){this[this.$element.hasClass("in")?"hide":"show"]()};var c=a.fn.collapse;a.fn.collapse=function(c){return this.each(function(){var d=a(this),e=d.data("bs.collapse"),f=a.extend({},b.DEFAULTS,d.data(),"object"==typeof c&&c);e||d.data("bs.collapse",e=new b(this,f)),"string"==typeof c&&e[c]()})},a.fn.collapse.Constructor=b,a.fn.collapse.noConflict=function(){return a.fn.collapse=c,this
},a(document).on("click.bs.collapse.data-api","[data-bp-toggle=collapse]",function(b){var d,c=a(this),e=c.attr("data-target")||b.preventDefault()||(d=c.attr("href"))&&d.replace(/.*(?=#[^\s]+$)/,""),f=a(e),g=f.data("bs.collapse"),h=g?"toggle":c.data(),i=c.attr("data-parent"),j=i&&a(i);g&&g.transitioning||(j&&j.find('[data-bp-toggle=collapse][data-parent="'+i+'"]').not(c).addClass("collapsed"),c[f.hasClass("in")?"addClass":"removeClass"]("collapsed")),f.collapse(h)})}(b),+function(a){"use strict";function e(){a(b).remove(),a(c).each(function(b){var c=f(a(this));
c.hasClass("open")&&(c.triggerHandler(b=a.Event("hide.bs.dropdown")),b.isDefaultPrevented()||c.removeClass("open").trigger("hidden.bs.dropdown"))})}function f(b){var c=b.attr("data-target");c||(c=b.attr("href"),c=c&&/#/.test(c)&&c.replace(/.*(?=#[^\s]*$)/,""));var d=c&&a(c);return d&&d.length?d:b.parent()}var b=".dropdown-backdrop",c="[data-bp-toggle=dropdown]",d=function(b){a(b).on("click.bs.dropdown",this.toggle)};d.prototype.toggle=function(b){var c=a(this);if(!c.is(".disabled, :disabled")){var d=f(c),g=d.hasClass("open");
if(e(),!g){if("ontouchstart"in document.documentElement&&!d.closest(".navbar-nav").length&&a('<div class="dropdown-backdrop"/>').insertAfter(a(this)).on("click",e),d.triggerHandler(b=a.Event("show.bs.dropdown")),b.isDefaultPrevented())return;d.toggleClass("open").trigger("shown.bs.dropdown"),c.focus()}return!1}},d.prototype.keydown=function(b){if(/(38|40|27)/.test(b.keyCode)){var d=a(this);if(b.preventDefault(),b.stopPropagation(),!d.is(".disabled, :disabled")){var e=f(d),g=e.hasClass("open");if(!g||g&&27==b.keyCode)return 27==b.which&&e.find(c).focus(),d.click();
var h=a("[role=menu] li:not(.divider):visible a",e);if(h.length){var i=h.index(h.filter(":focus"));38==b.keyCode&&i>0&&i--,40==b.keyCode&&i<h.length-1&&i++,~i||(i=0),h.eq(i).focus()}}}};var g=a.fn.dropdown;a.fn.dropdown=function(b){return this.each(function(){var c=a(this),e=c.data("bs.dropdown");e||c.data("bs.dropdown",e=new d(this)),"string"==typeof b&&e[b].call(c)})},a.fn.dropdown.Constructor=d,a.fn.dropdown.noConflict=function(){return a.fn.dropdown=g,this},a(document).on("click.bs.dropdown.data-api",e).on("click.bs.dropdown.data-api",".dropdown_ form, .dropdown-static",function(a){a.stopPropagation()
}).on("click.bs.dropdown.data-api",c,d.prototype.toggle).on("keydown.bs.dropdown.data-api",c+", [role=menu]",d.prototype.keydown)}(b),+function(a){"use strict";var b=function(b,c){this.options=c,this.$element=a(b),this.$backdrop=this.isShown=null,this.options.remote&&this.$element.load(this.options.remote)};b.DEFAULTS={backdrop:!0,keyboard:!0,show:!0},b.prototype.toggle=function(a){return this[this.isShown?"hide":"show"](a)},b.prototype.show=function(b){var c=this,d=a.Event("show.bs.modal",{relatedTarget:b});
this.$element.triggerHandler(d),this.isShown||d.isDefaultPrevented()||(this.isShown=!0,this.escape(),this.$element.on("click.dismiss.modal",'[data-bp-dismiss="modal"]',a.proxy(this.hide,this)),this.backdrop(function(){var d=a.support.transition&&c.$element.hasClass("fade");c.$element.parent().length||c.$element.appendTo(document.body),c.$element.show(),d&&c.$element[0].offsetWidth,c.$element.addClass("in").attr("aria-hidden",!1),c.enforceFocus();var e=a.Event("shown.bs.modal",{relatedTarget:b});d?c.$element.find(".modal-dialog").one(a.support.transition.end,function(){c.$element.focus().trigger(e)
}).emulateTransitionEnd(300):c.$element.focus().trigger(e)}))},b.prototype.hide=function(b){b&&b.preventDefault(),b=a.Event("hide.bs.modal"),this.$element.triggerHandler(b),this.isShown&&!b.isDefaultPrevented()&&(this.isShown=!1,this.escape(),a(document).off("focusin.bs.modal"),this.$element.removeClass("in").attr("aria-hidden",!0).off("click.dismiss.modal"),a.support.transition&&this.$element.hasClass("fade")?this.$element.one(a.support.transition.end,a.proxy(this.hideModal,this)).emulateTransitionEnd(300):this.hideModal())
},b.prototype.enforceFocus=function(){a(document).off("focusin.bs.modal").on("focusin.bs.modal",a.proxy(function(a){this.$element[0]===a.target||this.$element.has(a.target).length||this.$element.focus()},this))},b.prototype.escape=function(){this.isShown&&this.options.keyboard?this.$element.on("keyup.dismiss.bs.modal",a.proxy(function(a){27==a.which&&this.hide()},this)):this.isShown||this.$element.off("keyup.dismiss.bs.modal")},b.prototype.hideModal=function(){var a=this;this.$element.hide(),this.backdrop(function(){a.removeBackdrop(),a.$element.trigger("hidden.bs.modal")
})},b.prototype.removeBackdrop=function(){this.$backdrop&&this.$backdrop.remove(),this.$backdrop=null},b.prototype.backdrop=function(b){var d=this.$element.hasClass("fade")?"fade":"";if(this.isShown&&this.options.backdrop){var e=a.support.transition&&d;if(this.$backdrop=a('<div class="modal-backdrop '+d+'" />').appendTo(document.body),this.$element.on("click.dismiss.modal",a.proxy(function(a){a.target===a.currentTarget&&("static"==this.options.backdrop?this.$element[0].focus.call(this.$element[0]):this.hide.call(this))
},this)),e&&this.$backdrop[0].offsetWidth,this.$backdrop.addClass("in"),!b)return;e?this.$backdrop.one(a.support.transition.end,b).emulateTransitionEnd(150):b()}else!this.isShown&&this.$backdrop?(this.$backdrop.removeClass("in"),a.support.transition&&this.$element.hasClass("fade")?this.$backdrop.one(a.support.transition.end,b).emulateTransitionEnd(150):b()):b&&b()};var c=a.fn.modal;a.fn.modal=function(c,d){return this.each(function(){var e=a(this),f=e.data("bs.modal"),g=a.extend({},b.DEFAULTS,e.data(),"object"==typeof c&&c);
f||e.data("bs.modal",f=new b(this,g)),"string"==typeof c?f[c](d):g.show&&f.show(d)})},a.fn.modal.Constructor=b,a.fn.modal.noConflict=function(){return a.fn.modal=c,this},a(document).on("click.bs.modal.data-api",'[data-bp-toggle="modal"]',function(b){var c=a(this),d=c.attr("href"),e=a(c.attr("data-target")||d&&d.replace(/.*(?=#[^\s]+$)/,"")),f=e.data("modal")?"toggle":a.extend({remote:!/#/.test(d)&&d},e.data(),c.data());b.preventDefault(),e.modal(f,this).one("hide",function(){c.is(":visible")&&c.focus()})}),a(document).on("show.bs.modal",".modal.bs",function(){a(document.body).addClass("modal-open")
}).on("hidden.bs.modal",".modal.bs",function(){a(document.body).removeClass("modal-open")})}(b),+function(a){"use strict";var b=function(a,b){this.type=this.options=this.enabled=this.timeout=this.hoverState=this.$element=null,this.init("tooltip",a,b)};b.DEFAULTS={animation:!0,placement:"top",selector:!1,template:'<div class="tooltip"><div class="tooltip-arrow"></div><div class="tooltip-inner"></div></div>',trigger:"hover focus",title:"",delay:0,html:!1,container:!1},b.prototype.init=function(b,c,d){this.enabled=!0,this.type=b,this.$element=a(c),this.options=this.getOptions(d);
for(var e=this.options.trigger.split(" "),f=e.length;f--;){var g=e[f];if("click"==g)this.$element.on("click."+this.type,this.options.selector,a.proxy(this.toggle,this));else if("manual"!=g){var h="hover"==g?"mouseenter":"focus",i="hover"==g?"mouseleave":"blur";this.$element.on(h+"."+this.type,this.options.selector,a.proxy(this.enter,this)),this.$element.on(i+"."+this.type,this.options.selector,a.proxy(this.leave,this))}}this.options.selector?this._options=a.extend({},this.options,{trigger:"manual",selector:""}):this.fixTitle()
},b.prototype.getDefaults=function(){return b.DEFAULTS},b.prototype.getOptions=function(b){return b=a.extend({},this.getDefaults(),this.$element.data(),b),b.delay&&"number"==typeof b.delay&&(b.delay={show:b.delay,hide:b.delay}),b},b.prototype.getDelegateOptions=function(){var b={},c=this.getDefaults();return this._options&&a.each(this._options,function(a,d){c[a]!=d&&(b[a]=d)}),b},b.prototype.enter=function(b){var c=b instanceof this.constructor?b:a(b.currentTarget)[this.type](this.getDelegateOptions()).data("bs."+this.type);
return clearTimeout(c.timeout),c.hoverState="in",c.options.delay&&c.options.delay.show?(c.timeout=setTimeout(function(){"in"==c.hoverState&&c.show()},c.options.delay.show),void 0):c.show()},b.prototype.leave=function(b){var c=b instanceof this.constructor?b:a(b.currentTarget)[this.type](this.getDelegateOptions()).data("bs."+this.type);return clearTimeout(c.timeout),c.hoverState="out",c.options.delay&&c.options.delay.hide?(c.timeout=setTimeout(function(){"out"==c.hoverState&&c.hide()},c.options.delay.hide),void 0):c.hide()
},b.prototype.show=function(){var b=a.Event("show.bs."+this.type);if(this.hasContent()&&this.enabled){if(this.$element.triggerHandler(b),b.isDefaultPrevented())return;var c=this.tip();this.setContent(),this.options.animation&&c.addClass("fade");var d="function"==typeof this.options.placement?this.options.placement.call(this,c[0],this.$element[0]):this.options.placement,e=/\s?auto?\s?/i,f=e.test(d);f&&(d=d.replace(e,"")||"top"),c.detach().css({top:0,left:0,display:"block"}).addClass(d.split("-")[0]),this.options.container?c.appendTo(this.options.container):c.insertAfter(this.$element);
var g=this.getPosition(),h=c[0].offsetWidth,i=c[0].offsetHeight;if(f){var j=this.$element.parent(),k=d,l=document.documentElement.scrollTop||document.body.scrollTop,m="body"==this.options.container?window.innerWidth:j.outerWidth(),n="body"==this.options.container?window.innerHeight:j.outerHeight(),o="body"==this.options.container?0:j.offset().left;d="bottom"==d&&g.top+g.height+i-l>n?"top":"top"==d&&g.top-l-i<0?"bottom":"right"==d&&g.right+h>m?"left":"left"==d&&g.left-h<o?"right":d,c.removeClass(k).addClass(d)
}var p=this.getCalculatedOffset(d,g,h,i);this.applyPlacement(p,d),this.$element.trigger("shown.bs."+this.type)}},b.prototype.applyPlacement=function(a,b){var c,d=this.tip(),e=d[0].offsetWidth,f=d[0].offsetHeight,g=parseInt(d.css("margin-top"),10),h=parseInt(d.css("margin-left"),10);isNaN(g)&&(g=0),isNaN(h)&&(h=0),a.top=a.top+g,a.left=a.left+h,d.offset(a).addClass("in");var i=d[0].offsetWidth,j=d[0].offsetHeight;if("top"==b&&j!=f&&(c=!0,a.top=a.top+f-j),0===["top","bottom"].indexOf(b.split("-")[0])){var k=0;a.left<0&&(k=-2*a.left,a.left=0,d.offset(a),i=d[0].offsetWidth,j=d[0].offsetHeight),this.replaceArrow(k-e+i,i,"left")
}0===["left","right"].indexOf(b.split("-")[0])&&this.replaceArrow(j-f,j,"top"),c&&d.offset(a)},b.prototype.replaceArrow=function(a,b,c){this.arrow().css(c,a?50*(1-a/b)+"%":"")},b.prototype.setContent=function(){var a=this.tip(),b=this.getTitle();a.find(".tooltip-inner")[this.options.html?"html":"text"](b),a.removeClass("fade in top bottom left right")},b.prototype.hide=function(){function e(){"in"!=b.hoverState&&c.detach()}var b=this,c=this.tip(),d=a.Event("hide.bs."+this.type);return this.$element.triggerHandler(d),d.isDefaultPrevented()?void 0:(c.removeClass("in"),a.support.transition&&this.$tip.hasClass("fade")?c.one(a.support.transition.end,e).emulateTransitionEnd(150):e(),this.$element.trigger("hidden.bs."+this.type),this)
},b.prototype.fixTitle=function(){var a=this.$element;(a.attr("title")||"string"!=typeof a.attr("data-original-title"))&&a.attr("data-original-title",a.attr("title")||"").attr("title","")},b.prototype.hasContent=function(){return this.getTitle()},b.prototype.getPosition=function(){var b=this.$element[0];return a.extend({},"function"==typeof b.getBoundingClientRect?b.getBoundingClientRect():{width:b.offsetWidth,height:b.offsetHeight},this.$element.offset())},b.prototype.getCalculatedOffset=function(a,b,c,d){return"left-top"==a?{top:b.top,left:b.left-c}:"left-bottom"==a?{top:b.top+b.height-d,left:b.left-c}:"right-top"==a?{top:b.top,left:b.left+b.width}:"right-bottom"==a?{top:b.top+b.height-d,left:b.left+b.width}:"top-left"==a?{top:b.top-d,left:b.left}:"top-right"==a?{top:b.top-d,left:b.left+b.width-c}:"bottom-left"==a?{top:b.top+b.height,left:b.left}:"bottom-right"==a?{top:b.top+b.height,left:b.left+b.width-c}:"bottom"==a?{top:b.top+b.height,left:b.left+b.width/2-c/2}:"top"==a?{top:b.top-d,left:b.left+b.width/2-c/2}:"left"==a?{top:b.top+b.height/2-d/2,left:b.left-c}:{top:b.top+b.height/2-d/2,left:b.left+b.width}
},b.prototype.getTitle=function(){var a,b=this.$element,c=this.options;return a=b.attr("data-original-title")||("function"==typeof c.title?c.title.call(b[0]):c.title)},b.prototype.tip=function(){return this.$tip=this.$tip||a(this.options.template)},b.prototype.arrow=function(){return this.$arrow=this.$arrow||this.tip().find(".tooltip-arrow")},b.prototype.validate=function(){this.$element[0].parentNode||(this.hide(),this.$element=null,this.options=null)},b.prototype.enable=function(){this.enabled=!0},b.prototype.disable=function(){this.enabled=!1
},b.prototype.toggleEnabled=function(){this.enabled=!this.enabled},b.prototype.toggle=function(b){var c=b?a(b.currentTarget)[this.type](this.getDelegateOptions()).data("bs."+this.type):this;c.tip().hasClass("in")?c.leave(c):c.enter(c)},b.prototype.destroy=function(){this.hide().$element.off("."+this.type).removeData("bs."+this.type)};var c=a.fn.tooltip;a.fn.tooltip=function(c){return this.each(function(){var d=a(this),e=d.data("bs.tooltip"),f="object"==typeof c&&c;e||d.data("bs.tooltip",e=new b(this,f)),"string"==typeof c&&e[c]()
})},a.fn.tooltip.Constructor=b,a.fn.tooltip.noConflict=function(){return a.fn.tooltip=c,this}}(b),+function(a){"use strict";var b=function(a,b){this.init("popover",a,b)};if(!a.fn.tooltip)throw new Error("Popover requires tooltip.js");b.DEFAULTS=a.extend({},a.fn.tooltip.Constructor.DEFAULTS,{placement:"right",trigger:"click",content:"",template:'<div id="fd" class="fd-popover"><div class="arrow"></div><h3 class="fd-popover-title"></h3><div class="fd-popover-content"></div></div>'}),b.prototype=a.extend({},a.fn.tooltip.Constructor.prototype),b.prototype.constructor=b,b.prototype.getDefaults=function(){return b.DEFAULTS
},b.prototype.setContent=function(){var a=this.tip(),b=this.getTitle(),c=this.getContent();a.find(".fd-popover-title")[this.options.html?"html":"text"](b),a.find(".fd-popover-content")[this.options.html?"html":"text"](c),a.removeClass("fade top bottom left right in"),a.find(".fd-popover-title").html()||a.find(".fd-popover-title").hide()},b.prototype.hasContent=function(){return this.getTitle()||this.getContent()},b.prototype.getContent=function(){var a=this.$element,b=this.options;return a.attr("data-content")||("function"==typeof b.content?b.content.call(a[0]):b.content)
},b.prototype.arrow=function(){return this.$arrow=this.$arrow||this.tip().find(".arrow")},b.prototype.tip=function(){return this.$tip||(this.$tip=a(this.options.template)),this.$tip};var c=a.fn.popover;a.fn.popover=function(c){return this.each(function(){var d=a(this),e=d.data("bs.popover"),f="object"==typeof c&&c;e||d.data("bs.popover",e=new b(this,f)),"string"==typeof c&&e[c]()})},a.fn.popover.Constructor=b,a.fn.popover.noConflict=function(){return a.fn.popover=c,this}}(b),+function(a){"use strict";function b(c,d){var e,f=a.proxy(this.process,this);
this.$element=a(c).is("body")?a(window):a(c),this.$body=a("body"),this.$scrollElement=this.$element.on("scroll.bs.scroll-spy.data-api",f),this.options=a.extend({},b.DEFAULTS,d),this.selector=(this.options.target||(e=a(c).attr("href"))&&e.replace(/.*(?=#[^\s]+$)/,"")||"")+" .nav li > a",this.offsets=a([]),this.targets=a([]),this.activeTarget=null,this.refresh(),this.process()}b.DEFAULTS={offset:10},b.prototype.refresh=function(){var b=this.$element[0]==window?"offset":"position";this.offsets=a([]),this.targets=a([]);
{var c=this;this.$body.find(this.selector).map(function(){var d=a(this),e=d.data("target")||d.attr("href"),f=/^#\w/.test(e)&&a(e);return f&&f.length&&[[f[b]().top+(!a.isWindow(c.$scrollElement.get(0))&&c.$scrollElement.scrollTop()),e]]||null}).sort(function(a,b){return a[0]-b[0]}).each(function(){c.offsets.push(this[0]),c.targets.push(this[1])})}},b.prototype.process=function(){var g,a=this.$scrollElement.scrollTop()+this.options.offset,b=this.$scrollElement[0].scrollHeight||this.$body[0].scrollHeight,c=b-this.$scrollElement.height(),d=this.offsets,e=this.targets,f=this.activeTarget;
if(a>=c)return f!=(g=e.last()[0])&&this.activate(g);for(g=d.length;g--;)f!=e[g]&&a>=d[g]&&(!d[g+1]||a<=d[g+1])&&this.activate(e[g])},b.prototype.activate=function(b){this.activeTarget=b,a(this.selector).parents(".active").removeClass("active");var c=this.selector+'[data-target="'+b+'"],'+this.selector+'[href="'+b+'"]',d=a(c).parents("li").addClass("active");d.parent(".dropdown-menu").length&&(d=d.closest("li.dropdown").addClass("active")),d.trigger("activate.bs.scrollspy")};var c=a.fn.scrollspy;a.fn.scrollspy=function(c){return this.each(function(){var d=a(this),e=d.data("bs.scrollspy"),f="object"==typeof c&&c;
e||d.data("bs.scrollspy",e=new b(this,f)),"string"==typeof c&&e[c]()})},a.fn.scrollspy.Constructor=b,a.fn.scrollspy.noConflict=function(){return a.fn.scrollspy=c,this},a(window).on("load",function(){a('[data-bp-spy="scroll"]').each(function(){var b=a(this);b.scrollspy(b.data())})})}(b),+function(a){"use strict";var b=function(b){this.element=a(b)};b.prototype.show=function(){var b=this.element,c=b.closest("ul:not(.dropdown-menu)"),d=b.data("target");if(d||(d=b.attr("href"),d=d&&d.replace(/.*(?=#[^\s]*$)/,"")),!b.parent("li").hasClass("active")){var e=c.find(".active:last a")[0],f=a.Event("show.bs.tab",{relatedTarget:e});
if(b.triggerHandler(f),!f.isDefaultPrevented()){var g=a(d);this.activate(b.parent("li"),c),this.activate(g,g.parent(),function(){b.trigger({type:"shown.bs.tab",relatedTarget:e})})}}},b.prototype.activate=function(b,c,d){function g(){e.removeClass("active").find("> .dropdown-menu > .active").removeClass("active"),b.addClass("active"),f?(b[0].offsetWidth,b.addClass("in")):b.removeClass("fade"),b.parent(".dropdown-menu")&&b.closest("li.dropdown").addClass("active"),d&&d()}var e=c.find("> .active"),f=d&&a.support.transition&&e.hasClass("fade");
f?e.one(a.support.transition.end,g).emulateTransitionEnd(150):g(),e.removeClass("in")};var c=a.fn.tab;a.fn.tab=function(c){return this.each(function(){var d=a(this),e=d.data("bs.tab");e||d.data("bs.tab",e=new b(this)),"string"==typeof c&&e[c]()})},a.fn.tab.Constructor=b,a.fn.tab.noConflict=function(){return a.fn.tab=c,this},a(document).on("click.bs.tab.data-api",'[data-bp-toggle="tab"], [data-bp-toggle="pill"]',function(b){b.preventDefault(),a(this).tab("show")})}(b),+function(a){"use strict";var b=function(c,d){this.options=a.extend({},b.DEFAULTS,d),this.$window=a(window).on("scroll.bs.affix.data-api",a.proxy(this.checkPosition,this)).on("click.bs.affix.data-api",a.proxy(this.checkPositionWithEventLoop,this)),this.$element=a(c),this.affixed=this.unpin=null,this.checkPosition()
};b.RESET="affix affix-top affix-bottom",b.DEFAULTS={offset:0},b.prototype.checkPositionWithEventLoop=function(){setTimeout(a.proxy(this.checkPosition,this),1)},b.prototype.checkPosition=function(){if(this.$element.is(":visible")){var c=a(document).height(),d=this.$window.scrollTop(),e=this.$element.offset(),f=this.options.offset,g=f.top,h=f.bottom;"object"!=typeof f&&(h=g=f),"function"==typeof g&&(g=f.top()),"function"==typeof h&&(h=f.bottom());var i=null!=this.unpin&&d+this.unpin<=e.top?!1:null!=h&&e.top+this.$element.height()>=c-h?"bottom":null!=g&&g>=d?"top":!1;
this.affixed!==i&&(this.unpin&&this.$element.css("top",""),this.affixed=i,this.unpin="bottom"==i?e.top-d:null,this.$element.removeClass(b.RESET).addClass("affix"+(i?"-"+i:"")),"bottom"==i&&this.$element.offset({top:document.body.offsetHeight-h-this.$element.height()}))}};var c=a.fn.affix;a.fn.affix=function(c){return this.each(function(){var d=a(this),e=d.data("bs.affix"),f="object"==typeof c&&c;e||d.data("bs.affix",e=new b(this,f)),"string"==typeof c&&e[c]()})},a.fn.affix.Constructor=b,a.fn.affix.noConflict=function(){return a.fn.affix=c,this
},a(window).on("load",function(){a('[data-bp-spy="affix"]').each(function(){var b=a(this),c=b.data();c.offset=c.offset||{},c.offsetBottom&&(c.offset.bottom=c.offsetBottom),c.offsetTop&&(c.offset.top=c.offsetTop),b.affix(c)})})}(b),!function(a){var b=function(b,c){if(this.$element=a(b),this.$note=a('<div class="alert"></div>'),this.options=a.extend(!0,a.fn.notify.defaults,c),this.options.transition?"fade"==this.options.transition?this.$note.addClass("in").addClass(this.options.transition):this.$note.addClass(this.options.transition):this.$note.addClass("fade").addClass("in"),this.options.type?this.$note.addClass("alert-"+this.options.type):this.$note.addClass("alert-success"),this.options.message||""===this.$element.data("message")?"object"==typeof this.options.message&&(this.options.message.html?this.$note.html(this.options.message.html):this.options.message.text?this.$note.text(this.options.message.text):this.$note.html(this.options.message)):this.$note.html(this.$element.data("message")),this.options.closable)var d=a('<a class="close pull-right" href="javascript: void(0);">&times;</a>');
return a(d).on("click",a.proxy(onClose,this)),this.$note.prepend(d),this};onClose=function(){this.options.onClose(),a(this.$note).remove(),this.options.onClosed()},b.prototype.show=function(){this.options.fadeOut.enabled&&this.$note.delay(this.options.fadeOut.delay||3e3).fadeOut("slow",a.proxy(onClose,this)),this.$element.append(this.$note),this.$note.alert()},b.prototype.hide=function(){this.options.fadeOut.enabled?this.$note.delay(this.options.fadeOut.delay||3e3).fadeOut("slow",a.proxy(onClose,this)):onClose.call(this)
},a.fn.notify=function(a){return new b(this,a)},a.fn.notify.defaults={type:"success",closable:!0,transition:"fade",fadeOut:{enabled:!0,delay:3e3},message:null,onClose:function(){},onClosed:function(){}}}(a)}),FD50.plugin("responsive",function(a){var b={elementWidth:function(a){return a.outerWidth(!0)}};a.responsive=function(c,d){a.isArray(d)&&(d={conditions:d});var d=a.extend({},b,d);return new e(c,d)},a.fn.responsive=function(b){return b&&a.responsive(a(this),b),this};var c=a(window),d=a.isFunction,e=function(b,d){var f=this;
a(b).each(function(){var c=(a(this),a(this).data("$responsive"));c instanceof e&&c.destroy()}),a.extend(f,{elem:b,options:d,conditions:a.sortBy(a.makeArray(d.conditions),function(a){return a.at}),event:"resize.responsive."+a.uid(),handler:a.debounce(function(){f.set()},250)}),delete d.conditions,a(function(){c.on(f.event,f.handler),f.set()}),a(window).load(function(){f.set()})};a.extend(e.prototype,{set:function(){var b=this,c=b.options.elementWidth;a(b.elem).each(function(){var e=a(this),f=d(c)?c(e):c;a(e).data("$responsive",b),b.removeCondition(e.data("currentCondition"),e),a.each(b.conditions,function(a,c){var d=c.at;
return d>=f?(b.applyCondition(c,e),!1):void 0})})},applyCondition:function(b,c){var e,f,g,h;(e=b.switchTo)&&c.addClass(e),(f=b.alsoSwitch)&&a.each(f,function(b,c){a(b).addClass(c)}),(g=b.switchStylesheet)&&a.each(a.makeArray(g),function(b,c){var d=a('link[href$="'+c+'"]');d.length<1&&a("<link/>").attr({rel:"stylesheet",type:"text/css",href:c}).appendTo("head")}),(h=b.whenApplied)&&d(h)&&h(),c.data("currentCondition",b).trigger("responsive",[b])},removeCondition:function(b,c){if(b){var e,f,g,h;(e=b.switchTo)&&c.removeClass(e),(f=b.alsoSwitch)&&a.each(f,function(b,c){a(b).removeClass(c)
}),(g=b.switchStylesheet)&&a.each(a.makeArray(g),function(b,c){a('link[href$="'+c+'"]').remove()}),(h=b.whenRemoved)&&d(h)&&h(),c.removeData("currentCondition")}},resetToDefault:function(b){var c=this,d=a(c.elem);a.each(c.conditions,function(a,e){b&&a==b||c.removeCondition(e,d)})},destroy:function(){if(!b.destroyed){c.off(this.event);var b=this;a(b.elem).each(function(){var c=a(this);b.removeCondition(c.data("currentCondition"),c),c.removeData("$responsive")}),b.destroyed=!0}}})}),FD50.plugin("utils",function(a){!function(){var b=function(a){this.items=a,this.start=0,this.end=a.length-1,this.node=null,this.stopped=!1
};a.extend(b.prototype,{isLooping:function(){return this.stopped?!1:Math.abs(this.start-this.end)>1?(this.node=Math.floor((this.start+this.end)/2),!0):!1},flip:function(a){a?this.end=this.node-1:this.start=this.node+1},stop:function(){this.stop=!0}}),a.Bloop=function(a){return new b(a)}}(),a.Chunk=function(b,c){a.isArray(b)&&(b=[]);var c=a.extend({},{size:256,every:1e3},c),d=a.extend(a.Deferred(),{size:c.size,every:c.every,from:0,to:b.length,process:function(a){return d.process.fn=a,d},chunkStart:function(a){return d.chunkStart.fn=a,d
},chunkEnd:function(a){return d.chunkEnd.fn=a,d},start:function(){return d.stopped=!1,d.iterate(),d},iterate:function(){if(!d.stopped){var a=d.process.fn;if(a){d.to=from.size+d.size;var c=b.length;d.to>c&&(d.to=c);var e={from:d.from,to:d.to};for(d.chunkStart.fn&&d.chunkStart.fn.call(d,e.from,e.to);d.from<d.to&&!d.stopped;)a.call(d,b[d.from]),d.from++;return d.chunkEnd.fn&&d.chunkEnd.fn.call(d,e.from,e.to),d.completed=d.from>=b.length-1,d.completed?d.resolveWith(d):d.nextIteration=setTimeout(d.iterate,d.every),d
}}},pause:function(){return d.stopped=!0,clearTimeout(d.nextIteration),d},restart:function(){return"rejected"===d.state()?d:(d.from=0,d.start(),d)},stop:function(){return d.pause(),d.rejectWith(d,[d.from]),d}});return d},function(b){var c=function(){this.lastId=0};c.prototype.queue=function(c){var d=this,e=a.uid();return d.lastId=e,function(){if(d.lastId===e){var a=arguments,a=b(c)?c.apply(this,a):a;return b(d.fn)?d.fn.apply(this,a):a}}},a.Enqueue=function(d){var e=new c;b(d)&&(e.fn=d);var f=a.proxy(e.queue,e);
return f.reset=function(){e.lastId=0},f}}(a.isFunction),function(){var b={error:"error",warning:"warn",success:"log",info:"info"};a.Exception=function(c){var d=arguments,e=1==d.length,f=3==d.length;return c=a.isPlainObject(c)?c:{type:e?"error":d[0],message:e?d[0]:d[1]},f&&a.extend(c,d[2]),"development"==a.environment&&console[b[c.type]](c.message,c),c}}(),a.IE=function(){var a=navigator.userAgent;if(a.match(/MSIE 9/))return 9;if(a.match(/MSIE 10/))return 10;if(a.match(/rv:11/i))return 11;for(var b,c=3,d=document.createElement("div"),e=d.getElementsByTagName("i");c++,d.innerHTML="<!--[if gt IE "+c+"]><i></i><![endif]-->",e[0];);return c>4?c:b
}(),a.Task=function(b){var c=a.extend(a.Deferred(),{data:{},list:[],add:function(b){var d=a.extend(a.Deferred(),{name:b,item:d});return c.list.push(d),d},process:function(){return c._promise||(c._promise=a.when.apply(a,c.list).then(c.resolve,c.reject,c.progress)),c}},b);return c},function(){var b=function(a){this.threads=[],this.threadCount=0,this.threadLimit=a.threadLimit||1,this.threadDelay=a.threadDelay||0};a.extend(b.prototype,{add:function(b,c){a.isFunction(b)&&(b.type=c||"normal","deferred"==c&&(b.deferred=a.Deferred().always(a.proxy(this.next,this))),this.threads.push(b),this.run())
},addDeferred:function(a){return this.add(a,"deferred")},next:function(){this.threadCount--,this.run()},run:function(){var a=this;setTimeout(function(){if(!(a.threads.length<1)&&a.threadCount<a.threadLimit){a.threadCount++;var b=a.threads.shift();try{b.call(b,b.deferred)}catch(c){console.error(c)}!b.deferred&&a.next()}},a.threadDelay)}}),a.Threads=function(a){return new b(a)}}(),a.callback=function(b,c){if(a.isFunction(b)){var d=a.uid("cb");return window[d]=function(){return c||delete window[d],b.apply(null,arguments)
},d}if(a.isString(b))switch(b){case"destroy":var d=c;delete window[d]}},a.fn.checkList=function(b){var c={checkbox:".checkbox",masterCheckbox:".master-checkbox",check:function(){},uncheck:function(){},change:function(){}},b=a.extend({},c,b),d=this,e=d.find(b.checkbox),f=d.find(b.masterCheckbox),g=!1,h=function(){if(!g){var a=e.filter(":checked"),c=e.not(":checked");a.length<1&&f.removeAttr("checked"),a.length==e.length&&f.prop("checked",!0),b.change.call(d,a,c)}};return e.checked(function(){b.check.apply(d),h()
},function(){b.uncheck.apply(d),h()}),f.checked(function(){g=!0,e.checked(!0),g=!1,h()},function(){g=!0,e.checked(!1),g=!1,h()}),h(),this},a.fn.switchClass=function(b,c){var c=c||"-",d=b.split(c)[0]+c,e=d.length;return this.each(function(){var c=a(this),f=a.map((c.attr("class")||"").split(" "),function(a){return a.slice(0,e)==d||""==a?null:a});f.push(b),c.attr("class",f.join(" "))})},a.fn.activateClass=function(b){return this.prevObject.removeClass(b),a(this).addClass(b)},function(){var b=function(a){var a=parseInt(a.indexOf("#")>-1?a.substring(1):a,16);
return{r:a>>16,g:(65280&a)>>8,b:255&a}},c=function(a){return d(b(a))},d=function(a){var b={h:0,s:0,b:0},c=Math.min(a.r,a.g,a.b),d=Math.max(a.r,a.g,a.b),e=d-c;return b.b=d,b.s=0!=d?255*e/d:0,0!=b.s?(b.h=a.r==d?(a.g-a.b)/e:a.g==d?2+(a.b-a.r)/e:4+(a.r-a.g)/e,b.h*=60):b.h=360,b.h<0&&(b.h+=360),b.s*=100/255,b.b*=100/255,b},e=function(a){var b={},c=a.h,d=255*a.s/100,e=255*a.b/100;if(0==d)b.r=b.g=b.b=e;else{var f=e,g=(255-d)*e/255,h=(f-g)*(c%60)/60;360==c&&(c=0),60>c?(b.r=f,b.b=g,b.g=g+h):120>c?(b.g=f,b.b=g,b.r=f-h):180>c?(b.g=f,b.r=g,b.b=g+h):240>c?(b.b=f,b.r=g,b.g=f-h):300>c?(b.b=f,b.g=g,b.r=g+h):360>c?(b.r=f,b.g=g,b.b=f-h):(b.r=0,b.g=0,b.b=0)
}return{r:Math.round(b.r),g:Math.round(b.g),b:Math.round(b.b)}},f=function(b){var c=[b.r.toString(16),b.g.toString(16),b.b.toString(16)];return a.each(c,function(a,b){1==b.length&&(c[a]="0"+b)}),c.join("")},g=function(a){return f(e(a))},h=function(a){return{h:Math.min(360,Math.max(0,a.h)),s:Math.min(100,Math.max(0,a.s)),b:Math.min(100,Math.max(0,a.b))}},i=function(a){return{r:Math.min(255,Math.max(0,a.r)),g:Math.min(255,Math.max(0,a.g)),b:Math.min(255,Math.max(0,a.b))}},j=function(a){var b=6-a.length;if(3==b)for(var d,c=a.split(""),a="";d=c.shift();)a+=d+d;
else for(;b--;)a="0"+a;return a.replace(/[^A-Fa-f0-9]/g,"0"),a};a.extend(a,{hexToRgb:b,hexToHsb:c,rgbToHsb:d,hsbToRgb:e,rgbToHex:f,hsbToHex:g,fixHsb:h,fixRgb:i,fixHex:j})}(),a.fn.htmlData=function(b,c){var e,c=void 0===c?!0:c,d=new RegExp("^data-"+(b?b+"-":"")+"(.*)","i"),f={};return a.each(this[0].attributes,function(a,b){if(b.specified&&(e=b.name.match(d))&&e[1])if(c){var a,h,g=e[1].split("-"),i=f;for(max=g.length-1,a=0;max>=a;a++)h=g[a],a==max?i[h]=b.value:(!i[h]&&(i[h]={}),i=i[h])}else f[e[1]]=b.value}),f
},a.fn.defineData=function(a,b){return void 0===this.data(a)&&this.data(a,b),this},a.deletes=function(b,c){a.each(c,function(a,c){delete b[c]})},a.fn.disabled=function(a){return void 0===a?this.is(":disabled")||this.hasClass("disabled"):this.prop("disabled",!!a).toggleClass("disabled",!!a)},a.fn.enabled=function(a){return void 0===a?!this.disabled():this.disabled(!a)},a.distinct=function(b){var c=a.unique;if(!(b.length<1)){if(b[0].nodeType)return c.apply(this,arguments);if("object"==typeof b[0]){var d=Math.random(),e=[];
return a.each(b,function(a){b[a][d]||(e.push(b[a]),b[a][d]=!0)}),a.each(e,function(a){delete e[a][d]}),e}return a.grep(b,function(c,d){return a.inArray(c,b)===d})}},a.fn.tagName=function(){return(this[0]||{}).tagName},a.create=function(b){return a(document.createElement(b))},a.fn.editable=function(b){return a.isUndefined(b)?"true"===this.prop("contenteditable"):(this.prop("contenteditable",b),b===!1&&this.removeAttr("contenteditable"),this)},a.download=function(b){return a("<iframe>").hide().appendTo("body").bind("load",function(){a(this).remove()
}).attr("src",b)},a.ns=function(a,b){return a.split(" ").join(b+" ")+b},a.getPointerPosition=function(a){return a.type.match("touch")?{x:a.originalEvent.changedTouches[0].pageX,y:a.originalEvent.changedTouches[0].pageY}:{x:a.pageX,y:a.pageY}},function(){var b="___eventable",c=["on","off","fire"],d=function(a){return a.split(".")[0]},e=function(a){this.fnList={},this.events={},this.mode=a};a.extend(e.prototype,{createEvent:function(b){return this.events[b]=a.Callbacks(this.mode)},on:function(b,c){if(!b||!a.isFunction(c))return this;
var e=this.fnList;(e[b]||(e[b]=[])).push(c);var f=d(b);return(this.events[f]||this.createEvent(f)).add(c),this},off:function(b){if(!b)return this;var c=d(b),e=this.events[c];if(!e)return this;var f=function(b){a.each(b,function(a,b){e.remove(b)})};return c!==b?a.each(this.fnList,function(a,b){a.indexOf(c)>-1&&f(b)}):f(this.fnList[b]),this},fire:function(b){var c=this.events[b];if(c)return c.fire.apply(c,a.makeArray(arguments).slice(1)),this},destroy:function(){for(name in this.events)this.events[name].disable()
}}),a.eventable=function(d,f){var g=d[b];return g&&"destroy"===f?(g.destroy(),a.deletes(d,c),delete d[b]):(g=d[b]=new e(f),d.on=a.proxy(g.on,g),d.off=a.proxy(g.off,g),d.fire=a.proxy(g.fire,g),d)}}(),a.fn.checkList=function(b){var c={checkbox:".checkbox",masterCheckbox:".master-checkbox",check:function(){},uncheck:function(){},change:function(){}},b=a.extend({},c,b),d=this,e=d.find(b.checkbox),f=d.find(b.masterCheckbox),g=!1,h=function(){if(!g){var a=e.filter(":checked"),c=e.not(":checked");a.length<1&&f.removeAttr("checked"),a.length==e.length&&f.prop("checked",!0),b.change.call(d,a,c)
}};return e.checked(function(){b.check.apply(d),h()},function(){b.uncheck.apply(d),h()}),f.checked(function(){g=!0,e.checked(!0),g=!1,h()},function(){g=!0,e.checked(!1),g=!1,h()}),h(),this},a.fn.checked=function(b,c){return arguments.length<1?this.is(":checked"):(this.each(function(){var e=a(this);return"boolean"==typeof b?(e.attr("checked",b).trigger("change"),void 0):((e.is("input[type=checkbox]")||e.is("input[type=radio]"))&&e.off("change.checked").on("change.checked",function(){try{return e.is(":checked")?b.apply(e):c.apply(e)
}catch(a){}}),void 0)}),this)},a.fn.locate=function(b){var c="data";return a.each(this[0].attributes,function(a,b){return b.specified&&"$"===b.value?(c=b.name,!1):void 0}),this.find("["+c+"-"+b.replace(/([a-z])([A-Z])/g,"$1-$2").toLowerCase()+"]")},function(){var b=["overflow","overflow-x","overflow-y"];a.fn.noscroll=function(c){return void 0===c&&(c=!0),this.each(function(){var d=a(this),e=d.data("noscroll");!e&&c&&(e={},a.each(b,function(a,b){e[b]=d.css(b)}),d.data("noscroll",e)),c?a.each(b,function(a,b){d.css(b,"hidden")
}):e&&d.css(e)})}}(),a.fn.visible=function(b){var c=a(this),d=a(window);if(!(c.length<1)){var e=d.scrollTop(),f=e+d.height(),g=c.offset().top,h=g+c.height(),i=b===!0?h:g,j=b===!0?g:h;return f>=j&&i>=e}},a.fn.where=a.fn.filterBy=function(a,b,c){var c=c||"=",d="[data-"+a.replace(/([a-z])([A-Z])/g,"$1-$2").toLowerCase()+c+b+"]";return this.filter(d)},a.fn.checked=function(b,c){return arguments.length<1?this.is(":checked"):(this.each(function(){var e=a(this);return"boolean"==typeof b?(e.attr("checked",b).trigger("change"),void 0):((e.is("input[type=checkbox]")||e.is("input[type=radio]"))&&e.off("change.checked").on("change.checked",function(){try{return e.is(":checked")?b.apply(e):c.apply(e)
}catch(a){}}),void 0)}),this)},a.fn.selectAll=function(){return this.each(function(){this.select()})},a.fn.unselect=function(){return this.each(function(){var a=this,b=a.value;a.value+=" ",a.value=b})},a.fn.toObject=a.fn.serializeObject=function(){var b={};return a.each(a(this).serializeArray(),function(c,d){b.hasOwnProperty(d.name)?(a.isArray(b[d.name])||(b[d.name]=[b[d.name]]),b[d.name].push(d.value)):b[d.name]=d.value}),b},a.fn.toJSON=a.fn.serializeJSON=function(){return JSON.stringify(a(this).serializeObject())
},a.sanitizeHTML=function(b){return a(a.parseHTML(b,document,!0)).toHTML()},a.toHTML=function(b){return a("<div>").html(b).html()},a.fn.toHTML=function(){return a.toHTML(this.clone())},a.toXHTML=function(a,b){var c=a.innerHTML?String(a.innerHTML):a,d=c.match(/(<.+[^>])/g);if(d)for(var e=0;e<d.length;e+=1){var f,g=d[e],h=/\=[a-zA-Z\.\:\[\]_\(\)\&\$\%#\@\!0-9\/]+[?\s+|?>]/g;if(d[e]=d[e].replace(/([<|<\/].+?\w+).+[^>]/,function(a){return a}),f=d[e].match(h))for(var i=0,j=f.length;j>i;){var k=/(\=)([a-zA-Z\.\:\[\]_\(\)\&\$\%#\@\!0-9\/]+)?([\s+|?>])/g,l=function(){var a=Array.prototype.slice.call(arguments);
return'="'+(b?a[2]:a[2].toLowerCase())+'"'+a[3]};d[e]=d[e].replace(f[i],f[i].replace(k,l)),i+=1}c=c.replace(g,d[e])}return c},a.fn.xhtml=function(){return a.IE?a.toXHTML(this[0]):this.html()},a.buildHTML=function(b,c){if(b instanceof a)return b;var d=document;if(window.CloudFlare){var e=a.buildHTML.iframe;if(!e||!e.contentDocument){var e=a.buildHTML.iframe=document.createElement("iframe");e.style.display="none",document.body.appendChild(e)}d=e.contentDocument}var b=a.trim(b),f=[],g=a.buildFragment([b],d,f),h=a.merge([],g.childNodes);
if(!c&&f.length>0){var i=d.createElement("script");i.text="try{"+a.callback(function(){a(f).remove()})+"();}catch(e){}";for(var k,l,j=h.length-1;(k=h[j--])&&("SCRIPT"===k.nodeName?l=h.push(i):1===k.nodeType&&(l=k.appendChild(i)),!l););l||h.push(i),f.push(i)}return a(h)},a.intersects=function(b,c){return a.isArray(c)&&(c={top:c.y,left:c.x,bottom:c.y,right:c.x}),c.left<=b.right&&b.left<=c.right&&c.top<=b.bottom&&b.top<=c.bottom},a.fn.intersectsWith=function(b,c,d,e){var f=this.offset(),g={top:f.top,left:f.left,bottom:f.top+(sourceHeight=this.height()),right:f.left+(sourceWidth=this.width()),width:sourceWidth,height:sourceHeight},h={top:b,left:c,bottom:b+(e||(e=0)),right:c+(d||(d=0)),width:d,height:e};
return a.intersects(g,h)?{reference:g,subject:h}:!1},a.isDeferred=function(b){return b&&a.isFunction(b.always)},a.isNumeric=function(a){return!isNaN(parseFloat(a))&&isFinite(a)},a.rotateNumber=function(a,b,c,d){return void 0===d&&(d=0),a+=d,b>a?a+=c+1:a>c&&(a-=c+1),a},a.regExpEscape=function(a){return a.replace(/([-()\[\]{}+?*.$\^|,:#<!\\])/g,"\\$1").replace(/\x08/g,"\\x08")},a.remap=function(b,c,d){return a.each(d,function(a,d){b[d]=c[d]}),obj},function(){var b=a.Ajax=function(c){c.autostart=!1;var d=a.ajax(c);
return b.queue.addDeferred(function(a){d.send(),setTimeout(a.resolve,b.interval)}),d};b.queue=a.Threads({threadLimit:1}),b.interval=1200;var c=a.joomla.version.split("."),d=c[0],e=c[1];d>=3&&e>=2&&(b.interval=0)}(),function(){a.fn.addTransitoryClass=function(a,b){var c=this.addClass(a);return setTimeout(function(){c.removeClass(a)},b||1),this};var b=function(a,b,c){var d=this;return setTimeout(function(){d[a+"Class"](b)},c||50),this};a.fn.addClassAfter=function(a,c){return b.call(this,"add",a,c)},a.fn.removeClassAfter=function(a,c){return b.call(this,"remove",a,c)
};var c=function(a,b,c,d){var e=a?"-in":"-out";return this.addTransitoryClass(b.replace(/ /g,e+" ")+e,c||1e3)[(a?"add":"remove")+"ClassAfter"](b),d&&setTimeout(d,c),this};a.fn.addTransitionClass=function(a,b,d){return c.call(this,!0,a,b,d)},a.fn.removeTransitionClass=function(a,b,d){return c.call(this,!1,a,b,d)}}(),a.trimSeparators=function(b,c,d){var e=c;return b=b.replace(new RegExp("^["+e+"\\s]+|["+e+",\\s]+$","g"),"").replace(new RegExp(e+"["+e+"\\s]*"+e,"g"),e).replace(new RegExp("[\\s]+"+e,"g"),e).replace(new RegExp(e+"[\\s]+","g"),e),d&&(b=a.distinct(b.split(e)).join(e)),b
},a.uid=function(a,b){return(a?a:"")+Math.random().toString().replace(".","")+(b?b:"")}}),FD50.plugin("storage",function(a){function h(){try{return e in c&&c[e]}catch(a){return!1}}function l(a){return function(){var c=Array.prototype.slice.call(arguments,0);c.unshift(g),i.appendChild(g),g.addBehavior("#default#userData"),g.load(e);var d=a.apply(b,c);return i.removeChild(g),d}}function n(a){return a.replace(/^d/,"___$&").replace(m,"___")}var g,b={},c=window,d=document,e="localStorage",f="script";if(b.disabled=!1,b.set=function(){},b.get=function(){},b.remove=function(){},b.clear=function(){},b.transact=function(a,c,d){var e=b.get(a);
null==d&&(d=c,c=null),"undefined"==typeof e&&(e=c||{}),d(e),b.set(a,e)},b.getAll=function(){},b.forEach=function(){},b.serialize=function(a){return JSON.stringify(a)},b.deserialize=function(a){if("string"!=typeof a)return void 0;try{return JSON.parse(a)}catch(b){return a||void 0}},h())g=c[e],b.set=function(a,c){return void 0===c?b.remove(a):(g.setItem(a,b.serialize(c)),c)},b.get=function(a){return b.deserialize(g.getItem(a))},b.remove=function(a){g.removeItem(a)},b.clear=function(){g.clear()},b.getAll=function(){var a={};
return b.forEach(function(b,c){a[b]=c}),a},b.forEach=function(a){for(var c=0;c<g.length;c++){var d=g.key(c);a(d,b.get(d))}};else if(d.documentElement.addBehavior){var i,j;try{j=new ActiveXObject("htmlfile"),j.open(),j.write("<"+f+">document.w=window</"+f+'><iframe src="/favicon.ico"></iframe>'),j.close(),i=j.w.frames[0].document,g=i.createElement("div")}catch(k){g=d.createElement("div"),i=d.body}var m=new RegExp("[!\"#$%&'()*+,/\\\\:;<=>?@[\\]^`{|}~]","g");b.set=l(function(a,c,d){return c=n(c),void 0===d?b.remove(c):(a.setAttribute(c,b.serialize(d)),a.save(e),d)
}),b.get=l(function(a,c){return c=n(c),b.deserialize(a.getAttribute(c))}),b.remove=l(function(a,b){b=n(b),a.removeAttribute(b),a.save(e)}),b.clear=l(function(a){var b=a.XMLDocument.documentElement.attributes;a.load(e);for(var d,c=0;d=b[c];c++)a.removeAttribute(d.name);a.save(e)}),b.getAll=function(){var c={};return b.forEach(function(a,b){c[a]=b}),c},b.forEach=l(function(a,c){for(var f,d=a.XMLDocument.documentElement.attributes,e=0;f=d[e];++e)c(f.name,b.deserialize(a.getAttribute(f.name)))})}try{var o="__storejs__";
b.set(o,o),b.get(o)!=o&&(b.disabled=!0),b.remove(o)}catch(k){b.disabled=!0}b.enabled=!b.disabled,a.Storage=b}),FD50.plugin("uri",function(a){a.isUrl=function(a){var b=/^(http|https):\/\/(\w+:{0,1}\w*@)?(\S+)(:[0-9]+)?(\/|\/([\w#!:.?+=&%@!\-\/]))?/;return b.test(a)};var b=function(a){"use strict";var b=function(a){var c,d,e,f,g,h,b=[];if("undefined"==typeof a||null===a||""===a)return b;for(0===a.indexOf("?")&&(a=a.substring(1)),d=a.toString().split(/[&;]/),c=0;c<d.length;c++)e=d[c],f=e.split("="),g=f[0],h=-1===e.indexOf("=")?null:null===f[1]?"":f[1],b.push([g,h]);
return b},c=b(a),d=function(){var b,d,a="";for(b=0;b<c.length;b++)d=c[b],a.length>0&&(a+="&"),a+=null===d[1]?d[0]:d.join("=");return a.length>0?"?"+a:a},e=function(a){return a=decodeURIComponent(a),a=a.replace("+"," ")},f=function(a){var b,d;for(d=0;d<c.length;d++)if(b=c[d],e(a)===e(b[0]))return b[1]},g=function(a){var d,f,b=[];for(d=0;d<c.length;d++)f=c[d],e(a)===e(f[0])&&b.push(f[1]);return b},h=function(a,b){var f,g,h,i,d=[];for(f=0;f<c.length;f++)g=c[f],h=e(g[0])===e(a),i=e(g[1])===e(b),(1===arguments.length&&!h||2===arguments.length&&!h&&!i)&&d.push(g);
return c=d,this},i=function(a,b,d){return 3===arguments.length&&-1!==d?(d=Math.min(d,c.length),c.splice(d,0,[a,b])):arguments.length>0&&c.push([a,b]),this},j=function(a,b,d){var g,j,f=-1;if(3===arguments.length){for(g=0;g<c.length;g++)if(j=c[g],e(j[0])===e(a)&&decodeURIComponent(j[1])===e(d)){f=g;break}h(a,d).addParam(a,b,f)}else{for(g=0;g<c.length;g++)if(j=c[g],e(j[0])===e(a)){f=g;break}h(a),i(a,b,f)}return this};return{getParamValue:f,getParamValues:g,deleteParam:h,addParam:i,replaceParam:j,toString:d}},c=function(a){"use strict";
var d=!1,e=/[-a-zA-Z0-9@:%_\+.~#?&//=]{2,256}\.[a-z]{2,4}\b(\/[-a-zA-Z0-9@:%_\+.~#?&//=]*)?/gi,f=function(a){for(var b={strict:/^(?:([^:\/?#]+):)?(?:\/\/((?:(([^:@]*)(?::([^:@]*))?)?@)?([^:\/?#]*)(?::(\d*))?))?((((?:[^?#\/]*\/)*)([^?#]*))(?:\?([^#]*))?(?:#(.*))?)/,loose:/^(?:(?![^:@]+:[^:@\/]*@)([^:\/?#.]+):)?(?:\/\/)?((?:(([^:@]*)(?::([^:@]*))?)?@)?([^:\/?#]*)(?::(\d*))?)(((\/(?:[^?#](?![^?#\/]*\.[^?#\/.]+(?:[?#]|$)))*\/?)?([^?#\/]*))(?:\?([^#]*))?(?:#(.*))?)/},c=["source","protocol","authority","userInfo","user","password","host","port","relative","path","directory","file","query","anchor"],e={name:"queryKey",parser:/(?:^|&)([^&=]*)=?([^&]*)/g},f=b[d?"strict":"loose"].exec(a),g={},h=14;h--;)g[c[h]]=f[h]||"";
return g[e.name]={},g[c[12]].replace(e.parser,function(a,b,c){b&&(g[e.name][b]=c)}),g},g=f(a||""),h=new b(g.query),i=function(a){return"undefined"!=typeof a&&(g.protocol=a),g.protocol},j=null,k=function(a){return"undefined"!=typeof a&&(j=a),null===j?-1!==g.source.indexOf("//"):j},l=function(a){return"undefined"!=typeof a&&(g.userInfo=a),g.userInfo},m=function(a){return"undefined"!=typeof a&&(g.host=a),g.host},n=function(a){return"undefined"!=typeof a&&(g.port=a),g.port},o=function(a){return"undefined"!=typeof a&&(g.path=a),g.path
},p=function(a){return"undefined"!=typeof a&&(h=new b(a)),h},q=function(a){return"undefined"!=typeof a&&(g.anchor=a),g.anchor},r=function(a){return i(a),this},s=function(a){return k(a),this},t=function(a){return l(a),this},u=function(a){return m(a),this},v=function(a){return n(a),this},w=function(a){return o(a),this},x=function(a){return p(a),this},y=function(a){return q(a),this},z=function(a){return p().getParamValue(a)},A=function(a){return p().getParamValues(a)},B=function(a,b){return 2===arguments.length?p().deleteParam(a,b):p().deleteParam(a),this
},C=function(a,b,c){return 3===arguments.length?p().addParam(a,b,c):p().addParam(a,b),this},D=function(a,b,c){return 3===arguments.length?p().replaceParam(a,b,c):p().replaceParam(a,b),this},E=function(a){if(void 0===a)return g.path;if("/"==a.substring(0,1))return g.path=a;var b=g.path.split("/"),c=a.split("/");""===b.slice(-1)[0]&&b.pop();for(var d;d=c.shift();)switch(d){case"..":b.length>1&&b.pop();break;case".":break;default:b.push(d)}return g.path=b.join("/"),this},F=function(){var a="",b=function(a){return null!==a&&""!==a
};return b(i())?(a+=i(),i().indexOf(":")!==i().length-1&&(a+=":"),a+="//"):k()&&b(m())&&(a+="//"),b(l())&&b(m())&&(a+=l(),l().indexOf("@")!==l().length-1&&(a+="@")),b(m())&&(a+=m(),b(n())&&(a+=":"+n())),b(o())?a+=o():b(m())&&(b(p().toString())||b(q()))&&(a+="/"),b(p().toString())&&(0!==p().toString().indexOf("?")&&(a+="?"),a+=p().toString()),b(q())&&(0!==q().indexOf("#")&&(a+="#"),a+=q()),a},G=function(b){var c=a.match(e)||[];return void 0===b?c:c[b]||""},H=function(){return new c(F())};return{protocol:i,hasAuthorityPrefix:k,userInfo:l,host:m,port:n,path:o,query:p,anchor:q,setProtocol:r,setHasAuthorityPrefix:s,setUserInfo:t,setHost:u,setPort:v,setPath:w,setQuery:x,setAnchor:y,getQueryParamValue:z,getQueryParamValues:A,deleteQueryParam:B,addQueryParam:C,replaceQueryParam:D,extract:G,toPath:E,toString:F,clone:H}
};a.uri=function(a){return new c(a)}}),FD50.plugin("mvc",function($){!function(){var d,a={undHash:/_|-/,colons:/::/,words:/([A-Z]+)([A-Z][a-z])/g,lowUp:/([a-z\d])([A-Z])/g,dash:/([a-z\d])([A-Z])/g,replacer:/\{([^\}]+)\}/g,dot:/\./},b=function(a,b,c){return void 0!==a[b]?a[b]:c&&(a[b]={})},c=function(a){var b=typeof a;return a&&("function"==b||"object"==b)},e=$.String=$.extend($.String||{},{getObject:d=function(d,e,f){var i,j,k,g=d?d.split(a.dot):[],h=g.length,l=0;if(e=$.isArray(e)?e:[e||window],0==h)return e[0];
for(;i=e[l++];){for(k=0;h-1>k&&c(i);k++)i=b(i,g[k],f);if(c(i)&&(j=b(i,g[k],f),void 0!==j))return f===!1&&delete i[g[k]],j}},capitalize:function(a){return a.charAt(0).toUpperCase()+a.substr(1)},camelize:function(a){return a=e.classize(a),a.charAt(0).toLowerCase()+a.substr(1)},classize:function(b,c){for(var d=b.split(a.undHash),f=0;f<d.length;f++)d[f]=e.capitalize(d[f]);return d.join(c||"")},niceName:function(a){return e.classize(a," ")},underscore:function(b){return b.replace(a.colons,"/").replace(a.words,"$1_$2").replace(a.lowUp,"$1_$2").replace(a.dash,"_").toLowerCase()
},sub:function(b,c,e){var f=[];return f.push(b.replace(a.replacer,function(a,b){var g=d(a,c,"boolean"==typeof e?!e:e)||d(b,c,"boolean"==typeof e?!e:e),h=typeof g;return"object"!==h&&"function"!==h||null===h?""+g:(f.push(g),"")})),f.length<=1?f[0]:f},_regs:a});$.extend($,e)}(),function(){$.String.rsplit=function(a,b){for(var e,f,c=b.exec(a),d=[];null!==c;)e=c.index,f=b.lastIndex,0!==e&&(d.push(a.substring(0,e)),a=a.slice(e)),d.push(c[0]),a=a.slice(c[0].length),c=b.exec(a);return""!==a&&d.push(a),d}}(),function(){var a=/^\d+$/,b=/([^\[\]]+)|(\[\])/g,c=/\+/g,d=/([^?#]*)(#.*)?$/;
$.String=$.extend($.String||{},{deparam:function(e){if(!e||!d.test(e))return{};for(var h,f={},g=e.split("&"),i=0;i<g.length;i++){h=f;var j=g[i].split("=");2!=j.length&&(j=[j[0],j.slice(1).join("=")]);for(var k=decodeURIComponent(j[0].replace(c," ")),l=decodeURIComponent(j[1].replace(c," ")),m=k.match(b),n=0;n<m.length-1;n++){var o=m[n];h[o]||(h[o]=a.test(m[n+1])||"[]"==m[n+1]?[]:{}),h=h[o]}lastPart=m[m.length-1],"[]"==lastPart?h.push(l):h[lastPart]=l}return f}})}(),function(){var a=$.cleanData;$.cleanData=function(b){for(var d,c=0;void 0!==(d=b[c]);c++)$(d).triggerHandler("destroyed");
a(b)}}(),function(){$.cookie=function(a,b,c){if("undefined"==typeof b){var i=null;if(document.cookie&&""!=document.cookie)for(var j=document.cookie.split(";"),k=0;k<j.length;k++){var l=jQuery.trim(j[k]);if(l.substring(0,a.length+1)==a+"="){i=decodeURIComponent(l.substring(a.length+1));break}}if(jQuery.evalJSON&&i&&i.match(/^\s*\{/))try{i=jQuery.evalJSON(i)}catch(m){}return i}c=c||{},null===b&&(b="",c.expires=-1),"object"==typeof b&&jQuery.toJSON&&(b=jQuery.toJSON(b));var d="";if(c.expires&&("number"==typeof c.expires||c.expires.toUTCString)){var e;
"number"==typeof c.expires?(e=new Date,e.setTime(e.getTime()+24*c.expires*60*60*1e3)):e=c.expires,d="; expires="+e.toUTCString()}var f=c.path?"; path="+c.path:"",g=c.domain?"; domain="+c.domain:"",h=c.secure?"; secure":"";document.cookie=[a,"=",encodeURIComponent(b),d,f,g,h].join("")}}(),function(){var a=!1,b=$.makeArray,c=$.isFunction,d=$.isArray,e=$.extend,f=$.String.getObject,g=function(a,c){return a.concat(b(c))},h=/xyz/.test(function(){})?/\b_super\b/:/.*/,i=function(a,b,d){d=d||a;for(var e in a)d[e]=c(a[e])&&c(b[e])&&h.test(a[e])?function(a,c){return function(){var e,d=this._super;
return this._super=b[a],e=c.apply(this,arguments),this._super=d,e}}(e,a[e]):a[e]},j="prototype";clss=$.Class=function(){arguments.length&&clss.extend.apply(clss,arguments)},e(clss,{proxy:function(a){var e,c=b(arguments);return a=c.shift(),d(a)||(a=[a]),e=this,function(){for(var f,j,b=g(c,arguments),h=a.length,i=0;h>i;i++)j=a[i],j&&(f="string"==typeof j,f&&e._set_called&&(e.called=j),b=(f?e[j]:j).apply(e,b||[]),h-1>i&&(b=!d(b)||b._use_call?[b]:b));return b}},newInstance:function(){var b,a=this.rawInstance();return a.setup&&(b=a.setup.apply(a,arguments)),a.init&&a.init.apply(a,d(b)?b:arguments),a
},setup:function(a){return this.defaults=e(!0,{},a.defaults,this.defaults),arguments},rawInstance:function(){a=!0;var b=new this;return a=!1,b},extend:function(b,c,d){function p(){return a?void 0:this.constructor!==p&&arguments.length?arguments.callee.extend.apply(arguments.callee,arguments):this.Class.newInstance.apply(this.Class,arguments)}"string"!=typeof b&&(d=c,c=b,b=null),d||(d=c,c=null),d=d||{};var l,m,n,o,h=this,k=this[j];a=!0,o=new this,a=!1,i(d,k,o);for(l in this)this.hasOwnProperty(l)&&(p[l]=this[l]);
if(i(c,this,p),b){var q;c&&c.root&&(q=c.root,$.isString(q)&&(q=f(q,window,!0)));var r=b.split(/\./),m=r.pop(),s=f(r.join("."),q||window,!0),n=s;e(!0,p,s[m]),s[m]=p}e(p,{prototype:o,namespace:n,shortName:m,constructor:p,fullName:b}),p[j].Class=p[j].constructor=p;var t=p.setup.apply(p,g([h],arguments));return p.init&&p.init.apply(p,t||g([h],arguments)),p}}),clss.callback=clss[j].callback=clss[j].proxy=clss.proxy}(),function(){var w,a=function(a,b,c,e){var f,g=a.bind&&a.unbind?a:$(d(a)?[a]:a);return 0===b.indexOf(">")&&(b=b.substr(1),f=function(b){b.target===a&&c.apply(this,arguments)
}),e?g.bind(b,e,f||c):g.bind(b,f||c),function(){g.unbind(b,f||c),a=b=c=f=null}},b=$.makeArray,c=$.isArray,d=$.isFunction,e=$.isString,f=$.extend,g=$.String,h=$.each,i=g.getObject,j="prototype",k="constructor",l=Array[j].slice,m=function(a,b,c,e,f){0===b.indexOf(">")&&(b=(a.data("directSelector")+" "||"")+b);var g=a.delegate&&a.undelegate?a:$(d(a)?[a]:a);return f?g.delegate(b,c,f,e):g.delegate(b,c,e),function(){g.undelegate(b,c,e),g=a=c=e=b=null}},n=function(b,c,d,e,f){return e?m(b,e,c,d,f):a(b,c,d,f)},o=function(a,b){var e="string"==typeof b?a[b]:b;
return c(e)&&d(e[1])&&(e=e[1]),function(){return a.called=b,e.apply(a,[this.nodeName?$(this):this].concat(l.call(arguments,0)))}},p=/\./g,q=/_?controllers?/gi,r=function(a){return g.underscore(a.replace($.globalNamespace+".","").replace(p,"_").replace(q,""))},s=/^\S(.*)\s(.*)/,t=/\{([^\}]+)\}/g,u=/\{([^\.]+[\.][^\.]+)\}/g,v=/^(?:(.*?)\s)?([\w\.\:>]+)$/,x=function(a,b){return $.data(a,"controllers",b)},y=$.globalNamespace+".Controller";$.Controller=function(a){var e,c=b(arguments),d={root:y};return c.length>2?(d=$.extend(d,c[1]),e=c[2]):e=c[1],d.namespace&&(a=d.namespace+"."+a),$.Controller.Class(a,d,e)
};var z=y+".Class";$.Class(z,{setup:function(a,f){if(this._super.apply(this,arguments),this.shortName&&this.fullName!=z){for(var g=this.elements||[],h=0,i=this.defaults;element=g[h++];){var k=element.indexOf("{"),l=element.indexOf("}"),n=(element.length,element.slice(0,k)),o=element.slice(l+1),p=element.slice(k+1,l).split("|"),q=0,s=n.match(/^\^(\S*)\s(.*)/),t="";for(s&&(t=s[1]+"-",n=s[2]);f=p[q++];){var u="{"+$.camelize(t+f)+"}";!$.has(i,u)&&(i[u]=n+f+o)}}this._fullName=r(this.fullName),this._shortName=r(this.shortName);
var w,v=this;if(e(this.pluginName)){var A=this._fullName,B=this.pluginName;$.fn[B]||($.fn[B]=function(a){var c=b(arguments);if($.isString(a)&&"controller"===a){var d=x(this[0]),e=d&&d[A];return e}return this.each(function(){var b=x(this),d=b&&b[A];if(d){if($.isString(a)){var e=d[a];return $.isFunction(e)&&e.apply(d,c.slice(1)),void 0}d.update.apply(d,c)}else v.newInstance.apply(v,[this].concat(c))})})}var C=b(arguments),D=this[j],E=C[C.length>3?3:2];d(E)&&(this.protoFactory=E,D=this.protoFactory.call(this,null)),this.actions={};
for(w in D)if("constructor"!=w&&this._isAction(w)){var F=D[w],G=d(F)||c(F)&&d(F[1]);if(!G)continue;this.actions[w]=this._action(w)}$.module("$:/Controllers/"+this.fullName).resolve(this)}},hookup:function(a){return new this(a)},_isAction:function(a){return s.test(a)?!0:$.inArray(a,this.listensTo)>-1||$.event.special[a]||A[a]},_action:function(a,b){if(t.lastIndex=0,!b&&t.test(a))return null;a=a.replace("{self} ","");var d=a;if(b){var e=!1;if(u.test(a)){var f,h="";d=a.replace(u,function(a,c){var d=c.split(".");
return f=b["{"+d[0]+"}"]||{},$.isControllerInstance(f)&&(h=(f[d[1]]||{}).selector),h}).match(v),e=!!h,d=[f.element].concat(d||[])}e||(d=g.sub(a,[b,window]))}var i=c(d),j=(i?d[1]:d).match(v),k=j[2],l=A[k]||w;return{processor:l,parts:j,delegate:i?d[0]:void 0}},processors:{},listensTo:[],defaults:{},hostname:"parent"},{setup:function(a,c){var d=this,g=d[k],i=d[j],l=g._fullName;d.instanceId=$.uid(l+"_");var m=d.options=f(!0,{},g.defaults,g.defaultOptions,c),n=d.element=$(a);if(g.protoFactory&&(i=g.protoFactory.apply(g,[d,m,n]),f(!0,d,i)),(x(a)||x(a,{}))[l]=d,!n.data("directSelector")){var o=$.uid("DS");
n.addClass(o).data("directSelector","."+o)}d.selectors={};for(var p in m)if(p.match(/^\{.+\}$/)){var q=p.replace(/^\{|\}$/g,""),r=m[p];if(e(r)){var s=d[q];d[q]=d.selectors[q]=function(a,b,c){b=/^(\.|\#)$/.test(b)?b+c:b;var d=function(c){var e=(d.baseElement||a.element).find(b);return $.isString(c)&&(e=e.filter(c)),$.isPlainObject(c)&&$.each(c,function(a,b){e=e.filterBy(a,b)}),e};return d.selector=b,d.css=function(){var a=d.cssRule;if(!a){var c=n.data("directSelector"),e=$.map(b.split(","),function(a){return c+" "+a
});a=d.cssRule=$.cssRule(e),a.important=!0}return arguments.length?a.css.apply(a,arguments):a},d.inside=function(a){return $(a).find(b)},d.of=function(a){return $(a).parents(b).eq(0)},d.under=function(a){var b=[];return d().each(function(){$(this).parents().filter(a).length&&b.push(this)}),$(b)},$.isPlainObject(s)&&$.extend(d,s),d}(d,r,q)}else d[q]=r}var t=m.view,u=d.view;d.view=function(){return u.apply(this,arguments)},h(t||{},function(a){d.view[a]=function(c){var e=b(arguments);return $.isBoolean(c)?e=e.slice(1):c=!1,d.view.apply(d,[c,a].concat(e))
}}),$.extend(d,m.controller),d.pluginInstances={},d.called="init",d._bind();var v=d.init||$.noop;return d.init=function(){return d.init=v,result=v.apply(d,arguments),d.trigger("init."+g.fullName.toLowerCase(),[d]),result},[n,m].concat(b(arguments).slice(2))},on:function(a){var c=b(arguments),d=this.element,f=c.length;return 2==f?this._binder(d,a,c[1]):3==f&&e(c[1])?this._binder(d,a,c[2],c[1]):this._binder(c[1],a,c[2])},_bind:function(){var a=this,b=a[k],c=b.actions,d=a._bindings=[],e=a.element;h(c||{},function(f){if(c.hasOwnProperty(f)){var h=b.actions[f]||b._action(f,a.options);
$.isControllerInstance(h.delegate)&&(h.delegate=h.delegate.element),d.push(h.processor(h.delegate||e,h.parts[2],h.parts[1],f,a))}});var f=o(this,"destroy");return e.bind("destroyed",f),d.push(function(a){$(a).unbind("destroyed",f)}),d.length},_binder:function(a,b,c,d){return"string"==typeof c&&(c=o(this,c)),this._bindings.push(n(a,b,c,d)),this._bindings.length},_unbind:function(){var a=this.element[0];h(this._bindings,function(b,c){c(a)}),this._bindings=[]},trigger:function(a){var b=this.element;if(b){var c=$.Event(a);
return b.trigger.apply(b,[c].concat($.makeArray(arguments).slice(1))),c}},delegate:function(a,b,c,d){return"string"==typeof a&&(d=c,c=b,b=a,a=this.element),this._binder(a,c,d,b)},update:function(a){f(this.options,a),this._unbind(),this._bind()},destroy:function(){if(!this._destroyed){var a=this[k]._fullName;for(pname in this.pluginInstances)this.removePlugin(pname);this._destroyed=!0,this.element.removeClass(a),this._unbind(),delete this._actions,delete this.element.data("controllers")[a],$(this).triggerHandler("destroyed"),this.element=$()
}},find:function(a){return this.element.find(a)},view:function(){var c,a=b(arguments),d=a,e=!1,f=this[k].component||$,g="",h=this.options.view||{};return"boolean"==typeof a[0]&&(e=a[0],d=a.slice(1)),c=d[0]=h[d[0]],void 0==c?e?"":$(""):(g=f.View.apply(f,d),e?g:$($.parseHTML($.trim(g))))},getPlugin:function(a){return this.pluginInstances[a]},addSubscriber:function(a){var b=$.isArray(a)?a:[a||{}],c=this,d=this.Class.hostname,e={};return e["{"+d+"}"]=c,$.map(b,function(a){return $.isControllerInstance(a)?a.options[d]===this?a:(a[d]=c,a.update(e)):!1
}),b},addPlugin:function(a,b,c){if(a){(!b&&!c||$.isPlainObject(b))&&(c=b,b=[this.Class.root,this.Class.fullName,$.String.capitalize(a)].join(".")),$.isString(b)&&(b=$.getController(b));var e=$.isControllerInstance(b);if(d(b)||e){var f=this.Class.pluginExtendsInstance?this.options[a]:(this.options.plugin||{})[a];c=$.extend(!0,{element:this.element},c,f);var g=e?"instance":$.isController(b)?"controller":"function";this.trigger("addPlugin",[a,b,c,g]);var h=this.Class.hostname;c["{"+h+"}"]=this;var i;switch(g){case"instance":i=b,b.update(c),b[h]=this;
break;case"controller":i=c.element.addController(b,c);break;case"function":i=b(this,c)}if(i){if(this.pluginInstances[a]=i,this.Class.pluginExtendsInstance&&(this[a]=i),"function"!==g){var j={};j["{"+a+"}"]=i,this.update(j)}return this.trigger("registerPlugin",[a,i,c,g]),i}}}},removePlugin:function(a){var b=this.getPlugin(a);if(b)return this.trigger("removePlugin",[a,b]),delete this.pluginInstances[a],$.isFunction(b.destroy)?b.destroy():null},invokePlugin:function(a,b,c){var d=this.getPlugin(a);if(d&&$.isFunction(d[b]))return this.trigger("invokePlugin",[a,d,c]),d[b].apply(this,c)
},getMessageGroup:function(){var a=$.isFunction(this.messageGroup)?this.messageGroup():this.element.find("[data-message-group]");return a.length<1&&(a=$("<div data-message-group></div>").prependTo(this.element)),a},setMessage:function(a,b){var c={type:"warning",message:"",parent:this.getMessageGroup(),element:$('<div class="alert fade in"><button type="button" class="close" data-bs-dismiss="alert">\xd7</button></div>')},d={},e=$.isDeferred(a);d=$.isPlainObject(a)&&!e?a:{message:a,type:b||"warning"};var f=$.extend({},c,d),g=f.element;
if($.isDeferred(a)){var h=arguments.callee,i=this;a.done(function(a,b){f.message=a,f.type=b||"warning",h.call(i,f),g.show()})}else g.addClass("alert-"+f.type).append(f.message),$("html").has(g).length<1&&g.appendTo(f.parent);return g},clearMessage:function(){this.getMessageGroup().empty()},_set_called:!0});var A=$.Controller.Class.processors,w=function(a,b,e,f,g){var i,h=g[f];return c(h)&&d(h[1])&&(i=h[0]),n(a,b,o(g,f),e,i)};h("change click contextmenu dblclick keydown keyup keypress mousedown mousemove mouseout mouseover mouseup reset resize scroll select submit focusin focusout mouseenter mouseleave".split(" "),function(a,b){A[b]=w
});var B=function(a){return a.replace("$.Controller",y)},C=function(a){return e(a)&&(a=B(a),a=i(a)||i(y+"."+a)),D(a)?a:void 0},D=function(a){return d(a)&&a.hasOwnProperty("_fullName")},E=function(a){return $.map(a,function(a){return c(a)?E(a):C(a)})};$.getController=C,$.isController=function(a){return!!C(a)},$.isControllerInstance=function(a){return a&&a[k]&&D(a[k])},$.isControllerOf=function(a,b){if(!b)return!1;c(b)||(b=[b]);for(var d=0;d<b.length;d++){var e=C(b[d]);if(a instanceof e)return!0}return!1},$.fn.extend({controllers:function(){var a=E(b(arguments)),c=[];
return this.each(function(){var b=$.data(this,"controllers");h(b||{},function(d,e){b.hasOwnProperty(d)&&(!a.length||$.isControllerOf(e,a))&&c.push(e)})}),c},controller:function(a,b){return void 0===b?this.controllers(a)[0]:(this.addController.apply(this,arguments),this)},hasController:function(a){var b=(C(a)||{})._fullName||(e(a)?r(B(a)):"");return b?($(this).data("controllers")||{}).hasOwnProperty(b):!1},addController:function(a,b,c){var e=C(a);if(e){var f=[];return this.each(function(){if(1===this.nodeType&&"SCRIPT"!=this.nodeName){var g=$(this).controller(a);
if(g)return f.push(g),void 0;var h=new e(this,b);d(c)&&c.apply(h,[$(this),h]),f.push(h)}}),f.length>1?f:f[0]}},removeController:function(a){return this.each(function(){for(var b=$(this).controllers(a);b.length;)b.shift().destroy()}),this},addControllerWhenAvailable:function(a){var b=this,c=arguments,d=$.Deferred();return $.isController(a)&&(a=a.fullName),e(a)?($.module("$:/Controllers/"+a).pipe(function(){var a=b.addController.apply(b,c);d.resolveWith(a,[b,a])},d.reject,d.fail),d):d.reject()},implement:function(){return this.addController.apply(this,arguments),this
}}),function(){for(var c,a=["is","find"],b={};c=a.shift();)b[c]=$.fn[c],$.fn[c]=function(a){return function(c){return b[a].apply(this,(c||{}).hasOwnProperty("of")?[c.selector]:arguments)}}(c)}()}(),function(){var a=function(a){return a.replace(/^\/\//,"").replace(/[\/\.]/g,"_")},b=$.makeArray,c=1,d=$.View=function(a,c,d,e){"function"==typeof d&&(e=d,d=void 0);var j=h(c);if(j.length){var k=$.Deferred();return j.push(f(a,!0)),$.when.apply($,j).then(function(a){var j,f=b(arguments),h=f.pop()[0];if(g(c))c=i(a);else for(var l in c)g(c[l])&&(c[l]=i(f.shift()));
j=h(c,d),k.resolve(j),e&&e(j)}),k.promise()}var l,m="function"==typeof e,k=f(a,m);return m?(l=k,k.done(function(a){e(a(c,d))})):k.done(function(a){l=a(c,d)}),l},e=function(a,b){if(!a.match(/[^\s]/))throw"$.View ERROR: There is no template or an empty template at "+b},f=function(a,b){return $.ajax({url:a,dataType:"view",async:b})},g=function(a){return a&&$.isFunction(a.always)},h=function(a){var b=[];if(g(a))return[a];for(var c in a)g(a[c])&&b.push(a[c]);return b},i=function(a){return $.isArray(a)&&3===a.length&&"success"===a[1]?a[0]:a
};$.ajaxTransport("view",function(b,c){var h,i,j,k,f=c.url,g=f.match(/\.[\w\d]+$/),l=function(a){var b=h.renderer(j,a);return d.cache&&(d.cached[j]=b),{view:b}};if((i=document.getElementById(f))&&(g="."+i.type.match(/\/(x\-)?(.+)/)[2]),g||(g=d.ext,f+=d.ext),j=a(f),f.match(/^\/\//)){var m=f.substr(2);f="undefined"==typeof steal?f="/"+m:steal.root.mapJoin(m)+""}h=d.types[g];var n=$.template()[c.url];return{send:function(a,b){return n?(h=d.types["."+n.type],b(200,"success",l(n.content))):d.cached[j]?b(200,"success",{view:d.cached[j]}):(i?b(200,"success",l(i.innerHTML)):k=$.ajax({async:c.async,url:f,dataType:"text",error:function(){e("",f),b(404)
},success:function(a){e(a,f),b(200,"success",l(a))}}),void 0)},abort:function(){k&&k.abort()}}}),$.extend(d,{hookups:{},hookup:function(a){var b=++c;return d.hookups[b]=a,b},cached:{},cache:!0,register:function(b){this.types["."+b.suffix]=b,window.steal&&steal.type(b.suffix+" view js",function(b,c){var f=d.types["."+b.type],g=a(b.rootSrc+"");b.text=f.script(g,b.text),c()})},types:{},ext:".ejs",registerScript:function(a,b,c){return"$.View.preload('"+b+"',"+d.types["."+a].script(b,c)+");"},preload:function(a,b){d.cached[a]=function(a,c){return b.call(a,a,c)
}}}),window.steal&&steal.type("view js",function(b,c){var f=d.types["."+b.type],g=a(b.rootSrc+"");b.text="steal('"+(f.plugin||"jquery/view/"+b.type)+"').then(function($){$.View.preload('"+g+"',"+b.text+");\n})",c()});var j,k,l,m,n,o,p,r={val:!0,text:!0};j=function(a){var c=$.fn[a];$.fn[a]=function(){var f,h,j,e=b(arguments),i=this;if(g(e[0]))return e[0].done(function(a){k.call(i,[a],c)}),this;if(l(e)){if(f=o(e))return h=e[f],e[f]=function(a){k.call(i,[a],c),h.call(i,a)},d.apply(d,e),this;if(j=d.apply(d,e),g(j))return j.done(function(a){k.call(i,[a],c)
}),this;e=[j]}return r[a]?c.apply(this,e):k.call(this,e,c)}},k=function(a,b){var c,f;for(var g in d.hookups)break;return g&&a[0]&&m(a[0])&&(f=d.hookups,d.hookups={},a[0]=$(a[0])),c=b.apply(this,a),f&&p(a[0],f),c},l=function(a){var b=typeof a[1];return"string"==typeof a[0]&&("object"==b||"function"==b)&&!n(a[1])},n=function(a){return a.nodeType||a.jquery},m=function(a){return n(a)?!0:"string"==typeof a?(a=$.trim(a),"<"===a.substr(0,1)&&">"===a.substr(a.length-1,1)&&a.length>=3):!1},o=function(a){return"function"==typeof a[3]?3:"function"==typeof a[2]&&2
},p=function(a,b){var c,e,g,h,f=0;for(a=a.filter(function(){return 3!=this.nodeType}),c=a.add("[data-view-id]",a),e=c.length;e>f;f++)c[f].getAttribute&&(g=c[f].getAttribute("data-view-id"))&&(h=b[g])&&(h(c[f],g),delete b[g],c[f].removeAttribute("data-view-id"));$.extend(d.hookups,b)},$.fn.hookup=function(){var a=d.hookups;return d.hookups={},p(this,a),this},$.each(["prepend","append","after","before","text","html","replaceWith","val"],function(a,b){j(b)})}(),function(){var myEval=function(script){eval(script)
},rSplit=$.String.rsplit,extend=$.extend,isArray=$.isArray,returnReg=/\r\n/g,retReg=/\r/g,newReg=/\n/g,nReg=/\n/,slashReg=/\\/g,quoteReg=/"/g,singleQuoteReg=/'/g,tabReg=/\t/g,leftBracket=/\{/g,rightBracket=/\}/g,quickFunc=/\s*\(([\$\w]+)\)\s*->([^\n]*)/,clean=function(a){return a.replace(slashReg,"\\\\").replace(newReg,"\\n").replace(quoteReg,'\\"').replace(tabReg,"\\t")},escapeHTML=function(a){return a.replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(quoteReg,"&#34;").replace(singleQuoteReg,"&#39;")
},$View=$.View,bracketNum=function(a){var b=a.match(leftBracket),c=a.match(rightBracket);return(b?b.length:0)-(c?c.length:0)},EJS=function(a){if(this.constructor!=EJS){var b=new EJS(a);return function(a,c){return b.render(a,c)}}return"function"==typeof a?(this.template={fn:a},void 0):(extend(this,EJS.options,a),this.template=compile(this.text,this.type,this.name),void 0)};$&&($.EJS=EJS),EJS.prototype.render=function(a,b){a=a||{},this._extra_helpers=b;var c=new EJS.Helpers(a,b||{});return this.template.fn.call(a,a,c)
},extend(EJS,{text:function(a){if("string"==typeof a)return a;if(null===a||void 0===a)return"";var b=a.hookup&&function(b,c){a.hookup.call(a,b,c)}||"function"==typeof a&&a||isArray(a)&&function(b,c){for(var d=0;d<a.length;d++)a[d].hookup?a[d].hookup(b,c):a[d](b,c)};return b?"data-view-id='"+$View.hookup(b)+"'":a.toString?a.toString():""},clean:function(a){return"string"==typeof a?escapeHTML(a):"number"==typeof a?a:EJS.text(a)},options:{type:"[",ext:".ejs"}});var scan=function(a,b,c){for(var d=rSplit(b,nReg),e=0;e<d.length;e++)scanline(a,d[e],c)
},scanline=function(a,b,c){a.lines++;for(var e,d=rSplit(b,a.splitter),f=0;f<d.length;f++)e=d[f],null!==e&&c(e,a)},makeScanner=function(a,b){var c={};return extend(c,{left:a+"%",right:"%"+b,dLeft:a+"%%",dRight:"%%"+b,eeLeft:a+"%==",eLeft:a+"%=",cmnt:a+"%#",cleanLeft:a+"%~",scan:scan,lines:0}),c.splitter=new RegExp("("+[c.dLeft,c.dRight,c.eeLeft,c.eLeft,c.cmnt,c.left,c.right+"\n",c.right,"\n"].join(")|(").replace(/\[/g,"\\[").replace(/\]/g,"\\]")+")"),c},compile=function(a,b){a=a.replace(returnReg,"\n").replace(retReg,"\n"),b=b||"[";
var d="___v1ew.push(",e=d,f="var ___v1ew = [];",g="return ___v1ew.join('')",h=new EJS.Buffer([f],[]),i="",j=function(a){h.push(d,'"',clean(a),'");')},k=null,l=function(){i=""},m="));",n=[];scan(makeScanner(b,"["===b?"]":">"),a||"",function(a,b){var c;if(null===k)switch(a){case"\n":i+="\n",j(i),h.cr(),l();break;case b.left:case b.eLeft:case b.eeLeft:case b.cmnt:k=a,i.length>0&&j(i),l();break;case b.dLeft:i+=b.left;break;default:i+=a}else switch(a){case b.right:switch(k){case b.left:c=bracketNum(i);var d=n.length&&-1==c?n.pop():";";
d===m&&h.push(g),h.push(i,d),1===c&&n.push(";");break;case b.eLeft:if(c=bracketNum(i),c&&n.push(m),quickFunc.test(i)){var o=i.match(quickFunc);i="function(__){var "+o[1]+"=$(__);"+o[2]+"}"}h.push(e,$.globalNamespace+".EJS.clean(",i,c?f:m);break;case b.eeLeft:c=bracketNum(i),c&&n.push(m),h.push(e,$.globalNamespace+".EJS.text(",i,c?f:m)}k=null,l();break;case b.dRight:i+=b.right;break;default:i+=a}}),i.length>0&&h.push(d,'"',clean(i)+'");');var o=h.close(),p={out:"try { with(_VIEW) { with (_CONTEXT) {"+o+" "+g+"}}}catch(e){e.lineNumber=null;throw e;}"};
return myEval.call(p,"this.fn = (function(_CONTEXT,_VIEW){ var $ = "+$.globalNamespace+";"+p.out+"});"),p};EJS.Buffer=function(a,b){this.line=[],this.script=[],this.post=b,this.push.apply(this,a)},EJS.Buffer.prototype={push:function(){this.line.push.apply(this.line,arguments)},cr:function(){this.script.push(this.line.join(""),"\n"),this.line=[]},close:function(){return this.line.length>0&&(this.script.push(this.line.join("")),this.line=[]),this.post.length&&this.push.apply(this,this.post),this.script.push(";"),this.script.join("")
}},EJS.Helpers=function(a,b){this._data=a,this._extras=b,extend(this,b)},EJS.Helpers.prototype={plugin:function(){var b=$.makeArray(arguments),c=b.shift();return function(a){var d=$(a);d[c].apply(d,b)}},view:function(a,b,c){return c=c||this._extras,b=b||this._data,$View(a,b,c)}},$View.register({suffix:"ejs",script:function(a,b){return $.globalNamespace+".EJS(function(_CONTEXT,_VIEW) { "+new EJS({text:b,name:a}).template.out+" })"},renderer:function(a,b){return EJS({text:b,name:a})}})}(),function(){var a=$.isArray,b=function(a){return"object"==typeof a&&null!==a&&a
},c=$.makeArray,d=$.each,e=function(b,c,d){return b instanceof $.Observe?f([b],d._namespace):b=a(b)?new $.Observe.List(b):new $.Observe(b),b.bind("change"+d._namespace,function(a){var f=$.makeArray(arguments),a=f.shift();f[0]="*"===c?d.indexOf(b)+"."+f[0]:c+"."+f[0],$.event.trigger(a,f,d)}),b},f=function(a,b){for(var c,d=0;d<a.length;d++)c=a[d],c&&c.unbind&&c.unbind("change"+b)},g=0,h=null,i=function(){return h?void 0:(h=[],!0)},j=function(a,b,c){return a._init?void 0:h?(h.push({t:a,ev:b,args:c}),void 0):$.event.trigger(b,c,a,!0)
},k=0,l=function(){var c,a=h.length,b=h.slice(0);h=null,k++;for(var d=0;a>d;d++)c=b[d],$.event.trigger({type:c.ev,batchNum:k},c.args,c.t)},m=function(a,c,d){return a.each(function(a,e){d[a]=b(e)&&"function"==typeof e[c]?e[c]():e}),d};$.Class($.globalNamespace+".Observe",{init:function(a){this._data={},this._namespace=".observe"+ ++g,this._init=!0,this.attrs(a),delete this._init},attr:function(a,b){return void 0===b?this._get(a):(this._set(a,b),this)},each:function(){return d.apply(null,[this.__get()].concat(c(arguments)))
},removeAttr:function(b){var c=a(b)?b:b.split("."),d=c.shift(),e=this._data[d];return c.length?e.removeAttr(c):(delete this._data[d],j(this,"change",[d,"remove",void 0,e]),e)},_get:function(b){var c=a(b)?b:(""+b).split("."),d=this.__get(c.shift());return c.length?d?d._get(c):void 0:d},__get:function(a){return a?this._data[a]:this._data},_set:function(c,d){var g=a(c)?c:(""+c).split("."),h=g.shift(),i=this.__get(h);if(b(i)&&g.length)i._set(g,d);else{if(g.length)throw"jQuery.Observe: set a property on an object that does not exist";
if(d!==i){var k=this.__get().hasOwnProperty(h)?"set":"add";this.__set(h,b(d)?e(d,h,this):d),j(this,"change",[h,k,d,i]),i&&f([i],this._namespace)}}},__set:function(a,b){this._data[a]=b,a in this.constructor.prototype||(this[a]=b)},bind:function(){return $.fn.bind.apply($([this]),arguments),this},unbind:function(){return $.fn.unbind.apply($([this]),arguments),this},serialize:function(){return m(this,"serialize",{})},attrs:function(a,c){if(void 0===a)return m(this,"attrs",{});a=$.extend(!0,{},a);var d,e=i();for(d in this._data){var f=this._data[d],g=a[d];
void 0!==g?(b(f)&&b(g)?f.attrs(g,c):f!=g&&this._set(d,g),delete a[d]):c&&this.removeAttr(d)}for(var d in a)g=a[d],this._set(d,g);e&&l()}});var n=$.Observe($.globalNamespace+".Observe.List",{init:function(a,b){this.length=0,this._namespace=".list"+ ++g,this._init=!0,this.bind("change",this.proxy("_changes")),this.push.apply(this,c(a||[])),$.extend(this,b),this.comparator&&this.sort(),delete this._init},_changes:function(a,b,c,d,e){if(this.comparator&&/^\d+./.test(b)){var f=+/^\d+/.exec(b)[0],g=this[f],h=this.sortedIndex(g);
if(h!==f)return[].splice.call(this,f,1),[].splice.call(this,h,0,g),j(this,"move",[g,h,f]),a.stopImmediatePropagation(),j(this,"change",[b.replace(/^\d+/,h),c,d,e]),void 0}-1===b.indexOf(".")&&("add"===c?j(this,c,[d,+b]):"remove"===c&&j(this,c,[e,+b]))},sortedIndex:function(a){for(var d,b=a.attr(this.comparator),c=0,d=0;d<this.length;d++)if(a!==this[d]){if(b<=this[d].attr(this.comparator))return d+c}else c=-1;return d+c},__get:function(a){return a?this[a]:this},__set:function(a,b){this[a]=b},serialize:function(){return m(this,"serialize",[])
},splice:function(a,d){var h,g=c(arguments);for(h=2;h<g.length;h++){var i=g[h];b(i)&&(g[h]=e(i,"*",this))}void 0===d&&(d=g[1]=this.length-a);var k=[].splice.apply(this,g);return d>0&&(j(this,"change",[""+a,"remove",void 0,k]),f(k,this._namespace)),g.length>2&&j(this,"change",[""+a,"add",g.slice(2),k]),k},attrs:function(a,c){if(void 0===a)return m(this,"attrs",[]);a=a.slice(0);for(var d=Math.min(a.length,this.length),e=i(),f=0;d>f;f++){var g=this[f],h=a[f];b(g)&&b(h)?g.attrs(h,c):g!=h&&this._set(f,h)}a.length>this.length?this.push(a.slice(this.length)):a.length<this.length&&c&&this.splice(a.length),e&&l()
},sort:function(a,b){{var c=this.comparator,d=c?[function(a,b){return a=a[c],b=b[c],a===b?0:b>a?-1:1}]:[];[].sort.apply(this,d)}!b&&j(this,"reset")}}),o=function(a){return a[0]&&$.isArray(a[0])?a[0]:c(a)};d({push:"length",unshift:0},function(a,c){n.prototype[a]=function(){for(var d=o(arguments),f=c?this.length:0,g=0;g<d.length;g++){var h=d[g];b(h)&&(d[g]=e(h,"*",this))}if(1==d.length&&this.comparator){var i=this.sortedIndex(d[0]);return this.splice(i,0,d[0]),this.length}var k=[][a].apply(this,d);return this.comparator&&d.length>1?(this.sort(null,!0),j(this,"reset",[d])):j(this,"change",[""+f,"add",d,void 0]),k
}}),d({pop:"length",shift:0},function(a,b){n.prototype[a]=function(){var c=o(arguments),d=b&&this.length?this.length-1:0,e=[][a].apply(this,c);return j(this,"change",[""+d,"remove",void 0,[e]]),e&&e.unbind&&e.unbind("change"+this._namespace),e}}),n.prototype.indexOf=[].indexOf||function(a){return $.inArray(a,this)},$.O=function(b,c){return a(b)||b instanceof $.Observe.List?new $.Observe.List(b,c):new $.Observe(b,c)}}()}),FD50.plugin("joomla",function(a){var b={squeezebox:function(){return c.isJoomla15?window.parent.document.getElementById("sbox-window"):window.parent.SqueezeBox
}},c=a.Joomla=function(d,e){if(a.isFunction(e)){var f=e;return c.isJoomla15?window[d]=f:window.Joomla[d]=f,void 0}var d=b[d]||(c.isJoomla15?window[d]:window.Joomla[d]);return a.isFunction(d)?d.apply(window,e):void 0},d=parseFloat(a.joomla.version);c.isJoomla15=1.5>=d,c.isJoomla25=d>=1.6&&2.5>=d,c.isJoomla30=d>=3}),FD50.plugin("module",function(a){var b=function(b){var c=this,d=a.Callbacks("once memory");a.extend(this,a.Deferred(),{name:b,status:"pending",ready:function(b){b===!0&&d.fire.call(c,a),a.isFunction(b)&&d.add(b)
}}),c.then(function(){c.exports=this,c.status="resolved"},function(){c.status="rejected"});var e=c.done;c.done=function(){c.required=!0;var b=c.factory;return b&&"ready"===c.status&&b.call(c,a),c.done=e,c.done.apply(this,arguments)}};a.module=function(){var c=function(b,d){var e;if("string"==typeof b){if(e=c.get(b),void 0===d)return e;if(a.isFunction(d))return"resolved"==e.status?e:(e.factory=d,e.status="ready",e.ready("true"),e.required&&(e.status="executing",d.call(e,a)),e)}if(a.isArray(b)){var f=a.map(b,function(b){var d=c.get(a.isString(b)?b:b.name);
if(d)return"pending"===d.status&&(d.status="ready"),a.isPlainObject(b)?b:void 0});a.each(f,function(a,b){c(b.name,b.factory)})}};return a.extend(c,{registry:{},get:function(b){return b?(a.isModule(b)&&(b=b.replace("module://","")),c.registry[b]||c.create(b)):void 0},create:function(a){return c.registry[a]=new b(a)},remove:function(a){delete c.registry[a]}}),c}(),a.isModule=function(c){return a.isString(c)?!!c.match("module://"):c&&c instanceof b}}),FD50.plugin("script",function(a){a.Script=function(b){var c=document.createElement("script");
return c.text=a.isString(b)?b:a.callback(b)+"();",a(c)},a.script=function(){{var b=function(a){if(void 0!==a){"string"==typeof a&&(a={url:a});var b=new c(a);return b}},c=function(b){var c=a.extend(this,b);c.manager=a.Deferred(),a.extend(c,c.manager.promise()),c.load()},d=document.getElementsByTagName("head")[0];document.getElementsByTagName("base")[0]}return a.extend(c.prototype,{timeout:7e3,retry:3,retryCount:1,type:"text/javascript",async:!1,charset:"UTF-8",verbose:!1,head:d,insert:function(){var a=this.node;
this.head.appendChild(a)},remove:function(){var a=this.node;setTimeout(function(){a.onload=a.onerror=a.onreadystatechange=null;try{d.removeChild(a)}catch(b){}},1e3)},load:function(){var c,b=this;b.endTime=void 0,b.startTime=new Date,b.node=c=document.createElement("script"),b.insert(),b._ready=a.proxy(b.ready,b),b._error=a.proxy(b.error,b),c.attachEvent&&!a.browser.opera?(c.attachEvent("onreadystatechange",b._ready),c.attachEvent("onerror",b._error)):(c.addEventListener("load",b._ready,!1),c.addEventListener("error",b._error,!1)),a(c).attr({type:b.type,async:b.async,charset:b.charset,src:b.url}),b.monitor()
},monitor:function(){var a=this;return a.retryCount>a.retry?(a._error(),void 0):(setTimeout(function(){"resolved"!==a.state()&&(a.verbose&&console.warn("$.script: Load timeout. [Retry: "+a.retryCount+"]",a),a.remove(),a.retryCount++,a.load())},a.timeout*a.retryCount),void 0)},ready:function(a){var b=this,c=b.node;("load"===a.type||/loaded|complete/.test(c.readyState))&&(b.complete.call(b,a),b.manager.resolve(b))},error:function(a){var b=this;b.verbose&&console.error("$.script: Unable to load ",b),b.complete.call(b,a),b.remove(),b.manager.reject(b)
},complete:function(){var c=this,d=c.node;c.endTime=new Date,d.detachEvent&&!a.browser.opera?(d.detachEvent("onreadystatechange",c._ready),d.detachEvent("onerror",c._error)):(d.removeEventListener("load",c._ready,!1),d.removeEventListener("error",c._error,!1))}}),b}()}),FD50.plugin("stylesheet",function(a){var b=document.getElementsByTagName("head")[0],c=document.styleSheets,d=document.createStyleSheet,e=31,f=31,g=4095;a.stylesheet=function(){var h=function(b,c){var d={};return a.extend(d,h.defaultOptions,a.isPlainObject(b)?b:{url:b,attr:c||{}}),void 0===d.url?h.create(d):h.load(d)
};return a.extend(h,{defaultOptions:{type:"text/css",rel:"stylesheet",media:"all",title:"",forceInject:!1,xhr:!1},setup:function(b){a.extend(h.defaultOptions,b)},availability:function(){var b={},c=a('link[rel*="stylesheet"]');return styles=a("style"),b.groups=e-c.length-styles.length,b.slots=b.groups*f,h.currentGroup&&(b.slots+=f-h.currentGroup.imports.length),b},get:function(a){for(var b=0;b<c.length;b++){var d=c[b];if((d.ownerNode||d.owningElement)==a)return d}},create:function(f){var g,h,i=c.length;if(d){if(i>=e)return;
g=document.createStyleSheet(),h=g.ownerNode||g.owningElement}else h=document.createElement("style"),b.appendChild(h);a.extend(h,{type:f.type,title:f.title,media:f.media,rel:f.rel});var j=f.content;return void 0!==j&&(d?g.cssText=j:h.appendChild(document.createTextNode(j))),h},nextAvailable:function(a){var b,e=c.length;if(e){var f;for(f=e;f--;0>f){b=c[f];{if(!(d&&(b.cssRules||b.rules).length>=g))break;b=void 0}}}return b.ownerNode||b.owningElement||(a?h():void 0)},load:function(b){if(a.browser.msie&&!b.forceInject)return h._import(b);
var c=a("<link>").attr({href:b.url,type:b.type,rel:b.rel,media:b.media}).appendTo("head");return c[0]},_import:function(a){var b;if(void 0===h.currentGroup){var c;try{c=document.createStyleSheet(),c.media="all",c.title="jquery_stylesheet"}catch(d){b=!0,a.verbose&&console.error("There is not enough slots left to create a new stylesheet group.")}if(b)return!1;h.currentGroup=c}try{h.currentGroup.addImport(a.url)}catch(d){b=!0,a.verbose&&console.info("Import slots exceeded. Creating a new stylesheet group.")}return b?(h.currentGroup=void 0,h._import(a)):!0
}}),h}(),function(){var b=function(b,c,d){a.extend(this,{id:a.uid(),style:d,selectors:[],preRule:"",rules:{},legacy:8===a.IE,important:!1}),b&&this.set(b,c)};a.extend(b.prototype,{set:function(b,c){return this.selectors=a.isString(b)?b.split(","):b,a.isString(c)?(this.preRule=c+"\n",this.rules={}):(this.preRule="",this.rules=c||this.rules),this.update(),this},cssText:function(){return this.selectors.join(",")+"{"+this.ruleText()+"}\n"},ruleText:function(){var b=this.important;return this.preRule+(this.legacy?"-rule-id:"+this.id+";":"")+a.map(this.rules,function(c,d){return a.isNumeric(c)&&!a.cssNumber[d]&&(c+="px"),b&&(c+=" !important"),d+":"+c
}).join(";")},update:function(){if(this.legacy)return this.updateLegacy();var a=this.cssText();return void 0===this.textNode?(this.textNode=document.createTextNode(a),this.style.appendChild(this.textNode)):this.textNode.nodeValue=a,this},updateLegacy:function(){this.removeLegacy();for(var b=a.stylesheet.get(this.style),c=this.selectors,d=this.ruleText(),e=0;e<c.length;e++)b.addRule(c[e],d);return this},remove:function(){return this.legacy?this.removeLegacy():(void 0!==this.textNode&&(this.style.removeChild(this.textNode),delete this.textNode),this)
},removeLegacy:function(){for(var b=a.stylesheet.get(this.style),c=b.rules,d=0;d<c.length;d++)null!==c[d].cssText.match(this.id)&&b.removeRule(d);return this},css:function(b,c){return a.isString(b)&&void 0===c?this.rules[b]:(a.isPlainObject(b)?a.extend(this.rules,b):this.rules[b]=c,this.update(),this)}});var c=a.cssRule=function(d,e,f){var f=f||c.style||a.stylesheet.nextAvailable(!0);if(f)return new b(d,e,f)};c.style=a.stylesheet()}(),function(){a.cssUrl=function(a){return'url("'+encodeURI(a)+'")'}}()}),FD50.plugin("language",function(a){a.sprintf=function(){var a=/%%|%(\d+\$)?([-+\'#0 ]*)(\*\d+\$|\*|\d+)?(\.(\*\d+\$|\*|\d+))?([scboxXuidfegEG])/g,b=arguments,c=0,d=b[c++],e=function(a,b,c,d){c||(c=" ");
var e=a.length>=b?"":Array(1+b-a.length>>>0).join(c);return d?a+e:e+a},f=function(a,b,c,d,f,g){var h=d-a.length;return h>0&&(a=c||!f?e(a,d,g,c):a.slice(0,b.length)+e("",h,"0",!0)+a.slice(b.length)),a},g=function(a,b,c,d,g,h,i){var j=a>>>0;return c=c&&j&&{2:"0b",8:"0",16:"0x"}[b]||"",a=c+e(j.toString(b),h||0,"0",!1),f(a,c,d,g,i)},h=function(a,b,c,d,e,g){return null!=d&&(a=a.slice(0,d)),f(a,"",b,c,e,g)},i=function(a,d,i,j,k,l,m){var n,o,p,q,r;if("%%"==a)return"%";for(var s=!1,t="",u=!1,v=!1,w=" ",x=i.length,y=0;i&&x>y;y++)switch(i.charAt(y)){case" ":t=" ";
break;case"+":t="+";break;case"-":s=!0;break;case"'":w=i.charAt(y+1);break;case"0":u=!0;break;case"#":v=!0}if(j=j?"*"==j?+b[c++]:"*"==j.charAt(0)?+b[j.slice(1,-1)]:+j:0,0>j&&(j=-j,s=!0),!isFinite(j))throw new Error("sprintf: (minimum-)width must be finite");switch(l=l?"*"==l?+b[c++]:"*"==l.charAt(0)?+b[l.slice(1,-1)]:+l:"fFeE".indexOf(m)>-1?6:"d"==m?0:void 0,r=d?b[d.slice(0,-1)]:b[c++],m){case"s":return h(String(r),s,j,l,u,w);case"c":return h(String.fromCharCode(+r),s,j,l,u);case"b":return g(r,2,v,s,j,l,u);case"o":return g(r,8,v,s,j,l,u);
case"x":return g(r,16,v,s,j,l,u);case"X":return g(r,16,v,s,j,l,u).toUpperCase();case"u":return g(r,10,v,s,j,l,u);case"i":case"d":return n=0|+r,o=0>n?"-":t,r=o+e(String(Math.abs(n)),l,"0",!1),f(r,o,s,j,u);case"e":case"E":case"f":case"F":case"g":case"G":return n=+r,o=0>n?"-":t,p=["toExponential","toFixed","toPrecision"]["efg".indexOf(m.toLowerCase())],q=["toString","toUpperCase"]["eEfFgG".indexOf(m)%2],r=o+Math.abs(n)[p](l),f(r,o,s,j,u)[q]();default:return a}};return d.replace(a,i)};var b=a.language=a.JText=function(a){return arguments.length<2?b._(a):b.sprintf.apply(null,arguments)
};a.extend(b,{lang:{},add:function(c,d){a.isPlainObject(c)?a.extend(b.lang,c):b.lang[c]=d},remove:function(a){delete b.lang[a]},_:function(a){return b.lang.hasOwnProperty(a)?b.lang[a]:a},sprintf:function(){var c=arguments[0];return arguments[0]=b.lang[c],a.sprintf.apply(null,arguments)}})}),FD50.plugin("template",function(a){a.template=function(){var b={content:"",type:"ejs"},c=function(d,e){if(void 0===d)return c.templates;var f;return"string"==typeof e?(f=a.isPlainObject(e)?e:a.extend({},b,{name:d,content:e}),c.templates[d]=f,f):(f=c.templates[d]||{},f.content||"")
};return a.extend(c,{templates:{},remove:function(a){delete c.templates[a]}}),c}()}),FD50.plugin("require",function(a){a.require=function(){var b=function(b){return a.uri(b).setAnchor("").setQuery("").toPath("../").toString()},c=function(a){var b=new e(a);return c.batches[b.id]=b,b};a.extend(c,{defaultOptions:{path:function(){var c=a.path+"/scripts/"||a("[require-path]").attr("require-path")||b(a("script:last").attr("src"))||b(window.location.href);return/^(\/|\.)/.test(c)&&(c=a.uri(window.location.href).toPath(c).toString()),c
}(),timeout:1e4,retry:3,verbose:"development"==a.environment},setup:function(b){a.extend(c.defaultOptions,b)},batches:{},status:function(b){return a.each(c.batches,function(c,d){var e={pending:0,resolved:0,rejected:0,ready:0,total:0},f=[];a.each(d.tasks,function(a,b){state=b.module&&"ready"==b.module.status?"ready":b.state(),e[state]++,e.total++,f.push({state:state,content:"["+state+"] "+b.name})});var g=d.id+": "+d.state()+" ["+e.resolved+"/"+e.total+"]";b&&e[b]<1||(a.IE?(console.log('$.require.batches["'+d.id+'"]'),a.each(f,function(a,b){console.log(b.content)
}),console.log("")):(console.groupCollapsed(g),console.log('$.require.batches["'+d.id+'"]',d),a.each(f,function(a,c){var d=c.state,e=c.content;if(!b||d==b)switch(d){case"pending":console.warn(e);break;case"rejected":console.error(e);break;default:console.info(e)}}),console.groupEnd(g)))}),"$.require.status(pending|resolved|rejected|ready);"},loaders:{},addLoader:function(a,b){c[a]=b,e.prototype[a]=function(){var a=this;return a.autoFinalize(),b.apply(a,arguments),a},c.loaders[a]=c[a]=b},removeLoader:function(a){delete e.prototype[a],delete c[a]
}});var d=0,e=function(b){var e=a.Callbacks("once memory"),f=!1,g=a.extend(this,{id:++d,tasks:[],options:a.extend({},c.defaultOptions,b),autoFinalizeDuration:300,finalized:!1,required:function(b){return b===!0&&(f=!0&&e.fire()),a.isFunction(b)&&e.add(b),f}});return g};return a.extend(e.prototype,{addTask:function(b){var c=this;a.isDeferred(b)&&(c.finalized||(c.tasks.push(b),b.batch=c))},autoFinalize:function(){var a=this,b=a.autoFinalizeDuration;b!==!1&&(clearTimeout(a.autoFinalizeTimer),a.autoFinalizeTimer=setTimeout(function(){a.finalize()
},b))},finalize:function(){var b=this;if(!b.finalized){b.finalized=!0;var c=b.manager=a.when.apply(null,b.tasks),d=c.promise(),e=a.Callbacks();a.extend(b,d,{progress:e.add,notify:e.fire,done:function(){return b.required(!0),b.done=d.done,b.done.apply(b,arguments)}});var f=b.options.verbose;c.progress(function(a,b){f&&"rejected"==a&&console.warn("Require: Task "+b.name+" failed to load.",b)}).fail(function(){f&&console.warn("Require: Batch "+b.id+" failed.",b)}),setTimeout(function(){a.each(b.tasks,function(a,c){c.then(function(){b.notify("resolved",c)
},function(){b.notify("rejected",c)},function(){b.notify("progress",c)})})},1)}},expand:function(b,c){var b=a.makeArray(b),d=c||{},e=[];return a.isPlainObject(b[0])?(d=a.extend(b[0],c),e=b.slice(1)):e=b,{options:d,names:e}}}),a.each(["done","fail","progress","always","then"],function(a,b){e.prototype[b]=function(){var a=this;return a.finalize(),a[b].apply(a,arguments)}}),c}(),a.require.addLoader("script",function(){var b=a.uri(a.indexUrl).host(),c=a.uri(document.location.href).host();b!==c&&b.match("xn--")&&(a.support.cors=!0);
var e=(document.createElement("script").async===!0||"MozAppearance"in document.documentElement.style||window.opera,function(){var d,f,b=this,c=a.makeArray(arguments);a.isPlainObject(c[0])?(d=c[0],f=c.slice(1)):f=c,d=a.extend({},e.defaultOptions,b.options,d,{batch:b});var g;a.each(f,function(a,c){var f=new e.task(c,d,g);b.addTask(f),d.serial&&void 0!==g?g.always(f.start):f.start(),g=f})});return a.extend(e,{defaultOptions:{path:"",extension:"compressed"==a.mode?"min.js":"js",serial:!1,async:!1,xhr:!1},setup:function(){a.extend(e.defaultOptions,options)
},scripts:{},task:function(b,c,d){var e=a.extend(this,a.Deferred());if(e.name=b,e.options=c,e.taskBefore=d,a.isArray(b)){e.name=b[0]+"@"+b[1],e.moduleName=b[0];var f=b[2];f||(e.defineModule=!0,a.module.registry[e.moduleName]&&console.warn("$.require.script: "+e.moduleName+" exists! Using existing module instead."),e.options.xhr=!0),b=b[1],e.module=a.module(e.moduleName)}a.isUrl(b)?e.url=b:/^(\/|\.)/.test(b)?e.url=a.uri(e.options.path).toPath(b).toString():(e.url=a.uri(e.options.path).toPath("./"+b+"."+e.options.extension).toString(),e.module=a.module(b))
}}),a.extend(e.task.prototype,{start:function(){var a=this,b=a.module;return b&&"pending"!==b.status?(a.waitForModule(),void 0):(a.load(),void 0)},waitForModule:function(){var a=this,b=a.module;b.then(a.resolve,a.reject,a.notify),a.batch.required(function(){b.done(a.resolve)})},load:function(){var b=this,c=b.taskBefore;b.script=e.scripts[b.url]||function(){var c=b.options.xhr?a.ajax({url:b.url,dataType:"text"}):a.script({url:b.url,type:"text/javascript",async:b.options.async,timeout:b.batch.options.timeout,retry:b.batch.options.retry,verbose:b.batch.options.verbose});
return e.scripts[b.url]=c}(),b.script.done(function(d){var e=function(){b.module?b.waitForModule():b.resolve()};return b.options.xhr&&(b.defineModule&&(b.module=a.module(b.moduleName,function(){var b=this;a.globalEval(d),b.resolveWith(d)})),!b.options.async||c)?(c.done(function(){a.globalEval(d),e()}),void 0):(e(),void 0)}).fail(function(){b.reject()})}}),e}()),a.require.addLoader("stylesheet",function(){var b=function(){var e,f,c=this,d=a.makeArray(arguments);a.isPlainObject(d[0])?(e=d[0],f=d.slice(1)):f=d,e=a.extend({},b.defaultOptions,c.options,{path:a.path+"/styles/"},e,{batch:c}),a.each(f,function(a,d){var f=new b.task(d,e),g=b.stylesheets[f.url];
f=g||f,c.addTask(f),g||(b.stylesheets[f.url]=f,f.start())})};return a.extend(b,{defaultOptions:{path:"",extension:"compressed"==a.mode?"min.css":"css",xhr:!1},setup:function(){a.extend(b.defaultOptions,options)},stylesheets:{},task:function(b,c){var d=a.extend(this,a.Deferred());d.name=b,d.options=c,d.url=a.isUrl(b)?b:/^(\/|\.)/.test(b)?a.uri(d.options.path).toPath(b).toString():a.uri(d.options.path).toPath("./"+b+"."+d.options.extension).toString(),d.options.url=d.url},loaders:{},loader:function(c){if(a.isArray(c))return a.map(c,function(a){return b.loader(a)
});if(a.isPlainObject(c))return a.map(c,function(a,c){return b.loader(a).resolve(c)});var d=b.loaders[c];return d||(d=b.loaders[c]=a.Deferred().done(function(b){a.isPlainObject(b)||a.stylesheet(b)})),d}}),a.extend(b.task.prototype,{start:function(){var c=this,d=b.loaders[c.name];d||(d=b.loader(c.name),a.stylesheet(c.options)?d.resolve():d.reject()),d.then(c.resolve,c.reject)}}),b}()),a.require.addLoader("template",function(){var b=function(){var e,f,c=this,d=a.makeArray(arguments);a.isPlainObject(d[0])?(e=d[0],f=d.slice(1)):f=d,e=a.extend({},b.defaultOptions,c.options,e,{batch:c}),a.each(f,function(a,d){var f=new b.task(d,e);
c.addTask(f),f.start()})};return a.extend(b,{defaultOptions:{path:"",extension:"htm"},setup:function(){a.extend(b.defaultOptions,options)},task:function(b,c){var d=a.extend(this,a.Deferred());d.name=b,d.options=c,a.isArray(b)&&(d.name=b[0],b=b[1]),d.url=a.isUrl(b)?b:/^(\/|\.)/.test(b)?a.uri(d.options.path).toPath(b).toString():a.uri(d.options.path).toPath("./"+b+"."+d.options.extension).toString()},loaders:{},loader:function(c){if(a.isArray(c))return a.map(c,function(a){return b.loader(a)});if(a.isPlainObject(c))return a.map(c,function(a,c){return b.loader(c).resolve(a)
});var d=b.loaders[c];return d||(d=b.loaders[c]=a.Deferred().done(function(b){a.template(c,b)})),d}}),a.extend(b.task.prototype,{start:function(){var c=this,d=b.loaders[c.name];return d||(d=b.loader(c.name),d.xhr=a.Ajax({url:c.url,dataType:"text"}).then(d.resolve,d.reject).then(c.resolve,c.reject)),c.loader=d,c}}),b}()),a.require.addLoader("language",function(){var b=function(){var e,f,c=this,d=a.makeArray(arguments);a.isPlainObject(d[0])?(e=d[0],f=d.slice(1)):f=d,e=a.extend({},b.defaultOptions,c.options,e,{batch:c});
var g=new b.task(f,e);c.addTask(g),g.start()};return a.extend(b,{defaultOptions:{path:""},setup:function(){a.extend(b.defaultOptions,options)},loaders:{},task:function(b,c){var d=a.extend(this,a.Deferred());d.name=b.join(","),d.options=c,d.url=c.path,d.names=b},loaders:{},loader:function(c){if(a.isArray(c))return a.map(c,function(a){return b.loader(a)});if(a.isPlainObject(c))return a.map(c,function(a,c){return b.loader(c).resolve(a)});var d=b.loaders[c];return d||(d=b.loaders[c]=a.Deferred().done(function(b){a.language.add(c,b)
})),d}}),a.extend(b.task.prototype,{start:function(){var c=this,d=[],e=a.map(c.names,function(a){var c=b.loader(a);return c.push(c),/resolved|rejected/.test(c.state())?null:a});return c.fail(function(){a.each(e,function(a,c){b.loader(c).reject()})}),a.when.apply(null,d).then(c.resolve,c.reject),e.length<1?c:(c.xhr=a.Ajax({url:c.url,type:"POST",data:{keys:e}}).done(function(d){a.isPlainObject(d)?b.loader(d):c.reject()}).fail(function(){c.reject()}),c)}}),b}()),a.require.addLoader("library",function(){var e,b=this,c=a.makeArray(arguments),d={};
return a.isPlainObject(c[0])?(d=c[0],e=c.slice(1)):e=c,a.extend(d,{path:a.scriptPath}),b.script.apply(b,[d].concat(e))}),a.require.addLoader("image",function(){var b=function(){var e,f,c=this,d=a.makeArray(arguments);a.isPlainObject(d[0])?(e=d[0],f=d.slice(1)):f=d,e=a.extend({},b.defaultOptions,c.options,e,{batch:c}),a.each(f,function(a,d){var f=new b.task(d,e),g=b.images[f.url];f=g||f,c.addTask(f),g||(b.images[f.url]=f,f.start())})};return a.extend(b,{defaultOptions:{path:""},setup:function(){a.extend(b.defaultOptions,options)
},images:{},task:function(b,c){var d=a.extend(this,a.Deferred());d.name=b,d.options=c,d.url=a.isUrl(b)?b:/^(\/|\.)/.test(b)?a.uri(d.options.path).toPath(b).toString():a.uri(d.options.path).toPath("./"+b).toString(),d.options.url=d.url}}),a.extend(b.task.prototype,{start:function(){var b=this;b.image=a(new Image).load(function(){b.resolve()}).error(function(){b.reject()}).attr("src",b.options.url)}}),b}())}),FD50.plugin("iframe-transport",function(a){a.ajaxPrefilter(function(a){return a.iframe?"iframe":void 0
}),a.ajaxTransport("iframe",function(b){function k(){i&&j.replaceWith(function(a){return h.get(a)}),e.remove(),f.attr("src","javascript:false;").remove()}var e=null,f=null,g="iframe-"+a.now(),h=a(b.files).filter(":file:enabled"),i=h.length>0,j=null;return b.dataTypes.shift(),e=a("<form enctype='multipart/form-data' method='post'></form>").hide().attr({action:b.url,target:g}),"string"==typeof b.data&&b.data.length>0&&a.error("data must not be serialized"),a.each(b.data||{},function(b,c){a.isPlainObject(c)&&(b=c.name,c=c.value),a.isArray(c)||(c=[c]),a.each(c,function(c,d){a("<input type='hidden' />").attr({name:b,value:d}).appendTo(e)
})}),a("<input type='hidden' value='IFrame' name='X-Requested-With' />").appendTo(e),i&&(j=h.after(function(){return a(this).clone().prop("disabled",!0)}).next(),h.appendTo(e)),{send:function(b,c){f=a("<iframe src='javascript:false;' name='"+g+"' id='"+g+"' style='display:none'></iframe>"),f.bind("load",function(){f.unbind("load").bind("load",function(){var a=this.contentWindow?this.contentWindow.document:this.contentDocument?this.contentDocument:this.document,b=a.documentElement?a.documentElement:a.body,d=b.getElementsByTagName("textarea")[0],e=d?d.getAttribute("data-type"):null,f=d?d.getAttribute("data-status"):200,g=d?d.getAttribute("data-statusText"):"OK",h={html:b.innerHTML,text:e?d.value:b?b.textContent||b.innerText:null};
k(),c(f,g,h,e?"Content-Type: "+e:null)}),e[0].submit()}),a("body").append(e,f)},abort:function(){null!==f&&(f.unbind("load").attr("src","javascript:false;"),k())}}})}),FD50.plugin("server",function($){var self=$.server=function(a){var b=$.Deferred(),c=$.extend(!0,{},self.defaultOptions,a,{success:function(){}}),d=b.xhr=$.Ajax(c).done(function(c){if("string"==typeof c)try{c=$.parseJSON(c)}catch(d){b.rejectWith(b,["Unable to parse Ajax commands.","error"])}if($.isArray(c)){var e=function(c){var d=c.type,e=self.parsers[d]||a[d];
return $.isFunction(e)?e.apply(b,c.data):void 0},c=$.map(c,function(a){return"notify"!=a.type?a:(e(a),void 0)});$.each(c,function(a,b){e(b)})}else b.rejectWith(b,["Invalid ajax commands.","error"]);"pending"===b.state()&&b.resolveWith(b)}).fail(function(a,c,d){b.rejectWith(b,[d,c])});return b.abort=d.abort,b};self.defaultOptions={type:"POST",data:{tmpl:"component",format:"ajax",no_html:1},cache:!1,contentType:"application/x-www-form-urlencoded",dataType:"json"},self.parsers={script:function(){var data=$.makeArray(arguments);
if("string"!=typeof data[0]){var chain=window,chainBroken=!1;$.each(data,function(a,b){"Foundry"===b.property&&(b.property=$.globalNamespace),"Foundry"===b.method&&(b.method=$.globalNamespace);try{switch(b.type){case"get":chain=chain[b.property];break;case"set":chain[b.property]=b.value,chainBroken=!0;break;case"call":chain=chain[b.method].apply(chain,b.args)}}catch(c){chainBroken=!0}})}else try{eval(data[0])}catch(err){}},resolve:function(){this.resolveWith(this,arguments)},reject:function(){this.rejectWith(this,arguments)
},notify:function(){this.notifyWith(this,arguments)},redirect:function(a){window.location=a}}}),FD50.plugin("component",function(a){var b=a.Component=function(a,c){return arguments.length<1?b.registry:arguments.length<2?b.registry[a]:b.register(a,c)};b.registry={},b.proxy=function(b,c,d){b[c]=a.isFunction(d)?a.proxy(d,b):d},b.register=function(c,d){var e;a.isFunction(c)&&(e=c,c=e.className,d=e.options);var f=b.registry[c]=window[c]=function(b){return a.isFunction(b)?b(a):component};if(a.each(b.prototype,function(a,c){b.proxy(f,a,c)
}),f.$=a,f.options=d,f.className=c,f.identifier=c.toLowerCase(),f.componentName="com_"+f.identifier,f.prefix=f.identifier+"/",f.version=d.version,f.safeVersion=f.version.replace(/\./g,""),f.environment=d.environment||a.environment,f.mode=d.mode||a.mode,f.debug="development"===f.environment,f.console=b.console(f),f.language=d.language||a.locale.lang||"en",f.baseUrl=d.baseUrl||a.indexUrl+"?option="+f.componentName,f.ajaxUrl=d.ajaxUrl||a.basePath+"/?option="+f.componentName,f.scriptPath=d.scriptPath||a.rootPath+"/media/"+f.componentName+"/scripts/",f.stylePath=d.stylePath||a.rootPath+"/media/"+f.componentName+"/styles/",f.templatePath=d.templatePath||d.scriptPath,f.languagePath=d.languagePath||f.ajaxUrl+"&tmpl=component&no_html=1&controller=lang&task=getLanguage",f.viewPath=d.viewPath||f.ajaxUrl+"&tmpl=component&no_html=1&controller=themes&task=getAjaxTemplate",f.optimizeResources=!0,f.resourcePath=d.resourcePath||f.ajaxUrl+"&tmpl=component&no_html=1&controller=foundry&task=getResource",f.resourceInterval=1200,f.scriptVersioning=d.scriptVersioning||!1,f.tasks=[],FD50.component(c,f),e){if(f.debug)e.queue.execute();
else{for(var g,h=FD50.installer(c);g=h.shift();)f.install.apply(f,g);a.when(f.install("definitions"),f.install("scripts")).done(function(){e.queue.execute()})}var i=f.storage=function(b,c){var d=f.prefix,b=d+b,e=arguments.length;return 1==e?a.Storage.get(b):2==e?b===!1?a.Storage.remove(d+c):a.Storage.set(b,c):i.getAll()};a.extend(f.storage,{getAll:function(){var b=f.prefix,c=b.length,d=a.Storage.getAll(),e={};for(key in d)key.substr(0,c)==b&&(e[key.substr(c)]=d[key]);return e},remove:function(b){a.Storage.remove(f.prefix+b)
},clear:function(){for(key in i.getAll())i.remove(key)}})}},b.extend=function(c,d){b.prototype[c]=d,a.each(b.registry,function(a,e){b.proxy(e,c,d)})},a.template("component/console",'<div id="[%== component.identifier %]-console" class="foundry-console" style="display: none; z-index: 999999;"><div class="console-header"><div class="console-title">[%= component.className %] [%= component.version %]</div><div class="console-remove-button">x</div></div><div class="console-log-item-group"></div><style type="text/css">.foundry-console{position:fixed;width:50%;height:50%;bottom:0;left:0;background:white;box-shadow: 0 0 5px 0;margin-left: 25px;}.console-log-item-group{width: 100%;height: 100%;overflow-y:scroll;}.console-header{position: absolute;background:red;color:white;font-weight:bold;top:-24px;left: 0;line-height:24px;width:100%}.console-remove-button{text-align:center;cursor: pointer;display:block;width: 24px;float:right}.console-remove-button:hover{color: yellow}.console-title{padding: 0 5px;float:left}.console-log-item{padding: 5px}.console-log-item + .console-log-item{border-top: 1px solid #ccc}</style></div>'),b.console=function(b){return function(b){var d,c=function(a){return arguments.length<1?c.toggle():c[a]&&c[a].apply(c,arguments)
};return c.selector="#"+b.identifier+"-console",c.init=function(){return d=a(c.selector),d.length<1&&(d=a(a.View("component/console",{component:b})).appendTo("body"),d.find(".console-remove-button").click(function(){d.hide()})),c.element=d,arguments.callee},c.methods={log:function(c,e,f){e=e||"info";var g=d.find(".console-log-item-group"),h=a(document.createElement("div")).addClass("console-log-item type-"+e).attr("data-code",f).html(c);g.append(h),g[0].scrollTop=g[0].scrollHeight,b.debug&&d.show()},toggle:function(){d.toggle()
},reset:function(){d.find(".console-log-item-group").empty()}},a.each(c.methods,function(a,b){c[a]=function(){return c.init(),b.apply(c,arguments)}}),c}(b)};var c=a(document),d=b.prototype;a.extend(d,{run:function(b){return a.isFunction(b)?b(a):this},ready:function(){return c.ready(function(){d.ready=d.run}),function(b){a.isFunction(b)&&c.ready(function(){b(a)})}}(),install:function(b,c){var d=this,e=d.tasks[b]||(d.tasks[b]=a.Deferred());if(!c)return e;var f=function(){return c(a,d),e.resolve()};return"definitions"==b?f():(a.when(d.install("definitions")).done(f),void 0)
},token:function(){var b=this;if(b.options.token)return b.options.token;var c=b.identifier,d="span#"+c+"-token input",e='meta[name="'+c+':token"]',f=a(d).attr("name")||a(e).attr("content");return b.token.value=f},template:function(b){var c=this;return void 0==b?a.grep(a.template(),function(a){return 0==a.indexOf(c.prefix)}):(arguments[0]=c.prefix+b,a.template.apply(null,arguments))},require:function(b){var c=this,b=b||{},d=a.require(b),e={};return a.each(["library","script","language","template","done"],function(a,b){e[b]=d[b]
}),d.resource=function(b){if(a.isPlainObject(b)&&b.type&&b.name&&a.isDeferred(b.loader)){var f=c.resourceCollector;f||(f=c.resourceCollector=a.Deferred(),a.extend(f,{name:a.uid("ResourceCollector"),manifest:[],loaderList:[],loaders:[],load:function(){if(delete c.resourceCollector,f.manifest.length<0)return f.resolve(),void 0;var b=0,d=function(){b++,a.Ajax({type:"POST",url:c.resourcePath,dataType:"json",data:{resource:f.manifest}}).done(function(d){return a.isArray(d)?(a.each(d,function(a,b){var c=b.content;
f.loaders[b.id][void 0!==c?"resolve":"reject"](c)}),b>1&&c.debug&&console.info("Attempt to try and get resources again was successful!"),void 0):(f.reject("Server did not return a valid resource manifest."),void 0)}).fail(function(){return b>2?(c.debug&&console.error("Unable to get resource again. Giving up!"),void 0):(c.debug&&console.warn("Unable to get resource. Trying again..."),d(),void 0)})};d(),a.when.apply(null,f.loaderList).done(f.resolve).fail(f.reject)}}),setTimeout(f.load,c.resourceCollectionInterval));
var g=b.id=a.uid("Resource");return f.loaders[g]=b.loader,f.loaderList.push(b.loader),delete b.loader,f.manifest.push(b),d}},d.view=function(){var b=this,e=b.expand(arguments,{path:c.viewPath}),f={},g=e.options,h=a.map(e.names,function(e){var g=c.prefix+e,h=a.require.template.loaders[g];if(!h)return h=a.require.template.loader(g),h.name=g,b.addTask(h),c.optimizeResources?(d.resource({type:"view",name:e,loader:h}),void 0):(f[e]=h,e)});return h.length>0&&a.Ajax({url:g.path,dataType:"json",data:{names:h}}).done(function(b){a.isArray(b)&&a.each(b,function(a,b){var c=b.content;
f[b.name][void 0!==c?"resolve":"reject"](c)})}),d},d.language=function(){var b=this,f=b.expand(arguments,{path:c.languagePath});return c.optimizeResources?a.each(f.names,function(c,e){var f=a.require.language.loaders[e];f||(f=a.require.language.loader(e),f.name=e,b.addTask(f),d.resource({type:"language",name:e,loader:f}))}):e.language.apply(d,[f.options].concat(f.names)),d},d.library=function(){return e.script.apply(this,arguments),d},d.script=function(){var b=this,f=b.expand(arguments,{path:c.scriptPath}),g=a.map(f.names,function(b){if(a.isArray(b)||a.isUrl(b)||/^(\/|\.)/.test(b))return b;
var d=c.prefix+b,e=a.uri(f.options.path).toPath("./"+b+"."+(f.options.extension||"js")+(c.scriptVersioning?"?version="+c.safeVersion:"")).toString();return[[d,e,!0]]});return e.script.apply(d,[f.options].concat(g)),d},d.template=function(){var b=this,f=b.expand(arguments,{path:c.templatePath});return e.template.apply(d,[f.options].concat(a.map(f.names,function(a){return[[c.prefix+a,a]]}))),d},d.app=function(){var b=this,f=b.expand(arguments,{path:c.scriptPath});return names=a.map(f.names,function(b){if(a.isArray(b)||a.isUrl(b)||/^(\/|\.)/.test(b))return b;
var d=b.split("/"),e=a.rootPath+"/media/"+c.componentName+"/apps";4===d.length&&(e+="/"+d.shift()),e+="/"+d[0]+"/"+d[1]+"/scripts/"+d[2];var g=c.prefix+b,h=e+"."+(f.options.extension||"js")+(c.scriptVersioning?"?version="+c.safeVersion:"");return[[g,h,!0]]}),e.script.apply(d,[f.options].concat(names)),d},d.done=function(a){return e.done.call(d,function(){c.ready(a)})},d},module:function(b,c){var d=this;if(!a.isArray(b)){var e=d.prefix+b;return c?a.module.apply(null,[e,function(){var b=this;c.call(b,a)}]):a.module(e)
}}}),a.Component.extend("ajax",function(b,c,d){var e=this,f=new Date,g={url:e.ajaxUrl+"&_ts="+f.getTime(),data:a.extend(c,{option:e.componentName,namespace:b})};if(g=a.extend(!0,g,e.options.ajax),g.data[e.token()]=1,g.data.hasOwnProperty("args")&&(g.data.args=a.toJSON(g.data.args)),a.isPlainObject(d)){if(d.type){switch(d.type){case"jsonp":d.dataType="jsonp",d.crossDomain=!0,g.data.transport="jsonp";break;case"iframe":d.iframe=!0,d.processData=!1,d.files=g.data.files,delete g.data.files,g.data.transport="iframe"
}delete d.type}a.extend(g,d)}a.isFunction(d)&&(g.success=d);var h=a.server(g);return h.progress(function(a,b,c){e.debug&&"debug"==b&&e.console.log(a,b,c)}),h}),a.Component.extend("Controller",function(){var e,f,b=this,c=a.makeArray(arguments),d=c[0];return 1==c.length?a.String.getObject(d):(c.length>2?(e=c[1],f=c[2]):(e={},f=c[1]),a.extend(e,{root:b.className+".Controller",component:b}),a.Controller.apply(this,[d,e,f]))}),a.Component.extend("Model",function(){var e,f,b=this,c=a.makeArray(arguments),d=b.className+".Model."+c[0];
return 1==c.length?a.String.getObject(c[0]):(2==c.length&&(e={},f=c[1]),c.length>2&&(e=c[1],f=c[2]),a.extend(e,{component:b}),a.Model.apply(this,[d,e,f]))}),a.Component.extend("Model.List",function(){var e,f,b=this,c=a.makeArray(arguments),d=b.className+".Model.List."+c[0];return 1==c.length?a.String.getObject(c[0]):(2==c.length&&(e={},f=c[1]),c.length>2&&(e=c[1],f=c[2]),a.extend(e,{component:b}),a.Model.List.apply(this,[d,e,f]))}),a.Component.extend("View",function(){var c=this;return arguments.length<1?c.template():(arguments[0]=c.prefix+arguments[0],a.View.apply(this,arguments))
}),FD50.module.execute()}),FD50.plugin("static",function($){!function(){var a=["ui/resizable"],b=$.stylesheet({content:"/*!\n * jQuery UI Resizable 1.10.4pre\n * http://jqueryui.com\n *\n * Copyright 2013 jQuery Foundation and other contributors\n * Released under the MIT license.\n * http://jquery.org/license\n *\n * http://docs.jquery.com/UI/Resizable#theming\n */\n.ui-resizable{position:relative}.ui-resizable-handle{position:absolute;font-size:.1px;display:block}.ui-resizable-disabled .ui-resizable-handle,.ui-resizable-autohide .ui-resizable-handle{display:none}.ui-resizable-n{cursor:n-resize;height:7px;width:100%;top:-5px;left:0}.ui-resizable-s{cursor:s-resize;height:7px;width:100%;bottom:-5px;left:0}.ui-resizable-e{cursor:e-resize;width:7px;right:-5px;top:0;height:100%}.ui-resizable-w{cursor:w-resize;width:7px;left:-5px;top:0;height:100%}.ui-resizable-se{cursor:se-resize;width:12px;height:12px;right:1px;bottom:1px}.ui-resizable-sw{cursor:sw-resize;width:9px;height:9px;left:-5px;bottom:-5px}.ui-resizable-nw{cursor:nw-resize;width:9px;height:9px;left:-5px;top:-5px}.ui-resizable-ne{cursor:ne-resize;width:9px;height:9px;right:-5px;top:-5px}"})?"resolve":"reject";
$.each(a,function(a,c){$.require.stylesheet.loader(c)[b]()})}(),$.module(["ui/position","placeholder","nouislider","ui/draggable","ui/core","ui/mouse","ui/widget","ui/droppable","colorpicker","plupload2","audiojs","rangeslider","imgareaselect","ace","videojs","ui/sortable","ui/resizable","scrollTo","image","moment","datetimepicker","expanding","selectionchange","pageslide","textboxlist","autosize.input","nearest","scrolly","mousewheel","history"]),function(){var a=function(a){var b=this,c=a,d=function(){!function(a,b){function m(a,b,c){return[parseFloat(a[0])*(k.test(a[0])?b/100:1),parseFloat(a[1])*(k.test(a[1])?c/100:1)]
}function n(b,c){return parseInt(a.css(b,c),10)||0}function o(b){var c=b[0];return 9===c.nodeType?{width:b.width(),height:b.height(),offset:{top:0,left:0}}:a.isWindow(c)?{width:b.width(),height:b.height(),offset:{top:b.scrollTop(),left:b.scrollLeft()}}:c.preventDefault?{width:0,height:0,offset:{top:c.pageY,left:c.pageX}}:{width:b.outerWidth(),height:b.outerHeight(),offset:b.offset()}}a.ui=a.ui||{};var c,d=Math.max,e=Math.abs,f=Math.round,g=/left|center|right/,h=/top|center|bottom/,i=/[\+\-]\d+(\.[\d]+)?%?/,j=/^\w+/,k=/%$/,l=a.fn.position;
a.position={scrollbarWidth:function(){if(c!==b)return c;var d,e,f=a("<div style='display:block;width:50px;height:50px;overflow:hidden;'><div style='height:100px;width:auto;'></div></div>"),g=f.children()[0];return a("body").append(f),d=g.offsetWidth,f.css("overflow","scroll"),e=g.offsetWidth,d===e&&(e=f[0].clientWidth),f.remove(),c=d-e},getScrollInfo:function(b){var c=b.isWindow?"":b.element.css("overflow-x"),d=b.isWindow?"":b.element.css("overflow-y"),e="scroll"===c||"auto"===c&&b.width<b.element[0].scrollWidth,f="scroll"===d||"auto"===d&&b.height<b.element[0].scrollHeight;
return{width:f?a.position.scrollbarWidth():0,height:e?a.position.scrollbarWidth():0}},getWithinInfo:function(b){var c=a(b||window),d=a.isWindow(c[0]);return{element:c,isWindow:d,offset:c.offset()||{left:0,top:0},scrollLeft:c.scrollLeft(),scrollTop:c.scrollTop(),width:d?c.width():c.outerWidth(),height:d?c.height():c.outerHeight()}}},a.fn.position=function(b){if(!b||!b.of)return l.apply(this,arguments);b=a.extend({},b);var c,k,p,q,r,s,t=a(b.of),u=a.position.getWithinInfo(b.within),v=a.position.getScrollInfo(u),w=(b.collision||"flip").split(" "),x={};
return s=o(t),t[0].preventDefault&&(b.at="left top"),k=s.width,p=s.height,q=s.offset,r=a.extend({},q),a.each(["my","at"],function(){var c,d,a=(b[this]||"").split(" ");1===a.length&&(a=g.test(a[0])?a.concat(["center"]):h.test(a[0])?["center"].concat(a):["center","center"]),a[0]=g.test(a[0])?a[0]:"center",a[1]=h.test(a[1])?a[1]:"center",c=i.exec(a[0]),d=i.exec(a[1]),x[this]=[c?c[0]:0,d?d[0]:0],b[this]=[j.exec(a[0])[0],j.exec(a[1])[0]]}),1===w.length&&(w[1]=w[0]),"right"===b.at[0]?r.left+=k:"center"===b.at[0]&&(r.left+=k/2),"bottom"===b.at[1]?r.top+=p:"center"===b.at[1]&&(r.top+=p/2),c=m(x.at,k,p),r.left+=c[0],r.top+=c[1],this.each(function(){var g,h,i=a(this),j=i.outerWidth(),l=i.outerHeight(),o=n(this,"marginLeft"),s=n(this,"marginTop"),y=j+o+n(this,"marginRight")+v.width,z=l+s+n(this,"marginBottom")+v.height,A=a.extend({},r),B=m(x.my,i.outerWidth(),i.outerHeight());
"right"===b.my[0]?A.left-=j:"center"===b.my[0]&&(A.left-=j/2),"bottom"===b.my[1]?A.top-=l:"center"===b.my[1]&&(A.top-=l/2),A.left+=B[0],A.top+=B[1],a.support.offsetFractions||(A.left=f(A.left),A.top=f(A.top)),g={marginLeft:o,marginTop:s},a.each(["left","top"],function(d,e){a.ui.position[w[d]]&&a.ui.position[w[d]][e](A,{targetWidth:k,targetHeight:p,elemWidth:j,elemHeight:l,collisionPosition:g,collisionWidth:y,collisionHeight:z,offset:[c[0]+B[0],c[1]+B[1]],my:b.my,at:b.at,within:u,elem:i})}),b.using&&(h=function(a){var c=q.left-A.left,f=c+k-j,g=q.top-A.top,h=g+p-l,m={target:{element:t,left:q.left,top:q.top,width:k,height:p},element:{element:i,left:A.left,top:A.top,width:j,height:l},horizontal:0>f?"left":c>0?"right":"center",vertical:0>h?"top":g>0?"bottom":"middle"};
j>k&&e(c+f)<k&&(m.horizontal="center"),l>p&&e(g+h)<p&&(m.vertical="middle"),m.important=d(e(c),e(f))>d(e(g),e(h))?"horizontal":"vertical",b.using.call(this,a,m)}),i.offset(a.extend(A,{using:h}))})},a.ui.position={fit:{left:function(a,b){var j,c=b.within,e=c.isWindow?c.scrollLeft:c.offset.left,f=c.width,g=a.left-b.collisionPosition.marginLeft,h=e-g,i=g+b.collisionWidth-f-e;b.collisionWidth>f?h>0&&0>=i?(j=a.left+h+b.collisionWidth-f-e,a.left+=h-j):a.left=i>0&&0>=h?e:h>i?e+f-b.collisionWidth:e:h>0?a.left+=h:i>0?a.left-=i:a.left=d(a.left-g,a.left)
},top:function(a,b){var j,c=b.within,e=c.isWindow?c.scrollTop:c.offset.top,f=b.within.height,g=a.top-b.collisionPosition.marginTop,h=e-g,i=g+b.collisionHeight-f-e;b.collisionHeight>f?h>0&&0>=i?(j=a.top+h+b.collisionHeight-f-e,a.top+=h-j):a.top=i>0&&0>=h?e:h>i?e+f-b.collisionHeight:e:h>0?a.top+=h:i>0?a.top-=i:a.top=d(a.top-g,a.top)}},flip:{left:function(a,b){var n,o,c=b.within,d=c.offset.left+c.scrollLeft,f=c.width,g=c.isWindow?c.scrollLeft:c.offset.left,h=a.left-b.collisionPosition.marginLeft,i=h-g,j=h+b.collisionWidth-f-g,k="left"===b.my[0]?-b.elemWidth:"right"===b.my[0]?b.elemWidth:0,l="left"===b.at[0]?b.targetWidth:"right"===b.at[0]?-b.targetWidth:0,m=-2*b.offset[0];
0>i?(n=a.left+k+l+m+b.collisionWidth-f-d,(0>n||n<e(i))&&(a.left+=k+l+m)):j>0&&(o=a.left-b.collisionPosition.marginLeft+k+l+m-g,(o>0||e(o)<j)&&(a.left+=k+l+m))},top:function(a,b){var o,p,c=b.within,d=c.offset.top+c.scrollTop,f=c.height,g=c.isWindow?c.scrollTop:c.offset.top,h=a.top-b.collisionPosition.marginTop,i=h-g,j=h+b.collisionHeight-f-g,k="top"===b.my[1],l=k?-b.elemHeight:"bottom"===b.my[1]?b.elemHeight:0,m="top"===b.at[1]?b.targetHeight:"bottom"===b.at[1]?-b.targetHeight:0,n=-2*b.offset[1];0>i?(p=a.top+l+m+n+b.collisionHeight-f-d,a.top+l+m+n>i&&(0>p||p<e(i))&&(a.top+=l+m+n)):j>0&&(o=a.top-b.collisionPosition.marginTop+l+m+n-g,a.top+l+m+n>j&&(o>0||e(o)<j)&&(a.top+=l+m+n))
}},flipfit:{left:function(){a.ui.position.flip.left.apply(this,arguments),a.ui.position.fit.left.apply(this,arguments)},top:function(){a.ui.position.flip.top.apply(this,arguments),a.ui.position.fit.top.apply(this,arguments)}}},function(){var b,c,d,e,f,g=document.getElementsByTagName("body")[0],h=document.createElement("div");b=document.createElement(g?"div":"body"),d={visibility:"hidden",width:0,height:0,border:0,margin:0,background:"none"},g&&a.extend(d,{position:"absolute",left:"-1000px",top:"-1000px"});for(f in d)b.style[f]=d[f];
b.appendChild(h),c=g||document.documentElement,c.insertBefore(b,c.firstChild),h.style.cssText="position: absolute; left: 10.7432222px;",e=a(h).offset().left,a.support.offsetFractions=e>10&&11>e,b.innerHTML="",c.removeChild(b)}()}(c)};d(),b.resolveWith(d)};FD50.module("ui/position",a)}(),function(){var a=function(a){var b=this,c=a,d=function(){!function(a,b,c){function j(a){var b={},d=/^jQuery\d+$/;return c.each(a.attributes,function(a,c){c.specified&&!d.test(c.name)&&(b[c.name]=c.value)}),b}function k(a,d){var e=this,f=c(e);
if(e.value==f.attr("placeholder")&&f.hasClass("placeholder"))if(f.data("placeholder-password")){if(f=f.hide().next().show().attr("id",f.removeAttr("id").data("placeholder-id")),a===!0)return f[0].value=d;f.focus()}else e.value="",f.removeClass("placeholder"),e==b.activeElement&&e.select()}function l(){var a,b=this,d=c(b),f=this.id;if(""==b.value){if("password"==b.type){if(!d.data("placeholder-textinput")){try{a=d.clone().attr({type:"text"})}catch(g){a=c("<input>").attr(c.extend(j(this),{type:"text"}))}a.removeAttr("name").data({"placeholder-password":!0,"placeholder-id":f}).bind("focus.placeholder",k),d.data({"placeholder-textinput":a,"placeholder-id":f}).before(a)
}d=d.removeAttr("id").hide().prev().attr("id",f).show()}d.addClass("placeholder"),d[0].value=d.attr("placeholder")}else d.removeClass("placeholder")}var h,i,d="placeholder"in b.createElement("input"),e="placeholder"in b.createElement("textarea"),f=c.fn,g=c.valHooks;d&&e?(i=f.placeholder=function(){return this},i.input=i.textarea=!0):(i=f.placeholder=function(){var a=this;return a.filter((d?"textarea":":input")+"[placeholder]").not(".placeholder").bind({"focus.placeholder":k,"blur.placeholder":l}).data("placeholder-enabled",!0).trigger("blur.placeholder"),a
},i.input=d,i.textarea=e,h={get:function(a){var b=c(a);return b.data("placeholder-enabled")&&b.hasClass("placeholder")?"":a.value},set:function(a,d){var e=c(a);return e.data("placeholder-enabled")?(""==d?(a.value=d,a!=b.activeElement&&l.call(a)):e.hasClass("placeholder")?k.call(a,!0,d)||(a.value=d):a.value=d,e):a.value=d}},d||(g.input=h),e||(g.textarea=h),c(function(){c(b).delegate("form","submit.placeholder",function(){var a=c(".placeholder",this).each(k);setTimeout(function(){a.each(l)},10)})}),c(a).bind("beforeunload.placeholder",function(){c(".placeholder").each(function(){this.value=""
})}))}(window,document,c)};d(),b.resolveWith(d)};FD50.module("placeholder",a)}(),function(){var a=function(a){var b=this,c=function(){!function(){"use strict";function b(a){return a.split("").reverse().join("")}function c(a,b){return a.substring(0,b.length)===b}function d(a,b){return a.slice(-1*b.length)===b}function e(a,b,c){if((a[b]||a[c])&&a[b]===a[c])throw new Error(b)}function f(a){return"number"==typeof a&&isFinite(a)}function g(a,b){var c=Math.pow(10,b);return(Math.round(a*c)/c).toFixed(b)}function h(a,c,d,e,h,i,j,k,l,m,n,o){var q,r,s,p=o,t="",u="";
return i&&(o=i(o)),f(o)?(a!==!1&&0===parseFloat(o.toFixed(a))&&(o=0),0>o&&(q=!0,o=Math.abs(o)),a!==!1&&(o=g(o,a)),o=o.toString(),-1!==o.indexOf(".")?(r=o.split("."),s=r[0],d&&(t=d+r[1])):s=o,c&&(s=b(s).match(/.{1,3}/g),s=b(s.join(b(c)))),q&&k&&(u+=k),e&&(u+=e),q&&l&&(u+=l),u+=s,u+=t,h&&(u+=h),m&&(u=m(u,p)),u):!1}function i(a,b,e,g,h,i,j,k,l,m,n,o){var q,r="";return n&&(o=n(o)),o&&"string"==typeof o?(k&&c(o,k)&&(o=o.replace(k,""),q=!0),g&&c(o,g)&&(o=o.replace(g,"")),l&&c(o,l)&&(o=o.replace(l,""),q=!0),h&&d(o,h)&&(o=o.slice(0,-1*h.length)),b&&(o=o.split(b).join("")),e&&(o=o.replace(e,".")),q&&(r+="-"),r+=o,r=r.replace(/[^0-9\.\-.]/g,""),""===r?!1:(r=Number(r),j&&(r=j(r)),f(r)?r:!1)):!1
}function j(b){var c,d,f,g={};for(c=0;c<a.length;c+=1)if(d=a[c],f=b[d],void 0===f)g[d]="negative"!==d||g.negativeBefore?"mark"===d&&"."!==g.thousand?".":!1:"-";else if("decimals"===d){if(!(f>=0&&8>f))throw new Error(d);g[d]=f}else if("encoder"===d||"decoder"===d||"edit"===d||"undo"===d){if("function"!=typeof f)throw new Error(d);g[d]=f}else{if("string"!=typeof f)throw new Error(d);g[d]=f}return e(g,"mark","thousand"),e(g,"prefix","negative"),e(g,"prefix","negativeBefore"),g}function k(b,c,d){var e,f=[];for(e=0;e<a.length;e+=1)f.push(b[a[e]]);
return f.push(d),c.apply("",f)}function l(a){return this instanceof l?("object"==typeof a&&(a=j(a),this.to=function(b){return k(a,h,b)},this.from=function(b){return k(a,i,b)}),void 0):new l(a)}var a=["decimals","thousand","mark","prefix","postfix","encoder","decoder","negativeBefore","negative","edit","undo"];window.wNumb=l}(),function(a){"use strict";function b(b){return b instanceof a||a.zepto&&a.zepto.isZ(b)}function c(b,c){return"string"==typeof b&&0===b.indexOf("-inline-")?(this.method=c||"html",this.target=this.el=a(b.replace("-inline-","")||"<div/>"),!0):void 0
}function d(b){if("string"==typeof b&&0!==b.indexOf("-")){this.method="val";var c=document.createElement("input");return c.name=b,c.type="hidden",this.target=this.el=a(c),!0}}function e(a){return"function"==typeof a?(this.target=!1,this.method=a,!0):void 0}function f(a,c){return b(a)&&!c?(a.is("input, select, textarea")?(this.method="val",this.target=a.on("change.liblink",this.changeHandler)):(this.target=a,this.method="html"),!0):void 0}function g(a,c){return b(a)&&("function"==typeof c||"string"==typeof c&&a[c])?(this.method=c,this.target=a,!0):void 0
}function i(b,c,d){var e=this,f=!1;if(this.changeHandler=function(b){var c=e.formatInstance.from(a(this).val());return c===!1||isNaN(c)?(a(this).val(e.lastSetValue),!1):(e.changeHandlerMethod.call("",b,c),void 0)},this.el=!1,this.formatInstance=d,a.each(h,function(a,d){return f=d.call(e,b,c),!f}),!f)throw new RangeError("(Link) Invalid Link.")}function j(a){this.items=[],this.elements=[],this.origin=a}function k(b,c,d,e){0===b&&(b=this.LinkDefaultFlag),this.linkAPI||(this.linkAPI={}),this.linkAPI[b]||(this.linkAPI[b]=new j(this));
var f=new i(c,d,e||this.LinkDefaultFormatter);f.target||(f.target=a(this)),f.changeHandlerMethod=this.LinkConfirm(b,f.el),this.linkAPI[b].push(f,f.el),this.LinkUpdate(b)}var h=[c,d,e,f,g];i.prototype.set=function(a){var b=Array.prototype.slice.call(arguments),c=b.slice(1);this.lastSetValue=this.formatInstance.to(a),c.unshift(this.lastSetValue),("function"==typeof this.method?this.method:this.target[this.method]).apply(this.target,c)},j.prototype.push=function(a,b){this.items.push(a),b&&this.elements.push(b)},j.prototype.reconfirm=function(a){var b;
for(b=0;b<this.elements.length;b+=1)this.origin.LinkConfirm(a,this.elements[b])},j.prototype.remove=function(){var b;for(b=0;b<this.items.length;b+=1)this.items[b].target.off(".liblink");for(b=0;b<this.elements.length;b+=1)this.elements[b].remove()},j.prototype.change=function(a){if(this.origin.LinkIsEmitting)return!1;this.origin.LinkIsEmitting=!0;var c,b=Array.prototype.slice.call(arguments,1);for(b.unshift(a),c=0;c<this.items.length;c+=1)this.items[c].set.apply(this.items[c],b);this.origin.LinkIsEmitting=!1
},a.fn.Link=function(b){var c=this;if(b===!1)return c.each(function(){this.linkAPI&&(a.map(this.linkAPI,function(a){a.remove()}),delete this.linkAPI)});if(void 0===b)b=0;else if("string"!=typeof b)throw new Error("Flag must be string.");return{to:function(a,d,e){return c.each(function(){k.call(this,b,a,d,e)})}}}}(a),function(a){"use strict";function b(b){return a.grep(b,function(c,d){return d===a.inArray(c,b)})}function c(a,b){return Math.round(a/b)*b}function d(a){return"number"==typeof a&&!isNaN(a)&&isFinite(a)
}function e(a){var b=Math.pow(10,7);return Number((Math.round(a*b)/b).toFixed(7))}function f(a,b,c){a.addClass(b),setTimeout(function(){a.removeClass(b)},c)}function g(a){return Math.max(Math.min(a,100),0)}function h(b){return a.isArray(b)?b:[b]}function i(a){var b=a.split(".");return b.length>1?b[1].length:0}function o(a,b){return 100/(b-a)}function p(a,b){return 100*b/(a[1]-a[0])}function q(a,b){return p(a,a[0]<0?b+Math.abs(a[0]):b-a[0])}function r(a,b){return b*(a[1]-a[0])/100+a[0]}function s(a,b){for(var c=1;a>=b[c];)c+=1;
return c}function t(a,b,c){if(c>=a.slice(-1)[0])return 100;var e,f,g,h,d=s(c,a);return e=a[d-1],f=a[d],g=b[d-1],h=b[d],g+q([e,f],c)/o(g,h)}function u(a,b,c){if(c>=100)return a.slice(-1)[0];var e,f,g,h,d=s(c,b);return e=a[d-1],f=a[d],g=b[d-1],h=b[d],r([e,f],(c-g)*o(g,h))}function v(a,b,d,e){if(100===e)return e;var g,h,f=s(e,a);return d?(g=a[f-1],h=a[f],e-g>(h-g)/2?h:g):b[f-1]?a[f-1]+c(e-a[f-1],b[f-1]):e}function w(a,b,c){var e;if("number"==typeof b&&(b=[b]),"[object Array]"!==Object.prototype.toString.call(b))throw new Error("noUiSlider: 'range' contains invalid value.");
if(e="min"===a?0:"max"===a?100:parseFloat(a),!d(e)||!d(b[0]))throw new Error("noUiSlider: 'range' value isn't numeric.");c.xPct.push(e),c.xVal.push(b[0]),e?c.xSteps.push(isNaN(b[1])?!1:b[1]):isNaN(b[1])||(c.xSteps[0]=b[1])}function x(a,b,c){return b?(c.xSteps[a]=p([c.xVal[a],c.xVal[a+1]],b)/o(c.xPct[a],c.xPct[a+1]),void 0):!0}function y(a,b,c,d){this.xPct=[],this.xVal=[],this.xSteps=[d||!1],this.xNumSteps=[!1],this.snap=b,this.direction=c;var e,f=[];for(e in a)a.hasOwnProperty(e)&&f.push([a[e],e]);for(f.sort(function(a,b){return a[0]-b[0]
}),e=0;e<f.length;e++)w(f[e][1],f[e][0],this);for(this.xNumSteps=this.xSteps.slice(0),e=0;e<this.xNumSteps.length;e++)x(e,this.xNumSteps[e],this)}function A(a,b){if(!d(b))throw new Error("noUiSlider: 'step' is not numeric.");a.singleStep=b}function B(b,c){if("object"!=typeof c||a.isArray(c))throw new Error("noUiSlider: 'range' is not an object.");if(void 0===c.min||void 0===c.max)throw new Error("noUiSlider: Missing 'min' or 'max' in 'range'.");b.spectrum=new y(c,b.snap,b.dir,b.singleStep)}function C(b,c){if(c=h(c),!a.isArray(c)||!c.length||c.length>2)throw new Error("noUiSlider: 'start' option is incorrect.");
b.handles=c.length,b.start=c}function D(a,b){if(a.snap=b,"boolean"!=typeof b)throw new Error("noUiSlider: 'snap' option must be a boolean.")}function E(a,b){if(a.animate=b,"boolean"!=typeof b)throw new Error("noUiSlider: 'animate' option must be a boolean.")}function F(a,b){if("lower"===b&&1===a.handles)a.connect=1;else if("upper"===b&&1===a.handles)a.connect=2;else if(b===!0&&2===a.handles)a.connect=3;else{if(b!==!1)throw new Error("noUiSlider: 'connect' option doesn't match handle count.");a.connect=0}}function G(a,b){switch(b){case"horizontal":a.ort=0;
break;case"vertical":a.ort=1;break;default:throw new Error("noUiSlider: 'orientation' option is invalid.")}}function H(a,b){if(!d(b))throw new Error("noUiSlider: 'margin' option must be numeric.");if(a.margin=a.spectrum.getMargin(b),!a.margin)throw new Error("noUiSlider: 'margin' option is only supported on linear sliders.")}function I(a,b){if(!d(b))throw new Error("noUiSlider: 'limit' option must be numeric.");if(a.limit=a.spectrum.getMargin(b),!a.limit)throw new Error("noUiSlider: 'limit' option is only supported on linear sliders.")
}function J(a,b){switch(b){case"ltr":a.dir=0;break;case"rtl":a.dir=1,a.connect=[0,2,1,3][a.connect];break;default:throw new Error("noUiSlider: 'direction' option was not recognized.")}}function K(a,b){if("string"!=typeof b)throw new Error("noUiSlider: 'behaviour' must be a string containing options.");var c=b.indexOf("tap")>=0,d=b.indexOf("drag")>=0,e=b.indexOf("fixed")>=0,f=b.indexOf("snap")>=0;a.events={tap:c||f,drag:d,fixed:e,snap:f}}function L(a,b){if(a.format=b,"function"==typeof b.to&&"function"==typeof b.from)return!0;
throw new Error("noUiSlider: 'format' requires 'to' and 'from' methods.")}function M(b){var d,c={margin:0,limit:0,animate:!0,format:z};return d={step:{r:!1,t:A},start:{r:!0,t:C},connect:{r:!0,t:F},direction:{r:!0,t:J},snap:{r:!1,t:D},animate:{r:!1,t:E},range:{r:!0,t:B},orientation:{r:!1,t:G},margin:{r:!1,t:H},limit:{r:!1,t:I},behaviour:{r:!0,t:K},format:{r:!1,t:L}},b=a.extend({connect:!1,direction:"ltr",behaviour:"tap",orientation:"horizontal"},b),a.each(d,function(a,d){if(void 0===b[a]){if(d.r)throw new Error("noUiSlider: '"+a+"' is required.");
return!0}d.t(c,b[a])}),c.style=c.ort?"top":"left",c}function N(a,b,c){var d=a+b[0],e=a+b[1];return c?(0>d&&(e+=Math.abs(d)),e>100&&(d-=e-100),[g(d),g(e)]):[d,e]}function O(a){a.preventDefault();var e,f,b=0===a.type.indexOf("touch"),c=0===a.type.indexOf("mouse"),d=0===a.type.indexOf("pointer"),g=a;return 0===a.type.indexOf("MSPointer")&&(d=!0),a.originalEvent&&(a=a.originalEvent),b&&(e=a.changedTouches[0].pageX,f=a.changedTouches[0].pageY),(c||d)&&(d||void 0!==window.pageXOffset||(window.pageXOffset=document.documentElement.scrollLeft,window.pageYOffset=document.documentElement.scrollTop),e=a.clientX+window.pageXOffset,f=a.clientY+window.pageYOffset),g.points=[e,f],g.cursor=c,g
}function P(b,c){var d=a("<div><div/></div>").addClass(n[2]),e=["-lower","-upper"];return b&&e.reverse(),d.children().addClass(n[3]+" "+n[3]+e[c]),d}function Q(a,b,c){switch(a){case 1:b.addClass(n[7]),c[0].addClass(n[6]);break;case 3:c[1].addClass(n[6]);case 2:c[0].addClass(n[7]);case 0:b.addClass(n[6])}}function R(a,b,c){var d,e=[];for(d=0;a>d;d+=1)e.push(P(b,d).appendTo(c));return e}function S(b,c,d){return d.addClass([n[0],n[8+b],n[4+c]].join(" ")),a("<div/>").appendTo(d).addClass(n[1])}function T(b,c,d){function t(){return o[["width","height"][c.ort]]()
}function u(a){var b,c=[j.val()];for(b=0;b<a.length;b+=1)j.trigger(a[b],c)}function v(a){return 1===a.length?a[0]:c.dir?a.reverse():a}function w(a){return function(b,c){j.val([a?null:c,a?c:null],!0)}}function x(b){var c=a.inArray(b,s);j[0].linkAPI&&j[0].linkAPI[b]&&j[0].linkAPI[b].change(r[c],p[c].children(),j)}function y(b,d){var e=a.inArray(b,s);return d&&d.appendTo(p[e].children()),c.dir&&c.handles>1&&(e=1===e?0:1),w(e)}function z(){var a,b;for(a=0;a<s.length;a+=1)this.linkAPI&&this.linkAPI[b=s[a]]&&this.linkAPI[b].reconfirm(b)
}function A(a,b,d,e){return a=a.replace(/\s/g,l+" ")+l,b.on(a,function(a){return j.attr("disabled")?!1:j.hasClass(n[14])?!1:(a=O(a),a.calcPoint=a.points[c.ort],d(a,e),void 0)})}function B(a,b){var d,c=b.handles||p,e=!1,f=100*(a.calcPoint-b.start)/t(),g=c[0][0]!==p[0][0]?1:0;d=N(f,b.positions,c.length>1),e=G(c[0],d[g],1===c.length),c.length>1&&(e=G(c[1],d[g?0:1],!1)||e),e&&u(["nouislide"])}function C(b){a("."+n[15]).removeClass(n[15]),b.cursor&&a("body").css("cursor","").off(l),e.off(l),j.removeClass(n[12]),u(["set","change"])
}function D(b,c){1===c.handles.length&&c.handles[0].children().addClass(n[15]),b.stopPropagation(),A(m.move,e,B,{start:b.calcPoint,handles:c.handles,positions:[k[0],k[p.length-1]]}),A(m.end,e,C,null),b.cursor&&(a("body").css("cursor",a(b.target).css("cursor")),p.length>1&&j.addClass(n[12]),a("body").on("selectstart"+l,!1))}function E(b){var g,d=b.calcPoint,e=0;b.stopPropagation(),a.each(p,function(){e+=this.offset()[c.style]}),e=e/2>d||1===p.length?0:1,d-=o.offset()[c.style],g=100*d/t(),c.events.snap||f(j,n[14],300),G(p[e],g),u(["nouislide","set","change"]),c.events.snap&&D(b,{handles:[p[e]]})
}function F(a){var b,c;if(!a.fixed)for(b=0;b<p.length;b+=1)A(m.start,p[b].children(),D,{handles:[p[b]]});a.tap&&A(m.start,o,E,{handles:p}),a.drag&&(c=o.find("."+n[7]).addClass(n[10]),a.fixed&&(c=c.add(o.children().not(c).children())),A(m.start,c,D,{handles:p}))}function G(a,b,d){var e=a[0]!==p[0][0]?1:0,f=k[0]+c.margin,h=k[1]-c.margin,i=k[0]+c.limit,j=k[1]-c.limit;return p.length>1&&(b=e?Math.max(b,f):Math.min(b,h)),d!==!1&&c.limit&&p.length>1&&(b=e?Math.min(b,i):Math.max(b,j)),b=q.getStep(b),b=g(parseFloat(b.toFixed(7))),b===k[e]?!1:(a.css(c.style,b+"%"),a.is(":first-child")&&a.toggleClass(n[17],b>50),k[e]=b,r[e]=q.fromStepping(b),x(s[e]),!0)
}function H(a,b){var d,e,f;for(c.limit&&(a+=1),d=0;a>d;d+=1)e=d%2,f=b[e],null!==f&&f!==!1&&("number"==typeof f&&(f=String(f)),f=c.format.from(f),(f===!1||isNaN(f)||G(p[e],q.toStepping(f),d===3-c.dir)===!1)&&x(s[e]))}function I(a){if(j[0].LinkIsEmitting)return this;var b,d=h(a);return c.dir&&c.handles>1&&d.reverse(),c.animate&&-1!==k[0]&&f(j,n[14],300),b=p.length>1?3:1,1===d.length&&(b=1),H(b,d),this}function J(){var a,b=[];for(a=0;a<c.handles;a+=1)b[a]=c.format.to(r[a]);return v(b)}function K(){return a(this).off(l).removeClass(n.join(" ")).empty(),delete this.LinkUpdate,delete this.LinkConfirm,delete this.LinkDefaultFormatter,delete this.LinkDefaultFlag,delete this.reappend,delete this.vGet,delete this.vSet,delete this.getCurrentStep,delete this.getInfo,delete this.destroy,d
}function L(){var b=a.map(k,function(a,b){var c=q.getApplicableStep(a),d=i(String(c[2])),e=r[b],f=100===a?null:c[2],g=Number((e-c[2]).toFixed(d)),h=0===a?null:g>=c[1]?c[2]:c[0]||!1;return[[h,f]]});return v(b)}function M(){return d}var o,p,e=a(d.document||document),j=a(b),k=[-1,-1],q=c.spectrum,r=[],s=["lower","upper"].slice(0,c.handles);if(c.dir&&s.reverse(),b.LinkUpdate=x,b.LinkConfirm=y,b.LinkDefaultFormatter=c.format,b.LinkDefaultFlag="lower",b.reappend=z,j.hasClass(n[0]))throw new Error("Slider was already initialized.");
o=S(c.dir,c.ort,j),p=R(c.handles,c.dir,o),Q(c.connect,j,p),F(c.events),b.vSet=I,b.vGet=J,b.destroy=K,b.getCurrentStep=L,b.getOriginalOptions=M,b.getInfo=function(){return[q,c.style,c.ort]},j.val(c.start)}function U(a){var b=M(a,this);return this.each(function(){T(this,b,a)})}function V(b){return this.each(function(){if(!this.hasOwnProperty("destroy"))return a(this).noUiSlider(b),void 0;var c=a(this).val(),d=this.destroy(),e=a.extend({},d,b);a(this).noUiSlider(e),this.reappend(),d.start===e.start&&a(this).val(c)
})}function W(){return this[0][arguments.length?"vSet":"vGet"].apply(this[0],arguments)}function X(b,c,d,e){if("range"===c||"steps"===c)return b.xVal;if("count"===c){var g,f=100/(d-1),h=0;for(d=[];(g=h++*f)<=100;)d.push(g);c="positions"}return"positions"===c?a.map(d,function(a){return b.fromStepping(e?b.getStep(a):a)}):"values"===c?e?a.map(d,function(a){return b.fromStepping(b.getStep(b.toStepping(a)))}):d:void 0}function Y(c,d,e,f){var g=c.direction,h={},i=c.xVal[0],j=c.xVal[c.xVal.length-1],k=!1,l=!1,m=0;return c.direction=0,f=b(f.slice().sort(function(a,b){return a-b
})),f[0]!==i&&(f.unshift(i),k=!0),f[f.length-1]!==j&&(f.push(j),l=!0),a.each(f,function(b){var g,i,j,p,q,r,s,t,u,v,n=f[b],o=f[b+1];if("steps"===e&&(g=c.xNumSteps[b]),g||(g=o-n),n!==!1&&void 0!==o)for(i=n;o>=i;i+=g){for(p=c.toStepping(i),q=p-m,t=q/d,u=Math.round(t),v=q/u,j=1;u>=j;j+=1)r=m+j*v,h[r.toFixed(5)]=["x",0];s=a.inArray(i,f)>-1?1:"steps"===e?2:0,!b&&k&&(s=0),i===o&&l||(h[p.toFixed(5)]=[i,s]),m=p}}),c.direction=g,h}function Z(b,c,d,e,f,g){function j(a){return["-normal","-large","-sub"][a]}function k(a,c,d){return'class="'+c+" "+c+"-"+h+" "+c+j(d[1],d[0])+'" style="'+b+": "+a+'%"'
}function l(a,b){d&&(a=100-a),b[1]=b[1]&&f?f(b[0],b[1]):b[1],i.append("<div "+k(a,"noUi-marker",b)+"></div>"),b[1]&&i.append("<div "+k(a,"noUi-value",b)+">"+g.to(b[0])+"</div>")}var h=["horizontal","vertical"][c],i=a("<div/>");return i.addClass("noUi-pips noUi-pips-"+h),a.each(e,l),i}var k=(a(document),a.fn.val),l=".nui",m=window.navigator.pointerEnabled?{start:"pointerdown",move:"pointermove",end:"pointerup"}:window.navigator.msPointerEnabled?{start:"MSPointerDown",move:"MSPointerMove",end:"MSPointerUp"}:{start:"mousedown touchstart",move:"mousemove touchmove",end:"mouseup touchend"},n=["noUi-target","noUi-base","noUi-origin","noUi-handle","noUi-horizontal","noUi-vertical","noUi-background","noUi-connect","noUi-ltr","noUi-rtl","noUi-dragable","","noUi-state-drag","","noUi-state-tap","noUi-active","","noUi-stacking"];
y.prototype.getMargin=function(a){return 2===this.xPct.length?p(this.xVal,a):!1},y.prototype.toStepping=function(a){return a=t(this.xVal,this.xPct,a),this.direction&&(a=100-a),a},y.prototype.fromStepping=function(a){return this.direction&&(a=100-a),e(u(this.xVal,this.xPct,a))},y.prototype.getStep=function(a){return this.direction&&(a=100-a),a=v(this.xPct,this.xSteps,this.snap,a),this.direction&&(a=100-a),a},y.prototype.getApplicableStep=function(a){var b=s(a,this.xPct),c=100===a?2:1;return[this.xNumSteps[b-2],this.xVal[b-c],this.xNumSteps[b-c]]
},y.prototype.convert=function(a){return this.getStep(this.toStepping(a))};var z={to:function(a){return a.toFixed(2)},from:Number};a.fn.val=function(b){function c(a){return a.hasClass(n[0])?W:k}if(!arguments.length){var d=a(this[0]);return c(d).call(d)}var e=a.isFunction(b);return this.each(function(d){var f=b,g=a(this);e&&(f=b.call(this,d,g.val())),c(g).call(g,f)})},a.fn.noUiSlider=function(a,b){switch(a){case"step":return this[0].getCurrentStep();case"options":return this[0].getOriginalOptions()}return(b?V:U).call(this,a)
},a.fn.noUiSlider_pips=function(b){var c=b.mode,d=b.density||1,e=b.filter||!1,f=b.values||!1,g=b.format||{to:Math.round},h=b.stepped||!1;return this.each(function(){var b=this.getInfo(),i=X(b[0],c,f,h),j=Y(b[0],d,c,i);return a(this).append(Z(b[1],b[2],b[0].direction,j,e,g))})}}(a)};c(),b.resolveWith(c)};FD50.module("nouislider",a)}(),function(){var a=function(a){var b=this,c=a;a.require().script("ui/core","ui/mouse","ui/widget").done(function(){var a=function(){!function(a){a.widget("ui.draggable",a.ui.mouse,{version:"1.10.4pre",widgetEventPrefix:"drag",options:{addClasses:!0,appendTo:"parent",axis:!1,connectToSortable:!1,containment:!1,cursor:"auto",cursorAt:!1,grid:!1,handle:!1,helper:"original",iframeFix:!1,opacity:!1,refreshPositions:!1,revert:!1,revertDuration:500,scope:"default",scroll:!0,scrollSensitivity:20,scrollSpeed:20,snap:!1,snapMode:"both",snapTolerance:20,stack:!1,zIndex:!1,drag:null,start:null,stop:null},_create:function(){"original"!==this.options.helper||/^(?:r|a|f)/.test(this.element.css("position"))||(this.element[0].style.position="relative"),this.options.addClasses&&this.element.addClass("ui-draggable"),this.options.disabled&&this.element.addClass("ui-draggable-disabled"),this._mouseInit()
},_destroy:function(){this.element.removeClass("ui-draggable ui-draggable-dragging ui-draggable-disabled"),this._mouseDestroy()},_mouseCapture:function(b){var c=this.options;return this.helper||c.disabled||a(b.target).closest(".ui-resizable-handle").length>0?!1:(this.handle=this._getHandle(b),this.handle?(a(c.iframeFix===!0?"iframe":c.iframeFix).each(function(){a("<div class='ui-draggable-iframeFix' style='background: #fff;'></div>").css({width:this.offsetWidth+"px",height:this.offsetHeight+"px",position:"absolute",opacity:"0.001",zIndex:1e3}).css(a(this).offset()).appendTo("body")
}),!0):!1)},_mouseStart:function(b){var c=this.options;return this.helper=this._createHelper(b),this.helper.addClass("ui-draggable-dragging"),this._cacheHelperProportions(),a.ui.ddmanager&&(a.ui.ddmanager.current=this),this._cacheMargins(),this.cssPosition=this.helper.css("position"),this.scrollParent=this.helper.scrollParent(),this.offsetParent=this.helper.offsetParent(),this.offsetParentCssPosition=this.offsetParent.css("position"),this.offset=this.positionAbs=this.element.offset(),this.offset={top:this.offset.top-this.margins.top,left:this.offset.left-this.margins.left},this.offset.scroll=!1,a.extend(this.offset,{click:{left:b.pageX-this.offset.left,top:b.pageY-this.offset.top},parent:this._getParentOffset(),relative:this._getRelativeOffset()}),this.originalPosition=this.position=this._generatePosition(b),this.originalPageX=b.pageX,this.originalPageY=b.pageY,c.cursorAt&&this._adjustOffsetFromHelper(c.cursorAt),this._setContainment(),this._trigger("start",b)===!1?(this._clear(),!1):(this._cacheHelperProportions(),a.ui.ddmanager&&!c.dropBehaviour&&a.ui.ddmanager.prepareOffsets(this,b),this._mouseDrag(b,!0),a.ui.ddmanager&&a.ui.ddmanager.dragStart(this,b),!0)
},_mouseDrag:function(b,c){if("fixed"===this.offsetParentCssPosition&&(this.offset.parent=this._getParentOffset()),this.position=this._generatePosition(b),this.positionAbs=this._convertPositionTo("absolute"),!c){var d=this._uiHash();if(this._trigger("drag",b,d)===!1)return this._mouseUp({}),!1;this.position=d.position}return this.options.axis&&"y"===this.options.axis||(this.helper[0].style.left=this.position.left+"px"),this.options.axis&&"x"===this.options.axis||(this.helper[0].style.top=this.position.top+"px"),a.ui.ddmanager&&a.ui.ddmanager.drag(this,b),!1
},_mouseStop:function(b){var c=this,d=!1;return a.ui.ddmanager&&!this.options.dropBehaviour&&(d=a.ui.ddmanager.drop(this,b)),this.dropped&&(d=this.dropped,this.dropped=!1),"original"!==this.options.helper||a.contains(this.element[0].ownerDocument,this.element[0])?("invalid"===this.options.revert&&!d||"valid"===this.options.revert&&d||this.options.revert===!0||a.isFunction(this.options.revert)&&this.options.revert.call(this.element,d)?a(this.helper).animate(this.originalPosition,parseInt(this.options.revertDuration,10),function(){c._trigger("stop",b)!==!1&&c._clear()
}):this._trigger("stop",b)!==!1&&this._clear(),!1):!1},_mouseUp:function(b){return a("div.ui-draggable-iframeFix").each(function(){this.parentNode.removeChild(this)}),a.ui.ddmanager&&a.ui.ddmanager.dragStop(this,b),a.ui.mouse.prototype._mouseUp.call(this,b)},cancel:function(){return this.helper.is(".ui-draggable-dragging")?this._mouseUp({}):this._clear(),this},_getHandle:function(b){return this.options.handle?!!a(b.target).closest(this.element.find(this.options.handle)).length:!0},_createHelper:function(b){var c=this.options,d=a.isFunction(c.helper)?a(c.helper.apply(this.element[0],[b])):"clone"===c.helper?this.element.clone().removeAttr("id"):this.element;
return d.parents("body").length||d.appendTo("parent"===c.appendTo?this.element[0].parentNode:c.appendTo),d[0]===this.element[0]||/(fixed|absolute)/.test(d.css("position"))||d.css("position","absolute"),d},_adjustOffsetFromHelper:function(b){"string"==typeof b&&(b=b.split(" ")),a.isArray(b)&&(b={left:+b[0],top:+b[1]||0}),"left"in b&&(this.offset.click.left=b.left+this.margins.left),"right"in b&&(this.offset.click.left=this.helperProportions.width-b.right+this.margins.left),"top"in b&&(this.offset.click.top=b.top+this.margins.top),"bottom"in b&&(this.offset.click.top=this.helperProportions.height-b.bottom+this.margins.top)
},_getParentOffset:function(){var b=this.offsetParent.offset();return"absolute"===this.cssPosition&&this.scrollParent[0]!==document&&a.contains(this.scrollParent[0],this.offsetParent[0])&&(b.left+=this.scrollParent.scrollLeft(),b.top+=this.scrollParent.scrollTop()),(this.offsetParent[0]===document.body||this.offsetParent[0].tagName&&"html"===this.offsetParent[0].tagName.toLowerCase()&&a.ui.ie)&&(b={top:0,left:0}),{top:b.top+(parseInt(this.offsetParent.css("borderTopWidth"),10)||0),left:b.left+(parseInt(this.offsetParent.css("borderLeftWidth"),10)||0)}
},_getRelativeOffset:function(){if("relative"===this.cssPosition){var a=this.element.position();return{top:a.top-(parseInt(this.helper.css("top"),10)||0)+this.scrollParent.scrollTop(),left:a.left-(parseInt(this.helper.css("left"),10)||0)+this.scrollParent.scrollLeft()}}return{top:0,left:0}},_cacheMargins:function(){this.margins={left:parseInt(this.element.css("marginLeft"),10)||0,top:parseInt(this.element.css("marginTop"),10)||0,right:parseInt(this.element.css("marginRight"),10)||0,bottom:parseInt(this.element.css("marginBottom"),10)||0}
},_cacheHelperProportions:function(){this.helperProportions={width:this.helper.outerWidth(),height:this.helper.outerHeight()}},_setContainment:function(){var b,c,d,e=this.options;return e.containment?"window"===e.containment?(this.containment=[a(window).scrollLeft()-this.offset.relative.left-this.offset.parent.left,a(window).scrollTop()-this.offset.relative.top-this.offset.parent.top,a(window).scrollLeft()+a(window).width()-this.helperProportions.width-this.margins.left,a(window).scrollTop()+(a(window).height()||document.body.parentNode.scrollHeight)-this.helperProportions.height-this.margins.top],void 0):"document"===e.containment?(this.containment=[0,0,a(document).width()-this.helperProportions.width-this.margins.left,(a(document).height()||document.body.parentNode.scrollHeight)-this.helperProportions.height-this.margins.top],void 0):e.containment.constructor===Array?(this.containment=e.containment,void 0):("parent"===e.containment&&(e.containment=this.helper[0].parentNode),c=a(e.containment),d=c[0],d&&(b="hidden"!==c.css("overflow"),this.containment=[(parseInt(c.css("borderLeftWidth"),10)||0)+(parseInt(c.css("paddingLeft"),10)||0),(parseInt(c.css("borderTopWidth"),10)||0)+(parseInt(c.css("paddingTop"),10)||0),(b?Math.max(d.scrollWidth,d.offsetWidth):d.offsetWidth)-(parseInt(c.css("borderRightWidth"),10)||0)-(parseInt(c.css("paddingRight"),10)||0)-this.helperProportions.width-this.margins.left-this.margins.right,(b?Math.max(d.scrollHeight,d.offsetHeight):d.offsetHeight)-(parseInt(c.css("borderBottomWidth"),10)||0)-(parseInt(c.css("paddingBottom"),10)||0)-this.helperProportions.height-this.margins.top-this.margins.bottom],this.relative_container=c),void 0):(this.containment=null,void 0)
},_convertPositionTo:function(b,c){c||(c=this.position);var d="absolute"===b?1:-1,e="absolute"!==this.cssPosition||this.scrollParent[0]!==document&&a.contains(this.scrollParent[0],this.offsetParent[0])?this.scrollParent:this.offsetParent;return this.offset.scroll||(this.offset.scroll={top:e.scrollTop(),left:e.scrollLeft()}),{top:c.top+this.offset.relative.top*d+this.offset.parent.top*d-("fixed"===this.cssPosition?-this.scrollParent.scrollTop():this.offset.scroll.top)*d,left:c.left+this.offset.relative.left*d+this.offset.parent.left*d-("fixed"===this.cssPosition?-this.scrollParent.scrollLeft():this.offset.scroll.left)*d}
},_generatePosition:function(b){var c,d,e,f,g=this.options,h="absolute"!==this.cssPosition||this.scrollParent[0]!==document&&a.contains(this.scrollParent[0],this.offsetParent[0])?this.scrollParent:this.offsetParent,i=b.pageX,j=b.pageY;return this.offset.scroll||(this.offset.scroll={top:h.scrollTop(),left:h.scrollLeft()}),this.originalPosition&&(this.containment&&(this.relative_container?(d=this.relative_container.offset(),c=[this.containment[0]+d.left,this.containment[1]+d.top,this.containment[2]+d.left,this.containment[3]+d.top]):c=this.containment,b.pageX-this.offset.click.left<c[0]&&(i=c[0]+this.offset.click.left),b.pageY-this.offset.click.top<c[1]&&(j=c[1]+this.offset.click.top),b.pageX-this.offset.click.left>c[2]&&(i=c[2]+this.offset.click.left),b.pageY-this.offset.click.top>c[3]&&(j=c[3]+this.offset.click.top)),g.grid&&(e=g.grid[1]?this.originalPageY+Math.round((j-this.originalPageY)/g.grid[1])*g.grid[1]:this.originalPageY,j=c?e-this.offset.click.top>=c[1]||e-this.offset.click.top>c[3]?e:e-this.offset.click.top>=c[1]?e-g.grid[1]:e+g.grid[1]:e,f=g.grid[0]?this.originalPageX+Math.round((i-this.originalPageX)/g.grid[0])*g.grid[0]:this.originalPageX,i=c?f-this.offset.click.left>=c[0]||f-this.offset.click.left>c[2]?f:f-this.offset.click.left>=c[0]?f-g.grid[0]:f+g.grid[0]:f)),{top:j-this.offset.click.top-this.offset.relative.top-this.offset.parent.top+("fixed"===this.cssPosition?-this.scrollParent.scrollTop():this.offset.scroll.top),left:i-this.offset.click.left-this.offset.relative.left-this.offset.parent.left+("fixed"===this.cssPosition?-this.scrollParent.scrollLeft():this.offset.scroll.left)}
},_clear:function(){this.helper.removeClass("ui-draggable-dragging"),this.helper[0]===this.element[0]||this.cancelHelperRemoval||this.helper.remove(),this.helper=null,this.cancelHelperRemoval=!1},_trigger:function(b,c,d){return d=d||this._uiHash(),a.ui.plugin.call(this,b,[c,d]),"drag"===b&&(this.positionAbs=this._convertPositionTo("absolute")),a.Widget.prototype._trigger.call(this,b,c,d)},plugins:{},_uiHash:function(){return{helper:this.helper,position:this.position,originalPosition:this.originalPosition,offset:this.positionAbs}
}}),a.ui.plugin.add("draggable","connectToSortable",{start:function(b,c){var d=a(this).data("ui-draggable"),e=d.options,f=a.extend({},c,{item:d.element});d.sortables=[],a(e.connectToSortable).each(function(){var c=a.data(this,"ui-sortable");c&&!c.options.disabled&&(d.sortables.push({instance:c,shouldRevert:c.options.revert}),c.refreshPositions(),c._trigger("activate",b,f))})},stop:function(b,c){var d=a(this).data("ui-draggable"),e=a.extend({},c,{item:d.element});a.each(d.sortables,function(){this.instance.isOver?(this.instance.isOver=0,d.cancelHelperRemoval=!0,this.instance.cancelHelperRemoval=!1,this.shouldRevert&&(this.instance.options.revert=this.shouldRevert),this.instance._mouseStop(b),this.instance.options.helper=this.instance.options._helper,"original"===d.options.helper&&this.instance.currentItem.css({top:"auto",left:"auto"})):(this.instance.cancelHelperRemoval=!1,this.instance._trigger("deactivate",b,e))
})},drag:function(b,c){var d=a(this).data("ui-draggable"),e=this;a.each(d.sortables,function(){var f=!1,g=this;this.instance.positionAbs=d.positionAbs,this.instance.helperProportions=d.helperProportions,this.instance.offset.click=d.offset.click,this.instance._intersectsWith(this.instance.containerCache)&&(f=!0,a.each(d.sortables,function(){return this.instance.positionAbs=d.positionAbs,this.instance.helperProportions=d.helperProportions,this.instance.offset.click=d.offset.click,this!==g&&this.instance._intersectsWith(this.instance.containerCache)&&a.contains(g.instance.element[0],this.instance.element[0])&&(f=!1),f
})),f?(this.instance.isOver||(this.instance.isOver=1,this.instance.currentItem=a(e).clone().removeAttr("id").appendTo(this.instance.element).data("ui-sortable-item",!0),this.instance.options._helper=this.instance.options.helper,this.instance.options.helper=function(){return c.helper[0]},b.target=this.instance.currentItem[0],this.instance._mouseCapture(b,!0),this.instance._mouseStart(b,!0,!0),this.instance.offset.click.top=d.offset.click.top,this.instance.offset.click.left=d.offset.click.left,this.instance.offset.parent.left-=d.offset.parent.left-this.instance.offset.parent.left,this.instance.offset.parent.top-=d.offset.parent.top-this.instance.offset.parent.top,d._trigger("toSortable",b),d.dropped=this.instance.element,d.currentItem=d.element,this.instance.fromOutside=d),this.instance.currentItem&&this.instance._mouseDrag(b)):this.instance.isOver&&(this.instance.isOver=0,this.instance.cancelHelperRemoval=!0,this.instance.options.revert=!1,this.instance._trigger("out",b,this.instance._uiHash(this.instance)),this.instance._mouseStop(b,!0),this.instance.options.helper=this.instance.options._helper,this.instance.currentItem.remove(),this.instance.placeholder&&this.instance.placeholder.remove(),d._trigger("fromSortable",b),d.dropped=!1)
})}}),a.ui.plugin.add("draggable","cursor",{start:function(){var b=a("body"),c=a(this).data("ui-draggable").options;b.css("cursor")&&(c._cursor=b.css("cursor")),b.css("cursor",c.cursor)},stop:function(){var b=a(this).data("ui-draggable").options;b._cursor&&a("body").css("cursor",b._cursor)}}),a.ui.plugin.add("draggable","opacity",{start:function(b,c){var d=a(c.helper),e=a(this).data("ui-draggable").options;d.css("opacity")&&(e._opacity=d.css("opacity")),d.css("opacity",e.opacity)},stop:function(b,c){var d=a(this).data("ui-draggable").options;
d._opacity&&a(c.helper).css("opacity",d._opacity)}}),a.ui.plugin.add("draggable","scroll",{start:function(){var b=a(this).data("ui-draggable");b.scrollParent[0]!==document&&"HTML"!==b.scrollParent[0].tagName&&(b.overflowOffset=b.scrollParent.offset())},drag:function(b){var c=a(this).data("ui-draggable"),d=c.options,e=!1;c.scrollParent[0]!==document&&"HTML"!==c.scrollParent[0].tagName?(d.axis&&"x"===d.axis||(c.overflowOffset.top+c.scrollParent[0].offsetHeight-b.pageY<d.scrollSensitivity?c.scrollParent[0].scrollTop=e=c.scrollParent[0].scrollTop+d.scrollSpeed:b.pageY-c.overflowOffset.top<d.scrollSensitivity&&(c.scrollParent[0].scrollTop=e=c.scrollParent[0].scrollTop-d.scrollSpeed)),d.axis&&"y"===d.axis||(c.overflowOffset.left+c.scrollParent[0].offsetWidth-b.pageX<d.scrollSensitivity?c.scrollParent[0].scrollLeft=e=c.scrollParent[0].scrollLeft+d.scrollSpeed:b.pageX-c.overflowOffset.left<d.scrollSensitivity&&(c.scrollParent[0].scrollLeft=e=c.scrollParent[0].scrollLeft-d.scrollSpeed))):(d.axis&&"x"===d.axis||(b.pageY-a(document).scrollTop()<d.scrollSensitivity?e=a(document).scrollTop(a(document).scrollTop()-d.scrollSpeed):a(window).height()-(b.pageY-a(document).scrollTop())<d.scrollSensitivity&&(e=a(document).scrollTop(a(document).scrollTop()+d.scrollSpeed))),d.axis&&"y"===d.axis||(b.pageX-a(document).scrollLeft()<d.scrollSensitivity?e=a(document).scrollLeft(a(document).scrollLeft()-d.scrollSpeed):a(window).width()-(b.pageX-a(document).scrollLeft())<d.scrollSensitivity&&(e=a(document).scrollLeft(a(document).scrollLeft()+d.scrollSpeed)))),e!==!1&&a.ui.ddmanager&&!d.dropBehaviour&&a.ui.ddmanager.prepareOffsets(c,b)
}}),a.ui.plugin.add("draggable","snap",{start:function(){var b=a(this).data("ui-draggable"),c=b.options;b.snapElements=[],a(c.snap.constructor!==String?c.snap.items||":data(ui-draggable)":c.snap).each(function(){var c=a(this),d=c.offset();this!==b.element[0]&&b.snapElements.push({item:this,width:c.outerWidth(),height:c.outerHeight(),top:d.top,left:d.left})})},drag:function(b,c){var d,e,f,g,h,i,j,k,l,m,n=a(this).data("ui-draggable"),o=n.options,p=o.snapTolerance,q=c.offset.left,r=q+n.helperProportions.width,s=c.offset.top,t=s+n.helperProportions.height;
for(l=n.snapElements.length-1;l>=0;l--)h=n.snapElements[l].left,i=h+n.snapElements[l].width,j=n.snapElements[l].top,k=j+n.snapElements[l].height,h-p>r||q>i+p||j-p>t||s>k+p||!a.contains(n.snapElements[l].item.ownerDocument,n.snapElements[l].item)?(n.snapElements[l].snapping&&n.options.snap.release&&n.options.snap.release.call(n.element,b,a.extend(n._uiHash(),{snapItem:n.snapElements[l].item})),n.snapElements[l].snapping=!1):("inner"!==o.snapMode&&(d=Math.abs(j-t)<=p,e=Math.abs(k-s)<=p,f=Math.abs(h-r)<=p,g=Math.abs(i-q)<=p,d&&(c.position.top=n._convertPositionTo("relative",{top:j-n.helperProportions.height,left:0}).top-n.margins.top),e&&(c.position.top=n._convertPositionTo("relative",{top:k,left:0}).top-n.margins.top),f&&(c.position.left=n._convertPositionTo("relative",{top:0,left:h-n.helperProportions.width}).left-n.margins.left),g&&(c.position.left=n._convertPositionTo("relative",{top:0,left:i}).left-n.margins.left)),m=d||e||f||g,"outer"!==o.snapMode&&(d=Math.abs(j-s)<=p,e=Math.abs(k-t)<=p,f=Math.abs(h-q)<=p,g=Math.abs(i-r)<=p,d&&(c.position.top=n._convertPositionTo("relative",{top:j,left:0}).top-n.margins.top),e&&(c.position.top=n._convertPositionTo("relative",{top:k-n.helperProportions.height,left:0}).top-n.margins.top),f&&(c.position.left=n._convertPositionTo("relative",{top:0,left:h}).left-n.margins.left),g&&(c.position.left=n._convertPositionTo("relative",{top:0,left:i-n.helperProportions.width}).left-n.margins.left)),!n.snapElements[l].snapping&&(d||e||f||g||m)&&n.options.snap.snap&&n.options.snap.snap.call(n.element,b,a.extend(n._uiHash(),{snapItem:n.snapElements[l].item})),n.snapElements[l].snapping=d||e||f||g||m)
}}),a.ui.plugin.add("draggable","stack",{start:function(){var b,c=this.data("ui-draggable").options,d=a.makeArray(a(c.stack)).sort(function(b,c){return(parseInt(a(b).css("zIndex"),10)||0)-(parseInt(a(c).css("zIndex"),10)||0)});d.length&&(b=parseInt(a(d[0]).css("zIndex"),10)||0,a(d).each(function(c){a(this).css("zIndex",b+c)}),this.css("zIndex",b+d.length))}}),a.ui.plugin.add("draggable","zIndex",{start:function(b,c){var d=a(c.helper),e=a(this).data("ui-draggable").options;d.css("zIndex")&&(e._zIndex=d.css("zIndex")),d.css("zIndex",e.zIndex)
},stop:function(b,c){var d=a(this).data("ui-draggable").options;d._zIndex&&a(c.helper).css("zIndex",d._zIndex)}})}(c)};a(),b.resolveWith(a)})};FD50.module("ui/draggable",a)}(),function(){var a=function(a){var b=this,c=a,d=function(){!function(a,b){function e(b,c){var d,e,g,h=b.nodeName.toLowerCase();return"area"===h?(d=b.parentNode,e=d.name,b.href&&e&&"map"===d.nodeName.toLowerCase()?(g=a("img[usemap=#"+e+"]")[0],!!g&&f(g)):!1):(/input|select|textarea|button|object/.test(h)?!b.disabled:"a"===h?b.href||c:c)&&f(b)
}function f(b){return a.expr.filters.visible(b)&&!a(b).parents().addBack().filter(function(){return"hidden"===a.css(this,"visibility")}).length}var c=0,d=/^ui-id-\d+$/;a.ui=a.ui||{},a.extend(a.ui,{version:"1.10.4pre",keyCode:{BACKSPACE:8,COMMA:188,DELETE:46,DOWN:40,END:35,ENTER:13,ESCAPE:27,HOME:36,LEFT:37,NUMPAD_ADD:107,NUMPAD_DECIMAL:110,NUMPAD_DIVIDE:111,NUMPAD_ENTER:108,NUMPAD_MULTIPLY:106,NUMPAD_SUBTRACT:109,PAGE_DOWN:34,PAGE_UP:33,PERIOD:190,RIGHT:39,SPACE:32,TAB:9,UP:38}}),a.fn.extend({focus:function(b){return function(c,d){return"number"==typeof c?this.each(function(){var b=this;
setTimeout(function(){a(b).focus(),d&&d.call(b)},c)}):b.apply(this,arguments)}}(a.fn.focus),scrollParent:function(){var b;return b=a.ui.ie&&/(static|relative)/.test(this.css("position"))||/absolute/.test(this.css("position"))?this.parents().filter(function(){return/(relative|absolute|fixed)/.test(a.css(this,"position"))&&/(auto|scroll)/.test(a.css(this,"overflow")+a.css(this,"overflow-y")+a.css(this,"overflow-x"))}).eq(0):this.parents().filter(function(){return/(auto|scroll)/.test(a.css(this,"overflow")+a.css(this,"overflow-y")+a.css(this,"overflow-x"))
}).eq(0),/fixed/.test(this.css("position"))||!b.length?a(document):b},zIndex:function(c){if(c!==b)return this.css("zIndex",c);if(this.length)for(var e,f,d=a(this[0]);d.length&&d[0]!==document;){if(e=d.css("position"),("absolute"===e||"relative"===e||"fixed"===e)&&(f=parseInt(d.css("zIndex"),10),!isNaN(f)&&0!==f))return f;d=d.parent()}return 0},uniqueId:function(){return this.each(function(){this.id||(this.id="ui-id-"+ ++c)})},removeUniqueId:function(){return this.each(function(){d.test(this.id)&&a(this).removeAttr("id")
})}}),a.extend(a.expr[":"],{data:a.expr.createPseudo?a.expr.createPseudo(function(b){return function(c){return!!a.data(c,b)}}):function(b,c,d){return!!a.data(b,d[3])},focusable:function(b){return e(b,!isNaN(a.attr(b,"tabindex")))},tabbable:function(b){var c=a.attr(b,"tabindex"),d=isNaN(c);return(d||c>=0)&&e(b,!d)}}),a("<a>").outerWidth(1).jquery||a.each(["Width","Height"],function(c,d){function h(b,c,d,f){return a.each(e,function(){c-=parseFloat(a.css(b,"padding"+this))||0,d&&(c-=parseFloat(a.css(b,"border"+this+"Width"))||0),f&&(c-=parseFloat(a.css(b,"margin"+this))||0)
}),c}var e="Width"===d?["Left","Right"]:["Top","Bottom"],f=d.toLowerCase(),g={innerWidth:a.fn.innerWidth,innerHeight:a.fn.innerHeight,outerWidth:a.fn.outerWidth,outerHeight:a.fn.outerHeight};a.fn["inner"+d]=function(c){return c===b?g["inner"+d].call(this):this.each(function(){a(this).css(f,h(this,c)+"px")})},a.fn["outer"+d]=function(b,c){return"number"!=typeof b?g["outer"+d].call(this,b):this.each(function(){a(this).css(f,h(this,b,!0,c)+"px")})}}),a.fn.addBack||(a.fn.addBack=function(a){return this.add(null==a?this.prevObject:this.prevObject.filter(a))
}),a("<a>").data("a-b","a").removeData("a-b").data("a-b")&&(a.fn.removeData=function(b){return function(c){return arguments.length?b.call(this,a.camelCase(c)):b.call(this)}}(a.fn.removeData)),a.ui.ie=!!/msie [\w.]+/.exec(navigator.userAgent.toLowerCase()),a.support.selectstart="onselectstart"in document.createElement("div"),a.fn.extend({disableSelection:function(){return this.bind((a.support.selectstart?"selectstart":"mousedown")+".ui-disableSelection",function(a){a.preventDefault()})},enableSelection:function(){return this.unbind(".ui-disableSelection")
}}),a.extend(a.ui,{plugin:{add:function(b,c,d){var e,f=a.ui[b].prototype;for(e in d)f.plugins[e]=f.plugins[e]||[],f.plugins[e].push([c,d[e]])},call:function(a,b,c){var d,e=a.plugins[b];if(e&&a.element[0].parentNode&&11!==a.element[0].parentNode.nodeType)for(d=0;d<e.length;d++)a.options[e[d][0]]&&e[d][1].apply(a.element,c)}},hasScroll:function(b,c){if("hidden"===a(b).css("overflow"))return!1;var d=c&&"left"===c?"scrollLeft":"scrollTop",e=!1;return b[d]>0?!0:(b[d]=1,e=b[d]>0,b[d]=0,e)}}),a(function(){a("body > [id=fd].ui").length>0||a(document.createElement("div")).attr("id","fd").addClass("ui").css({position:"absolute",top:0,left:0,overflow:"visible",width:0,height:0,zIndex:10002}).appendTo("body")
})}(c)};d(),b.resolveWith(d)};FD50.module("ui/core",a)}(),function(){var a=function(a){var b=this,c=a;a.require().script("ui/widget").done(function(){var a=function(){!function(a){var c=!1;a(document).mouseup(function(){c=!1}),a.widget("ui.mouse",{version:"1.10.4pre",options:{cancel:"input,textarea,button,select,option",distance:1,delay:0},_mouseInit:function(){var b=this;this.element.bind("mousedown."+this.widgetName,function(a,c){return b._mouseDown(c||a)}).bind("click."+this.widgetName,function(c){return!0===a.data(c.target,b.widgetName+".preventClickEvent")?(a.removeData(c.target,b.widgetName+".preventClickEvent"),c.stopImmediatePropagation(),!1):void 0
}),this.started=!1},_mouseDestroy:function(){this.element.unbind("."+this.widgetName),this._mouseMoveDelegate&&a(document).unbind("mousemove."+this.widgetName,this._mouseMoveDelegate).unbind("mouseup."+this.widgetName,this._mouseUpDelegate)},_mouseDown:function(b){if(!c){this._mouseStarted&&this._mouseUp(b),this._mouseDownEvent=b;var d=this,e=1===b.which,f="string"==typeof this.options.cancel&&b.target.nodeName?a(b.target).closest(this.options.cancel).length:!1;return e&&!f&&this._mouseCapture(b)?(this.mouseDelayMet=!this.options.delay,this.mouseDelayMet||(this._mouseDelayTimer=setTimeout(function(){d.mouseDelayMet=!0
},this.options.delay)),this._mouseDistanceMet(b)&&this._mouseDelayMet(b)&&(this._mouseStarted=this._mouseStart(b)!==!1,!this._mouseStarted)?(b.preventDefault(),!0):(!0===a.data(b.target,this.widgetName+".preventClickEvent")&&a.removeData(b.target,this.widgetName+".preventClickEvent"),this._mouseMoveDelegate=function(a){return d._mouseMove(a)},this._mouseUpDelegate=function(a){return d._mouseUp(a)},a(document).bind("mousemove."+this.widgetName,this._mouseMoveDelegate).bind("mouseup."+this.widgetName,this._mouseUpDelegate),b.preventDefault(),c=!0,!0)):!0
}},_mouseMove:function(b){return a.ui.ie&&(!document.documentMode||document.documentMode<9)&&!b.button?this._mouseUp(b):this._mouseStarted?(this._mouseDrag(b),b.preventDefault()):(this._mouseDistanceMet(b)&&this._mouseDelayMet(b)&&(this._mouseStarted=this._mouseStart(this._mouseDownEvent,b)!==!1,this._mouseStarted?this._mouseDrag(b):this._mouseUp(b)),!this._mouseStarted)},_mouseUp:function(b){return a(document).unbind("mousemove."+this.widgetName,this._mouseMoveDelegate).unbind("mouseup."+this.widgetName,this._mouseUpDelegate),this._mouseStarted&&(this._mouseStarted=!1,b.target===this._mouseDownEvent.target&&a.data(b.target,this.widgetName+".preventClickEvent",!0),this._mouseStop(b)),!1
},_mouseDistanceMet:function(a){return Math.max(Math.abs(this._mouseDownEvent.pageX-a.pageX),Math.abs(this._mouseDownEvent.pageY-a.pageY))>=this.options.distance},_mouseDelayMet:function(){return this.mouseDelayMet},_mouseStart:function(){},_mouseDrag:function(){},_mouseStop:function(){},_mouseCapture:function(){return!0}})}(c)};a(),b.resolveWith(a)})};FD50.module("ui/mouse",a)}(),function(){var a=function(a){var b=this,c=a,d=function(){!function(a,b){var c=0,d=Array.prototype.slice,e=a.cleanData;a.cleanData=function(b){for(var d,c=0;null!=(d=b[c]);c++)try{a(d).triggerHandler("remove")
}catch(f){}e(b)},a.widget=function(b,c,d){var e,f,g,h,i={},j=b.split(".")[0];b=b.split(".")[1],e=j+"-"+b,d||(d=c,c=a.Widget),a.expr[":"][e.toLowerCase()]=function(b){return!!a.data(b,e)},a[j]=a[j]||{},f=a[j][b],g=a[j][b]=function(a,b){return this._createWidget?(arguments.length&&this._createWidget(a,b),void 0):new g(a,b)},a.extend(g,f,{version:d.version,_proto:a.extend({},d),_childConstructors:[]}),h=new c,h.options=a.widget.extend({},h.options),a.each(d,function(b,d){return a.isFunction(d)?(i[b]=function(){var a=function(){return c.prototype[b].apply(this,arguments)
},e=function(a){return c.prototype[b].apply(this,a)};return function(){var f,b=this._super,c=this._superApply;return this._super=a,this._superApply=e,f=d.apply(this,arguments),this._super=b,this._superApply=c,f}}(),void 0):(i[b]=d,void 0)}),g.prototype=a.widget.extend(h,{widgetEventPrefix:f?h.widgetEventPrefix:b},i,{constructor:g,namespace:j,widgetName:b,widgetFullName:e}),f?(a.each(f._childConstructors,function(b,c){var d=c.prototype;a.widget(d.namespace+"."+d.widgetName,g,c._proto)}),delete f._childConstructors):c._childConstructors.push(g),a.widget.bridge(b,g)
},a.widget.extend=function(c){for(var h,i,e=d.call(arguments,1),f=0,g=e.length;g>f;f++)for(h in e[f])i=e[f][h],e[f].hasOwnProperty(h)&&i!==b&&(c[h]=a.isPlainObject(i)?a.isPlainObject(c[h])?a.widget.extend({},c[h],i):a.widget.extend({},i):i);return c},a.widget.bridge=function(c,e){var f=e.prototype.widgetFullName||c;a.fn[c]=function(g){var h="string"==typeof g,i=d.call(arguments,1),j=this;return g=!h&&i.length?a.widget.extend.apply(null,[g].concat(i)):g,h?this.each(function(){var d,e=a.data(this,f);return e?a.isFunction(e[g])&&"_"!==g.charAt(0)?(d=e[g].apply(e,i),d!==e&&d!==b?(j=d&&d.jquery?j.pushStack(d.get()):d,!1):void 0):a.error("no such method '"+g+"' for "+c+" widget instance"):a.error("cannot call methods on "+c+" prior to initialization; attempted to call method '"+g+"'")
}):this.each(function(){var b=a.data(this,f);b?b.option(g||{})._init():a.data(this,f,new e(g,this))}),j}},a.Widget=function(){},a.Widget._childConstructors=[],a.Widget.prototype={widgetName:"widget",widgetEventPrefix:"",defaultElement:"<div>",options:{disabled:!1,create:null},_createWidget:function(b,d){d=a(d||this.defaultElement||this)[0],this.element=a(d),this.uuid=c++,this.eventNamespace="."+this.widgetName+this.uuid,this.options=a.widget.extend({},this.options,this._getCreateOptions(),b),this.bindings=a(),this.hoverable=a(),this.focusable=a(),d!==this&&(a.data(d,this.widgetFullName,this),this._on(!0,this.element,{remove:function(a){a.target===d&&this.destroy()
}}),this.document=a(d.style?d.ownerDocument:d.document||d),this.window=a(this.document[0].defaultView||this.document[0].parentWindow)),this._create(),this._trigger("create",null,this._getCreateEventData()),this._init()},_getCreateOptions:a.noop,_getCreateEventData:a.noop,_create:a.noop,_init:a.noop,destroy:function(){this._destroy(),this.element.unbind(this.eventNamespace).removeData(this.widgetName).removeData(this.widgetFullName).removeData(a.camelCase(this.widgetFullName)),this.widget().unbind(this.eventNamespace).removeAttr("aria-disabled").removeClass(this.widgetFullName+"-disabled ui-state-disabled"),this.bindings.unbind(this.eventNamespace),this.hoverable.removeClass("ui-state-hover"),this.focusable.removeClass("ui-state-focus")
},_destroy:a.noop,widget:function(){return this.element},option:function(c,d){var f,g,h,e=c;if(0===arguments.length)return a.widget.extend({},this.options);if("string"==typeof c)if(e={},f=c.split("."),c=f.shift(),f.length){for(g=e[c]=a.widget.extend({},this.options[c]),h=0;h<f.length-1;h++)g[f[h]]=g[f[h]]||{},g=g[f[h]];if(c=f.pop(),d===b)return g[c]===b?null:g[c];g[c]=d}else{if(d===b)return this.options[c]===b?null:this.options[c];e[c]=d}return this._setOptions(e),this},_setOptions:function(a){var b;for(b in a)this._setOption(b,a[b]);
return this},_setOption:function(a,b){return this.options[a]=b,"disabled"===a&&(this.widget().toggleClass(this.widgetFullName+"-disabled ui-state-disabled",!!b).attr("aria-disabled",b),this.hoverable.removeClass("ui-state-hover"),this.focusable.removeClass("ui-state-focus")),this},enable:function(){return this._setOption("disabled",!1)},disable:function(){return this._setOption("disabled",!0)},_on:function(b,c,d){var e,f=this;"boolean"!=typeof b&&(d=c,c=b,b=!1),d?(c=e=a(c),this.bindings=this.bindings.add(c)):(d=c,c=this.element,e=this.widget()),a.each(d,function(d,g){function h(){return b||f.options.disabled!==!0&&!a(this).hasClass("ui-state-disabled")?("string"==typeof g?f[g]:g).apply(f,arguments):void 0
}"string"!=typeof g&&(h.guid=g.guid=g.guid||h.guid||a.guid++);var i=d.match(/^(\w+)\s*(.*)$/),j=i[1]+f.eventNamespace,k=i[2];k?e.delegate(k,j,h):c.bind(j,h)})},_off:function(a,b){b=(b||"").split(" ").join(this.eventNamespace+" ")+this.eventNamespace,a.unbind(b).undelegate(b)},_delay:function(a,b){function c(){return("string"==typeof a?d[a]:a).apply(d,arguments)}var d=this;return setTimeout(c,b||0)},_hoverable:function(b){this.hoverable=this.hoverable.add(b),this._on(b,{mouseenter:function(b){a(b.currentTarget).addClass("ui-state-hover")
},mouseleave:function(b){a(b.currentTarget).removeClass("ui-state-hover")}})},_focusable:function(b){this.focusable=this.focusable.add(b),this._on(b,{focusin:function(b){a(b.currentTarget).addClass("ui-state-focus")},focusout:function(b){a(b.currentTarget).removeClass("ui-state-focus")}})},_trigger:function(b,c,d){var e,f,g=this.options[b];if(d=d||{},c=a.Event(c),c.type=(b===this.widgetEventPrefix?b:this.widgetEventPrefix+b).toLowerCase(),c.target=this.element[0],f=c.originalEvent)for(e in f)e in c||(c[e]=f[e]);
return this.element.trigger(c,d),!(a.isFunction(g)&&g.apply(this.element[0],[c].concat(d))===!1||c.isDefaultPrevented())}},a.each({show:"fadeIn",hide:"fadeOut"},function(b,c){a.Widget.prototype["_"+b]=function(d,e,f){"string"==typeof e&&(e={effect:e});var g,h=e?e===!0||"number"==typeof e?c:e.effect||c:b;e=e||{},"number"==typeof e&&(e={duration:e}),g=!a.isEmptyObject(e),e.complete=f,e.delay&&d.delay(e.delay),g&&a.effects&&a.effects.effect[h]?d[b](e):h!==b&&d[h]?d[h](e.duration,e.easing,f):d.queue(function(c){a(this)[b](),f&&f.call(d[0]),c()
})}})}(c)};d(),b.resolveWith(d)};FD50.module("ui/widget",a)}(),function(){var a=function(a){var b=this,c=a;a.require().script("ui/draggable").done(function(){var a=function(){!function(a){function c(a,b,c){return a>b&&b+c>a}a.widget("ui.droppable",{version:"1.10.4pre",widgetEventPrefix:"drop",options:{accept:"*",activeClass:!1,addClasses:!0,greedy:!1,hoverClass:!1,scope:"default",tolerance:"intersect",activate:null,deactivate:null,drop:null,out:null,over:null},_create:function(){var b=this.options,c=b.accept;
this.isover=!1,this.isout=!0,this.accept=a.isFunction(c)?c:function(a){return a.is(c)},this.proportions={width:this.element[0].offsetWidth,height:this.element[0].offsetHeight},a.ui.ddmanager.droppables[b.scope]=a.ui.ddmanager.droppables[b.scope]||[],a.ui.ddmanager.droppables[b.scope].push(this),b.addClasses&&this.element.addClass("ui-droppable")},_destroy:function(){for(var b=0,c=a.ui.ddmanager.droppables[this.options.scope];b<c.length;b++)c[b]===this&&c.splice(b,1);this.element.removeClass("ui-droppable ui-droppable-disabled")
},_setOption:function(b,c){"accept"===b&&(this.accept=a.isFunction(c)?c:function(a){return a.is(c)}),a.Widget.prototype._setOption.apply(this,arguments)},_activate:function(b){var c=a.ui.ddmanager.current;this.options.activeClass&&this.element.addClass(this.options.activeClass),c&&this._trigger("activate",b,this.ui(c))},_deactivate:function(b){var c=a.ui.ddmanager.current;this.options.activeClass&&this.element.removeClass(this.options.activeClass),c&&this._trigger("deactivate",b,this.ui(c))},_over:function(b){var c=a.ui.ddmanager.current;
c&&(c.currentItem||c.element)[0]!==this.element[0]&&this.accept.call(this.element[0],c.currentItem||c.element)&&(this.options.hoverClass&&this.element.addClass(this.options.hoverClass),this._trigger("over",b,this.ui(c)))},_out:function(b){var c=a.ui.ddmanager.current;c&&(c.currentItem||c.element)[0]!==this.element[0]&&this.accept.call(this.element[0],c.currentItem||c.element)&&(this.options.hoverClass&&this.element.removeClass(this.options.hoverClass),this._trigger("out",b,this.ui(c)))},_drop:function(b,c){var d=c||a.ui.ddmanager.current,e=!1;
return d&&(d.currentItem||d.element)[0]!==this.element[0]?(this.element.find(":data(ui-droppable)").not(".ui-draggable-dragging").each(function(){var b=a.data(this,"ui-droppable");return b.options.greedy&&!b.options.disabled&&b.options.scope===d.options.scope&&b.accept.call(b.element[0],d.currentItem||d.element)&&a.ui.intersect(d,a.extend(b,{offset:b.element.offset()}),b.options.tolerance)?(e=!0,!1):void 0}),e?!1:this.accept.call(this.element[0],d.currentItem||d.element)?(this.options.activeClass&&this.element.removeClass(this.options.activeClass),this.options.hoverClass&&this.element.removeClass(this.options.hoverClass),this._trigger("drop",b,this.ui(d)),this.element):!1):!1
},ui:function(a){return{draggable:a.currentItem||a.element,helper:a.helper,position:a.position,offset:a.positionAbs}}}),a.ui.intersect=function(a,b,d){if(!b.offset)return!1;var e,f,g=(a.positionAbs||a.position.absolute).left,h=g+a.helperProportions.width,i=(a.positionAbs||a.position.absolute).top,j=i+a.helperProportions.height,k=b.offset.left,l=k+b.proportions.width,m=b.offset.top,n=m+b.proportions.height;switch(d){case"fit":return g>=k&&l>=h&&i>=m&&n>=j;case"intersect":return k<g+a.helperProportions.width/2&&h-a.helperProportions.width/2<l&&m<i+a.helperProportions.height/2&&j-a.helperProportions.height/2<n;
case"pointer":return e=(a.positionAbs||a.position.absolute).left+(a.clickOffset||a.offset.click).left,f=(a.positionAbs||a.position.absolute).top+(a.clickOffset||a.offset.click).top,c(f,m,b.proportions.height)&&c(e,k,b.proportions.width);case"touch":return(i>=m&&n>=i||j>=m&&n>=j||m>i&&j>n)&&(g>=k&&l>=g||h>=k&&l>=h||k>g&&h>l);default:return!1}},a.ui.ddmanager={current:null,droppables:{"default":[]},prepareOffsets:function(b,c){var d,e,f=a.ui.ddmanager.droppables[b.options.scope]||[],g=c?c.type:null,h=(b.currentItem||b.element).find(":data(ui-droppable)").addBack();
a:for(d=0;d<f.length;d++)if(!(f[d].options.disabled||b&&!f[d].accept.call(f[d].element[0],b.currentItem||b.element))){for(e=0;e<h.length;e++)if(h[e]===f[d].element[0]){f[d].proportions.height=0;continue a}f[d].visible="none"!==f[d].element.css("display"),f[d].visible&&("mousedown"===g&&f[d]._activate.call(f[d],c),f[d].offset=f[d].element.offset(),f[d].proportions={width:f[d].element[0].offsetWidth,height:f[d].element[0].offsetHeight})}},drop:function(b,c){var d=!1;return a.each((a.ui.ddmanager.droppables[b.options.scope]||[]).slice(),function(){this.options&&(!this.options.disabled&&this.visible&&a.ui.intersect(b,this,this.options.tolerance)&&(d=this._drop.call(this,c)||d),!this.options.disabled&&this.visible&&this.accept.call(this.element[0],b.currentItem||b.element)&&(this.isout=!0,this.isover=!1,this._deactivate.call(this,c)))
}),d},dragStart:function(b,c){b.element.parentsUntil("body").bind("scroll.droppable",function(){b.options.refreshPositions||a.ui.ddmanager.prepareOffsets(b,c)})},drag:function(b,c){b.options.refreshPositions&&a.ui.ddmanager.prepareOffsets(b,c),a.each(a.ui.ddmanager.droppables[b.options.scope]||[],function(){if(!this.options.disabled&&!this.greedyChild&&this.visible){var d,e,f,g=a.ui.intersect(b,this,this.options.tolerance),h=!g&&this.isover?"isout":g&&!this.isover?"isover":null;h&&(this.options.greedy&&(e=this.options.scope,f=this.element.parents(":data(ui-droppable)").filter(function(){return a.data(this,"ui-droppable").options.scope===e
}),f.length&&(d=a.data(f[0],"ui-droppable"),d.greedyChild="isover"===h)),d&&"isover"===h&&(d.isover=!1,d.isout=!0,d._out.call(d,c)),this[h]=!0,this["isout"===h?"isover":"isout"]=!1,this["isover"===h?"_over":"_out"].call(this,c),d&&"isout"===h&&(d.isout=!1,d.isover=!0,d._over.call(d,c)))}})},dragStop:function(b,c){b.element.parentsUntil("body").unbind("scroll.droppable"),b.options.refreshPositions||a.ui.ddmanager.prepareOffsets(b,c)}}}(c)};a(),b.resolveWith(a)})};FD50.module("ui/droppable",a)}(),function(){var a=function(a){var b=this,c=function(){var b=".colorpicker-hsb-panel",c=".colorpicker-h-panel",d=".colorpicker-sb-panel",e=".colorpicker-h-handle",f=".colorpicker-sb-handle",g=".colorpicker-preview",h=".colorpicker-hex-input",i={color:"#000000",document:document};
a.fn.colorpicker=function(b){var c=this.data("colorpicker");if(c||(c=new j(this,b)),a.isString(b)){var d=b;return c[d].apply(c,a.makeArray(arguments).slice(1))}return this};var j=function(b,c){this.options=a.extend({},i,c),this.element=b,this.init(),b.data("colorpicker",this)};a.extend(j.prototype,{init:function(){this.initHPanel(),this.initSBPanel(),this.initHexInput(),this.silent=!0,this.setHex(this.options.color),this.silent=!1},initHPanel:function(){var b=this;b.generateHueColors(),b.element.on(a.ns("mousedown",".colorpicker.h"),c,function(c){c.preventDefault();
var d=b.hsbPanel(),e=b.hPanel(),f=b.hHandle(),g=e.offset(),h=g.top,i=e.height(),j=function(c){var d=a.getPointerPosition(c),e=d.y-h,g=e/i;0>g&&(g=0),g>1&&(g=1),f.css({top:100*g+"%"});var j=b.getHsb();b.setHsb(j)};d.addClass("adjusting-h"),j(c);var k=a(b.options.document);k.on(a.ns("mousemove touchmove",".colorpicker.h"),function(a){a.preventDefault(),j(a)}).on(a.ns("mouseup touchend",".colorpicker.h"),function(b){b.preventDefault(),d.removeClass("adjusting-h"),k.off(a.ns("mousemove mouseup touchend",".colorpicker.h"))
})})},destroyHPanel:function(){this.element.off(a.ns("mousedown",".colorpicker.h"))},generateHueColors:function(){var b=this.hPanel(),c=["#ff0000","#ff0080","#ff00ff","#8000ff","#0000ff","#0080ff","#00ffff","#00ff80","#00ff00","#80ff00","#ffff00","#ff8000","#ff0000"];if(a.IE<=9){var d,e;for(d=0;11>=d;d++)e=a('<div class="colorpicker-hue-stop"></div>').attr("style","height:8.333333%; filter:progid:DXImageTransform.Microsoft.gradient(GradientType=0,startColorstr="+c[d]+", endColorstr="+c[d+1]+'); -ms-filter: "progid:DXImageTransform.Microsoft.gradient(GradientType=0,startColorstr='+c[d]+", endColorstr="+c[d+1]+')";'),b.append(e)
}else stopList=c.join(","),b.attr("style","background:-webkit-linear-gradient(top,"+stopList+"); background: -o-linear-gradient(top,"+stopList+"); background: -ms-linear-gradient(top,"+stopList+"); background:-moz-linear-gradient(top,"+stopList+"); -webkit-linear-gradient(top,"+stopList+"); background:linear-gradient(to bottom,"+stopList+"); ")},initSBPanel:function(){var b=this;b.element.on(a.ns("mousedown",".colorpicker.sb"),d,function(c){var d=b.hsbPanel(),e=b.sbPanel(),f=b.sbHandle(),g=e.offset(),h=g.left,i=g.top,j=e.width(),k=e.height(),l=function(c){var d=a.getPointerPosition(c),e=d.x-h,g=d.y-i,l=e/j,m=g/k;
0>l&&(l=0),l>1&&(l=1),0>m&&(m=0),m>1&&(m=1),f.css({top:100*m+"%",left:100*l+"%"});var n=b.getHsb();b.setHsb(n)};d.addClass("adjusting-sb"),l(c);var m=a(b.options.document);m.on(a.ns("mousemove touchmove",".colorpicker.sb"),function(a){a.preventDefault(),l(a)}).on(a.ns("mouseup touchend",".colorpicker.sb"),function(){c.preventDefault(),d.removeClass("adjusting-sb"),m.off(a.ns("mousemove mouseup touchend",".colorpicker.sb"))})})},destroySBPanel:function(){this.element.off(a.ns("mousedown",".colorpicker.sb"))},initHexInput:function(){var b=this;
b.element.on("input",h,function(){var d=a.fixHex(a.trim(b.hexInput().val().replace(/\#/g,"")));b.setHex(d)}).on("focusin",h,function(){b.hexInput().addClass("is-focused")}).on("focusout",h,function(){var c=b.hexInput(),d=c.data("value");c.removeClass("is-focused").val(d)})},setHsb:function(b){var c=this.hsbPanel();c.hasClass("adjusting-h")||c.hasClass("adjusting-sb")||this.hHandle().css({top:100*(1-b.h/360)+"%"}),c.hasClass("adjusting-sb")||this.sbPanel().css({background:"#"+a.hsbToHex({h:b.h,s:100,b:100})}),this.sbHandle().css({left:b.s+"%",top:100-b.b+"%"});
var d="#"+a.hsbToHex(b),e=this.hexInput();e.data("value",d),!e.hasClass("is-focused")&&e.val(d),this.colorPreview().css("background",d),!this.silent&&this.element.trigger("colorpickerChange",d,b)},getHsb:function(){var b=this.hHandle();sbHandle=this.sbHandle();var c={h:360*(1-parseFloat(b[0].style.top)/100),s:parseFloat(sbHandle[0].style.left),b:100-parseFloat(sbHandle[0].style.top)};return a.fixHsb(c)},setHex:function(b){var b=b.replace(/\#/g,"");this.setHsb(a.hexToHsb(b))},getHex:function(){return"#"+a.hsbToHex(this.getHsb())
},setRgb:function(b){if(a.isString(b)){var c=b.match(/\d+/g);b={r:c[0]||0,g:c[1]||0,b:c[2]||0}}this.setHsb(a.rgbToHsb(b))},getRgb:function(){return a.hsbToRgb(this.getHsb())},setColor:function(a){a.match(/^rgb/i)&&this.setRgb(a),a.match(/^\#/)&&this.setHex(a)},hsbPanel:function(){return this.element.find(b)},hPanel:function(){return this.element.find(c)},sbPanel:function(){return this.element.find(d)},hHandle:function(){return this.element.find(e)},sbHandle:function(){return this.element.find(f)},colorPreview:function(){return this.element.find(g)
},hexInput:function(){return this.element.find(h)},widget:function(){return this}})};c(),b.resolveWith(c)};FD50.module("colorpicker",a)}(),function(){var a=function(a){var b=this,c=function(){!function(b,c){"use strict";function e(a,b){for(var c,e=[],f=0;f<a.length;++f){if(c=d[a[f]]||h(a[f]),!c)throw"module definition dependecy not found: "+a[f];e.push(c)}b.apply(null,e)}function f(a,b,f){if("string"!=typeof a)throw"invalid module definition, module id must be defined and be a string";if(b===c)throw"invalid module definition, dependencies must be specified";
if(f===c)throw"invalid module definition, definition function must be specified";e(b,function(){d[a]=f.apply(null,arguments)})}function h(a){for(var c=b,d=a.split(/[.\/]/),e=0;e<d.length;++e){if(!c[d[e]])return;c=c[d[e]]}return c}function i(a){for(var e=0;e<a.length;e++){for(var f=b,g=a[e],h=g.split(/[.\/]/),i=0;i<h.length-1;++i)f[h[i]]===c&&(f[h[i]]={}),f=f[h[i]];f[h[h.length-1]]=d[g]}}var d={};f("moxie/core/utils/Basic",[],function(){var a=function(a){var b;return a===b?"undefined":null===a?"null":a.nodeType?"node":{}.toString.call(a).match(/\s([a-z|A-Z]+)/)[1].toLowerCase()
},b=function(d){var e;return c(arguments,function(f,h){h>0&&c(f,function(c,f){c!==e&&(a(d[f])===a(c)&&~g(a(c),["array","object"])?b(d[f],c):d[f]=c)})}),d},c=function(a,b){var c,d,e,f;if(a){try{c=a.length}catch(g){c=f}if(c===f){for(d in a)if(a.hasOwnProperty(d)&&b(a[d],d)===!1)return}else for(e=0;c>e;e++)if(b(a[e],e)===!1)return}},d=function(b){var c;if(!b||"object"!==a(b))return!0;for(c in b)return!1;return!0},e=function(b,c){function f(d){"function"===a(b[d])&&b[d](function(a){++d<e&&!a?f(d):c(a)})}var d=0,e=b.length;
"function"!==a(c)&&(c=function(){}),b&&b.length||c(),f(d)},f=function(a,b){var d=0,e=a.length,f=new Array(e);c(a,function(a,c){a(function(a){if(a)return b(a);var g=[].slice.call(arguments);g.shift(),f[c]=g,d++,d===e&&(f.unshift(null),b.apply(this,f))})})},g=function(a,b){if(b){if(Array.prototype.indexOf)return Array.prototype.indexOf.call(b,a);for(var c=0,d=b.length;d>c;c++)if(b[c]===a)return c}return-1},h=function(b,c){var d=[];"array"!==a(b)&&(b=[b]),"array"!==a(c)&&(c=[c]);for(var e in b)-1===g(b[e],c)&&d.push(b[e]);
return d.length?d:!1},i=function(a,b){var d=[];return c(a,function(a){-1!==g(a,b)&&d.push(a)}),d.length?d:null},j=function(a){var b,c=[];for(b=0;b<a.length;b++)c[b]=a[b];return c},k=function(){var a=0;return function(b){var d,c=(new Date).getTime().toString(32);for(d=0;5>d;d++)c+=Math.floor(65535*Math.random()).toString(32);return(b||"o_")+c+(a++).toString(32)}}(),l=function(a){return a?String.prototype.trim?String.prototype.trim.call(a):a.toString().replace(/^\s*/,"").replace(/\s*$/,""):a},m=function(a){if("string"!=typeof a)return a;
var c,b={t:1099511627776,g:1073741824,m:1048576,k:1024};return a=/^([0-9]+)([mgk]?)$/.exec(a.toLowerCase().replace(/[^0-9mkg]/g,"")),c=a[2],a=+a[1],b.hasOwnProperty(c)&&(a*=b[c]),a};return{guid:k,typeOf:a,extend:b,each:c,isEmptyObj:d,inSeries:e,inParallel:f,inArray:g,arrayDiff:h,arrayIntersect:i,toArray:j,trim:l,parseSizeStr:m}}),f("moxie/core/I18n",["moxie/core/utils/Basic"],function(a){var b={};return{addI18n:function(c){return a.extend(b,c)},translate:function(a){return b[a]||a},_:function(a){return this.translate(a)
},sprintf:function(b){var c=[].slice.call(arguments,1);return b.replace(/%[a-z]/g,function(){var b=c.shift();return"undefined"!==a.typeOf(b)?b:""})}}}),f("moxie/core/utils/Mime",["moxie/core/utils/Basic","moxie/core/I18n"],function(a,b){var c="application/msword,doc dot,application/pdf,pdf,application/pgp-signature,pgp,application/postscript,ps ai eps,application/rtf,rtf,application/vnd.ms-excel,xls xlb,application/vnd.ms-powerpoint,ppt pps pot,application/zip,zip,application/x-shockwave-flash,swf swfl,application/vnd.openxmlformats-officedocument.wordprocessingml.document,docx,application/vnd.openxmlformats-officedocument.wordprocessingml.template,dotx,application/vnd.openxmlformats-officedocument.spreadsheetml.sheet,xlsx,application/vnd.openxmlformats-officedocument.presentationml.presentation,pptx,application/vnd.openxmlformats-officedocument.presentationml.template,potx,application/vnd.openxmlformats-officedocument.presentationml.slideshow,ppsx,application/x-javascript,js,application/json,json,audio/mpeg,mp3 mpga mpega mp2,audio/x-wav,wav,audio/x-m4a,m4a,audio/ogg,oga ogg,audio/aiff,aiff aif,audio/flac,flac,audio/aac,aac,audio/ac3,ac3,audio/x-ms-wma,wma,image/bmp,bmp,image/gif,gif,image/jpeg,jpg jpeg jpe,image/photoshop,psd,image/png,png,image/svg+xml,svg svgz,image/tiff,tiff tif,text/plain,asc txt text diff log,text/html,htm html xhtml,text/css,css,text/csv,csv,text/rtf,rtf,video/mpeg,mpeg mpg mpe m2v,video/quicktime,qt mov,video/mp4,mp4,video/x-m4v,m4v,video/x-flv,flv,video/x-ms-wmv,wmv,video/avi,avi,video/webm,webm,video/3gpp,3gpp 3gp,video/3gpp2,3g2,video/vnd.rn-realvideo,rv,video/ogg,ogv,video/x-matroska,mkv,application/vnd.oasis.opendocument.formula-template,otf,application/octet-stream,exe",d={mimes:{},extensions:{},addMimeType:function(a){var c,d,e,b=a.split(/,/);
for(c=0;c<b.length;c+=2){for(e=b[c+1].split(/ /),d=0;d<e.length;d++)this.mimes[e[d]]=b[c];this.extensions[b[c]]=e}},extList2mimes:function(b,c){var e,f,g,h,d=this,i=[];for(f=0;f<b.length;f++)for(e=b[f].extensions.split(/\s*,\s*/),g=0;g<e.length;g++){if("*"===e[g])return[];if(h=d.mimes[e[g]])-1===a.inArray(h,i)&&i.push(h);else{if(!c||!/^\w+$/.test(e[g]))return[];i.push("."+e[g])}}return i},mimes2exts:function(b){var c=this,d=[];return a.each(b,function(b){if("*"===b)return d=[],!1;var e=b.match(/^(\w+)\/(\*|\w+)$/);
e&&("*"===e[2]?a.each(c.extensions,function(a,b){new RegExp("^"+e[1]+"/").test(b)&&[].push.apply(d,c.extensions[b])}):c.extensions[b]&&[].push.apply(d,c.extensions[b]))}),d},mimes2extList:function(c){var d=[],e=[];return"string"===a.typeOf(c)&&(c=a.trim(c).split(/\s*,\s*/)),e=this.mimes2exts(c),d.push({title:b.translate("Files"),extensions:e.length?e.join(","):"*"}),d.mimes=c,d},getFileExtension:function(a){var b=a&&a.match(/\.([^.]+)$/);return b?b[1].toLowerCase():""},getFileMime:function(a){return this.mimes[this.getFileExtension(a)]||""
}};return d.addMimeType(c),d}),f("moxie/core/utils/Env",["moxie/core/utils/Basic"],function(b){function d(a,b,c){var d=0,e=0,f=0,g={dev:-6,alpha:-5,a:-5,beta:-4,b:-4,RC:-3,rc:-3,"#":-2,p:1,pl:1},h=function(a){return a=(""+a).replace(/[_\-+]/g,"."),a=a.replace(/([^.\d]+)/g,".$1.").replace(/\.{2,}/g,"."),a.length?a.split("."):[-8]},i=function(a){return a?isNaN(a)?g[a]||-7:parseInt(a,10):0};for(a=h(a),b=h(b),e=Math.max(a.length,b.length),d=0;e>d;d++)if(a[d]!=b[d]){if(a[d]=i(a[d]),b[d]=i(b[d]),a[d]<b[d]){f=-1;break
}if(a[d]>b[d]){f=1;break}}if(!c)return f;switch(c){case">":case"gt":return f>0;case">=":case"ge":return f>=0;case"<=":case"le":return 0>=f;case"==":case"=":case"eq":return 0===f;case"<>":case"!=":case"ne":return 0!==f;case"":case"<":case"lt":return 0>f;default:return null}}var c=function(a){var b="",c="?",d="function",e="undefined",f="object",g="major",i="name",l="version",q={has:function(a,b){return-1!==b.toLowerCase().indexOf(a.toLowerCase())},lowerize:function(a){return a.toLowerCase()}},r={rgx:function(){for(var b,g,h,i,j,k,l,c=0,m=arguments;c<m.length;c+=2){var n=m[c],o=m[c+1];
if(typeof b===e){b={};for(i in o)j=o[i],typeof j===f?b[j[0]]=a:b[j]=a}for(g=h=0;g<n.length;g++)if(k=n[g].exec(this.getUA())){for(i=0;i<o.length;i++)l=k[++h],j=o[i],typeof j===f&&j.length>0?2==j.length?b[j[0]]=typeof j[1]==d?j[1].call(this,l):j[1]:3==j.length?b[j[0]]=typeof j[1]!==d||j[1].exec&&j[1].test?l?l.replace(j[1],j[2]):a:l?j[1].call(this,l,j[2]):a:4==j.length&&(b[j[0]]=l?j[3].call(this,l.replace(j[1],j[2])):a):b[j]=l?l:a;break}if(k)break}return b},str:function(b,d){for(var e in d)if(typeof d[e]===f&&d[e].length>0){for(var g=0;g<d[e].length;g++)if(q.has(d[e][g],b))return e===c?a:e
}else if(q.has(d[e],b))return e===c?a:e;return b}},s={browser:{oldsafari:{major:{1:["/8","/1","/3"],2:"/4","?":"/"},version:{"1.0":"/8",1.2:"/1",1.3:"/3","2.0":"/412","2.0.2":"/416","2.0.3":"/417","2.0.4":"/419","?":"/"}}},device:{sprint:{model:{"Evo Shift 4G":"7373KT"},vendor:{HTC:"APA",Sprint:"Sprint"}}},os:{windows:{version:{ME:"4.90","NT 3.11":"NT3.51","NT 4.0":"NT4.0",2000:"NT 5.0",XP:["NT 5.1","NT 5.2"],Vista:"NT 6.0",7:"NT 6.1",8:"NT 6.2",8.1:"NT 6.3",RT:"ARM"}}}},t={browser:[[/(opera\smini)\/((\d+)?[\w\.-]+)/i,/(opera\s[mobiletab]+).+version\/((\d+)?[\w\.-]+)/i,/(opera).+version\/((\d+)?[\w\.]+)/i,/(opera)[\/\s]+((\d+)?[\w\.]+)/i],[i,l,g],[/\s(opr)\/((\d+)?[\w\.]+)/i],[[i,"Opera"],l,g],[/(kindle)\/((\d+)?[\w\.]+)/i,/(lunascape|maxthon|netfront|jasmine|blazer)[\/\s]?((\d+)?[\w\.]+)*/i,/(avant\s|iemobile|slim|baidu)(?:browser)?[\/\s]?((\d+)?[\w\.]*)/i,/(?:ms|\()(ie)\s((\d+)?[\w\.]+)/i,/(rekonq)((?:\/)[\w\.]+)*/i,/(chromium|flock|rockmelt|midori|epiphany|silk|skyfire|ovibrowser|bolt|iron)\/((\d+)?[\w\.-]+)/i],[i,l,g],[/(trident).+rv[:\s]((\d+)?[\w\.]+).+like\sgecko/i],[[i,"IE"],l,g],[/(yabrowser)\/((\d+)?[\w\.]+)/i],[[i,"Yandex"],l,g],[/(comodo_dragon)\/((\d+)?[\w\.]+)/i],[[i,/_/g," "],l,g],[/(chrome|omniweb|arora|[tizenoka]{5}\s?browser)\/v?((\d+)?[\w\.]+)/i],[i,l,g],[/(dolfin)\/((\d+)?[\w\.]+)/i],[[i,"Dolphin"],l,g],[/((?:android.+)crmo|crios)\/((\d+)?[\w\.]+)/i],[[i,"Chrome"],l,g],[/((?:android.+))version\/((\d+)?[\w\.]+)\smobile\ssafari/i],[[i,"Android Browser"],l,g],[/version\/((\d+)?[\w\.]+).+?mobile\/\w+\s(safari)/i],[l,g,[i,"Mobile Safari"]],[/version\/((\d+)?[\w\.]+).+?(mobile\s?safari|safari)/i],[l,g,i],[/webkit.+?(mobile\s?safari|safari)((\/[\w\.]+))/i],[i,[g,r.str,s.browser.oldsafari.major],[l,r.str,s.browser.oldsafari.version]],[/(konqueror)\/((\d+)?[\w\.]+)/i,/(webkit|khtml)\/((\d+)?[\w\.]+)/i],[i,l,g],[/(navigator|netscape)\/((\d+)?[\w\.-]+)/i],[[i,"Netscape"],l,g],[/(swiftfox)/i,/(icedragon|iceweasel|camino|chimera|fennec|maemo\sbrowser|minimo|conkeror)[\/\s]?((\d+)?[\w\.\+]+)/i,/(firefox|seamonkey|k-meleon|icecat|iceape|firebird|phoenix)\/((\d+)?[\w\.-]+)/i,/(mozilla)\/((\d+)?[\w\.]+).+rv\:.+gecko\/\d+/i,/(uc\s?browser|polaris|lynx|dillo|icab|doris|amaya|w3m|netsurf|qqbrowser)[\/\s]?((\d+)?[\w\.]+)/i,/(links)\s\(((\d+)?[\w\.]+)/i,/(gobrowser)\/?((\d+)?[\w\.]+)*/i,/(ice\s?browser)\/v?((\d+)?[\w\._]+)/i,/(mosaic)[\/\s]((\d+)?[\w\.]+)/i],[i,l,g]],engine:[[/(presto)\/([\w\.]+)/i,/(webkit|trident|netfront|netsurf|amaya|lynx|w3m)\/([\w\.]+)/i,/(khtml|tasman|links)[\/\s]\(?([\w\.]+)/i,/(icab)[\/\s]([23]\.[\d\.]+)/i],[i,l],[/rv\:([\w\.]+).*(gecko)/i],[l,i]],os:[[/(windows)\snt\s6\.2;\s(arm)/i,/(windows\sphone(?:\sos)*|windows\smobile|windows)[\s\/]?([ntce\d\.\s]+\w)/i],[i,[l,r.str,s.os.windows.version]],[/(win(?=3|9|n)|win\s9x\s)([nt\d\.]+)/i],[[i,"Windows"],[l,r.str,s.os.windows.version]],[/\((bb)(10);/i],[[i,"BlackBerry"],l],[/(blackberry)\w*\/?([\w\.]+)*/i,/(tizen)\/([\w\.]+)/i,/(android|webos|palm\os|qnx|bada|rim\stablet\sos|meego)[\/\s-]?([\w\.]+)*/i],[i,l],[/(symbian\s?os|symbos|s60(?=;))[\/\s-]?([\w\.]+)*/i],[[i,"Symbian"],l],[/mozilla.+\(mobile;.+gecko.+firefox/i],[[i,"Firefox OS"],l],[/(nintendo|playstation)\s([wids3portablevu]+)/i,/(mint)[\/\s\(]?(\w+)*/i,/(joli|[kxln]?ubuntu|debian|[open]*suse|gentoo|arch|slackware|fedora|mandriva|centos|pclinuxos|redhat|zenwalk)[\/\s-]?([\w\.-]+)*/i,/(hurd|linux)\s?([\w\.]+)*/i,/(gnu)\s?([\w\.]+)*/i],[i,l],[/(cros)\s[\w]+\s([\w\.]+\w)/i],[[i,"Chromium OS"],l],[/(sunos)\s?([\w\.]+\d)*/i],[[i,"Solaris"],l],[/\s([frentopc-]{0,4}bsd|dragonfly)\s?([\w\.]+)*/i],[i,l],[/(ip[honead]+)(?:.*os\s*([\w]+)*\slike\smac|;\sopera)/i],[[i,"iOS"],[l,/_/g,"."]],[/(mac\sos\sx)\s?([\w\s\.]+\w)*/i],[i,[l,/_/g,"."]],[/(haiku)\s(\w+)/i,/(aix)\s((\d)(?=\.|\)|\s)[\w\.]*)*/i,/(macintosh|mac(?=_powerpc)|plan\s9|minix|beos|os\/2|amigaos|morphos|risc\sos)/i,/(unix)\s?([\w\.]+)*/i],[i,l]]},u=function(a){var c=a||(window&&window.navigator&&window.navigator.userAgent?window.navigator.userAgent:b);
this.getBrowser=function(){return r.rgx.apply(this,t.browser)},this.getEngine=function(){return r.rgx.apply(this,t.engine)},this.getOS=function(){return r.rgx.apply(this,t.os)},this.getResult=function(){return{ua:this.getUA(),browser:this.getBrowser(),engine:this.getEngine(),os:this.getOS()}},this.getUA=function(){return c},this.setUA=function(a){return c=a,this},this.setUA(c)};return(new u).getResult()}(),e=function(){var a={define_property:function(){return!1}(),create_canvas:function(){var a=document.createElement("canvas");
return!(!a.getContext||!a.getContext("2d"))}(),return_response_type:function(a){try{if(-1!==b.inArray(a,["","text","document"]))return!0;if(window.XMLHttpRequest){var c=new XMLHttpRequest;if(c.open("get","/"),"responseType"in c)return c.responseType=a,c.responseType!==a?!1:!0}}catch(d){}return!1},use_data_uri:function(){var b=new Image;return b.onload=function(){a.use_data_uri=1===b.width&&1===b.height},setTimeout(function(){b.src="data:image/gif;base64,R0lGODlhAQABAIAAAP8AAAAAACH5BAAAAAAALAAAAAABAAEAAAICRAEAOw=="
},1),!1}(),use_data_uri_over32kb:function(){return a.use_data_uri&&("IE"!==f.browser||f.version>=9)},use_data_uri_of:function(b){return a.use_data_uri&&33e3>b||a.use_data_uri_over32kb()},use_fileinput:function(){var a=document.createElement("input");return a.setAttribute("type","file"),!a.disabled}};return function(c){var d=[].slice.call(arguments);return d.shift(),"function"===b.typeOf(a[c])?a[c].apply(this,d):!!a[c]}}(),f={can:e,browser:c.browser.name,version:parseFloat(c.browser.major),os:c.os.name,osVersion:c.os.version,verComp:d,swf_url:a.path+"/scripts/plupload2/Moxie.swf",xap_url:a.path+"/scripts/plupload2/Moxie.xap",global_event_dispatcher:"moxie.core.EventTarget.instance.dispatchEvent"};
return f.OS=f.os,f}),f("moxie/core/utils/Dom",["moxie/core/utils/Env"],function(a){var b=function(a){return"string"!=typeof a?a:document.getElementById(a)},c=function(a,b){if(!a.className)return!1;var c=new RegExp("(^|\\s+)"+b+"(\\s+|$)");return c.test(a.className)},d=function(a,b){c(a,b)||(a.className=a.className?a.className.replace(/\s+$/,"")+" "+b:b)},e=function(a,b){if(a.className){var c=new RegExp("(^|\\s+)"+b+"(\\s+|$)");a.className=a.className.replace(c,function(a,b,c){return" "===b&&" "===c?" ":""})}},f=function(a,b){return a.currentStyle?a.currentStyle[b]:window.getComputedStyle?window.getComputedStyle(a,null)[b]:void 0
},g=function(b,c){function j(a){var b,c,d=0,e=0;return a&&(c=a.getBoundingClientRect(),b="CSS1Compat"===g.compatMode?g.documentElement:g.body,d=c.left+b.scrollLeft,e=c.top+b.scrollTop),{x:d,y:e}}var f,h,i,d=0,e=0,g=document;if(b=b,c=c||g.body,b&&b.getBoundingClientRect&&"IE"===a.browser&&(!g.documentMode||g.documentMode<8))return h=j(b),i=j(c),{x:h.x-i.x,y:h.y-i.y};for(f=b;f&&f!=c&&f.nodeType;)d+=f.offsetLeft||0,e+=f.offsetTop||0,f=f.offsetParent;for(f=b.parentNode;f&&f!=c&&f.nodeType;)d-=f.scrollLeft||0,e-=f.scrollTop||0,f=f.parentNode;
return{x:d,y:e}},h=function(a){return{w:a.offsetWidth||a.clientWidth,h:a.offsetHeight||a.clientHeight}};return{get:b,hasClass:c,addClass:d,removeClass:e,getStyle:f,getPos:g,getSize:h}}),f("moxie/core/Exceptions",["moxie/core/utils/Basic"],function(a){function b(a,b){var c;for(c in a)if(a[c]===b)return c;return null}return{RuntimeError:function(){function d(a){this.code=a,this.name=b(c,a),this.message=this.name+": RuntimeError "+this.code}var c={NOT_INIT_ERR:1,NOT_SUPPORTED_ERR:9,JS_ERR:4};return a.extend(d,c),d.prototype=Error.prototype,d
}(),OperationNotAllowedException:function(){function b(a){this.code=a,this.name="OperationNotAllowedException"}return a.extend(b,{NOT_ALLOWED_ERR:1}),b.prototype=Error.prototype,b}(),ImageError:function(){function d(a){this.code=a,this.name=b(c,a),this.message=this.name+": ImageError "+this.code}var c={WRONG_FORMAT:1,MAX_RESOLUTION_ERR:2};return a.extend(d,c),d.prototype=Error.prototype,d}(),FileException:function(){function d(a){this.code=a,this.name=b(c,a),this.message=this.name+": FileException "+this.code
}var c={NOT_FOUND_ERR:1,SECURITY_ERR:2,ABORT_ERR:3,NOT_READABLE_ERR:4,ENCODING_ERR:5,NO_MODIFICATION_ALLOWED_ERR:6,INVALID_STATE_ERR:7,SYNTAX_ERR:8};return a.extend(d,c),d.prototype=Error.prototype,d}(),DOMException:function(){function d(a){this.code=a,this.name=b(c,a),this.message=this.name+": DOMException "+this.code}var c={INDEX_SIZE_ERR:1,DOMSTRING_SIZE_ERR:2,HIERARCHY_REQUEST_ERR:3,WRONG_DOCUMENT_ERR:4,INVALID_CHARACTER_ERR:5,NO_DATA_ALLOWED_ERR:6,NO_MODIFICATION_ALLOWED_ERR:7,NOT_FOUND_ERR:8,NOT_SUPPORTED_ERR:9,INUSE_ATTRIBUTE_ERR:10,INVALID_STATE_ERR:11,SYNTAX_ERR:12,INVALID_MODIFICATION_ERR:13,NAMESPACE_ERR:14,INVALID_ACCESS_ERR:15,VALIDATION_ERR:16,TYPE_MISMATCH_ERR:17,SECURITY_ERR:18,NETWORK_ERR:19,ABORT_ERR:20,URL_MISMATCH_ERR:21,QUOTA_EXCEEDED_ERR:22,TIMEOUT_ERR:23,INVALID_NODE_TYPE_ERR:24,DATA_CLONE_ERR:25};
return a.extend(d,c),d.prototype=Error.prototype,d}(),EventException:function(){function b(a){this.code=a,this.name="EventException"}return a.extend(b,{UNSPECIFIED_EVENT_TYPE_ERR:0}),b.prototype=Error.prototype,b}()}}),f("moxie/core/EventTarget",["moxie/core/Exceptions","moxie/core/utils/Basic"],function(a,b){function c(){var c={};b.extend(this,{uid:null,init:function(){this.uid||(this.uid=b.guid("uid_"))},addEventListener:function(a,d,e,f){var h,g=this;return a=b.trim(a),/\s/.test(a)?(b.each(a.split(/\s+/),function(a){g.addEventListener(a,d,e,f)
}),void 0):(a=a.toLowerCase(),e=parseInt(e,10)||0,h=c[this.uid]&&c[this.uid][a]||[],h.push({fn:d,priority:e,scope:f||this}),c[this.uid]||(c[this.uid]={}),c[this.uid][a]=h,void 0)},hasEventListener:function(a){return a?!(!c[this.uid]||!c[this.uid][a]):!!c[this.uid]},removeEventListener:function(a,d){a=a.toLowerCase();var f,e=c[this.uid]&&c[this.uid][a];if(e){if(d){for(f=e.length-1;f>=0;f--)if(e[f].fn===d){e.splice(f,1);break}}else e=[];e.length||(delete c[this.uid][a],b.isEmptyObj(c[this.uid])&&delete c[this.uid])
}},removeAllEventListeners:function(){c[this.uid]&&delete c[this.uid]},dispatchEvent:function(d){var e,f,g,h,k,i={},j=!0;if("string"!==b.typeOf(d)){if(h=d,"string"!==b.typeOf(h.type))throw new a.EventException(a.EventException.UNSPECIFIED_EVENT_TYPE_ERR);d=h.type,h.total!==k&&h.loaded!==k&&(i.total=h.total,i.loaded=h.loaded),i.async=h.async||!1}if(-1!==d.indexOf("::")?!function(a){e=a[0],d=a[1]}(d.split("::")):e=this.uid,d=d.toLowerCase(),f=c[e]&&c[e][d]){f.sort(function(a,b){return b.priority-a.priority}),g=[].slice.call(arguments),g.shift(),i.type=d,g.unshift(i);
var l=[];b.each(f,function(a){g[0].target=a.scope,i.async?l.push(function(b){setTimeout(function(){b(a.fn.apply(a.scope,g)===!1)},1)}):l.push(function(b){b(a.fn.apply(a.scope,g)===!1)})}),l.length&&b.inSeries(l,function(a){j=!a})}return j},bind:function(){this.addEventListener.apply(this,arguments)},unbind:function(){this.removeEventListener.apply(this,arguments)},unbindAll:function(){this.removeAllEventListeners.apply(this,arguments)},trigger:function(){return this.dispatchEvent.apply(this,arguments)},convertEventPropsToHandlers:function(a){var c;
"array"!==b.typeOf(a)&&(a=[a]);for(var d=0;d<a.length;d++)c="on"+a[d],"function"===b.typeOf(this[c])?this.addEventListener(a[d],this[c]):"undefined"===b.typeOf(this[c])&&(this[c]=null)}})}return c.instance=new c,c}),f("moxie/core/utils/Encode",[],function(){var a=function(a){return unescape(encodeURIComponent(a))},b=function(a){return decodeURIComponent(escape(a))},c=function(a,c){if("function"==typeof window.atob)return c?b(window.atob(a)):window.atob(a);var e,f,g,h,i,j,k,l,d="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=",m=0,n=0,o="",p=[];
if(!a)return a;a+="";do h=d.indexOf(a.charAt(m++)),i=d.indexOf(a.charAt(m++)),j=d.indexOf(a.charAt(m++)),k=d.indexOf(a.charAt(m++)),l=h<<18|i<<12|j<<6|k,e=l>>16&255,f=l>>8&255,g=255&l,p[n++]=64==j?String.fromCharCode(e):64==k?String.fromCharCode(e,f):String.fromCharCode(e,f,g);while(m<a.length);return o=p.join(""),c?b(o):o},d=function(b,c){if(c&&a(b),"function"==typeof window.btoa)return window.btoa(b);var e,f,g,h,i,j,k,l,d="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=",m=0,n=0,o="",p=[];
if(!b)return b;do e=b.charCodeAt(m++),f=b.charCodeAt(m++),g=b.charCodeAt(m++),l=e<<16|f<<8|g,h=l>>18&63,i=l>>12&63,j=l>>6&63,k=63&l,p[n++]=d.charAt(h)+d.charAt(i)+d.charAt(j)+d.charAt(k);while(m<b.length);o=p.join("");var q=b.length%3;return(q?o.slice(0,q-3):o)+"===".slice(q||3)};return{utf8_encode:a,utf8_decode:b,atob:c,btoa:d}}),f("moxie/runtime/Runtime",["moxie/core/utils/Basic","moxie/core/utils/Dom","moxie/core/EventTarget"],function(a,b,c){function f(c,d,g,h,i){var k,j=this,l=a.guid(d+"_"),m=i||"browser";
c=c||{},e[l]=this,g=a.extend({access_binary:!1,access_image_binary:!1,display_media:!1,do_cors:!1,drag_and_drop:!1,filter_by_extension:!0,resize_image:!1,report_upload_progress:!1,return_response_headers:!1,return_response_type:!1,return_status_code:!0,send_custom_headers:!1,select_file:!1,select_folder:!1,select_multiple:!0,send_binary_string:!1,send_browser_cookies:!0,send_multipart:!0,slice_blob:!1,stream_upload:!1,summon_file_dialog:!1,upload_filesize:!0,use_http_method:!0},g),c.preferred_caps&&(m=f.getMode(h,c.preferred_caps,m)),k=function(){var b={};
return{exec:function(a,c,d,e){return k[c]&&(b[a]||(b[a]={context:this,instance:new k[c]}),b[a].instance[d])?b[a].instance[d].apply(this,e):void 0},removeInstance:function(a){delete b[a]},removeAllInstances:function(){var c=this;a.each(b,function(b,d){"function"===a.typeOf(b.instance.destroy)&&b.instance.destroy.call(b.context),c.removeInstance(d)})}}}(),a.extend(this,{initialized:!1,uid:l,type:d,mode:f.getMode(h,c.required_caps,m),shimid:l+"_container",clients:0,options:c,can:function(b,c){var d=arguments[2]||g;
if("string"===a.typeOf(b)&&"undefined"===a.typeOf(c)&&(b=f.parseCaps(b)),"object"===a.typeOf(b)){for(var e in b)if(!this.can(e,b[e],d))return!1;return!0}return"function"===a.typeOf(d[b])?d[b].call(this,c):c===d[b]},getShimContainer:function(){var c,d=b.get(this.shimid);return d||(c=this.options.container?b.get(this.options.container):document.body,d=document.createElement("div"),d.id=this.shimid,d.className="moxie-shim moxie-shim-"+this.type,a.extend(d.style,{position:"absolute",top:"0px",left:"0px",width:"1px",height:"1px",overflow:"hidden"}),c.appendChild(d),c=null),d
},getShim:function(){return k},shimExec:function(a,b){var c=[].slice.call(arguments,2);return j.getShim().exec.call(this,this.uid,a,b,c)},exec:function(a,b){var c=[].slice.call(arguments,2);return j[a]&&j[a][b]?j[a][b].apply(this,c):j.shimExec.apply(this,arguments)},destroy:function(){if(j){var a=b.get(this.shimid);a&&a.parentNode.removeChild(a),k&&k.removeAllInstances(),this.unbindAll(),delete e[this.uid],this.uid=null,l=j=k=a=null}}}),this.mode&&c.required_caps&&!this.can(c.required_caps)&&(this.mode=!1)}var d={},e={};
return f.order="html5,flash,silverlight,html4",f.getRuntime=function(a){return e[a]?e[a]:!1},f.addConstructor=function(a,b){b.prototype=c.instance,d[a]=b},f.getConstructor=function(a){return d[a]||null},f.getInfo=function(a){var b=f.getRuntime(a);return b?{uid:b.uid,type:b.type,mode:b.mode,can:function(){return b.can.apply(b,arguments)}}:null},f.parseCaps=function(b){var c={};return"string"!==a.typeOf(b)?b||{}:(a.each(b.split(","),function(a){c[a]=!0}),c)},f.can=function(a,b){var c,e,d=f.getConstructor(a);return d?(c=new d({required_caps:b}),e=c.mode,c.destroy(),!!e):!1
},f.thatCan=function(a,b){var c=(b||f.order).split(/\s*,\s*/);for(var d in c)if(f.can(c[d],a))return c[d];return null},f.getMode=function(b,c,d){var e=null;if("undefined"===a.typeOf(d)&&(d="browser"),c&&!a.isEmptyObj(b)){if(a.each(c,function(c,d){if(b.hasOwnProperty(d)){var f=b[d](c);if("string"==typeof f&&(f=[f]),e){if(!(e=a.arrayIntersect(e,f)))return e=!1}else e=f}}),e)return-1!==a.inArray(d,e)?d:e[0];if(e===!1)return!1}return d},f.capTrue=function(){return!0},f.capFalse=function(){return!1},f.capTest=function(a){return function(){return!!a
}},f}),f("moxie/runtime/RuntimeClient",["moxie/core/Exceptions","moxie/core/utils/Basic","moxie/runtime/Runtime"],function(a,b,c){return function(){var d;b.extend(this,{connectRuntime:function(e){function h(b){var g,i;return b.length?(g=b.shift(),(i=c.getConstructor(g))?(d=new i(e),d.bind("Init",function(){d.initialized=!0,setTimeout(function(){d.clients++,f.trigger("RuntimeInit",d)},1)}),d.bind("Error",function(){d.destroy(),h(b)}),d.mode?(d.init(),void 0):(d.trigger("Error"),void 0)):(h(b),void 0)):(f.trigger("RuntimeError",new a.RuntimeError(a.RuntimeError.NOT_INIT_ERR)),d=null,void 0)
}var g,f=this;if("string"===b.typeOf(e)?g=e:"string"===b.typeOf(e.ruid)&&(g=e.ruid),g){if(d=c.getRuntime(g))return d.clients++,d;throw new a.RuntimeError(a.RuntimeError.NOT_INIT_ERR)}h((e.runtime_order||c.order).split(/\s*,\s*/))},getRuntime:function(){return d&&d.uid?d:(d=null,null)},disconnectRuntime:function(){d&&--d.clients<=0&&(d.destroy(),d=null)}})}}),f("moxie/file/Blob",["moxie/core/utils/Basic","moxie/core/utils/Encode","moxie/runtime/RuntimeClient"],function(a,b,c){function e(f,g){function h(b,c,f){var g,h=d[this.uid];
return"string"===a.typeOf(h)&&h.length?(g=new e(null,{type:f,size:c-b}),g.detach(h.substr(b,g.size)),g):null}c.call(this),f&&this.connectRuntime(f),g?"string"===a.typeOf(g)&&(g={data:g}):g={},a.extend(this,{uid:g.uid||a.guid("uid_"),ruid:f,size:g.size||0,type:g.type||"",slice:function(a,b,c){return this.isDetached()?h.apply(this,arguments):this.getRuntime().exec.call(this,"Blob","slice",this.getSource(),a,b,c)},getSource:function(){return d[this.uid]?d[this.uid]:null},detach:function(a){this.ruid&&(this.getRuntime().exec.call(this,"Blob","destroy"),this.disconnectRuntime(),this.ruid=null),a=a||"";
var c=a.match(/^data:([^;]*);base64,/);c&&(this.type=c[1],a=b.atob(a.substring(a.indexOf("base64,")+7))),this.size=a.length,d[this.uid]=a},isDetached:function(){return!this.ruid&&"string"===a.typeOf(d[this.uid])},destroy:function(){this.detach(),delete d[this.uid]}}),g.data?this.detach(g.data):d[this.uid]=g}var d={};return e}),f("moxie/file/File",["moxie/core/utils/Basic","moxie/core/utils/Mime","moxie/file/Blob"],function(a,b,c){function d(d,e){var f,g;if(e||(e={}),g=e.type&&""!==e.type?e.type:b.getFileMime(e.name),e.name)f=e.name.replace(/\\/g,"/"),f=f.substr(f.lastIndexOf("/")+1);
else{var h=g.split("/")[0];f=a.guid((""!==h?h:"file")+"_"),b.extensions[g]&&(f+="."+b.extensions[g][0])}c.apply(this,arguments),a.extend(this,{type:g||"",name:f||a.guid("file_"),lastModifiedDate:e.lastModifiedDate||(new Date).toLocaleString()})}return d.prototype=c.prototype,d}),f("moxie/file/FileInput",["moxie/core/utils/Basic","moxie/core/utils/Mime","moxie/core/utils/Dom","moxie/core/Exceptions","moxie/core/EventTarget","moxie/core/I18n","moxie/file/File","moxie/runtime/Runtime","moxie/runtime/RuntimeClient"],function(b,c,d,e,f,g,h,i,j){function l(f){var m,n,o,l=this;
if(-1!==b.inArray(b.typeOf(f),["string","node"])&&(f={browse_button:f}),n=d.get(f.browse_button),!n)throw new e.DOMException(e.DOMException.NOT_FOUND_ERR);a(n).data("fileinput",l),o={accept:[{title:g.translate("All Files"),extensions:"*"}],name:"file",multiple:!1,required_caps:!1,container:n.parentNode||document.body},f=b.extend({},o,f),"string"==typeof f.required_caps&&(f.required_caps=i.parseCaps(f.required_caps)),"string"==typeof f.accept&&(f.accept=c.mimes2extList(f.accept)),m=d.get(f.container),m||(m=document.body),"static"===d.getStyle(m,"position")&&(m.style.position="relative"),m=n=null,j.call(l),b.extend(l,{uid:b.guid("uid_"),ruid:null,shimid:null,files:null,init:function(){l.convertEventPropsToHandlers(k),l.bind("RuntimeInit",function(a,c){l.ruid=c.uid,l.shimid=c.shimid,l.bind("Ready",function(){l.trigger("Refresh")
},999),l.bind("Change",function(){var a=c.exec.call(l,"FileInput","getFiles");l.files=[],b.each(a,function(a){return 0===a.size?!0:(l.files.push(new h(l.ruid,a)),void 0)})},999),l.bind("Refresh",function(){var a,e,g,h;g=d.get(f.browse_button),h=d.get(c.shimid),g&&(a=d.getPos(g,d.get(f.container)),e=d.getSize(g),h&&b.extend(h.style,{top:a.y+"px",left:a.x+"px",width:e.w+"px",height:e.h+"px"})),h=g=null}),c.exec.call(l,"FileInput","init",f)}),l.connectRuntime(b.extend({},f,{required_caps:{select_file:!0}}))},disable:function(a){var c=this.getRuntime();
c&&c.exec.call(this,"FileInput","disable","undefined"===b.typeOf(a)?!0:a)},refresh:function(){l.trigger("Refresh")},destroy:function(){var a=this.getRuntime();a&&(a.exec.call(this,"FileInput","destroy"),this.disconnectRuntime()),"array"===b.typeOf(this.files)&&b.each(this.files,function(a){a.destroy()}),this.files=null}});var p=l.trigger;l.trigger=function(b){var c=p.apply(l,arguments);return a(f.browse_button).trigger("fileinput"+b,[l].concat(a.makeArray(arguments).slice(1))),c}}var k=["ready","change","cancel","mouseenter","mouseleave","mousedown","mouseup"];
return l.prototype=f.instance,l}),f("moxie/file/FileDrop",["moxie/core/I18n","moxie/core/utils/Dom","moxie/core/Exceptions","moxie/core/utils/Basic","moxie/file/File","moxie/runtime/RuntimeClient","moxie/core/EventTarget","moxie/core/utils/Mime"],function(b,c,d,e,f,g,h,i){function k(d){var k,h=this;"string"==typeof d&&(d={drop_zone:d}),k={accept:[{title:b.translate("All Files"),extensions:"*"}],required_caps:{drag_and_drop:!0},multiple:!0},d="object"==typeof d?e.extend({},k,d):k,d.container=c.get(d.drop_zone)||document.body,"static"===c.getStyle(d.container,"position")&&(d.container.style.position="relative"),"string"==typeof d.accept&&(d.accept=i.mimes2extList(d.accept)),g.call(h),e.extend(h,{uid:e.guid("uid_"),ruid:null,files:null,init:function(){h.convertEventPropsToHandlers(j),h.bind("RuntimeInit",function(a,b){h.ruid=b.uid,h.bind("Drop",function(){var a=b.exec.call(h,"FileDrop","getFiles");
h.files=[],d.multiple||(a=a[0]),e.each(a,function(a){h.files.push(new f(h.ruid,a))})},999),b.exec.call(h,"FileDrop","init",d),h.dispatchEvent("ready")}),h.connectRuntime(d)},destroy:function(){var a=this.getRuntime();a&&(a.exec.call(this,"FileDrop","destroy"),this.disconnectRuntime()),this.files=null}});var l=h.trigger;h.trigger=function(b){var c=l.apply(h,arguments);return a(d.drop_zone).trigger("filedrop"+b,[h].concat(a.makeArray(arguments).slice(1))),c}}var j=["ready","dragenter","dragleave","drop","error"];
return k.prototype=h.instance,k}),f("moxie/runtime/RuntimeTarget",["moxie/core/utils/Basic","moxie/runtime/RuntimeClient","moxie/core/EventTarget"],function(a,b,c){function d(){this.uid=a.guid("uid_"),b.call(this),this.destroy=function(){this.disconnectRuntime(),this.unbindAll()}}return d.prototype=c.instance,d}),f("moxie/file/FileReader",["moxie/core/utils/Basic","moxie/core/utils/Encode","moxie/core/Exceptions","moxie/core/EventTarget","moxie/file/Blob","moxie/file/File","moxie/runtime/RuntimeTarget"],function(a,b,c,d,e,f,g){function i(){function j(a,j){function k(a){d.readyState=i.DONE,d.error=a,d.trigger("error"),l()
}function l(){f.destroy(),f=null,d.trigger("loadend")}function m(b){f.bind("Error",function(a,b){k(b)}),f.bind("Progress",function(a){d.result=b.exec.call(f,"FileReader","getResult"),d.trigger(a)}),f.bind("Load",function(a){d.readyState=i.DONE,d.result=b.exec.call(f,"FileReader","getResult"),d.trigger(a),l()}),b.exec.call(f,"FileReader","read",a,j)}if(f=new g,this.convertEventPropsToHandlers(h),this.readyState===i.LOADING)return k(new c.DOMException(c.DOMException.INVALID_STATE_ERR));if(this.readyState=i.LOADING,this.trigger("loadstart"),j instanceof e)if(j.isDetached()){var n=j.getSource();
switch(a){case"readAsText":case"readAsBinaryString":this.result=n;break;case"readAsDataURL":this.result="data:"+j.type+";base64,"+b.btoa(n)}this.readyState=i.DONE,this.trigger("load"),l()}else m(f.connectRuntime(j.ruid));else k(new c.DOMException(c.DOMException.NOT_FOUND_ERR))}var f,d=this;a.extend(this,{uid:a.guid("uid_"),readyState:i.EMPTY,result:null,error:null,readAsBinaryString:function(a){j.call(this,"readAsBinaryString",a)},readAsDataURL:function(a){j.call(this,"readAsDataURL",a)},readAsText:function(a){j.call(this,"readAsText",a)
},abort:function(){this.result=null,-1===a.inArray(this.readyState,[i.EMPTY,i.DONE])&&(this.readyState===i.LOADING&&(this.readyState=i.DONE),f&&f.getRuntime().exec.call(this,"FileReader","abort"),this.trigger("abort"),this.trigger("loadend"))},destroy:function(){this.abort(),f&&(f.getRuntime().exec.call(this,"FileReader","destroy"),f.disconnectRuntime()),d=f=null}})}var h=["loadstart","progress","load","abort","error","loadend"];return i.EMPTY=0,i.LOADING=1,i.DONE=2,i.prototype=d.instance,i}),f("moxie/core/utils/Url",[],function(){var a=function(b,c){for(var d=["source","scheme","authority","userInfo","user","pass","host","port","relative","path","directory","file","query","fragment"],e=d.length,f={http:80,https:443},g={},h=/^(?:([^:\/?#]+):)?(?:\/\/()(?:(?:()(?:([^:@]*):?([^:@]*))?@)?([^:\/?#]*)(?::(\d*))?))?()(?:(()(?:(?:[^?#\/]*\/)*)()(?:[^?#]*))(?:\\?([^#]*))?(?:#(.*))?)/,i=h.exec(b||"");e--;)i[e]&&(g[d[e]]=i[e]);
if(!g.scheme){c&&"string"!=typeof c||(c=a(c||document.location.href)),g.scheme=c.scheme,g.host=c.host,g.port=c.port;var j="";/^[^\/]/.test(g.path)&&(j=c.path,/(\/|\/[^\.]+)$/.test(j)?j+="/":j=j.replace(/\/[^\/]+$/,"/")),g.path=j+(g.path||"")}return g.port||(g.port=f[g.scheme]||80),g.port=parseInt(g.port,10),g.path||(g.path="/"),delete g.source,g},b=function(b){var c={http:80,https:443},d=a(b);return d.scheme+"://"+d.host+(d.port!==c[d.scheme]?":"+d.port:"")+d.path+(d.query?d.query:"")},c=function(b){function c(a){return[a.scheme,a.host,a.port].join("/")
}return"string"==typeof b&&(b=a(b)),c(a())===c(b)};return{parseUrl:a,resolveUrl:b,hasSameOrigin:c}}),f("moxie/file/FileReaderSync",["moxie/core/utils/Basic","moxie/runtime/RuntimeClient","moxie/core/utils/Encode"],function(a,b,c){return function(){function d(a,b){if(!b.isDetached()){var h=this.connectRuntime(b.ruid).exec.call(this,"FileReaderSync","read",a,b);return this.disconnectRuntime(),h}var d=b.getSource();switch(a){case"readAsBinaryString":return d;case"readAsDataURL":return"data:"+b.type+";base64,"+c.btoa(d);
case"readAsText":for(var e="",f=0,g=d.length;g>f;f++)e+=String.fromCharCode(d[f]);return e}}b.call(this),a.extend(this,{uid:a.guid("uid_"),readAsBinaryString:function(a){return d.call(this,"readAsBinaryString",a)},readAsDataURL:function(a){return d.call(this,"readAsDataURL",a)},readAsText:function(a){return d.call(this,"readAsText",a)}})}}),f("moxie/xhr/FormData",["moxie/core/Exceptions","moxie/core/utils/Basic","moxie/file/Blob"],function(a,b,c){function d(){var a,d=[];b.extend(this,{append:function(e,f){var g=this,h=b.typeOf(f);
f instanceof c?a={name:e,value:f}:"array"===h?(e+="[]",b.each(f,function(a){g.append(e,a)})):"object"===h?b.each(f,function(a,b){g.append(e+"["+b+"]",a)}):"null"===h||"undefined"===h||"number"===h&&isNaN(f)?g.append(e,"false"):d.push({name:e,value:f.toString()})},hasBlob:function(){return!!this.getBlob()},getBlob:function(){return a&&a.value||null},getBlobName:function(){return a&&a.name||null},each:function(c){b.each(d,function(a){c(a.value,a.name)}),a&&c(a.value,a.name)},destroy:function(){a=null,d=[]}})}return d
}),f("moxie/xhr/XMLHttpRequest",["moxie/core/utils/Basic","moxie/core/Exceptions","moxie/core/EventTarget","moxie/core/utils/Encode","moxie/core/utils/Url","moxie/runtime/Runtime","moxie/runtime/RuntimeTarget","moxie/file/Blob","moxie/file/FileReaderSync","moxie/xhr/FormData","moxie/core/utils/Env","moxie/core/utils/Mime"],function(a,b,c,d,e,f,g,h,i,j,k,l){function n(){this.uid=a.guid("uid_")}function r(){function M(a,b){return i.hasOwnProperty(a)?1===arguments.length?k.can("define_property")?i[a]:c[a]:(k.can("define_property")?i[a]=b:c[a]=b,void 0):void 0
}function N(b){function d(){J&&(J.destroy(),J=null),c.dispatchEvent("loadend"),c=null}function e(e){J.bind("LoadStart",function(a){M("readyState",r.LOADING),c.dispatchEvent("readystatechange"),c.dispatchEvent(a),A&&c.upload.dispatchEvent(a)}),J.bind("Progress",function(a){M("readyState")!==r.LOADING&&(M("readyState",r.LOADING),c.dispatchEvent("readystatechange")),c.dispatchEvent(a)}),J.bind("UploadProgress",function(a){A&&c.upload.dispatchEvent({type:"progress",lengthComputable:!1,total:a.total,loaded:a.loaded})
}),J.bind("Load",function(b){M("readyState",r.DONE),M("status",Number(e.exec.call(J,"XMLHttpRequest","getStatus")||0)),M("statusText",m[M("status")]||""),M("response",e.exec.call(J,"XMLHttpRequest","getResponse",M("responseType"))),~a.inArray(M("responseType"),["text",""])?M("responseText",M("response")):"document"===M("responseType")&&M("responseXML",M("response")),K=e.exec.call(J,"XMLHttpRequest","getAllResponseHeaders"),c.dispatchEvent("readystatechange"),M("status")>0?(A&&c.upload.dispatchEvent(b),c.dispatchEvent(b)):(C=!0,c.dispatchEvent("error")),d()
}),J.bind("Abort",function(a){c.dispatchEvent(a),d()}),J.bind("Error",function(a){C=!0,M("readyState",r.DONE),c.dispatchEvent("readystatechange"),B=!0,c.dispatchEvent(a),d()}),e.exec.call(J,"XMLHttpRequest","send",{url:q,method:s,async:p,user:u,password:v,headers:t,mimeType:x,encoding:w,responseType:c.responseType,withCredentials:c.withCredentials,options:I},b)}var c=this;E=(new Date).getTime(),J=new g,"string"==typeof I.required_caps&&(I.required_caps=f.parseCaps(I.required_caps)),I.required_caps=a.extend({},I.required_caps,{return_response_type:c.responseType}),b instanceof j&&(I.required_caps.send_multipart=!0),D||(I.required_caps.do_cors=!0),I.ruid?e(J.connectRuntime(I)):(J.bind("RuntimeInit",function(a,b){e(b)
}),J.bind("RuntimeError",function(a,b){c.dispatchEvent("RuntimeError",b)}),J.connectRuntime(I))}function O(){M("responseText",""),M("responseXML",null),M("response",null),M("status",0),M("statusText",""),E=F=null}var q,s,u,v,E,F,J,L,c=this,i={timeout:0,readyState:r.UNSENT,withCredentials:!1,status:0,statusText:"",responseType:"",responseXML:null,responseText:null,response:null},p=!0,t={},w=null,x=null,y=!1,z=!1,A=!1,B=!1,C=!1,D=!1,G=null,H=null,I={},K="";a.extend(this,i,{uid:a.guid("uid_"),upload:new n,open:function(c,f,g,h,i){var j;
if(!c||!f)throw new b.DOMException(b.DOMException.SYNTAX_ERR);if(/[\u0100-\uffff]/.test(c)||d.utf8_encode(c)!==c)throw new b.DOMException(b.DOMException.SYNTAX_ERR);if(~a.inArray(c.toUpperCase(),["CONNECT","DELETE","GET","HEAD","OPTIONS","POST","PUT","TRACE","TRACK"])&&(s=c.toUpperCase()),~a.inArray(s,["CONNECT","TRACE","TRACK"]))throw new b.DOMException(b.DOMException.SECURITY_ERR);if(f=d.utf8_encode(f),j=e.parseUrl(f),D=e.hasSameOrigin(j),q=e.resolveUrl(f),(h||i)&&!D)throw new b.DOMException(b.DOMException.INVALID_ACCESS_ERR);
if(u=h||j.user,v=i||j.pass,p=g||!0,p===!1&&(M("timeout")||M("withCredentials")||""!==M("responseType")))throw new b.DOMException(b.DOMException.INVALID_ACCESS_ERR);y=!p,z=!1,t={},O.call(this),M("readyState",r.OPENED),this.convertEventPropsToHandlers(["readystatechange"]),this.dispatchEvent("readystatechange")},setRequestHeader:function(c,e){var f=["accept-charset","accept-encoding","access-control-request-headers","access-control-request-method","connection","content-length","cookie","cookie2","content-transfer-encoding","date","expect","host","keep-alive","origin","referer","te","trailer","transfer-encoding","upgrade","user-agent","via"];
if(M("readyState")!==r.OPENED||z)throw new b.DOMException(b.DOMException.INVALID_STATE_ERR);if(/[\u0100-\uffff]/.test(c)||d.utf8_encode(c)!==c)throw new b.DOMException(b.DOMException.SYNTAX_ERR);return c=a.trim(c).toLowerCase(),~a.inArray(c,f)||/^(proxy\-|sec\-)/.test(c)?!1:(t[c]?t[c]+=", "+e:t[c]=e,!0)},getAllResponseHeaders:function(){return K||""},getResponseHeader:function(b){return b=b.toLowerCase(),C||~a.inArray(b,["set-cookie","set-cookie2"])?null:K&&""!==K&&(L||(L={},a.each(K.split(/\r\n/),function(b){var c=b.split(/:\s+/);
2===c.length&&(c[0]=a.trim(c[0]),L[c[0].toLowerCase()]={header:c[0],value:a.trim(c[1])})})),L.hasOwnProperty(b))?L[b].header+": "+L[b].value:null},overrideMimeType:function(c){var d,e;if(~a.inArray(M("readyState"),[r.LOADING,r.DONE]))throw new b.DOMException(b.DOMException.INVALID_STATE_ERR);if(c=a.trim(c.toLowerCase()),/;/.test(c)&&(d=c.match(/^([^;]+)(?:;\scharset\=)?(.*)$/))&&(c=d[1],d[2]&&(e=d[2])),!l.mimes[c])throw new b.DOMException(b.DOMException.SYNTAX_ERR);G=c,H=e},send:function(c,e){if(I="string"===a.typeOf(e)?{ruid:e}:e?e:{},this.convertEventPropsToHandlers(o),this.upload.convertEventPropsToHandlers(o),this.readyState!==r.OPENED||z)throw new b.DOMException(b.DOMException.INVALID_STATE_ERR);
if(c instanceof h)I.ruid=c.ruid,x=c.type||"application/octet-stream";else if(c instanceof j){if(c.hasBlob()){var f=c.getBlob();I.ruid=f.ruid,x=f.type||"application/octet-stream"}}else"string"==typeof c&&(w="UTF-8",x="text/plain;charset=UTF-8",c=d.utf8_encode(c));this.withCredentials||(this.withCredentials=I.required_caps&&I.required_caps.send_browser_cookies&&!D),A=!y&&this.upload.hasEventListener(),C=!1,B=!c,y||(z=!0),N.call(this,c)},abort:function(){if(C=!0,y=!1,~a.inArray(M("readyState"),[r.UNSENT,r.OPENED,r.DONE]))M("readyState",r.UNSENT);
else{if(M("readyState",r.DONE),z=!1,!J)throw new b.DOMException(b.DOMException.INVALID_STATE_ERR);J.getRuntime().exec.call(J,"XMLHttpRequest","abort",B),B=!0}},destroy:function(){J&&("function"===a.typeOf(J.destroy)&&J.destroy(),J=null),this.unbindAll(),this.upload&&(this.upload.unbindAll(),this.upload=null)}})}var m={100:"Continue",101:"Switching Protocols",102:"Processing",200:"OK",201:"Created",202:"Accepted",203:"Non-Authoritative Information",204:"No Content",205:"Reset Content",206:"Partial Content",207:"Multi-Status",226:"IM Used",300:"Multiple Choices",301:"Moved Permanently",302:"Found",303:"See Other",304:"Not Modified",305:"Use Proxy",306:"Reserved",307:"Temporary Redirect",400:"Bad Request",401:"Unauthorized",402:"Payment Required",403:"Forbidden",404:"Not Found",405:"Method Not Allowed",406:"Not Acceptable",407:"Proxy Authentication Required",408:"Request Timeout",409:"Conflict",410:"Gone",411:"Length Required",412:"Precondition Failed",413:"Request Entity Too Large",414:"Request-URI Too Long",415:"Unsupported Media Type",416:"Requested Range Not Satisfiable",417:"Expectation Failed",422:"Unprocessable Entity",423:"Locked",424:"Failed Dependency",426:"Upgrade Required",500:"Internal Server Error",501:"Not Implemented",502:"Bad Gateway",503:"Service Unavailable",504:"Gateway Timeout",505:"HTTP Version Not Supported",506:"Variant Also Negotiates",507:"Insufficient Storage",510:"Not Extended"};
n.prototype=c.instance;var o=["loadstart","progress","abort","error","load","timeout","loadend"];return r.UNSENT=0,r.OPENED=1,r.HEADERS_RECEIVED=2,r.LOADING=3,r.DONE=4,r.prototype=c.instance,r}),f("moxie/runtime/Transporter",["moxie/core/utils/Basic","moxie/core/utils/Encode","moxie/runtime/RuntimeClient","moxie/core/EventTarget"],function(a,b,c,d){function e(){function k(){h=i=0,g=this.result=null}function l(b,c){var d=this;f=c,d.bind("TransportingProgress",function(b){i=b.loaded,h>i&&-1===a.inArray(d.state,[e.IDLE,e.DONE])&&m.call(d)
},999),d.bind("TransportingComplete",function(){i=h,d.state=e.DONE,g=null,d.result=f.exec.call(d,"Transporter","getAsBlob",b||"")},999),d.state=e.BUSY,d.trigger("TransportingStarted"),m.call(d)}function m(){var c,a=this,d=h-i;j>d&&(j=d),c=b.btoa(g.substr(i,j)),f.exec.call(a,"Transporter","receive",c,h)}var d,f,g,h,i,j;c.call(this),a.extend(this,{uid:a.guid("uid_"),state:e.IDLE,result:null,transport:function(b,c,e){var f=this;if(e=a.extend({chunk_size:204798},e),(d=e.chunk_size%3)&&(e.chunk_size+=3-d),j=e.chunk_size,k.call(this),g=b,h=b.length,"string"===a.typeOf(e)||e.ruid)l.call(f,c,this.connectRuntime(e));
else{var i=function(a,b){f.unbind("RuntimeInit",i),l.call(f,c,b)};this.bind("RuntimeInit",i),this.connectRuntime(e)}},abort:function(){var a=this;a.state=e.IDLE,f&&(f.exec.call(a,"Transporter","clear"),a.trigger("TransportingAborted")),k.call(a)},destroy:function(){this.unbindAll(),f=null,this.disconnectRuntime(),k.call(this)}})}return e.IDLE=0,e.BUSY=1,e.DONE=2,e.prototype=d.instance,e}),f("moxie/image/Image",["moxie/core/utils/Basic","moxie/core/utils/Dom","moxie/core/Exceptions","moxie/file/FileReaderSync","moxie/xhr/XMLHttpRequest","moxie/runtime/Runtime","moxie/runtime/RuntimeClient","moxie/runtime/Transporter","moxie/core/utils/Env","moxie/core/EventTarget","moxie/file/Blob","moxie/file/File","moxie/core/utils/Encode"],function(a,b,c,d,e,f,g,h,i,j,k,l,m){function o(){function d(a){a||(a=this.getRuntime().exec.call(this,"Image","getInfo")),this.size=a.size,this.width=a.width,this.height=a.height,this.type=a.type,this.meta=a.meta,""===this.name&&(this.name=a.name)
}function j(b){var d=a.typeOf(b);try{if(b instanceof o){if(!b.size)throw new c.DOMException(c.DOMException.INVALID_STATE_ERR);p.apply(this,arguments)}else if(b instanceof k){if(!~a.inArray(b.type,["image/jpeg","image/png"]))throw new c.ImageError(c.ImageError.WRONG_FORMAT);q.apply(this,arguments)}else if(-1!==a.inArray(d,["blob","file"]))j.call(this,new l(null,b),arguments[1]);else if("string"===d)/^data:[^;]*;base64,/.test(b)?j.call(this,new k(null,{data:b}),arguments[1]):r.apply(this,arguments);else{if("node"!==d||"img"!==b.nodeName.toLowerCase())throw new c.DOMException(c.DOMException.TYPE_MISMATCH_ERR);
j.call(this,b.src,arguments[1])}}catch(e){this.trigger("error",e.code)}}function p(b,c){var d=this.connectRuntime(b.ruid);this.ruid=d.uid,d.exec.call(this,"Image","loadFromImage",b,"undefined"===a.typeOf(c)?!0:c)}function q(b,c){function e(a){d.ruid=a.uid,a.exec.call(d,"Image","loadFromBlob",b)}var d=this;d.name=b.name||"",b.isDetached()?(this.bind("RuntimeInit",function(a,b){e(b)}),c&&"string"==typeof c.required_caps&&(c.required_caps=f.parseCaps(c.required_caps)),this.connectRuntime(a.extend({required_caps:{access_image_binary:!0,resize_image:!0}},c))):e(this.connectRuntime(b.ruid))
}function r(a,b){var d,c=this;d=new e,d.open("get",a),d.responseType="blob",d.onprogress=function(a){c.trigger(a)},d.onload=function(){q.call(c,d.response,!0)},d.onerror=function(a){c.trigger(a)},d.onloadend=function(){d.destroy()},d.bind("RuntimeError",function(a,b){c.trigger("RuntimeError",b)}),d.send(null,b)}g.call(this),a.extend(this,{uid:a.guid("uid_"),ruid:null,name:"",size:0,width:0,height:0,type:"",meta:{},clone:function(){this.load.apply(this,arguments)},load:function(){this.bind("Load Resize",function(){d.call(this)
},999),this.convertEventPropsToHandlers(n),j.apply(this,arguments)},downsize:function(b){var d={width:this.width,height:this.height,crop:!1,preserveHeaders:!0};b="object"==typeof b?a.extend(d,b):a.extend(d,{width:arguments[0],height:arguments[1],crop:arguments[2],preserveHeaders:arguments[3]});try{if(!this.size)throw new c.DOMException(c.DOMException.INVALID_STATE_ERR);if(this.width>o.MAX_RESIZE_WIDTH||this.height>o.MAX_RESIZE_HEIGHT)throw new c.ImageError(c.ImageError.MAX_RESOLUTION_ERR);this.getRuntime().exec.call(this,"Image","downsize",b.width,b.height,b.crop,b.preserveHeaders)
}catch(e){this.trigger("error",e.code)}},crop:function(a,b,c){this.downsize(a,b,!0,c)},getAsCanvas:function(){if(!i.can("create_canvas"))throw new c.RuntimeError(c.RuntimeError.NOT_SUPPORTED_ERR);var a=this.connectRuntime(this.ruid);return a.exec.call(this,"Image","getAsCanvas")},getAsBlob:function(a,b){if(!this.size)throw new c.DOMException(c.DOMException.INVALID_STATE_ERR);return a||(a="image/jpeg"),"image/jpeg"!==a||b||(b=90),this.getRuntime().exec.call(this,"Image","getAsBlob",a,b)},getAsDataURL:function(a,b){if(!this.size)throw new c.DOMException(c.DOMException.INVALID_STATE_ERR);
return this.getRuntime().exec.call(this,"Image","getAsDataURL",a,b)},getAsBinaryString:function(a,b){var c=this.getAsDataURL(a,b);return m.atob(c.substring(c.indexOf("base64,")+7))},embed:function(d){function r(){if(i.can("create_canvas")){var b=f.getAsCanvas();if(b)return d.appendChild(b),b=null,f.destroy(),e.trigger("embedded"),void 0}var k=f.getAsDataURL(g,j);if(!k)throw new c.ImageError(c.ImageError.WRONG_FORMAT);if(i.can("use_data_uri_of",k.length))d.innerHTML='<img src="'+k+'" width="'+f.width+'" height="'+f.height+'" />',f.destroy(),e.trigger("embedded");
else{var o=new h;o.bind("TransportingComplete",function(){q=e.connectRuntime(this.result.ruid),e.bind("Embedded",function(){a.extend(q.getShimContainer().style,{top:"0px",left:"0px",width:f.width+"px",height:f.height+"px"}),q=null},999),q.exec.call(e,"ImageView","display",this.result.uid,n,p),f.destroy()}),o.transport(m.atob(k.substring(k.indexOf("base64,")+7)),g,a.extend({},l,{required_caps:{display_media:!0},runtime_order:"flash,silverlight",container:d}))}}var f,g,j,k,q,e=this,l=arguments[1]||{},n=this.width,p=this.height;
try{if(!(d=b.get(d)))throw new c.DOMException(c.DOMException.INVALID_NODE_TYPE_ERR);if(!this.size)throw new c.DOMException(c.DOMException.INVALID_STATE_ERR);if(this.width>o.MAX_RESIZE_WIDTH||this.height>o.MAX_RESIZE_HEIGHT)throw new c.ImageError(c.ImageError.MAX_RESOLUTION_ERR);if(g=l.type||this.type||"image/jpeg",j=l.quality||90,k="undefined"!==a.typeOf(l.crop)?l.crop:!1,l.width)n=l.width,p=l.height||n;else{var s=b.getSize(d);s.w&&s.h&&(n=s.w,p=s.h)}return f=new o,f.bind("Resize",function(){r.call(e)}),f.bind("Load",function(){f.downsize(n,p,k,!1)
}),f.clone(this,!1),f}catch(t){this.trigger("error",t.code)}},destroy:function(){this.ruid&&(this.getRuntime().exec.call(this,"Image","destroy"),this.disconnectRuntime()),this.unbindAll()}})}var n=["progress","load","error","resize","embedded"];return o.MAX_RESIZE_WIDTH=6500,o.MAX_RESIZE_HEIGHT=6500,o.prototype=j.instance,o}),f("moxie/runtime/html5/Runtime",["moxie/core/utils/Basic","moxie/core/Exceptions","moxie/runtime/Runtime","moxie/core/utils/Env"],function(a,b,c,d){function g(b){var g=this,h=c.capTest,i=c.capTrue,j=a.extend({access_binary:h(window.FileReader||window.File&&window.File.getAsDataURL),access_image_binary:function(){return g.can("access_binary")&&!!f.Image
},display_media:h(d.can("create_canvas")||d.can("use_data_uri_over32kb")),do_cors:h(window.XMLHttpRequest&&"withCredentials"in new XMLHttpRequest),drag_and_drop:h(function(){var a=document.createElement("div");return("draggable"in a||"ondragstart"in a&&"ondrop"in a)&&("IE"!==d.browser||d.version>9)}()),filter_by_extension:h(function(){return"Chrome"===d.browser&&d.version>=28||"IE"===d.browser&&d.version>=10}()),return_response_headers:i,return_response_type:function(a){return"json"===a&&window.JSON?!0:d.can("return_response_type",a)
},return_status_code:i,report_upload_progress:h(window.XMLHttpRequest&&(new XMLHttpRequest).upload),resize_image:function(){return g.can("access_binary")&&d.can("create_canvas")},select_file:function(){return d.can("use_fileinput")&&window.File},select_folder:function(){return g.can("select_file")&&"Chrome"===d.browser&&d.version>=21},select_multiple:function(){return!(!g.can("select_file")||"Safari"===d.browser&&"Windows"===d.os||"iOS"===d.os&&d.verComp(d.osVersion,"7.0.4","<"))},send_binary_string:h(window.XMLHttpRequest&&((new XMLHttpRequest).sendAsBinary||window.Uint8Array&&window.ArrayBuffer)),send_custom_headers:h(window.XMLHttpRequest),send_multipart:function(){return!!(window.XMLHttpRequest&&(new XMLHttpRequest).upload&&window.FormData)||g.can("send_binary_string")
},slice_blob:h(window.File&&(File.prototype.mozSlice||File.prototype.webkitSlice||File.prototype.slice)),stream_upload:function(){return g.can("slice_blob")&&g.can("send_multipart")},summon_file_dialog:h(function(){return"Firefox"===d.browser&&d.version>=4||"Opera"===d.browser&&d.version>=12||"IE"===d.browser&&d.version>=10||!!~a.inArray(d.browser,["Chrome","Safari"])}()),upload_filesize:i},arguments[2]);c.call(this,b,arguments[1]||e,j),a.extend(this,{init:function(){this.trigger("Init")},destroy:function(a){return function(){a.call(g),a=g=null
}}(this.destroy)}),a.extend(this.getShim(),f)}var e="html5",f={};return c.addConstructor(e,g),f}),f("moxie/runtime/html5/file/Blob",["moxie/runtime/html5/Runtime","moxie/file/Blob"],function(a,b){function c(){function a(a,b,c){var d;if(!window.File.prototype.slice)return(d=window.File.prototype.webkitSlice||window.File.prototype.mozSlice)?d.call(a,b,c):null;try{return a.slice(),a.slice(b,c)}catch(e){return a.slice(b,c-b)}}this.slice=function(){return new b(this.getRuntime().uid,a.apply(this,arguments))}}return a.Blob=c
}),f("moxie/core/utils/Events",["moxie/core/utils/Basic"],function(a){function d(){this.returnValue=!1}function e(){this.cancelBubble=!0}var b={},c="moxie_"+a.guid(),f=function(f,g,h,i){var j,k;g=g.toLowerCase(),f.addEventListener?(j=h,f.addEventListener(g,j,!1)):f.attachEvent&&(j=function(){var a=window.event;a.target||(a.target=a.srcElement),a.preventDefault=d,a.stopPropagation=e,h(a)},f.attachEvent("on"+g,j)),f[c]||(f[c]=a.guid()),b.hasOwnProperty(f[c])||(b[f[c]]={}),k=b[f[c]],k.hasOwnProperty(g)||(k[g]=[]),k[g].push({func:j,orig:h,key:i})
},g=function(d,e,f){var g,h;if(e=e.toLowerCase(),d[c]&&b[d[c]]&&b[d[c]][e]){g=b[d[c]][e];for(var i=g.length-1;i>=0&&(g[i].orig!==f&&g[i].key!==f||(d.removeEventListener?d.removeEventListener(e,g[i].func,!1):d.detachEvent&&d.detachEvent("on"+e,g[i].func),g[i].orig=null,g[i].func=null,g.splice(i,1),f===h));i--);if(g.length||delete b[d[c]][e],a.isEmptyObj(b[d[c]])){delete b[d[c]];try{delete d[c]}catch(j){d[c]=h}}}},h=function(d,e){d&&d[c]&&a.each(b[d[c]],function(a,b){g(d,b,e)})};return{addEvent:f,removeEvent:g,removeAllEvents:h}
}),f("moxie/runtime/html5/file/FileInput",["moxie/runtime/html5/Runtime","moxie/core/utils/Basic","moxie/core/utils/Dom","moxie/core/utils/Events","moxie/core/utils/Mime","moxie/core/utils/Env"],function(a,b,c,d,e,f){function g(){var g,a=[];b.extend(this,{init:function(h){var k,l,m,n,o,p,i=this,j=i.getRuntime();g=h,a=[],m=g.accept.mimes||e.extList2mimes(g.accept,j.can("filter_by_extension")),l=j.getShimContainer(),l.innerHTML='<input id="'+j.uid+'" type="file" style="font-size:999px;opacity:0;"'+(g.multiple&&j.can("select_multiple")?"multiple":"")+(g.directory&&j.can("select_folder")?"webkitdirectory directory":"")+(m?' accept="'+m.join(",")+'"':"")+" />",k=c.get(j.uid),b.extend(k.style,{position:"absolute",top:0,left:0,width:"100%",height:"100%"}),n=c.get(g.browse_button),j.can("summon_file_dialog")&&("static"===c.getStyle(n,"position")&&(n.style.position="relative"),o=parseInt(c.getStyle(n,"z-index"),10)||1,n.style.zIndex=o,l.style.zIndex=o-1,d.addEvent(n,"click",function(a){var b=c.get(j.uid);
b&&!b.disabled&&b.click(),a.preventDefault()},i.uid)),p=j.can("summon_file_dialog")?n:l,d.addEvent(p,"mouseover",function(){i.trigger("mouseenter")},i.uid),d.addEvent(p,"mouseout",function(){i.trigger("mouseleave")},i.uid),d.addEvent(p,"mousedown",function(){i.trigger("mousedown")},i.uid),d.addEvent(c.get(g.container),"mouseup",function(){i.trigger("mouseup")},i.uid),k.onchange=function q(){if(a=[],g.directory?b.each(this.files,function(b){"."!==b.name&&a.push(b)}):a=[].slice.call(this.files),"IE"!==f.browser&&"IEMobile"!==f.browser)this.value="";
else{var c=this.cloneNode(!0);this.parentNode.replaceChild(c,this),c.onchange=q}i.trigger("change")},i.trigger({type:"ready",async:!0}),l=null},getFiles:function(){return a},disable:function(a){var d,b=this.getRuntime();(d=c.get(b.uid))&&(d.disabled=!!a)},destroy:function(){var b=this.getRuntime(),e=b.getShim(),f=b.getShimContainer();d.removeAllEvents(f,this.uid),d.removeAllEvents(g&&c.get(g.container),this.uid),d.removeAllEvents(g&&c.get(g.browse_button),this.uid),f&&(f.innerHTML=""),e.removeInstance(this.uid),a=g=f=e=null
}})}return a.FileInput=g}),f("moxie/runtime/html5/file/FileDrop",["moxie/runtime/html5/Runtime","moxie/core/utils/Basic","moxie/core/utils/Dom","moxie/core/utils/Events","moxie/core/utils/Mime"],function(a,b,c,d,e){function f(){function h(a){if(!a.dataTransfer||!a.dataTransfer.types)return!1;var c=b.toArray(a.dataTransfer.types||[]);return-1!==b.inArray("Files",c)||-1!==b.inArray("public.file-url",c)||-1!==b.inArray("application/x-moz-file",c)}function i(a){for(var c=[],d=0;d<a.length;d++)[].push.apply(c,a[d].extensions.split(/\s*,\s*/));
return-1===b.inArray("*",c)?c:[]}function j(a){if(!f.length)return!0;var c=e.getFileExtension(a.name);return!c||-1!==b.inArray(c,f)}function k(c,d){var e=[];b.each(c,function(b){var c=b.webkitGetAsEntry();if(c)if(c.isFile){var d=b.getAsFile();j(d)&&a.push(d)}else e.push(c)}),e.length?l(e,d):d()}function l(a,c){var d=[];b.each(a,function(a){d.push(function(b){m(a,b)})}),b.inSeries(d,function(){c()})}function m(b,c){b.isFile?b.file(function(b){j(b)&&a.push(b),c()},function(){c()}):b.isDirectory?n(b,c):c()}function n(a,b){function e(a){d.readEntries(function(b){b.length?([].push.apply(c,b),e(a)):a()
},a)}var c=[],d=a.createReader();e(function(){l(c,b)})}var g,a=[],f=[];b.extend(this,{init:function(c){var l,e=this;g=c,f=i(g.accept),l=g.container,d.addEvent(l,"dragover",function(a){h(a)&&(a.preventDefault(),a.dataTransfer.dropEffect="copy")},e.uid),d.addEvent(l,"drop",function(c){h(c)&&(c.preventDefault(),a=[],c.dataTransfer.items&&c.dataTransfer.items[0].webkitGetAsEntry?k(c.dataTransfer.items,function(){e.trigger("drop")}):(b.each(c.dataTransfer.files,function(b){j(b)&&a.push(b)}),e.trigger("drop")))},e.uid),d.addEvent(l,"dragenter",function(){e.trigger("dragenter")
},e.uid),d.addEvent(l,"dragleave",function(){e.trigger("dragleave")},e.uid)},getFiles:function(){return a},destroy:function(){d.removeAllEvents(g&&c.get(g.container),this.uid),a=f=g=null}})}return a.FileDrop=f}),f("moxie/runtime/html5/file/FileReader",["moxie/runtime/html5/Runtime","moxie/core/utils/Encode","moxie/core/utils/Basic"],function(a,b,c){function d(){function e(a){return b.atob(a.substring(a.indexOf("base64,")+7))}var a,d=!1;c.extend(this,{read:function(b,e){var f=this;a=new window.FileReader,a.addEventListener("progress",function(a){f.trigger(a)
}),a.addEventListener("load",function(a){f.trigger(a)}),a.addEventListener("error",function(b){f.trigger(b,a.error)}),a.addEventListener("loadend",function(){a=null}),"function"===c.typeOf(a[b])?(d=!1,a[b](e.getSource())):"readAsBinaryString"===b&&(d=!0,a.readAsDataURL(e.getSource()))},getResult:function(){return a&&a.result?d?e(a.result):a.result:null},abort:function(){a&&a.abort()},destroy:function(){a=null}})}return a.FileReader=d}),f("moxie/runtime/html5/xhr/XMLHttpRequest",["moxie/runtime/html5/Runtime","moxie/core/utils/Basic","moxie/core/utils/Mime","moxie/core/utils/Url","moxie/file/File","moxie/file/Blob","moxie/xhr/FormData","moxie/core/Exceptions","moxie/core/utils/Env"],function(a,b,c,d,e,f,g,h,i){function j(){function l(b,c){var e,g,d=this;
e=c.getBlob().getSource(),g=new window.FileReader,g.onload=function(){c.append(c.getBlobName(),new f(null,{type:e.type,data:g.result})),a.send.call(d,b,c)},g.readAsBinaryString(e)}function m(){return!window.XMLHttpRequest||"IE"===i.browser&&i.version<8?function(){for(var a=["Msxml2.XMLHTTP.6.0","Microsoft.XMLHTTP"],b=0;b<a.length;b++)try{return new ActiveXObject(a[b])}catch(c){}}():new window.XMLHttpRequest}function n(a){var b=a.responseXML,c=a.responseText;return"IE"===i.browser&&c&&b&&!b.documentElement&&/[^\/]+\/[^\+]+\+xml/.test(a.getResponseHeader("Content-Type"))&&(b=new window.ActiveXObject("Microsoft.XMLDOM"),b.async=!1,b.validateOnParse=!1,b.loadXML(c)),b&&("IE"===i.browser&&0!==b.parseError||!b.documentElement||"parsererror"===b.documentElement.tagName)?null:b
}function o(a){var b="----moxieboundary"+(new Date).getTime(),c="--",d="\r\n",e="",g=this.getRuntime();if(!g.can("send_binary_string"))throw new h.RuntimeError(h.RuntimeError.NOT_SUPPORTED_ERR);return j.setRequestHeader("Content-Type","multipart/form-data; boundary="+b),a.each(function(a,g){e+=a instanceof f?c+b+d+'Content-Disposition: form-data; name="'+g+'"; filename="'+unescape(encodeURIComponent(a.name||"blob"))+'"'+d+"Content-Type: "+(a.type||"application/octet-stream")+d+d+a.getSource()+d:c+b+d+'Content-Disposition: form-data; name="'+g+'"'+d+d+unescape(encodeURIComponent(a))+d
}),e+=c+b+c+d}var j,k,a=this;b.extend(this,{send:function(a,c){var e=this,h="Mozilla"===i.browser&&i.version>=4&&i.version<7,n="Android Browser"===i.browser,p=!1;if(k=a.url.replace(/^.+?\/([\w\-\.]+)$/,"$1").toLowerCase(),j=m(),j.open(a.method,a.url,a.async,a.user,a.password),c instanceof f)c.isDetached()&&(p=!0),c=c.getSource();else if(c instanceof g){if(c.hasBlob())if(c.getBlob().isDetached())c=o.call(e,c),p=!0;else if((h||n)&&"blob"===b.typeOf(c.getBlob().getSource())&&window.FileReader)return l.call(e,a,c),void 0;
if(c instanceof g){var q=new window.FormData;c.each(function(a,b){a instanceof f?q.append(b,a.getSource()):q.append(b,a)}),c=q}}j.upload?(a.withCredentials&&(j.withCredentials=!0),j.addEventListener("load",function(a){e.trigger(a)}),j.addEventListener("error",function(a){e.trigger(a)}),j.addEventListener("progress",function(a){e.trigger(a)}),j.upload.addEventListener("progress",function(a){e.trigger({type:"UploadProgress",loaded:a.loaded,total:a.total})})):j.onreadystatechange=function(){switch(j.readyState){case 1:break;
case 2:break;case 3:var b,c;try{d.hasSameOrigin(a.url)&&(b=j.getResponseHeader("Content-Length")||0),j.responseText&&(c=j.responseText.length)}catch(f){b=c=0}e.trigger({type:"progress",lengthComputable:!!b,total:parseInt(b,10),loaded:c});break;case 4:j.onreadystatechange=function(){},0===j.status?e.trigger("error"):e.trigger("load")}},b.isEmptyObj(a.headers)||b.each(a.headers,function(a,b){j.setRequestHeader(b,a)}),""!==a.responseType&&"responseType"in j&&(j.responseType="json"!==a.responseType||i.can("return_response_type","json")?a.responseType:"text"),p?j.sendAsBinary?j.sendAsBinary(c):!function(){for(var a=new Uint8Array(c.length),b=0;b<c.length;b++)a[b]=255&c.charCodeAt(b);
j.send(a.buffer)}():j.send(c),e.trigger("loadstart")},getStatus:function(){try{if(j)return j.status}catch(a){}return 0},getResponse:function(a){var b=this.getRuntime();try{switch(a){case"blob":var d=new e(b.uid,j.response),f=j.getResponseHeader("Content-Disposition");if(f){var g=f.match(/filename=([\'\"'])([^\1]+)\1/);g&&(k=g[2])}return d.name=k,d.type||(d.type=c.getFileMime(k)),d;case"json":return i.can("return_response_type","json")?j.response:200===j.status&&window.JSON?JSON.parse(j.responseText):null;case"document":return n(j);
default:return""!==j.responseText?j.responseText:null}}catch(h){return null}},getAllResponseHeaders:function(){try{return j.getAllResponseHeaders()}catch(a){}return""},abort:function(){j&&j.abort()},destroy:function(){a=k=null}})}return a.XMLHttpRequest=j}),f("moxie/runtime/html5/utils/BinaryReader",[],function(){return function(){function d(c,d){var g,e=a?0:-8*(d-1),f=0;for(g=0;d>g;g++)f|=b.charCodeAt(c+g)<<Math.abs(e+8*g);return f}function e(a,c,d){d=3===arguments.length?d:b.length-c-1,b=b.substr(0,c)+a+b.substr(d+c)
}function f(b,c,d){var h,f="",g=a?0:-8*(d-1);for(h=0;d>h;h++)f+=String.fromCharCode(c>>Math.abs(g+8*h)&255);e(f,b,d)}var b,a=!1;return{II:function(b){return b===c?a:(a=b,void 0)},init:function(c){a=!1,b=c},SEGMENT:function(a,c,d){switch(arguments.length){case 1:return b.substr(a,b.length-a-1);case 2:return b.substr(a,c);case 3:e(d,a,c);break;default:return b}},BYTE:function(a){return d(a,1)},SHORT:function(a){return d(a,2)},LONG:function(a,b){return b===c?d(a,4):(f(a,b,4),void 0)},SLONG:function(a){var b=d(a,4);
return b>2147483647?b-4294967296:b},STRING:function(a,b){var c="";for(b+=a;b>a;a++)c+=String.fromCharCode(d(a,1));return c}}}}),f("moxie/runtime/html5/image/JPEGHeaders",["moxie/runtime/html5/utils/BinaryReader"],function(a){return function b(c){var e,f,g,d=[],h=0;if(e=new a,e.init(c),65496===e.SHORT(0)){for(f=2;f<=c.length;)if(g=e.SHORT(f),g>=65488&&65495>=g)f+=2;else{if(65498===g||65497===g)break;h=e.SHORT(f+2)+2,g>=65505&&65519>=g&&d.push({hex:g,name:"APP"+(15&g),start:f,length:h,segment:e.SEGMENT(f,h)}),f+=h
}return e.init(null),{headers:d,restore:function(a){var b,c;for(e.init(a),f=65504==e.SHORT(2)?4+e.SHORT(4):2,c=0,b=d.length;b>c;c++)e.SEGMENT(f,0,d[c].segment),f+=d[c].length;return a=e.SEGMENT(),e.init(null),a},strip:function(a){var c,d,f;for(d=new b(a),c=d.headers,d.purge(),e.init(a),f=c.length;f--;)e.SEGMENT(c[f].start,c[f].length,"");return a=e.SEGMENT(),e.init(null),a},get:function(a){for(var b=[],c=0,e=d.length;e>c;c++)d[c].name===a.toUpperCase()&&b.push(d[c].segment);return b},set:function(a,b){var e,f,g,c=[];
for("string"==typeof b?c.push(b):c=b,e=f=0,g=d.length;g>e&&(d[e].name===a.toUpperCase()&&(d[e].segment=c[f],d[e].length=c[f].length,f++),!(f>=c.length));e++);},purge:function(){d=[],e.init(null),e=null}}}}}),f("moxie/runtime/html5/image/ExifParser",["moxie/core/utils/Basic","moxie/runtime/html5/utils/BinaryReader"],function(a,b){return function(){function i(a,b){var f,i,j,k,l,m,n,o,e=d.SHORT(a),p=[],q={};for(f=0;e>f;f++)if(n=m=a+12*f+2,j=b[d.SHORT(n)],j!==c){switch(k=d.SHORT(n+=2),l=d.LONG(n+=2),n+=4,p=[],k){case 1:case 7:for(l>4&&(n=d.LONG(n)+g.tiffHeader),i=0;l>i;i++)p[i]=d.BYTE(n+i);
break;case 2:l>4&&(n=d.LONG(n)+g.tiffHeader),q[j]=d.STRING(n,l-1);continue;case 3:for(l>2&&(n=d.LONG(n)+g.tiffHeader),i=0;l>i;i++)p[i]=d.SHORT(n+2*i);break;case 4:for(l>1&&(n=d.LONG(n)+g.tiffHeader),i=0;l>i;i++)p[i]=d.LONG(n+4*i);break;case 5:for(n=d.LONG(n)+g.tiffHeader,i=0;l>i;i++)p[i]=d.LONG(n+4*i)/d.LONG(n+4*i+4);break;case 9:for(n=d.LONG(n)+g.tiffHeader,i=0;l>i;i++)p[i]=d.SLONG(n+4*i);break;case 10:for(n=d.LONG(n)+g.tiffHeader,i=0;l>i;i++)p[i]=d.SLONG(n+4*i)/d.SLONG(n+4*i+4);break;default:continue}o=1==l?p[0]:p,q[j]=h.hasOwnProperty(j)&&"object"!=typeof o?h[j][o]:o
}return q}function j(){var a=g.tiffHeader;return d.II(18761==d.SHORT(a)),42!==d.SHORT(a+=2)?!1:(g.IFD0=g.tiffHeader+d.LONG(a+=2),f=i(g.IFD0,e.tiff),"ExifIFDPointer"in f&&(g.exifIFD=g.tiffHeader+f.ExifIFDPointer,delete f.ExifIFDPointer),"GPSInfoIFDPointer"in f&&(g.gpsIFD=g.tiffHeader+f.GPSInfoIFDPointer,delete f.GPSInfoIFDPointer),!0)}function k(a,b,c){var f,h,i,j=0;if("string"==typeof b){var k=e[a.toLowerCase()];for(var l in k)if(k[l]===b){b=l;break}}f=g[a.toLowerCase()+"IFD"],h=d.SHORT(f);for(var m=0;h>m;m++)if(i=f+12*m+2,d.SHORT(i)==b){j=i+8;
break}return j?(d.LONG(j,c),!0):!1}var d,e,f,h,g={};return d=new b,e={tiff:{274:"Orientation",270:"ImageDescription",271:"Make",272:"Model",305:"Software",34665:"ExifIFDPointer",34853:"GPSInfoIFDPointer"},exif:{36864:"ExifVersion",40961:"ColorSpace",40962:"PixelXDimension",40963:"PixelYDimension",36867:"DateTimeOriginal",33434:"ExposureTime",33437:"FNumber",34855:"ISOSpeedRatings",37377:"ShutterSpeedValue",37378:"ApertureValue",37383:"MeteringMode",37384:"LightSource",37385:"Flash",37386:"FocalLength",41986:"ExposureMode",41987:"WhiteBalance",41990:"SceneCaptureType",41988:"DigitalZoomRatio",41992:"Contrast",41993:"Saturation",41994:"Sharpness"},gps:{0:"GPSVersionID",1:"GPSLatitudeRef",2:"GPSLatitude",3:"GPSLongitudeRef",4:"GPSLongitude"}},h={ColorSpace:{1:"sRGB",0:"Uncalibrated"},MeteringMode:{0:"Unknown",1:"Average",2:"CenterWeightedAverage",3:"Spot",4:"MultiSpot",5:"Pattern",6:"Partial",255:"Other"},LightSource:{1:"Daylight",2:"Fliorescent",3:"Tungsten",4:"Flash",9:"Fine weather",10:"Cloudy weather",11:"Shade",12:"Daylight fluorescent (D 5700 - 7100K)",13:"Day white fluorescent (N 4600 -5400K)",14:"Cool white fluorescent (W 3900 - 4500K)",15:"White fluorescent (WW 3200 - 3700K)",17:"Standard light A",18:"Standard light B",19:"Standard light C",20:"D55",21:"D65",22:"D75",23:"D50",24:"ISO studio tungsten",255:"Other"},Flash:{0:"Flash did not fire.",1:"Flash fired.",5:"Strobe return light not detected.",7:"Strobe return light detected.",9:"Flash fired, compulsory flash mode",13:"Flash fired, compulsory flash mode, return light not detected",15:"Flash fired, compulsory flash mode, return light detected",16:"Flash did not fire, compulsory flash mode",24:"Flash did not fire, auto mode",25:"Flash fired, auto mode",29:"Flash fired, auto mode, return light not detected",31:"Flash fired, auto mode, return light detected",32:"No flash function",65:"Flash fired, red-eye reduction mode",69:"Flash fired, red-eye reduction mode, return light not detected",71:"Flash fired, red-eye reduction mode, return light detected",73:"Flash fired, compulsory flash mode, red-eye reduction mode",77:"Flash fired, compulsory flash mode, red-eye reduction mode, return light not detected",79:"Flash fired, compulsory flash mode, red-eye reduction mode, return light detected",89:"Flash fired, auto mode, red-eye reduction mode",93:"Flash fired, auto mode, return light not detected, red-eye reduction mode",95:"Flash fired, auto mode, return light detected, red-eye reduction mode"},ExposureMode:{0:"Auto exposure",1:"Manual exposure",2:"Auto bracket"},WhiteBalance:{0:"Auto white balance",1:"Manual white balance"},SceneCaptureType:{0:"Standard",1:"Landscape",2:"Portrait",3:"Night scene"},Contrast:{0:"Normal",1:"Soft",2:"Hard"},Saturation:{0:"Normal",1:"Low saturation",2:"High saturation"},Sharpness:{0:"Normal",1:"Soft",2:"Hard"},GPSLatitudeRef:{N:"North latitude",S:"South latitude"},GPSLongitudeRef:{E:"East longitude",W:"West longitude"}},{init:function(a){return g={tiffHeader:10},a!==c&&a.length?(d.init(a),65505===d.SHORT(0)&&"EXIF\x00"===d.STRING(4,5).toUpperCase()?j():!1):!1
},TIFF:function(){return f},EXIF:function(){var b;if(b=i(g.exifIFD,e.exif),b.ExifVersion&&"array"===a.typeOf(b.ExifVersion)){for(var c=0,d="";c<b.ExifVersion.length;c++)d+=String.fromCharCode(b.ExifVersion[c]);b.ExifVersion=d}return b},GPS:function(){var b;return b=i(g.gpsIFD,e.gps),b.GPSVersionID&&"array"===a.typeOf(b.GPSVersionID)&&(b.GPSVersionID=b.GPSVersionID.join(".")),b},setExif:function(a,b){return"PixelXDimension"!==a&&"PixelYDimension"!==a?!1:k("exif",a,b)},getBinary:function(){return d.SEGMENT()},purge:function(){d.init(null),d=f=null,g={}
}}}}),f("moxie/runtime/html5/image/JPEG",["moxie/core/utils/Basic","moxie/core/Exceptions","moxie/runtime/html5/image/JPEGHeaders","moxie/runtime/html5/utils/BinaryReader","moxie/runtime/html5/image/ExifParser"],function(a,b,c,d,e){function f(f){function m(){for(var b,c,a=0;a<=g.length;){if(b=h.SHORT(a+=2),b>=65472&&65475>=b)return a+=5,{height:h.SHORT(a),width:h.SHORT(a+=2)};c=h.SHORT(a+=2),a+=c-2}return null}function n(){j&&i&&h&&(j.purge(),i.purge(),h.init(null),g=k=i=j=h=null)}var g,h,i,j,k,l;if(g=f,h=new d,h.init(g),65496!==h.SHORT(0))throw new b.ImageError(b.ImageError.WRONG_FORMAT);
i=new c(f),j=new e,l=!!j.init(i.get("app1")[0]),k=m.call(this),a.extend(this,{type:"image/jpeg",size:g.length,width:k&&k.width||0,height:k&&k.height||0,setExif:function(b,c){return l?("object"===a.typeOf(b)?a.each(b,function(a,b){j.setExif(b,a)}):j.setExif(b,c),i.set("app1",j.getBinary()),void 0):!1},writeHeaders:function(){return arguments.length?i.restore(arguments[0]):g=i.restore(g)},stripHeaders:function(a){return i.strip(a)},purge:function(){n.call(this)}}),l&&(this.meta={tiff:j.TIFF(),exif:j.EXIF(),gps:j.GPS()})
}return f}),f("moxie/runtime/html5/image/PNG",["moxie/core/Exceptions","moxie/core/utils/Basic","moxie/runtime/html5/utils/BinaryReader"],function(a,b,c){function d(d){function j(){var a,b;return a=l.call(this,8),"IHDR"==a.type?(b=a.start,{width:f.LONG(b),height:f.LONG(b+=4)}):null}function k(){f&&(f.init(null),e=i=g=h=f=null)}function l(a){var b,c,d,e;return b=f.LONG(a),c=f.STRING(a+=4,4),d=a+=4,e=f.LONG(a+b),{length:b,type:c,start:d,CRC:e}}var e,f,g,h,i;e=d,f=new c,f.init(e),function(){var b=0,c=0,d=[35152,20039,3338,6666];
for(c=0;c<d.length;c++,b+=2)if(d[c]!=f.SHORT(b))throw new a.ImageError(a.ImageError.WRONG_FORMAT)}(),i=j.call(this),b.extend(this,{type:"image/png",size:e.length,width:i.width,height:i.height,purge:function(){k.call(this)}}),k.call(this)}return d}),f("moxie/runtime/html5/image/ImageInfo",["moxie/core/utils/Basic","moxie/core/Exceptions","moxie/runtime/html5/image/JPEG","moxie/runtime/html5/image/PNG"],function(a,b,c,d){return function(e){var g,f=[c,d];g=function(){for(var a=0;a<f.length;a++)try{return new f[a](e)
}catch(c){}throw new b.ImageError(b.ImageError.WRONG_FORMAT)}(),a.extend(this,{type:"",size:0,width:0,height:0,setExif:function(){},writeHeaders:function(a){return a},stripHeaders:function(a){return a},purge:function(){}}),a.extend(this,g),this.purge=function(){g.purge(),g=null}}}),f("moxie/runtime/html5/image/MegaPixel",[],function(){function a(a,d,e){var f=a.naturalWidth,g=a.naturalHeight,h=e.width,i=e.height,j=e.x||0,k=e.y||0,l=d.getContext("2d");b(a)&&(f/=2,g/=2);var m=1024,n=document.createElement("canvas");
n.width=n.height=m;for(var o=n.getContext("2d"),p=c(a,f,g),q=0;g>q;){for(var r=q+m>g?g-q:m,s=0;f>s;){var t=s+m>f?f-s:m;o.clearRect(0,0,m,m),o.drawImage(a,-s,-q);var u=s*h/f+j<<0,v=Math.ceil(t*h/f),w=q*i/g/p+k<<0,x=Math.ceil(r*i/g/p);l.drawImage(n,0,0,t,r,u,w,v,x),s+=m}q+=m}n=o=null}function b(a){var b=a.naturalWidth,c=a.naturalHeight;if(b*c>1048576){var d=document.createElement("canvas");d.width=d.height=1;var e=d.getContext("2d");return e.drawImage(a,-b+1,0),0===e.getImageData(0,0,1,1).data[3]}return!1}function c(a,b,c){var d=document.createElement("canvas");
d.width=1,d.height=c;var e=d.getContext("2d");e.drawImage(a,0,0);for(var f=e.getImageData(0,0,1,c).data,g=0,h=c,i=c;i>g;){var j=f[4*(i-1)+3];0===j?h=i:g=i,i=h+g>>1}d=null;var k=i/c;return 0===k?1:k}return{isSubsampled:b,renderTo:a}}),f("moxie/runtime/html5/image/Image",["moxie/runtime/html5/Runtime","moxie/core/utils/Basic","moxie/core/Exceptions","moxie/core/utils/Encode","moxie/file/File","moxie/runtime/html5/image/ImageInfo","moxie/runtime/html5/image/MegaPixel","moxie/core/utils/Mime","moxie/core/utils/Env"],function(a,b,c,d,e,f,g,h,i){function j(){function q(){if(!l&&!j)throw new c.ImageError(c.DOMException.INVALID_STATE_ERR);
return l||j}function r(a){return d.atob(a.substring(a.indexOf("base64,")+7))}function s(a,b){return"data:"+(b||"")+";base64,"+d.btoa(a)}function t(a){var b=this;j=new Image,j.onerror=function(){y.call(this),b.trigger("error",c.ImageError.WRONG_FORMAT)},j.onload=function(){b.trigger("load")},j.src=/^data:[^;]*;base64,/.test(a)?a:s(a,n.type)}function u(a,b){var e,d=this;return window.FileReader?(e=new FileReader,e.onload=function(){b(this.result)},e.onerror=function(){d.trigger("error",c.ImageError.WRONG_FORMAT)
},e.readAsDataURL(a),void 0):b(a.getAsDataURL())}function v(a,c,d,e){var g,k,m,n,r,f=this,i=0,j=0;if(p=e,r=this.meta&&this.meta.tiff&&this.meta.tiff.Orientation||1,-1!==b.inArray(r,[5,6,7,8])){var s=a;a=c,c=s}return k=q(),d?(a=Math.min(a,k.width),c=Math.min(c,k.height),g=Math.max(a/k.width,c/k.height)):g=Math.min(a/k.width,c/k.height),g>1&&!d&&e?(this.trigger("Resize"),void 0):(l||(l=document.createElement("canvas")),m=Math.round(k.width*g),n=Math.round(k.height*g),d?(l.width=a,l.height=c,m>a&&(i=Math.round((m-a)/2)),n>c&&(j=Math.round((n-c)/2))):(l.width=m,l.height=n),p||x(l.width,l.height,r),w.call(this,k,l,-i,-j,m,n),this.width=l.width,this.height=l.height,o=!0,f.trigger("Resize"),void 0)
}function w(a,b,c,d,e,f){if("iOS"===i.OS)g.renderTo(a,b,{width:e,height:f,x:c,y:d});else{var h=b.getContext("2d");h.drawImage(a,c,d,e,f)}}function x(a,b,c){switch(c){case 5:case 6:case 7:case 8:l.width=b,l.height=a;break;default:l.width=a,l.height=b}var d=l.getContext("2d");switch(c){case 2:d.translate(a,0),d.scale(-1,1);break;case 3:d.translate(a,b),d.rotate(Math.PI);break;case 4:d.translate(0,b),d.scale(1,-1);break;case 5:d.rotate(.5*Math.PI),d.scale(1,-1);break;case 6:d.rotate(.5*Math.PI),d.translate(0,-b);
break;case 7:d.rotate(.5*Math.PI),d.translate(a,-b),d.scale(-1,1);break;case 8:d.rotate(-.5*Math.PI),d.translate(-a,0)}}function y(){k&&(k.purge(),k=null),m=j=l=n=null,o=!1}var j,k,l,m,n,a=this,o=!1,p=!0;b.extend(this,{loadFromBlob:function(a){var b=this,d=b.getRuntime(),e=arguments.length>1?arguments[1]:!0;if(!d.can("access_binary"))throw new c.RuntimeError(c.RuntimeError.NOT_SUPPORTED_ERR);return n=a,a.isDetached()?(m=a.getSource(),t.call(this,m),void 0):(u.call(this,a.getSource(),function(a){e&&(m=r(a)),t.call(b,a)
}),void 0)},loadFromImage:function(a,b){this.meta=a.meta,n=new e(null,{name:a.name,size:a.size,type:a.type}),t.call(this,b?m=a.getAsBinaryString():a.getAsDataURL())},getInfo:function(){var b,a=this.getRuntime();return!k&&m&&a.can("access_image_binary")&&(k=new f(m)),b={width:q().width||0,height:q().height||0,type:n.type||h.getFileMime(n.name),size:m&&m.length||n.size||0,name:n.name||"",meta:k&&k.meta||this.meta||{}}},downsize:function(){v.apply(this,arguments)},getAsCanvas:function(){return l&&(l.id=this.uid+"_canvas"),l
},getAsBlob:function(b,c){return b!==this.type&&v.call(this,this.width,this.height,!1),new e(null,{name:n.name||"",type:b,data:a.getAsBinaryString.call(this,b,c)})},getAsDataURL:function(a){var b=arguments[1]||90;if(!o)return j.src;if("image/jpeg"!==a)return l.toDataURL("image/png");try{return l.toDataURL("image/jpeg",b/100)}catch(c){return l.toDataURL("image/jpeg")}},getAsBinaryString:function(b,c){if(!o)return m||(m=r(a.getAsDataURL(b,c))),m;if("image/jpeg"!==b)m=r(a.getAsDataURL(b,c));else{var d;c||(c=90);
try{d=l.toDataURL("image/jpeg",c/100)}catch(e){d=l.toDataURL("image/jpeg")}m=r(d),k&&(m=k.stripHeaders(m),p&&(k.meta&&k.meta.exif&&k.setExif({PixelXDimension:this.width,PixelYDimension:this.height}),m=k.writeHeaders(m)),k.purge(),k=null)}return o=!1,m},destroy:function(){a=null,y.call(this),this.getRuntime().getShim().removeInstance(this.uid)}})}return a.Image=j}),f("moxie/runtime/flash/Runtime",["moxie/core/utils/Basic","moxie/core/utils/Env","moxie/core/utils/Dom","moxie/core/Exceptions","moxie/runtime/Runtime"],function(a,b,c,d,e){function h(){var a;
try{a=navigator.plugins["Shockwave Flash"],a=a.description}catch(b){try{a=new ActiveXObject("ShockwaveFlash.ShockwaveFlash").GetVariable("$version")}catch(c){a="0.0"}}return a=a.match(/\d+/g),parseFloat(a[0]+"."+a[1])}function i(i){var k,j=this;i=a.extend({swf_url:b.swf_url},i),e.call(this,i,f,{access_binary:function(a){return a&&"browser"===j.mode},access_image_binary:function(a){return a&&"browser"===j.mode},display_media:e.capTrue,do_cors:e.capTrue,drag_and_drop:!1,report_upload_progress:function(){return"client"===j.mode
},resize_image:e.capTrue,return_response_headers:!1,return_response_type:function(b){return"json"===b&&window.JSON?!0:!a.arrayDiff(b,["","text","document"])||"browser"===j.mode},return_status_code:function(b){return"browser"===j.mode||!a.arrayDiff(b,[200,404])},select_file:e.capTrue,select_multiple:e.capTrue,send_binary_string:function(a){return a&&"browser"===j.mode},send_browser_cookies:function(a){return a&&"browser"===j.mode},send_custom_headers:function(a){return a&&"browser"===j.mode},send_multipart:e.capTrue,slice_blob:function(a){return a&&"browser"===j.mode
},stream_upload:function(a){return a&&"browser"===j.mode},summon_file_dialog:!1,upload_filesize:function(b){return a.parseSizeStr(b)<=2097152||"client"===j.mode},use_http_method:function(b){return!a.arrayDiff(b,["GET","POST"])}},{access_binary:function(a){return a?"browser":"client"},access_image_binary:function(a){return a?"browser":"client"},report_upload_progress:function(a){return a?"browser":"client"},return_response_type:function(b){return a.arrayDiff(b,["","text","json","document"])?"browser":["client","browser"]
},return_status_code:function(b){return a.arrayDiff(b,[200,404])?"browser":["client","browser"]},send_binary_string:function(a){return a?"browser":"client"},send_browser_cookies:function(a){return a?"browser":"client"},send_custom_headers:function(a){return a?"browser":"client"},stream_upload:function(a){return a?"client":"browser"},upload_filesize:function(b){return a.parseSizeStr(b)>=2097152?"client":"browser"}},"client"),h()<10&&(this.mode=!1),a.extend(this,{getShim:function(){return c.get(this.uid)},shimExec:function(a,b){var c=[].slice.call(arguments,2);
return j.getShim().exec(this.uid,a,b,c)},init:function(){var c,e,f;f=this.getShimContainer(),a.extend(f.style,{position:"absolute",top:"-8px",left:"-8px",width:"9px",height:"9px",overflow:"hidden"}),c='<object id="'+this.uid+'" type="application/x-shockwave-flash" data="'+i.swf_url+'" ',"IE"===b.browser&&(c+='classid="clsid:d27cdb6e-ae6d-11cf-96b8-444553540000" '),c+='width="100%" height="100%" style="outline:0"><param name="movie" value="'+i.swf_url+'" /><param name="flashvars" value="uid='+escape(this.uid)+"&target="+b.global_event_dispatcher+'" /><param name="wmode" value="transparent" /><param name="allowscriptaccess" value="always" /></object>',"IE"===b.browser?(e=document.createElement("div"),f.appendChild(e),e.outerHTML=c,e=f=null):f.innerHTML=c,k=setTimeout(function(){j&&!j.initialized&&j.trigger("Error",new d.RuntimeError(d.RuntimeError.NOT_INIT_ERR))
},5e3)},destroy:function(a){return function(){a.call(j),clearTimeout(k),i=k=a=j=null}}(this.destroy)},g)}var f="flash",g={};return e.addConstructor(f,i),g}),f("moxie/runtime/flash/file/Blob",["moxie/runtime/flash/Runtime","moxie/file/Blob"],function(a,b){var c={slice:function(a,c,d,e){var f=this.getRuntime();return 0>c?c=Math.max(a.size+c,0):c>0&&(c=Math.min(c,a.size)),0>d?d=Math.max(a.size+d,0):d>0&&(d=Math.min(d,a.size)),a=f.shimExec.call(this,"Blob","slice",c,d,e||""),a&&(a=new b(f.uid,a)),a}};return a.Blob=c
}),f("moxie/runtime/flash/file/FileInput",["moxie/runtime/flash/Runtime"],function(a){var b={init:function(a){this.getRuntime().shimExec.call(this,"FileInput","init",{name:a.name,accept:a.accept,multiple:a.multiple}),this.trigger("ready")}};return a.FileInput=b}),f("moxie/runtime/flash/file/FileReader",["moxie/runtime/flash/Runtime","moxie/core/utils/Encode"],function(a,b){function d(a,c){switch(c){case"readAsText":return b.atob(a,"utf8");case"readAsBinaryString":return b.atob(a);case"readAsDataURL":return a
}return null}var c="",e={read:function(a,b){var e=this,f=e.getRuntime();return"readAsDataURL"===a&&(c="data:"+(b.type||"")+";base64,"),e.bind("Progress",function(b,e){e&&(c+=d(e,a))}),f.shimExec.call(this,"FileReader","readAsBase64",b.uid)},getResult:function(){return c},destroy:function(){c=null}};return a.FileReader=e}),f("moxie/runtime/flash/file/FileReaderSync",["moxie/runtime/flash/Runtime","moxie/core/utils/Encode"],function(a,b){function c(a,c){switch(c){case"readAsText":return b.atob(a,"utf8");case"readAsBinaryString":return b.atob(a);
case"readAsDataURL":return a}return null}var d={read:function(a,b){var d,e=this.getRuntime();return(d=e.shimExec.call(this,"FileReaderSync","readAsBase64",b.uid))?("readAsDataURL"===a&&(d="data:"+(b.type||"")+";base64,"+d),c(d,a,b.type)):null}};return a.FileReaderSync=d}),f("moxie/runtime/flash/xhr/XMLHttpRequest",["moxie/runtime/flash/Runtime","moxie/core/utils/Basic","moxie/file/Blob","moxie/file/File","moxie/file/FileReaderSync","moxie/xhr/FormData","moxie/runtime/Transporter"],function(a,b,c,d,e,f,g){var h={send:function(a,d){function i(){a.transport=h.mode,h.shimExec.call(e,"XMLHttpRequest","send",a,d)
}function j(a,b){h.shimExec.call(e,"XMLHttpRequest","appendBlob",a,b.uid),d=null,i()}function k(a,b){var c=new g;c.bind("TransportingComplete",function(){b(this.result)}),c.transport(a.getSource(),a.type,{ruid:h.uid})}var e=this,h=e.getRuntime();if(b.isEmptyObj(a.headers)||b.each(a.headers,function(a,b){h.shimExec.call(e,"XMLHttpRequest","setRequestHeader",b,a.toString())}),d instanceof f){var l;if(d.each(function(a,b){a instanceof c?l=b:h.shimExec.call(e,"XMLHttpRequest","append",b,a)}),d.hasBlob()){var m=d.getBlob();
m.isDetached()?k(m,function(a){m.destroy(),j(l,a)}):j(l,m)}else d=null,i()}else d instanceof c?d.isDetached()?k(d,function(a){d.destroy(),d=a.uid,i()}):(d=d.uid,i()):i()},getResponse:function(a){var c,f,g=this.getRuntime();if(f=g.shimExec.call(this,"XMLHttpRequest","getResponseAsBlob")){if(f=new d(g.uid,f),"blob"===a)return f;try{if(c=new e,~b.inArray(a,["","text"]))return c.readAsText(f);if("json"===a&&window.JSON)return JSON.parse(c.readAsText(f))}finally{f.destroy()}}return null},abort:function(){var b=this.getRuntime();
b.shimExec.call(this,"XMLHttpRequest","abort"),this.dispatchEvent("readystatechange"),this.dispatchEvent("abort")}};return a.XMLHttpRequest=h}),f("moxie/runtime/flash/runtime/Transporter",["moxie/runtime/flash/Runtime","moxie/file/Blob"],function(a,b){var c={getAsBlob:function(a){var c=this.getRuntime(),d=c.shimExec.call(this,"Transporter","getAsBlob",a);return d?new b(c.uid,d):null}};return a.Transporter=c}),f("moxie/runtime/flash/image/Image",["moxie/runtime/flash/Runtime","moxie/core/utils/Basic","moxie/runtime/Transporter","moxie/file/Blob","moxie/file/FileReaderSync"],function(a,b,c,d,e){var f={loadFromBlob:function(a){function e(a){d.shimExec.call(b,"Image","loadFromBlob",a.uid),b=d=null
}var b=this,d=b.getRuntime();if(a.isDetached()){var f=new c;f.bind("TransportingComplete",function(){e(f.result.getSource())}),f.transport(a.getSource(),a.type,{ruid:d.uid})}else e(a.getSource())},loadFromImage:function(a){var b=this.getRuntime();return b.shimExec.call(this,"Image","loadFromImage",a.uid)},getAsBlob:function(a,b){var c=this.getRuntime(),e=c.shimExec.call(this,"Image","getAsBlob",a,b);return e?new d(c.uid,e):null},getAsDataURL:function(){var c,a=this.getRuntime(),b=a.Image.getAsBlob.apply(this,arguments);
return b?(c=new e,c.readAsDataURL(b)):null}};return a.Image=f}),f("moxie/runtime/silverlight/Runtime",["moxie/core/utils/Basic","moxie/core/utils/Env","moxie/core/utils/Dom","moxie/core/Exceptions","moxie/runtime/Runtime"],function(a,b,c,d,e){function h(a){var d,e,f,g,h,b=!1,c=null,i=0;try{try{c=new ActiveXObject("AgControl.AgControl"),c.IsVersionSupported(a)&&(b=!0),c=null}catch(j){var k=navigator.plugins["Silverlight Plug-In"];if(k){for(d=k.description,"1.0.30226.2"===d&&(d="2.0.30226.2"),e=d.split(".");e.length>3;)e.pop();
for(;e.length<4;)e.push(0);for(f=a.split(".");f.length>4;)f.pop();do g=parseInt(f[i],10),h=parseInt(e[i],10),i++;while(i<f.length&&g===h);h>=g&&!isNaN(g)&&(b=!0)}}}catch(l){b=!1}return b}function i(i){var k,j=this;i=a.extend({xap_url:b.xap_url},i),e.call(this,i,f,{access_binary:e.capTrue,access_image_binary:e.capTrue,display_media:e.capTrue,do_cors:e.capTrue,drag_and_drop:!1,report_upload_progress:e.capTrue,resize_image:e.capTrue,return_response_headers:function(a){return a&&"client"===j.mode},return_response_type:function(a){return"json"!==a?!0:!!window.JSON
},return_status_code:function(b){return"client"===j.mode||!a.arrayDiff(b,[200,404])},select_file:e.capTrue,select_multiple:e.capTrue,send_binary_string:e.capTrue,send_browser_cookies:function(a){return a&&"browser"===j.mode},send_custom_headers:function(a){return a&&"client"===j.mode},send_multipart:e.capTrue,slice_blob:e.capTrue,stream_upload:!0,summon_file_dialog:!1,upload_filesize:e.capTrue,use_http_method:function(b){return"client"===j.mode||!a.arrayDiff(b,["GET","POST"])}},{return_response_headers:function(a){return a?"client":"browser"
},return_status_code:function(b){return a.arrayDiff(b,[200,404])?"client":["client","browser"]},send_browser_cookies:function(a){return a?"browser":"client"},send_custom_headers:function(a){return a?"client":"browser"},use_http_method:function(b){return a.arrayDiff(b,["GET","POST"])?"client":["client","browser"]}}),h("2.0.31005.0")&&"Opera"!==b.browser||(this.mode=!1),a.extend(this,{getShim:function(){return c.get(this.uid).content.Moxie},shimExec:function(a,b){var c=[].slice.call(arguments,2);return j.getShim().exec(this.uid,a,b,c)
},init:function(){var a;a=this.getShimContainer(),a.innerHTML='<object id="'+this.uid+'" data="data:application/x-silverlight," type="application/x-silverlight-2" width="100%" height="100%" style="outline:none;"><param name="source" value="'+i.xap_url+'"/><param name="background" value="Transparent"/><param name="windowless" value="true"/><param name="enablehtmlaccess" value="true"/><param name="initParams" value="uid='+this.uid+",target="+b.global_event_dispatcher+'"/></object>',k=setTimeout(function(){j&&!j.initialized&&j.trigger("Error",new d.RuntimeError(d.RuntimeError.NOT_INIT_ERR))
},"Windows"!==b.OS?1e4:5e3)},destroy:function(a){return function(){a.call(j),clearTimeout(k),i=k=a=j=null}}(this.destroy)},g)}var f="silverlight",g={};return e.addConstructor(f,i),g}),f("moxie/runtime/silverlight/file/Blob",["moxie/runtime/silverlight/Runtime","moxie/core/utils/Basic","moxie/runtime/flash/file/Blob"],function(a,b,c){return a.Blob=b.extend({},c)}),f("moxie/runtime/silverlight/file/FileInput",["moxie/runtime/silverlight/Runtime"],function(a){var b={init:function(a){function b(a){for(var b="",c=0;c<a.length;c++)b+=(""!==b?"|":"")+a[c].title+" | *."+a[c].extensions.replace(/,/g,";*.");
return b}this.getRuntime().shimExec.call(this,"FileInput","init",b(a.accept),a.name,a.multiple),this.trigger("ready")}};return a.FileInput=b}),f("moxie/runtime/silverlight/file/FileDrop",["moxie/runtime/silverlight/Runtime","moxie/core/utils/Dom","moxie/core/utils/Events"],function(a,b,c){var d={init:function(){var e,a=this,d=a.getRuntime();return e=d.getShimContainer(),c.addEvent(e,"dragover",function(a){a.preventDefault(),a.stopPropagation(),a.dataTransfer.dropEffect="copy"},a.uid),c.addEvent(e,"dragenter",function(a){a.preventDefault();
var c=b.get(d.uid).dragEnter(a);c&&a.stopPropagation()},a.uid),c.addEvent(e,"drop",function(a){a.preventDefault();var c=b.get(d.uid).dragDrop(a);c&&a.stopPropagation()},a.uid),d.shimExec.call(this,"FileDrop","init")}};return a.FileDrop=d}),f("moxie/runtime/silverlight/file/FileReader",["moxie/runtime/silverlight/Runtime","moxie/core/utils/Basic","moxie/runtime/flash/file/FileReader"],function(a,b,c){return a.FileReader=b.extend({},c)}),f("moxie/runtime/silverlight/file/FileReaderSync",["moxie/runtime/silverlight/Runtime","moxie/core/utils/Basic","moxie/runtime/flash/file/FileReaderSync"],function(a,b,c){return a.FileReaderSync=b.extend({},c)
}),f("moxie/runtime/silverlight/xhr/XMLHttpRequest",["moxie/runtime/silverlight/Runtime","moxie/core/utils/Basic","moxie/runtime/flash/xhr/XMLHttpRequest"],function(a,b,c){return a.XMLHttpRequest=b.extend({},c)}),f("moxie/runtime/silverlight/runtime/Transporter",["moxie/runtime/silverlight/Runtime","moxie/core/utils/Basic","moxie/runtime/flash/runtime/Transporter"],function(a,b,c){return a.Transporter=b.extend({},c)}),f("moxie/runtime/silverlight/image/Image",["moxie/runtime/silverlight/Runtime","moxie/core/utils/Basic","moxie/runtime/flash/image/Image"],function(a,b,c){return a.Image=b.extend({},c,{getInfo:function(){var a=this.getRuntime(),c=["tiff","exif","gps"],d={meta:{}},e=a.shimExec.call(this,"Image","getInfo");
return e.meta&&b.each(c,function(a){var c,f,g,h,b=e.meta[a];if(b&&b.keys)for(d.meta[a]={},f=0,g=b.keys.length;g>f;f++)c=b.keys[f],h=b[c],h&&(/^(\d|[1-9]\d+)$/.test(h)?h=parseInt(h,10):/^\d*\.\d+$/.test(h)&&(h=parseFloat(h)),d.meta[a][c]=h)}),d.width=parseInt(e.width,10),d.height=parseInt(e.height,10),d.size=parseInt(e.size,10),d.type=e.type,d.name=e.name,d}})}),f("moxie/runtime/html4/Runtime",["moxie/core/utils/Basic","moxie/core/Exceptions","moxie/runtime/Runtime","moxie/core/utils/Env"],function(a,b,c,d){function g(b){var g=this,h=c.capTest,i=c.capTrue;
c.call(this,b,e,{access_binary:h(window.FileReader||window.File&&File.getAsDataURL),access_image_binary:!1,display_media:h(f.Image&&(d.can("create_canvas")||d.can("use_data_uri_over32kb"))),do_cors:!1,drag_and_drop:!1,filter_by_extension:h(function(){return"Chrome"===d.browser&&d.version>=28||"IE"===d.browser&&d.version>=10}()),resize_image:function(){return f.Image&&g.can("access_binary")&&d.can("create_canvas")},report_upload_progress:!1,return_response_headers:!1,return_response_type:function(b){return"json"===b&&window.JSON?!0:!!~a.inArray(b,["text","document",""])
},return_status_code:function(b){return!a.arrayDiff(b,[200,404])},select_file:function(){return d.can("use_fileinput")},select_multiple:!1,send_binary_string:!1,send_custom_headers:!1,send_multipart:!0,slice_blob:!1,stream_upload:function(){return g.can("select_file")},summon_file_dialog:h(function(){return"Firefox"===d.browser&&d.version>=4||"Opera"===d.browser&&d.version>=12||!!~a.inArray(d.browser,["Chrome","Safari"])}()),upload_filesize:i,use_http_method:function(b){return!a.arrayDiff(b,["GET","POST"])}}),a.extend(this,{init:function(){this.trigger("Init")
},destroy:function(a){return function(){a.call(g),a=g=null}}(this.destroy)}),a.extend(this.getShim(),f)}var e="html4",f={};return c.addConstructor(e,g),f}),f("moxie/runtime/html4/file/FileInput",["moxie/runtime/html4/Runtime","moxie/core/utils/Basic","moxie/core/utils/Dom","moxie/core/utils/Events","moxie/core/utils/Mime","moxie/core/utils/Env"],function(a,b,c,d,e,f){function g(){function j(){var l,m,n,o,p,q,e=this,k=e.getRuntime();q=b.guid("uid_"),l=k.getShimContainer(),a&&(n=c.get(a+"_form"),n&&b.extend(n.style,{top:"100%"})),o=document.createElement("form"),o.setAttribute("id",q+"_form"),o.setAttribute("method","post"),o.setAttribute("enctype","multipart/form-data"),o.setAttribute("encoding","multipart/form-data"),b.extend(o.style,{overflow:"hidden",position:"absolute",top:0,left:0,width:"100%",height:"100%"}),p=document.createElement("input"),p.setAttribute("id",q),p.setAttribute("type","file"),p.setAttribute("name",i.name||"Filedata"),p.setAttribute("accept",h.join(",")),b.extend(p.style,{fontSize:"999px",opacity:0}),o.appendChild(p),l.appendChild(o),b.extend(p.style,{position:"absolute",top:0,left:0,width:"100%",height:"100%"}),"IE"===f.browser&&f.version<10&&b.extend(p.style,{filter:"progid:DXImageTransform.Microsoft.Alpha(opacity=0)"}),p.onchange=function(){var a;
this.value&&(a=this.files?this.files[0]:{name:this.value},g=[a],this.onchange=function(){},j.call(e),e.bind("change",function b(){var f,a=c.get(q),d=c.get(q+"_form");e.unbind("change",b),e.files.length&&a&&d&&(f=e.files[0],a.setAttribute("id",f.uid),d.setAttribute("id",f.uid+"_form"),d.setAttribute("target",f.uid+"_iframe")),a=d=null},998),p=o=null,e.trigger("change"))},k.can("summon_file_dialog")&&(m=c.get(i.browse_button),d.removeEvent(m,"click",e.uid),d.addEvent(m,"click",function(a){p&&!p.disabled&&p.click(),a.preventDefault()
},e.uid)),a=q,l=n=m=null}var a,i,g=[],h=[];b.extend(this,{init:function(a){var g,b=this,f=b.getRuntime();i=a,h=a.accept.mimes||e.extList2mimes(a.accept,f.can("filter_by_extension")),g=f.getShimContainer(),function(){var e,h,i;e=c.get(a.browse_button),f.can("summon_file_dialog")&&("static"===c.getStyle(e,"position")&&(e.style.position="relative"),h=parseInt(c.getStyle(e,"z-index"),10)||1,e.style.zIndex=h,g.style.zIndex=h-1),i=f.can("summon_file_dialog")?e:g,d.addEvent(i,"mouseover",function(){b.trigger("mouseenter")
},b.uid),d.addEvent(i,"mouseout",function(){b.trigger("mouseleave")},b.uid),d.addEvent(i,"mousedown",function(){b.trigger("mousedown")},b.uid),d.addEvent(c.get(a.container),"mouseup",function(){b.trigger("mouseup")},b.uid),e=null}(),j.call(this),g=null,b.trigger({type:"ready",async:!0})},getFiles:function(){return g},disable:function(b){var d;(d=c.get(a))&&(d.disabled=!!b)},destroy:function(){var b=this.getRuntime(),e=b.getShim(),f=b.getShimContainer();d.removeAllEvents(f,this.uid),d.removeAllEvents(i&&c.get(i.container),this.uid),d.removeAllEvents(i&&c.get(i.browse_button),this.uid),f&&(f.innerHTML=""),e.removeInstance(this.uid),a=g=h=i=f=e=null
}})}return a.FileInput=g}),f("moxie/runtime/html4/file/FileReader",["moxie/runtime/html4/Runtime","moxie/runtime/html5/file/FileReader"],function(a,b){return a.FileReader=b}),f("moxie/runtime/html4/xhr/XMLHttpRequest",["moxie/runtime/html4/Runtime","moxie/core/utils/Basic","moxie/core/utils/Dom","moxie/core/utils/Url","moxie/core/Exceptions","moxie/core/utils/Events","moxie/file/Blob","moxie/xhr/FormData"],function(a,b,c,d,e,f,g,h){function i(){function k(a){var d,e,g,h,b=this,i=!1;if(j){if(d=j.id.replace(/_iframe$/,""),e=c.get(d+"_form")){for(g=e.getElementsByTagName("input"),h=g.length;h--;)switch(g[h].getAttribute("type")){case"hidden":g[h].parentNode.removeChild(g[h]);
break;case"file":i=!0}g=[],i||e.parentNode.removeChild(e),e=null}setTimeout(function(){f.removeEvent(j,"load",b.uid),j.parentNode&&j.parentNode.removeChild(j);var c=b.getRuntime().getShimContainer();c.children.length||c.parentNode.removeChild(c),c=j=null,a()},1)}}var a,i,j;b.extend(this,{send:function(l,m){function t(){var c=o.getShimContainer()||document.body,e=document.createElement("div");e.innerHTML='<iframe id="'+p+'_iframe" name="'+p+'_iframe" src="javascript:&quot;&quot;" style="display:none"></iframe>',j=e.firstChild,c.appendChild(j),f.addEvent(j,"load",function(){var c;
try{c=j.contentWindow.document||j.contentDocument||window.frames[j.id].document,/^4(0[0-9]|1[0-7]|2[2346])\s/.test(c.title)?a=c.title.replace(/^(\d+).*$/,"$1"):(a=200,i=b.trim(c.body.innerHTML),n.trigger({type:"progress",loaded:i.length,total:i.length}),s&&n.trigger({type:"uploadprogress",loaded:s.size||1025,total:s.size||1025}))}catch(e){if(!d.hasSameOrigin(l.url))return k.call(n,function(){n.trigger("error")}),void 0;a=404}k.call(n,function(){n.trigger("load")})},n.uid)}var p,q,r,s,n=this,o=n.getRuntime();
if(a=i=null,m instanceof h&&m.hasBlob()){if(s=m.getBlob(),p=s.uid,r=c.get(p),q=c.get(p+"_form"),!q)throw new e.DOMException(e.DOMException.NOT_FOUND_ERR)}else p=b.guid("uid_"),q=document.createElement("form"),q.setAttribute("id",p+"_form"),q.setAttribute("method",l.method),q.setAttribute("enctype","multipart/form-data"),q.setAttribute("encoding","multipart/form-data"),q.setAttribute("target",p+"_iframe"),o.getShimContainer().appendChild(q);m instanceof h&&m.each(function(a,c){if(a instanceof g)r&&r.setAttribute("name",c);
else{var d=document.createElement("input");b.extend(d,{type:"hidden",name:c,value:a}),r?q.insertBefore(d,r):q.appendChild(d)}}),q.setAttribute("action",l.url),t(),q.submit(),n.trigger("loadstart")},getStatus:function(){return a},getResponse:function(a){if("json"===a&&"string"===b.typeOf(i)&&window.JSON)try{return JSON.parse(i.replace(/^\s*<pre[^>]*>/,"").replace(/<\/pre>\s*$/,""))}catch(c){return null}return i},abort:function(){var a=this;j&&j.contentWindow&&(j.contentWindow.stop?j.contentWindow.stop():j.contentWindow.document.execCommand?j.contentWindow.document.execCommand("Stop"):j.src="about:blank"),k.call(this,function(){a.dispatchEvent("abort")
})}})}return a.XMLHttpRequest=i}),f("moxie/runtime/html4/image/Image",["moxie/runtime/html4/Runtime","moxie/runtime/html5/image/Image"],function(a,b){return a.Image=b}),i(["moxie/core/utils/Basic","moxie/core/I18n","moxie/core/utils/Mime","moxie/core/utils/Env","moxie/core/utils/Dom","moxie/core/Exceptions","moxie/core/EventTarget","moxie/core/utils/Encode","moxie/runtime/Runtime","moxie/runtime/RuntimeClient","moxie/file/Blob","moxie/file/File","moxie/file/FileInput","moxie/file/FileDrop","moxie/runtime/RuntimeTarget","moxie/file/FileReader","moxie/core/utils/Url","moxie/file/FileReaderSync","moxie/xhr/FormData","moxie/xhr/XMLHttpRequest","moxie/runtime/Transporter","moxie/image/Image","moxie/core/utils/Events"])
}(this),function(b){"use strict";var c={},d=b.moxie.core.utils.Basic.inArray;return function e(a){var b,f;for(b in a)f=typeof a[b],"object"!==f||~d(b,["Exceptions","Env","Mime"])?"function"===f&&(c[b]=a[b]):e(a[b])}(b.moxie),c.Env=b.moxie.core.utils.Env,c.Mime=b.moxie.core.utils.Mime,c.Exceptions=b.moxie.core.Exceptions,a.moxie=c,c}(window),function(b,c,d){function g(a){function d(a,b,d){var e={chunks:"slice_blob",jpgresize:"send_binary_string",pngresize:"send_binary_string",progress:"report_upload_progress",multi_selection:"select_multiple",dragdrop:"drag_and_drop",drop_element:"drag_and_drop",headers:"send_custom_headers",urlstream_upload:"send_binary_string",canSendBinary:"send_binary",triggerDialog:"summon_file_dialog"};
e[a]?c[e[a]]=b:d||(c[a]=b)}var b=a.required_features,c={};return"string"==typeof b?h.each(b.split(/\s*,\s*/),function(a){d(a,!0)}):"object"==typeof b?h.each(b,function(a,b){d(b,a)}):b===!0&&(a.chunk_size>0&&(c.slice_blob=!0),(a.resize.enabled||!a.multipart)&&(c.send_binary_string=!0),h.each(a,function(a,b){d(b,!!a,!0)})),c}function i(b){var c={};return a.each(b,function(a,b){a=a.replace(/-/g,"_"),/filters|headers|multipart_params|resize|mime_types/.test(a)&&(b=JSON.parse(b)),/multipart|prevent_duplicates|unique_names|multi_selection/.test(a)&&(b=/true|1/i.test(b),b=b?"1":"0"),/max_retries/.test(a)&&(b=parseInt(b)),/extensions/.test(a)||(/prevent_duplicates|max_file_size/.test(a)?(c.filters||(c.filters={}))[a]=b:c[a]=b)
}),c}var e=b.setTimeout,f={},h={VERSION:"2.1.2",STOPPED:1,STARTED:2,QUEUED:1,UPLOADING:2,FAILED:4,DONE:5,GENERIC_ERROR:-100,HTTP_ERROR:-200,IO_ERROR:-300,SECURITY_ERROR:-400,INIT_ERROR:-500,FILE_SIZE_ERROR:-600,FILE_EXTENSION_ERROR:-601,FILE_DUPLICATE_ERROR:-602,IMAGE_FORMAT_ERROR:-700,MEMORY_ERROR:-701,IMAGE_DIMENSIONS_ERROR:-702,mimeTypes:c.mimes,ua:c.ua,typeOf:c.typeOf,extend:c.extend,guid:c.guid,get:function(a){var d,b=[];"array"!==c.typeOf(a)&&(a=[a]);for(var e=a.length;e--;)d=c.get(a[e]),d&&b.push(d);return b.length?b:null
},each:c.each,getPos:c.getPos,getSize:c.getSize,xmlEncode:function(a){var b={"<":"lt",">":"gt","&":"amp",'"':"quot","'":"#39"},c=/[<>&\"\']/g;return a?(""+a).replace(c,function(a){return b[a]?"&"+b[a]+";":a}):a},toArray:c.toArray,inArray:c.inArray,addI18n:c.addI18n,translate:c.translate,isEmptyObj:c.isEmptyObj,hasClass:c.hasClass,addClass:c.addClass,removeClass:c.removeClass,getStyle:c.getStyle,addEvent:c.addEvent,removeEvent:c.removeEvent,removeAllEvents:c.removeAllEvents,cleanName:function(a){var b,c;for(c=[/[\300-\306]/g,"A",/[\340-\346]/g,"a",/\307/g,"C",/\347/g,"c",/[\310-\313]/g,"E",/[\350-\353]/g,"e",/[\314-\317]/g,"I",/[\354-\357]/g,"i",/\321/g,"N",/\361/g,"n",/[\322-\330]/g,"O",/[\362-\370]/g,"o",/[\331-\334]/g,"U",/[\371-\374]/g,"u"],b=0;b<c.length;b+=2)a=a.replace(c[b],c[b+1]);
return a=a.replace(/\s+/g,"_"),a=a.replace(/[^a-z0-9_\-\.]+/gi,"")},buildUrl:function(a,b){var c="";return h.each(b,function(a,b){c+=(c?"&":"")+encodeURIComponent(b)+"="+encodeURIComponent(a)}),c&&(a+=(a.indexOf("?")>0?"&":"?")+c),a},formatSize:function(a){function b(a,b){return Math.round(a*Math.pow(10,b))/Math.pow(10,b)}if(a===d||/\D/.test(a))return h.translate("N/A");var c=Math.pow(1024,4);return a>c?b(a/c,1)+" "+h.translate("tb"):a>(c/=1024)?b(a/c,1)+" "+h.translate("gb"):a>(c/=1024)?b(a/c,1)+" "+h.translate("mb"):a>1024?Math.round(a/1024)+" "+h.translate("kb"):a+" "+h.translate("b")
},parseSize:c.parseSizeStr,predictRuntime:function(a,b){var d,e;return d=new h.Uploader(a),e=c.Runtime.thatCan(d.getOption().required_features,b||a.runtimes),d.destroy(),e},addFileFilter:function(a,b){f[a]=b}};h.addFileFilter("mime_types",function(a,b,c){a.length&&!a.regexp.test(b.name)?(this.trigger("Error",{code:h.FILE_EXTENSION_ERROR,message:h.translate("File extension error."),file:b}),c(!1)):c(!0)}),h.addFileFilter("max_file_size",function(a,b,c){var d;a=h.parseSize(a),b.size!==d&&a&&b.size>a?(this.trigger("Error",{code:h.FILE_SIZE_ERROR,message:h.translate("File size error."),file:b}),c(!1)):c(!0)
}),h.addFileFilter("prevent_duplicates",function(a,b,c){if(a)for(var d=this.files.length;d--;)if(b.name===this.files[d].name&&b.size===this.files[d].size)return this.trigger("Error",{code:h.FILE_DUPLICATE_ERROR,message:h.translate("Duplicate file error."),file:b}),c(!1),void 0;c(!0)}),h.Uploader=function(b){function s(){var a,c,b=0;if(this.state==h.STARTED){for(c=0;c<k.length;c++)a||k[c].status!=h.QUEUED?b++:(a=k[c],this.trigger("BeforeUpload",a)&&(a.status=h.UPLOADING,this.trigger("UploadFile",a)));b==k.length&&(this.state!==h.STOPPED&&(this.state=h.STOPPED,this.trigger("StateChanged")),this.trigger("UploadComplete",k))
}}function t(a){a.percent=a.size>0?Math.ceil(a.loaded/a.size*100):100,u()}function u(){var a,b;for(p.reset(),a=0;a<k.length;a++)b=k[a],b.size!==d?(p.size+=b.origSize,p.loaded+=b.loaded*b.origSize/b.size):p.size=d,b.status==h.DONE?p.uploaded++:b.status==h.FAILED?p.failed++:p.queued++;p.size===d?p.percent=k.length>0?Math.ceil(p.uploaded/k.length*100):0:(p.bytesPerSec=Math.ceil(p.loaded/((+new Date-o||1)/1e3)),p.percent=p.size>0?Math.ceil(p.loaded/p.size*100):0)}function v(){var a=m[0]||n[0];return a?a.getRuntime().uid:!1
}function w(a,b){if(a.ruid){var d=c.Runtime.getInfo(a.ruid);if(d)return d.can(b)}return!1}function x(){this.bind("FilesAdded FilesRemoved",function(a){a.trigger("QueueChanged"),a.refresh()}),this.bind("CancelUpload",H),this.bind("BeforeUpload",D),this.bind("UploadFile",E),this.bind("UploadProgress",F),this.bind("StateChanged",G),this.bind("QueueChanged",u),this.bind("Error",J),this.bind("FileUploaded",I),this.bind("Destroy",K)}function y(b,d){var e=this,f=0,g=[],i={runtime_order:b.runtimes,required_caps:b.required_features,preferred_caps:l,swf_url:a.path+"/scripts/plupload2/Moxie.swf",xap_url:a.path+"/scripts/plupload2/Moxie.xap"};
h.each(b.runtimes.split(/\s*,\s*/),function(a){b[a]&&(i[a]=b[a])}),b.browse_button&&h.each(b.browse_button,function(a){g.push(function(b){var c=z.call(e,a,h.extend(i,{autoinit:!1})),d=c.onready;c.onready=function(){d.apply(c,arguments),f++,b()},c.bind("error runtimeerror",function(){b()}),c.init()})}),b.drop_element&&h.each(b.drop_element,function(a){g.push(function(b){var c=A.call(e,a,h.extend(i,{autoinit:!1})),d=c.onready;c.onready=function(){d.apply(c,arguments),f++,b()},c.bind("error runtimeerror",function(){b()
}),c.init()})}),c.inSeries(g,function(){"function"==typeof d&&d(f)})}function z(a,b){var d=this,e=this.settings,f={accept:e.filters.mime_types,name:e.file_data_name,multiple:e.multi_selection,container:e.container,browse_button:a,autoinit:!0},b=h.extend(f,b),g=new c.FileInput(b);return g.onready=function(){var a=c.Runtime.getInfo(this.ruid);c.extend(d.features,{chunks:a.can("slice_blob"),multipart:a.can("send_multipart"),multi_selection:a.can("select_multiple")}),m.push(this)},g.onchange=function(){d.addFile(this.files,null,this)
},g.bind("mouseenter mouseleave mousedown mouseup",function(b){q||(e.browse_button_hover&&("mouseenter"===b.type?c.addClass(a,e.browse_button_hover):"mouseleave"===b.type&&c.removeClass(a,e.browse_button_hover)),e.browse_button_active&&("mousedown"===b.type?c.addClass(a,e.browse_button_active):"mouseup"===b.type&&c.removeClass(a,e.browse_button_active)))}),g.bind("mousedown",function(){d.trigger("Browse")}),g.bind("error runtimeerror",function(){g=null}),b.autoinit&&g.init(),g}function A(a,b){var d=this,e=this.settings,b=h.extend({autoinit:!0},b,{drop_zone:a,multiple:e.multi_selection}),f=new c.FileDrop(b);
return f.onready=function(){var a=c.Runtime.getInfo(this.ruid);d.features.dragdrop=a.can("drag_and_drop"),n.push(this)},f.ondrop=function(){d.addFile(this.files,null,this)},f.bind("error runtimeerror",function(){f=null}),b.autoinit&&f.init(),f}function B(a,b,e){var f=new c.Image;try{f.onload=function(){return b.width>this.width&&b.height>this.height&&b.quality===d&&b.preserve_headers&&!b.crop?(this.destroy(),e(a)):(f.downsize(b.width,b.height,b.crop,b.preserve_headers),void 0)},f.onresize=function(){e(this.getAsBlob(a.type,b.quality)),this.destroy()
},f.onerror=function(){e(a)},f.load(a)}catch(g){e(a)}}function C(a,b,d){function i(a,b,c){var d=j[a];switch(a){case"max_file_size":"max_file_size"===a&&(j.max_file_size=j.filters.max_file_size=b);break;case"chunk_size":(b=h.parseSize(b))&&(j[a]=b,j.send_file_name=!0);break;case"multipart":j[a]=b,b||(j.send_file_name=!0);break;case"unique_names":j[a]=b,b&&(j.send_file_name=!0);break;case"filters":"array"===h.typeOf(b)&&(b={mime_types:b}),c?h.extend(j.filters,b):j.filters=b,b.mime_types&&(j.filters.mime_types.regexp=function(a){var b=[];
return h.each(a,function(a){h.each(a.extensions.split(/,/),function(a){/^\s*\*\s*$/.test(a)?b.push("\\.*"):b.push("\\."+a.replace(new RegExp("["+"/^$.*+?|()[]{}\\".replace(/./g,"\\$&")+"]","g"),"\\$&"))})}),new RegExp("("+b.join("|")+")$","i")}(j.filters.mime_types));break;case"resize":c?h.extend(j.resize,b,{enabled:!0}):j.resize=b;break;case"prevent_duplicates":j.prevent_duplicates=j.filters.prevent_duplicates=!!b;break;case"browse_button":case"drop_element":b=h.get(b);case"container":case"runtimes":case"multi_selection":case"flash_swf_url":case"silverlight_xap_url":j[a]=b,c||(f=!0);
break;default:j[a]=b}c||e.trigger("OptionChanged",a,b,d)}var e=this,f=!1;"object"==typeof a?h.each(a,function(a,b){i(b,a,d)}):i(a,b,d),d?(j.required_features=g(h.extend({},j)),l=g(h.extend({},j,{required_features:!0}))):f&&(e.trigger("Destroy"),y.call(e,j,function(a){a?(e.runtime=c.Runtime.getInfo(v()).type,e.trigger("Init",{runtime:e.runtime}),e.trigger("PostInit")):e.trigger("Error",{code:h.INIT_ERROR,message:h.translate("Init error.")})}))}function D(a,b){if(a.settings.unique_names){var c=b.name.match(/\.([^.]+)$/),d="part";
c&&(d=c[1]),b.target_name=b.id+"."+d}}function E(a,b){function m(){g-->0?e(n,1e3):(b.loaded=j,a.trigger("Error",{code:h.HTTP_ERROR,message:h.translate("HTTP Error."),file:b,response:r.responseText,status:r.status,responseHeaders:r.getAllResponseHeaders()}))}function n(){var o,p,s,q={};b.status===h.UPLOADING&&a.state!==h.STOPPED&&(a.settings.send_file_name&&(q.name=b.target_name||b.name),f&&i.chunks&&k.size>f?(s=Math.min(f,k.size-j),o=k.slice(j,j+s)):(s=k.size,o=k),f&&i.chunks&&(a.settings.send_chunk_number?(q.chunk=Math.ceil(j/f),q.chunks=Math.ceil(k.size/f)):(q.offset=j,q.total=k.size)),r=new c.XMLHttpRequest,r.upload&&(r.upload.onprogress=function(c){b.loaded=Math.min(b.size,j+c.loaded),a.trigger("UploadProgress",b)
}),r.onload=function(){return r.status>=400?(m(),void 0):(g=a.settings.max_retries,s<k.size?(o.destroy(),j+=s,b.loaded=Math.min(j,k.size),a.trigger("ChunkUploaded",b,{offset:b.loaded,total:k.size,response:r.responseText,status:r.status,responseHeaders:r.getAllResponseHeaders()}),"Android Browser"===c.Env.browser&&a.trigger("UploadProgress",b)):b.loaded=b.size,o=p=null,!j||j>=k.size?(b.size!=b.origSize&&(k.destroy(),k=null),a.trigger("UploadProgress",b),b.status=h.DONE,a.trigger("FileUploaded",b,{response:r.responseText,status:r.status,responseHeaders:r.getAllResponseHeaders()})):e(n,1),void 0)
},r.onerror=function(){m()},r.onloadend=function(){this.destroy(),r=null},a.settings.multipart&&i.multipart?(r.open("post",d,!0),h.each(a.settings.headers,function(a,b){r.setRequestHeader(b,a)}),p=new c.FormData,h.each(h.extend(q,a.settings.multipart_params),function(a,b){p.append(b,a)}),p.append(a.settings.file_data_name,o),r.send(p,{runtime_order:a.settings.runtimes,required_caps:a.settings.required_features,preferred_caps:l,swf_url:a.settings.flash_swf_url,xap_url:a.settings.silverlight_xap_url})):(d=h.buildUrl(a.settings.url,h.extend(q,a.settings.multipart_params)),r.open("post",d,!0),r.setRequestHeader("Content-Type","application/octet-stream"),h.each(a.settings.headers,function(a,b){r.setRequestHeader(b,a)
}),r.send(o,{runtime_order:a.settings.runtimes,required_caps:a.settings.required_features,preferred_caps:l,swf_url:a.settings.flash_swf_url,xap_url:a.settings.silverlight_xap_url})))}var k,d=a.settings.url,f=a.settings.chunk_size,g=a.settings.max_retries,i=a.features,j=0;b.loaded&&(j=b.loaded=f?f*Math.floor(b.loaded/f):0),k=b.getSource(),a.settings.resize.enabled&&w(k,"send_binary_string")&&~c.inArray(k.type,["image/jpeg","image/png"])?B.call(this,k,a.settings.resize,function(a){k=a,b.size=a.size,n()}):n()}function F(a,b){t(b)
}function G(a){if(a.state==h.STARTED)o=+new Date;else if(a.state==h.STOPPED)for(var b=a.files.length-1;b>=0;b--)a.files[b].status==h.UPLOADING&&(a.files[b].status=h.QUEUED,u())}function H(){r&&r.abort()}function I(a){u(),e(function(){s.call(a)},1)}function J(a,b){b.code===h.INIT_ERROR?a.destroy():b.file&&(b.file.status=h.FAILED,t(b.file),a.state==h.STARTED&&(a.trigger("CancelUpload"),e(function(){s.call(a)},1)))}function K(a){a.stop(),h.each(k,function(a){a.destroy()}),k=[],m.length&&(h.each(m,function(a){a.destroy()
}),m=[]),n.length&&(h.each(n,function(a){a.destroy()}),n=[]),l={},q=!1,o=r=null,p.reset()}var j,o,p,r,i=h.guid(),k=[],l={},m=[],n=[],q=!1;j={runtimes:c.Runtime.order,max_retries:0,chunk_size:0,multipart:!0,multi_selection:!0,file_data_name:"file",flash_swf_url:a.path+"/scripts/plupload2/js/Moxie.swf",silverlight_xap_url:a.path+"/scripts/plupload2/js/Moxie.xap",filters:{mime_types:[],prevent_duplicates:!1,max_file_size:0},resize:{enabled:!1,preserve_headers:!0,crop:!1},send_file_name:!0,send_chunk_number:!0},C.call(this,b,null,!0),p=new h.QueueProgress,h.extend(this,{id:i,uid:i,state:h.STOPPED,features:{},runtime:null,files:k,settings:j,total:p,init:function(){var b=this,d=b.trigger;
return b.trigger=function(c){var e=d.apply(this,arguments);return a(j.container||j.browse_button).trigger("plupload"+c,[b].concat(a.makeArray(arguments).slice(1))),e},"function"==typeof j.preinit?j.preinit(b):h.each(j.preinit,function(a,c){b.bind(c,a)}),x.call(this),j.browse_button&&j.url?(y.call(this,j,function(a){"function"==typeof j.init?j.init(b):h.each(j.init,function(a,c){b.bind(c,a)}),a?(b.runtime=c.Runtime.getInfo(v()).type,b.trigger("Init",{runtime:b.runtime}),b.trigger("PostInit")):b.trigger("Error",{code:h.INIT_ERROR,message:h.translate("Init error.")})
}),void 0):(this.trigger("Error",{code:h.INIT_ERROR,message:h.translate("Init error.")}),void 0)},setOption:function(a,b){C.call(this,a,b,!this.runtime)},getOption:function(a){return a?j[a]:j},refresh:function(){m.length&&h.each(m,function(a){a.trigger("Refresh")}),this.trigger("Refresh")},start:function(){this.state!=h.STARTED&&(this.state=h.STARTED,this.trigger("StateChanged"),s.call(this))},stop:function(){this.state!=h.STOPPED&&(this.state=h.STOPPED,this.trigger("StateChanged"),this.trigger("CancelUpload"))
},disableBrowse:function(){q=arguments[0]!==d?arguments[0]:!0,m.length&&h.each(m,function(a){a.disable(q)}),this.trigger("DisableBrowse",q)},getFile:function(a){var b;for(b=k.length-1;b>=0;b--)if(k[b].id===a)return k[b]},addFile:function(a,d,g){function n(a,b){var d=[];c.each(i.settings.filters,function(b,c){f[c]&&d.push(function(d){f[c].call(i,b,a,function(a){d(!a)})})}),c.inSeries(d,b)}function o(a){var b=c.typeOf(a);if(a instanceof c.File){if(!a.ruid&&!a.isDetached()){if(!m)return!1;a.ruid=m,a.connectRuntime(m)
}o(new h.File(a))}else a instanceof c.Blob?(o(a.getSource()),a.destroy()):a instanceof h.File?(d&&(a.name=d),a.origin=g,j.push(function(b){n(a,function(c){c||(k.push(a),l.push(a),i.trigger("FileFiltered",a)),e(b,1)})})):-1!==c.inArray(b,["file","blob"])?o(new c.File(null,a)):"node"===b&&"filelist"===c.typeOf(a.files)?c.each(a.files,o):"array"===b&&(d=null,c.each(a,o))}var m,i=this,j=[],l=[];b&&delete b.filename,m=v(),o(a),j.length&&c.inSeries(j,function(){l.length&&i.trigger("FilesAdded",l)})},removeFile:function(a){for(var b="string"==typeof a?a:a.id,c=k.length-1;c>=0;c--)if(k[c].id===b)return this.splice(c,1)[0]
},splice:function(a,b){var c=k.splice(a===d?0:a,b===d?k.length:b),e=!1;return this.state==h.STARTED&&(h.each(c,function(a){return a.status===h.UPLOADING?(e=!0,!1):void 0}),e&&this.stop()),this.trigger("FilesRemoved",c),h.each(c,function(a){a.destroy()}),e&&this.start(),c},bind:function(a,b,c){var d=this;h.Uploader.prototype.bind.call(this,a,function(){var a=[].slice.call(arguments);return a.splice(0,1,d),b.apply(this,a)},0,c)},addFileInput:function(){return z.apply(this,arguments)},addFileDrop:function(){return A.apply(this,arguments)
},destroy:function(){this.trigger("Destroy"),j=p=null,this.unbindAll()}})},h.Uploader.prototype=c.EventTarget.instance,h.File=function(){function b(b){h.extend(this,{id:h.guid(),name:b.name||b.fileName,type:b.type||"",size:b.size||b.fileSize,origSize:b.size||b.fileSize,loaded:0,percent:0,status:h.QUEUED,lastModifiedDate:b.lastModifiedDate||(new Date).toLocaleString(),getNative:function(){var a=this.getSource().getSource();return-1!==c.inArray(c.typeOf(a),["blob","file"])?a:null},getSource:function(){return a[this.id]?a[this.id]:null
},destroy:function(){var b=this.getSource();b&&(b.destroy(),delete a[this.id])}}),a[this.id]=b}var a={};return b}(),h.QueueProgress=function(){var a=this;a.size=0,a.loaded=0,a.uploaded=0,a.failed=0,a.queued=0,a.percent=0,a.bytesPerSec=0,a.reset=function(){a.size=a.loaded=a.uploaded=a.failed=a.queued=a.percent=a.bytesPerSec=0}},a.plupload2=h,a.fn.plupload2=function(b,c){var d=a(this[0]);if(!d.data("uploader")){var c=void 0===c?!0:c,e={runtimes:"html5, flash, html4",browse_button:d.find("[data-plupload-browse-button]")[0],drop_element:d.find("[data-plupload-drop-element]")[0]},f=i(d.htmlData("plupload",!1)),b=a.extend(e,f,b),g=b.extensions;
g&&((b.filters||(b.filters={})).mime_types=[{title:"Accepted files",extensions:g}]);var h=new a.plupload2.Uploader(b);return d.data("uploader",h),d.on("mouseover","[data-plupload-browse-button]",function(){var b=a(this);if(!b.data("fileinput")){var c={container:b.data("data-fileinput-container")||b.parent()[0]};h.addFileInput(b[0],c)}}),h.bind("Destroy",function(){d.removeData("uploader")}),c&&h.init(),h}}}(window,a.moxie)};c(),b.resolveWith(c)};FD50.module("plupload2",a)}(),function(){var a=function(a){var b=this,c=function(){!function(b,c,d){var e=a.path+"/scripts/audiojs/",f=a.globalNamespace+".audiojs";
d[b]={instanceCount:0,instances:{},flashSource:'      <object classid="clsid:D27CDB6E-AE6D-11cf-96B8-444553540000" id="$1" width="1" height="1" name="$1" style="position: absolute; left: -1px;">         <param name="movie" value="$2?playerInstance='+f+'.instances[\'$1\']&datetime=$3">         <param name="allowscriptaccess" value="always">         <embed name="$1" src="$2?playerInstance='+f+'.instances[\'$1\']&datetime=$3" width="1" height="1" allowscriptaccess="always">       </object>',settings:{autoplay:!1,loop:!1,preload:!0,imageLocation:e+"player-graphics.gif",swfLocation:e+"audiojs.swf",useFlash:function(){var a=document.createElement("audio");
return!(a.canPlayType&&a.canPlayType("audio/mpeg;").replace(/no/,""))}(),hasFlash:function(){if(navigator.plugins&&navigator.plugins.length&&navigator.plugins["Shockwave Flash"])return!0;if(navigator.mimeTypes&&navigator.mimeTypes.length){var a=navigator.mimeTypes["application/x-shockwave-flash"];return a&&a.enabledPlugin}try{{new ActiveXObject("ShockwaveFlash.ShockwaveFlash")}return!0}catch(c){}return!1}(),createPlayer:{markup:'          <div class="play-pause">             <p class="play"></p>             <p class="pause"></p>             <p class="loading"></p>             <p class="error"></p>           </div>           <div class="scrubber">             <div class="progress"></div>             <div class="loaded"></div>           </div>           <div class="time">             <em class="played">00:00</em>/<strong class="duration">00:00</strong>           </div>           <div class="error-message"></div>',playPauseClass:"play-pause",scrubberClass:"scrubber",progressClass:"progress",loaderClass:"loaded",timeClass:"time",durationClass:"duration",playedClass:"played",errorMessageClass:"error-message",playingClass:"playing",loadingClass:"loading",errorClass:"error"},css:'        .audiojs audio { position: absolute; left: -1px; }         .audiojs { width: 460px; height: 36px; background: #404040; overflow: hidden; font-family: monospace; font-size: 12px;           background-image: -webkit-gradient(linear, left top, left bottom, color-stop(0, #444), color-stop(0.5, #555), color-stop(0.51, #444), color-stop(1, #444));           background-image: -moz-linear-gradient(center top, #444 0%, #555 50%, #444 51%, #444 100%);           -webkit-box-shadow: 1px 1px 8px rgba(0, 0, 0, 0.3); -moz-box-shadow: 1px 1px 8px rgba(0, 0, 0, 0.3);           -o-box-shadow: 1px 1px 8px rgba(0, 0, 0, 0.3); box-shadow: 1px 1px 8px rgba(0, 0, 0, 0.3); }         .audiojs .play-pause { width: 25px; height: 40px; padding: 4px 6px; margin: 0px; float: left; overflow: hidden; border-right: 1px solid #000; }         .audiojs p { display: none; width: 25px; height: 40px; margin: 0px; cursor: pointer; }         .audiojs .play { display: block; }         .audiojs .scrubber { position: relative; float: left; width: 280px; background: #5a5a5a; height: 14px; margin: 10px; border-top: 1px solid #3f3f3f; border-left: 0px; border-bottom: 0px; overflow: hidden; }         .audiojs .progress { position: absolute; top: 0px; left: 0px; height: 14px; width: 0px; background: #ccc; z-index: 1;           background-image: -webkit-gradient(linear, left top, left bottom, color-stop(0, #ccc), color-stop(0.5, #ddd), color-stop(0.51, #ccc), color-stop(1, #ccc));           background-image: -moz-linear-gradient(center top, #ccc 0%, #ddd 50%, #ccc 51%, #ccc 100%); }         .audiojs .loaded { position: absolute; top: 0px; left: 0px; height: 14px; width: 0px; background: #000;           background-image: -webkit-gradient(linear, left top, left bottom, color-stop(0, #222), color-stop(0.5, #333), color-stop(0.51, #222), color-stop(1, #222));           background-image: -moz-linear-gradient(center top, #222 0%, #333 50%, #222 51%, #222 100%); }         .audiojs .time { float: left; height: 36px; line-height: 36px; margin: 0px 0px 0px 6px; padding: 0px 6px 0px 12px; border-left: 1px solid #000; color: #ddd; text-shadow: 1px 1px 0px rgba(0, 0, 0, 0.5); }         .audiojs .time em { padding: 0px 2px 0px 0px; color: #f9f9f9; font-style: normal; }         .audiojs .time strong { padding: 0px 0px 0px 2px; font-weight: normal; }         .audiojs .error-message { float: left; display: none; margin: 0px 10px; height: 36px; width: 400px; overflow: hidden; line-height: 36px; white-space: nowrap; color: #fff;           text-overflow: ellipsis; -o-text-overflow: ellipsis; -icab-text-overflow: ellipsis; -khtml-text-overflow: ellipsis; -moz-text-overflow: ellipsis; -webkit-text-overflow: ellipsis; }         .audiojs .error-message a { color: #eee; text-decoration: none; padding-bottom: 1px; border-bottom: 1px solid #999; white-space: wrap; }                 .audiojs .play { background: url("$1") -2px -1px no-repeat; }         .audiojs .loading { background: url("$1") -2px -31px no-repeat; }         .audiojs .error { background: url("$1") -2px -61px no-repeat; }         .audiojs .pause { background: url("$1") -2px -91px no-repeat; }                 .playing .play, .playing .loading, .playing .error { display: none; }         .playing .pause { display: block; }                 .loading .play, .loading .pause, .loading .error { display: none; }         .loading .loading { display: block; }                 .error .time, .error .play, .error .pause, .error .scrubber, .error .loading { display: none; }         .error .error { display: block; }         .error .play-pause p { cursor: auto; }         .error .error-message { display: block; }',trackEnded:function(){},flashError:function(){var a=this.settings.createPlayer,c=g(a.errorMessageClass,this.wrapper),e='Missing <a href="http://get.adobe.com/flashplayer/">flash player</a> plugin.';
this.mp3&&(e+=' <a href="'+this.mp3+'">Download audio file</a>.'),d[b].helpers.removeClass(this.wrapper,a.loadingClass),d[b].helpers.addClass(this.wrapper,a.errorClass),c.innerHTML=e},loadError:function(){var c=this.settings.createPlayer,e=g(c.errorMessageClass,this.wrapper);d[b].helpers.removeClass(this.wrapper,c.loadingClass),d[b].helpers.addClass(this.wrapper,c.errorClass),e.innerHTML='Error loading: "'+this.mp3+'"'},init:function(){var a=this.settings.createPlayer;d[b].helpers.addClass(this.wrapper,a.loadingClass)
},loadStarted:function(){var a=this.settings.createPlayer,c=g(a.durationClass,this.wrapper),e=Math.floor(this.duration/60),f=Math.floor(this.duration%60);d[b].helpers.removeClass(this.wrapper,a.loadingClass),c.innerHTML=(10>e?"0":"")+e+":"+(10>f?"0":"")+f},loadProgress:function(a){var b=this.settings.createPlayer,c=g(b.loaderClass,this.wrapper);c.style.width=100*a+"%"},playPause:function(){this.playing?this.settings.play():this.settings.pause()},play:function(){var a=this.settings.createPlayer;d[b].helpers.addClass(this.wrapper,a.playingClass)
},pause:function(){var a=this.settings.createPlayer;d[b].helpers.removeClass(this.wrapper,a.playingClass)},updatePlayhead:function(a){var b=this.settings.createPlayer,c=g(b.progressClass,this.wrapper);c.style.width=100*a+"%";var d=g(b.playedClass,this.wrapper),e=this.duration*a,f=Math.floor(e/60),h=Math.floor(e%60);d.innerHTML=(10>f?"0":"")+f+":"+(10>h?"0":"")+h}},create:function(a,b){var b=b||{};return a.length?this.createAll(b,a):this.newInstance(a,b)},createAll:function(a,b){var c=b||document.getElementsByTagName("audio"),d=[];
a=a||{};for(var e=0,f=c.length;f>e;e++)d.push(this.newInstance(c[e],a));return d},newInstance:function(a,b){{var a=a,e=this.helpers.clone(this.settings),f="audiojs"+this.instanceCount,g="audiojs_wrapper"+this.instanceCount;this.instanceCount++}null!=a.getAttribute("autoplay")&&(e.autoplay=!0),null!=a.getAttribute("loop")&&(e.loop=!0),"none"==a.getAttribute("preload")&&(e.preload=!1),b&&this.helpers.merge(e,b),e.createPlayer.markup?a=this.createPlayer(a,e.createPlayer,g):a.parentNode.setAttribute("id",g);var i=new d[c](a,e);
return e.css&&this.helpers.injectCss(i,e.css),e.useFlash&&e.hasFlash?(this.injectFlash(i,f),this.attachFlashEvents(i.wrapper,i)):e.useFlash&&!e.hasFlash&&this.settings.flashError.apply(i),(!e.useFlash||e.useFlash&&e.hasFlash)&&this.attachEvents(i.wrapper,i),this.instances[f]=i,i},createPlayer:function(a,b,c){var d=document.createElement("div"),e=a.cloneNode(!0);return d.setAttribute("class","audiojs"),d.setAttribute("className","audiojs"),d.setAttribute("id",c),e.outerHTML&&!document.createElement("audio").canPlayType?(e=this.helpers.cloneHtml5Node(a),d.innerHTML=b.markup,d.appendChild(e),a.outerHTML=d.outerHTML,d=document.getElementById(c)):(d.appendChild(e),d.innerHTML=d.innerHTML+b.markup,a.parentNode.replaceChild(d,a)),d.getElementsByTagName("audio")[0]
},attachEvents:function(a,c){if(c.settings.createPlayer){var e=c.settings.createPlayer,f=g(e.playPauseClass,a),h=g(e.scrubberClass,a),i=function(a){var b=0;if(a.offsetParent)do b+=a.offsetLeft;while(a=a.offsetParent);return b};d[b].events.addListener(f,"click",function(){c.playPause.apply(c)}),d[b].events.addListener(h,"click",function(a){var b=a.clientX-i(this);c.skipTo(b/h.offsetWidth)}),c.settings.useFlash||(d[b].events.trackLoadProgress(c),d[b].events.addListener(c.element,"timeupdate",function(){c.updatePlayhead.apply(c)
}),d[b].events.addListener(c.element,"ended",function(){c.trackEnded.apply(c)}),d[b].events.addListener(c.source,"error",function(){clearInterval(c.readyTimer),clearInterval(c.loadTimer),c.settings.loadError.apply(c)}))}},attachFlashEvents:function(a,b){b.swfReady=!1,b.load=function(a){b.mp3=a,b.swfReady&&b.element.load(a)},b.loadProgress=function(a,c){b.loadedPercent=a,b.duration=c,b.settings.loadStarted.apply(b),b.settings.loadProgress.apply(b,[a])},b.skipTo=function(a){a>b.loadedPercent||(b.updatePlayhead.call(b,[a]),b.element.skipTo(a))
},b.updatePlayhead=function(a){b.settings.updatePlayhead.apply(b,[a])},b.play=function(){b.settings.preload||(b.settings.preload=!0,b.element.init(b.mp3)),b.playing=!0,b.element.pplay(),b.settings.play.apply(b)},b.pause=function(){b.playing=!1,b.element.ppause(),b.settings.pause.apply(b)},b.setVolume=function(a){b.element.setVolume(a)},b.loadStarted=function(){b.swfReady=!0,b.settings.preload&&b.element.init(b.mp3),b.settings.autoplay&&b.play.apply(b)}},injectFlash:function(a,b){var c=this.flashSource.replace(/\$1/g,b);
c=c.replace(/\$2/g,a.settings.swfLocation),c=c.replace(/\$3/g,+new Date+Math.random());var d=a.wrapper.innerHTML,e=document.createElement("div");e.innerHTML=c+d,a.wrapper.innerHTML=e.innerHTML,a.element=this.helpers.getSwf(b)},helpers:{merge:function(a,b){for(attr in b)(a.hasOwnProperty(attr)||b.hasOwnProperty(attr))&&(a[attr]=b[attr])},clone:function(a){if(null==a||"object"!=typeof a)return a;var b=new a.constructor;for(var c in a)b[c]=arguments.callee(a[c]);return b},addClass:function(a,b){var c=new RegExp("(\\s|^)"+b+"(\\s|$)");
c.test(a.className)||(a.className+=" "+b)},removeClass:function(a,b){var c=new RegExp("(\\s|^)"+b+"(\\s|$)");a.className=a.className.replace(c," ")},injectCss:function(a,b){for(var c="",d=document.getElementsByTagName("style"),e=b.replace(/\$1/g,a.settings.imageLocation),f=0,g=d.length;g>f;f++){var h=d[f].getAttribute("title");if(h&&~h.indexOf("audiojs")){if(k=d[f],k.innerHTML===e)return;c=k.innerHTML;break}}var i=document.getElementsByTagName("head")[0],j=i.firstChild,k=document.createElement("style");i&&(k.setAttribute("type","text/css"),k.setAttribute("title","audiojs"),k.styleSheet?k.styleSheet.cssText=c+e:k.appendChild(document.createTextNode(c+e)),j?i.insertBefore(k,j):i.appendChild(styleElement))
},cloneHtml5Node:function(a){var b=document.createDocumentFragment(),c=b.createElement?b:document;c.createElement("audio");var d=c.createElement("div");return b.appendChild(d),d.innerHTML=a.outerHTML,d.firstChild},getSwf:function(a){var b=document[a]||window[a];return b.length>1?b[b.length-1]:b}},events:{memoryLeaking:!1,listeners:[],addListener:function(a,c,e){a.addEventListener?a.addEventListener(c,e,!1):a.attachEvent&&(this.listeners.push(a),this.memoryLeaking||(window.attachEvent("onunload",function(){if(this.listeners)for(var a=0,c=this.listeners.length;c>a;a++)d[b].events.purge(this.listeners[a])
}),this.memoryLeaking=!0),a.attachEvent("on"+c,function(){e.call(a,window.event)}))},trackLoadProgress:function(a){if(a.settings.preload){var b,c,a=a,d=/(ipod|iphone|ipad)/i.test(navigator.userAgent);b=setInterval(function(){a.element.readyState>-1&&(d||a.init.apply(a)),a.element.readyState>1&&(a.settings.autoplay&&a.play.apply(a),clearInterval(b),c=setInterval(function(){a.loadProgress.apply(a),a.loadedPercent>=1&&clearInterval(c)},200))},200),a.readyTimer=b,a.loadTimer=c}},purge:function(a){var c,b=a.attributes;
if(b)for(c=0;c<b.length;c+=1)"function"==typeof a[b[c].name]&&(a[b[c].name]=null);if(b=a.childNodes)for(c=0;c<b.length;c+=1)purge(a.childNodes[c])},ready:function(){return function(a){var b=window,c=!1,d=!0,e=b.document,f=e.documentElement,g=e.addEventListener?"addEventListener":"attachEvent",h=e.addEventListener?"removeEventListener":"detachEvent",i=e.addEventListener?"":"on",j=function(d){("readystatechange"!=d.type||"complete"==e.readyState)&&(("load"==d.type?b:e)[h](i+d.type,j,!1),!c&&(c=!0)&&a.call(b,d.type||d))
},k=function(){try{f.doScroll("left")}catch(a){return setTimeout(k,50),void 0}j("poll")};if("complete"==e.readyState)a.call(b,"lazy");else{if(e.createEventObject&&f.doScroll){try{d=!b.frameElement}catch(l){}d&&k()}e[g](i+"DOMContentLoaded",j,!1),e[g](i+"readystatechange",j,!1),b[g](i+"load",j,!1)}}}()}},d[c]=function(a,b){this.element=a,this.wrapper=a.parentNode,this.source=a.getElementsByTagName("source")[0]||a,this.mp3=function(a){var b=a.getElementsByTagName("source")[0];return a.getAttribute("src")||(b?b.getAttribute("src"):null)
}(a),this.settings=b,this.loadStartedCalled=!1,this.loadedPercent=0,this.duration=1,this.playing=!1},d[c].prototype={updatePlayhead:function(){var a=this.element.currentTime/this.duration;this.settings.updatePlayhead.apply(this,[a])},skipTo:function(a){a>this.loadedPercent||(this.element.currentTime=this.duration*a,this.updatePlayhead())},load:function(a){this.loadStartedCalled=!1,this.source.setAttribute("src",a),this.element.load(),this.mp3=a,d[b].events.trackLoadProgress(this)},loadError:function(){this.settings.loadError.apply(this)
},init:function(){this.settings.init.apply(this)},loadStarted:function(){return this.element.duration?(this.duration=this.element.duration,this.updatePlayhead(),this.settings.loadStarted.apply(this),void 0):!1},loadProgress:function(){if(null!=this.element.buffered&&this.element.buffered.length){this.loadStartedCalled||(this.loadStartedCalled=this.loadStarted());var a=this.element.buffered.end(this.element.buffered.length-1);this.loadedPercent=a/this.duration,this.settings.loadProgress.apply(this,[this.loadedPercent])
}},playPause:function(){this.playing?this.pause():this.play()},play:function(){var a=/(ipod|iphone|ipad)/i.test(navigator.userAgent);a&&0==this.element.readyState&&this.init.apply(this),this.settings.preload||(this.settings.preload=!0,this.element.setAttribute("preload","auto"),d[b].events.trackLoadProgress(this)),this.playing=!0,this.element.play(),this.settings.play.apply(this)},pause:function(){this.playing=!1,this.element.pause(),this.settings.pause.apply(this)},setVolume:function(a){this.element.volume=a
},trackEnded:function(){this.skipTo.apply(this,[0]),this.settings.loop||this.pause.apply(this),this.settings.trackEnded.apply(this)}};var g=function(a,b){var c=[];if(b=b||document,b.getElementsByClassName)c=b.getElementsByClassName(a);else{var d,e,f=b.getElementsByTagName("*"),g=new RegExp("(^|\\s)"+a+"(\\s|$)");for(d=0,e=f.length;e>d;d++)g.test(f[d].className)&&c.push(f[d])}return c.length>1?c:c[0]}}("audiojs","audiojsInstance",a)};c(),b.resolveWith(c)};FD50.module("audiojs",a)}(),function(){var a=function(a){var b=this,c=function(){function b(){var a=document.createElement("input");
return a.setAttribute("type","range"),"text"!==a.type}function g(a,b){var c=Array.prototype.slice.call(arguments,2);return setTimeout(function(){return a.apply(null,c)},b)}function h(a,b){return b=b||100,function(){if(!a.debouncing){var c=Array.prototype.slice.apply(arguments);a.lastReturnVal=a.apply(window,c),a.debouncing=!0}return clearTimeout(a.debounceTimeout),a.debounceTimeout=setTimeout(function(){a.debouncing=!1},b),a.lastReturnVal}}function i(b,d){if(this.$window=a(window),this.$document=a(document),this.$element=a(b),this.options=a.extend({},f,d),this._defaults=f,this._name=c,this.startEvent=this.options.startEvent.join("."+c+" ")+"."+c,this.moveEvent=this.options.moveEvent.join("."+c+" ")+"."+c,this.endEvent=this.options.endEvent.join("."+c+" ")+"."+c,this.polyfill=this.options.polyfill,this.onInit=this.options.onInit,this.onSlide=this.options.onSlide,this.onSlideEnd=this.options.onSlideEnd,this.polyfill&&e)return!1;
this.identifier="js-"+c+"-"+ +new Date,this.min=parseFloat(this.$element[0].getAttribute("min")||0),this.max=parseFloat(this.$element[0].getAttribute("max")||100),this.value=parseFloat(this.$element[0].value||this.min+(this.max-this.min)/2),this.step=parseFloat(this.$element[0].getAttribute("step")||1),this.$fill=a('<div class="'+this.options.fillClass+'" />'),this.$handle=a('<div class="'+this.options.handleClass+'" />'),this.$range=a('<div class="'+this.options.rangeClass+'" id="'+this.identifier+'" />').insertAfter(this.$element).prepend(this.$fill,this.$handle),this.$element.css({position:"absolute",width:"1px",height:"1px",overflow:"hidden",opacity:"0"}),this.handleDown=a.proxy(this.handleDown,this),this.handleMove=a.proxy(this.handleMove,this),this.handleEnd=a.proxy(this.handleEnd,this),this.init();
var i=this;this.$window.on("resize."+c,h(function(){g(function(){i.update()},300)},20)),this.$document.on(this.startEvent,"#"+this.identifier+":not(."+this.options.disabledClass+")",this.handleDown),this.$element.on("change."+c,function(a,b){if(!b||b.origin!==c){var d=a.target.value,e=i.getPositionFromValue(d);i.setPosition(e)}})}var c="rangeslider",d=[],e=b(),f={polyfill:!0,rangeClass:"rangeslider",disabledClass:"rangeslider--disabled",fillClass:"rangeslider__fill",handleClass:"rangeslider__handle",startEvent:["mousedown","touchstart","pointerdown"],moveEvent:["mousemove","touchmove","pointermove"],endEvent:["mouseup","touchend","pointerup"]};
i.prototype.init=function(){this.onInit&&"function"==typeof this.onInit&&this.onInit(),this.update()},i.prototype.update=function(){this.handleWidth=this.$handle[0].offsetWidth,this.rangeWidth=this.$range[0].offsetWidth,this.maxHandleX=this.rangeWidth-this.handleWidth,this.grabX=this.handleWidth/2,this.position=this.getPositionFromValue(this.value),this.$element[0].disabled?this.$range.addClass(this.options.disabledClass):this.$range.removeClass(this.options.disabledClass),this.setPosition(this.position)},i.prototype.handleDown=function(a){if(a.preventDefault(),this.$document.on(this.moveEvent,this.handleMove),this.$document.on(this.endEvent,this.handleEnd),!((" "+a.target.className+" ").replace(/[\n\t]/g," ").indexOf(this.options.handleClass)>-1)){var b=this.getRelativePosition(this.$range[0],a),c=this.getPositionFromNode(this.$handle[0])-this.getPositionFromNode(this.$range[0]);
this.setPosition(b-this.grabX),b>=c&&b<c+this.handleWidth&&(this.grabX=b-c)}},i.prototype.handleMove=function(a){a.preventDefault();var b=this.getRelativePosition(this.$range[0],a);this.setPosition(b-this.grabX)},i.prototype.handleEnd=function(a){a.preventDefault(),this.$document.off(this.moveEvent,this.handleMove),this.$document.off(this.endEvent,this.handleEnd);var b=this.getRelativePosition(this.$range[0],a);this.onSlideEnd&&"function"==typeof this.onSlideEnd&&this.onSlideEnd(b-this.grabX,this.value)},i.prototype.cap=function(a,b,c){return b>a?b:a>c?c:a
},i.prototype.setPosition=function(a){var b,c;b=this.getValueFromPosition(this.cap(a,0,this.maxHandleX))/this.step*this.step,c=this.getPositionFromValue(b),this.$fill[0].style.width=c+this.grabX+"px",this.$handle[0].style.left=c+"px",this.setValue(b),this.position=c,this.value=b,this.onSlide&&"function"==typeof this.onSlide&&this.onSlide(c,b)},i.prototype.getPositionFromNode=function(a){for(var b=0;null!==a;)b+=a.offsetLeft,a=a.offsetParent;return b},i.prototype.getRelativePosition=function(a,b){return(b.pageX||b.originalEvent.clientX||b.originalEvent.touches[0].clientX||b.currentPoint.x)-this.getPositionFromNode(a)
},i.prototype.getPositionFromValue=function(a){var b,c;return b=(a-this.min)/(this.max-this.min),c=b*this.maxHandleX},i.prototype.getValueFromPosition=function(a){var b,c;return b=a/(this.maxHandleX||1),c=this.step*Math.ceil((b*(this.max-this.min)+this.min)/this.step),Number(c.toFixed(2))},i.prototype.setValue=function(a){a!==this.value&&this.$element.val(a).trigger("change",{origin:c})},i.prototype.destroy=function(){this.$document.off(this.startEvent,"#"+this.identifier,this.handleDown),this.$element.off("."+c).removeAttr("style").removeData("plugin_"+c),this.$range&&this.$range.length&&this.$range[0].parentNode.removeChild(this.$range[0]),d.splice(d.indexOf(this.$element[0]),1),d.length||this.$window.off("."+c)
},a.fn[c]=function(b){return this.each(function(){var e=a(this),f=e.data("plugin_"+c);f||(e.data("plugin_"+c,f=new i(this,b)),d.push(this)),"string"==typeof b&&f[b]()})}};c(),b.resolveWith(c)};FD50.module("rangeslider",a)}(),function(){var a=function(a){var b=this,c=a,d=function(){!function(a){function f(){return a("<div/>")}var b=Math.abs,c=Math.max,d=Math.min,e=function(a){return a};a.imgAreaSelect=function(g,h){function X(a){return a+s.left-w.left}function Y(a){return a+s.top-w.top}function Z(a){return a-s.left+w.left
}function $(a){return a-s.top+w.top}function _(a){return a.pageX-w.left}function ab(a){return a.pageY-w.top}function bb(a){var b=a||B,c=a||C;return{x1:e(O.x1*b),y1:e(O.y1*c),x2:e(O.x2*b),y2:e(O.y2*c),width:e(O.x2*b)-e(O.x1*b),height:e(O.y2*c)-e(O.y1*c)}}function cb(a,b,c,d,f){var g=f||B,h=f||C;O={x1:e(a/g||0),y1:e(b/h||0),x2:e(c/g||0),y2:e(d/h||0)},O.width=O.x2-O.x1,O.height=O.y2-O.y1}function db(){i.width()&&(s={left:e(i.offset().left),top:e(i.offset().top)},t=i.innerWidth(),u=i.innerHeight(),s.top+=i.outerHeight()-u>>1,s.left+=i.outerWidth()-t>>1,E=e(h.minWidth/B)||0,F=e(h.minHeight/C)||0,G=e(d(h.maxWidth/B||1<<24,t)),H=e(d(h.maxHeight/C||1<<24,u)),"1.3.2"!=a().jquery||"fixed"!=y||P.getBoundingClientRect||(s.top+=c(document.body.scrollTop,P.scrollTop),s.left+=c(document.body.scrollLeft,P.scrollLeft)),w=/absolute|relative/.test(v.css("position"))?{left:e(v.offset().left)-v.scrollLeft(),top:e(v.offset().top)-v.scrollTop()}:"fixed"==y?{left:a(document).scrollLeft(),top:a(document).scrollTop()}:{left:0,top:0},q=X(0),r=Y(0),(O.x2>t||O.y2>u)&&lb())
}function eb(b){if(J){switch(k.css({left:X(O.x1),top:Y(O.y1)}).add(l).width(U=O.width).height(V=O.height),l.add(m).add(o).css({left:0,top:0}),m.width(c(U-m.outerWidth()+m.innerWidth(),0)).height(c(V-m.outerHeight()+m.innerHeight(),0)),a(n[0]).css({left:q,top:r,width:O.x1,height:u}),a(n[1]).css({left:q+O.x1,top:r,width:U,height:O.y1}),a(n[2]).css({left:q+O.x2,top:r,width:t-O.x2,height:u}),a(n[3]).css({left:q+O.x1,top:r+O.y2,width:U,height:u-O.y2}),U-=o.outerWidth(),V-=o.outerHeight(),o.length){case 8:a(o[4]).css({left:U>>1}),a(o[5]).css({left:U,top:V>>1}),a(o[6]).css({left:U>>1,top:V}),a(o[7]).css({top:V>>1});
case 4:o.slice(1,3).css({left:U}),o.slice(2,4).css({top:V})}b!==!1&&(a.imgAreaSelect.keyPress!=ub&&a(document).unbind(a.imgAreaSelect.keyPress,a.imgAreaSelect.onKeyPress),h.keys&&a(document)[a.imgAreaSelect.keyPress](a.imgAreaSelect.onKeyPress=ub)),a.browser.msie&&m.outerWidth()-m.innerWidth()==2&&(m.css("margin",0),setTimeout(function(){m.css("margin","auto")},0))}}function fb(a){db(),eb(a),K=X(O.x1),L=Y(O.y1),M=X(O.x2),N=Y(O.y2)}function gb(a,b){h.fadeSpeed?a.fadeOut(h.fadeSpeed,b):a.hide()}function hb(a){var b=Z(_(a))-O.x1,c=$(ab(a))-O.y1;
W||(db(),W=!0,k.one("mouseout",function(){W=!1})),D="",h.resizable&&(c<=h.resizeMargin?D="n":c>=O.height-h.resizeMargin&&(D="s"),b<=h.resizeMargin?D+="w":b>=O.width-h.resizeMargin&&(D+="e")),k.css("cursor",D?D+"-resize":h.movable?"move":""),p&&p.toggle()}function ib(){a("body").css("cursor",""),(h.autoHide||O.width*O.height==0)&&gb(k.add(n),function(){a(this).hide()}),a(document).unbind("mousemove",mb),k.mousemove(hb),h.onSelectEnd(g,bb())}function jb(b){return 1!=b.which?!1:(db(),D?(a("body").css("cursor",D+"-resize"),K=X(O[/w/.test(D)?"x2":"x1"]),L=Y(O[/n/.test(D)?"y2":"y1"]),a(document).mousemove(mb).one("mouseup",ib),k.unbind("mousemove",hb)):h.movable?(z=q+O.x1-_(b),A=r+O.y1-ab(b),k.unbind("mousemove",hb),a(document).mousemove(ob).one("mouseup",function(){h.onSelectEnd(g,bb()),a(document).unbind("mousemove",ob),k.mousemove(hb)
})):i.mousedown(b),!1)}function kb(a){I&&(a?(M=c(q,d(q+t,K+b(N-L)*I*(M>K||-1))),N=e(c(r,d(r+u,L+b(M-K)/I*(N>L||-1)))),M=e(M)):(N=c(r,d(r+u,L+b(M-K)/I*(N>L||-1))),M=e(c(q,d(q+t,K+b(N-L)*I*(M>K||-1)))),N=e(N)))}function lb(){K=d(K,q+t),L=d(L,r+u),b(M-K)<E&&(M=K-E*(K>M||-1),q>M?K=q+E:M>q+t&&(K=q+t-E)),b(N-L)<F&&(N=L-F*(L>N||-1),r>N?L=r+F:N>r+u&&(L=r+u-F)),M=c(q,d(M,q+t)),N=c(r,d(N,r+u)),kb(b(M-K)<b(N-L)*I),b(M-K)>G&&(M=K-G*(K>M||-1),kb()),b(N-L)>H&&(N=L-H*(L>N||-1),kb(!0)),O={x1:Z(d(K,M)),x2:Z(c(K,M)),y1:$(d(L,N)),y2:$(c(L,N)),width:b(M-K),height:b(N-L)},eb(),h.onSelectChange(g,bb())
}function mb(a){return M=/w|e|^$/.test(D)||I?_(a):X(O.x2),N=/n|s|^$/.test(D)||I?ab(a):Y(O.y2),lb(),!1}function nb(b,c){M=(K=b)+O.width,N=(L=c)+O.height,a.extend(O,{x1:Z(K),y1:$(L),x2:Z(M),y2:$(N)}),eb(),h.onSelectChange(g,bb())}function ob(a){return K=c(q,d(z+_(a),q+t-O.width)),L=c(r,d(A+ab(a),r+u-O.height)),nb(K,L),a.preventDefault(),!1}function pb(){a(document).unbind("mousemove",pb),db(),M=K,N=L,lb(),D="",n.is(":visible")||k.add(n).hide().fadeIn(h.fadeSpeed||0),J=!0,a(document).unbind("mouseup",qb).mousemove(mb).one("mouseup",ib),k.unbind("mousemove",hb),h.onSelectStart(g,bb())
}function qb(){a(document).unbind("mousemove",pb).unbind("mouseup",qb),gb(k.add(n)),cb(Z(K),$(L),Z(K),$(L)),this instanceof a.imgAreaSelect||(h.onSelectChange(g,bb()),h.onSelectEnd(g,bb()))}function rb(b){return 1!=b.which||n.is(":animated")?!1:(db(),z=K=_(b),A=L=ab(b),a(document).mousemove(pb).mouseup(qb),!1)}function sb(){fb(!1)}function tb(){j=!0,wb(h=a.extend({classPrefix:"imgareaselect",movable:!0,parent:"body",resizable:!0,resizeMargin:10,onInit:function(){},onSelectStart:function(){},onSelectChange:function(){},onSelectEnd:function(){}},h)),k.add(n).css({visibility:""}),h.show&&(J=!0,db(),eb(),k.add(n).hide().fadeIn(h.fadeSpeed||0)),setTimeout(function(){h.onInit(g,bb())
},0)}function vb(a,b){for(var c in b)void 0!==h[c]&&a.css(b[c],h[c])}function wb(b){if(b.parent&&(v=a(b.parent)).append(k.add(n)),a.extend(h,b),db(),null!=b.handles){for(o.remove(),o=a([]),S=b.handles?"corners"==b.handles?4:8:0;S--;)o=o.add(f());o.addClass(h.classPrefix+"-handle").css({position:"absolute",fontSize:0,zIndex:x+1||1}),!parseInt(o.css("width"))>=0&&o.width(5).height(5),(T=h.borderWidth)&&o.css({borderWidth:T,borderStyle:"solid"}),vb(o,{borderColor1:"border-color",borderColor2:"background-color",borderOpacity:"opacity"})
}for(B=h.imageWidth/t||1,C=h.imageHeight/u||1,null!=b.x1&&(cb(b.x1,b.y1,b.x2,b.y2),b.show=!b.hide),b.keys&&(h.keys=a.extend({shift:1,ctrl:"resize"},b.keys)),n.addClass(h.classPrefix+"-outer"),l.addClass(h.classPrefix+"-selection"),S=0;S++<4;)a(m[S-1]).addClass(h.classPrefix+"-border"+S);vb(l,{selectionColor:"background-color",selectionOpacity:"opacity"}),vb(m,{borderOpacity:"opacity",borderWidth:"border-width"}),vb(n,{outerColor:"background-color",outerOpacity:"opacity"}),(T=h.borderColor1)&&a(m[0]).css({borderStyle:"solid",borderColor:T}),(T=h.borderColor2)&&a(m[1]).css({borderStyle:"dashed",borderColor:T}),k.append(l.add(m).add(p).add(o)),a.browser.msie&&((T=(n.css("filter")||"").match(/opacity=(\d+)/))&&n.css("opacity",T[1]/100),(T=(m.css("filter")||"").match(/opacity=(\d+)/))&&m.css("opacity",T[1]/100)),b.hide?gb(k.add(n)):b.show&&j&&(J=!0,k.add(n).fadeIn(h.fadeSpeed||0),fb()),I=(R=(h.aspectRatio||"").split(/:/))[0]/R[1],i.add(n).unbind("mousedown",rb),h.disable||h.enable===!1?(k.unbind("mousemove",hb).unbind("mousedown",jb),a(window).unbind("resize",sb)):((h.enable||h.disable===!1)&&((h.resizable||h.movable)&&k.mousemove(hb).mousedown(jb),a(window).resize(sb)),h.persistent||i.add(n).mousedown(rb)),h.enable=h.disable=void 0
}var j,p,q,r,t,u,v,z,A,B,C,D,E,F,G,H,I,J,K,L,M,N,Q,R,S,T,U,V,W,i=a(g),k=f(),l=f(),m=f().add(f()).add(f()).add(f()),n=f().add(f()).add(f()).add(f()),o=a([]),s={left:0,top:0},w={left:0,top:0},x=0,y="absolute",O={x1:0,y1:0,x2:0,y2:0,width:0,height:0},P=document.documentElement,ub=function(a){var e,f,b=h.keys,g=a.keyCode;if(e=isNaN(b.alt)||!a.altKey&&!a.originalEvent.altKey?!isNaN(b.ctrl)&&a.ctrlKey?b.ctrl:!isNaN(b.shift)&&a.shiftKey?b.shift:isNaN(b.arrows)?10:b.arrows:b.alt,"resize"==b.arrows||"resize"==b.shift&&a.shiftKey||"resize"==b.ctrl&&a.ctrlKey||"resize"==b.alt&&(a.altKey||a.originalEvent.altKey)){switch(g){case 37:e=-e;
case 39:f=c(K,M),K=d(K,M),M=c(f+e,K),kb();break;case 38:e=-e;case 40:f=c(L,N),L=d(L,N),N=c(f+e,L),kb(!0);break;default:return}lb()}else switch(K=d(K,M),L=d(L,N),g){case 37:nb(c(K-e,q),L);break;case 38:nb(K,c(L-e,r));break;case 39:nb(K+d(e,t-Z(M)),L);break;case 40:nb(K,L+d(e,u-$(N)));break;default:return}return!1};for(this.remove=function(){wb({disable:!0}),k.add(n).remove()},this.getOptions=function(){return h},this.setOptions=wb,this.getSelection=bb,this.setSelection=cb,this.cancelSelection=qb,this.update=fb,Q=i;Q.length;)x=c(x,isNaN(Q.css("z-index"))?x:Q.css("z-index")),Q=Q.parent(":not(body)");
x=h.zIndex||x,a.browser.msie&&i.attr("unselectable","on"),a.imgAreaSelect.keyPress=a.browser.msie||a.browser.safari?"keydown":"keypress",a.browser.opera&&(p=f().css({width:"100%",height:"100%",position:"absolute",zIndex:x+2||2})),k.add(n).css({visibility:"hidden",position:y,overflow:"hidden",zIndex:x||"0"}),k.css({zIndex:x+2||2}),l.add(m).css({position:"absolute",fontSize:0}),g.complete||"complete"==g.readyState||!i.is("img")?tb():i.one("load",tb),!j&&a.browser.msie&&a.browser.version>=7&&(g.src=g.src)},a.fn.imgAreaSelect=function(b){return b=b||{},this.each(function(){a(this).data("imgAreaSelect")?b.remove?(a(this).data("imgAreaSelect").remove(),a(this).removeData("imgAreaSelect")):a(this).data("imgAreaSelect").setOptions(b):b.remove||(void 0===b.enable&&void 0===b.disable&&(b.enable=!0),a(this).data("imgAreaSelect",new a.imgAreaSelect(this,b)))
}),b.instance?a(this).data("imgAreaSelect"):this}}(c)};d(),b.resolveWith(d)};FD50.module("imgareaselect",a)}(),function(){var a=function(a){var b=this,c=function(){!function(){function a(a){var b=function(a,b){return e("",a,b)},f=c;a&&(c[a]||(c[a]={}),f=c[a]),f.define&&f.define.packaged||(d.original=f.define,f.define=d,f.define.packaged=!0),f.require&&f.require.packaged||(e.original=f.require,f.require=b,f.require.packaged=!0)}var b="ace",c=function(){return this}();if(b||"undefined"==typeof requirejs){var d=function(a,b,c){return"string"!=typeof a?(d.original?d.original.apply(window,arguments):(console.error("dropping module because define wasn't a string."),console.trace()),void 0):(2==arguments.length&&(c=b),d.modules||(d.modules={},d.payloads={}),d.payloads[a]=c,d.modules[a]=null,void 0)
},e=function(a,b,c){if("[object Array]"===Object.prototype.toString.call(b)){for(var d=[],f=0,h=b.length;h>f;++f){var i=g(a,b[f]);if(!i&&e.original)return e.original.apply(window,arguments);d.push(i)}c&&c.apply(null,d)}else{if("string"==typeof b){var j=g(a,b);return!j&&e.original?e.original.apply(window,arguments):(c&&c(),j)}if(e.original)return e.original.apply(window,arguments)}},f=function(a,b){if(-1!==b.indexOf("!")){var c=b.split("!");return f(a,c[0])+"!"+f(a,c[1])}if("."==b.charAt(0)){var d=a.split("/").slice(0,-1).join("/");
for(b=d+"/"+b;-1!==b.indexOf(".")&&e!=b;){var e=b;b=b.replace(/\/\.\//,"/").replace(/[^\/]+\/\.\.\//,"")}}return b},g=function(a,b){b=f(a,b);var c=d.modules[b];if(!c){if(c=d.payloads[b],"function"==typeof c){var g={},h={id:b,uri:"",exports:g,packaged:!0},i=function(a,c){return e(b,a,c)},j=c(i,g,h);g=j||h.exports,d.modules[b]=g,delete d.payloads[b]}c=d.modules[b]=g||c}return c};a(b)}}(),ace.define("ace/ace",["require","exports","module","ace/lib/fixoldbrowsers","ace/lib/dom","ace/lib/event","ace/editor","ace/edit_session","ace/undomanager","ace/virtual_renderer","ace/multi_select","ace/worker/worker_client","ace/keyboard/hash_handler","ace/placeholder","ace/mode/folding/fold_mode","ace/theme/textmate","ace/ext/error_marker","ace/config"],function(a,b){a("./lib/fixoldbrowsers");
var d=a("./lib/dom"),e=a("./lib/event"),f=a("./editor").Editor,g=a("./edit_session").EditSession,h=a("./undomanager").UndoManager,i=a("./virtual_renderer").VirtualRenderer,j=a("./multi_select").MultiSelect;a("./worker/worker_client"),a("./keyboard/hash_handler"),a("./placeholder"),a("./mode/folding/fold_mode"),a("./theme/textmate"),a("./ext/error_marker"),b.config=a("./config"),b.require=a,b.edit=function(a){if("string"==typeof a){var c=a,a=document.getElementById(c);if(!a)throw new Error("ace.edit can't find div #"+c)
}if(a.env&&a.env.editor instanceof f)return a.env.editor;var g=b.createEditSession(d.getInnerText(a));a.innerHTML="";var h=new f(new i(a));new j(h),h.setSession(g);var k={document:g,editor:h,onResize:h.resize.bind(h,null)};return e.addListener(window,"resize",k.onResize),h.on("destroy",function(){e.removeListener(window,"resize",k.onResize)}),a.env=h.env=k,h},b.createEditSession=function(a,b){var c=new g(a,b);return c.setUndoManager(new h),c},b.EditSession=g,b.UndoManager=h}),ace.define("ace/mode/behaviour",["require","exports","module"],function(a,b){var d=function(){this.$behaviours={}
};(function(){this.add=function(a,b,c){switch(void 0){case this.$behaviours:this.$behaviours={};case this.$behaviours[a]:this.$behaviours[a]={}}this.$behaviours[a][b]=c},this.addBehaviours=function(a){for(var b in a)for(var c in a[b])this.add(b,c,a[b][c])},this.remove=function(a){this.$behaviours&&this.$behaviours[a]&&delete this.$behaviours[a]},this.inherit=function(a,b){if("function"==typeof a)var c=(new a).getBehaviours(b);else var c=a.getBehaviours(b);this.addBehaviours(c)},this.getBehaviours=function(a){if(!a)return this.$behaviours;
for(var b={},c=0;c<a.length;c++)this.$behaviours[a[c]]&&(b[a[c]]=this.$behaviours[a[c]]);return b}}).call(d.prototype),b.Behaviour=d}),ace.define("ace/unicode",["require","exports","module"],function(a,b){function d(a){var c=/\w{4}/g;for(var d in a)b.packages[d]=a[d].replace(c,"\\u$&")}b.packages={},d({L:"0041-005A0061-007A00AA00B500BA00C0-00D600D8-00F600F8-02C102C6-02D102E0-02E402EC02EE0370-037403760377037A-037D03860388-038A038C038E-03A103A3-03F503F7-0481048A-05250531-055605590561-058705D0-05EA05F0-05F20621-064A066E066F0671-06D306D506E506E606EE06EF06FA-06FC06FF07100712-072F074D-07A507B107CA-07EA07F407F507FA0800-0815081A082408280904-0939093D09500958-0961097109720979-097F0985-098C098F09900993-09A809AA-09B009B209B6-09B909BD09CE09DC09DD09DF-09E109F009F10A05-0A0A0A0F0A100A13-0A280A2A-0A300A320A330A350A360A380A390A59-0A5C0A5E0A72-0A740A85-0A8D0A8F-0A910A93-0AA80AAA-0AB00AB20AB30AB5-0AB90ABD0AD00AE00AE10B05-0B0C0B0F0B100B13-0B280B2A-0B300B320B330B35-0B390B3D0B5C0B5D0B5F-0B610B710B830B85-0B8A0B8E-0B900B92-0B950B990B9A0B9C0B9E0B9F0BA30BA40BA8-0BAA0BAE-0BB90BD00C05-0C0C0C0E-0C100C12-0C280C2A-0C330C35-0C390C3D0C580C590C600C610C85-0C8C0C8E-0C900C92-0CA80CAA-0CB30CB5-0CB90CBD0CDE0CE00CE10D05-0D0C0D0E-0D100D12-0D280D2A-0D390D3D0D600D610D7A-0D7F0D85-0D960D9A-0DB10DB3-0DBB0DBD0DC0-0DC60E01-0E300E320E330E40-0E460E810E820E840E870E880E8A0E8D0E94-0E970E99-0E9F0EA1-0EA30EA50EA70EAA0EAB0EAD-0EB00EB20EB30EBD0EC0-0EC40EC60EDC0EDD0F000F40-0F470F49-0F6C0F88-0F8B1000-102A103F1050-1055105A-105D106110651066106E-10701075-1081108E10A0-10C510D0-10FA10FC1100-1248124A-124D1250-12561258125A-125D1260-1288128A-128D1290-12B012B2-12B512B8-12BE12C012C2-12C512C8-12D612D8-13101312-13151318-135A1380-138F13A0-13F41401-166C166F-167F1681-169A16A0-16EA1700-170C170E-17111720-17311740-17511760-176C176E-17701780-17B317D717DC1820-18771880-18A818AA18B0-18F51900-191C1950-196D1970-19741980-19AB19C1-19C71A00-1A161A20-1A541AA71B05-1B331B45-1B4B1B83-1BA01BAE1BAF1C00-1C231C4D-1C4F1C5A-1C7D1CE9-1CEC1CEE-1CF11D00-1DBF1E00-1F151F18-1F1D1F20-1F451F48-1F4D1F50-1F571F591F5B1F5D1F5F-1F7D1F80-1FB41FB6-1FBC1FBE1FC2-1FC41FC6-1FCC1FD0-1FD31FD6-1FDB1FE0-1FEC1FF2-1FF41FF6-1FFC2071207F2090-209421022107210A-211321152119-211D212421262128212A-212D212F-2139213C-213F2145-2149214E218321842C00-2C2E2C30-2C5E2C60-2CE42CEB-2CEE2D00-2D252D30-2D652D6F2D80-2D962DA0-2DA62DA8-2DAE2DB0-2DB62DB8-2DBE2DC0-2DC62DC8-2DCE2DD0-2DD62DD8-2DDE2E2F300530063031-3035303B303C3041-3096309D-309F30A1-30FA30FC-30FF3105-312D3131-318E31A0-31B731F0-31FF3400-4DB54E00-9FCBA000-A48CA4D0-A4FDA500-A60CA610-A61FA62AA62BA640-A65FA662-A66EA67F-A697A6A0-A6E5A717-A71FA722-A788A78BA78CA7FB-A801A803-A805A807-A80AA80C-A822A840-A873A882-A8B3A8F2-A8F7A8FBA90A-A925A930-A946A960-A97CA984-A9B2A9CFAA00-AA28AA40-AA42AA44-AA4BAA60-AA76AA7AAA80-AAAFAAB1AAB5AAB6AAB9-AABDAAC0AAC2AADB-AADDABC0-ABE2AC00-D7A3D7B0-D7C6D7CB-D7FBF900-FA2DFA30-FA6DFA70-FAD9FB00-FB06FB13-FB17FB1DFB1F-FB28FB2A-FB36FB38-FB3CFB3EFB40FB41FB43FB44FB46-FBB1FBD3-FD3DFD50-FD8FFD92-FDC7FDF0-FDFBFE70-FE74FE76-FEFCFF21-FF3AFF41-FF5AFF66-FFBEFFC2-FFC7FFCA-FFCFFFD2-FFD7FFDA-FFDC",Ll:"0061-007A00AA00B500BA00DF-00F600F8-00FF01010103010501070109010B010D010F01110113011501170119011B011D011F01210123012501270129012B012D012F01310133013501370138013A013C013E014001420144014601480149014B014D014F01510153015501570159015B015D015F01610163016501670169016B016D016F0171017301750177017A017C017E-0180018301850188018C018D019201950199-019B019E01A101A301A501A801AA01AB01AD01B001B401B601B901BA01BD-01BF01C601C901CC01CE01D001D201D401D601D801DA01DC01DD01DF01E101E301E501E701E901EB01ED01EF01F001F301F501F901FB01FD01FF02010203020502070209020B020D020F02110213021502170219021B021D021F02210223022502270229022B022D022F02310233-0239023C023F0240024202470249024B024D024F-02930295-02AF037103730377037B-037D039003AC-03CE03D003D103D5-03D703D903DB03DD03DF03E103E303E503E703E903EB03ED03EF-03F303F503F803FB03FC0430-045F04610463046504670469046B046D046F04710473047504770479047B047D047F0481048B048D048F04910493049504970499049B049D049F04A104A304A504A704A904AB04AD04AF04B104B304B504B704B904BB04BD04BF04C204C404C604C804CA04CC04CE04CF04D104D304D504D704D904DB04DD04DF04E104E304E504E704E904EB04ED04EF04F104F304F504F704F904FB04FD04FF05010503050505070509050B050D050F05110513051505170519051B051D051F0521052305250561-05871D00-1D2B1D62-1D771D79-1D9A1E011E031E051E071E091E0B1E0D1E0F1E111E131E151E171E191E1B1E1D1E1F1E211E231E251E271E291E2B1E2D1E2F1E311E331E351E371E391E3B1E3D1E3F1E411E431E451E471E491E4B1E4D1E4F1E511E531E551E571E591E5B1E5D1E5F1E611E631E651E671E691E6B1E6D1E6F1E711E731E751E771E791E7B1E7D1E7F1E811E831E851E871E891E8B1E8D1E8F1E911E931E95-1E9D1E9F1EA11EA31EA51EA71EA91EAB1EAD1EAF1EB11EB31EB51EB71EB91EBB1EBD1EBF1EC11EC31EC51EC71EC91ECB1ECD1ECF1ED11ED31ED51ED71ED91EDB1EDD1EDF1EE11EE31EE51EE71EE91EEB1EED1EEF1EF11EF31EF51EF71EF91EFB1EFD1EFF-1F071F10-1F151F20-1F271F30-1F371F40-1F451F50-1F571F60-1F671F70-1F7D1F80-1F871F90-1F971FA0-1FA71FB0-1FB41FB61FB71FBE1FC2-1FC41FC61FC71FD0-1FD31FD61FD71FE0-1FE71FF2-1FF41FF61FF7210A210E210F2113212F21342139213C213D2146-2149214E21842C30-2C5E2C612C652C662C682C6A2C6C2C712C732C742C76-2C7C2C812C832C852C872C892C8B2C8D2C8F2C912C932C952C972C992C9B2C9D2C9F2CA12CA32CA52CA72CA92CAB2CAD2CAF2CB12CB32CB52CB72CB92CBB2CBD2CBF2CC12CC32CC52CC72CC92CCB2CCD2CCF2CD12CD32CD52CD72CD92CDB2CDD2CDF2CE12CE32CE42CEC2CEE2D00-2D25A641A643A645A647A649A64BA64DA64FA651A653A655A657A659A65BA65DA65FA663A665A667A669A66BA66DA681A683A685A687A689A68BA68DA68FA691A693A695A697A723A725A727A729A72BA72DA72F-A731A733A735A737A739A73BA73DA73FA741A743A745A747A749A74BA74DA74FA751A753A755A757A759A75BA75DA75FA761A763A765A767A769A76BA76DA76FA771-A778A77AA77CA77FA781A783A785A787A78CFB00-FB06FB13-FB17FF41-FF5A",Lu:"0041-005A00C0-00D600D8-00DE01000102010401060108010A010C010E01100112011401160118011A011C011E01200122012401260128012A012C012E01300132013401360139013B013D013F0141014301450147014A014C014E01500152015401560158015A015C015E01600162016401660168016A016C016E017001720174017601780179017B017D018101820184018601870189-018B018E-0191019301940196-0198019C019D019F01A001A201A401A601A701A901AC01AE01AF01B1-01B301B501B701B801BC01C401C701CA01CD01CF01D101D301D501D701D901DB01DE01E001E201E401E601E801EA01EC01EE01F101F401F6-01F801FA01FC01FE02000202020402060208020A020C020E02100212021402160218021A021C021E02200222022402260228022A022C022E02300232023A023B023D023E02410243-02460248024A024C024E03700372037603860388-038A038C038E038F0391-03A103A3-03AB03CF03D2-03D403D803DA03DC03DE03E003E203E403E603E803EA03EC03EE03F403F703F903FA03FD-042F04600462046404660468046A046C046E04700472047404760478047A047C047E0480048A048C048E04900492049404960498049A049C049E04A004A204A404A604A804AA04AC04AE04B004B204B404B604B804BA04BC04BE04C004C104C304C504C704C904CB04CD04D004D204D404D604D804DA04DC04DE04E004E204E404E604E804EA04EC04EE04F004F204F404F604F804FA04FC04FE05000502050405060508050A050C050E05100512051405160518051A051C051E0520052205240531-055610A0-10C51E001E021E041E061E081E0A1E0C1E0E1E101E121E141E161E181E1A1E1C1E1E1E201E221E241E261E281E2A1E2C1E2E1E301E321E341E361E381E3A1E3C1E3E1E401E421E441E461E481E4A1E4C1E4E1E501E521E541E561E581E5A1E5C1E5E1E601E621E641E661E681E6A1E6C1E6E1E701E721E741E761E781E7A1E7C1E7E1E801E821E841E861E881E8A1E8C1E8E1E901E921E941E9E1EA01EA21EA41EA61EA81EAA1EAC1EAE1EB01EB21EB41EB61EB81EBA1EBC1EBE1EC01EC21EC41EC61EC81ECA1ECC1ECE1ED01ED21ED41ED61ED81EDA1EDC1EDE1EE01EE21EE41EE61EE81EEA1EEC1EEE1EF01EF21EF41EF61EF81EFA1EFC1EFE1F08-1F0F1F18-1F1D1F28-1F2F1F38-1F3F1F48-1F4D1F591F5B1F5D1F5F1F68-1F6F1FB8-1FBB1FC8-1FCB1FD8-1FDB1FE8-1FEC1FF8-1FFB21022107210B-210D2110-211221152119-211D212421262128212A-212D2130-2133213E213F214521832C00-2C2E2C602C62-2C642C672C692C6B2C6D-2C702C722C752C7E-2C802C822C842C862C882C8A2C8C2C8E2C902C922C942C962C982C9A2C9C2C9E2CA02CA22CA42CA62CA82CAA2CAC2CAE2CB02CB22CB42CB62CB82CBA2CBC2CBE2CC02CC22CC42CC62CC82CCA2CCC2CCE2CD02CD22CD42CD62CD82CDA2CDC2CDE2CE02CE22CEB2CEDA640A642A644A646A648A64AA64CA64EA650A652A654A656A658A65AA65CA65EA662A664A666A668A66AA66CA680A682A684A686A688A68AA68CA68EA690A692A694A696A722A724A726A728A72AA72CA72EA732A734A736A738A73AA73CA73EA740A742A744A746A748A74AA74CA74EA750A752A754A756A758A75AA75CA75EA760A762A764A766A768A76AA76CA76EA779A77BA77DA77EA780A782A784A786A78BFF21-FF3A",Lt:"01C501C801CB01F21F88-1F8F1F98-1F9F1FA8-1FAF1FBC1FCC1FFC",Lm:"02B0-02C102C6-02D102E0-02E402EC02EE0374037A0559064006E506E607F407F507FA081A0824082809710E460EC610FC17D718431AA71C78-1C7D1D2C-1D611D781D9B-1DBF2071207F2090-20942C7D2D6F2E2F30053031-3035303B309D309E30FC-30FEA015A4F8-A4FDA60CA67FA717-A71FA770A788A9CFAA70AADDFF70FF9EFF9F",Lo:"01BB01C0-01C3029405D0-05EA05F0-05F20621-063F0641-064A066E066F0671-06D306D506EE06EF06FA-06FC06FF07100712-072F074D-07A507B107CA-07EA0800-08150904-0939093D09500958-096109720979-097F0985-098C098F09900993-09A809AA-09B009B209B6-09B909BD09CE09DC09DD09DF-09E109F009F10A05-0A0A0A0F0A100A13-0A280A2A-0A300A320A330A350A360A380A390A59-0A5C0A5E0A72-0A740A85-0A8D0A8F-0A910A93-0AA80AAA-0AB00AB20AB30AB5-0AB90ABD0AD00AE00AE10B05-0B0C0B0F0B100B13-0B280B2A-0B300B320B330B35-0B390B3D0B5C0B5D0B5F-0B610B710B830B85-0B8A0B8E-0B900B92-0B950B990B9A0B9C0B9E0B9F0BA30BA40BA8-0BAA0BAE-0BB90BD00C05-0C0C0C0E-0C100C12-0C280C2A-0C330C35-0C390C3D0C580C590C600C610C85-0C8C0C8E-0C900C92-0CA80CAA-0CB30CB5-0CB90CBD0CDE0CE00CE10D05-0D0C0D0E-0D100D12-0D280D2A-0D390D3D0D600D610D7A-0D7F0D85-0D960D9A-0DB10DB3-0DBB0DBD0DC0-0DC60E01-0E300E320E330E40-0E450E810E820E840E870E880E8A0E8D0E94-0E970E99-0E9F0EA1-0EA30EA50EA70EAA0EAB0EAD-0EB00EB20EB30EBD0EC0-0EC40EDC0EDD0F000F40-0F470F49-0F6C0F88-0F8B1000-102A103F1050-1055105A-105D106110651066106E-10701075-1081108E10D0-10FA1100-1248124A-124D1250-12561258125A-125D1260-1288128A-128D1290-12B012B2-12B512B8-12BE12C012C2-12C512C8-12D612D8-13101312-13151318-135A1380-138F13A0-13F41401-166C166F-167F1681-169A16A0-16EA1700-170C170E-17111720-17311740-17511760-176C176E-17701780-17B317DC1820-18421844-18771880-18A818AA18B0-18F51900-191C1950-196D1970-19741980-19AB19C1-19C71A00-1A161A20-1A541B05-1B331B45-1B4B1B83-1BA01BAE1BAF1C00-1C231C4D-1C4F1C5A-1C771CE9-1CEC1CEE-1CF12135-21382D30-2D652D80-2D962DA0-2DA62DA8-2DAE2DB0-2DB62DB8-2DBE2DC0-2DC62DC8-2DCE2DD0-2DD62DD8-2DDE3006303C3041-3096309F30A1-30FA30FF3105-312D3131-318E31A0-31B731F0-31FF3400-4DB54E00-9FCBA000-A014A016-A48CA4D0-A4F7A500-A60BA610-A61FA62AA62BA66EA6A0-A6E5A7FB-A801A803-A805A807-A80AA80C-A822A840-A873A882-A8B3A8F2-A8F7A8FBA90A-A925A930-A946A960-A97CA984-A9B2AA00-AA28AA40-AA42AA44-AA4BAA60-AA6FAA71-AA76AA7AAA80-AAAFAAB1AAB5AAB6AAB9-AABDAAC0AAC2AADBAADCABC0-ABE2AC00-D7A3D7B0-D7C6D7CB-D7FBF900-FA2DFA30-FA6DFA70-FAD9FB1DFB1F-FB28FB2A-FB36FB38-FB3CFB3EFB40FB41FB43FB44FB46-FBB1FBD3-FD3DFD50-FD8FFD92-FDC7FDF0-FDFBFE70-FE74FE76-FEFCFF66-FF6FFF71-FF9DFFA0-FFBEFFC2-FFC7FFCA-FFCFFFD2-FFD7FFDA-FFDC",M:"0300-036F0483-04890591-05BD05BF05C105C205C405C505C70610-061A064B-065E067006D6-06DC06DE-06E406E706E806EA-06ED07110730-074A07A6-07B007EB-07F30816-0819081B-08230825-08270829-082D0900-0903093C093E-094E0951-0955096209630981-098309BC09BE-09C409C709C809CB-09CD09D709E209E30A01-0A030A3C0A3E-0A420A470A480A4B-0A4D0A510A700A710A750A81-0A830ABC0ABE-0AC50AC7-0AC90ACB-0ACD0AE20AE30B01-0B030B3C0B3E-0B440B470B480B4B-0B4D0B560B570B620B630B820BBE-0BC20BC6-0BC80BCA-0BCD0BD70C01-0C030C3E-0C440C46-0C480C4A-0C4D0C550C560C620C630C820C830CBC0CBE-0CC40CC6-0CC80CCA-0CCD0CD50CD60CE20CE30D020D030D3E-0D440D46-0D480D4A-0D4D0D570D620D630D820D830DCA0DCF-0DD40DD60DD8-0DDF0DF20DF30E310E34-0E3A0E47-0E4E0EB10EB4-0EB90EBB0EBC0EC8-0ECD0F180F190F350F370F390F3E0F3F0F71-0F840F860F870F90-0F970F99-0FBC0FC6102B-103E1056-1059105E-10601062-10641067-106D1071-10741082-108D108F109A-109D135F1712-17141732-1734175217531772177317B6-17D317DD180B-180D18A91920-192B1930-193B19B0-19C019C819C91A17-1A1B1A55-1A5E1A60-1A7C1A7F1B00-1B041B34-1B441B6B-1B731B80-1B821BA1-1BAA1C24-1C371CD0-1CD21CD4-1CE81CED1CF21DC0-1DE61DFD-1DFF20D0-20F02CEF-2CF12DE0-2DFF302A-302F3099309AA66F-A672A67CA67DA6F0A6F1A802A806A80BA823-A827A880A881A8B4-A8C4A8E0-A8F1A926-A92DA947-A953A980-A983A9B3-A9C0AA29-AA36AA43AA4CAA4DAA7BAAB0AAB2-AAB4AAB7AAB8AABEAABFAAC1ABE3-ABEAABECABEDFB1EFE00-FE0FFE20-FE26",Mn:"0300-036F0483-04870591-05BD05BF05C105C205C405C505C70610-061A064B-065E067006D6-06DC06DF-06E406E706E806EA-06ED07110730-074A07A6-07B007EB-07F30816-0819081B-08230825-08270829-082D0900-0902093C0941-0948094D0951-095509620963098109BC09C1-09C409CD09E209E30A010A020A3C0A410A420A470A480A4B-0A4D0A510A700A710A750A810A820ABC0AC1-0AC50AC70AC80ACD0AE20AE30B010B3C0B3F0B41-0B440B4D0B560B620B630B820BC00BCD0C3E-0C400C46-0C480C4A-0C4D0C550C560C620C630CBC0CBF0CC60CCC0CCD0CE20CE30D41-0D440D4D0D620D630DCA0DD2-0DD40DD60E310E34-0E3A0E47-0E4E0EB10EB4-0EB90EBB0EBC0EC8-0ECD0F180F190F350F370F390F71-0F7E0F80-0F840F860F870F90-0F970F99-0FBC0FC6102D-10301032-10371039103A103D103E10581059105E-10601071-1074108210851086108D109D135F1712-17141732-1734175217531772177317B7-17BD17C617C9-17D317DD180B-180D18A91920-19221927192819321939-193B1A171A181A561A58-1A5E1A601A621A65-1A6C1A73-1A7C1A7F1B00-1B031B341B36-1B3A1B3C1B421B6B-1B731B801B811BA2-1BA51BA81BA91C2C-1C331C361C371CD0-1CD21CD4-1CE01CE2-1CE81CED1DC0-1DE61DFD-1DFF20D0-20DC20E120E5-20F02CEF-2CF12DE0-2DFF302A-302F3099309AA66FA67CA67DA6F0A6F1A802A806A80BA825A826A8C4A8E0-A8F1A926-A92DA947-A951A980-A982A9B3A9B6-A9B9A9BCAA29-AA2EAA31AA32AA35AA36AA43AA4CAAB0AAB2-AAB4AAB7AAB8AABEAABFAAC1ABE5ABE8ABEDFB1EFE00-FE0FFE20-FE26",Mc:"0903093E-09400949-094C094E0982098309BE-09C009C709C809CB09CC09D70A030A3E-0A400A830ABE-0AC00AC90ACB0ACC0B020B030B3E0B400B470B480B4B0B4C0B570BBE0BBF0BC10BC20BC6-0BC80BCA-0BCC0BD70C01-0C030C41-0C440C820C830CBE0CC0-0CC40CC70CC80CCA0CCB0CD50CD60D020D030D3E-0D400D46-0D480D4A-0D4C0D570D820D830DCF-0DD10DD8-0DDF0DF20DF30F3E0F3F0F7F102B102C10311038103B103C105610571062-10641067-106D108310841087-108C108F109A-109C17B617BE-17C517C717C81923-19261929-192B193019311933-193819B0-19C019C819C91A19-1A1B1A551A571A611A631A641A6D-1A721B041B351B3B1B3D-1B411B431B441B821BA11BA61BA71BAA1C24-1C2B1C341C351CE11CF2A823A824A827A880A881A8B4-A8C3A952A953A983A9B4A9B5A9BAA9BBA9BD-A9C0AA2FAA30AA33AA34AA4DAA7BABE3ABE4ABE6ABE7ABE9ABEAABEC",Me:"0488048906DE20DD-20E020E2-20E4A670-A672",N:"0030-003900B200B300B900BC-00BE0660-066906F0-06F907C0-07C90966-096F09E6-09EF09F4-09F90A66-0A6F0AE6-0AEF0B66-0B6F0BE6-0BF20C66-0C6F0C78-0C7E0CE6-0CEF0D66-0D750E50-0E590ED0-0ED90F20-0F331040-10491090-10991369-137C16EE-16F017E0-17E917F0-17F91810-18191946-194F19D0-19DA1A80-1A891A90-1A991B50-1B591BB0-1BB91C40-1C491C50-1C5920702074-20792080-20892150-21822185-21892460-249B24EA-24FF2776-27932CFD30073021-30293038-303A3192-31953220-32293251-325F3280-328932B1-32BFA620-A629A6E6-A6EFA830-A835A8D0-A8D9A900-A909A9D0-A9D9AA50-AA59ABF0-ABF9FF10-FF19",Nd:"0030-00390660-066906F0-06F907C0-07C90966-096F09E6-09EF0A66-0A6F0AE6-0AEF0B66-0B6F0BE6-0BEF0C66-0C6F0CE6-0CEF0D66-0D6F0E50-0E590ED0-0ED90F20-0F291040-10491090-109917E0-17E91810-18191946-194F19D0-19DA1A80-1A891A90-1A991B50-1B591BB0-1BB91C40-1C491C50-1C59A620-A629A8D0-A8D9A900-A909A9D0-A9D9AA50-AA59ABF0-ABF9FF10-FF19",Nl:"16EE-16F02160-21822185-218830073021-30293038-303AA6E6-A6EF",No:"00B200B300B900BC-00BE09F4-09F90BF0-0BF20C78-0C7E0D70-0D750F2A-0F331369-137C17F0-17F920702074-20792080-20892150-215F21892460-249B24EA-24FF2776-27932CFD3192-31953220-32293251-325F3280-328932B1-32BFA830-A835",P:"0021-00230025-002A002C-002F003A003B003F0040005B-005D005F007B007D00A100AB00B700BB00BF037E0387055A-055F0589058A05BE05C005C305C605F305F40609060A060C060D061B061E061F066A-066D06D40700-070D07F7-07F90830-083E0964096509700DF40E4F0E5A0E5B0F04-0F120F3A-0F3D0F850FD0-0FD4104A-104F10FB1361-13681400166D166E169B169C16EB-16ED1735173617D4-17D617D8-17DA1800-180A1944194519DE19DF1A1E1A1F1AA0-1AA61AA8-1AAD1B5A-1B601C3B-1C3F1C7E1C7F1CD32010-20272030-20432045-20512053-205E207D207E208D208E2329232A2768-277527C527C627E6-27EF2983-299829D8-29DB29FC29FD2CF9-2CFC2CFE2CFF2E00-2E2E2E302E313001-30033008-30113014-301F3030303D30A030FBA4FEA4FFA60D-A60FA673A67EA6F2-A6F7A874-A877A8CEA8CFA8F8-A8FAA92EA92FA95FA9C1-A9CDA9DEA9DFAA5C-AA5FAADEAADFABEBFD3EFD3FFE10-FE19FE30-FE52FE54-FE61FE63FE68FE6AFE6BFF01-FF03FF05-FF0AFF0C-FF0FFF1AFF1BFF1FFF20FF3B-FF3DFF3FFF5BFF5DFF5F-FF65",Pd:"002D058A05BE140018062010-20152E172E1A301C303030A0FE31FE32FE58FE63FF0D",Ps:"0028005B007B0F3A0F3C169B201A201E2045207D208D23292768276A276C276E27702772277427C527E627E827EA27EC27EE2983298529872989298B298D298F299129932995299729D829DA29FC2E222E242E262E283008300A300C300E3010301430163018301A301DFD3EFE17FE35FE37FE39FE3BFE3DFE3FFE41FE43FE47FE59FE5BFE5DFF08FF3BFF5BFF5FFF62",Pe:"0029005D007D0F3B0F3D169C2046207E208E232A2769276B276D276F27712773277527C627E727E927EB27ED27EF298429862988298A298C298E2990299229942996299829D929DB29FD2E232E252E272E293009300B300D300F3011301530173019301B301E301FFD3FFE18FE36FE38FE3AFE3CFE3EFE40FE42FE44FE48FE5AFE5CFE5EFF09FF3DFF5DFF60FF63",Pi:"00AB2018201B201C201F20392E022E042E092E0C2E1C2E20",Pf:"00BB2019201D203A2E032E052E0A2E0D2E1D2E21",Pc:"005F203F20402054FE33FE34FE4D-FE4FFF3F",Po:"0021-00230025-0027002A002C002E002F003A003B003F0040005C00A100B700BF037E0387055A-055F058905C005C305C605F305F40609060A060C060D061B061E061F066A-066D06D40700-070D07F7-07F90830-083E0964096509700DF40E4F0E5A0E5B0F04-0F120F850FD0-0FD4104A-104F10FB1361-1368166D166E16EB-16ED1735173617D4-17D617D8-17DA1800-18051807-180A1944194519DE19DF1A1E1A1F1AA0-1AA61AA8-1AAD1B5A-1B601C3B-1C3F1C7E1C7F1CD3201620172020-20272030-2038203B-203E2041-20432047-205120532055-205E2CF9-2CFC2CFE2CFF2E002E012E06-2E082E0B2E0E-2E162E182E192E1B2E1E2E1F2E2A-2E2E2E302E313001-3003303D30FBA4FEA4FFA60D-A60FA673A67EA6F2-A6F7A874-A877A8CEA8CFA8F8-A8FAA92EA92FA95FA9C1-A9CDA9DEA9DFAA5C-AA5FAADEAADFABEBFE10-FE16FE19FE30FE45FE46FE49-FE4CFE50-FE52FE54-FE57FE5F-FE61FE68FE6AFE6BFF01-FF03FF05-FF07FF0AFF0CFF0EFF0FFF1AFF1BFF1FFF20FF3CFF61FF64FF65",S:"0024002B003C-003E005E0060007C007E00A2-00A900AC00AE-00B100B400B600B800D700F702C2-02C502D2-02DF02E5-02EB02ED02EF-02FF03750384038503F604820606-0608060B060E060F06E906FD06FE07F609F209F309FA09FB0AF10B700BF3-0BFA0C7F0CF10CF20D790E3F0F01-0F030F13-0F170F1A-0F1F0F340F360F380FBE-0FC50FC7-0FCC0FCE0FCF0FD5-0FD8109E109F13601390-139917DB194019E0-19FF1B61-1B6A1B74-1B7C1FBD1FBF-1FC11FCD-1FCF1FDD-1FDF1FED-1FEF1FFD1FFE20442052207A-207C208A-208C20A0-20B8210021012103-21062108210921142116-2118211E-2123212521272129212E213A213B2140-2144214A-214D214F2190-2328232B-23E82400-24262440-244A249C-24E92500-26CD26CF-26E126E326E8-26FF2701-27042706-2709270C-27272729-274B274D274F-27522756-275E2761-276727942798-27AF27B1-27BE27C0-27C427C7-27CA27CC27D0-27E527F0-29822999-29D729DC-29FB29FE-2B4C2B50-2B592CE5-2CEA2E80-2E992E9B-2EF32F00-2FD52FF0-2FFB300430123013302030363037303E303F309B309C319031913196-319F31C0-31E33200-321E322A-32503260-327F328A-32B032C0-32FE3300-33FF4DC0-4DFFA490-A4C6A700-A716A720A721A789A78AA828-A82BA836-A839AA77-AA79FB29FDFCFDFDFE62FE64-FE66FE69FF04FF0BFF1C-FF1EFF3EFF40FF5CFF5EFFE0-FFE6FFE8-FFEEFFFCFFFD",Sm:"002B003C-003E007C007E00AC00B100D700F703F60606-060820442052207A-207C208A-208C2140-2144214B2190-2194219A219B21A021A321A621AE21CE21CF21D221D421F4-22FF2308-230B23202321237C239B-23B323DC-23E125B725C125F8-25FF266F27C0-27C427C7-27CA27CC27D0-27E527F0-27FF2900-29822999-29D729DC-29FB29FE-2AFF2B30-2B442B47-2B4CFB29FE62FE64-FE66FF0BFF1C-FF1EFF5CFF5EFFE2FFE9-FFEC",Sc:"002400A2-00A5060B09F209F309FB0AF10BF90E3F17DB20A0-20B8A838FDFCFE69FF04FFE0FFE1FFE5FFE6",Sk:"005E006000A800AF00B400B802C2-02C502D2-02DF02E5-02EB02ED02EF-02FF0375038403851FBD1FBF-1FC11FCD-1FCF1FDD-1FDF1FED-1FEF1FFD1FFE309B309CA700-A716A720A721A789A78AFF3EFF40FFE3",So:"00A600A700A900AE00B000B60482060E060F06E906FD06FE07F609FA0B700BF3-0BF80BFA0C7F0CF10CF20D790F01-0F030F13-0F170F1A-0F1F0F340F360F380FBE-0FC50FC7-0FCC0FCE0FCF0FD5-0FD8109E109F13601390-1399194019E0-19FF1B61-1B6A1B74-1B7C210021012103-21062108210921142116-2118211E-2123212521272129212E213A213B214A214C214D214F2195-2199219C-219F21A121A221A421A521A7-21AD21AF-21CD21D021D121D321D5-21F32300-2307230C-231F2322-2328232B-237B237D-239A23B4-23DB23E2-23E82400-24262440-244A249C-24E92500-25B625B8-25C025C2-25F72600-266E2670-26CD26CF-26E126E326E8-26FF2701-27042706-2709270C-27272729-274B274D274F-27522756-275E2761-276727942798-27AF27B1-27BE2800-28FF2B00-2B2F2B452B462B50-2B592CE5-2CEA2E80-2E992E9B-2EF32F00-2FD52FF0-2FFB300430123013302030363037303E303F319031913196-319F31C0-31E33200-321E322A-32503260-327F328A-32B032C0-32FE3300-33FF4DC0-4DFFA490-A4C6A828-A82BA836A837A839AA77-AA79FDFDFFE4FFE8FFEDFFEEFFFCFFFD",Z:"002000A01680180E2000-200A20282029202F205F3000",Zs:"002000A01680180E2000-200A202F205F3000",Zl:"2028",Zp:"2029",C:"0000-001F007F-009F00AD03780379037F-0383038B038D03A20526-05300557055805600588058B-059005C8-05CF05EB-05EF05F5-0605061C061D0620065F06DD070E070F074B074C07B2-07BF07FB-07FF082E082F083F-08FF093A093B094F095609570973-097809800984098D098E0991099209A909B109B3-09B509BA09BB09C509C609C909CA09CF-09D609D8-09DB09DE09E409E509FC-0A000A040A0B-0A0E0A110A120A290A310A340A370A3A0A3B0A3D0A43-0A460A490A4A0A4E-0A500A52-0A580A5D0A5F-0A650A76-0A800A840A8E0A920AA90AB10AB40ABA0ABB0AC60ACA0ACE0ACF0AD1-0ADF0AE40AE50AF00AF2-0B000B040B0D0B0E0B110B120B290B310B340B3A0B3B0B450B460B490B4A0B4E-0B550B58-0B5B0B5E0B640B650B72-0B810B840B8B-0B8D0B910B96-0B980B9B0B9D0BA0-0BA20BA5-0BA70BAB-0BAD0BBA-0BBD0BC3-0BC50BC90BCE0BCF0BD1-0BD60BD8-0BE50BFB-0C000C040C0D0C110C290C340C3A-0C3C0C450C490C4E-0C540C570C5A-0C5F0C640C650C70-0C770C800C810C840C8D0C910CA90CB40CBA0CBB0CC50CC90CCE-0CD40CD7-0CDD0CDF0CE40CE50CF00CF3-0D010D040D0D0D110D290D3A-0D3C0D450D490D4E-0D560D58-0D5F0D640D650D76-0D780D800D810D840D97-0D990DB20DBC0DBE0DBF0DC7-0DC90DCB-0DCE0DD50DD70DE0-0DF10DF5-0E000E3B-0E3E0E5C-0E800E830E850E860E890E8B0E8C0E8E-0E930E980EA00EA40EA60EA80EA90EAC0EBA0EBE0EBF0EC50EC70ECE0ECF0EDA0EDB0EDE-0EFF0F480F6D-0F700F8C-0F8F0F980FBD0FCD0FD9-0FFF10C6-10CF10FD-10FF1249124E124F12571259125E125F1289128E128F12B112B612B712BF12C112C612C712D7131113161317135B-135E137D-137F139A-139F13F5-13FF169D-169F16F1-16FF170D1715-171F1737-173F1754-175F176D17711774-177F17B417B517DE17DF17EA-17EF17FA-17FF180F181A-181F1878-187F18AB-18AF18F6-18FF191D-191F192C-192F193C-193F1941-1943196E196F1975-197F19AC-19AF19CA-19CF19DB-19DD1A1C1A1D1A5F1A7D1A7E1A8A-1A8F1A9A-1A9F1AAE-1AFF1B4C-1B4F1B7D-1B7F1BAB-1BAD1BBA-1BFF1C38-1C3A1C4A-1C4C1C80-1CCF1CF3-1CFF1DE7-1DFC1F161F171F1E1F1F1F461F471F4E1F4F1F581F5A1F5C1F5E1F7E1F7F1FB51FC51FD41FD51FDC1FF01FF11FF51FFF200B-200F202A-202E2060-206F20722073208F2095-209F20B9-20CF20F1-20FF218A-218F23E9-23FF2427-243F244B-245F26CE26E226E4-26E727002705270A270B2728274C274E2753-2755275F27602795-279727B027BF27CB27CD-27CF2B4D-2B4F2B5A-2BFF2C2F2C5F2CF2-2CF82D26-2D2F2D66-2D6E2D70-2D7F2D97-2D9F2DA72DAF2DB72DBF2DC72DCF2DD72DDF2E32-2E7F2E9A2EF4-2EFF2FD6-2FEF2FFC-2FFF3040309730983100-3104312E-3130318F31B8-31BF31E4-31EF321F32FF4DB6-4DBF9FCC-9FFFA48D-A48FA4C7-A4CFA62C-A63FA660A661A674-A67BA698-A69FA6F8-A6FFA78D-A7FAA82C-A82FA83A-A83FA878-A87FA8C5-A8CDA8DA-A8DFA8FC-A8FFA954-A95EA97D-A97FA9CEA9DA-A9DDA9E0-A9FFAA37-AA3FAA4EAA4FAA5AAA5BAA7C-AA7FAAC3-AADAAAE0-ABBFABEEABEFABFA-ABFFD7A4-D7AFD7C7-D7CAD7FC-F8FFFA2EFA2FFA6EFA6FFADA-FAFFFB07-FB12FB18-FB1CFB37FB3DFB3FFB42FB45FBB2-FBD2FD40-FD4FFD90FD91FDC8-FDEFFDFEFDFFFE1A-FE1FFE27-FE2FFE53FE67FE6C-FE6FFE75FEFD-FF00FFBF-FFC1FFC8FFC9FFD0FFD1FFD8FFD9FFDD-FFDFFFE7FFEF-FFFBFFFEFFFF",Cc:"0000-001F007F-009F",Cf:"00AD0600-060306DD070F17B417B5200B-200F202A-202E2060-2064206A-206FFEFFFFF9-FFFB",Co:"E000-F8FF",Cs:"D800-DFFF",Cn:"03780379037F-0383038B038D03A20526-05300557055805600588058B-059005C8-05CF05EB-05EF05F5-05FF06040605061C061D0620065F070E074B074C07B2-07BF07FB-07FF082E082F083F-08FF093A093B094F095609570973-097809800984098D098E0991099209A909B109B3-09B509BA09BB09C509C609C909CA09CF-09D609D8-09DB09DE09E409E509FC-0A000A040A0B-0A0E0A110A120A290A310A340A370A3A0A3B0A3D0A43-0A460A490A4A0A4E-0A500A52-0A580A5D0A5F-0A650A76-0A800A840A8E0A920AA90AB10AB40ABA0ABB0AC60ACA0ACE0ACF0AD1-0ADF0AE40AE50AF00AF2-0B000B040B0D0B0E0B110B120B290B310B340B3A0B3B0B450B460B490B4A0B4E-0B550B58-0B5B0B5E0B640B650B72-0B810B840B8B-0B8D0B910B96-0B980B9B0B9D0BA0-0BA20BA5-0BA70BAB-0BAD0BBA-0BBD0BC3-0BC50BC90BCE0BCF0BD1-0BD60BD8-0BE50BFB-0C000C040C0D0C110C290C340C3A-0C3C0C450C490C4E-0C540C570C5A-0C5F0C640C650C70-0C770C800C810C840C8D0C910CA90CB40CBA0CBB0CC50CC90CCE-0CD40CD7-0CDD0CDF0CE40CE50CF00CF3-0D010D040D0D0D110D290D3A-0D3C0D450D490D4E-0D560D58-0D5F0D640D650D76-0D780D800D810D840D97-0D990DB20DBC0DBE0DBF0DC7-0DC90DCB-0DCE0DD50DD70DE0-0DF10DF5-0E000E3B-0E3E0E5C-0E800E830E850E860E890E8B0E8C0E8E-0E930E980EA00EA40EA60EA80EA90EAC0EBA0EBE0EBF0EC50EC70ECE0ECF0EDA0EDB0EDE-0EFF0F480F6D-0F700F8C-0F8F0F980FBD0FCD0FD9-0FFF10C6-10CF10FD-10FF1249124E124F12571259125E125F1289128E128F12B112B612B712BF12C112C612C712D7131113161317135B-135E137D-137F139A-139F13F5-13FF169D-169F16F1-16FF170D1715-171F1737-173F1754-175F176D17711774-177F17DE17DF17EA-17EF17FA-17FF180F181A-181F1878-187F18AB-18AF18F6-18FF191D-191F192C-192F193C-193F1941-1943196E196F1975-197F19AC-19AF19CA-19CF19DB-19DD1A1C1A1D1A5F1A7D1A7E1A8A-1A8F1A9A-1A9F1AAE-1AFF1B4C-1B4F1B7D-1B7F1BAB-1BAD1BBA-1BFF1C38-1C3A1C4A-1C4C1C80-1CCF1CF3-1CFF1DE7-1DFC1F161F171F1E1F1F1F461F471F4E1F4F1F581F5A1F5C1F5E1F7E1F7F1FB51FC51FD41FD51FDC1FF01FF11FF51FFF2065-206920722073208F2095-209F20B9-20CF20F1-20FF218A-218F23E9-23FF2427-243F244B-245F26CE26E226E4-26E727002705270A270B2728274C274E2753-2755275F27602795-279727B027BF27CB27CD-27CF2B4D-2B4F2B5A-2BFF2C2F2C5F2CF2-2CF82D26-2D2F2D66-2D6E2D70-2D7F2D97-2D9F2DA72DAF2DB72DBF2DC72DCF2DD72DDF2E32-2E7F2E9A2EF4-2EFF2FD6-2FEF2FFC-2FFF3040309730983100-3104312E-3130318F31B8-31BF31E4-31EF321F32FF4DB6-4DBF9FCC-9FFFA48D-A48FA4C7-A4CFA62C-A63FA660A661A674-A67BA698-A69FA6F8-A6FFA78D-A7FAA82C-A82FA83A-A83FA878-A87FA8C5-A8CDA8DA-A8DFA8FC-A8FFA954-A95EA97D-A97FA9CEA9DA-A9DDA9E0-A9FFAA37-AA3FAA4EAA4FAA5AAA5BAA7C-AA7FAAC3-AADAAAE0-ABBFABEEABEFABFA-ABFFD7A4-D7AFD7C7-D7CAD7FC-D7FFFA2EFA2FFA6EFA6FFADA-FAFFFB07-FB12FB18-FB1CFB37FB3DFB3FFB42FB45FBB2-FBD2FD40-FD4FFD90FD91FDC8-FDEFFDFEFDFFFE1A-FE1FFE27-FE2FFE53FE67FE6C-FE6FFE75FEFDFEFEFF00FFBF-FFC1FFC8FFC9FFD0FFD1FFD8FFD9FFDD-FFDFFFE7FFEF-FFF8FFFEFFFF"})
}),ace.define("ace/token_iterator",["require","exports","module"],function(a,b){var d=function(a,b,c){this.$session=a,this.$row=b,this.$rowTokens=a.getTokens(b);var d=a.getTokenAt(b,c);this.$tokenIndex=d?d.index:-1};(function(){this.stepBackward=function(){for(this.$tokenIndex-=1;this.$tokenIndex<0;){if(this.$row-=1,this.$row<0)return this.$row=0,null;this.$rowTokens=this.$session.getTokens(this.$row),this.$tokenIndex=this.$rowTokens.length-1}return this.$rowTokens[this.$tokenIndex]},this.stepForward=function(){this.$tokenIndex+=1;
for(var a;this.$tokenIndex>=this.$rowTokens.length;){if(this.$row+=1,a||(a=this.$session.getLength()),this.$row>=a)return this.$row=a-1,null;this.$rowTokens=this.$session.getTokens(this.$row),this.$tokenIndex=0}return this.$rowTokens[this.$tokenIndex]},this.getCurrentToken=function(){return this.$rowTokens[this.$tokenIndex]},this.getCurrentTokenRow=function(){return this.$row},this.getCurrentTokenColumn=function(){var a=this.$rowTokens,b=this.$tokenIndex,c=a[b].start;if(void 0!==c)return c;for(c=0;b>0;)b-=1,c+=a[b].value.length;
return c}}).call(d.prototype),b.TokenIterator=d}),ace.define("ace/mode/text_highlight_rules",["require","exports","module","ace/lib/lang"],function(a,b){var d=a("../lib/lang"),e=function(){this.$rules={start:[{token:"empty_line",regex:"^$"},{defaultToken:"text"}]}};(function(){this.addRules=function(a,b){if(b)for(var c in a){for(var d=a[c],e=0;e<d.length;e++){var f=d[e];f.next&&("string"!=typeof f.next?f.nextState&&0!==f.nextState.indexOf(b)&&(f.nextState=b+f.nextState):0!==f.next.indexOf(b)&&(f.next=b+f.next))
}this.$rules[b+c]=d}else for(var c in a)this.$rules[c]=a[c]},this.getRules=function(){return this.$rules},this.embedRules=function(a,b,c,e,f){var g="function"==typeof a?(new a).getRules():a;if(e)for(var h=0;h<e.length;h++)e[h]=b+e[h];else{e=[];for(var i in g)e.push(b+i)}if(this.addRules(g,b),c)for(var j=Array.prototype[f?"push":"unshift"],h=0;h<e.length;h++)j.apply(this.$rules[e[h]],d.deepCopy(c));this.$embeds||(this.$embeds=[]),this.$embeds.push(b)},this.getEmbeds=function(){return this.$embeds};var a=function(a,b){return("start"!=a||b.length)&&b.unshift(this.nextState,a),this.nextState
},b=function(a,b){return b.shift(),b.shift()||"start"};this.normalizeRules=function(){function c(f){var g=e[f];g.processed=!0;for(var h=0;h<g.length;h++){var i=g[h];!i.regex&&i.start&&(i.regex=i.start,i.next||(i.next=[]),i.next.push({defaultToken:i.token},{token:i.token+".end",regex:i.end||i.start,next:"pop"}),i.token=i.token+".start",i.push=!0);var j=i.next||i.push;if(j&&Array.isArray(j)){var k=i.stateName;k||(k=i.token,"string"!=typeof k&&(k=k[0]||""),e[k]&&(k+=d++)),e[k]=j,i.next=k,c(k)}else"pop"==j&&(i.next=b);
if(i.push&&(i.nextState=i.next||i.push,i.next=a,delete i.push),i.rules)for(var l in i.rules)e[l]?e[l].push&&e[l].push.apply(e[l],i.rules[l]):e[l]=i.rules[l];if(i.include||"string"==typeof i)var m=i.include||i,n=e[m];else Array.isArray(i)&&(n=i);if(n){var o=[h,1].concat(n);i.noEscape&&(o=o.filter(function(a){return!a.next})),g.splice.apply(g,o),h--,n=null}i.keywordMap&&(i.token=this.createKeywordMapper(i.keywordMap,i.defaultToken||"text",i.caseInsensitive),delete i.defaultToken)}}var d=0,e=this.$rules;Object.keys(e).forEach(c,this)
},this.createKeywordMapper=function(a,b,c,d){var e=Object.create(null);return Object.keys(a).forEach(function(b){var f=a[b];c&&(f=f.toLowerCase());for(var g=f.split(d||"|"),h=g.length;h--;)e[g[h]]=b}),Object.getPrototypeOf(e)&&(e.__proto__=null),this.$keywordList=Object.keys(e),a=null,c?function(a){return e[a.toLowerCase()]||b}:function(a){return e[a]||b}},this.getKeywords=function(){return this.$keywords}}).call(e.prototype),b.TextHighlightRules=e}),ace.define("ace/anchor",["require","exports","module","ace/lib/oop","ace/lib/event_emitter"],function(a,b){var d=a("./lib/oop"),e=a("./lib/event_emitter").EventEmitter,f=b.Anchor=function(a,b,c){this.$onChange=this.onChange.bind(this),this.attach(a),"undefined"==typeof c?this.setPosition(b.row,b.column):this.setPosition(b,c)
};(function(){d.implement(this,e),this.getPosition=function(){return this.$clipPositionToDocument(this.row,this.column)},this.getDocument=function(){return this.document},this.$insertRight=!1,this.onChange=function(a){var b=a.data,c=b.range;if((c.start.row!=c.end.row||c.start.row==this.row)&&!(c.start.row>this.row||c.start.row==this.row&&c.start.column>this.column)){var d=this.row,e=this.column,f=c.start,g=c.end;"insertText"===b.action?f.row===d&&f.column<=e?f.column===e&&this.$insertRight||(f.row===g.row?e+=g.column-f.column:(e-=f.column,d+=g.row-f.row)):f.row!==g.row&&f.row<d&&(d+=g.row-f.row):"insertLines"===b.action?f.row<=d&&(d+=g.row-f.row):"removeText"===b.action?f.row===d&&f.column<e?e=g.column>=e?f.column:Math.max(0,e-(g.column-f.column)):f.row!==g.row&&f.row<d?(g.row===d&&(e=Math.max(0,e-g.column)+f.column),d-=g.row-f.row):g.row===d&&(d-=g.row-f.row,e=Math.max(0,e-g.column)+f.column):"removeLines"==b.action&&f.row<=d&&(g.row<=d?d-=g.row-f.row:(d=f.row,e=0)),this.setPosition(d,e,!0)
}},this.setPosition=function(a,b,c){var d;if(d=c?{row:a,column:b}:this.$clipPositionToDocument(a,b),this.row!=d.row||this.column!=d.column){var e={row:this.row,column:this.column};this.row=d.row,this.column=d.column,this._signal("change",{old:e,value:d})}},this.detach=function(){this.document.removeEventListener("change",this.$onChange)},this.attach=function(a){this.document=a||this.document,this.document.on("change",this.$onChange)},this.$clipPositionToDocument=function(a,b){var c={};return a>=this.document.getLength()?(c.row=Math.max(0,this.document.getLength()-1),c.column=this.document.getLine(c.row).length):0>a?(c.row=0,c.column=0):(c.row=a,c.column=Math.min(this.document.getLine(c.row).length,Math.max(0,b))),0>b&&(c.column=0),c
}}).call(f.prototype)}),ace.define("ace/background_tokenizer",["require","exports","module","ace/lib/oop","ace/lib/event_emitter"],function(a,b){var d=a("./lib/oop"),e=a("./lib/event_emitter").EventEmitter,f=function(a){this.running=!1,this.lines=[],this.states=[],this.currentLine=0,this.tokenizer=a;var c=this;this.$worker=function(){if(c.running){for(var a=new Date,b=c.currentLine,d=-1,e=c.doc;c.lines[b];)b++;var f=b,g=e.getLength(),h=0;for(c.running=!1;g>b;){c.$tokenizeRow(b),d=b;do b++;while(c.lines[b]);if(h++,h%5==0&&new Date-a>20)return c.running=setTimeout(c.$worker,20),c.currentLine=b,void 0
}c.currentLine=b,d>=f&&c.fireUpdateEvent(f,d)}}};(function(){d.implement(this,e),this.setTokenizer=function(a){this.tokenizer=a,this.lines=[],this.states=[],this.start(0)},this.setDocument=function(a){this.doc=a,this.lines=[],this.states=[],this.stop()},this.fireUpdateEvent=function(a,b){var c={first:a,last:b};this._signal("update",{data:c})},this.start=function(a){this.currentLine=Math.min(a||0,this.currentLine,this.doc.getLength()),this.lines.splice(this.currentLine,this.lines.length),this.states.splice(this.currentLine,this.states.length),this.stop(),this.running=setTimeout(this.$worker,700)
},this.scheduleStart=function(){this.running||(this.running=setTimeout(this.$worker,700))},this.$updateOnChange=function(a){var b=a.range,c=b.start.row,d=b.end.row-c;if(0===d)this.lines[c]=null;else if("removeText"==a.action||"removeLines"==a.action)this.lines.splice(c,d+1,null),this.states.splice(c,d+1,null);else{var e=Array(d+1);e.unshift(c,1),this.lines.splice.apply(this.lines,e),this.states.splice.apply(this.states,e)}this.currentLine=Math.min(c,this.currentLine,this.doc.getLength()),this.stop()},this.stop=function(){this.running&&clearTimeout(this.running),this.running=!1
},this.getTokens=function(a){return this.lines[a]||this.$tokenizeRow(a)},this.getState=function(a){return this.currentLine==a&&this.$tokenizeRow(a),this.states[a]||"start"},this.$tokenizeRow=function(a){var b=this.doc.getLine(a),c=this.states[a-1],d=this.tokenizer.getLineTokens(b,c,a);return this.states[a]+""!=d.state+""?(this.states[a]=d.state,this.lines[a+1]=null,this.currentLine>a+1&&(this.currentLine=a+1)):this.currentLine==a&&(this.currentLine=a+1),this.lines[a]=d.tokens}}).call(f.prototype),b.BackgroundTokenizer=f
}),ace.define("ace/search_highlight",["require","exports","module","ace/lib/lang","ace/lib/oop","ace/range"],function(a,b){var d=a("./lib/lang"),f=(a("./lib/oop"),a("./range").Range),g=function(a,b,c){this.setRegexp(a),this.clazz=b,this.type=c||"text"};(function(){this.MAX_RANGES=500,this.setRegexp=function(a){this.regExp+""!=a+""&&(this.regExp=a,this.cache=[])},this.update=function(a,b,c,e){if(this.regExp)for(var g=e.firstRow,h=e.lastRow,i=g;h>=i;i++){var j=this.cache[i];null==j&&(j=d.getMatchOffsets(c.getLine(i),this.regExp),j.length>this.MAX_RANGES&&(j=j.slice(0,this.MAX_RANGES)),j=j.map(function(a){return new f(i,a.offset,i,a.offset+a.length)
}),this.cache[i]=j.length?j:"");for(var k=j.length;k--;)b.drawSingleLineMarker(a,j[k].toScreenRange(c),this.clazz,e)}}}).call(g.prototype),b.SearchHighlight=g}),ace.define("ace/edit_session/folding",["require","exports","module","ace/range","ace/edit_session/fold_line","ace/edit_session/fold","ace/token_iterator"],function(a,b){function d(){this.getFoldAt=function(a,b,c){var d=this.getFoldLine(a);if(!d)return null;for(var e=d.folds,f=0;f<e.length;f++){var g=e[f];if(g.range.contains(a,b)){if(1==c&&g.range.isEnd(a,b))continue;
if(-1==c&&g.range.isStart(a,b))continue;return g}}},this.getFoldsInRange=function(a){var b=a.start,c=a.end,d=this.$foldData,e=[];b.column+=1,c.column-=1;for(var f=0;f<d.length;f++){var g=d[f].range.compareRange(a);if(2!=g){if(-2==g)break;for(var h=d[f].folds,i=0;i<h.length;i++){var j=h[i];if(g=j.range.compareRange(a),-2==g)break;if(2!=g){if(42==g)break;e.push(j)}}}}return b.column-=1,c.column+=1,e},this.getFoldsInRangeList=function(a){if(Array.isArray(a)){var b=[];a.forEach(function(a){b=b.concat(this.getFoldsInRange(a))
},this)}else var b=this.getFoldsInRange(a);return b},this.getAllFolds=function(){for(var a=[],b=this.$foldData,c=0;c<b.length;c++)for(var d=0;d<b[c].folds.length;d++)a.push(b[c].folds[d]);return a},this.getFoldStringAt=function(a,b,c,d){if(d=d||this.getFoldLine(a),!d)return null;for(var f,g,e={end:{column:0}},h=0;h<d.folds.length;h++){g=d.folds[h];var i=g.range.compareEnd(a,b);if(-1==i){f=this.getLine(g.start.row).substring(e.end.column,g.start.column);break}if(0===i)return null;e=g}return f||(f=this.getLine(g.start.row).substring(e.end.column)),-1==c?f.substring(0,b-e.end.column):1==c?f.substring(b-e.end.column):f
},this.getFoldLine=function(a,b){var c=this.$foldData,d=0;for(b&&(d=c.indexOf(b)),-1==d&&(d=0),d;d<c.length;d++){var e=c[d];if(e.start.row<=a&&e.end.row>=a)return e;if(e.end.row>a)return null}return null},this.getNextFoldLine=function(a,b){var c=this.$foldData,d=0;for(b&&(d=c.indexOf(b)),-1==d&&(d=0),d;d<c.length;d++){var e=c[d];if(e.end.row>=a)return e}return null},this.getFoldedRowCount=function(a,b){for(var c=this.$foldData,d=b-a+1,e=0;e<c.length;e++){var f=c[e],g=f.end.row,h=f.start.row;if(g>=b){b>h&&(h>=a?d-=b-h:d=0);
break}g>=a&&(d-=h>=a?g-h:g-a+1)}return d},this.$addFoldLine=function(a){return this.$foldData.push(a),this.$foldData.sort(function(a,b){return a.start.row-b.start.row}),a},this.addFold=function(a,b){var e,c=this.$foldData,d=!1;a instanceof g?e=a:(e=new g(b,a),e.collapseChildren=b.collapseChildren),this.$clipRangeToDocument(e.range);var h=e.start.row,i=e.start.column,j=e.end.row,k=e.end.column;if(j>h||h==j&&k-2>=i){var l=this.getFoldAt(h,i,1),m=this.getFoldAt(j,k,-1);if(l&&m==l)return l.addSubFold(e);if(l&&!l.range.isStart(h,i)||m&&!m.range.isEnd(j,k))throw new Error("A fold can't intersect already existing fold"+e.range+l.range);
var n=this.getFoldsInRange(e.range);n.length>0&&(this.removeFolds(n),n.forEach(function(a){e.addSubFold(a)}));for(var o=0;o<c.length;o++){var p=c[o];if(j==p.start.row){p.addFold(e),d=!0;break}if(h==p.end.row){if(p.addFold(e),d=!0,!e.sameRow){var q=c[o+1];if(q&&q.start.row==j){p.merge(q);break}}break}if(j<=p.start.row)break}return d||(p=this.$addFoldLine(new f(this.$foldData,e))),this.$useWrapMode?this.$updateWrapData(p.start.row,p.start.row):this.$updateRowLengthCache(p.start.row,p.start.row),this.$modified=!0,this._emit("changeFold",{data:e,action:"add"}),e
}throw new Error("The range has to be at least 2 characters width")},this.addFolds=function(a){a.forEach(function(a){this.addFold(a)},this)},this.removeFold=function(a){var b=a.foldLine,c=b.start.row,d=b.end.row,e=this.$foldData,f=b.folds;if(1==f.length)e.splice(e.indexOf(b),1);else if(b.range.isEnd(a.end.row,a.end.column))f.pop(),b.end.row=f[f.length-1].end.row,b.end.column=f[f.length-1].end.column;else if(b.range.isStart(a.start.row,a.start.column))f.shift(),b.start.row=f[0].start.row,b.start.column=f[0].start.column;
else if(a.sameRow)f.splice(f.indexOf(a),1);else{var g=b.split(a.start.row,a.start.column);f=g.folds,f.shift(),g.start.row=f[0].start.row,g.start.column=f[0].start.column}this.$updating||(this.$useWrapMode?this.$updateWrapData(c,d):this.$updateRowLengthCache(c,d)),this.$modified=!0,this._emit("changeFold",{data:a,action:"remove"})},this.removeFolds=function(a){for(var b=[],c=0;c<a.length;c++)b.push(a[c]);b.forEach(function(a){this.removeFold(a)},this),this.$modified=!0},this.expandFold=function(a){this.removeFold(a),a.subFolds.forEach(function(b){a.restoreRange(b),this.addFold(b)
},this),a.collapseChildren>0&&this.foldAll(a.start.row+1,a.end.row,a.collapseChildren-1),a.subFolds=[]},this.expandFolds=function(a){a.forEach(function(a){this.expandFold(a)},this)},this.unfold=function(a,b){var c,d;if(null==a?(c=new e(0,0,this.getLength(),0),b=!0):c="number"==typeof a?new e(a,0,a,this.getLine(a).length):"row"in a?e.fromPoints(a,a):a,d=this.getFoldsInRangeList(c),b)this.removeFolds(d);else for(var f=d;f.length;)this.expandFolds(f),f=this.getFoldsInRangeList(c);return d.length?d:void 0},this.isRowFolded=function(a,b){return!!this.getFoldLine(a,b)
},this.getRowFoldEnd=function(a,b){var c=this.getFoldLine(a,b);return c?c.end.row:a},this.getRowFoldStart=function(a,b){var c=this.getFoldLine(a,b);return c?c.start.row:a},this.getFoldDisplayLine=function(a,b,c,d,e){null==d&&(d=a.start.row,e=0),null==b&&(b=a.end.row,c=this.getLine(b).length);var f=this.doc,g="";return a.walk(function(a,b,c,h){if(!(d>b)){if(b==d){if(e>c)return;h=Math.max(e,h)}g+=null!=a?a:f.getLine(b).substring(h,c)}},b,c),g},this.getDisplayLine=function(a,b,c,d){var e=this.getFoldLine(a);if(!e){var f;
return f=this.doc.getLine(a),f.substring(d||0,b||f.length)}return this.getFoldDisplayLine(e,a,b,c,d)},this.$cloneFoldData=function(){var a=[];return a=this.$foldData.map(function(b){var c=b.folds.map(function(a){return a.clone()});return new f(a,c)})},this.toggleFold=function(a){var d,e,b=this.selection,c=b.getRange();if(c.isEmpty()){var f=c.start;if(d=this.getFoldAt(f.row,f.column))return this.expandFold(d),void 0;(e=this.findMatchingBracket(f))?1==c.comparePoint(e)?c.end=e:(c.start=e,c.start.column++,c.end.column--):(e=this.findMatchingBracket({row:f.row,column:f.column+1}))?(1==c.comparePoint(e)?c.end=e:c.start=e,c.start.column++):c=this.getCommentFoldRange(f.row,f.column)||c
}else{var g=this.getFoldsInRange(c);if(a&&g.length)return this.expandFolds(g),void 0;1==g.length&&(d=g[0])}if(d||(d=this.getFoldAt(c.start.row,c.start.column)),d&&d.range.toString()==c.toString())return this.expandFold(d),void 0;var h="...";if(!c.isMultiLine()){if(h=this.getTextRange(c),h.length<4)return;h=h.trim().substring(0,2)+".."}this.addFold(h,c)},this.getCommentFoldRange=function(a,b,c){var d=new h(this,a,b),f=d.getCurrentToken();if(f&&/^comment|string/.test(f.type)){var g=new e,i=new RegExp(f.type.replace(/\..*/,"\\."));
if(1!=c){do f=d.stepBackward();while(f&&i.test(f.type));d.stepForward()}if(g.start.row=d.getCurrentTokenRow(),g.start.column=d.getCurrentTokenColumn()+2,d=new h(this,a,b),-1!=c){do f=d.stepForward();while(f&&i.test(f.type));f=d.stepBackward()}else f=d.getCurrentToken();return g.end.row=d.getCurrentTokenRow(),g.end.column=d.getCurrentTokenColumn()+f.value.length-2,g}},this.foldAll=function(a,b,c){void 0==c&&(c=1e5);var d=this.foldWidgets;if(d){b=b||this.getLength(),a=a||0;for(var e=a;b>e;e++)if(null==d[e]&&(d[e]=this.getFoldWidget(e)),"start"==d[e]){var f=this.getFoldWidgetRange(e);
if(f&&f.isMultiLine()&&f.end.row<=b&&f.start.row>=a){e=f.end.row;try{var g=this.addFold("...",f);g&&(g.collapseChildren=c)}catch(h){}}}}},this.$foldStyles={manual:1,markbegin:1,markbeginend:1},this.$foldStyle="markbegin",this.setFoldStyle=function(a){if(!this.$foldStyles[a])throw new Error("invalid fold style: "+a+"["+Object.keys(this.$foldStyles).join(", ")+"]");if(this.$foldStyle!=a){this.$foldStyle=a,"manual"==a&&this.unfold();var b=this.$foldMode;this.$setFolding(null),this.$setFolding(b)}},this.$setFolding=function(a){return this.$foldMode!=a?(this.$foldMode=a,this.removeListener("change",this.$updateFoldWidgets),this._emit("changeAnnotation"),a&&"manual"!=this.$foldStyle?(this.foldWidgets=[],this.getFoldWidget=a.getFoldWidget.bind(a,this,this.$foldStyle),this.getFoldWidgetRange=a.getFoldWidgetRange.bind(a,this,this.$foldStyle),this.$updateFoldWidgets=this.updateFoldWidgets.bind(this),this.on("change",this.$updateFoldWidgets),void 0):(this.foldWidgets=null,void 0)):void 0
},this.getParentFoldRangeData=function(a,b){var c=this.foldWidgets;if(!c||b&&c[a])return{};for(var e,d=a-1;d>=0;){var f=c[d];if(null==f&&(f=c[d]=this.getFoldWidget(d)),"start"==f){var g=this.getFoldWidgetRange(d);if(e||(e=g),g&&g.end.row>=a)break}d--}return{range:-1!==d&&g,firstRange:e}},this.onFoldWidgetClick=function(a,b){b=b.domEvent;var c={children:b.shiftKey,all:b.ctrlKey||b.metaKey,siblings:b.altKey},d=this.$toggleFoldWidget(a,c);if(!d){var e=b.target||b.srcElement;e&&/ace_fold-widget/.test(e.className)&&(e.className+=" ace_invalid")
}},this.$toggleFoldWidget=function(a,b){if(this.getFoldWidget){var c=this.getFoldWidget(a),d=this.getLine(a),e="end"===c?-1:1,f=this.getFoldAt(a,-1===e?0:d.length,e);if(f)return b.children||b.all?this.removeFold(f):this.expandFold(f),void 0;var g=this.getFoldWidgetRange(a,!0);if(g&&!g.isMultiLine()&&(f=this.getFoldAt(g.start.row,g.start.column,1),f&&g.isEqual(f.range)))return this.removeFold(f),void 0;if(b.siblings){var h=this.getParentFoldRangeData(a);if(h.range)var i=h.range.start.row+1,j=h.range.end.row;this.foldAll(i,j,b.all?1e4:0)
}else b.children?(j=g?g.end.row:this.getLength(),this.foldAll(a+1,g.end.row,b.all?1e4:0)):g&&(b.all&&(g.collapseChildren=1e4),this.addFold("...",g));return g}},this.toggleFoldWidget=function(){var b=this.selection.getCursor().row;b=this.getRowFoldStart(b);var c=this.$toggleFoldWidget(b,{});if(!c){var d=this.getParentFoldRangeData(b,!0);if(c=d.range||d.firstRange){b=c.start.row;var e=this.getFoldAt(b,this.getLine(b).length,1);e?this.removeFold(e):this.addFold("...",c)}}},this.updateFoldWidgets=function(a){var b=a.data,c=b.range,d=c.start.row,e=c.end.row-d;
if(0===e)this.foldWidgets[d]=null;else if("removeText"==b.action||"removeLines"==b.action)this.foldWidgets.splice(d,e+1,null);else{var f=Array(e+1);f.unshift(d,1),this.foldWidgets.splice.apply(this.foldWidgets,f)}}}var e=a("../range").Range,f=a("./fold_line").FoldLine,g=a("./fold").Fold,h=a("../token_iterator").TokenIterator;b.Folding=d}),ace.define("ace/edit_session/fold_line",["require","exports","module","ace/range"],function(a,b){function d(a,b){this.foldData=a,Array.isArray(b)?this.folds=b:b=this.folds=[b];
var c=b[b.length-1];this.range=new e(b[0].start.row,b[0].start.column,c.end.row,c.end.column),this.start=this.range.start,this.end=this.range.end,this.folds.forEach(function(a){a.setFoldLine(this)},this)}var e=a("../range").Range;(function(){this.shiftRow=function(a){this.start.row+=a,this.end.row+=a,this.folds.forEach(function(b){b.start.row+=a,b.end.row+=a})},this.addFold=function(a){if(a.sameRow){if(a.start.row<this.startRow||a.endRow>this.endRow)throw new Error("Can't add a fold to this FoldLine as it has no connection");
this.folds.push(a),this.folds.sort(function(a,b){return-a.range.compareEnd(b.start.row,b.start.column)}),this.range.compareEnd(a.start.row,a.start.column)>0?(this.end.row=a.end.row,this.end.column=a.end.column):this.range.compareStart(a.end.row,a.end.column)<0&&(this.start.row=a.start.row,this.start.column=a.start.column)}else if(a.start.row==this.end.row)this.folds.push(a),this.end.row=a.end.row,this.end.column=a.end.column;else{if(a.end.row!=this.start.row)throw new Error("Trying to add fold to FoldRow that doesn't have a matching row");
this.folds.unshift(a),this.start.row=a.start.row,this.start.column=a.start.column}a.foldLine=this},this.containsRow=function(a){return a>=this.start.row&&a<=this.end.row},this.walk=function(a,b,c){var f,g,h,d=0,e=this.folds,i=!0;null==b&&(b=this.end.row,c=this.end.column);for(var j=0;j<e.length;j++){if(f=e[j],g=f.range.compareStart(b,c),-1==g)return a(null,b,c,d,i),void 0;if(h=a(null,f.start.row,f.start.column,d,i),h=!h&&a(f.placeholder,f.start.row,f.start.column,d),h||0==g)return;i=!f.sameRow,d=f.end.column
}a(null,b,c,d,i)},this.getNextFoldTo=function(a,b){for(var c,d,e=0;e<this.folds.length;e++){if(c=this.folds[e],d=c.range.compareEnd(a,b),-1==d)return{fold:c,kind:"after"};if(0==d)return{fold:c,kind:"inside"}}return null},this.addRemoveChars=function(a,b,c){var e,f,d=this.getNextFoldTo(a,b);if(d)if(e=d.fold,"inside"==d.kind&&e.start.column!=b&&e.start.row!=a)window.console&&window.console.log(a,b,e);else if(e.start.row==a){f=this.folds;var g=f.indexOf(e);for(0==g&&(this.start.column+=c),g;g<f.length;g++){if(e=f[g],e.start.column+=c,!e.sameRow)return;
e.end.column+=c}this.end.column+=c}},this.split=function(a,b){var c=this.getNextFoldTo(a,b).fold,e=this.folds,f=this.foldData;if(!c)return null;var g=e.indexOf(c),h=e[g-1];this.end.row=h.end.row,this.end.column=h.end.column,e=e.splice(g,e.length-g);var i=new d(f,e);return f.splice(f.indexOf(this)+1,0,i),i},this.merge=function(a){for(var b=a.folds,c=0;c<b.length;c++)this.addFold(b[c]);var d=this.foldData;d.splice(d.indexOf(a),1)},this.toString=function(){var a=[this.range.toString()+": ["];return this.folds.forEach(function(b){a.push("  "+b.toString())
}),a.push("]"),a.join("\n")},this.idxToPosition=function(a){for(var c,b=0,d=0;d<this.folds.length;d++){var c=this.folds[d];if(a-=c.start.column-b,0>a)return{row:c.start.row,column:c.start.column+a};if(a-=c.placeholder.length,0>a)return c.start;b=c.end.column}return{row:this.end.row,column:this.end.column+a}}}).call(d.prototype),b.FoldLine=d}),ace.define("ace/tokenizer",["require","exports","module"],function(a,b){var d=1e3,e=function(a){this.states=a,this.regExps={},this.matchMappings={};for(var b in this.states){for(var c=this.states[b],d=[],e=0,f=this.matchMappings[b]={defaultToken:"text"},g="g",h=[],i=0;i<c.length;i++){var j=c[i];
if(j.defaultToken&&(f.defaultToken=j.defaultToken),j.caseInsensitive&&(g="gi"),null!=j.regex){j.regex instanceof RegExp&&(j.regex=j.regex.toString().slice(1,-1));var k=j.regex,l=new RegExp("(?:("+k+")|(.))").exec("a").length-2;if(Array.isArray(j.token))if(1==j.token.length||1==l)j.token=j.token[0];else{if(l-1!=j.token.length)throw new Error("number of classes and regexp groups in '"+j.token+"'\n'"+j.regex+"' doesn't match\n"+(l-1)+"!="+j.token.length);j.tokenArray=j.token,j.token=null,j.onMatch=this.$arrayTokens
}else"function"==typeof j.token&&!j.onMatch&&(j.onMatch=l>1?this.$applyToken:j.token);l>1&&(/\\\d/.test(j.regex)?k=j.regex.replace(/\\([0-9]+)/g,function(a,b){return"\\"+(parseInt(b,10)+e+1)}):(l=1,k=this.removeCapturingGroups(j.regex)),!j.splitRegex&&"string"!=typeof j.token&&h.push(j)),f[e]=i,e+=l,d.push(k),j.onMatch||(j.onMatch=null),j.__proto__=null}}h.forEach(function(a){a.splitRegex=this.createSplitterRegexp(a.regex,g)},this),this.regExps[b]=new RegExp("("+d.join(")|(")+")|($)",g)}};(function(){this.$setMaxTokenCount=function(a){d=0|a
},this.$applyToken=function(a){var b=this.splitRegex.exec(a).slice(1),c=this.token.apply(this,b);if("string"==typeof c)return[{type:c,value:a}];for(var d=[],e=0,f=c.length;f>e;e++)b[e]&&(d[d.length]={type:c[e],value:b[e]});return d},this.$arrayTokens=function(a){if(!a)return[];var b=this.splitRegex.exec(a);if(!b)return"text";for(var c=[],d=this.tokenArray,e=0,f=d.length;f>e;e++)b[e+1]&&(c[c.length]={type:d[e],value:b[e+1]});return c},this.removeCapturingGroups=function(a){var b=a.replace(/\[(?:\\.|[^\]])*?\]|\\.|\(\?[:=!]|(\()/g,function(a,b){return b?"(?:":a
});return b},this.createSplitterRegexp=function(a,b){if(-1!=a.indexOf("(?=")){var c=0,d=!1,e={};a.replace(/(\\.)|(\((?:\?[=!])?)|(\))|([\[\]])/g,function(a,b,f,g,h,i){return d?d="]"!=h:h?d=!0:g?(c==e.stack&&(e.end=i+1,e.stack=-1),c--):f&&(c++,1!=f.length&&(e.stack=c,e.start=i)),a}),null!=e.end&&/^\)*$/.test(a.substr(e.end))&&(a=a.substring(0,e.start)+a.substr(e.end))}return new RegExp(a,(b||"").replace("g",""))},this.getLineTokens=function(a,b){if(b&&"string"!=typeof b){var c=b.slice(0);b=c[0]}else var c=[];
var e=b||"start",f=this.states[e];f||(e="start",f=this.states[e]);var g=this.matchMappings[e],h=this.regExps[e];h.lastIndex=0;for(var i,j=[],k=0,l={type:null,value:""};i=h.exec(a);){var m=g.defaultToken,n=null,o=i[0],p=h.lastIndex;if(p-o.length>k){var q=a.substring(k,p-o.length);l.type==m?l.value+=q:(l.type&&j.push(l),l={type:m,value:q})}for(var r=0;r<i.length-2;r++)if(void 0!==i[r+1]){n=f[g[r]],m=n.onMatch?n.onMatch(o,e,c):n.token,n.next&&(e="string"==typeof n.next?n.next:n.next(e,c),f=this.states[e],f||(window.console&&console.error&&console.error(e,"doesn't exist"),e="start",f=this.states[e]),g=this.matchMappings[e],k=p,h=this.regExps[e],h.lastIndex=p);
break}if(o)if("string"==typeof m)n&&n.merge===!1||l.type!==m?(l.type&&j.push(l),l={type:m,value:o}):l.value+=o;else if(m){l.type&&j.push(l),l={type:null,value:""};for(var r=0;r<m.length;r++)j.push(m[r])}if(k==a.length)break;if(k=p,j.length>d){for(;k<a.length;)l.type&&j.push(l),l={value:a.substring(k,k+=2e3),type:"overflow"};e="start",c=[];break}}return l.type&&j.push(l),c.length>1&&c[0]!==e&&c.unshift(e),{tokens:j,state:c.length?c:e}}}).call(e.prototype),b.Tokenizer=e}),ace.define("ace/edit_session/fold",["require","exports","module","ace/range","ace/range_list","ace/lib/oop"],function(a,b){function d(a,b){a.row-=b.row,0==a.row&&(a.column-=b.column)
}function e(a,b){d(a.start,b),d(a.end,b)}function f(a,b){0==a.row&&(a.column+=b.column),a.row+=b.row}function g(a,b){f(a.start,b),f(a.end,b)}var i=(a("../range").Range,a("../range_list").RangeList),j=a("../lib/oop"),k=b.Fold=function(a,b){this.foldLine=null,this.placeholder=b,this.range=a,this.start=a.start,this.end=a.end,this.sameRow=a.start.row==a.end.row,this.subFolds=this.ranges=[]};j.inherits(k,i),function(){this.toString=function(){return'"'+this.placeholder+'" '+this.range.toString()},this.setFoldLine=function(a){this.foldLine=a,this.subFolds.forEach(function(b){b.setFoldLine(a)
})},this.clone=function(){var a=this.range.clone(),b=new k(a,this.placeholder);return this.subFolds.forEach(function(a){b.subFolds.push(a.clone())}),b.collapseChildren=this.collapseChildren,b},this.addSubFold=function(a){if(!this.range.isEqual(a)){if(!this.range.containsRange(a))throw new Error("A fold can't intersect already existing fold"+a.range+this.range);e(a,this.start);for(var b=a.start.row,c=a.start.column,d=0,f=-1;d<this.subFolds.length&&(f=this.subFolds[d].range.compare(b,c),1==f);d++);var g=this.subFolds[d];
if(0==f)return g.addSubFold(a);for(var b=a.range.end.row,c=a.range.end.column,h=d,f=-1;h<this.subFolds.length&&(f=this.subFolds[h].range.compare(b,c),1==f);h++);{this.subFolds[h]}if(0==f)throw new Error("A fold can't intersect already existing fold"+a.range+this.range);{this.subFolds.splice(d,h-d,a)}return a.setFoldLine(this.foldLine),a}},this.restoreRange=function(a){return g(a,this.start)}}.call(k.prototype)}),ace.define("ace/mode/text",["require","exports","module","ace/tokenizer","ace/mode/text_highlight_rules","ace/mode/behaviour","ace/unicode","ace/lib/lang","ace/token_iterator","ace/range"],function(a,b){var d=a("../tokenizer").Tokenizer,e=a("./text_highlight_rules").TextHighlightRules,f=a("./behaviour").Behaviour,g=a("../unicode"),h=a("../lib/lang"),i=a("../token_iterator").TokenIterator,j=a("../range").Range,k=function(){this.HighlightRules=e,this.$behaviour=new f
};(function(){this.tokenRe=new RegExp("^["+g.packages.L+g.packages.Mn+g.packages.Mc+g.packages.Nd+g.packages.Pc+"\\$_]+","g"),this.nonTokenRe=new RegExp("^(?:[^"+g.packages.L+g.packages.Mn+g.packages.Mc+g.packages.Nd+g.packages.Pc+"\\$_]|\\s])+","g"),this.getTokenizer=function(){return this.$tokenizer||(this.$highlightRules=new this.HighlightRules,this.$tokenizer=new d(this.$highlightRules.getRules())),this.$tokenizer},this.lineCommentStart="",this.blockComment="",this.toggleCommentLines=function(a,b,c,d){function e(a){for(var b=c;d>=b;b++)a(f.getLine(b),b)
}var f=b.doc,g=!0,i=!0,j=1/0,k=b.getTabSize(),l=!1;if(this.lineCommentStart){if(Array.isArray(this.lineCommentStart))var o=this.lineCommentStart.map(h.escapeRegExp).join("|"),m=this.lineCommentStart[0];else var o=h.escapeRegExp(this.lineCommentStart),m=this.lineCommentStart;o=new RegExp("^(\\s*)(?:"+o+") ?"),l=b.getUseSoftTabs();var r=function(a,b){var c=a.match(o);if(c){var d=c[1].length,e=c[0].length;!u(a,d,e)&&" "==c[0][e-1]&&e--,f.removeInLine(b,d,e)}},t=m+" ",q=function(a,b){(!g||/\S/.test(a))&&(u(a,j,j)?f.insertInLine({row:b,column:j},t):f.insertInLine({row:b,column:j},m))
},s=function(a){return o.test(a)},u=function(a,b,c){for(var d=0;b--&&" "==a.charAt(b);)d++;if(d%k!=0)return!1;for(var d=0;" "==a.charAt(c++);)d++;return k>2?d%k!=k-1:d%k==0}}else{if(!this.blockComment)return!1;var m=this.blockComment.start,n=this.blockComment.end,o=new RegExp("^(\\s*)(?:"+h.escapeRegExp(m)+")"),p=new RegExp("(?:"+h.escapeRegExp(n)+")\\s*$"),q=function(a,b){s(a,b)||(!g||/\S/.test(a))&&(f.insertInLine({row:b,column:a.length},n),f.insertInLine({row:b,column:j},m))},r=function(a,b){var c;(c=a.match(p))&&f.removeInLine(b,a.length-c[0].length,a.length),(c=a.match(o))&&f.removeInLine(b,c[1].length,c[0].length)
},s=function(a,c){if(o.test(a))return!0;for(var d=b.getTokens(c),e=0;e<d.length;e++)if("comment"===d[e].type)return!0}}var v=1/0;e(function(a,b){var c=a.search(/\S/);-1!==c?(j>c&&(j=c),i&&!s(a,b)&&(i=!1)):v>a.length&&(v=a.length)}),1/0==j&&(j=v,g=!1,i=!1),l&&j%k!=0&&(j=Math.floor(j/k)*k),e(i?r:q)},this.toggleBlockComment=function(a,b,c,d){var e=this.blockComment;if(e){!e.start&&e[0]&&(e=e[0]);var l,m,f=new i(b,d.row,d.column),g=f.getCurrentToken(),k=(b.selection,b.selection.toOrientedRange());if(g&&/comment/.test(g.type)){for(var n,o;g&&/comment/.test(g.type);){var p=g.value.indexOf(e.start);
if(-1!=p){var q=f.getCurrentTokenRow(),r=f.getCurrentTokenColumn()+p;n=new j(q,r,q,r+e.start.length);break}g=f.stepBackward()}for(var f=new i(b,d.row,d.column),g=f.getCurrentToken();g&&/comment/.test(g.type);){var p=g.value.indexOf(e.end);if(-1!=p){var q=f.getCurrentTokenRow(),r=f.getCurrentTokenColumn()+p;o=new j(q,r,q,r+e.end.length);break}g=f.stepForward()}o&&b.remove(o),n&&(b.remove(n),l=n.start.row,m=-e.start.length)}else m=e.start.length,l=c.start.row,b.insert(c.end,e.end),b.insert(c.start,e.start);k.start.row==l&&(k.start.column+=m),k.end.row==l&&(k.end.column+=m),b.selection.fromOrientedRange(k)
}},this.getNextLineIndent=function(a,b){return this.$getIndent(b)},this.checkOutdent=function(){return!1},this.autoOutdent=function(){},this.$getIndent=function(a){return a.match(/^\s*/)[0]},this.createWorker=function(){return null},this.createModeDelegates=function(a){this.$embeds=[],this.$modes={};for(var b in a)a[b]&&(this.$embeds.push(b),this.$modes[b]=new a[b]);for(var c=["toggleBlockComment","toggleCommentLines","getNextLineIndent","checkOutdent","autoOutdent","transformAction","getCompletions"],b=0;b<c.length;b++)(function(a){var d=c[b],e=a[d];
a[c[b]]=function(){return this.$delegator(d,arguments,e)}})(this)},this.$delegator=function(a,b,c){var d=b[0];"string"!=typeof d&&(d=d[0]);for(var e=0;e<this.$embeds.length;e++)if(this.$modes[this.$embeds[e]]){var f=d.split(this.$embeds[e]);if(!f[0]&&f[1]){b[0]=f[1];var g=this.$modes[this.$embeds[e]];return g[a].apply(g,b)}}var h=c.apply(this,b);return c?h:void 0},this.transformAction=function(a,b){if(this.$behaviour){var f=this.$behaviour.getBehaviours();for(var g in f)if(f[g][b]){var h=f[g][b].apply(this,arguments);
if(h)return h}}},this.getKeywords=function(a){if(!this.completionKeywords){var b=this.$tokenizer.rules,c=[];for(var d in b)for(var e=b[d],f=0,g=e.length;g>f;f++)if("string"==typeof e[f].token)/keyword|support|storage/.test(e[f].token)&&c.push(e[f].regex);else if("object"==typeof e[f].token)for(var h=0,i=e[f].token.length;i>h;h++)if(/keyword|support|storage/.test(e[f].token[h])){var d=e[f].regex.match(/\(.+?\)/g)[h];c.push(d.substr(1,d.length-2))}this.completionKeywords=c}return a?c.concat(this.$keywordList||[]):this.$keywordList
},this.$createKeywordList=function(){return this.$highlightRules||this.getTokenizer(),this.$keywordList=this.$highlightRules.$keywordList||[]},this.getCompletions=function(){var e=this.$keywordList||this.$createKeywordList();return e.map(function(a){return{name:a,value:a,score:0,meta:"keyword"}})},this.$id="ace/mode/text"}).call(k.prototype),b.Mode=k}),ace.define("ace/range_list",["require","exports","module","ace/range"],function(a,b){var d=a("./range").Range,e=d.comparePoints,f=function(){this.ranges=[]};(function(){this.comparePoints=e,this.pointIndex=function(a,b,c){for(var d=this.ranges,f=c||0;f<d.length;f++){var g=d[f],h=e(a,g.end);
if(!(h>0)){var i=e(a,g.start);return 0===h?b&&0!==i?-f-2:f:i>0||0===i&&!b?f:-f-1}}return-f-1},this.add=function(a){var b=!a.isEmpty(),c=this.pointIndex(a.start,b);0>c&&(c=-c-1);var d=this.pointIndex(a.end,b,c);return 0>d?d=-d-1:d++,this.ranges.splice(c,d-c,a)},this.addList=function(a){for(var b=[],c=a.length;c--;)b.push.call(b,this.add(a[c]));return b},this.substractPoint=function(a){var b=this.pointIndex(a);return b>=0?this.ranges.splice(b,1):void 0},this.merge=function(){var a=[],b=this.ranges;b=b.sort(function(a,b){return e(a.start,b.start)
});for(var d,c=b[0],f=1;f<b.length;f++){d=c,c=b[f];var g=e(d.end,c.start);0>g||(0!=g||d.isEmpty()||c.isEmpty())&&(e(d.end,c.end)<0&&(d.end.row=c.end.row,d.end.column=c.end.column),b.splice(f,1),a.push(c),c=d,f--)}return this.ranges=b,a},this.contains=function(a,b){return this.pointIndex({row:a,column:b})>=0},this.containsPoint=function(a){return this.pointIndex(a)>=0},this.rangeAtPoint=function(a){var b=this.pointIndex(a);return b>=0?this.ranges[b]:void 0},this.clipRows=function(a,b){var c=this.ranges;if(c[0].start.row>b||c[c.length-1].start.row<a)return[];
var d=this.pointIndex({row:a,column:0});0>d&&(d=-d-1);var e=this.pointIndex({row:b,column:0},d);0>e&&(e=-e-1);for(var f=[],g=d;e>g;g++)f.push(c[g]);return f},this.removeAll=function(){return this.ranges.splice(0,this.ranges.length)},this.attach=function(a){this.session&&this.detach(),this.session=a,this.onChange=this.$onChange.bind(this),this.session.on("change",this.onChange)},this.detach=function(){this.session&&(this.session.removeListener("change",this.onChange),this.session=null)},this.$onChange=function(a){var b=a.data.range;
if("i"==a.data.action[0])var c=b.start,d=b.end;else var d=b.start,c=b.end;for(var e=c.row,f=d.row,g=f-e,h=-c.column+d.column,i=this.ranges,j=0,k=i.length;k>j;j++){var l=i[j];if(!(l.end.row<e)){if(l.start.row>e)break;if(l.start.row==e&&l.start.column>=c.column&&(l.start.column!=c.column||!this.$insertRight)&&(l.start.column+=h,l.start.row+=g),l.end.row==e&&l.end.column>=c.column){if(l.end.column==c.column&&this.$insertRight)continue;l.end.column==c.column&&h>0&&k-1>j&&l.end.column>l.start.column&&l.end.column==i[j+1].start.column&&(l.end.column-=h),l.end.column+=h,l.end.row+=g
}}}if(0!=g&&k>j)for(;k>j;j++){var l=i[j];l.start.row+=g,l.end.row+=g}}}).call(f.prototype),b.RangeList=f}),ace.define("ace/range",["require","exports","module"],function(a,b){var d=function(a,b){return a.row-b.row||a.column-b.column},e=function(a,b,c,d){this.start={row:a,column:b},this.end={row:c,column:d}};(function(){this.isEqual=function(a){return this.start.row===a.start.row&&this.end.row===a.end.row&&this.start.column===a.start.column&&this.end.column===a.end.column},this.toString=function(){return"Range: ["+this.start.row+"/"+this.start.column+"] -> ["+this.end.row+"/"+this.end.column+"]"
},this.contains=function(a,b){return 0==this.compare(a,b)},this.compareRange=function(a){var b,c=a.end,d=a.start;return b=this.compare(c.row,c.column),1==b?(b=this.compare(d.row,d.column),1==b?2:0==b?1:0):-1==b?-2:(b=this.compare(d.row,d.column),-1==b?-1:1==b?42:0)},this.comparePoint=function(a){return this.compare(a.row,a.column)},this.containsRange=function(a){return 0==this.comparePoint(a.start)&&0==this.comparePoint(a.end)},this.intersects=function(a){var b=this.compareRange(a);return-1==b||0==b||1==b},this.isEnd=function(a,b){return this.end.row==a&&this.end.column==b
},this.isStart=function(a,b){return this.start.row==a&&this.start.column==b},this.setStart=function(a,b){"object"==typeof a?(this.start.column=a.column,this.start.row=a.row):(this.start.row=a,this.start.column=b)},this.setEnd=function(a,b){"object"==typeof a?(this.end.column=a.column,this.end.row=a.row):(this.end.row=a,this.end.column=b)},this.inside=function(a,b){return 0==this.compare(a,b)?this.isEnd(a,b)||this.isStart(a,b)?!1:!0:!1},this.insideStart=function(a,b){return 0==this.compare(a,b)?this.isEnd(a,b)?!1:!0:!1
},this.insideEnd=function(a,b){return 0==this.compare(a,b)?this.isStart(a,b)?!1:!0:!1},this.compare=function(a,b){return this.isMultiLine()||a!==this.start.row?a<this.start.row?-1:a>this.end.row?1:this.start.row===a?b>=this.start.column?0:-1:this.end.row===a?b<=this.end.column?0:1:0:b<this.start.column?-1:b>this.end.column?1:0},this.compareStart=function(a,b){return this.start.row==a&&this.start.column==b?-1:this.compare(a,b)},this.compareEnd=function(a,b){return this.end.row==a&&this.end.column==b?1:this.compare(a,b)
},this.compareInside=function(a,b){return this.end.row==a&&this.end.column==b?1:this.start.row==a&&this.start.column==b?-1:this.compare(a,b)},this.clipRows=function(a,b){if(this.end.row>b)var c={row:b+1,column:0};else if(this.end.row<a)var c={row:a,column:0};if(this.start.row>b)var d={row:b+1,column:0};else if(this.start.row<a)var d={row:a,column:0};return e.fromPoints(d||this.start,c||this.end)},this.extend=function(a,b){var c=this.compare(a,b);if(0==c)return this;if(-1==c)var d={row:a,column:b};else var f={row:a,column:b};
return e.fromPoints(d||this.start,f||this.end)},this.isEmpty=function(){return this.start.row===this.end.row&&this.start.column===this.end.column},this.isMultiLine=function(){return this.start.row!==this.end.row},this.clone=function(){return e.fromPoints(this.start,this.end)},this.collapseRows=function(){return 0==this.end.column?new e(this.start.row,0,Math.max(this.start.row,this.end.row-1),0):new e(this.start.row,0,this.end.row,0)},this.toScreenRange=function(a){var b=a.documentToScreenPosition(this.start),c=a.documentToScreenPosition(this.end);
return new e(b.row,b.column,c.row,c.column)},this.moveBy=function(a,b){this.start.row+=a,this.start.column+=b,this.end.row+=a,this.end.column+=b}}).call(e.prototype),e.fromPoints=function(a,b){return new e(a.row,a.column,b.row,b.column)},e.comparePoints=d,e.comparePoints=function(a,b){return a.row-b.row||a.column-b.column},b.Range=e}),ace.define("ace/edit_session/bracket_match",["require","exports","module","ace/token_iterator","ace/range"],function(a,b){function d(){this.findMatchingBracket=function(a,b){if(0==a.column)return null;
var c=b||this.getLine(a.row).charAt(a.column-1);if(""==c)return null;var d=c.match(/([\(\[\{])|([\)\]\}])/);return d?d[1]?this.$findClosingBracket(d[1],a):this.$findOpeningBracket(d[2],a):null},this.getBracketRange=function(a){var d,b=this.getLine(a.row),c=!0,e=b.charAt(a.column-1),g=e&&e.match(/([\(\[\{])|([\)\]\}])/);if(g||(e=b.charAt(a.column),a={row:a.row,column:a.column+1},g=e&&e.match(/([\(\[\{])|([\)\]\}])/),c=!1),!g)return null;if(g[1]){var h=this.$findClosingBracket(g[1],a);if(!h)return null;d=f.fromPoints(a,h),c||(d.end.column++,d.start.column--),d.cursor=d.end
}else{var h=this.$findOpeningBracket(g[2],a);if(!h)return null;d=f.fromPoints(h,a),c||(d.start.column++,d.end.column--),d.cursor=d.start}return d},this.$brackets={")":"(","(":")","]":"[","[":"]","{":"}","}":"{"},this.$findOpeningBracket=function(a,b,c){var d=this.$brackets[a],f=1,g=new e(this,b.row,b.column),h=g.getCurrentToken();if(h||(h=g.stepForward()),h){c||(c=new RegExp("(\\.?"+h.type.replace(".","\\.").replace("rparen",".paren")+")+"));for(var i=b.column-g.getCurrentTokenColumn()-2,j=h.value;;){for(;i>=0;){var k=j.charAt(i);
if(k==d){if(f-=1,0==f)return{row:g.getCurrentTokenRow(),column:i+g.getCurrentTokenColumn()}}else k==a&&(f+=1);i-=1}do h=g.stepBackward();while(h&&!c.test(h.type));if(null==h)break;j=h.value,i=j.length-1}return null}},this.$findClosingBracket=function(a,b,c){var d=this.$brackets[a],f=1,g=new e(this,b.row,b.column),h=g.getCurrentToken();if(h||(h=g.stepForward()),h){c||(c=new RegExp("(\\.?"+h.type.replace(".","\\.").replace("lparen",".paren")+")+"));for(var i=b.column-g.getCurrentTokenColumn();;){for(var j=h.value,k=j.length;k>i;){var l=j.charAt(i);
if(l==d){if(f-=1,0==f)return{row:g.getCurrentTokenRow(),column:i+g.getCurrentTokenColumn()}}else l==a&&(f+=1);i+=1}do h=g.stepForward();while(h&&!c.test(h.type));if(null==h)break;i=0}return null}}}var e=a("../token_iterator").TokenIterator,f=a("../range").Range;b.BracketMatch=d}),ace.define("ace/selection",["require","exports","module","ace/lib/oop","ace/lib/lang","ace/lib/event_emitter","ace/range"],function(a,b){var d=a("./lib/oop"),e=a("./lib/lang"),f=a("./lib/event_emitter").EventEmitter,g=a("./range").Range,h=function(a){this.session=a,this.doc=a.getDocument(),this.clearSelection(),this.lead=this.selectionLead=this.doc.createAnchor(0,0),this.anchor=this.selectionAnchor=this.doc.createAnchor(0,0);
var b=this;this.lead.on("change",function(a){b._emit("changeCursor"),b.$isEmpty||b._emit("changeSelection"),!b.$keepDesiredColumnOnChange&&a.old.column!=a.value.column&&(b.$desiredColumn=null)}),this.selectionAnchor.on("change",function(){b.$isEmpty||b._emit("changeSelection")})};(function(){d.implement(this,f),this.isEmpty=function(){return this.$isEmpty||this.anchor.row==this.lead.row&&this.anchor.column==this.lead.column},this.isMultiLine=function(){return this.isEmpty()?!1:this.getRange().isMultiLine()},this.getCursor=function(){return this.lead.getPosition()
},this.setSelectionAnchor=function(a,b){this.anchor.setPosition(a,b),this.$isEmpty&&(this.$isEmpty=!1,this._emit("changeSelection"))},this.getSelectionAnchor=function(){return this.$isEmpty?this.getSelectionLead():this.anchor.getPosition()},this.getSelectionLead=function(){return this.lead.getPosition()},this.shiftSelection=function(a){if(this.$isEmpty)return this.moveCursorTo(this.lead.row,this.lead.column+a),void 0;var b=this.getSelectionAnchor(),c=this.getSelectionLead(),d=this.isBackwards();(!d||0!==b.column)&&this.setSelectionAnchor(b.row,b.column+a),(d||0!==c.column)&&this.$moveSelection(function(){this.moveCursorTo(c.row,c.column+a)
})},this.isBackwards=function(){var a=this.anchor,b=this.lead;return a.row>b.row||a.row==b.row&&a.column>b.column},this.getRange=function(){var a=this.anchor,b=this.lead;return this.isEmpty()?g.fromPoints(b,b):this.isBackwards()?g.fromPoints(b,a):g.fromPoints(a,b)},this.clearSelection=function(){this.$isEmpty||(this.$isEmpty=!0,this._emit("changeSelection"))},this.selectAll=function(){var a=this.doc.getLength()-1;this.setSelectionAnchor(0,0),this.moveCursorTo(a,this.doc.getLine(a).length)},this.setRange=this.setSelectionRange=function(a,b){b?(this.setSelectionAnchor(a.end.row,a.end.column),this.selectTo(a.start.row,a.start.column)):(this.setSelectionAnchor(a.start.row,a.start.column),this.selectTo(a.end.row,a.end.column)),this.getRange().isEmpty()&&(this.$isEmpty=!0),this.$desiredColumn=null
},this.$moveSelection=function(a){var b=this.lead;this.$isEmpty&&this.setSelectionAnchor(b.row,b.column),a.call(this)},this.selectTo=function(a,b){this.$moveSelection(function(){this.moveCursorTo(a,b)})},this.selectToPosition=function(a){this.$moveSelection(function(){this.moveCursorToPosition(a)})},this.moveTo=function(a,b){this.clearSelection(),this.moveCursorTo(a,b)},this.moveToPosition=function(a){this.clearSelection(),this.moveCursorToPosition(a)},this.selectUp=function(){this.$moveSelection(this.moveCursorUp)
},this.selectDown=function(){this.$moveSelection(this.moveCursorDown)},this.selectRight=function(){this.$moveSelection(this.moveCursorRight)},this.selectLeft=function(){this.$moveSelection(this.moveCursorLeft)},this.selectLineStart=function(){this.$moveSelection(this.moveCursorLineStart)},this.selectLineEnd=function(){this.$moveSelection(this.moveCursorLineEnd)},this.selectFileEnd=function(){this.$moveSelection(this.moveCursorFileEnd)},this.selectFileStart=function(){this.$moveSelection(this.moveCursorFileStart)
},this.selectWordRight=function(){this.$moveSelection(this.moveCursorWordRight)},this.selectWordLeft=function(){this.$moveSelection(this.moveCursorWordLeft)},this.getWordRange=function(a,b){if("undefined"==typeof b){var c=a||this.lead;a=c.row,b=c.column}return this.session.getWordRange(a,b)},this.selectWord=function(){this.setSelectionRange(this.getWordRange())},this.selectAWord=function(){var a=this.getCursor(),b=this.session.getAWordRange(a.row,a.column);this.setSelectionRange(b)},this.getLineRange=function(a,b){var d,c="number"==typeof a?a:this.lead.row,e=this.session.getFoldLine(c);
return e?(c=e.start.row,d=e.end.row):d=c,b===!0?new g(c,0,d,this.session.getLine(d).length):new g(c,0,d+1,0)},this.selectLine=function(){this.setSelectionRange(this.getLineRange())},this.moveCursorUp=function(){this.moveCursorBy(-1,0)},this.moveCursorDown=function(){this.moveCursorBy(1,0)},this.moveCursorLeft=function(){var b,a=this.lead.getPosition();if(b=this.session.getFoldAt(a.row,a.column,-1))this.moveCursorTo(b.start.row,b.start.column);else if(0==a.column)a.row>0&&this.moveCursorTo(a.row-1,this.doc.getLine(a.row-1).length);
else{var c=this.session.getTabSize();this.session.isTabStop(a)&&this.doc.getLine(a.row).slice(a.column-c,a.column).split(" ").length-1==c?this.moveCursorBy(0,-c):this.moveCursorBy(0,-1)}},this.moveCursorRight=function(){var b,a=this.lead.getPosition();if(b=this.session.getFoldAt(a.row,a.column,1))this.moveCursorTo(b.end.row,b.end.column);else if(this.lead.column==this.doc.getLine(this.lead.row).length)this.lead.row<this.doc.getLength()-1&&this.moveCursorTo(this.lead.row+1,0);else{var c=this.session.getTabSize(),a=this.lead;
this.session.isTabStop(a)&&this.doc.getLine(a.row).slice(a.column,a.column+c).split(" ").length-1==c?this.moveCursorBy(0,c):this.moveCursorBy(0,1)}},this.moveCursorLineStart=function(){var a=this.lead.row,b=this.lead.column,c=this.session.documentToScreenRow(a,b),d=this.session.screenToDocumentPosition(c,0),e=this.session.getDisplayLine(a,null,d.row,d.column),f=e.match(/^\s*/);f[0].length!=b&&!this.session.$useEmacsStyleLineStart&&(d.column+=f[0].length),this.moveCursorToPosition(d)},this.moveCursorLineEnd=function(){var a=this.lead,b=this.session.getDocumentLastRowColumnPosition(a.row,a.column);
if(this.lead.column==b.column){var c=this.session.getLine(b.row);if(b.column==c.length){var d=c.search(/\s+$/);d>0&&(b.column=d)}}this.moveCursorTo(b.row,b.column)},this.moveCursorFileEnd=function(){var a=this.doc.getLength()-1,b=this.doc.getLine(a).length;this.moveCursorTo(a,b)},this.moveCursorFileStart=function(){this.moveCursorTo(0,0)},this.moveCursorLongWordRight=function(){var e,a=this.lead.row,b=this.lead.column,c=this.doc.getLine(a),d=c.substring(b);this.session.nonTokenRe.lastIndex=0,this.session.tokenRe.lastIndex=0;
var f=this.session.getFoldAt(a,b,1);return f?(this.moveCursorTo(f.end.row,f.end.column),void 0):((e=this.session.nonTokenRe.exec(d))&&(b+=this.session.nonTokenRe.lastIndex,this.session.nonTokenRe.lastIndex=0,d=c.substring(b)),b>=c.length?(this.moveCursorTo(a,c.length),this.moveCursorRight(),a<this.doc.getLength()-1&&this.moveCursorWordRight(),void 0):((e=this.session.tokenRe.exec(d))&&(b+=this.session.tokenRe.lastIndex,this.session.tokenRe.lastIndex=0),this.moveCursorTo(a,b),void 0))},this.moveCursorLongWordLeft=function(){var c,a=this.lead.row,b=this.lead.column;
if(c=this.session.getFoldAt(a,b,-1))return this.moveCursorTo(c.start.row,c.start.column),void 0;var d=this.session.getFoldStringAt(a,b,-1);null==d&&(d=this.doc.getLine(a).substring(0,b));var g,f=e.stringReverse(d);return this.session.nonTokenRe.lastIndex=0,this.session.tokenRe.lastIndex=0,(g=this.session.nonTokenRe.exec(f))&&(b-=this.session.nonTokenRe.lastIndex,f=f.slice(this.session.nonTokenRe.lastIndex),this.session.nonTokenRe.lastIndex=0),0>=b?(this.moveCursorTo(a,0),this.moveCursorLeft(),a>0&&this.moveCursorWordLeft(),void 0):((g=this.session.tokenRe.exec(f))&&(b-=this.session.tokenRe.lastIndex,this.session.tokenRe.lastIndex=0),this.moveCursorTo(a,b),void 0)
},this.$shortWordEndIndex=function(a){var b,d,c=0,e=/\s/,f=this.session.tokenRe;if(f.lastIndex=0,b=this.session.tokenRe.exec(a))c=this.session.tokenRe.lastIndex;else{for(;(d=a[c])&&e.test(d);)c++;if(1>c)for(f.lastIndex=0;(d=a[c])&&!f.test(d);)if(f.lastIndex=0,c++,e.test(d)){if(c>2){c--;break}for(;(d=a[c])&&e.test(d);)c++;if(c>2)break}}return f.lastIndex=0,c},this.moveCursorShortWordRight=function(){var a=this.lead.row,b=this.lead.column,c=this.doc.getLine(a),d=c.substring(b),e=this.session.getFoldAt(a,b,1);if(e)return this.moveCursorTo(e.end.row,e.end.column);
if(b==c.length){var f=this.doc.getLength();do a++,d=this.doc.getLine(a);while(f>a&&/^\s*$/.test(d));/^\s+/.test(d)||(d=""),b=0}var g=this.$shortWordEndIndex(d);this.moveCursorTo(a,b+g)},this.moveCursorShortWordLeft=function(){var c,a=this.lead.row,b=this.lead.column;if(c=this.session.getFoldAt(a,b,-1))return this.moveCursorTo(c.start.row,c.start.column);var d=this.session.getLine(a).substring(0,b);if(0==b){do a--,d=this.doc.getLine(a);while(a>0&&/^\s*$/.test(d));b=d.length,/\s+$/.test(d)||(d="")}var f=e.stringReverse(d),g=this.$shortWordEndIndex(f);
return this.moveCursorTo(a,b-g)},this.moveCursorWordRight=function(){this.session.$selectLongWords?this.moveCursorLongWordRight():this.moveCursorShortWordRight()},this.moveCursorWordLeft=function(){this.session.$selectLongWords?this.moveCursorLongWordLeft():this.moveCursorShortWordLeft()},this.moveCursorBy=function(a,b){var c=this.session.documentToScreenPosition(this.lead.row,this.lead.column);0===b&&(this.$desiredColumn?c.column=this.$desiredColumn:this.$desiredColumn=c.column);var d=this.session.screenToDocumentPosition(c.row+a,c.column);
0!==a&&0===b&&d.row===this.lead.row&&d.column===this.lead.column&&this.session.lineWidgets&&this.session.lineWidgets[d.row]&&d.row++,this.moveCursorTo(d.row,d.column+b,0===b)},this.moveCursorToPosition=function(a){this.moveCursorTo(a.row,a.column)},this.moveCursorTo=function(a,b,c){var d=this.session.getFoldAt(a,b,1);d&&(a=d.start.row,b=d.start.column),this.$keepDesiredColumnOnChange=!0,this.lead.setPosition(a,b),this.$keepDesiredColumnOnChange=!1,c||(this.$desiredColumn=null)},this.moveCursorToScreen=function(a,b,c){var d=this.session.screenToDocumentPosition(a,b);
this.moveCursorTo(d.row,d.column,c)},this.detach=function(){this.lead.detach(),this.anchor.detach(),this.session=this.doc=null},this.fromOrientedRange=function(a){this.setSelectionRange(a,a.cursor==a.start),this.$desiredColumn=a.desiredColumn||this.$desiredColumn},this.toOrientedRange=function(a){var b=this.getRange();return a?(a.start.column=b.start.column,a.start.row=b.start.row,a.end.column=b.end.column,a.end.row=b.end.row):a=b,a.cursor=this.isBackwards()?a.start:a.end,a.desiredColumn=this.$desiredColumn,a
},this.toJSON=function(){if(this.rangeCount)var a=this.ranges.map(function(a){var b=a.clone();return b.isBackwards=a.cursor==a.start,b});else{var a=this.getRange();a.isBackwards=this.isBackwards()}return a},this.fromJSON=function(a){if(void 0==a.start){if(this.rangeList){this.toSingleRange(a[0]);for(var b=a.length;b--;){var c=g.fromPoints(a[b].start,a[b].end);a.isBackwards&&(c.cursor=c.start),this.addRange(c,!0)}return}a=a[0]}this.rangeList&&this.toSingleRange(a),this.setSelectionRange(a,a.isBackwards)},this.isEqual=function(a){if((a.length||this.rangeCount)&&a.length!=this.rangeCount)return!1;
if(!a.length||!this.ranges)return this.getRange().isEqual(a);for(var b=this.ranges.length;b--;)if(!this.ranges[b].isEqual(a[b]))return!1;return!0}}).call(h.prototype),b.Selection=h}),ace.define("ace/search",["require","exports","module","ace/lib/lang","ace/lib/oop","ace/range"],function(a,b){var d=a("./lib/lang"),e=a("./lib/oop"),f=a("./range").Range,g=function(){this.$options={}};(function(){this.set=function(a){return e.mixin(this.$options,a),this},this.getOptions=function(){return d.copyObject(this.$options)
},this.setOptions=function(a){this.$options=a},this.find=function(a){var b=this.$matchIterator(a,this.$options);if(!b)return!1;var c=null;return b.forEach(function(a,b,d){if(a.start)c=a;else{var e=a.offset+(d||0);c=new f(b,e,b,e+a.length)}return!0}),c},this.findAll=function(a){var b=this.$options;if(!b.needle)return[];this.$assembleRegExp(b);var c=b.range,e=c?a.getLines(c.start.row,c.end.row):a.doc.getAllLines(),g=[],h=b.re;if(b.$isMultiLine){var k,i=h.length,j=e.length-i;a:for(var l=h.offset||0;j>=l;l++){for(var m=0;i>m;m++)if(-1==e[l+m].search(h[m]))continue a;
var n=e[l],o=e[l+i-1],p=n.length-n.match(h[0])[0].length,q=o.match(h[i-1])[0].length;k&&k.end.row===l&&k.end.column>p||(g.push(k=new f(l,p,l+i-1,q)),i>2&&(l=l+i-2))}}else for(var r=0;r<e.length;r++)for(var s=d.getMatchOffsets(e[r],h),m=0;m<s.length;m++){var t=s[m];g.push(new f(r,t.offset,r,t.offset+t.length))}if(c){for(var u=c.start.column,v=c.start.column,r=0,m=g.length-1;m>r&&g[r].start.column<u&&g[r].start.row==c.start.row;)r++;for(;m>r&&g[m].end.column>v&&g[m].end.row==c.end.row;)m--;for(g=g.slice(r,m+1),r=0,m=g.length;m>r;r++)g[r].start.row+=c.start.row,g[r].end.row+=c.start.row
}return g},this.replace=function(a,b){var c=this.$options,d=this.$assembleRegExp(c);if(c.$isMultiLine)return b;if(d){var e=d.exec(a);if(!e||e[0].length!=a.length)return null;if(b=a.replace(d,b),c.preserveCase){b=b.split("");for(var f=Math.min(a.length,a.length);f--;){var g=a[f];b[f]=g&&g.toLowerCase()!=g?b[f].toUpperCase():b[f].toLowerCase()}b=b.join("")}return b}},this.$matchIterator=function(a,b){var c=this.$assembleRegExp(b);if(!c)return!1;var g,e=this,h=b.backwards;if(b.$isMultiLine)var i=c.length,j=function(b,d,e){var h=b.search(c[0]);
if(-1!=h){for(var j=1;i>j;j++)if(b=a.getLine(d+j),-1==b.search(c[j]))return;var k=b.match(c[i-1])[0].length,l=new f(d,h,d+i-1,k);return 1==c.offset?(l.start.row--,l.start.column=Number.MAX_VALUE):e&&(l.start.column+=e),g(l)?!0:void 0}};else if(h)var j=function(a,b,e){for(var f=d.getMatchOffsets(a,c),h=f.length-1;h>=0;h--)if(g(f[h],b,e))return!0};else var j=function(a,b,e){for(var f=d.getMatchOffsets(a,c),h=0;h<f.length;h++)if(g(f[h],b,e))return!0};return{forEach:function(c){g=c,e.$lineIterator(a,b).forEach(j)
}}},this.$assembleRegExp=function(a,b){if(a.needle instanceof RegExp)return a.re=a.needle;var c=a.needle;if(!a.needle)return a.re=!1;a.regExp||(c=d.escapeRegExp(c)),a.wholeWord&&(c="\\b"+c+"\\b");var e=a.caseSensitive?"g":"gi";if(a.$isMultiLine=!b&&/[\n\r]/.test(c),a.$isMultiLine)return a.re=this.$assembleMultilineRegExp(c,e);try{var f=new RegExp(c,e)}catch(g){f=!1}return a.re=f},this.$assembleMultilineRegExp=function(a,b){for(var c=a.replace(/\r\n|\r|\n/g,"$\n^").split("\n"),d=[],e=0;e<c.length;e++)try{d.push(new RegExp(c[e],b))
}catch(f){return!1}return""==c[0]?(d.shift(),d.offset=1):d.offset=0,d},this.$lineIterator=function(a,b){var c=1==b.backwards,d=0!=b.skipCurrent,e=b.range,f=b.start;f||(f=e?e[c?"end":"start"]:a.selection.getRange()),f.start&&(f=f[d!=c?"end":"start"]);var g=e?e.start.row:0,h=e?e.end.row:a.getLength()-1,i=c?function(c){var d=f.row,e=a.getLine(d).substring(0,f.column);if(!c(e,d)){for(d--;d>=g;d--)if(c(a.getLine(d),d))return;if(0!=b.wrap)for(d=h,g=f.row;d>=g;d--)if(c(a.getLine(d),d))return}}:function(c){var d=f.row,e=a.getLine(d).substr(f.column);
if(!c(e,d,f.column)){for(d+=1;h>=d;d++)if(c(a.getLine(d),d))return;if(0!=b.wrap)for(d=g,h=f.row;h>=d;d++)if(c(a.getLine(d),d))return}};return{forEach:i}}}).call(g.prototype),b.Search=g}),ace.define("ace/edit_session",["require","exports","module","ace/lib/oop","ace/lib/lang","ace/config","ace/lib/event_emitter","ace/selection","ace/mode/text","ace/range","ace/document","ace/background_tokenizer","ace/search_highlight","ace/edit_session/folding","ace/edit_session/bracket_match"],function(a,b){var d=a("./lib/oop"),e=a("./lib/lang"),f=a("./config"),g=a("./lib/event_emitter").EventEmitter,h=a("./selection").Selection,i=a("./mode/text").Mode,j=a("./range").Range,k=a("./document").Document,l=a("./background_tokenizer").BackgroundTokenizer,m=a("./search_highlight").SearchHighlight,n=function(a,b){this.$breakpoints=[],this.$decorations=[],this.$frontMarkers={},this.$backMarkers={},this.$markerId=1,this.$undoSelect=!0,this.$foldData=[],this.$foldData.toString=function(){return this.join("\n")
},this.on("changeFold",this.onChangeFold.bind(this)),this.$onChange=this.onChange.bind(this),"object"==typeof a&&a.getLine||(a=new k(a)),this.setDocument(a),this.selection=new h(this),f.resetOptions(this),this.setMode(b),f._signal("session",this)};(function(){function b(a){return 4352>a?!1:a>=4352&&4447>=a||a>=4515&&4519>=a||a>=4602&&4607>=a||a>=9001&&9002>=a||a>=11904&&11929>=a||a>=11931&&12019>=a||a>=12032&&12245>=a||a>=12272&&12283>=a||a>=12288&&12350>=a||a>=12353&&12438>=a||a>=12441&&12543>=a||a>=12549&&12589>=a||a>=12593&&12686>=a||a>=12688&&12730>=a||a>=12736&&12771>=a||a>=12784&&12830>=a||a>=12832&&12871>=a||a>=12880&&13054>=a||a>=13056&&19903>=a||a>=19968&&42124>=a||a>=42128&&42182>=a||a>=43360&&43388>=a||a>=44032&&55203>=a||a>=55216&&55238>=a||a>=55243&&55291>=a||a>=63744&&64255>=a||a>=65040&&65049>=a||a>=65072&&65106>=a||a>=65108&&65126>=a||a>=65128&&65131>=a||a>=65281&&65376>=a||a>=65504&&65510>=a
}d.implement(this,g),this.setDocument=function(a){this.doc&&this.doc.removeListener("change",this.$onChange),this.doc=a,a.on("change",this.$onChange),this.bgTokenizer&&this.bgTokenizer.setDocument(this.getDocument()),this.resetCaches()},this.getDocument=function(){return this.doc},this.$resetRowCache=function(a){if(!a)return this.$docRowCache=[],this.$screenRowCache=[],void 0;var b=this.$docRowCache.length,c=this.$getRowCacheIndex(this.$docRowCache,a)+1;b>c&&(this.$docRowCache.splice(c,b),this.$screenRowCache.splice(c,b))
},this.$getRowCacheIndex=function(a,b){for(var c=0,d=a.length-1;d>=c;){var e=c+d>>1,f=a[e];if(b>f)c=e+1;else{if(!(f>b))return e;d=e-1}}return c-1},this.resetCaches=function(){this.$modified=!0,this.$wrapData=[],this.$rowLengthCache=[],this.$resetRowCache(0),this.bgTokenizer&&this.bgTokenizer.start(0)},this.onChangeFold=function(a){var b=a.data;this.$resetRowCache(b.start.row)},this.onChange=function(a){var b=a.data;this.$modified=!0,this.$resetRowCache(b.range.start.row);var c=this.$updateInternalDataOnChange(a);
!this.$fromUndo&&this.$undoManager&&!b.ignore&&(this.$deltasDoc.push(b),c&&0!=c.length&&this.$deltasFold.push({action:"removeFolds",folds:c}),this.$informUndoManager.schedule()),this.bgTokenizer.$updateOnChange(b),this._signal("change",a)},this.setValue=function(a){this.doc.setValue(a),this.selection.moveTo(0,0),this.$resetRowCache(0),this.$deltas=[],this.$deltasDoc=[],this.$deltasFold=[],this.setUndoManager(this.$undoManager),this.getUndoManager().reset()},this.getValue=this.toString=function(){return this.doc.getValue()
},this.getSelection=function(){return this.selection},this.getState=function(a){return this.bgTokenizer.getState(a)},this.getTokens=function(a){return this.bgTokenizer.getTokens(a)},this.getTokenAt=function(a,b){var d,c=this.bgTokenizer.getTokens(a),e=0;if(null==b)f=c.length-1,e=this.getLine(a).length;else for(var f=0;f<c.length&&(e+=c[f].value.length,!(e>=b));f++);return d=c[f],d?(d.index=f,d.start=e-d.value.length,d):null},this.setUndoManager=function(a){if(this.$undoManager=a,this.$deltas=[],this.$deltasDoc=[],this.$deltasFold=[],this.$informUndoManager&&this.$informUndoManager.cancel(),a){var b=this;
this.$syncInformUndoManager=function(){b.$informUndoManager.cancel(),b.$deltasFold.length&&(b.$deltas.push({group:"fold",deltas:b.$deltasFold}),b.$deltasFold=[]),b.$deltasDoc.length&&(b.$deltas.push({group:"doc",deltas:b.$deltasDoc}),b.$deltasDoc=[]),b.$deltas.length>0&&a.execute({action:"aceupdate",args:[b.$deltas,b],merge:b.mergeUndoDeltas}),b.mergeUndoDeltas=!1,b.$deltas=[]},this.$informUndoManager=e.delayedCall(this.$syncInformUndoManager)}},this.markUndoGroup=function(){this.$syncInformUndoManager&&this.$syncInformUndoManager()
},this.$defaultUndoManager={undo:function(){},redo:function(){},reset:function(){}},this.getUndoManager=function(){return this.$undoManager||this.$defaultUndoManager},this.getTabString=function(){return this.getUseSoftTabs()?e.stringRepeat(" ",this.getTabSize()):"	"},this.setUseSoftTabs=function(a){this.setOption("useSoftTabs",a)},this.getUseSoftTabs=function(){return this.$useSoftTabs&&!this.$mode.$indentWithTabs},this.setTabSize=function(a){this.setOption("tabSize",a)},this.getTabSize=function(){return this.$tabSize
},this.isTabStop=function(a){return this.$useSoftTabs&&a.column%this.$tabSize===0},this.$overwrite=!1,this.setOverwrite=function(a){this.setOption("overwrite",a)},this.getOverwrite=function(){return this.$overwrite},this.toggleOverwrite=function(){this.setOverwrite(!this.$overwrite)},this.addGutterDecoration=function(a,b){this.$decorations[a]||(this.$decorations[a]=""),this.$decorations[a]+=" "+b,this._signal("changeBreakpoint",{})},this.removeGutterDecoration=function(a,b){this.$decorations[a]=(this.$decorations[a]||"").replace(" "+b,""),this._signal("changeBreakpoint",{})
},this.getBreakpoints=function(){return this.$breakpoints},this.setBreakpoints=function(a){this.$breakpoints=[];for(var b=0;b<a.length;b++)this.$breakpoints[a[b]]="ace_breakpoint";this._signal("changeBreakpoint",{})},this.clearBreakpoints=function(){this.$breakpoints=[],this._signal("changeBreakpoint",{})},this.setBreakpoint=function(a,b){void 0===b&&(b="ace_breakpoint"),b?this.$breakpoints[a]=b:delete this.$breakpoints[a],this._signal("changeBreakpoint",{})},this.clearBreakpoint=function(a){delete this.$breakpoints[a],this._signal("changeBreakpoint",{})
},this.addMarker=function(a,b,c,d){var e=this.$markerId++,f={range:a,type:c||"line",renderer:"function"==typeof c?c:null,clazz:b,inFront:!!d,id:e};return d?(this.$frontMarkers[e]=f,this._signal("changeFrontMarker")):(this.$backMarkers[e]=f,this._signal("changeBackMarker")),e},this.addDynamicMarker=function(a,b){if(a.update){var c=this.$markerId++;return a.id=c,a.inFront=!!b,b?(this.$frontMarkers[c]=a,this._signal("changeFrontMarker")):(this.$backMarkers[c]=a,this._signal("changeBackMarker")),a}},this.removeMarker=function(a){var b=this.$frontMarkers[a]||this.$backMarkers[a];
if(b){var c=b.inFront?this.$frontMarkers:this.$backMarkers;b&&(delete c[a],this._signal(b.inFront?"changeFrontMarker":"changeBackMarker"))}},this.getMarkers=function(a){return a?this.$frontMarkers:this.$backMarkers},this.highlight=function(a){if(!this.$searchHighlight){var b=new m(null,"ace_selected-word","text");this.$searchHighlight=this.addDynamicMarker(b)}this.$searchHighlight.setRegexp(a)},this.highlightLines=function(a,b,c,d){"number"!=typeof b&&(c=b,b=a),c||(c="ace_step");var e=new j(a,0,b,1/0);return e.id=this.addMarker(e,c,"fullLine",d),e
},this.setAnnotations=function(a){this.$annotations=a,this._signal("changeAnnotation",{})},this.getAnnotations=function(){return this.$annotations||[]},this.clearAnnotations=function(){this.setAnnotations([])},this.$detectNewLine=function(a){var b=a.match(/^.*?(\r?\n)/m);this.$autoNewLine=b?b[1]:"\n"},this.getWordRange=function(a,b){var c=this.getLine(a),d=!1;if(b>0&&(d=!!c.charAt(b-1).match(this.tokenRe)),d||(d=!!c.charAt(b).match(this.tokenRe)),d)var e=this.tokenRe;else if(/^\s+$/.test(c.slice(b-1,b+1)))var e=/\s/;
else var e=this.nonTokenRe;var f=b;if(f>0){do f--;while(f>=0&&c.charAt(f).match(e));f++}for(var g=b;g<c.length&&c.charAt(g).match(e);)g++;return new j(a,f,a,g)},this.getAWordRange=function(a,b){for(var c=this.getWordRange(a,b),d=this.getLine(c.end.row);d.charAt(c.end.column).match(/[ \t]/);)c.end.column+=1;return c},this.setNewLineMode=function(a){this.doc.setNewLineMode(a)},this.getNewLineMode=function(){return this.doc.getNewLineMode()},this.setUseWorker=function(a){this.setOption("useWorker",a)},this.getUseWorker=function(){return this.$useWorker
},this.onReloadTokenizer=function(a){var b=a.data;this.bgTokenizer.start(b.first),this._signal("tokenizerUpdate",a)},this.$modes={},this.$mode=null,this.$modeId=null,this.setMode=function(a,b){if(a&&"object"==typeof a){if(a.getTokenizer)return this.$onChangeMode(a);var c=a,d=c.path}else d=a||"ace/mode/text";return this.$modes["ace/mode/text"]||(this.$modes["ace/mode/text"]=new i),this.$modes[d]&&!c?(this.$onChangeMode(this.$modes[d]),b&&b(),void 0):(this.$modeId=d,f.loadModule(["mode",d],function(a){return this.$modeId!==d?b&&b():this.$modes[d]&&!c?this.$onChangeMode(this.$modes[d]):(a&&a.Mode&&(a=new a.Mode(c),c||(this.$modes[d]=a,a.$id=d),this.$onChangeMode(a),b&&b()),void 0)
}.bind(this)),this.$mode||this.$onChangeMode(this.$modes["ace/mode/text"],!0),void 0)},this.$onChangeMode=function(a,b){if(b||(this.$modeId=a.$id),this.$mode!==a){this.$mode=a,this.$stopWorker(),this.$useWorker&&this.$startWorker();var c=a.getTokenizer();if(void 0!==c.addEventListener){var d=this.onReloadTokenizer.bind(this);c.addEventListener("update",d)}if(this.bgTokenizer)this.bgTokenizer.setTokenizer(c);else{this.bgTokenizer=new l(c);var e=this;this.bgTokenizer.addEventListener("update",function(a){e._signal("tokenizerUpdate",a)
})}this.bgTokenizer.setDocument(this.getDocument()),this.tokenRe=a.tokenRe,this.nonTokenRe=a.nonTokenRe,b||(this.$options.wrapMethod.set.call(this,this.$wrapMethod),this.$setFolding(a.foldingRules),this.bgTokenizer.start(0),this._emit("changeMode"))}},this.$stopWorker=function(){this.$worker&&this.$worker.terminate(),this.$worker=null},this.$startWorker=function(){if("undefined"==typeof Worker||a.noWorker)this.$worker=null;else try{this.$worker=this.$mode.createWorker(this)}catch(b){console.log("Could not load worker"),console.log(b),this.$worker=null
}},this.getMode=function(){return this.$mode},this.$scrollTop=0,this.setScrollTop=function(a){this.$scrollTop===a||isNaN(a)||(this.$scrollTop=a,this._signal("changeScrollTop",a))},this.getScrollTop=function(){return this.$scrollTop},this.$scrollLeft=0,this.setScrollLeft=function(a){this.$scrollLeft===a||isNaN(a)||(this.$scrollLeft=a,this._signal("changeScrollLeft",a))},this.getScrollLeft=function(){return this.$scrollLeft},this.getScreenWidth=function(){return this.$computeWidth(),this.lineWidgets?Math.max(this.getLineWidgetMaxWidth(),this.screenWidth):this.screenWidth
},this.getLineWidgetMaxWidth=function(){if(null!=this.lineWidgetsWidth)return this.lineWidgetsWidth;var a=0;return this.lineWidgets.forEach(function(b){b&&b.screenWidth>a&&(a=b.screenWidth)}),this.lineWidgetWidth=a},this.$computeWidth=function(a){if(this.$modified||a){if(this.$modified=!1,this.$useWrapMode)return this.screenWidth=this.$wrapLimit;for(var b=this.doc.getAllLines(),c=this.$rowLengthCache,d=0,e=0,f=this.$foldData[e],g=f?f.start.row:1/0,h=b.length,i=0;h>i;i++){if(i>g){if(i=f.end.row+1,i>=h)break;f=this.$foldData[e++],g=f?f.start.row:1/0
}null==c[i]&&(c[i]=this.$getStringScreenWidth(b[i])[0]),c[i]>d&&(d=c[i])}this.screenWidth=d}},this.getLine=function(a){return this.doc.getLine(a)},this.getLines=function(a,b){return this.doc.getLines(a,b)},this.getLength=function(){return this.doc.getLength()},this.getTextRange=function(a){return this.doc.getTextRange(a||this.selection.getRange())},this.insert=function(a,b){return this.doc.insert(a,b)},this.remove=function(a){return this.doc.remove(a)},this.undoChanges=function(a,b){if(a.length){this.$fromUndo=!0;
for(var c=null,d=a.length-1;-1!=d;d--){var e=a[d];"doc"==e.group?(this.doc.revertDeltas(e.deltas),c=this.$getUndoSelection(e.deltas,!0,c)):e.deltas.forEach(function(a){this.addFolds(a.folds)},this)}return this.$fromUndo=!1,c&&this.$undoSelect&&!b&&this.selection.setSelectionRange(c),c}},this.redoChanges=function(a,b){if(a.length){this.$fromUndo=!0;for(var c=null,d=0;d<a.length;d++){var e=a[d];"doc"==e.group&&(this.doc.applyDeltas(e.deltas),c=this.$getUndoSelection(e.deltas,!1,c))}return this.$fromUndo=!1,c&&this.$undoSelect&&!b&&this.selection.setSelectionRange(c),c
}},this.setUndoSelect=function(a){this.$undoSelect=a},this.$getUndoSelection=function(a,b,c){function d(a){var c="insertText"===a.action||"insertLines"===a.action;return b?!c:c}var f,g,e=a[0],h=!1;d(e)?(f=j.fromPoints(e.range.start,e.range.end),h=!0):(f=j.fromPoints(e.range.start,e.range.start),h=!1);for(var i=1;i<a.length;i++)e=a[i],d(e)?(g=e.range.start,-1==f.compare(g.row,g.column)&&f.setStart(e.range.start),g=e.range.end,1==f.compare(g.row,g.column)&&f.setEnd(e.range.end),h=!0):(g=e.range.start,-1==f.compare(g.row,g.column)&&(f=j.fromPoints(e.range.start,e.range.start)),h=!1);
if(null!=c){0===j.comparePoints(c.start,f.start)&&(c.start.column+=f.end.column-f.start.column,c.end.column+=f.end.column-f.start.column);var k=c.compareRange(f);1==k?f.setStart(c.start):-1==k&&f.setEnd(c.end)}return f},this.replace=function(a,b){return this.doc.replace(a,b)},this.moveText=function(a,b,c){var d=this.getTextRange(a),e=this.getFoldsInRange(a),f=j.fromPoints(b,b);if(!c){this.remove(a);var g=a.start.row-a.end.row,h=g?-a.end.column:a.start.column-a.end.column;h&&(f.start.row==a.end.row&&f.start.column>a.end.column&&(f.start.column+=h),f.end.row==a.end.row&&f.end.column>a.end.column&&(f.end.column+=h)),g&&f.start.row>=a.end.row&&(f.start.row+=g,f.end.row+=g)
}if(f.end=this.insert(f.start,d),e.length){var i=a.start,k=f.start,g=k.row-i.row,h=k.column-i.column;this.addFolds(e.map(function(a){return a=a.clone(),a.start.row==i.row&&(a.start.column+=h),a.end.row==i.row&&(a.end.column+=h),a.start.row+=g,a.end.row+=g,a}))}return f},this.indentRows=function(a,b,c){c=c.replace(/\t/g,this.getTabString());for(var d=a;b>=d;d++)this.insert({row:d,column:0},c)},this.outdentRows=function(a){for(var b=a.collapseRows(),c=new j(0,0,0,0),d=this.getTabSize(),e=b.start.row;e<=b.end.row;++e){var f=this.getLine(e);
c.start.row=e,c.end.row=e;for(var g=0;d>g&&" "==f.charAt(g);++g);d>g&&"	"==f.charAt(g)?(c.start.column=g,c.end.column=g+1):(c.start.column=0,c.end.column=g),this.remove(c)}},this.$moveLines=function(a,b,c){if(a=this.getRowFoldStart(a),b=this.getRowFoldEnd(b),0>c){var d=this.getRowFoldStart(a+c);if(0>d)return 0;var e=d-a}else if(c>0){var d=this.getRowFoldEnd(b+c);if(d>this.doc.getLength()-1)return 0;var e=d-b}else{a=this.$clipRowToDocument(a),b=this.$clipRowToDocument(b);var e=b-a+1}var f=new j(a,0,b,Number.MAX_VALUE),g=this.getFoldsInRange(f).map(function(a){return a=a.clone(),a.start.row+=e,a.end.row+=e,a
}),h=0==c?this.doc.getLines(a,b):this.doc.removeLines(a,b);return this.doc.insertLines(a+e,h),g.length&&this.addFolds(g),e},this.moveLinesUp=function(a,b){return this.$moveLines(a,b,-1)},this.moveLinesDown=function(a,b){return this.$moveLines(a,b,1)},this.duplicateLines=function(a,b){return this.$moveLines(a,b,0)},this.$clipRowToDocument=function(a){return Math.max(0,Math.min(a,this.doc.getLength()-1))},this.$clipColumnToRow=function(a,b){return 0>b?0:Math.min(this.doc.getLine(a).length,b)},this.$clipPositionToDocument=function(a,b){if(b=Math.max(0,b),0>a)a=0,b=0;
else{var c=this.doc.getLength();a>=c?(a=c-1,b=this.doc.getLine(c-1).length):b=Math.min(this.doc.getLine(a).length,b)}return{row:a,column:b}},this.$clipRangeToDocument=function(a){a.start.row<0?(a.start.row=0,a.start.column=0):a.start.column=this.$clipColumnToRow(a.start.row,a.start.column);var b=this.doc.getLength()-1;return a.end.row>b?(a.end.row=b,a.end.column=this.doc.getLine(b).length):a.end.column=this.$clipColumnToRow(a.end.row,a.end.column),a},this.$wrapLimit=80,this.$useWrapMode=!1,this.$wrapLimitRange={min:null,max:null},this.setUseWrapMode=function(a){if(a!=this.$useWrapMode){if(this.$useWrapMode=a,this.$modified=!0,this.$resetRowCache(0),a){var b=this.getLength();
this.$wrapData=Array(b),this.$updateWrapData(0,b-1)}this._signal("changeWrapMode")}},this.getUseWrapMode=function(){return this.$useWrapMode},this.setWrapLimitRange=function(a,b){(this.$wrapLimitRange.min!==a||this.$wrapLimitRange.max!==b)&&(this.$wrapLimitRange={min:a,max:b},this.$modified=!0,this._signal("changeWrapMode"))},this.adjustWrapLimit=function(a,b){var c=this.$wrapLimitRange;c.max<0&&(c={min:b,max:b});var d=this.$constrainWrapLimit(a,c.min,c.max);return d!=this.$wrapLimit&&d>1?(this.$wrapLimit=d,this.$modified=!0,this.$useWrapMode&&(this.$updateWrapData(0,this.getLength()-1),this.$resetRowCache(0),this._signal("changeWrapLimit")),!0):!1
},this.$constrainWrapLimit=function(a,b,c){return b&&(a=Math.max(b,a)),c&&(a=Math.min(c,a)),a},this.getWrapLimit=function(){return this.$wrapLimit},this.setWrapLimit=function(a){this.setWrapLimitRange(a,a)},this.getWrapLimitRange=function(){return{min:this.$wrapLimitRange.min,max:this.$wrapLimitRange.max}},this.$updateInternalDataOnChange=function(a){var c,b=this.$useWrapMode,d=a.data.action,e=a.data.range.start.row,f=a.data.range.end.row,g=a.data.range.start,h=a.data.range.end,i=null;if(-1!=d.indexOf("Lines")?(f="insertLines"==d?e+a.data.lines.length:e,c=a.data.lines?a.data.lines.length:f-e):c=f-e,this.$updating=!0,0!=c)if(-1!=d.indexOf("remove")){this[b?"$wrapData":"$rowLengthCache"].splice(e,c);
var j=this.$foldData;i=this.getFoldsInRange(a.data.range),this.removeFolds(i);var k=this.getFoldLine(h.row),l=0;if(k){k.addRemoveChars(h.row,h.column,g.column-h.column),k.shiftRow(-c);var m=this.getFoldLine(e);m&&m!==k&&(m.merge(k),k=m),l=j.indexOf(k)+1}for(l;l<j.length;l++){var k=j[l];k.start.row>=h.row&&k.shiftRow(-c)}f=e}else{var n=Array(c);n.unshift(e,0);var o=b?this.$wrapData:this.$rowLengthCache;o.splice.apply(o,n);var j=this.$foldData,k=this.getFoldLine(e),l=0;if(k){var p=k.range.compareInside(g.row,g.column);
0==p?(k=k.split(g.row,g.column),k.shiftRow(c),k.addRemoveChars(f,0,h.column-g.column)):-1==p&&(k.addRemoveChars(e,0,h.column-g.column),k.shiftRow(c)),l=j.indexOf(k)+1}for(l;l<j.length;l++){var k=j[l];k.start.row>=e&&k.shiftRow(c)}}else{c=Math.abs(a.data.range.start.column-a.data.range.end.column),-1!=d.indexOf("remove")&&(i=this.getFoldsInRange(a.data.range),this.removeFolds(i),c=-c);var k=this.getFoldLine(e);k&&k.addRemoveChars(e,g.column,c)}return b&&this.$wrapData.length!=this.doc.getLength()&&console.error("doc.getLength() and $wrapData.length have to be the same!"),this.$updating=!1,b?this.$updateWrapData(e,f):this.$updateRowLengthCache(e,f),i
},this.$updateRowLengthCache=function(a,b){this.$rowLengthCache[a]=null,this.$rowLengthCache[b]=null},this.$updateWrapData=function(a,b){var g,h,c=this.doc.getAllLines(),d=this.getTabSize(),e=this.$wrapData,f=this.$wrapLimit,i=a;for(b=Math.min(b,c.length-1);b>=i;)h=this.getFoldLine(i,h),h?(g=[],h.walk(function(a,b,d,e){var f;if(null!=a){f=this.$getDisplayTokens(a,g.length),f[0]=k;for(var h=1;h<f.length;h++)f[h]=n}else f=this.$getDisplayTokens(c[b].substring(e,d),g.length);g=g.concat(f)}.bind(this),h.end.row,c[h.end.row].length+1),e[h.start.row]=this.$computeWrapSplits(g,f,d),i=h.end.row+1):(g=this.$getDisplayTokens(c[i]),e[i]=this.$computeWrapSplits(g,f,d),i++)
};var c=1,h=2,k=3,n=4,o=9,p=10,q=11,r=12;this.$computeWrapSplits=function(a,b){function c(b){var c=a.slice(f,b),e=c.length;c.join("").replace(/12/g,function(){e-=1}).replace(/2/g,function(){e-=1}),g+=e,d.push(g),f=b}if(0==a.length)return[];for(var d=[],e=a.length,f=0,g=0,h=this.$wrapAsCode;e-f>b;){var i=f+b;if(a[i-1]>=p&&a[i]>=p)c(i);else if(a[i]!=k&&a[i]!=n){for(var j=Math.max(i-(h?10:b-(b>>2)),f-1);i>j&&a[i]<k;)i--;if(h){for(;i>j&&a[i]<k;)i--;for(;i>j&&a[i]==o;)i--}else for(;i>j&&a[i]<p;)i--;i>j?c(++i):(i=f+b,c(i))
}else{for(i;i!=f-1&&a[i]!=k;i--);if(i>f){c(i);continue}for(i=f+b;i<a.length&&a[i]==n;i++);if(i==a.length)break;c(i)}}return d},this.$getDisplayTokens=function(a,d){var f,e=[];d=d||0;for(var g=0;g<a.length;g++){var i=a.charCodeAt(g);if(9==i){f=this.getScreenTabSize(e.length+d),e.push(q);for(var j=1;f>j;j++)e.push(r)}else 32==i?e.push(p):i>39&&48>i||i>57&&64>i?e.push(o):i>=4352&&b(i)?e.push(c,h):e.push(c)}return e},this.$getStringScreenWidth=function(a,c,d){if(0==c)return[0,0];null==c&&(c=1/0),d=d||0;var e,f;for(f=0;f<a.length&&(e=a.charCodeAt(f),d+=9==e?this.getScreenTabSize(d):e>=4352&&b(e)?2:1,!(d>c));f++);return[d,f]
},this.lineWidgets=null,this.getRowLength=function(a){if(this.lineWidgets)var b=this.lineWidgets[a]&&this.lineWidgets[a].rowCount||0;else b=0;return this.$useWrapMode&&this.$wrapData[a]?this.$wrapData[a].length+1+b:1+b},this.getRowLineCount=function(a){return this.$useWrapMode&&this.$wrapData[a]?this.$wrapData[a].length+1:1},this.getScreenLastRowColumn=function(a){var b=this.screenToDocumentPosition(a,Number.MAX_VALUE);return this.documentToScreenColumn(b.row,b.column)},this.getDocumentLastRowColumn=function(a,b){var c=this.documentToScreenRow(a,b);
return this.getScreenLastRowColumn(c)},this.getDocumentLastRowColumnPosition=function(a,b){var c=this.documentToScreenRow(a,b);return this.screenToDocumentPosition(c,Number.MAX_VALUE/10)},this.getRowSplitData=function(a){return this.$useWrapMode?this.$wrapData[a]:void 0},this.getScreenTabSize=function(a){return this.$tabSize-a%this.$tabSize},this.screenToDocumentRow=function(a,b){return this.screenToDocumentPosition(a,b).row},this.screenToDocumentColumn=function(a,b){return this.screenToDocumentPosition(a,b).column
},this.screenToDocumentPosition=function(a,b){if(0>a)return{row:0,column:0};var c,f,d=0,e=0,g=0,h=0,i=this.$screenRowCache,j=this.$getRowCacheIndex(i,a),k=i.length;if(k&&j>=0)var g=i[j],d=this.$docRowCache[j],l=a>i[k-1];else var l=!k;for(var m=this.getLength()-1,n=this.getNextFoldLine(d),o=n?n.start.row:1/0;a>=g&&(h=this.getRowLength(d),!(g+h>a||d>=m));)g+=h,d++,d>o&&(d=n.end.row+1,n=this.getNextFoldLine(d,n),o=n?n.start.row:1/0),l&&(this.$docRowCache.push(d),this.$screenRowCache.push(g));if(n&&n.start.row<=d)c=this.getFoldDisplayLine(n),d=n.start.row;
else{if(a>=g+h||d>m)return{row:m,column:this.getLine(m).length};c=this.getLine(d),n=null}if(this.$useWrapMode){var p=this.$wrapData[d];if(p){var q=Math.floor(a-g);f=p[q],q>0&&p.length&&(e=p[q-1]||p[p.length-1],c=c.substring(e))}}return e+=this.$getStringScreenWidth(c,b)[1],this.$useWrapMode&&e>=f&&(e=f-1),n?n.idxToPosition(e):{row:d,column:e}},this.documentToScreenPosition=function(a,b){if("undefined"==typeof b)var c=this.$clipPositionToDocument(a.row,a.column);else c=this.$clipPositionToDocument(a,b);a=c.row,b=c.column;
var d=0,e=null,f=null;f=this.getFoldAt(a,b,1),f&&(a=f.start.row,b=f.start.column);var g,h=0,i=this.$docRowCache,j=this.$getRowCacheIndex(i,a),k=i.length;if(k&&j>=0)var h=i[j],d=this.$screenRowCache[j],l=a>i[k-1];else var l=!k;for(var m=this.getNextFoldLine(h),n=m?m.start.row:1/0;a>h;){if(h>=n){if(g=m.end.row+1,g>a)break;m=this.getNextFoldLine(g,m),n=m?m.start.row:1/0}else g=h+1;d+=this.getRowLength(h),h=g,l&&(this.$docRowCache.push(h),this.$screenRowCache.push(d))}var o="";if(m&&h>=n?(o=this.getFoldDisplayLine(m,a,b),e=m.start.row):(o=this.getLine(a).substring(0,b),e=a),this.$useWrapMode){var p=this.$wrapData[e];
if(p){for(var q=0;o.length>=p[q];)d++,q++;o=o.substring(p[q-1]||0,o.length)}}return{row:d,column:this.$getStringScreenWidth(o)[0]}},this.documentToScreenColumn=function(a,b){return this.documentToScreenPosition(a,b).column},this.documentToScreenRow=function(a,b){return this.documentToScreenPosition(a,b).row},this.getScreenLength=function(){var a=0,b=null;if(this.$useWrapMode)for(var e=this.$wrapData.length,f=0,d=0,b=this.$foldData[d++],g=b?b.start.row:1/0;e>f;){var h=this.$wrapData[f];a+=h?h.length+1:1,f++,f>g&&(f=b.end.row+1,b=this.$foldData[d++],g=b?b.start.row:1/0)
}else{a=this.getLength();for(var c=this.$foldData,d=0;d<c.length;d++)b=c[d],a-=b.end.row-b.start.row}return this.lineWidgets&&(a+=this.$getWidgetScreenLength()),a},this.$setFontMetrics=function(){}}).call(n.prototype),a("./edit_session/folding").Folding.call(n.prototype),a("./edit_session/bracket_match").BracketMatch.call(n.prototype),f.defineOptions(n.prototype,"session",{wrap:{set:function(a){if(a&&"off"!=a?"free"==a?a=!0:"printMargin"==a?a=-1:"string"==typeof a&&(a=parseInt(a,10)||!1):a=!1,this.$wrap!=a){if(a){var b="number"==typeof a?a:null;
this.setWrapLimitRange(b,b),this.setUseWrapMode(!0)}else this.setUseWrapMode(!1);this.$wrap=a}},get:function(){return this.getUseWrapMode()?-1==this.$wrap?"printMargin":this.getWrapLimitRange().min?this.$wrap:"free":"off"},handlesSet:!0},wrapMethod:{set:function(a){a="auto"==a?"text"!=this.$mode.type:"text"!=a,a!=this.$wrapAsCode&&(this.$wrapAsCode=a,this.$useWrapMode&&(this.$modified=!0,this.$resetRowCache(0),this.$updateWrapData(0,this.getLength()-1)))},initialValue:"auto"},firstLineNumber:{set:function(){this._signal("changeBreakpoint")
},initialValue:1},useWorker:{set:function(a){this.$useWorker=a,this.$stopWorker(),a&&this.$startWorker()},initialValue:!0},useSoftTabs:{initialValue:!0},tabSize:{set:function(a){isNaN(a)||this.$tabSize===a||(this.$modified=!0,this.$rowLengthCache=[],this.$tabSize=a,this._signal("changeTabSize"))},initialValue:4,handlesSet:!0},overwrite:{set:function(){this._signal("changeOverwrite")},initialValue:!1},newLineMode:{set:function(a){this.doc.setNewLineMode(a)},get:function(){return this.doc.getNewLineMode()},handlesSet:!0},mode:{set:function(a){this.setMode(a)
},get:function(){return this.$modeId}}}),b.EditSession=n}),ace.define("ace/commands/command_manager",["require","exports","module","ace/lib/oop","ace/keyboard/hash_handler","ace/lib/event_emitter"],function(a,b){var d=a("../lib/oop"),e=a("../keyboard/hash_handler").HashHandler,f=a("../lib/event_emitter").EventEmitter,g=function(a,b){e.call(this,b,a),this.byName=this.commands,this.setDefaultHandler("exec",function(a){return a.command.exec(a.editor,a.args||{})})};d.inherits(g,e),function(){d.implement(this,f),this.exec=function(a,b,c){if("string"==typeof a&&(a=this.commands[a]),!a)return!1;
if(b&&b.$readOnly&&!a.readOnly)return!1;var d={editor:b,command:a,args:c},e=this._emit("exec",d);return this._signal("afterExec",d),e===!1?!1:!0},this.toggleRecording=function(a){return this.$inReplay?void 0:(a&&a._emit("changeStatus"),this.recording?(this.macro.pop(),this.removeEventListener("exec",this.$addCommandToMacro),this.macro.length||(this.macro=this.oldMacro),this.recording=!1):(this.$addCommandToMacro||(this.$addCommandToMacro=function(a){this.macro.push([a.command,a.args])}.bind(this)),this.oldMacro=this.macro,this.macro=[],this.on("exec",this.$addCommandToMacro),this.recording=!0))
},this.replay=function(a){if(!this.$inReplay&&this.macro){if(this.recording)return this.toggleRecording(a);try{this.$inReplay=!0,this.macro.forEach(function(b){"string"==typeof b?this.exec(b,a):this.exec(b[0],a,b[1])},this)}finally{this.$inReplay=!1}}},this.trimMacro=function(a){return a.map(function(a){return"string"!=typeof a[0]&&(a[0]=a[0].name),a[1]||(a=a[0]),a})}}.call(g.prototype),b.CommandManager=g}),ace.define("ace/keyboard/keybinding",["require","exports","module","ace/lib/keys","ace/lib/event"],function(a,b){var d=a("../lib/keys"),e=a("../lib/event"),f=function(a){this.$editor=a,this.$data={},this.$handlers=[],this.setDefaultHandler(a.commands)
};(function(){this.setDefaultHandler=function(a){this.removeKeyboardHandler(this.$defaultHandler),this.$defaultHandler=a,this.addKeyboardHandler(a,0),this.$data={editor:this.$editor}},this.setKeyboardHandler=function(a){var b=this.$handlers;if(b[b.length-1]!=a){for(;b[b.length-1]&&b[b.length-1]!=this.$defaultHandler;)this.removeKeyboardHandler(b[b.length-1]);this.addKeyboardHandler(a,1)}},this.addKeyboardHandler=function(a,b){if(a){"function"==typeof a&&!a.handleKeyboard&&(a.handleKeyboard=a);var c=this.$handlers.indexOf(a);
-1!=c&&this.$handlers.splice(c,1),void 0==b?this.$handlers.push(a):this.$handlers.splice(b,0,a),-1==c&&a.attach&&a.attach(this.$editor)}},this.removeKeyboardHandler=function(a){var b=this.$handlers.indexOf(a);return-1==b?!1:(this.$handlers.splice(b,1),a.detach&&a.detach(this.$editor),!0)},this.getKeyboardHandler=function(){return this.$handlers[this.$handlers.length-1]},this.$callKeyboardHandlers=function(a,b,c,d){for(var f,g=!1,h=this.$editor.commands,i=this.$handlers.length;i--&&(f=this.$handlers[i].handleKeyboard(this.$data,a,b,c,d),!(f&&f.command&&(g="null"==f.command?!0:h.exec(f.command,this.$editor,f.args,d),g&&d&&-1!=a&&1!=f.passEvent&&1!=f.command.passEvent&&e.stopEvent(d),g))););return g
},this.onCommandKey=function(a,b,c){var e=d.keyCodeToString(c);this.$callKeyboardHandlers(b,e,c,a)},this.onTextInput=function(a){var b=this.$callKeyboardHandlers(-1,a);b||this.$editor.commands.exec("insertstring",this.$editor,a)}}).call(f.prototype),b.KeyBinding=f}),ace.define("ace/keyboard/hash_handler",["require","exports","module","ace/lib/keys","ace/lib/useragent"],function(a,b){function d(a,b){if(this.platform=b||(f.isMac?"mac":"win"),this.commands={},this.commandKeyBinding={},this.__defineGetter__&&this.__defineSetter__&&"undefined"!=typeof console&&console.error){var c=!1,d=function(){c||(c=!0,console.error("commmandKeyBinding has too many m's. use commandKeyBinding"))
};this.__defineGetter__("commmandKeyBinding",function(){return d(),this.commandKeyBinding}),this.__defineSetter__("commmandKeyBinding",function(a){return d(),this.commandKeyBinding=a})}else this.commmandKeyBinding=this.commandKeyBinding;this.addCommands(a)}var e=a("../lib/keys"),f=a("../lib/useragent");(function(){this.addCommand=function(a){this.commands[a.name]&&this.removeCommand(a),this.commands[a.name]=a,a.bindKey&&this._buildKeyHash(a)},this.removeCommand=function(a){var b="string"==typeof a?a:a.name;a=this.commands[b],delete this.commands[b];
var c=this.commandKeyBinding;for(var d in c)for(var e in c[d])c[d][e]==a&&delete c[d][e]},this.bindKey=function(a,b){if(a){if("function"==typeof b)return this.addCommand({exec:b,bindKey:a,name:b.name||a}),void 0;var c=this.commandKeyBinding;a.split("|").forEach(function(a){var d=this.parseKeys(a,b),e=d.hashId;(c[e]||(c[e]={}))[d.key]=b},this)}},this.addCommands=function(a){a&&Object.keys(a).forEach(function(b){var c=a[b];if(c){if("string"==typeof c)return this.bindKey(c,b);"function"==typeof c&&(c={exec:c}),"object"==typeof c&&(c.name||(c.name=b),this.addCommand(c))
}},this)},this.removeCommands=function(a){Object.keys(a).forEach(function(b){this.removeCommand(a[b])},this)},this.bindKeys=function(a){Object.keys(a).forEach(function(b){this.bindKey(b,a[b])},this)},this._buildKeyHash=function(a){var b=a.bindKey;if(b){var c="string"==typeof b?b:b[this.platform];this.bindKey(c,a)}},this.parseKeys=function(a){-1!=a.indexOf(" ")&&(a=a.split(/\s+/).pop());var b=a.toLowerCase().split(/[\-\+]([\-\+])?/).filter(function(a){return a}),c=b.pop(),d=e[c];if(e.FUNCTION_KEYS[d])c=e.FUNCTION_KEYS[d].toLowerCase();
else{if(!b.length)return{key:c,hashId:-1};if(1==b.length&&"shift"==b[0])return{key:c.toUpperCase(),hashId:-1}}for(var f=0,g=b.length;g--;){var h=e.KEY_MODS[b[g]];if(null==h)return"undefined"!=typeof console&&console.error("invalid modifier "+b[g]+" in "+a),!1;f|=h}return{key:c,hashId:f}},this.findKeyCommand=function(a,b){var c=this.commandKeyBinding;return c[a]&&c[a][b]},this.handleKeyboard=function(a,b,c){return{command:this.findKeyCommand(b,c)}}}).call(d.prototype),b.HashHandler=d}),ace.define("ace/mouse/fold_handler",["require","exports","module"],function(a,b){function d(a){a.on("click",function(b){var c=b.getDocumentPosition(),d=a.session,e=d.getFoldAt(c.row,c.column,1);
e&&(b.getAccelKey()?d.removeFold(e):d.expandFold(e),b.stop())}),a.on("gutterclick",function(b){var c=a.renderer.$gutterLayer.getRegion(b);if("foldWidgets"==c){var d=b.getDocumentPosition().row,e=a.session;e.foldWidgets&&e.foldWidgets[d]&&a.session.onFoldWidgetClick(d,b),a.isFocused()||a.focus(),b.stop()}}),a.on("gutterdblclick",function(b){var c=a.renderer.$gutterLayer.getRegion(b);if("foldWidgets"==c){var d=b.getDocumentPosition().row,e=a.session,f=e.getParentFoldRangeData(d,!0),g=f.range||f.firstRange;if(g){d=g.start.row;
var h=e.getFoldAt(d,e.getLine(d).length,1);h?e.removeFold(h):(e.addFold("...",g),a.renderer.scrollCursorIntoView({row:g.start.row,column:0}))}b.stop()}})}b.FoldHandler=d}),ace.define("ace/commands/default_commands",["require","exports","module","ace/lib/lang","ace/config"],function(a,b){function d(a,b){return{win:a,mac:b}}var e=a("../lib/lang"),f=a("../config");b.commands=[{name:"showSettingsMenu",bindKey:d("Ctrl-,","Command-,"),exec:function(a){f.loadModule("ace/ext/settings_menu",function(b){b.init(a),a.showSettingsMenu()
})},readOnly:!0},{name:"goToNextError",bindKey:d("Alt-E","Ctrl-E"),exec:function(a){f.loadModule("ace/ext/error_marker",function(b){b.showErrorMarker(a,1)})},scrollIntoView:"animate",readOnly:!0},{name:"goToPreviousError",bindKey:d("Alt-Shift-E","Ctrl-Shift-E"),exec:function(a){f.loadModule("ace/ext/error_marker",function(b){b.showErrorMarker(a,-1)})},scrollIntoView:"animate",readOnly:!0},{name:"selectall",bindKey:d("Ctrl-A","Command-A"),exec:function(a){a.selectAll()},readOnly:!0},{name:"centerselection",bindKey:d(null,"Ctrl-L"),exec:function(a){a.centerSelection()
},readOnly:!0},{name:"gotoline",bindKey:d("Ctrl-L","Command-L"),exec:function(a){var b=parseInt(prompt("Enter line number:"),10);isNaN(b)||a.gotoLine(b)},readOnly:!0},{name:"fold",bindKey:d("Alt-L|Ctrl-F1","Command-Alt-L|Command-F1"),exec:function(a){a.session.toggleFold(!1)},scrollIntoView:"center",readOnly:!0},{name:"unfold",bindKey:d("Alt-Shift-L|Ctrl-Shift-F1","Command-Alt-Shift-L|Command-Shift-F1"),exec:function(a){a.session.toggleFold(!0)},scrollIntoView:"center",readOnly:!0},{name:"toggleFoldWidget",bindKey:d("F2","F2"),exec:function(a){a.session.toggleFoldWidget()
},scrollIntoView:"center",readOnly:!0},{name:"toggleParentFoldWidget",bindKey:d("Alt-F2","Alt-F2"),exec:function(a){a.session.toggleFoldWidget(!0)},scrollIntoView:"center",readOnly:!0},{name:"foldall",bindKey:d("Ctrl-Alt-0","Ctrl-Command-Option-0"),exec:function(a){a.session.foldAll()},scrollIntoView:"center",readOnly:!0},{name:"foldOther",bindKey:d("Alt-0","Command-Option-0"),exec:function(a){a.session.foldAll(),a.session.unfold(a.selection.getAllRanges())},scrollIntoView:"center",readOnly:!0},{name:"unfoldall",bindKey:d("Alt-Shift-0","Command-Option-Shift-0"),exec:function(a){a.session.unfold()
},scrollIntoView:"center",readOnly:!0},{name:"findnext",bindKey:d("Ctrl-K","Command-G"),exec:function(a){a.findNext()},readOnly:!0},{name:"findprevious",bindKey:d("Ctrl-Shift-K","Command-Shift-G"),exec:function(a){a.findPrevious()},readOnly:!0},{name:"selectOrFindNext",bindKey:d("ALt-K","Ctrl-G"),exec:function(a){a.selection.isEmpty()?a.selection.selectWord():a.findNext()},readOnly:!0},{name:"selectOrFindPrevious",bindKey:d("Alt-Shift-K","Ctrl-Shift-G"),exec:function(a){a.selection.isEmpty()?a.selection.selectWord():a.findPrevious()
},readOnly:!0},{name:"find",bindKey:d("Ctrl-F","Command-F"),exec:function(a){f.loadModule("ace/ext/searchbox",function(b){b.Search(a)})},readOnly:!0},{name:"overwrite",bindKey:"Insert",exec:function(a){a.toggleOverwrite()},readOnly:!0},{name:"selecttostart",bindKey:d("Ctrl-Shift-Home","Command-Shift-Up"),exec:function(a){a.getSelection().selectFileStart()},multiSelectAction:"forEach",readOnly:!0,scrollIntoView:"animate",aceCommandGroup:"fileJump"},{name:"gotostart",bindKey:d("Ctrl-Home","Command-Home|Command-Up"),exec:function(a){a.navigateFileStart()
},multiSelectAction:"forEach",readOnly:!0,scrollIntoView:"animate",aceCommandGroup:"fileJump"},{name:"selectup",bindKey:d("Shift-Up","Shift-Up"),exec:function(a){a.getSelection().selectUp()},multiSelectAction:"forEach",readOnly:!0},{name:"golineup",bindKey:d("Up","Up|Ctrl-P"),exec:function(a,b){a.navigateUp(b.times)},multiSelectAction:"forEach",readOnly:!0},{name:"selecttoend",bindKey:d("Ctrl-Shift-End","Command-Shift-Down"),exec:function(a){a.getSelection().selectFileEnd()},multiSelectAction:"forEach",readOnly:!0,scrollIntoView:"animate",aceCommandGroup:"fileJump"},{name:"gotoend",bindKey:d("Ctrl-End","Command-End|Command-Down"),exec:function(a){a.navigateFileEnd()
},multiSelectAction:"forEach",readOnly:!0,scrollIntoView:"animate",aceCommandGroup:"fileJump"},{name:"selectdown",bindKey:d("Shift-Down","Shift-Down"),exec:function(a){a.getSelection().selectDown()},multiSelectAction:"forEach",scrollIntoView:"cursor",readOnly:!0},{name:"golinedown",bindKey:d("Down","Down|Ctrl-N"),exec:function(a,b){a.navigateDown(b.times)},multiSelectAction:"forEach",scrollIntoView:"cursor",readOnly:!0},{name:"selectwordleft",bindKey:d("Ctrl-Shift-Left","Option-Shift-Left"),exec:function(a){a.getSelection().selectWordLeft()
},multiSelectAction:"forEach",scrollIntoView:"cursor",readOnly:!0},{name:"gotowordleft",bindKey:d("Ctrl-Left","Option-Left"),exec:function(a){a.navigateWordLeft()},multiSelectAction:"forEach",scrollIntoView:"cursor",readOnly:!0},{name:"selecttolinestart",bindKey:d("Alt-Shift-Left","Command-Shift-Left"),exec:function(a){a.getSelection().selectLineStart()},multiSelectAction:"forEach",scrollIntoView:"cursor",readOnly:!0},{name:"gotolinestart",bindKey:d("Alt-Left|Home","Command-Left|Home|Ctrl-A"),exec:function(a){a.navigateLineStart()
},multiSelectAction:"forEach",scrollIntoView:"cursor",readOnly:!0},{name:"selectleft",bindKey:d("Shift-Left","Shift-Left"),exec:function(a){a.getSelection().selectLeft()},multiSelectAction:"forEach",scrollIntoView:"cursor",readOnly:!0},{name:"gotoleft",bindKey:d("Left","Left|Ctrl-B"),exec:function(a,b){a.navigateLeft(b.times)},multiSelectAction:"forEach",scrollIntoView:"cursor",readOnly:!0},{name:"selectwordright",bindKey:d("Ctrl-Shift-Right","Option-Shift-Right"),exec:function(a){a.getSelection().selectWordRight()
},multiSelectAction:"forEach",scrollIntoView:"cursor",readOnly:!0},{name:"gotowordright",bindKey:d("Ctrl-Right","Option-Right"),exec:function(a){a.navigateWordRight()},multiSelectAction:"forEach",scrollIntoView:"cursor",readOnly:!0},{name:"selecttolineend",bindKey:d("Alt-Shift-Right","Command-Shift-Right"),exec:function(a){a.getSelection().selectLineEnd()},multiSelectAction:"forEach",scrollIntoView:"cursor",readOnly:!0},{name:"gotolineend",bindKey:d("Alt-Right|End","Command-Right|End|Ctrl-E"),exec:function(a){a.navigateLineEnd()
},multiSelectAction:"forEach",scrollIntoView:"cursor",readOnly:!0},{name:"selectright",bindKey:d("Shift-Right","Shift-Right"),exec:function(a){a.getSelection().selectRight()},multiSelectAction:"forEach",scrollIntoView:"cursor",readOnly:!0},{name:"gotoright",bindKey:d("Right","Right|Ctrl-F"),exec:function(a,b){a.navigateRight(b.times)},multiSelectAction:"forEach",scrollIntoView:"cursor",readOnly:!0},{name:"selectpagedown",bindKey:"Shift-PageDown",exec:function(a){a.selectPageDown()},readOnly:!0},{name:"pagedown",bindKey:d(null,"Option-PageDown"),exec:function(a){a.scrollPageDown()
},readOnly:!0},{name:"gotopagedown",bindKey:d("PageDown","PageDown|Ctrl-V"),exec:function(a){a.gotoPageDown()},readOnly:!0},{name:"selectpageup",bindKey:"Shift-PageUp",exec:function(a){a.selectPageUp()},readOnly:!0},{name:"pageup",bindKey:d(null,"Option-PageUp"),exec:function(a){a.scrollPageUp()},readOnly:!0},{name:"gotopageup",bindKey:"PageUp",exec:function(a){a.gotoPageUp()},readOnly:!0},{name:"scrollup",bindKey:d("Ctrl-Up",null),exec:function(a){a.renderer.scrollBy(0,-2*a.renderer.layerConfig.lineHeight)},readOnly:!0},{name:"scrolldown",bindKey:d("Ctrl-Down",null),exec:function(a){a.renderer.scrollBy(0,2*a.renderer.layerConfig.lineHeight)
},readOnly:!0},{name:"selectlinestart",bindKey:"Shift-Home",exec:function(a){a.getSelection().selectLineStart()},multiSelectAction:"forEach",scrollIntoView:"cursor",readOnly:!0},{name:"selectlineend",bindKey:"Shift-End",exec:function(a){a.getSelection().selectLineEnd()},multiSelectAction:"forEach",scrollIntoView:"cursor",readOnly:!0},{name:"togglerecording",bindKey:d("Ctrl-Alt-E","Command-Option-E"),exec:function(a){a.commands.toggleRecording(a)},readOnly:!0},{name:"replaymacro",bindKey:d("Ctrl-Shift-E","Command-Shift-E"),exec:function(a){a.commands.replay(a)
},readOnly:!0},{name:"jumptomatching",bindKey:d("Ctrl-P","Ctrl-Shift-P"),exec:function(a){a.jumpToMatching()},multiSelectAction:"forEach",readOnly:!0},{name:"selecttomatching",bindKey:d("Ctrl-Shift-P",null),exec:function(a){a.jumpToMatching(!0)},multiSelectAction:"forEach",readOnly:!0},{name:"cut",exec:function(a){var b=a.getSelectionRange();a._emit("cut",b),a.selection.isEmpty()||(a.session.remove(b),a.clearSelection())},scrollIntoView:"cursor",multiSelectAction:"forEach"},{name:"removeline",bindKey:d("Ctrl-D","Command-D"),exec:function(a){a.removeLines()
},scrollIntoView:"cursor",multiSelectAction:"forEachLine"},{name:"duplicateSelection",bindKey:d("Ctrl-Shift-D","Command-Shift-D"),exec:function(a){a.duplicateSelection()},scrollIntoView:"cursor",multiSelectAction:"forEach"},{name:"sortlines",bindKey:d("Ctrl-Alt-S","Command-Alt-S"),exec:function(a){a.sortLines()},scrollIntoView:"selection",multiSelectAction:"forEachLine"},{name:"togglecomment",bindKey:d("Ctrl-/","Command-/"),exec:function(a){a.toggleCommentLines()},multiSelectAction:"forEachLine",scrollIntoView:"selectionPart"},{name:"toggleBlockComment",bindKey:d("Ctrl-Shift-/","Command-Shift-/"),exec:function(a){a.toggleBlockComment()
},multiSelectAction:"forEach",scrollIntoView:"selectionPart"},{name:"modifyNumberUp",bindKey:d("Ctrl-Shift-Up","Alt-Shift-Up"),exec:function(a){a.modifyNumber(1)},multiSelectAction:"forEach"},{name:"modifyNumberDown",bindKey:d("Ctrl-Shift-Down","Alt-Shift-Down"),exec:function(a){a.modifyNumber(-1)},multiSelectAction:"forEach"},{name:"replace",bindKey:d("Ctrl-H","Command-Option-F"),exec:function(a){f.loadModule("ace/ext/searchbox",function(b){b.Search(a,!0)})}},{name:"undo",bindKey:d("Ctrl-Z","Command-Z"),exec:function(a){a.undo()
}},{name:"redo",bindKey:d("Ctrl-Shift-Z|Ctrl-Y","Command-Shift-Z|Command-Y"),exec:function(a){a.redo()}},{name:"copylinesup",bindKey:d("Alt-Shift-Up","Command-Option-Up"),exec:function(a){a.copyLinesUp()},scrollIntoView:"cursor"},{name:"movelinesup",bindKey:d("Alt-Up","Option-Up"),exec:function(a){a.moveLinesUp()},scrollIntoView:"cursor"},{name:"copylinesdown",bindKey:d("Alt-Shift-Down","Command-Option-Down"),exec:function(a){a.copyLinesDown()},scrollIntoView:"cursor"},{name:"movelinesdown",bindKey:d("Alt-Down","Option-Down"),exec:function(a){a.moveLinesDown()
},scrollIntoView:"cursor"},{name:"del",bindKey:d("Delete","Delete|Ctrl-D|Shift-Delete"),exec:function(a){a.remove("right")},multiSelectAction:"forEach",scrollIntoView:"cursor"},{name:"backspace",bindKey:d("Shift-Backspace|Backspace","Ctrl-Backspace|Shift-Backspace|Backspace|Ctrl-H"),exec:function(a){a.remove("left")},multiSelectAction:"forEach",scrollIntoView:"cursor"},{name:"cut_or_delete",bindKey:d("Shift-Delete",null),exec:function(a){return a.selection.isEmpty()?(a.remove("left"),void 0):!1},multiSelectAction:"forEach",scrollIntoView:"cursor"},{name:"removetolinestart",bindKey:d("Alt-Backspace","Command-Backspace"),exec:function(a){a.removeToLineStart()
},multiSelectAction:"forEach",scrollIntoView:"cursor"},{name:"removetolineend",bindKey:d("Alt-Delete","Ctrl-K"),exec:function(a){a.removeToLineEnd()},multiSelectAction:"forEach",scrollIntoView:"cursor"},{name:"removewordleft",bindKey:d("Ctrl-Backspace","Alt-Backspace|Ctrl-Alt-Backspace"),exec:function(a){a.removeWordLeft()},multiSelectAction:"forEach",scrollIntoView:"cursor"},{name:"removewordright",bindKey:d("Ctrl-Delete","Alt-Delete"),exec:function(a){a.removeWordRight()},multiSelectAction:"forEach",scrollIntoView:"cursor"},{name:"outdent",bindKey:d("Shift-Tab","Shift-Tab"),exec:function(a){a.blockOutdent()
},multiSelectAction:"forEach",scrollIntoView:"selectionPart"},{name:"indent",bindKey:d("Tab","Tab"),exec:function(a){a.indent()},multiSelectAction:"forEach",scrollIntoView:"selectionPart"},{name:"blockoutdent",bindKey:d("Ctrl-[","Ctrl-["),exec:function(a){a.blockOutdent()},multiSelectAction:"forEachLine",scrollIntoView:"selectionPart"},{name:"blockindent",bindKey:d("Ctrl-]","Ctrl-]"),exec:function(a){a.blockIndent()},multiSelectAction:"forEachLine",scrollIntoView:"selectionPart"},{name:"insertstring",exec:function(a,b){a.insert(b)
},multiSelectAction:"forEach",scrollIntoView:"cursor"},{name:"inserttext",exec:function(a,b){a.insert(e.stringRepeat(b.text||"",b.times||1))},multiSelectAction:"forEach",scrollIntoView:"cursor"},{name:"splitline",bindKey:d(null,"Ctrl-O"),exec:function(a){a.splitLine()},multiSelectAction:"forEach",scrollIntoView:"cursor"},{name:"transposeletters",bindKey:d("Ctrl-T","Ctrl-T"),exec:function(a){a.transposeLetters()},multiSelectAction:function(a){a.transposeSelections(1)},scrollIntoView:"cursor"},{name:"touppercase",bindKey:d("Ctrl-U","Ctrl-U"),exec:function(a){a.toUpperCase()
},multiSelectAction:"forEach",scrollIntoView:"cursor"},{name:"tolowercase",bindKey:d("Ctrl-Shift-U","Ctrl-Shift-U"),exec:function(a){a.toLowerCase()},multiSelectAction:"forEach",scrollIntoView:"cursor"}]}),ace.define("ace/lib/event_emitter",["require","exports","module"],function(a,b){var d={},e=function(){this.propagationStopped=!0},f=function(){this.defaultPrevented=!0};d._emit=d._dispatchEvent=function(a,b){this._eventRegistry||(this._eventRegistry={}),this._defaultHandlers||(this._defaultHandlers={});var c=this._eventRegistry[a]||[],d=this._defaultHandlers[a];
if(c.length||d){"object"==typeof b&&b||(b={}),b.type||(b.type=a),b.stopPropagation||(b.stopPropagation=e),b.preventDefault||(b.preventDefault=f),c=c.slice();for(var g=0;g<c.length&&(c[g](b,this),!b.propagationStopped);g++);return d&&!b.defaultPrevented?d(b,this):void 0}},d._signal=function(a,b){var c=(this._eventRegistry||{})[a];if(c){c=c.slice();for(var d=0;d<c.length;d++)c[d](b,this)}},d.once=function(a,b){var c=this;b&&this.addEventListener(a,function d(){c.removeEventListener(a,d),b.apply(null,arguments)
})},d.setDefaultHandler=function(a,b){var c=this._defaultHandlers;if(c||(c=this._defaultHandlers={_disabled_:{}}),c[a]){var d=c[a],e=c._disabled_[a];e||(c._disabled_[a]=e=[]),e.push(d);var f=e.indexOf(b);-1!=f&&e.splice(f,1)}c[a]=b},d.removeDefaultHandler=function(a,b){var c=this._defaultHandlers;if(c){var d=c._disabled_[a];if(c[a]==b){{c[a]}d&&this.setDefaultHandler(a,d.pop())}else if(d){var f=d.indexOf(b);-1!=f&&d.splice(f,1)}}},d.on=d.addEventListener=function(a,b,c){this._eventRegistry=this._eventRegistry||{};
var d=this._eventRegistry[a];return d||(d=this._eventRegistry[a]=[]),-1==d.indexOf(b)&&d[c?"unshift":"push"](b),b},d.off=d.removeListener=d.removeEventListener=function(a,b){this._eventRegistry=this._eventRegistry||{};var c=this._eventRegistry[a];if(c){var d=c.indexOf(b);-1!==d&&c.splice(d,1)}},d.removeAllListeners=function(a){this._eventRegistry&&(this._eventRegistry[a]=[])},b.EventEmitter=d}),ace.define("ace/undomanager",["require","exports","module"],function(a,b){var d=function(){this.reset()};(function(){this.execute=function(a){var b=a.args[0];
this.$doc=a.args[1],a.merge&&this.hasUndo()&&(this.dirtyCounter--,b=this.$undoStack.pop().concat(b)),this.$undoStack.push(b),this.$redoStack=[],this.dirtyCounter<0&&(this.dirtyCounter=0/0),this.dirtyCounter++},this.undo=function(a){var b=this.$undoStack.pop(),c=null;return b&&(c=this.$doc.undoChanges(b,a),this.$redoStack.push(b),this.dirtyCounter--),c},this.redo=function(a){var b=this.$redoStack.pop(),c=null;return b&&(c=this.$doc.redoChanges(b,a),this.$undoStack.push(b),this.dirtyCounter++),c},this.reset=function(){this.$undoStack=[],this.$redoStack=[],this.dirtyCounter=0
},this.hasUndo=function(){return this.$undoStack.length>0},this.hasRedo=function(){return this.$redoStack.length>0},this.markClean=function(){this.dirtyCounter=0},this.isClean=function(){return 0===this.dirtyCounter}}).call(d.prototype),b.UndoManager=d}),ace.define("ace/lib/net",["require","exports","module","ace/lib/dom"],function(a,b){var d=a("./dom");b.get=function(a,b){var c=new XMLHttpRequest;c.open("GET",a,!0),c.onreadystatechange=function(){4===c.readyState&&b(c.responseText)},c.send(null)},b.loadScript=function(a,b){var c=d.getDocumentHead(),e=document.createElement("script");
e.src=a,c.appendChild(e),e.onload=e.onreadystatechange=function(a,c){(c||!e.readyState||"loaded"==e.readyState||"complete"==e.readyState)&&(e=e.onload=e.onreadystatechange=null,c||b())}}}),ace.define("ace/virtual_renderer",["require","exports","module","ace/lib/oop","ace/lib/dom","ace/config","ace/layer/gutter","ace/layer/marker","ace/layer/text","ace/layer/cursor","ace/scrollbar","ace/renderloop","ace/layer/font_metrics","ace/lib/event_emitter"],function(a,b){var d=a("./lib/oop"),e=a("./lib/dom"),f=a("./config"),g=a("./layer/gutter").Gutter,h=a("./layer/marker").Marker,i=a("./layer/text").Text,j=a("./layer/cursor").Cursor,k=a("./scrollbar").HScrollBar,l=a("./scrollbar").VScrollBar,m=a("./renderloop").RenderLoop,n=a("./layer/font_metrics").FontMetrics,o=a("./lib/event_emitter").EventEmitter,p='.ace_editor {position: relative;overflow: hidden;font-family: \'Monaco\', \'Menlo\', \'Ubuntu Mono\', \'Consolas\', \'source-code-pro\', monospace;font-size: 12px;line-height: normal;direction: ltr;}.ace_scroller {position: absolute;overflow: hidden;top: 0;bottom: 0;background-color: inherit;-ms-user-select: none;-moz-user-select: none;-webkit-user-select: none;user-select: none;}.ace_content {position: absolute;-moz-box-sizing: border-box;-webkit-box-sizing: border-box;box-sizing: border-box;cursor: text;min-width: 100%;}.ace_dragging, .ace_dragging * {cursor: move !important;}.ace_dragging .ace_scroller:before{position: absolute;top: 0;left: 0;right: 0;bottom: 0;content: \'\';background: rgba(250, 250, 250, 0.01);z-index: 1000;}.ace_dragging.ace_dark .ace_scroller:before{background: rgba(0, 0, 0, 0.01);}.ace_selecting, .ace_selecting * {cursor: text !important;}.ace_gutter {position: absolute;overflow : hidden;width: auto;top: 0;bottom: 0;left: 0;cursor: default;z-index: 4;-ms-user-select: none;-moz-user-select: none;-webkit-user-select: none;user-select: none;}.ace_gutter-active-line {position: absolute;left: 0;right: 0;}.ace_scroller.ace_scroll-left {box-shadow: 17px 0 16px -16px rgba(0, 0, 0, 0.4) inset;}.ace_gutter-cell {padding-left: 19px;padding-right: 6px;background-repeat: no-repeat;}.ace_gutter-cell.ace_error {background-image: url("data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABAAAAAQCAMAAAAoLQ9TAAABOFBMVEX/////////QRswFAb/Ui4wFAYwFAYwFAaWGAfDRymzOSH/PxswFAb/SiUwFAYwFAbUPRvjQiDllog5HhHdRybsTi3/Tyv9Tir+Syj/UC3////XurebMBIwFAb/RSHbPx/gUzfdwL3kzMivKBAwFAbbvbnhPx66NhowFAYwFAaZJg8wFAaxKBDZurf/RB6mMxb/SCMwFAYwFAbxQB3+RB4wFAb/Qhy4Oh+4QifbNRcwFAYwFAYwFAb/QRzdNhgwFAYwFAbav7v/Uy7oaE68MBK5LxLewr/r2NXewLswFAaxJw4wFAbkPRy2PyYwFAaxKhLm1tMwFAazPiQwFAaUGAb/QBrfOx3bvrv/VC/maE4wFAbRPBq6MRO8Qynew8Dp2tjfwb0wFAbx6eju5+by6uns4uH9/f36+vr/GkHjAAAAYnRSTlMAGt+64rnWu/bo8eAA4InH3+DwoN7j4eLi4xP99Nfg4+b+/u9B/eDs1MD1mO7+4PHg2MXa347g7vDizMLN4eG+Pv7i5evs/v79yu7S3/DV7/498Yv24eH+4ufQ3Ozu/v7+y13sRqwAAADLSURBVHjaZc/XDsFgGIBhtDrshlitmk2IrbHFqL2pvXf/+78DPokj7+Fz9qpU/9UXJIlhmPaTaQ6QPaz0mm+5gwkgovcV6GZzd5JtCQwgsxoHOvJO15kleRLAnMgHFIESUEPmawB9ngmelTtipwwfASilxOLyiV5UVUyVAfbG0cCPHig+GBkzAENHS0AstVF6bacZIOzgLmxsHbt2OecNgJC83JERmePUYq8ARGkJx6XtFsdddBQgZE2nPR6CICZhawjA4Fb/chv+399kfR+MMMDGOQAAAABJRU5ErkJggg==");background-repeat: no-repeat;background-position: 2px center;}.ace_gutter-cell.ace_warning {background-image: url("data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABAAAAAQCAMAAAAoLQ9TAAAAmVBMVEX///8AAAD///8AAAAAAABPSzb/5sAAAAB/blH/73z/ulkAAAAAAAD85pkAAAAAAAACAgP/vGz/rkDerGbGrV7/pkQICAf////e0IsAAAD/oED/qTvhrnUAAAD/yHD/njcAAADuv2r/nz//oTj/p064oGf/zHAAAAA9Nir/tFIAAAD/tlTiuWf/tkIAAACynXEAAAAAAAAtIRW7zBpBAAAAM3RSTlMAABR1m7RXO8Ln31Z36zT+neXe5OzooRDfn+TZ4p3h2hTf4t3k3ucyrN1K5+Xaks52Sfs9CXgrAAAAjklEQVR42o3PbQ+CIBQFYEwboPhSYgoYunIqqLn6/z8uYdH8Vmdnu9vz4WwXgN/xTPRD2+sgOcZjsge/whXZgUaYYvT8QnuJaUrjrHUQreGczuEafQCO/SJTufTbroWsPgsllVhq3wJEk2jUSzX3CUEDJC84707djRc5MTAQxoLgupWRwW6UB5fS++NV8AbOZgnsC7BpEAAAAABJRU5ErkJggg==");background-position: 2px center;}.ace_gutter-cell.ace_info {background-image: url("data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABAAAAAQCAAAAAA6mKC9AAAAGXRFWHRTb2Z0d2FyZQBBZG9iZSBJbWFnZVJlYWR5ccllPAAAAAJ0Uk5TAAB2k804AAAAPklEQVQY02NgIB68QuO3tiLznjAwpKTgNyDbMegwisCHZUETUZV0ZqOquBpXj2rtnpSJT1AEnnRmL2OgGgAAIKkRQap2htgAAAAASUVORK5CYII=");background-position: 2px center;}.ace_dark .ace_gutter-cell.ace_info {background-image: url("data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABAAAAAQBAMAAADt3eJSAAAAJFBMVEUAAAChoaGAgIAqKiq+vr6tra1ZWVmUlJSbm5s8PDxubm56enrdgzg3AAAAAXRSTlMAQObYZgAAAClJREFUeNpjYMAPdsMYHegyJZFQBlsUlMFVCWUYKkAZMxZAGdxlDMQBAG+TBP4B6RyJAAAAAElFTkSuQmCC");}.ace_scrollbar {position: absolute;right: 0;bottom: 0;z-index: 6;}.ace_scrollbar-inner {position: absolute;cursor: text;left: 0;top: 0;}.ace_scrollbar-v{overflow-x: hidden;overflow-y: scroll;top: 0;}.ace_scrollbar-h {overflow-x: scroll;overflow-y: hidden;left: 0;}.ace_print-margin {position: absolute;height: 100%;}.ace_text-input {position: absolute;z-index: 0;width: 0.5em;height: 1em;opacity: 0;background: transparent;-moz-appearance: none;appearance: none;border: none;resize: none;outline: none;overflow: hidden;font: inherit;padding: 0 1px;margin: 0 -1px;text-indent: -1em;-ms-user-select: text;-moz-user-select: text;-webkit-user-select: text;user-select: text;}.ace_text-input.ace_composition {background: #f8f8f8;color: #111;z-index: 1000;opacity: 1;text-indent: 0;}.ace_layer {z-index: 1;position: absolute;overflow: hidden;white-space: pre;height: 100%;width: 100%;-moz-box-sizing: border-box;-webkit-box-sizing: border-box;box-sizing: border-box;/* setting pointer-events: auto; on node under the mouse, which changesduring scroll, will break mouse wheel scrolling in Safari */pointer-events: none;}.ace_gutter-layer {position: relative;width: auto;text-align: right;pointer-events: auto;}.ace_text-layer {font: inherit !important;}.ace_cjk {display: inline-block;text-align: center;}.ace_cursor-layer {z-index: 4;}.ace_cursor {z-index: 4;position: absolute;-moz-box-sizing: border-box;-webkit-box-sizing: border-box;box-sizing: border-box;border-left: 2px solid}.ace_slim-cursors .ace_cursor {border-left-width: 1px;}.ace_overwrite-cursors .ace_cursor {border-left-width: 0px;border-bottom: 1px solid;}.ace_hidden-cursors .ace_cursor {opacity: 0.2;}.ace_smooth-blinking .ace_cursor {-moz-transition: opacity 0.18s;-webkit-transition: opacity 0.18s;-o-transition: opacity 0.18s;-ms-transition: opacity 0.18s;transition: opacity 0.18s;}.ace_editor.ace_multiselect .ace_cursor {border-left-width: 1px;}.ace_marker-layer .ace_step, .ace_marker-layer .ace_stack {position: absolute;z-index: 3;}.ace_marker-layer .ace_selection {position: absolute;z-index: 5;}.ace_marker-layer .ace_bracket {position: absolute;z-index: 6;}.ace_marker-layer .ace_active-line {position: absolute;z-index: 2;}.ace_marker-layer .ace_selected-word {position: absolute;z-index: 4;-moz-box-sizing: border-box;-webkit-box-sizing: border-box;box-sizing: border-box;}.ace_line .ace_fold {-moz-box-sizing: border-box;-webkit-box-sizing: border-box;box-sizing: border-box;display: inline-block;height: 11px;margin-top: -2px;vertical-align: middle;background-image:url("data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABEAAAAJCAYAAADU6McMAAAAGXRFWHRTb2Z0d2FyZQBBZG9iZSBJbWFnZVJlYWR5ccllPAAAAJpJREFUeNpi/P//PwOlgAXGYGRklAVSokD8GmjwY1wasKljQpYACtpCFeADcHVQfQyMQAwzwAZI3wJKvCLkfKBaMSClBlR7BOQikCFGQEErIH0VqkabiGCAqwUadAzZJRxQr/0gwiXIal8zQQPnNVTgJ1TdawL0T5gBIP1MUJNhBv2HKoQHHjqNrA4WO4zY0glyNKLT2KIfIMAAQsdgGiXvgnYAAAAASUVORK5CYII="),url("data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAA3CAYAAADNNiA5AAAAGXRFWHRTb2Z0d2FyZQBBZG9iZSBJbWFnZVJlYWR5ccllPAAAACJJREFUeNpi+P//fxgTAwPDBxDxD078RSX+YeEyDFMCIMAAI3INmXiwf2YAAAAASUVORK5CYII=");background-repeat: no-repeat, repeat-x;background-position: center center, top left;color: transparent;border: 1px solid black;-moz-border-radius: 2px;-webkit-border-radius: 2px;border-radius: 2px;cursor: pointer;pointer-events: auto;}.ace_dark .ace_fold {}.ace_fold:hover{background-image:url("data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABEAAAAJCAYAAADU6McMAAAAGXRFWHRTb2Z0d2FyZQBBZG9iZSBJbWFnZVJlYWR5ccllPAAAAJpJREFUeNpi/P//PwOlgAXGYGRklAVSokD8GmjwY1wasKljQpYACtpCFeADcHVQfQyMQAwzwAZI3wJKvCLkfKBaMSClBlR7BOQikCFGQEErIH0VqkabiGCAqwUadAzZJRxQr/0gwiXIal8zQQPnNVTgJ1TdawL0T5gBIP1MUJNhBv2HKoQHHjqNrA4WO4zY0glyNKLT2KIfIMAAQsdgGiXvgnYAAAAASUVORK5CYII="),url("data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAA3CAYAAADNNiA5AAAAGXRFWHRTb2Z0d2FyZQBBZG9iZSBJbWFnZVJlYWR5ccllPAAAACBJREFUeNpi+P//fz4TAwPDZxDxD5X4i5fLMEwJgAADAEPVDbjNw87ZAAAAAElFTkSuQmCC");}.ace_tooltip {background-color: #FFF;background-image: -webkit-linear-gradient(top, transparent, rgba(0, 0, 0, 0.1));background-image: linear-gradient(to bottom, transparent, rgba(0, 0, 0, 0.1));border: 1px solid gray;border-radius: 1px;box-shadow: 0 1px 2px rgba(0, 0, 0, 0.3);color: black;display: block;max-width: 100%;padding: 3px 4px;position: fixed;z-index: 999999;-moz-box-sizing: border-box;-webkit-box-sizing: border-box;box-sizing: border-box;cursor: default;white-space: pre;word-wrap: break-word;line-height: normal;font-style: normal;font-weight: normal;letter-spacing: normal;pointer-events: none;}.ace_folding-enabled > .ace_gutter-cell {padding-right: 13px;}.ace_fold-widget {-moz-box-sizing: border-box;-webkit-box-sizing: border-box;box-sizing: border-box;margin: 0 -12px 0 1px;display: none;width: 11px;vertical-align: top;background-image: url("data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAUAAAAFCAYAAACNbyblAAAANElEQVR42mWKsQ0AMAzC8ixLlrzQjzmBiEjp0A6WwBCSPgKAXoLkqSot7nN3yMwR7pZ32NzpKkVoDBUxKAAAAABJRU5ErkJggg==");background-repeat: no-repeat;background-position: center;border-radius: 3px;border: 1px solid transparent;cursor: pointer;}.ace_folding-enabled .ace_fold-widget {display: inline-block;   }.ace_fold-widget.ace_end {background-image: url("data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAUAAAAFCAYAAACNbyblAAAANElEQVR42m3HwQkAMAhD0YzsRchFKI7sAikeWkrxwScEB0nh5e7KTPWimZki4tYfVbX+MNl4pyZXejUO1QAAAABJRU5ErkJggg==");}.ace_fold-widget.ace_closed {background-image: url("data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAMAAAAGCAYAAAAG5SQMAAAAOUlEQVR42jXKwQkAMAgDwKwqKD4EwQ26sSOkVWjgIIHAzPiCgaqiqnJHZnKICBERHN194O5b9vbLuAVRL+l0YWnZAAAAAElFTkSuQmCCXA==");}.ace_fold-widget:hover {border: 1px solid rgba(0, 0, 0, 0.3);background-color: rgba(255, 255, 255, 0.2);-moz-box-shadow: 0 1px 1px rgba(255, 255, 255, 0.7);-webkit-box-shadow: 0 1px 1px rgba(255, 255, 255, 0.7);box-shadow: 0 1px 1px rgba(255, 255, 255, 0.7);}.ace_fold-widget:active {border: 1px solid rgba(0, 0, 0, 0.4);background-color: rgba(0, 0, 0, 0.05);-moz-box-shadow: 0 1px 1px rgba(255, 255, 255, 0.8);-webkit-box-shadow: 0 1px 1px rgba(255, 255, 255, 0.8);box-shadow: 0 1px 1px rgba(255, 255, 255, 0.8);}/*** Dark version for fold widgets*/.ace_dark .ace_fold-widget {background-image: url("data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAUAAAAFCAYAAACNbyblAAAAHklEQVQIW2P4//8/AzoGEQ7oGCaLLAhWiSwB146BAQCSTPYocqT0AAAAAElFTkSuQmCC");}.ace_dark .ace_fold-widget.ace_end {background-image: url("data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAUAAAAFCAYAAACNbyblAAAAH0lEQVQIW2P4//8/AxQ7wNjIAjDMgC4AxjCVKBirIAAF0kz2rlhxpAAAAABJRU5ErkJggg==");}.ace_dark .ace_fold-widget.ace_closed {background-image: url("data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAMAAAAFCAYAAACAcVaiAAAAHElEQVQIW2P4//+/AxAzgDADlOOAznHAKgPWAwARji8UIDTfQQAAAABJRU5ErkJggg==");}.ace_dark .ace_fold-widget:hover {box-shadow: 0 1px 1px rgba(255, 255, 255, 0.2);background-color: rgba(255, 255, 255, 0.1);}.ace_dark .ace_fold-widget:active {-moz-box-shadow: 0 1px 1px rgba(255, 255, 255, 0.2);-webkit-box-shadow: 0 1px 1px rgba(255, 255, 255, 0.2);box-shadow: 0 1px 1px rgba(255, 255, 255, 0.2);}.ace_fold-widget.ace_invalid {background-color: #FFB4B4;border-color: #DE5555;}.ace_fade-fold-widgets .ace_fold-widget {-moz-transition: opacity 0.4s ease 0.05s;-webkit-transition: opacity 0.4s ease 0.05s;-o-transition: opacity 0.4s ease 0.05s;-ms-transition: opacity 0.4s ease 0.05s;transition: opacity 0.4s ease 0.05s;opacity: 0;}.ace_fade-fold-widgets:hover .ace_fold-widget {-moz-transition: opacity 0.05s ease 0.05s;-webkit-transition: opacity 0.05s ease 0.05s;-o-transition: opacity 0.05s ease 0.05s;-ms-transition: opacity 0.05s ease 0.05s;transition: opacity 0.05s ease 0.05s;opacity:1;}.ace_underline {text-decoration: underline;}.ace_bold {font-weight: bold;}.ace_nobold .ace_bold {font-weight: normal;}.ace_italic {font-style: italic;}.ace_error-marker {background-color: rgba(255, 0, 0,0.2);position: absolute;z-index: 9;}.ace_highlight-marker {background-color: rgba(255, 255, 0,0.2);position: absolute;z-index: 8;}';
e.importCssString(p,"ace_editor");var q=function(a,b){var c=this;this.container=a||e.createElement("div"),this.$keepTextAreaAtCursor=!0,e.addCssClass(this.container,"ace_editor"),this.setTheme(b),this.$gutter=e.createElement("div"),this.$gutter.className="ace_gutter",this.container.appendChild(this.$gutter),this.scroller=e.createElement("div"),this.scroller.className="ace_scroller",this.container.appendChild(this.scroller),this.content=e.createElement("div"),this.content.className="ace_content",this.scroller.appendChild(this.content),this.$gutterLayer=new g(this.$gutter),this.$gutterLayer.on("changeGutterWidth",this.onGutterResize.bind(this)),this.$markerBack=new h(this.content);
var d=this.$textLayer=new i(this.content);this.canvas=d.element,this.$markerFront=new h(this.content),this.$cursorLayer=new j(this.content),this.$horizScroll=!1,this.$vScroll=!1,this.scrollBar=this.scrollBarV=new l(this.container,this),this.scrollBarH=new k(this.container,this),this.scrollBarV.addEventListener("scroll",function(a){c.$scrollAnimation||c.session.setScrollTop(a.data-c.scrollMargin.top)}),this.scrollBarH.addEventListener("scroll",function(a){c.$scrollAnimation||c.session.setScrollLeft(a.data-c.scrollMargin.left)
}),this.scrollTop=0,this.scrollLeft=0,this.cursorPos={row:0,column:0},this.$fontMetrics=new n(this.container,500),this.$textLayer.$setFontMetrics(this.$fontMetrics),this.$textLayer.addEventListener("changeCharacterSize",function(a){c.updateCharacterSize(),c.onResize(!0,c.gutterWidth,c.$size.width,c.$size.height),c._signal("changeCharacterSize",a)}),this.$size={width:0,height:0,scrollerHeight:0,scrollerWidth:0,$dirty:!0},this.layerConfig={width:1,padding:0,firstRow:0,firstRowScreen:0,lastRow:0,lineHeight:0,characterWidth:0,minHeight:1,maxHeight:1,offset:0,height:1,gutterOffset:1},this.scrollMargin={left:0,right:0,top:0,bottom:0,v:0,h:0},this.$loop=new m(this.$renderChanges.bind(this),this.container.ownerDocument.defaultView),this.$loop.schedule(this.CHANGE_FULL),this.updateCharacterSize(),this.setPadding(4),f.resetOptions(this),f._emit("renderer",this)
};(function(){this.CHANGE_CURSOR=1,this.CHANGE_MARKER=2,this.CHANGE_GUTTER=4,this.CHANGE_SCROLL=8,this.CHANGE_LINES=16,this.CHANGE_TEXT=32,this.CHANGE_SIZE=64,this.CHANGE_MARKER_BACK=128,this.CHANGE_MARKER_FRONT=256,this.CHANGE_FULL=512,this.CHANGE_H_SCROLL=1024,d.implement(this,o),this.updateCharacterSize=function(){this.$textLayer.allowBoldFonts!=this.$allowBoldFonts&&(this.$allowBoldFonts=this.$textLayer.allowBoldFonts,this.setStyle("ace_nobold",!this.$allowBoldFonts)),this.layerConfig.characterWidth=this.characterWidth=this.$textLayer.getCharacterWidth(),this.layerConfig.lineHeight=this.lineHeight=this.$textLayer.getLineHeight(),this.$updatePrintMargin()
},this.setSession=function(a){this.session&&this.session.doc.off("changeNewLineMode",this.onChangeNewLineMode),this.session=a,a&&(this.scrollMargin.top&&a.getScrollTop()<=0&&a.setScrollTop(-this.scrollMargin.top),this.$cursorLayer.setSession(a),this.$markerBack.setSession(a),this.$markerFront.setSession(a),this.$gutterLayer.setSession(a),this.$textLayer.setSession(a),this.$loop.schedule(this.CHANGE_FULL),this.session.$setFontMetrics(this.$fontMetrics),this.onChangeNewLineMode=this.onChangeNewLineMode.bind(this),this.onChangeNewLineMode(),this.session.doc.on("changeNewLineMode",this.onChangeNewLineMode))
},this.updateLines=function(a,b){void 0===b&&(b=1/0),this.$changedLines?(this.$changedLines.firstRow>a&&(this.$changedLines.firstRow=a),this.$changedLines.lastRow<b&&(this.$changedLines.lastRow=b)):this.$changedLines={firstRow:a,lastRow:b},this.$changedLines.firstRow>this.layerConfig.lastRow||this.$changedLines.lastRow<this.layerConfig.firstRow||this.$loop.schedule(this.CHANGE_LINES)},this.onChangeNewLineMode=function(){this.$loop.schedule(this.CHANGE_TEXT),this.$textLayer.$updateEolChar()},this.onChangeTabSize=function(){this.$loop.schedule(this.CHANGE_TEXT|this.CHANGE_MARKER),this.$textLayer.onChangeTabSize()
},this.updateText=function(){this.$loop.schedule(this.CHANGE_TEXT)},this.updateFull=function(a){a?this.$renderChanges(this.CHANGE_FULL,!0):this.$loop.schedule(this.CHANGE_FULL)},this.updateFontSize=function(){this.$textLayer.checkForSizeChanges()},this.$changes=0,this.$updateSizeAsync=function(){this.$loop.pending?this.$size.$dirty=!0:this.onResize()},this.onResize=function(a,b,c,d){if(!(this.resizing>2)){this.resizing>0?this.resizing++:this.resizing=a?1:0;var e=this.container;d||(d=e.clientHeight||e.scrollHeight),c||(c=e.clientWidth||e.scrollWidth);
var f=this.$updateCachedSize(a,b,c,d);return this.$size.scrollerHeight&&(c||d)?(a&&(this.$gutterLayer.$padding=null),a?this.$renderChanges(f|this.$changes,!0):this.$loop.schedule(f|this.$changes),this.resizing&&(this.resizing=0),void 0):this.resizing=0}},this.$updateCachedSize=function(a,b,c,d){d-=this.$extraHeight||0;var e=0,f=this.$size,g={width:f.width,height:f.height,scrollerHeight:f.scrollerHeight,scrollerWidth:f.scrollerWidth};return d&&(a||f.height!=d)&&(f.height=d,e|=this.CHANGE_SIZE,f.scrollerHeight=f.height,this.$horizScroll&&(f.scrollerHeight-=this.scrollBarH.getHeight()),this.scrollBarV.element.style.bottom=this.scrollBarH.getHeight()+"px",e|=this.CHANGE_SCROLL),c&&(a||f.width!=c)&&(e|=this.CHANGE_SIZE,f.width=c,null==b&&(b=this.$showGutter?this.$gutter.offsetWidth:0),this.gutterWidth=b,this.scrollBarH.element.style.left=this.scroller.style.left=b+"px",f.scrollerWidth=Math.max(0,c-b-this.scrollBarV.getWidth()),this.scrollBarH.element.style.right=this.scroller.style.right=this.scrollBarV.getWidth()+"px",this.scroller.style.bottom=this.scrollBarH.getHeight()+"px",(this.session&&this.session.getUseWrapMode()&&this.adjustWrapLimit()||a)&&(e|=this.CHANGE_FULL)),f.$dirty=!c||!d,e&&this._signal("resize",g),e
},this.onGutterResize=function(){var a=this.$showGutter?this.$gutter.offsetWidth:0;a!=this.gutterWidth&&(this.$changes|=this.$updateCachedSize(!0,a,this.$size.width,this.$size.height)),this.session.getUseWrapMode()&&this.adjustWrapLimit()?this.$loop.schedule(this.CHANGE_FULL):this.$size.$dirty?this.$loop.schedule(this.CHANGE_FULL):(this.$computeLayerConfig(),this.$loop.schedule(this.CHANGE_MARKER))},this.adjustWrapLimit=function(){var a=this.$size.scrollerWidth-2*this.$padding,b=Math.floor(a/this.characterWidth);
return this.session.adjustWrapLimit(b,this.$showPrintMargin&&this.$printMarginColumn)},this.setAnimatedScroll=function(a){this.setOption("animatedScroll",a)},this.getAnimatedScroll=function(){return this.$animatedScroll},this.setShowInvisibles=function(a){this.setOption("showInvisibles",a)},this.getShowInvisibles=function(){return this.getOption("showInvisibles")},this.getDisplayIndentGuides=function(){return this.getOption("displayIndentGuides")},this.setDisplayIndentGuides=function(a){this.setOption("displayIndentGuides",a)
},this.setShowPrintMargin=function(a){this.setOption("showPrintMargin",a)},this.getShowPrintMargin=function(){return this.getOption("showPrintMargin")},this.setPrintMarginColumn=function(a){this.setOption("printMarginColumn",a)},this.getPrintMarginColumn=function(){return this.getOption("printMarginColumn")},this.getShowGutter=function(){return this.getOption("showGutter")},this.setShowGutter=function(a){return this.setOption("showGutter",a)},this.getFadeFoldWidgets=function(){return this.getOption("fadeFoldWidgets")
},this.setFadeFoldWidgets=function(a){this.setOption("fadeFoldWidgets",a)},this.setHighlightGutterLine=function(a){this.setOption("highlightGutterLine",a)},this.getHighlightGutterLine=function(){return this.getOption("highlightGutterLine")},this.$updateGutterLineHighlight=function(){var a=this.$cursorLayer.$pixelPos,b=this.layerConfig.lineHeight;if(this.session.getUseWrapMode()){var c=this.session.selection.getCursor();c.column=0,a=this.$cursorLayer.getPixelPosition(c,!0),b*=this.session.getRowLength(c.row)}this.$gutterLineHighlight.style.top=a.top-this.layerConfig.offset+"px",this.$gutterLineHighlight.style.height=b+"px"
},this.$updatePrintMargin=function(){if(this.$showPrintMargin||this.$printMarginEl){if(!this.$printMarginEl){var a=e.createElement("div");a.className="ace_layer ace_print-margin-layer",this.$printMarginEl=e.createElement("div"),this.$printMarginEl.className="ace_print-margin",a.appendChild(this.$printMarginEl),this.content.insertBefore(a,this.content.firstChild)}var b=this.$printMarginEl.style;b.left=this.characterWidth*this.$printMarginColumn+this.$padding+"px",b.visibility=this.$showPrintMargin?"visible":"hidden",this.session&&-1==this.session.$wrap&&this.adjustWrapLimit()
}},this.getContainerElement=function(){return this.container},this.getMouseEventTarget=function(){return this.content},this.getTextAreaContainer=function(){return this.container},this.$moveTextAreaToCursor=function(){if(this.$keepTextAreaAtCursor){var a=this.layerConfig,b=this.$cursorLayer.$pixelPos.top,c=this.$cursorLayer.$pixelPos.left;b-=a.offset;var d=this.lineHeight;if(!(0>b||b>a.height-d)){var e=this.characterWidth;if(this.$composition){var f=this.textarea.value.replace(/^\x01+/,"");e*=this.session.$getStringScreenWidth(f)[0]+2,d+=2,b-=1
}c-=this.scrollLeft,c>this.$size.scrollerWidth-e&&(c=this.$size.scrollerWidth-e),c-=this.scrollBar.width,this.textarea.style.height=d+"px",this.textarea.style.width=e+"px",this.textarea.style.right=Math.max(0,this.$size.scrollerWidth-c-e)+"px",this.textarea.style.bottom=Math.max(0,this.$size.height-b-d)+"px"}}},this.getFirstVisibleRow=function(){return this.layerConfig.firstRow},this.getFirstFullyVisibleRow=function(){return this.layerConfig.firstRow+(0===this.layerConfig.offset?0:1)},this.getLastFullyVisibleRow=function(){var a=Math.floor((this.layerConfig.height+this.layerConfig.offset)/this.layerConfig.lineHeight);
return this.layerConfig.firstRow-1+a},this.getLastVisibleRow=function(){return this.layerConfig.lastRow},this.$padding=null,this.setPadding=function(a){this.$padding=a,this.$textLayer.setPadding(a),this.$cursorLayer.setPadding(a),this.$markerFront.setPadding(a),this.$markerBack.setPadding(a),this.$loop.schedule(this.CHANGE_FULL),this.$updatePrintMargin()},this.setScrollMargin=function(a,b,c,d){var e=this.scrollMargin;e.top=0|a,e.bottom=0|b,e.right=0|d,e.left=0|c,e.v=e.top+e.bottom,e.h=e.left+e.right,e.top&&this.scrollTop<=0&&this.session&&this.session.setScrollTop(-e.top),this.updateFull()
},this.getHScrollBarAlwaysVisible=function(){return this.$hScrollBarAlwaysVisible},this.setHScrollBarAlwaysVisible=function(a){this.setOption("hScrollBarAlwaysVisible",a)},this.getVScrollBarAlwaysVisible=function(){return this.$hScrollBarAlwaysVisible},this.setVScrollBarAlwaysVisible=function(a){this.setOption("vScrollBarAlwaysVisible",a)},this.$updateScrollBarV=function(){this.scrollBarV.setScrollHeight(this.layerConfig.maxHeight+this.scrollMargin.v),this.scrollBarV.setScrollTop(this.scrollTop+this.scrollMargin.top)
},this.$updateScrollBarH=function(){this.scrollBarH.setScrollWidth(this.layerConfig.width+2*this.$padding+this.scrollMargin.h),this.scrollBarH.setScrollLeft(this.scrollLeft+this.scrollMargin.left)},this.$frozen=!1,this.freeze=function(){this.$frozen=!0},this.unfreeze=function(){this.$frozen=!1},this.$renderChanges=function(a,b){if(this.$changes&&(a|=this.$changes,this.$changes=0),!this.session||!this.container.offsetWidth||this.$frozen||!a&&!b)return this.$changes|=a,void 0;if(this.$size.$dirty)return this.$changes|=a,this.onResize(!0);
this.lineHeight||this.$textLayer.checkForSizeChanges(),this._signal("beforeRender");var c=this.layerConfig;return(a&this.CHANGE_FULL||a&this.CHANGE_SIZE||a&this.CHANGE_TEXT||a&this.CHANGE_LINES||a&this.CHANGE_SCROLL||a&this.CHANGE_H_SCROLL)&&(a|=this.$computeLayerConfig(),c=this.layerConfig,this.$updateScrollBarV(),a&this.CHANGE_H_SCROLL&&this.$updateScrollBarH(),this.$gutterLayer.element.style.marginTop=-c.offset+"px",this.content.style.marginTop=-c.offset+"px",this.content.style.width=c.width+2*this.$padding+"px",this.content.style.height=c.minHeight+"px"),a&this.CHANGE_H_SCROLL&&(this.content.style.marginLeft=-this.scrollLeft+"px",this.scroller.className=this.scrollLeft<=0?"ace_scroller":"ace_scroller ace_scroll-left"),a&this.CHANGE_FULL?(this.$textLayer.update(c),this.$showGutter&&this.$gutterLayer.update(c),this.$markerBack.update(c),this.$markerFront.update(c),this.$cursorLayer.update(c),this.$moveTextAreaToCursor(),this.$highlightGutterLine&&this.$updateGutterLineHighlight(),this._signal("afterRender"),void 0):a&this.CHANGE_SCROLL?(a&this.CHANGE_TEXT||a&this.CHANGE_LINES?this.$textLayer.update(c):this.$textLayer.scrollLines(c),this.$showGutter&&this.$gutterLayer.update(c),this.$markerBack.update(c),this.$markerFront.update(c),this.$cursorLayer.update(c),this.$highlightGutterLine&&this.$updateGutterLineHighlight(),this.$moveTextAreaToCursor(),this._signal("afterRender"),void 0):(a&this.CHANGE_TEXT?(this.$textLayer.update(c),this.$showGutter&&this.$gutterLayer.update(c)):a&this.CHANGE_LINES?(this.$updateLines()||a&this.CHANGE_GUTTER&&this.$showGutter)&&this.$gutterLayer.update(c):(a&this.CHANGE_TEXT||a&this.CHANGE_GUTTER)&&this.$showGutter&&this.$gutterLayer.update(c),a&this.CHANGE_CURSOR&&(this.$cursorLayer.update(c),this.$moveTextAreaToCursor(),this.$highlightGutterLine&&this.$updateGutterLineHighlight()),a&(this.CHANGE_MARKER|this.CHANGE_MARKER_FRONT)&&this.$markerFront.update(c),a&(this.CHANGE_MARKER|this.CHANGE_MARKER_BACK)&&this.$markerBack.update(c),this._signal("afterRender"),void 0)
},this.$autosize=function(){var a=this.session.getScreenLength()*this.lineHeight,b=this.$maxLines*this.lineHeight,c=Math.max((this.$minLines||1)*this.lineHeight,Math.min(b,a))+this.scrollMargin.v+(this.$extraHeight||0),d=a>b;if(c!=this.desiredHeight||this.$size.height!=this.desiredHeight||d!=this.$vScroll){d!=this.$vScroll&&(this.$vScroll=d,this.scrollBarV.setVisible(d));var e=this.container.clientWidth;this.container.style.height=c+"px",this.$updateCachedSize(!0,this.$gutterWidth,e,c),this.desiredHeight=c}},this.$computeLayerConfig=function(){this.$maxLines&&this.lineHeight>1&&this.$autosize();
var a=this.session,b=this.$size,c=b.height<=2*this.lineHeight,d=this.session.getScreenLength(),e=d*this.lineHeight,f=this.scrollTop%this.lineHeight,g=b.scrollerHeight+this.lineHeight,h=this.$getLongestLine(),i=!c&&(this.$hScrollBarAlwaysVisible||b.scrollerWidth-h-2*this.$padding<0),j=this.$horizScroll!==i;j&&(this.$horizScroll=i,this.scrollBarH.setVisible(i)),!this.$maxLines&&this.$scrollPastEnd&&this.scrollTop>e-b.scrollerHeight&&(e+=Math.min((b.scrollerHeight-this.lineHeight)*this.$scrollPastEnd,this.scrollTop-e+b.scrollerHeight));
var k=!c&&(this.$vScrollBarAlwaysVisible||b.scrollerHeight-e<0),l=this.$vScroll!==k;l&&(this.$vScroll=k,this.scrollBarV.setVisible(k)),this.session.setScrollTop(Math.max(-this.scrollMargin.top,Math.min(this.scrollTop,e-b.scrollerHeight+this.scrollMargin.bottom))),this.session.setScrollLeft(Math.max(-this.scrollMargin.left,Math.min(this.scrollLeft,h+2*this.$padding-b.scrollerWidth+this.scrollMargin.right)));var p,q,m=Math.ceil(g/this.lineHeight)-1,n=Math.max(0,Math.round((this.scrollTop-f)/this.lineHeight)),o=n+m,r=this.lineHeight;
n=a.screenToDocumentRow(n,0);var s=a.getFoldLine(n);s&&(n=s.start.row),p=a.documentToScreenRow(n,0),q=a.getRowLength(n)*r,o=Math.min(a.screenToDocumentRow(o,0),a.getLength()-1),g=b.scrollerHeight+a.getRowLength(o)*r+q,f=this.scrollTop-p*r;var t=0;return this.layerConfig.width!=h&&(t=this.CHANGE_H_SCROLL),(j||l)&&(t=this.$updateCachedSize(!0,this.gutterWidth,b.width,b.height),this._signal("scrollbarVisibilityChanged"),l&&(h=this.$getLongestLine())),this.layerConfig={width:h,padding:this.$padding,firstRow:n,firstRowScreen:p,lastRow:o,lineHeight:r,characterWidth:this.characterWidth,minHeight:g,maxHeight:e,offset:f,gutterOffset:Math.max(0,Math.ceil((f+b.height-b.scrollerHeight)/r)),height:this.$size.scrollerHeight},t
},this.$updateLines=function(){var a=this.$changedLines.firstRow,b=this.$changedLines.lastRow;this.$changedLines=null;var c=this.layerConfig;if(!(a>c.lastRow+1||b<c.firstRow))return 1/0===b?(this.$showGutter&&this.$gutterLayer.update(c),this.$textLayer.update(c),void 0):(this.$textLayer.updateLines(c,a,b),!0)},this.$getLongestLine=function(){var a=this.session.getScreenWidth();return this.showInvisibles&&!this.session.$useWrapMode&&(a+=1),Math.max(this.$size.scrollerWidth-2*this.$padding,Math.round(a*this.characterWidth))
},this.updateFrontMarkers=function(){this.$markerFront.setMarkers(this.session.getMarkers(!0)),this.$loop.schedule(this.CHANGE_MARKER_FRONT)},this.updateBackMarkers=function(){this.$markerBack.setMarkers(this.session.getMarkers()),this.$loop.schedule(this.CHANGE_MARKER_BACK)},this.addGutterDecoration=function(a,b){this.$gutterLayer.addGutterDecoration(a,b)},this.removeGutterDecoration=function(a,b){this.$gutterLayer.removeGutterDecoration(a,b)},this.updateBreakpoints=function(){this.$loop.schedule(this.CHANGE_GUTTER)
},this.setAnnotations=function(a){this.$gutterLayer.setAnnotations(a),this.$loop.schedule(this.CHANGE_GUTTER)},this.updateCursor=function(){this.$loop.schedule(this.CHANGE_CURSOR)},this.hideCursor=function(){this.$cursorLayer.hideCursor()},this.showCursor=function(){this.$cursorLayer.showCursor()},this.scrollSelectionIntoView=function(a,b,c){this.scrollCursorIntoView(a,c),this.scrollCursorIntoView(b,c)},this.scrollCursorIntoView=function(a,b,c){if(0!==this.$size.scrollerHeight){var d=this.$cursorLayer.getPixelPosition(a),e=d.left,f=d.top,g=c&&c.top||0,h=c&&c.bottom||0,i=this.$scrollAnimation?this.session.getScrollTop():this.scrollTop;
i+g>f?(b&&(f-=b*this.$size.scrollerHeight),0===f&&(f=-this.scrollMargin.top),this.session.setScrollTop(f)):i+this.$size.scrollerHeight-h<f+this.lineHeight&&(b&&(f+=b*this.$size.scrollerHeight),this.session.setScrollTop(f+this.lineHeight-this.$size.scrollerHeight));var j=this.scrollLeft;j>e?(e<this.$padding+2*this.layerConfig.characterWidth&&(e=-this.scrollMargin.left),this.session.setScrollLeft(e)):j+this.$size.scrollerWidth<e+this.characterWidth?this.session.setScrollLeft(Math.round(e+this.characterWidth-this.$size.scrollerWidth)):j<=this.$padding&&e-j<this.characterWidth&&this.session.setScrollLeft(0)
}},this.getScrollTop=function(){return this.session.getScrollTop()},this.getScrollLeft=function(){return this.session.getScrollLeft()},this.getScrollTopRow=function(){return this.scrollTop/this.lineHeight},this.getScrollBottomRow=function(){return Math.max(0,Math.floor((this.scrollTop+this.$size.scrollerHeight)/this.lineHeight)-1)},this.scrollToRow=function(a){this.session.setScrollTop(a*this.lineHeight)},this.alignCursor=function(a,b){"number"==typeof a&&(a={row:a,column:0});var c=this.$cursorLayer.getPixelPosition(a),d=this.$size.scrollerHeight-this.lineHeight,e=c.top-d*(b||0);
return this.session.setScrollTop(e),e},this.STEPS=8,this.$calcSteps=function(a,b){var c=0,d=this.STEPS,e=[],f=function(a,b,c){return c*(Math.pow(a-1,3)+1)+b};for(c=0;d>c;++c)e.push(f(c/this.STEPS,a,b-a));return e},this.scrollToLine=function(a,b,c,d){var e=this.$cursorLayer.getPixelPosition({row:a,column:0}),f=e.top;b&&(f-=this.$size.scrollerHeight/2);var g=this.scrollTop;this.session.setScrollTop(f),c!==!1&&this.animateScrolling(g,d)},this.animateScrolling=function(a,b){var c=this.scrollTop;if(this.$animatedScroll){var d=this;
if(a!=c){if(this.$scrollAnimation){var e=this.$scrollAnimation.steps;if(e.length&&(a=e[0],a==c))return}var f=d.$calcSteps(a,c);this.$scrollAnimation={from:a,to:c,steps:f},clearInterval(this.$timer),d.session.setScrollTop(f.shift()),d.session.$scrollTop=c,this.$timer=setInterval(function(){f.length?(d.session.setScrollTop(f.shift()),d.session.$scrollTop=c):null!=c?(d.session.$scrollTop=-1,d.session.setScrollTop(c),c=null):(d.$timer=clearInterval(d.$timer),d.$scrollAnimation=null,b&&b())},10)}}},this.scrollToY=function(a){this.scrollTop!==a&&(this.$loop.schedule(this.CHANGE_SCROLL),this.scrollTop=a)
},this.scrollToX=function(a){this.scrollLeft!==a&&(this.scrollLeft=a),this.$loop.schedule(this.CHANGE_H_SCROLL)},this.scrollTo=function(a,b){this.session.setScrollTop(b),this.session.setScrollLeft(b)},this.scrollBy=function(a,b){b&&this.session.setScrollTop(this.session.getScrollTop()+b),a&&this.session.setScrollLeft(this.session.getScrollLeft()+a)},this.isScrollableBy=function(a,b){return 0>b&&this.session.getScrollTop()>=1-this.scrollMargin.top?!0:b>0&&this.session.getScrollTop()+this.$size.scrollerHeight-this.layerConfig.maxHeight-(this.$size.scrollerHeight-this.lineHeight)*this.$scrollPastEnd<-1+this.scrollMargin.bottom?!0:0>a&&this.session.getScrollLeft()>=1-this.scrollMargin.left?!0:a>0&&this.session.getScrollLeft()+this.$size.scrollerWidth-this.layerConfig.width<-1+this.scrollMargin.right?!0:void 0
},this.pixelToScreenCoordinates=function(a,b){var c=this.scroller.getBoundingClientRect(),d=(a+this.scrollLeft-c.left-this.$padding)/this.characterWidth,e=Math.floor((b+this.scrollTop-c.top)/this.lineHeight),f=Math.round(d);return{row:e,column:f,side:d-f>0?1:-1}},this.screenToTextCoordinates=function(a,b){var c=this.scroller.getBoundingClientRect(),d=Math.round((a+this.scrollLeft-c.left-this.$padding)/this.characterWidth),e=(b+this.scrollTop-c.top)/this.lineHeight;return this.session.screenToDocumentPosition(e,Math.max(d,0))
},this.textToScreenCoordinates=function(a,b){var c=this.scroller.getBoundingClientRect(),d=this.session.documentToScreenPosition(a,b),e=this.$padding+Math.round(d.column*this.characterWidth),f=d.row*this.lineHeight;return{pageX:c.left+e-this.scrollLeft,pageY:c.top+f-this.scrollTop}},this.visualizeFocus=function(){e.addCssClass(this.container,"ace_focus")},this.visualizeBlur=function(){e.removeCssClass(this.container,"ace_focus")},this.showComposition=function(){this.$composition||(this.$composition={keepTextAreaAtCursor:this.$keepTextAreaAtCursor,cssText:this.textarea.style.cssText}),this.$keepTextAreaAtCursor=!0,e.addCssClass(this.textarea,"ace_composition"),this.textarea.style.cssText="",this.$moveTextAreaToCursor()
},this.setCompositionText=function(){this.$moveTextAreaToCursor()},this.hideComposition=function(){this.$composition&&(e.removeCssClass(this.textarea,"ace_composition"),this.$keepTextAreaAtCursor=this.$composition.keepTextAreaAtCursor,this.textarea.style.cssText=this.$composition.cssText,this.$composition=null)},this.setTheme=function(a,b){function c(c){if(d.$themeId!=a)return b&&b();if(c.cssClass){e.importCssString(c.cssText,c.cssClass,d.container.ownerDocument),d.theme&&e.removeCssClass(d.container,d.theme.cssClass);
var f="padding"in c?c.padding:"padding"in(d.theme||{})?4:d.$padding;d.$padding&&f!=d.$padding&&d.setPadding(f),d.$theme=c.cssClass,d.theme=c,e.addCssClass(d.container,c.cssClass),e.setCssClass(d.container,"ace_dark",c.isDark),d.$size&&(d.$size.width=0,d.$updateSizeAsync()),d._dispatchEvent("themeLoaded",{theme:c}),b&&b()}}var d=this;if(this.$themeId=a,d._dispatchEvent("themeChange",{theme:a}),a&&"string"!=typeof a)c(a);else{var g=a||this.$options.theme.initialValue;f.loadModule(["theme",g],c)}},this.getTheme=function(){return this.$themeId
},this.setStyle=function(a,b){e.setCssClass(this.container,a,b!==!1)},this.unsetStyle=function(a){e.removeCssClass(this.container,a)},this.setCursorStyle=function(a){this.content.style.cursor!=a&&(this.content.style.cursor=a)},this.setMouseCursor=function(a){this.content.style.cursor=a},this.destroy=function(){this.$textLayer.destroy(),this.$cursorLayer.destroy()}}).call(q.prototype),f.defineOptions(q.prototype,"renderer",{animatedScroll:{initialValue:!1},showInvisibles:{set:function(a){this.$textLayer.setShowInvisibles(a)&&this.$loop.schedule(this.CHANGE_TEXT)
},initialValue:!1},showPrintMargin:{set:function(){this.$updatePrintMargin()},initialValue:!0},printMarginColumn:{set:function(){this.$updatePrintMargin()},initialValue:80},printMargin:{set:function(a){"number"==typeof a&&(this.$printMarginColumn=a),this.$showPrintMargin=!!a,this.$updatePrintMargin()},get:function(){return this.$showPrintMargin&&this.$printMarginColumn}},showGutter:{set:function(a){this.$gutter.style.display=a?"block":"none",this.$loop.schedule(this.CHANGE_FULL),this.onGutterResize()},initialValue:!0},fadeFoldWidgets:{set:function(a){e.setCssClass(this.$gutter,"ace_fade-fold-widgets",a)
},initialValue:!1},showFoldWidgets:{set:function(a){this.$gutterLayer.setShowFoldWidgets(a)},initialValue:!0},showLineNumbers:{set:function(a){this.$gutterLayer.setShowLineNumbers(a),this.$loop.schedule(this.CHANGE_GUTTER)},initialValue:!0},displayIndentGuides:{set:function(a){this.$textLayer.setDisplayIndentGuides(a)&&this.$loop.schedule(this.CHANGE_TEXT)},initialValue:!0},highlightGutterLine:{set:function(a){return this.$gutterLineHighlight?(this.$gutterLineHighlight.style.display=a?"":"none",this.$cursorLayer.$pixelPos&&this.$updateGutterLineHighlight(),void 0):(this.$gutterLineHighlight=e.createElement("div"),this.$gutterLineHighlight.className="ace_gutter-active-line",this.$gutter.appendChild(this.$gutterLineHighlight),void 0)
},initialValue:!1,value:!0},hScrollBarAlwaysVisible:{set:function(){(!this.$hScrollBarAlwaysVisible||!this.$horizScroll)&&this.$loop.schedule(this.CHANGE_SCROLL)},initialValue:!1},vScrollBarAlwaysVisible:{set:function(){(!this.$vScrollBarAlwaysVisible||!this.$vScroll)&&this.$loop.schedule(this.CHANGE_SCROLL)},initialValue:!1},fontSize:{set:function(a){"number"==typeof a&&(a+="px"),this.container.style.fontSize=a,this.updateFontSize()},initialValue:12},fontFamily:{set:function(a){this.container.style.fontFamily=a,this.updateFontSize()
}},maxLines:{set:function(){this.updateFull()}},minLines:{set:function(){this.updateFull()}},scrollPastEnd:{set:function(a){a=+a||0,this.$scrollPastEnd!=a&&(this.$scrollPastEnd=a,this.$loop.schedule(this.CHANGE_SCROLL))},initialValue:0,handlesSet:!0},fixedWidthGutter:{set:function(a){this.$gutterLayer.$fixedWidth=!!a,this.$loop.schedule(this.CHANGE_GUTTER)}},theme:{set:function(a){this.setTheme(a)},get:function(){return this.$themeId||this.theme},initialValue:"./theme/textmate",handlesSet:!0}}),b.VirtualRenderer=q
}),ace.define("ace/config",["require","exports","module","ace/lib/lang","ace/lib/oop","ace/lib/net","ace/lib/event_emitter"],function(b,c,d){"no use strict";function e(e){if(l.packaged=e||b.packaged||d.packaged||k.define&&define.packaged,!k.document)return"";for(var g={base:a.path+"/scripts/ace"},h="",i=document.getElementsByTagName("script"),j=0;j<i.length;j++){var m=i[j],n=m.src||m.getAttribute("src");if(n){for(var o=m.attributes,p=0,q=o.length;q>p;p++){var r=o[p];0===r.name.indexOf("data-ace-")&&(g[f(r.name.replace(/^data-ace-/,""))]=r.value)
}var s=n.match(/^(.*)\/ace(\-\w+)?\.js(\?|$)/);s&&(h=s[1])}}h&&(g.base=g.base||h,g.packaged=!0),g.basePath=g.base,g.workerPath=g.workerPath||g.base,g.modePath=g.modePath||g.base,g.themePath=g.themePath||g.base,delete g.base;for(var t in g)"undefined"!=typeof g[t]&&c.set(t,g[t])}function f(a){return a.replace(/-(.)/g,function(a,b){return b.toUpperCase()})}var g=b("./lib/lang"),h=b("./lib/oop"),i=b("./lib/net"),j=b("./lib/event_emitter").EventEmitter,k=function(){return this}(),l={packaged:!1,workerPath:null,modePath:null,themePath:null,basePath:a.path+"/scripts/ace",suffix:".js",$moduleUrls:{}};
c.get=function(a){if(!l.hasOwnProperty(a))throw new Error("Unknown config key: "+a);return l[a]},c.set=function(a,b){if(!l.hasOwnProperty(a))throw new Error("Unknown config key: "+a);l[a]=b},c.all=function(){return g.copyObject(l)},h.implement(c,j),c.moduleUrl=function(a,b){if(l.$moduleUrls[a])return l.$moduleUrls[a];var c=a.split("/");b=b||c[c.length-2]||"";var d="snippets"==b?"/":"-",e=c[c.length-1];if("-"==d){var f=new RegExp("^"+b+"[\\-_]|[\\-_]"+b+"$","g");e=e.replace(f,"")}(!e||e==b)&&c.length>1&&(e=c[c.length-2]);
var g=l[b+"Path"];return null==g?g=l.basePath:"/"==d&&(b=d=""),g&&"/"!=g.slice(-1)&&(g+="/"),g+b+d+e+this.get("suffix")},c.setModuleUrl=function(a,b){return l.$moduleUrls[a]=b},c.$loading={},c.loadModule=function(a,d){var e,f;Array.isArray(a)&&(f=a[0],a=a[1]);try{e=b(a)}catch(g){}if(e&&!c.$loading[a])return d&&d(e);if(c.$loading[a]||(c.$loading[a]=[]),c.$loading[a].push(d),!(c.$loading[a].length>1)){var h=function(){b([a],function(b){c._emit("load.module",{name:a,module:b});var d=c.$loading[a];c.$loading[a]=null,d.forEach(function(a){a&&a(b)
})})};return c.get("packaged")?(i.loadScript(c.moduleUrl(a,f),h),void 0):h()}},e(!0),c.init=e;var m={setOptions:function(a){Object.keys(a).forEach(function(b){this.setOption(b,a[b])},this)},getOptions:function(a){var b={};return a?Array.isArray(a)||(b=a,a=Object.keys(b)):a=Object.keys(this.$options),a.forEach(function(a){b[a]=this.getOption(a)},this),b},setOption:function(a,b){if(this["$"+a]!==b){var c=this.$options[a];return c?c.forwardTo?this[c.forwardTo]&&this[c.forwardTo].setOption(a,b):(c.handlesSet||(this["$"+a]=b),c&&c.set&&c.set.call(this,b),void 0):("undefined"!=typeof console&&console.warn&&console.warn('misspelled option "'+a+'"'),void 0)
}},getOption:function(a){var b=this.$options[a];return b?b.forwardTo?this[b.forwardTo]&&this[b.forwardTo].getOption(a):b&&b.get?b.get.call(this):this["$"+a]:("undefined"!=typeof console&&console.warn&&console.warn('misspelled option "'+a+'"'),void 0)}},n={};c.defineOptions=function(a,b,c){return a.$options||(n[b]=a.$options={}),Object.keys(c).forEach(function(b){var d=c[b];"string"==typeof d&&(d={forwardTo:d}),d.name||(d.name=b),a.$options[d.name]=d,"initialValue"in d&&(a["$"+d.name]=d.initialValue)}),h.implement(a,m),this
},c.resetOptions=function(a){Object.keys(a.$options).forEach(function(b){var c=a.$options[b];"value"in c&&a.setOption(b,c.value)})},c.setDefaultValue=function(a,b,d){var e=n[a]||(n[a]={});e[b]&&(e.forwardTo?c.setDefaultValue(e.forwardTo,b,d):e[b].value=d)},c.setDefaultValues=function(a,b){Object.keys(b).forEach(function(d){c.setDefaultValue(a,d,b[d])})}}),ace.define("ace/layer/gutter",["require","exports","module","ace/lib/dom","ace/lib/oop","ace/lib/lang","ace/lib/event_emitter"],function(a,b){var d=a("../lib/dom"),e=a("../lib/oop"),f=a("../lib/lang"),g=a("../lib/event_emitter").EventEmitter,h=function(a){this.element=d.createElement("div"),this.element.className="ace_layer ace_gutter-layer",a.appendChild(this.element),this.setShowFoldWidgets(this.$showFoldWidgets),this.gutterWidth=0,this.$annotations=[],this.$updateAnnotations=this.$updateAnnotations.bind(this),this.$cells=[]
};(function(){e.implement(this,g),this.setSession=function(a){this.session&&this.session.removeEventListener("change",this.$updateAnnotations),this.session=a,a.on("change",this.$updateAnnotations)},this.addGutterDecoration=function(a,b){window.console&&console.warn&&console.warn("deprecated use session.addGutterDecoration"),this.session.addGutterDecoration(a,b)},this.removeGutterDecoration=function(a,b){window.console&&console.warn&&console.warn("deprecated use session.removeGutterDecoration"),this.session.removeGutterDecoration(a,b)
},this.setAnnotations=function(a){this.$annotations=[];for(var b=0;b<a.length;b++){var c=a[b],d=c.row,e=this.$annotations[d];e||(e=this.$annotations[d]={text:[]});var g=c.text;g=g?f.escapeHTML(g):c.html||"",-1===e.text.indexOf(g)&&e.text.push(g);var h=c.type;"error"==h?e.className=" ace_error":"warning"==h&&" ace_error"!=e.className?e.className=" ace_warning":"info"==h&&!e.className&&(e.className=" ace_info")}},this.$updateAnnotations=function(a){if(this.$annotations.length){var b=a.data,c=b.range,d=c.start.row,e=c.end.row-d;
if(0!==e)if("removeText"==b.action||"removeLines"==b.action)this.$annotations.splice(d,e+1,null);else{var f=new Array(e+1);f.unshift(d,1),this.$annotations.splice.apply(this.$annotations,f)}}},this.update=function(a){for(var b=this.session,c=a.firstRow,e=Math.min(a.lastRow+a.gutterOffset,b.getLength()-1),f=b.getNextFoldLine(c),g=f?f.start.row:1/0,h=this.$showFoldWidgets&&b.foldWidgets,i=b.$breakpoints,j=b.$decorations,k=b.$firstLineNumber,l=0,m=b.gutterRenderer||this.$renderer,n=null,o=-1,p=c;;){if(p>g&&(p=f.end.row+1,f=b.getNextFoldLine(p,f),g=f?f.start.row:1/0),p>e){for(;this.$cells.length>o+1;)n=this.$cells.pop(),this.element.removeChild(n.element);
break}n=this.$cells[++o],n||(n={element:null,textNode:null,foldWidget:null},n.element=d.createElement("div"),n.textNode=document.createTextNode(""),n.element.appendChild(n.textNode),this.element.appendChild(n.element),this.$cells[o]=n);var q="ace_gutter-cell ";i[p]&&(q+=i[p]),j[p]&&(q+=j[p]),this.$annotations[p]&&(q+=this.$annotations[p].className),n.element.className!=q&&(n.element.className=q);var r=b.getRowLength(p)*a.lineHeight+"px";if(r!=n.element.style.height&&(n.element.style.height=r),h){var s=h[p];null==s&&(s=h[p]=b.getFoldWidget(p))
}if(s){n.foldWidget||(n.foldWidget=d.createElement("span"),n.element.appendChild(n.foldWidget));var q="ace_fold-widget ace_"+s;q+="start"==s&&p==g&&p<f.end.row?" ace_closed":" ace_open",n.foldWidget.className!=q&&(n.foldWidget.className=q);var r=a.lineHeight+"px";n.foldWidget.style.height!=r&&(n.foldWidget.style.height=r)}else n.foldWidget&&(n.element.removeChild(n.foldWidget),n.foldWidget=null);var t=l=m?m.getText(b,p):p+k;t!=n.textNode.data&&(n.textNode.data=t),p++}this.element.style.height=a.minHeight+"px",(this.$fixedWidth||b.$useWrapMode)&&(l=b.getLength()+k);
var u=m?m.getWidth(b,l,a):l.toString().length*a.characterWidth,v=this.$padding||this.$computePadding();u+=v.left+v.right,u!==this.gutterWidth&&!isNaN(u)&&(this.gutterWidth=u,this.element.style.width=Math.ceil(this.gutterWidth)+"px",this._emit("changeGutterWidth",u))},this.$fixedWidth=!1,this.$showLineNumbers=!0,this.$renderer="",this.setShowLineNumbers=function(a){this.$renderer=!a&&{getWidth:function(){return""},getText:function(){return""}}},this.getShowLineNumbers=function(){return this.$showLineNumbers},this.$showFoldWidgets=!0,this.setShowFoldWidgets=function(a){a?d.addCssClass(this.element,"ace_folding-enabled"):d.removeCssClass(this.element,"ace_folding-enabled"),this.$showFoldWidgets=a,this.$padding=null
},this.getShowFoldWidgets=function(){return this.$showFoldWidgets},this.$computePadding=function(){if(!this.element.firstChild)return{left:0,right:0};var a=d.computedStyle(this.element.firstChild);return this.$padding={},this.$padding.left=parseInt(a.paddingLeft)+1||0,this.$padding.right=parseInt(a.paddingRight)||0,this.$padding},this.getRegion=function(a){var b=this.$padding||this.$computePadding(),c=this.element.getBoundingClientRect();return a.x<b.left+c.left?"markers":this.$showFoldWidgets&&a.x>c.right-b.right?"foldWidgets":void 0
}}).call(h.prototype),b.Gutter=h}),ace.define("ace/mouse/dragdrop_handler",["require","exports","module","ace/lib/dom","ace/lib/event","ace/lib/useragent"],function(a,b){function d(a){function b(a,b){var c=Date.now(),d=!b||a.row!=b.row,f=!b||a.column!=b.column;if(!E||d||f)q.$blockScrolling+=1,q.moveCursorToPosition(a),q.$blockScrolling-=1,E=c,F={x:v,y:w};else{var g=e(F.x,F.y,v,w);g>k?E=null:c-E>=j&&(q.renderer.scrollCursorIntoView(),E=null)}}function c(a,b){var c=Date.now(),d=q.renderer.layerConfig.lineHeight,e=q.renderer.layerConfig.characterWidth,f=q.renderer.scroller.getBoundingClientRect(),g={x:{left:v-f.left,right:f.right-v},y:{top:w-f.top,bottom:f.bottom-w}},h=Math.min(g.x.left,g.x.right),j=Math.min(g.y.top,g.y.bottom),k={row:a.row,column:a.column};
2>=h/e&&(k.column+=g.x.left<g.x.right?-3:2),1>=j/d&&(k.row+=g.y.top<g.y.bottom?-1:1);var l=a.row!=k.row,m=a.column!=k.column,n=!b||a.row!=b.row;l||m&&!n?D?c-D>=i&&q.renderer.scrollCursorIntoView(k):D=c:D=null}function d(){var a=z;z=q.renderer.screenToTextCoordinates(v,w),b(z,a),c(z,a)}function l(){y=q.selection.toOrientedRange(),u=q.session.addMarker(y,"ace_selection",q.getSelectionStyle()),q.clearSelection(),q.isFocused()&&q.renderer.$cursorLayer.setBlinking(!1),clearInterval(x),x=setInterval(d,20),A=0,g.addListener(document,"mousemove",n)
}function m(){clearInterval(x),q.session.removeMarker(u),u=null,q.$blockScrolling+=1,q.selection.fromOrientedRange(y),q.$blockScrolling-=1,q.isFocused()&&!C&&q.renderer.$cursorLayer.setBlinking(!q.getReadOnly()),y=null,A=0,D=null,E=null,g.removeListener(document,"mousemove",n)}function n(){null==G&&(G=setTimeout(function(){null!=G&&u&&m()},20))}function o(a){var b=a.types;return!b||Array.prototype.some.call(b,function(a){return"text/plain"==a||"Text"==a})}function p(a){var b=["copy","copymove","all","uninitialized"],c=["move","copymove","linkmove","all","uninitialized"],d=h.isMac?a.altKey:a.ctrlKey,e="uninitialized";
try{e=a.dataTransfer.effectAllowed.toLowerCase()}catch(a){}var f="none";return d&&b.indexOf(e)>=0?f="copy":c.indexOf(e)>=0?f="move":b.indexOf(e)>=0&&(f="copy"),f}var q=a.editor,r=f.createElement("img");r.src="data:image/gif;base64,R0lGODlhAQABAAAAACH5BAEKAAEALAAAAAABAAEAAAICTAEAOw==",h.isOpera&&(r.style.cssText="width:1px;height:1px;position:fixed;top:0;left:0;z-index:2147483647;opacity:0;");var s=["dragWait","dragWaitEnd","startDrag","dragReadyEnd","onMouseDrag"];s.forEach(function(b){a[b]=this[b]},this),q.addEventListener("mousedown",this.onMouseDown.bind(a));
var u,v,w,x,y,z,B,C,D,E,F,t=q.container,A=0;this.onDragStart=function(a){if(this.cancelDrag||!t.draggable){var b=this;return setTimeout(function(){b.startSelect(),b.captureMouse(a)},0),a.preventDefault()}y=q.getSelectionRange();var c=a.dataTransfer;c.effectAllowed=q.getReadOnly()?"copy":"copyMove",h.isOpera&&(q.container.appendChild(r),r._top=r.offsetTop),c.setDragImage&&c.setDragImage(r,0,0),h.isOpera&&q.container.removeChild(r),c.clearData(),c.setData("Text",q.session.getTextRange()),C=!0,this.setState("drag")
},this.onDragEnd=function(a){if(t.draggable=!1,C=!1,this.setState(null),!q.getReadOnly()){var b=a.dataTransfer.dropEffect;!B&&"move"==b&&q.session.remove(q.getSelectionRange()),q.renderer.$cursorLayer.setBlinking(!0)}this.editor.unsetStyle("ace_dragging")},this.onDragEnter=function(a){return!q.getReadOnly()&&o(a.dataTransfer)?(u||l(),A++,a.dataTransfer.dropEffect=B=p(a),g.preventDefault(a)):void 0},this.onDragOver=function(a){return!q.getReadOnly()&&o(a.dataTransfer)?(u||(l(),A++),null!==G&&(G=null),v=a.clientX,w=a.clientY,a.dataTransfer.dropEffect=B=p(a),g.preventDefault(a)):void 0
},this.onDragLeave=function(a){return A--,0>=A&&u?(m(),B=null,g.preventDefault(a)):void 0},this.onDrop=function(a){if(u){var b=a.dataTransfer;if(C)switch(B){case"move":y=y.contains(z.row,z.column)?{start:z,end:z}:q.moveText(y,z);break;case"copy":y=q.moveText(y,z,!0)}else{var c=b.getData("Text");y={start:z,end:q.session.insert(z,c)},q.focus(),B=null}return m(),g.preventDefault(a)}},g.addListener(t,"dragstart",this.onDragStart.bind(a)),g.addListener(t,"dragend",this.onDragEnd.bind(a)),g.addListener(t,"dragenter",this.onDragEnter.bind(a)),g.addListener(t,"dragover",this.onDragOver.bind(a)),g.addListener(t,"dragleave",this.onDragLeave.bind(a)),g.addListener(t,"drop",this.onDrop.bind(a));
var G=null}function e(a,b,c,d){return Math.sqrt(Math.pow(c-a,2)+Math.pow(d-b,2))}var f=a("../lib/dom"),g=a("../lib/event"),h=a("../lib/useragent"),i=200,j=200,k=5;(function(){this.dragWait=function(){var a=Date.now()-this.mousedownEvent.time;a>this.editor.getDragDelay()&&this.startDrag()},this.dragWaitEnd=function(){var a=this.editor.container;a.draggable=!1,this.startSelect(this.mousedownEvent.getDocumentPosition()),this.selectEnd()},this.dragReadyEnd=function(){this.editor.renderer.$cursorLayer.setBlinking(!this.editor.getReadOnly()),this.editor.unsetStyle("ace_dragging"),this.dragWaitEnd()
},this.startDrag=function(){this.cancelDrag=!1;var a=this.editor.container;a.draggable=!0,this.editor.renderer.$cursorLayer.setBlinking(!1),this.editor.setStyle("ace_dragging"),this.setState("dragReady")},this.onMouseDrag=function(){var b=this.editor.container;if(h.isIE&&"dragReady"==this.state){var c=e(this.mousedownEvent.x,this.mousedownEvent.y,this.x,this.y);c>3&&b.dragDrop()}if("dragWait"===this.state){var c=e(this.mousedownEvent.x,this.mousedownEvent.y,this.x,this.y);c>0&&(b.draggable=!1,this.startSelect(this.mousedownEvent.getDocumentPosition()))
}},this.onMouseDown=function(a){if(this.$dragEnabled){this.mousedownEvent=a;var b=this.editor,c=a.inSelection(),d=a.getButton(),e=a.domEvent.detail||1;if(1===e&&0===d&&c){if(a.editor.inMultiSelectMode&&(a.getAccelKey()||a.getShiftKey()))return;this.mousedownEvent.time=Date.now();var f=a.domEvent.target||a.domEvent.srcElement;if("unselectable"in f&&(f.unselectable="on"),b.getDragDelay()){if(h.isWebKit){this.cancelDrag=!0;var g=b.container;g.draggable=!0}this.setState("dragWait")}else this.startDrag();this.captureMouse(a,this.onMouseDrag.bind(this)),a.defaultPrevented=!0
}}}}).call(d.prototype),b.DragdropHandler=d}),ace.define("ace/layer/marker",["require","exports","module","ace/range","ace/lib/dom"],function(a,b){var d=a("../range").Range,e=a("../lib/dom"),f=function(a){this.element=e.createElement("div"),this.element.className="ace_layer ace_marker-layer",a.appendChild(this.element)};(function(){this.$padding=0,this.setPadding=function(a){this.$padding=a},this.setSession=function(a){this.session=a},this.setMarkers=function(a){this.markers=a},this.update=function(a){var a=a||this.config;
if(a){this.config=a;var b=[];for(var c in this.markers){var d=this.markers[c];if(d.range){var f=d.range.clipRows(a.firstRow,a.lastRow);if(!f.isEmpty())if(f=f.toScreenRange(this.session),d.renderer){var g=this.$getTop(f.start.row,a),h=this.$padding+f.start.column*a.characterWidth;d.renderer(b,f,h,g,a)}else"fullLine"==d.type?this.drawFullLineMarker(b,f,d.clazz,a):"screenLine"==d.type?this.drawScreenLineMarker(b,f,d.clazz,a):f.isMultiLine()?"text"==d.type?this.drawTextMarker(b,f,d.clazz,a):this.drawMultiLineMarker(b,f,d.clazz,a):this.drawSingleLineMarker(b,f,d.clazz+" ace_start",a)
}else d.update(b,this,this.session,a)}this.element=e.setInnerHtml(this.element,b.join(""))}},this.$getTop=function(a,b){return(a-b.firstRowScreen)*b.lineHeight},this.drawTextMarker=function(a,b,c,e,f){var g=b.start.row,h=new d(g,b.start.column,g,this.session.getScreenLastRowColumn(g));for(this.drawSingleLineMarker(a,h,c+" ace_start",e,1,f),g=b.end.row,h=new d(g,0,g,b.end.column),this.drawSingleLineMarker(a,h,c,e,0,f),g=b.start.row+1;g<b.end.row;g++)h.start.row=g,h.end.row=g,h.end.column=this.session.getScreenLastRowColumn(g),this.drawSingleLineMarker(a,h,c,e,1,f)
},this.drawMultiLineMarker=function(a,b,c,d,e){var f=this.$padding,g=d.lineHeight,h=this.$getTop(b.start.row,d),i=f+b.start.column*d.characterWidth;e=e||"",a.push("<div class='",c," ace_start' style='","height:",g,"px;","right:0;","top:",h,"px;","left:",i,"px;",e,"'></div>"),h=this.$getTop(b.end.row,d);var j=b.end.column*d.characterWidth;a.push("<div class='",c,"' style='","height:",g,"px;","width:",j,"px;","top:",h,"px;","left:",f,"px;",e,"'></div>"),g=(b.end.row-b.start.row-1)*d.lineHeight,0>g||(h=this.$getTop(b.start.row+1,d),a.push("<div class='",c,"' style='","height:",g,"px;","right:0;","top:",h,"px;","left:",f,"px;",e,"'></div>"))
},this.drawSingleLineMarker=function(a,b,c,d,e,f){var g=d.lineHeight,h=(b.end.column+(e||0)-b.start.column)*d.characterWidth,i=this.$getTop(b.start.row,d),j=this.$padding+b.start.column*d.characterWidth;a.push("<div class='",c,"' style='","height:",g,"px;","width:",h,"px;","top:",i,"px;","left:",j,"px;",f||"","'></div>")},this.drawFullLineMarker=function(a,b,c,d,e){var f=this.$getTop(b.start.row,d),g=d.lineHeight;b.start.row!=b.end.row&&(g+=this.$getTop(b.end.row,d)-f),a.push("<div class='",c,"' style='","height:",g,"px;","top:",f,"px;","left:0;right:0;",e||"","'></div>")
},this.drawScreenLineMarker=function(a,b,c,d,e){var f=this.$getTop(b.start.row,d),g=d.lineHeight;a.push("<div class='",c,"' style='","height:",g,"px;","top:",f,"px;","left:0;right:0;",e||"","'></div>")}}).call(f.prototype),b.Marker=f}),ace.define("ace/mouse/mouse_event",["require","exports","module","ace/lib/event","ace/lib/useragent"],function(a,b){var d=a("../lib/event"),e=a("../lib/useragent"),f=b.MouseEvent=function(a,b){this.domEvent=a,this.editor=b,this.x=this.clientX=a.clientX,this.y=this.clientY=a.clientY,this.$pos=null,this.$inSelection=null,this.propagationStopped=!1,this.defaultPrevented=!1
};(function(){this.stopPropagation=function(){d.stopPropagation(this.domEvent),this.propagationStopped=!0},this.preventDefault=function(){d.preventDefault(this.domEvent),this.defaultPrevented=!0},this.stop=function(){this.stopPropagation(),this.preventDefault()},this.getDocumentPosition=function(){return this.$pos?this.$pos:(this.$pos=this.editor.renderer.screenToTextCoordinates(this.clientX,this.clientY),this.$pos)},this.inSelection=function(){if(null!==this.$inSelection)return this.$inSelection;var a=this.editor,b=a.getSelectionRange();
if(b.isEmpty())this.$inSelection=!1;else{var c=this.getDocumentPosition();this.$inSelection=b.contains(c.row,c.column)}return this.$inSelection},this.getButton=function(){return d.getButton(this.domEvent)},this.getShiftKey=function(){return this.domEvent.shiftKey},this.getAccelKey=e.isMac?function(){return this.domEvent.metaKey}:function(){return this.domEvent.ctrlKey}}).call(f.prototype)}),ace.define("ace/layer/text",["require","exports","module","ace/lib/oop","ace/lib/dom","ace/lib/lang","ace/lib/useragent","ace/lib/event_emitter"],function(a,b){var d=a("../lib/oop"),e=a("../lib/dom"),f=a("../lib/lang"),h=(a("../lib/useragent"),a("../lib/event_emitter").EventEmitter),i=function(a){this.element=e.createElement("div"),this.element.className="ace_layer ace_text-layer",a.appendChild(this.element),this.$updateEolChar=this.$updateEolChar.bind(this)
};(function(){d.implement(this,h),this.EOF_CHAR="\xb6",this.EOL_CHAR_LF="\xac",this.EOL_CHAR_CRLF="\xa4",this.EOL_CHAR=this.EOL_CHAR_LF,this.TAB_CHAR="\u2192",this.SPACE_CHAR="\xb7",this.$padding=0,this.$updateEolChar=function(){var a="\n"==this.session.doc.getNewLineCharacter()?this.EOL_CHAR_LF:this.EOL_CHAR_CRLF;return this.EOL_CHAR!=a?(this.EOL_CHAR=a,!0):void 0},this.setPadding=function(a){this.$padding=a,this.element.style.padding="0 "+a+"px"},this.getLineHeight=function(){return this.$fontMetrics.$characterSize.height||0
},this.getCharacterWidth=function(){return this.$fontMetrics.$characterSize.width||0},this.$setFontMetrics=function(a){this.$fontMetrics=a,this.$fontMetrics.on("changeCharacterSize",function(a){this._signal("changeCharacterSize",a)}.bind(this)),this.$pollSizeChanges()},this.checkForSizeChanges=function(){this.$fontMetrics.checkForSizeChanges()},this.$pollSizeChanges=function(){return this.$pollSizeChangesTimer=this.$fontMetrics.$pollSizeChanges()},this.setSession=function(a){this.session=a,this.$computeTabString()
},this.showInvisibles=!1,this.setShowInvisibles=function(a){return this.showInvisibles==a?!1:(this.showInvisibles=a,this.$computeTabString(),!0)},this.displayIndentGuides=!0,this.setDisplayIndentGuides=function(a){return this.displayIndentGuides==a?!1:(this.displayIndentGuides=a,this.$computeTabString(),!0)},this.$tabStrings=[],this.onChangeTabSize=this.$computeTabString=function(){var a=this.session.getTabSize();this.tabSize=a;for(var b=this.$tabStrings=[0],c=1;a+1>c;c++)this.showInvisibles?b.push("<span class='ace_invisible'>"+this.TAB_CHAR+f.stringRepeat("\xa0",c-1)+"</span>"):b.push(f.stringRepeat("\xa0",c));
if(this.displayIndentGuides){this.$indentGuideRe=/\s\S| \t|\t |\s$/;var d="ace_indent-guide";if(this.showInvisibles){d+=" ace_invisible";var e=f.stringRepeat(this.SPACE_CHAR,this.tabSize),g=this.TAB_CHAR+f.stringRepeat("\xa0",this.tabSize-1)}else var e=f.stringRepeat("\xa0",this.tabSize),g=e;this.$tabStrings[" "]="<span class='"+d+"'>"+e+"</span>",this.$tabStrings["	"]="<span class='"+d+"'>"+g+"</span>"}},this.updateLines=function(a,b,c){(this.config.lastRow!=a.lastRow||this.config.firstRow!=a.firstRow)&&this.scrollLines(a),this.config=a;
for(var d=Math.max(b,a.firstRow),f=Math.min(c,a.lastRow),g=this.element.childNodes,h=0,i=a.firstRow;d>i;i++){var j=this.session.getFoldLine(i);if(j){if(j.containsRow(d)){d=j.start.row;break}i=j.end.row}h++}for(var i=d,j=this.session.getNextFoldLine(i),k=j?j.start.row:1/0;i>k&&(i=j.end.row+1,j=this.session.getNextFoldLine(i,j),k=j?j.start.row:1/0),!(i>f);){var l=g[h++];if(l){var m=[];this.$renderLine(m,i,!this.$useLineGroups(),i==k?j:!1),l.style.height=a.lineHeight*this.session.getRowLength(i)+"px",e.setInnerHtml(l,m.join(""))
}i++}},this.scrollLines=function(a){var b=this.config;if(this.config=a,!b||b.lastRow<a.firstRow)return this.update(a);if(a.lastRow<b.firstRow)return this.update(a);var c=this.element;if(b.firstRow<a.firstRow)for(var d=this.session.getFoldedRowCount(b.firstRow,a.firstRow-1);d>0;d--)c.removeChild(c.firstChild);if(b.lastRow>a.lastRow)for(var d=this.session.getFoldedRowCount(a.lastRow+1,b.lastRow);d>0;d--)c.removeChild(c.lastChild);if(a.firstRow<b.firstRow){var e=this.$renderLinesFragment(a,a.firstRow,b.firstRow-1);
c.firstChild?c.insertBefore(e,c.firstChild):c.appendChild(e)}if(a.lastRow>b.lastRow){var e=this.$renderLinesFragment(a,b.lastRow+1,a.lastRow);c.appendChild(e)}},this.$renderLinesFragment=function(a,b,c){for(var d=this.element.ownerDocument.createDocumentFragment(),f=b,g=this.session.getNextFoldLine(f),h=g?g.start.row:1/0;f>h&&(f=g.end.row+1,g=this.session.getNextFoldLine(f,g),h=g?g.start.row:1/0),!(f>c);){var i=e.createElement("div"),j=[];if(this.$renderLine(j,f,!1,f==h?g:!1),i.innerHTML=j.join(""),this.$useLineGroups())i.className="ace_line_group",d.appendChild(i),i.style.height=a.lineHeight*this.session.getRowLength(f)+"px";
else for(;i.firstChild;)d.appendChild(i.firstChild);f++}return d},this.update=function(a){this.config=a;for(var b=[],c=a.firstRow,d=a.lastRow,f=c,g=this.session.getNextFoldLine(f),h=g?g.start.row:1/0;f>h&&(f=g.end.row+1,g=this.session.getNextFoldLine(f,g),h=g?g.start.row:1/0),!(f>d);)this.$useLineGroups()&&b.push("<div class='ace_line_group' style='height:",a.lineHeight*this.session.getRowLength(f),"px'>"),this.$renderLine(b,f,!1,f==h?g:!1),this.$useLineGroups()&&b.push("</div>"),f++;this.element=e.setInnerHtml(this.element,b.join(""))
},this.$textToken={text:!0,rparen:!0,lparen:!0},this.$renderToken=function(a,b,c,d){var e=this,g=/\t|&|<|( +)|([\x00-\x1f\x80-\xa0\u1680\u180E\u2000-\u200f\u2028\u2029\u202F\u205F\u3000\uFEFF])|[\u1100-\u115F\u11A3-\u11A7\u11FA-\u11FF\u2329-\u232A\u2E80-\u2E99\u2E9B-\u2EF3\u2F00-\u2FD5\u2FF0-\u2FFB\u3000-\u303E\u3041-\u3096\u3099-\u30FF\u3105-\u312D\u3131-\u318E\u3190-\u31BA\u31C0-\u31E3\u31F0-\u321E\u3220-\u3247\u3250-\u32FE\u3300-\u4DBF\u4E00-\uA48C\uA490-\uA4C6\uA960-\uA97C\uAC00-\uD7A3\uD7B0-\uD7C6\uD7CB-\uD7FB\uF900-\uFAFF\uFE10-\uFE19\uFE30-\uFE52\uFE54-\uFE66\uFE68-\uFE6B\uFF01-\uFF60\uFFE0-\uFFE6]/g,h=function(a,c,d,g){if(c)return e.showInvisibles?"<span class='ace_invisible'>"+f.stringRepeat(e.SPACE_CHAR,a.length)+"</span>":f.stringRepeat("\xa0",a.length);
if("&"==a)return"&#38;";if("<"==a)return"&#60;";if("	"==a){var i=e.session.getScreenTabSize(b+g);return b+=i-1,e.$tabStrings[i]}if("\u3000"==a){var j=e.showInvisibles?"ace_cjk ace_invisible":"ace_cjk",k=e.showInvisibles?e.SPACE_CHAR:"";return b+=1,"<span class='"+j+"' style='width:"+2*e.config.characterWidth+"px'>"+k+"</span>"}return d?"<span class='ace_invisible ace_invalid'>"+e.SPACE_CHAR+"</span>":(b+=1,"<span class='ace_cjk' style='width:"+2*e.config.characterWidth+"px'>"+a+"</span>")},i=d.replace(g,h);if(this.$textToken[c.type])a.push(i);
else{var j="ace_"+c.type.replace(/\./g," ace_"),k="";"fold"==c.type&&(k=" style='width:"+c.value.length*this.config.characterWidth+"px;' "),a.push("<span class='",j,"'",k,">",i,"</span>")}return b+d.length},this.renderIndentGuide=function(a,b,c){var d=b.search(this.$indentGuideRe);return 0>=d||d>=c?b:" "==b[0]?(d-=d%this.tabSize,a.push(f.stringRepeat(this.$tabStrings[" "],d/this.tabSize)),b.substr(d)):"	"==b[0]?(a.push(f.stringRepeat(this.$tabStrings["	"],d)),b.substr(d)):b},this.$renderWrappedLine=function(a,b,c,d){for(var e=0,f=0,g=c[0],h=0,i=0;i<b.length;i++){var j=b[i],k=j.value;
if(0==i&&this.displayIndentGuides){if(e=k.length,k=this.renderIndentGuide(a,k,g),!k)continue;e-=k.length}if(e+k.length<g)h=this.$renderToken(a,h,j,k),e+=k.length;else{for(;e+k.length>=g;)h=this.$renderToken(a,h,j,k.substring(0,g-e)),k=k.substring(g-e),e=g,d||a.push("</div>","<div class='ace_line' style='height:",this.config.lineHeight,"px'>"),f++,h=0,g=c[f]||Number.MAX_VALUE;0!=k.length&&(e+=k.length,h=this.$renderToken(a,h,j,k))}}},this.$renderSimpleLine=function(a,b){var c=0,d=b[0],e=d.value;this.displayIndentGuides&&(e=this.renderIndentGuide(a,e)),e&&(c=this.$renderToken(a,c,d,e));
for(var f=1;f<b.length;f++)d=b[f],e=d.value,c=this.$renderToken(a,c,d,e)},this.$renderLine=function(a,b,c,d){if(!d&&0!=d&&(d=this.session.getFoldLine(b)),d)var e=this.$getFoldLineTokens(b,d);else var e=this.session.getTokens(b);if(c||a.push("<div class='ace_line' style='height:",this.config.lineHeight*(this.$useLineGroups()?1:this.session.getRowLength(b)),"px'>"),e.length){var f=this.session.getRowSplitData(b);f&&f.length?this.$renderWrappedLine(a,e,f,c):this.$renderSimpleLine(a,e)}this.showInvisibles&&(d&&(b=d.end.row),a.push("<span class='ace_invisible'>",b==this.session.getLength()-1?this.EOF_CHAR:this.EOL_CHAR,"</span>")),c||a.push("</div>")
},this.$getFoldLineTokens=function(a,b){function c(a,b,c){for(var d=0,f=0;f+a[d].value.length<b;)if(f+=a[d].value.length,d++,d==a.length)return;if(f!=b){var g=a[d].value.substring(b-f);g.length>c-b&&(g=g.substring(0,c-b)),e.push({type:a[d].type,value:g}),f=b+g.length,d+=1}for(;c>f&&d<a.length;){var g=a[d].value;g.length+f>c?e.push({type:a[d].type,value:g.substring(0,c-f)}):e.push(a[d]),f+=g.length,d+=1}}var d=this.session,e=[],f=d.getTokens(a);return b.walk(function(a,b,g,h,i){null!=a?e.push({type:"fold",value:a}):(i&&(f=d.getTokens(b)),f.length&&c(f,h,g))
},b.end.row,this.session.getLine(b.end.row).length),e},this.$useLineGroups=function(){return this.session.getUseWrapMode()},this.destroy=function(){clearInterval(this.$pollSizeChangesTimer),this.$measureNode&&this.$measureNode.parentNode.removeChild(this.$measureNode),delete this.$measureNode}}).call(i.prototype),b.Text=i}),ace.define("ace/tooltip",["require","exports","module","ace/lib/oop","ace/lib/dom"],function(a,b){function d(a){this.isOpen=!1,this.$element=null,this.$parentNode=a}var f=(a("./lib/oop"),a("./lib/dom"));
(function(){this.$init=function(){return this.$element=f.createElement("div"),this.$element.className="ace_tooltip",this.$element.style.display="none",this.$parentNode.appendChild(this.$element),this.$element},this.getElement=function(){return this.$element||this.$init()},this.setText=function(a){f.setInnerText(this.getElement(),a)},this.setHtml=function(a){this.getElement().innerHTML=a},this.setPosition=function(a,b){this.getElement().style.left=a+"px",this.getElement().style.top=b+"px"},this.setClassName=function(a){f.addCssClass(this.getElement(),a)
},this.show=function(a,b,c){null!=a&&this.setText(a),null!=b&&null!=c&&this.setPosition(b,c),this.isOpen||(this.getElement().style.display="block",this.isOpen=!0)},this.hide=function(){this.isOpen&&(this.getElement().style.display="none",this.isOpen=!1)},this.getHeight=function(){return this.getElement().offsetHeight},this.getWidth=function(){return this.getElement().offsetWidth}}).call(d.prototype),b.Tooltip=d}),ace.define("ace/layer/cursor",["require","exports","module","ace/lib/dom"],function(a,b){var e,d=a("../lib/dom"),f=function(a){this.element=d.createElement("div"),this.element.className="ace_layer ace_cursor-layer",a.appendChild(this.element),void 0===e&&(e="opacity"in this.element),this.isVisible=!1,this.isBlinking=!0,this.blinkInterval=1e3,this.smoothBlinking=!1,this.cursors=[],this.cursor=this.addCursor(),d.addCssClass(this.element,"ace_hidden-cursors"),this.$updateCursors=this.$updateVisibility.bind(this)
};(function(){this.$updateVisibility=function(a){for(var b=this.cursors,c=b.length;c--;)b[c].style.visibility=a?"":"hidden"},this.$updateOpacity=function(a){for(var b=this.cursors,c=b.length;c--;)b[c].style.opacity=a?"":"0"},this.$padding=0,this.setPadding=function(a){this.$padding=a},this.setSession=function(a){this.session=a},this.setBlinking=function(a){a!=this.isBlinking&&(this.isBlinking=a,this.restartTimer())},this.setBlinkInterval=function(a){a!=this.blinkInterval&&(this.blinkInterval=a,this.restartTimer())
},this.setSmoothBlinking=function(a){a!=this.smoothBlinking&&!e&&(this.smoothBlinking=a,d.setCssClass(this.element,"ace_smooth-blinking",a),this.$updateCursors(!0),this.$updateCursors=(a?this.$updateOpacity:this.$updateVisibility).bind(this),this.restartTimer())},this.addCursor=function(){var a=d.createElement("div");return a.className="ace_cursor",this.element.appendChild(a),this.cursors.push(a),a},this.removeCursor=function(){if(this.cursors.length>1){var a=this.cursors.pop();return a.parentNode.removeChild(a),a
}},this.hideCursor=function(){this.isVisible=!1,d.addCssClass(this.element,"ace_hidden-cursors"),this.restartTimer()},this.showCursor=function(){this.isVisible=!0,d.removeCssClass(this.element,"ace_hidden-cursors"),this.restartTimer()},this.restartTimer=function(){var a=this.$updateCursors;if(clearInterval(this.intervalId),clearTimeout(this.timeoutId),this.smoothBlinking&&d.removeCssClass(this.element,"ace_smooth-blinking"),a(!0),this.isBlinking&&this.blinkInterval&&this.isVisible){this.smoothBlinking&&setTimeout(function(){d.addCssClass(this.element,"ace_smooth-blinking")
}.bind(this));var b=function(){this.timeoutId=setTimeout(function(){a(!1)},.6*this.blinkInterval)}.bind(this);this.intervalId=setInterval(function(){a(!0),b()},this.blinkInterval),b()}},this.getPixelPosition=function(a,b){if(!this.config||!this.session)return{left:0,top:0};a||(a=this.session.selection.getCursor());var c=this.session.documentToScreenPosition(a),d=this.$padding+c.column*this.config.characterWidth,e=(c.row-(b?this.config.firstRowScreen:0))*this.config.lineHeight;return{left:d,top:e}},this.update=function(a){this.config=a;
var b=this.session.$selectionMarkers,c=0,d=0;(void 0===b||0===b.length)&&(b=[{cursor:null}]);for(var c=0,e=b.length;e>c;c++){var f=this.getPixelPosition(b[c].cursor,!0);if(!((f.top>a.height+a.offset||f.top<0)&&c>1)){var g=(this.cursors[d++]||this.addCursor()).style;g.left=f.left+"px",g.top=f.top+"px",g.width=a.characterWidth+"px",g.height=a.lineHeight+"px"}}for(;this.cursors.length>d;)this.removeCursor();var h=this.session.getOverwrite();this.$setOverwrite(h),this.$pixelPos=f,this.restartTimer()},this.$setOverwrite=function(a){a!=this.overwrite&&(this.overwrite=a,a?d.addCssClass(this.element,"ace_overwrite-cursors"):d.removeCssClass(this.element,"ace_overwrite-cursors"))
},this.destroy=function(){clearInterval(this.intervalId),clearTimeout(this.timeoutId)}}).call(f.prototype),b.Cursor=f}),ace.define("ace/mouse/default_gutter_handler",["require","exports","module","ace/lib/dom","ace/lib/oop","ace/lib/event","ace/tooltip"],function(a,b){function d(a){function b(){var b=l.getDocumentPosition().row,e=i.$annotations[b];if(!e)return c();var f=g.session.getLength();if(b==f){var h=g.renderer.pixelToScreenCoordinates(0,l.y).row,k=l.$pos;if(h>g.session.documentToScreenRow(k.row,k.column))return c()
}if(m!=e)if(m=e.text.join("<br/>"),j.setHtml(m),j.show(),g.on("mousewheel",c),a.$tooltipFollowsMouse)d(l);else{var n=i.$cells[b].element,o=n.getBoundingClientRect(),p=j.getElement().style;p.left=o.right+"px",p.top=o.bottom+"px"}}function c(){k&&(k=clearTimeout(k)),m&&(j.hide(),m=null,g.removeEventListener("mousewheel",c))}function d(a){j.setPosition(a.x,a.y)}var g=a.editor,i=g.renderer.$gutterLayer,j=new e(g.container);a.editor.setDefaultHandler("guttermousedown",function(b){if(g.isFocused()&&0==b.getButton()){var c=i.getRegion(b);
if("foldWidgets"!=c){var d=b.getDocumentPosition().row,e=g.session.selection;if(b.getShiftKey())e.selectTo(d,0);else{if(2==b.domEvent.detail)return g.selectAll(),b.preventDefault();a.$clickSelection=g.selection.getLineRange(d)}return a.setState("selectByLines"),a.captureMouse(b),b.preventDefault()}}});var k,l,m;a.editor.setDefaultHandler("guttermousemove",function(e){var g=e.domEvent.target||e.domEvent.srcElement;return f.hasCssClass(g,"ace_fold-widget")?c():(m&&a.$tooltipFollowsMouse&&d(e),l=e,k||(k=setTimeout(function(){k=null,l&&!a.isMousePressed?b():c()
},50)),void 0)}),h.addListener(g.renderer.$gutter,"mouseout",function(){l=null,m&&!k&&(k=setTimeout(function(){k=null,c()},50))}),g.on("changeSession",c)}function e(a){i.call(this,a)}var f=a("../lib/dom"),g=a("../lib/oop"),h=a("../lib/event"),i=a("../tooltip").Tooltip;g.inherits(e,i),function(){this.setPosition=function(a,b){var c=window.innerWidth||document.documentElement.clientWidth,d=window.innerHeight||document.documentElement.clientHeight,e=this.getWidth(),f=this.getHeight();a+=15,b+=15,a+e>c&&(a-=a+e-c),b+f>d&&(b-=20+f),i.prototype.setPosition.call(this,a,b)
}}.call(e.prototype),b.GutterHandler=d}),ace.define("ace/scrollbar",["require","exports","module","ace/lib/oop","ace/lib/dom","ace/lib/event","ace/lib/event_emitter"],function(a,b){var d=a("./lib/oop"),e=a("./lib/dom"),f=a("./lib/event"),g=a("./lib/event_emitter").EventEmitter,h=function(a){this.element=e.createElement("div"),this.element.className="ace_scrollbar ace_scrollbar"+this.classSuffix,this.inner=e.createElement("div"),this.inner.className="ace_scrollbar-inner",this.element.appendChild(this.inner),a.appendChild(this.element),this.setVisible(!1),this.skipEvent=!1,f.addListener(this.element,"scroll",this.onScroll.bind(this)),f.addListener(this.element,"mousedown",f.preventDefault)
};(function(){d.implement(this,g),this.setVisible=function(a){this.element.style.display=a?"":"none",this.isVisible=a}}).call(h.prototype);var i=function(a,b){h.call(this,a),this.scrollTop=0,b.$scrollbarWidth=this.width=e.scrollbarWidth(a.ownerDocument),this.inner.style.width=this.element.style.width=(this.width||15)+5+"px"};d.inherits(i,h),function(){this.classSuffix="-v",this.onScroll=function(){this.skipEvent||(this.scrollTop=this.element.scrollTop,this._emit("scroll",{data:this.scrollTop})),this.skipEvent=!1
},this.getWidth=function(){return this.isVisible?this.width:0},this.setHeight=function(a){this.element.style.height=a+"px"},this.setInnerHeight=function(a){this.inner.style.height=a+"px"},this.setScrollHeight=function(a){this.inner.style.height=a+"px"},this.setScrollTop=function(a){this.scrollTop!=a&&(this.skipEvent=!0,this.scrollTop=this.element.scrollTop=a)}}.call(i.prototype);var j=function(a,b){h.call(this,a),this.scrollLeft=0,this.height=b.$scrollbarWidth,this.inner.style.height=this.element.style.height=(this.height||15)+5+"px"
};d.inherits(j,h),function(){this.classSuffix="-h",this.onScroll=function(){this.skipEvent||(this.scrollLeft=this.element.scrollLeft,this._emit("scroll",{data:this.scrollLeft})),this.skipEvent=!1},this.getHeight=function(){return this.isVisible?this.height:0},this.setWidth=function(a){this.element.style.width=a+"px"},this.setInnerWidth=function(a){this.inner.style.width=a+"px"},this.setScrollWidth=function(a){this.inner.style.width=a+"px"},this.setScrollLeft=function(a){this.scrollLeft!=a&&(this.skipEvent=!0,this.scrollLeft=this.element.scrollLeft=a)
}}.call(j.prototype),b.ScrollBar=i,b.ScrollBarV=i,b.ScrollBarH=j,b.VScrollBar=i,b.HScrollBar=j}),ace.define("ace/mouse/default_handlers",["require","exports","module","ace/lib/dom","ace/lib/event","ace/lib/useragent"],function(a,b){function d(a){a.$clickSelection=null;var b=a.editor;b.setDefaultHandler("mousedown",this.onMouseDown.bind(a)),b.setDefaultHandler("dblclick",this.onDoubleClick.bind(a)),b.setDefaultHandler("tripleclick",this.onTripleClick.bind(a)),b.setDefaultHandler("quadclick",this.onQuadClick.bind(a)),b.setDefaultHandler("mousewheel",this.onMouseWheel.bind(a));
var c=["select","startSelect","selectEnd","selectAllEnd","selectByWordsEnd","selectByLinesEnd","dragWait","dragWaitEnd","focusWait"];c.forEach(function(b){a[b]=this[b]},this),a.selectByLines=this.extendSelectionBy.bind(a,"getLineRange"),a.selectByWords=this.extendSelectionBy.bind(a,"getWordRange")}function e(a,b,c,d){return Math.sqrt(Math.pow(c-a,2)+Math.pow(d-b,2))}function f(a,b){if(a.start.row==a.end.row)var c=2*b.column-a.start.column-a.end.column;else if(a.start.row!=a.end.row-1||a.start.column||a.end.column)var c=2*b.row-a.start.row-a.end.row;
else var c=b.column-4;return 0>c?{cursor:a.start,anchor:a.end}:{cursor:a.end,anchor:a.start}}var j=(a("../lib/dom"),a("../lib/event"),a("../lib/useragent"),0);(function(){this.onMouseDown=function(a){var b=a.inSelection(),c=a.getDocumentPosition();this.mousedownEvent=a;var d=this.editor,e=a.getButton();if(0!==e){var f=d.getSelectionRange(),g=f.isEmpty();return g&&d.selection.moveToPosition(c),d.textInput.onContextMenu(a.domEvent),void 0}return!b||d.isFocused()||(d.focus(),!this.$focusTimout||this.$clickSelection||d.inMultiSelectMode)?(this.captureMouse(a),!b||this.$clickSelection||a.getShiftKey()||d.inMultiSelectMode?this.startSelect(c):b&&(this.mousedownEvent.time=Date.now(),this.startSelect(c)),a.preventDefault()):(this.mousedownEvent.time=Date.now(),this.setState("focusWait"),this.captureMouse(a),void 0)
},this.startSelect=function(a){a=a||this.editor.renderer.screenToTextCoordinates(this.x,this.y);var b=this.editor,c=this.mousedownEvent.getShiftKey();c?b.selection.selectToPosition(a):this.$clickSelection||b.selection.moveToPosition(a),b.renderer.scroller.setCapture&&b.renderer.scroller.setCapture(),b.setStyle("ace_selecting"),this.setState("select")},this.select=function(){var a,b=this.editor,c=b.renderer.screenToTextCoordinates(this.x,this.y);if(this.$clickSelection){var d=this.$clickSelection.comparePoint(c);
if(-1==d)a=this.$clickSelection.end;else if(1==d)a=this.$clickSelection.start;else{var e=f(this.$clickSelection,c);c=e.cursor,a=e.anchor}b.selection.setSelectionAnchor(a.row,a.column)}b.selection.selectToPosition(c),b.renderer.scrollCursorIntoView()},this.extendSelectionBy=function(a){var b,c=this.editor,d=c.renderer.screenToTextCoordinates(this.x,this.y),e=c.selection[a](d.row,d.column);if(this.$clickSelection){var g=this.$clickSelection.comparePoint(e.start),h=this.$clickSelection.comparePoint(e.end);if(-1==g&&0>=h)b=this.$clickSelection.end,(e.end.row!=d.row||e.end.column!=d.column)&&(d=e.start);
else if(1==h&&g>=0)b=this.$clickSelection.start,(e.start.row!=d.row||e.start.column!=d.column)&&(d=e.end);else if(-1==g&&1==h)d=e.end,b=e.start;else{var i=f(this.$clickSelection,d);d=i.cursor,b=i.anchor}c.selection.setSelectionAnchor(b.row,b.column)}c.selection.selectToPosition(d),c.renderer.scrollCursorIntoView()},this.selectEnd=this.selectAllEnd=this.selectByWordsEnd=this.selectByLinesEnd=function(){this.editor.unsetStyle("ace_selecting"),this.editor.renderer.scroller.releaseCapture&&this.editor.renderer.scroller.releaseCapture()
},this.focusWait=function(){var a=e(this.mousedownEvent.x,this.mousedownEvent.y,this.x,this.y),b=Date.now();(a>j||b-this.mousedownEvent.time>this.$focusTimout)&&this.startSelect(this.mousedownEvent.getDocumentPosition())},this.onDoubleClick=function(a){var b=a.getDocumentPosition(),c=this.editor,d=c.session,e=d.getBracketRange(b);e?(e.isEmpty()&&(e.start.column--,e.end.column++),this.setState("select")):(e=c.selection.getWordRange(b.row,b.column),this.setState("selectByWords")),this.$clickSelection=e,this[this.state]&&this[this.state](a)
},this.onTripleClick=function(a){var b=a.getDocumentPosition(),c=this.editor;this.setState("selectByLines"),this.$clickSelection=c.selection.getLineRange(b.row),this[this.state]&&this[this.state](a)},this.onQuadClick=function(){var b=this.editor;b.selectAll(),this.$clickSelection=b.getSelectionRange(),this.setState("selectAll")},this.onMouseWheel=function(a){if(!a.getAccelKey()){a.getShiftKey()&&a.wheelY&&!a.wheelX&&(a.wheelX=a.wheelY,a.wheelY=0);var b=a.domEvent.timeStamp,c=b-(this.$lastScrollTime||0),d=this.editor,e=d.renderer.isScrollableBy(a.wheelX*a.speed,a.wheelY*a.speed);
return e||200>c?(this.$lastScrollTime=b,d.renderer.scrollBy(a.wheelX*a.speed,a.wheelY*a.speed),a.stop()):void 0}}}).call(d.prototype),b.DefaultHandlers=d}),ace.define("ace/renderloop",["require","exports","module","ace/lib/event"],function(a,b){var d=a("./lib/event"),e=function(a,b){this.onRender=a,this.pending=!1,this.changes=0,this.window=b||window};(function(){this.schedule=function(a){if(this.changes=this.changes|a,!this.pending&&this.changes){this.pending=!0;var b=this;d.nextFrame(function(){b.pending=!1;
for(var a;a=b.changes;)b.changes=0,b.onRender(a)},this.window)}}}).call(e.prototype),b.RenderLoop=e}),ace.define("ace/mouse/mouse_handler",["require","exports","module","ace/lib/event","ace/lib/useragent","ace/mouse/default_handlers","ace/mouse/default_gutter_handler","ace/mouse/mouse_event","ace/mouse/dragdrop_handler","ace/config"],function(a,b){var d=a("../lib/event"),e=a("../lib/useragent"),f=a("./default_handlers").DefaultHandlers,g=a("./default_gutter_handler").GutterHandler,h=a("./mouse_event").MouseEvent,i=a("./dragdrop_handler").DragdropHandler,j=a("../config"),k=function(a){this.editor=a,new f(this),new g(this),new i(this);
var b=a.renderer.getMouseEventTarget();d.addListener(b,"click",this.onMouseEvent.bind(this,"click")),d.addListener(b,"mousemove",this.onMouseMove.bind(this,"mousemove")),d.addMultiMouseDownListener(b,[300,300,250],this,"onMouseEvent"),a.renderer.scrollBarV&&(d.addMultiMouseDownListener(a.renderer.scrollBarV.inner,[300,300,250],this,"onMouseEvent"),d.addMultiMouseDownListener(a.renderer.scrollBarH.inner,[300,300,250],this,"onMouseEvent")),d.addMouseWheelListener(a.container,this.onMouseWheel.bind(this,"mousewheel"));
var c=a.renderer.$gutter;d.addListener(c,"mousedown",this.onMouseEvent.bind(this,"guttermousedown")),d.addListener(c,"click",this.onMouseEvent.bind(this,"gutterclick")),d.addListener(c,"dblclick",this.onMouseEvent.bind(this,"gutterdblclick")),d.addListener(c,"mousemove",this.onMouseEvent.bind(this,"guttermousemove")),d.addListener(b,"mousedown",function(){a.focus()}),d.addListener(c,"mousedown",function(b){return a.focus(),d.preventDefault(b)})};(function(){this.onMouseEvent=function(a,b){this.editor._emit(a,new h(b,this.editor))
},this.onMouseMove=function(a,b){var c=this.editor._eventRegistry&&this.editor._eventRegistry.mousemove;c&&c.length&&this.editor._emit(a,new h(b,this.editor))},this.onMouseWheel=function(a,b){var c=new h(b,this.editor);c.speed=2*this.$scrollSpeed,c.wheelX=b.wheelX,c.wheelY=b.wheelY,this.editor._emit(a,c)},this.setState=function(a){this.state=a},this.captureMouse=function(a,b){this.x=a.x,this.y=a.y,this.isMousePressed=!0;var c=this.editor.renderer;c.$keepTextAreaAtCursor&&(c.$keepTextAreaAtCursor=null);var f=this,g=function(a){f.x=a.clientX,f.y=a.clientY,b&&b(a),f.mouseEvent=new h(a,f.editor),f.$mouseMoved=!0
},i=function(a){clearInterval(k),j(),f[f.state+"End"]&&f[f.state+"End"](a),f.$clickSelection=null,null==c.$keepTextAreaAtCursor&&(c.$keepTextAreaAtCursor=!0,c.$moveTextAreaToCursor()),f.isMousePressed=!1,f.$onCaptureMouseMove=f.releaseMouse=null,f.onMouseEvent("mouseup",a)},j=function(){f[f.state]&&f[f.state](),f.$mouseMoved=!1};if(e.isOldIE&&"dblclick"==a.domEvent.type)return setTimeout(function(){i(a)});f.$onCaptureMouseMove=g,f.releaseMouse=d.capture(this.editor.container,g,i);var k=setInterval(j,20)},this.releaseMouse=null
}).call(k.prototype),j.defineOptions(k.prototype,"mouseHandler",{scrollSpeed:{initialValue:2},dragDelay:{initialValue:150},dragEnabled:{initialValue:!0},focusTimout:{initialValue:0},tooltipFollowsMouse:{initialValue:!0}}),b.MouseHandler=k}),ace.define("ace/layer/font_metrics",["require","exports","module","ace/lib/oop","ace/lib/dom","ace/lib/lang","ace/lib/event_emitter"],function(a,b){var d=a("../lib/oop"),e=a("../lib/dom"),f=a("../lib/lang"),g=a("../lib/event_emitter").EventEmitter,h=0,i=b.FontMetrics=function(a){this.el=e.createElement("div"),this.$setMeasureNodeStyles(this.el.style,!0),this.$main=e.createElement("div"),this.$setMeasureNodeStyles(this.$main.style),this.$measureNode=e.createElement("div"),this.$setMeasureNodeStyles(this.$measureNode.style),this.el.appendChild(this.$main),this.el.appendChild(this.$measureNode),a.appendChild(this.el),h||this.$testFractionalRect(),this.$measureNode.textContent=f.stringRepeat("X",h),this.$characterSize={width:0,height:0},this.checkForSizeChanges()
};(function(){d.implement(this,g),this.$characterSize={width:0,height:0},this.$testFractionalRect=function(){var a=e.createElement("div");this.$setMeasureNodeStyles(a.style),a.style.width="0.2px",document.documentElement.appendChild(a);var b=a.getBoundingClientRect().width;h=b>0&&1>b?1:100,a.parentNode.removeChild(a)},this.$setMeasureNodeStyles=function(a,b){a.width=a.height="auto",a.left=a.top="-100px",a.visibility="hidden",a.position="fixed",a.whiteSpace="pre",a.font="inherit",a.overflow=b?"hidden":"visible"
},this.checkForSizeChanges=function(){var a=this.$measureSizes();if(a&&(this.$characterSize.width!==a.width||this.$characterSize.height!==a.height)){this.$measureNode.style.fontWeight="bold";var b=this.$measureSizes();this.$measureNode.style.fontWeight="",this.$characterSize=a,this.charSizes=Object.create(null),this.allowBoldFonts=b&&b.width===a.width&&b.height===a.height,this._emit("changeCharacterSize",{data:a})}},this.$pollSizeChanges=function(){if(this.$pollSizeChangesTimer)return this.$pollSizeChangesTimer;
var a=this;return this.$pollSizeChangesTimer=setInterval(function(){a.checkForSizeChanges()},500)},this.setPolling=function(a){a?this.$pollSizeChanges():this.$pollSizeChangesTimer&&this.$pollSizeChangesTimer},this.$measureSizes=function(){var a=this.$measureNode.getBoundingClientRect(),b={height:a.height,width:a.width/h};return 0===b.width||0===b.height?null:b},this.$measureCharWidth=function(a){this.$main.textContent=f.stringRepeat(a,h);var b=this.$main.getBoundingClientRect();return b.width/h},this.getCharacterWidth=function(a){var b=this.charSizes[a];
return void 0===b&&(this.charSizes[a]=this.$measureCharWidth(a)/this.$characterSize.width),b},this.destroy=function(){clearInterval(this.$pollSizeChangesTimer),this.el&&this.el.parentNode&&this.el.parentNode.removeChild(this.el)}}).call(i.prototype)}),ace.define("ace/keyboard/textinput",["require","exports","module","ace/lib/event","ace/lib/useragent","ace/lib/dom","ace/lib/lang"],function(a,b){var d=a("../lib/event"),e=a("../lib/useragent"),f=a("../lib/dom"),g=a("../lib/lang"),h=e.isChrome<18,i=function(a,b){function c(a){if(!p){if(C)b=0,c=a?0:k.value.length-1;
else var b=a?2:1,c=2;try{k.setSelectionRange(b,c)}catch(d){}}}function i(){p||(k.value=l,e.isWebKit&&v.schedule())}function j(){setTimeout(function(){q&&(k.style.cssText=q,q=""),null==b.renderer.$keepTextAreaAtCursor&&(b.renderer.$keepTextAreaAtCursor=!0,b.renderer.$moveTextAreaToCursor())},0)}var k=f.createElement("textarea");k.className="ace_text-input",e.isTouchPad&&k.setAttribute("x-palm-disable-auto-cap",!0),k.wrap="off",k.autocorrect="off",k.autocapitalize="off",k.spellcheck=!1,k.style.opacity="0",a.insertBefore(k,a.firstChild);
var l="",m=!1,n=!1,o=!1,p=!1,q="",r=!0;try{var s=document.activeElement===k}catch(t){}d.addListener(k,"blur",function(){b.onBlur(),s=!1}),d.addListener(k,"focus",function(){s=!0,b.onFocus(),c()}),this.focus=function(){k.focus()},this.blur=function(){k.blur()},this.isFocused=function(){return s};var u=g.delayedCall(function(){s&&c(r)}),v=g.delayedCall(function(){p||(k.value=l,s&&c())});e.isWebKit||b.addEventListener("changeSelection",function(){b.selection.isEmpty()!=r&&(r=!r,u.schedule())}),i(),s&&b.onFocus();
var w=function(a){return 0===a.selectionStart&&a.selectionEnd===a.value.length};if(!k.setSelectionRange&&k.createTextRange&&(k.setSelectionRange=function(a,b){var c=this.createTextRange();c.collapse(!0),c.moveStart("character",a),c.moveEnd("character",b),c.select()},w=function(a){try{var b=a.ownerDocument.selection.createRange()}catch(c){}return b&&b.parentElement()==a?b.text==a.value:!1}),e.isOldIE){var x=!1,y=function(a){if(!x){var b=k.value;if(!p&&b&&b!=l)return a&&b==l[0]?z.schedule():(E(b),x=!0,i(),x=!1,void 0)
}},z=g.delayedCall(y);d.addListener(k,"propertychange",y);var A={13:1,27:1};d.addListener(k,"keyup",function(a){return p&&(!k.value||A[a.keyCode])&&setTimeout(L,0),(k.value.charCodeAt(0)||0)<129?z.call():(p?K():J(),void 0)}),d.addListener(k,"keydown",function(){z.schedule(50)})}var B=function(){m?m=!1:n?n=!1:w(k)?(b.selectAll(),c()):C&&c(b.selection.isEmpty())},C=null;this.setInputHandler=function(a){C=a},this.getInputHandler=function(){return C};var D=!1,E=function(a){C&&(a=C(a),C=null),o?(c(),a&&b.onPaste(a),o=!1):a==l.charAt(0)?D?b.execCommand("del",{source:"ace"}):b.execCommand("backspace",{source:"ace"}):(a.substring(0,2)==l?a=a.substr(2):a.charAt(0)==l.charAt(0)?a=a.substr(1):a.charAt(a.length-1)==l.charAt(0)&&(a=a.slice(0,-1)),a.charAt(a.length-1)==l.charAt(0)&&(a=a.slice(0,-1)),a&&b.onTextInput(a)),D&&(D=!1)
},F=function(){if(!p){var b=k.value;E(b),i()}},G=function(a){var e=b.getCopyText();if(!e)return d.preventDefault(a),void 0;var f=a.clipboardData||window.clipboardData;if(f&&!h){var g=f.setData("Text",e);g&&(b.onCut(),d.preventDefault(a))}g||(m=!0,k.value=e,k.select(),setTimeout(function(){m=!1,i(),c(),b.onCut()}))},H=function(a){var e=b.getCopyText();if(!e)return d.preventDefault(a),void 0;var f=a.clipboardData||window.clipboardData;if(f&&!h){var g=f.setData("Text",e);g&&(b.onCopy(),d.preventDefault(a))}g||(n=!0,k.value=e,k.select(),setTimeout(function(){n=!1,i(),c(),b.onCopy()
}))},I=function(a){var f=a.clipboardData||window.clipboardData;if(f){var g=f.getData("Text");g&&b.onPaste(g),e.isIE&&setTimeout(c),d.preventDefault(a)}else k.value="",o=!0};d.addCommandKeyListener(k,b.onCommandKey.bind(b)),d.addListener(k,"select",B),d.addListener(k,"input",F),d.addListener(k,"cut",G),d.addListener(k,"copy",H),d.addListener(k,"paste",I),!("oncut"in k&&"oncopy"in k&&"onpaste"in k||!d.addListener(a,"keydown",function(a){if((!e.isMac||a.metaKey)&&a.ctrlKey)switch(a.keyCode){case 67:H(a);break;case 86:I(a);
break;case 88:G(a)}}));var J=function(){!p&&b.onCompositionStart&&(p={},b.onCompositionStart(),setTimeout(K,0),b.on("mousedown",L),b.selection.isEmpty()||(b.insert(""),b.session.markUndoGroup(),b.selection.clearSelection()),b.session.markUndoGroup())},K=function(){if(p&&b.onCompositionUpdate){var a=k.value.replace(/\x01/g,"");if(p.lastValue!==a&&(b.onCompositionUpdate(a),p.lastValue&&b.undo(),p.lastValue=a,p.lastValue)){var c=b.selection.getRange();b.insert(p.lastValue),b.session.markUndoGroup(),p.range=b.selection.getRange(),b.selection.setRange(c),b.selection.clearSelection()
}}},L=function(a){if(b.onCompositionEnd){var c=p;p=!1;var d=setTimeout(function(){d=null;var a=k.value.replace(/\x01/g,"");p||(a==c.lastValue?i():!c.lastValue&&a&&(i(),E(a)))});C=function(a){return d&&clearTimeout(d),a=a.replace(/\x01/g,""),a==c.lastValue?"":(c.lastValue&&d&&b.undo(),a)},b.onCompositionEnd(),b.removeListener("mousedown",L),"compositionend"==a.type&&c.range&&b.selection.setRange(c.range)}},M=g.delayedCall(K,50);if(d.addListener(k,"compositionstart",J),e.isGecko?d.addListener(k,"text",function(){M.schedule()
}):(d.addListener(k,"keyup",function(){M.schedule()}),d.addListener(k,"keydown",function(){M.schedule()})),d.addListener(k,"compositionend",L),this.getElement=function(){return k},this.setReadOnly=function(a){k.readOnly=a},this.onContextMenu=function(a){D=!0,q||(q=k.style.cssText),k.style.cssText="z-index:100000;"+(e.isIE?"opacity:0.1;":""),c(b.selection.isEmpty()),b._emit("nativecontextmenu",{target:b,domEvent:a});var g=b.container.getBoundingClientRect(),h=f.computedStyle(b.container),i=g.top+(parseInt(h.borderTopWidth)||0),l=g.left+(parseInt(g.borderLeftWidth)||0),m=g.bottom-i-k.clientHeight,n=function(a){k.style.left=a.clientX-l-2+"px",k.style.top=Math.min(a.clientY-i-2,m)+"px"
};n(a),"mousedown"==a.type&&(b.renderer.$keepTextAreaAtCursor&&(b.renderer.$keepTextAreaAtCursor=null),e.isWin&&d.capture(b.container,n,j))},this.onContextMenuClose=j,!e.isGecko||e.isMac){var N=function(a){b.textInput.onContextMenu(a),j()};d.addListener(b.renderer.scroller,"contextmenu",N),d.addListener(k,"contextmenu",N)}};b.TextInput=i}),ace.define("ace/lib/lang",["require","exports","module"],function(a,b){b.last=function(a){return a[a.length-1]},b.stringReverse=function(a){return a.split("").reverse().join("")
},b.stringRepeat=function(a,b){for(var c="";b>0;)1&b&&(c+=a),(b>>=1)&&(a+=a);return c};var d=/^\s\s*/,e=/\s\s*$/;b.stringTrimLeft=function(a){return a.replace(d,"")},b.stringTrimRight=function(a){return a.replace(e,"")},b.copyObject=function(a){var b={};for(var c in a)b[c]=a[c];return b},b.copyArray=function(a){for(var b=[],c=0,d=a.length;d>c;c++)b[c]=a[c]&&"object"==typeof a[c]?this.copyObject(a[c]):a[c];return b},b.deepCopy=function(a){if("object"!=typeof a||!a)return a;var c=a.constructor;if(c===RegExp)return a;
var d=c();for(var e in a)d[e]="object"==typeof a[e]?b.deepCopy(a[e]):a[e];return d},b.arrayToMap=function(a){for(var b={},c=0;c<a.length;c++)b[a[c]]=1;return b},b.createMap=function(a){var b=Object.create(null);for(var c in a)b[c]=a[c];return b},b.arrayRemove=function(a,b){for(var c=0;c<=a.length;c++)b===a[c]&&a.splice(c,1)},b.escapeRegExp=function(a){return a.replace(/([.*+?^${}()|[\]\/\\])/g,"\\$1")},b.escapeHTML=function(a){return a.replace(/&/g,"&#38;").replace(/"/g,"&#34;").replace(/'/g,"&#39;").replace(/</g,"&#60;")
},b.getMatchOffsets=function(a,b){var c=[];return a.replace(b,function(a){c.push({offset:arguments[arguments.length-2],length:a.length})}),c},b.deferredCall=function(a){var b=null,c=function(){b=null,a()},d=function(a){return d.cancel(),b=setTimeout(c,a||0),d};return d.schedule=d,d.call=function(){return this.cancel(),a(),d},d.cancel=function(){return clearTimeout(b),b=null,d},d.isPending=function(){return b},d},b.delayedCall=function(a,b){var c=null,d=function(){c=null,a()},e=function(a){null==c&&(c=setTimeout(d,a||b))
};return e.delay=function(a){c&&clearTimeout(c),c=setTimeout(d,a||b)},e.schedule=e,e.call=function(){this.cancel(),a()},e.cancel=function(){c&&clearTimeout(c),c=null},e.isPending=function(){return c},e}}),ace.define("ace/multi_select",["require","exports","module","ace/range_list","ace/range","ace/selection","ace/mouse/multi_select_handler","ace/lib/event","ace/lib/lang","ace/commands/multi_select_commands","ace/search","ace/edit_session","ace/editor","ace/config"],function(a,b){function d(a,b,c){return p.$options.wrap=!0,p.$options.needle=b,p.$options.backwards=-1==c,p.find(a)
}function e(a,b){return a.row==b.row&&a.column==b.column}function f(a){a.$multiselectOnSessionChange||(a.$onAddRange=a.$onAddRange.bind(a),a.$onRemoveRange=a.$onRemoveRange.bind(a),a.$onMultiSelect=a.$onMultiSelect.bind(a),a.$onSingleSelect=a.$onSingleSelect.bind(a),a.$multiselectOnSessionChange=b.onSessionChange.bind(a),a.$multiselectOnSessionChange(a),a.on("changeSession",a.$multiselectOnSessionChange),a.on("mousedown",k),a.commands.addCommands(n.defaultCommands),g(a))}function g(a){function b(){d&&(a.renderer.setMouseCursor(""),d=!1)
}var c=a.textInput.getElement(),d=!1;l.addListener(c,"keydown",function(c){18!=c.keyCode||c.ctrlKey||c.shiftKey||c.metaKey?d&&b():d||(a.renderer.setMouseCursor("crosshair"),d=!0)}),l.addListener(c,"keyup",b),l.addListener(c,"blur",b)}var h=a("./range_list").RangeList,i=a("./range").Range,j=a("./selection").Selection,k=a("./mouse/multi_select_handler").onMouseDown,l=a("./lib/event"),m=a("./lib/lang"),n=a("./commands/multi_select_commands");b.commands=n.defaultCommands.concat(n.multiSelectCommands);var o=a("./search").Search,p=new o,q=a("./edit_session").EditSession;
(function(){this.getSelectionMarkers=function(){return this.$selectionMarkers}}).call(q.prototype),function(){this.ranges=null,this.rangeList=null,this.addRange=function(a,b){if(a){if(!this.inMultiSelectMode&&0==this.rangeCount){var c=this.toOrientedRange();if(this.rangeList.add(c),this.rangeList.add(a),2!=this.rangeList.ranges.length)return this.rangeList.removeAll(),b||this.fromOrientedRange(a);this.rangeList.removeAll(),this.rangeList.add(c),this.$onAddRange(c)}a.cursor||(a.cursor=a.end);var d=this.rangeList.add(a);
return this.$onAddRange(a),d.length&&this.$onRemoveRange(d),this.rangeCount>1&&!this.inMultiSelectMode&&(this._signal("multiSelect"),this.inMultiSelectMode=!0,this.session.$undoSelect=!1,this.rangeList.attach(this.session)),b||this.fromOrientedRange(a)}},this.toSingleRange=function(a){a=a||this.ranges[0];var b=this.rangeList.removeAll();b.length&&this.$onRemoveRange(b),a&&this.fromOrientedRange(a)},this.substractPoint=function(a){var b=this.rangeList.substractPoint(a);return b?(this.$onRemoveRange(b),b[0]):void 0
},this.mergeOverlappingRanges=function(){var a=this.rangeList.merge();a.length?this.$onRemoveRange(a):this.ranges[0]&&this.fromOrientedRange(this.ranges[0])},this.$onAddRange=function(a){this.rangeCount=this.rangeList.ranges.length,this.ranges.unshift(a),this._signal("addRange",{range:a})},this.$onRemoveRange=function(a){if(this.rangeCount=this.rangeList.ranges.length,1==this.rangeCount&&this.inMultiSelectMode){var b=this.rangeList.ranges.pop();a.push(b),this.rangeCount=0}for(var c=a.length;c--;){var d=this.ranges.indexOf(a[c]);
this.ranges.splice(d,1)}this._signal("removeRange",{ranges:a}),0==this.rangeCount&&this.inMultiSelectMode&&(this.inMultiSelectMode=!1,this._signal("singleSelect"),this.session.$undoSelect=!0,this.rangeList.detach(this.session)),b=b||this.ranges[0],b&&!b.isEqual(this.getRange())&&this.fromOrientedRange(b)},this.$initRangeList=function(){this.rangeList||(this.rangeList=new h,this.ranges=[],this.rangeCount=0)},this.getAllRanges=function(){return this.rangeCount?this.rangeList.ranges.concat():[this.getRange()]},this.splitIntoLines=function(){if(this.rangeCount>1){var a=this.rangeList.ranges,b=a[a.length-1],c=i.fromPoints(a[0].start,b.end);
this.toSingleRange(),this.setSelectionRange(c,b.cursor==b.start)}else{var c=this.getRange(),d=this.isBackwards(),e=c.start.row,f=c.end.row;if(e==f){if(d)var g=c.end,h=c.start;else var g=c.start,h=c.end;return this.addRange(i.fromPoints(h,h)),this.addRange(i.fromPoints(g,g)),void 0}var j=[],k=this.getLineRange(e,!0);k.start.column=c.start.column,j.push(k);for(var l=e+1;f>l;l++)j.push(this.getLineRange(l,!0));k=this.getLineRange(f,!0),k.end.column=c.end.column,j.push(k),j.forEach(this.addRange,this)}},this.toggleBlockSelection=function(){if(this.rangeCount>1){var a=this.rangeList.ranges,b=a[a.length-1],c=i.fromPoints(a[0].start,b.end);
this.toSingleRange(),this.setSelectionRange(c,b.cursor==b.start)}else{var d=this.session.documentToScreenPosition(this.selectionLead),e=this.session.documentToScreenPosition(this.selectionAnchor),f=this.rectangularRangeBlock(d,e);f.forEach(this.addRange,this)}},this.rectangularRangeBlock=function(a,b,c){var d=[],f=a.column<b.column;if(f)var g=a.column,h=b.column;else var g=b.column,h=a.column;var j=a.row<b.row;if(j)var k=a.row,l=b.row;else var k=b.row,l=a.row;0>g&&(g=0),0>k&&(k=0),k==l&&(c=!0);for(var m=k;l>=m;m++){var n=i.fromPoints(this.session.screenToDocumentPosition(m,g),this.session.screenToDocumentPosition(m,h));
if(n.isEmpty()){if(o&&e(n.end,o))break;var o=n.end}n.cursor=f?n.start:n.end,d.push(n)}if(j&&d.reverse(),!c){for(var p=d.length-1;d[p].isEmpty()&&p>0;)p--;if(p>0)for(var q=0;d[q].isEmpty();)q++;for(var r=p;r>=q;r--)d[r].isEmpty()&&d.splice(r,1)}return d}}.call(j.prototype);var r=a("./editor").Editor;(function(){this.updateSelectionMarkers=function(){this.renderer.updateCursor(),this.renderer.updateBackMarkers()},this.addSelectionMarker=function(a){a.cursor||(a.cursor=a.end);var b=this.getSelectionStyle();return a.marker=this.session.addMarker(a,"ace_selection",b),this.session.$selectionMarkers.push(a),this.session.selectionMarkerCount=this.session.$selectionMarkers.length,a
},this.removeSelectionMarker=function(a){if(a.marker){this.session.removeMarker(a.marker);var b=this.session.$selectionMarkers.indexOf(a);-1!=b&&this.session.$selectionMarkers.splice(b,1),this.session.selectionMarkerCount=this.session.$selectionMarkers.length}},this.removeSelectionMarkers=function(a){for(var b=this.session.$selectionMarkers,c=a.length;c--;){var d=a[c];if(d.marker){this.session.removeMarker(d.marker);var e=b.indexOf(d);-1!=e&&b.splice(e,1)}}this.session.selectionMarkerCount=b.length},this.$onAddRange=function(a){this.addSelectionMarker(a.range),this.renderer.updateCursor(),this.renderer.updateBackMarkers()
},this.$onRemoveRange=function(a){this.removeSelectionMarkers(a.ranges),this.renderer.updateCursor(),this.renderer.updateBackMarkers()},this.$onMultiSelect=function(){this.inMultiSelectMode||(this.inMultiSelectMode=!0,this.setStyle("ace_multiselect"),this.keyBinding.addKeyboardHandler(n.keyboardHandler),this.commands.setDefaultHandler("exec",this.$onMultiSelectExec),this.renderer.updateCursor(),this.renderer.updateBackMarkers())},this.$onSingleSelect=function(){this.session.multiSelect.inVirtualMode||(this.inMultiSelectMode=!1,this.unsetStyle("ace_multiselect"),this.keyBinding.removeKeyboardHandler(n.keyboardHandler),this.commands.removeDefaultHandler("exec",this.$onMultiSelectExec),this.renderer.updateCursor(),this.renderer.updateBackMarkers(),this._emit("changeSelection"))
},this.$onMultiSelectExec=function(a){var b=a.command,c=a.editor;if(c.multiSelect){if(b.multiSelectAction)"forEach"==b.multiSelectAction?d=c.forEachSelection(b,a.args):"forEachLine"==b.multiSelectAction?d=c.forEachSelection(b,a.args,!0):"single"==b.multiSelectAction?(c.exitMultiSelectMode(),d=b.exec(c,a.args||{})):d=b.multiSelectAction(c,a.args||{});else{var d=b.exec(c,a.args||{});c.multiSelect.addRange(c.multiSelect.toOrientedRange()),c.multiSelect.mergeOverlappingRanges()}return d}},this.forEachSelection=function(a,b,c){if(!this.inVirtualSelectionMode){var g,d=this.session,e=this.selection,f=e.rangeList,h=e._eventRegistry;
e._eventRegistry={};var i=new j(d);this.inVirtualSelectionMode=!0;for(var k=f.ranges.length;k--;){if(c)for(;k>0&&f.ranges[k].start.row==f.ranges[k-1].end.row;)k--;i.fromOrientedRange(f.ranges[k]),i.id=f.ranges[k].marker,this.selection=d.selection=i;var l=a.exec(this,b||{});void 0!==g&&(g=l),i.toOrientedRange(f.ranges[k])}i.detach(),this.selection=d.selection=e,this.inVirtualSelectionMode=!1,e._eventRegistry=h,e.mergeOverlappingRanges();var m=this.renderer.$scrollAnimation;return this.onCursorChange(),this.onSelectionChange(),m&&m.from==m.to&&this.renderer.animateScrolling(m.from),g
}},this.exitMultiSelectMode=function(){this.inMultiSelectMode&&!this.inVirtualSelectionMode&&this.multiSelect.toSingleRange()},this.getSelectedText=function(){var a="";if(this.inMultiSelectMode&&!this.inVirtualSelectionMode){for(var b=this.multiSelect.rangeList.ranges,c=[],d=0;d<b.length;d++)c.push(this.session.getTextRange(b[d]));var e=this.session.getDocument().getNewLineCharacter();a=c.join(e),a.length==(c.length-1)*e.length&&(a="")}else this.selection.isEmpty()||(a=this.session.getTextRange(this.getSelectionRange()));
return a},this.onPaste=function(a){if(!this.$readOnly){var b={text:a};if(this._signal("paste",b),a=b.text,!this.inMultiSelectMode||this.inVirtualSelectionMode)return this.insert(a);var c=a.split(/\r\n|\r|\n/),d=this.selection.rangeList.ranges;if(c.length>d.length||c.length<2||!c[1])return this.commands.exec("insertstring",this,a);for(var e=d.length;e--;){var f=d[e];f.isEmpty()||this.session.remove(f),this.session.insert(f.start,c[e])}}},this.findAll=function(a,b,c){b=b||{},b.needle=a||b.needle,this.$search.set(b);
var d=this.$search.findAll(this.session);if(!d.length)return 0;this.$blockScrolling+=1;var e=this.multiSelect;c||e.toSingleRange(d[0]);for(var f=d.length;f--;)e.addRange(d[f],!0);return this.$blockScrolling-=1,d.length},this.selectMoreLines=function(a,b){var c=this.selection.toOrientedRange(),d=c.cursor==c.end,e=this.session.documentToScreenPosition(c.cursor);this.selection.$desiredColumn&&(e.column=this.selection.$desiredColumn);var f=this.session.screenToDocumentPosition(e.row+a,e.column);if(c.isEmpty())var h=f;
else var g=this.session.documentToScreenPosition(d?c.end:c.start),h=this.session.screenToDocumentPosition(g.row+a,g.column);if(d){var j=i.fromPoints(f,h);j.cursor=j.start}else{var j=i.fromPoints(h,f);j.cursor=j.end}if(j.desiredColumn=e.column,this.selection.inMultiSelectMode){if(b)var k=c.cursor}else this.selection.addRange(c);this.selection.addRange(j),k&&this.selection.substractPoint(k)},this.transposeSelections=function(a){for(var b=this.session,c=b.multiSelect,d=c.ranges,e=d.length;e--;){var f=d[e];if(f.isEmpty()){var g=b.getWordRange(f.start.row,f.start.column);
f.start.row=g.start.row,f.start.column=g.start.column,f.end.row=g.end.row,f.end.column=g.end.column}}c.mergeOverlappingRanges();for(var h=[],e=d.length;e--;){var f=d[e];h.unshift(b.getTextRange(f))}0>a?h.unshift(h.pop()):h.push(h.shift());for(var e=d.length;e--;){var f=d[e],g=f.clone();b.replace(f,h[e]),f.start.row=g.start.row,f.start.column=g.start.column}},this.selectMore=function(a,b){var c=this.session,e=c.multiSelect,f=e.toOrientedRange();f.isEmpty()&&(f=c.getWordRange(f.start.row,f.start.column),f.cursor=-1==a?f.start:f.end,this.multiSelect.addRange(f));
var g=c.getTextRange(f),h=d(c,g,a);h&&(h.cursor=-1==a?h.start:h.end,this.$blockScrolling+=1,this.session.unfold(h),this.multiSelect.addRange(h),this.$blockScrolling-=1,this.renderer.scrollCursorIntoView(null,.5)),b&&this.multiSelect.substractPoint(f.cursor)},this.alignCursors=function(){var a=this.session,b=a.multiSelect,c=b.ranges;if(c.length){var l=-1,n=c.filter(function(a){return a.cursor.row==l?!0:(l=a.cursor.row,void 0)});b.$onRemoveRange(n);var o=0,p=1/0,q=c.map(function(b){var c=b.cursor,d=a.getLine(c.row),e=d.substr(c.column).search(/\S/g);
return-1==e&&(e=0),c.column>o&&(o=c.column),p>e&&(p=e),e});c.forEach(function(b,c){var d=b.cursor,e=o-d.column,f=q[c]-p;e>f?a.insert(d,m.stringRepeat(" ",e-f)):a.remove(new i(d.row,d.column,d.row,d.column-e+f)),b.start.column=b.end.column=o,b.start.row=b.end.row=d.row,b.cursor=b.end}),b.fromOrientedRange(c[0]),this.renderer.updateCursor(),this.renderer.updateBackMarkers()}else{var d=this.selection.getRange(),e=d.start.row,f=d.end.row,g=e==f;if(g){var j,h=this.session.getLength();do j=this.session.getLine(f);
while(/[=:]/.test(j)&&++f<h);do j=this.session.getLine(e);while(/[=:]/.test(j)&&--e>0);0>e&&(e=0),f>=h&&(f=h-1)}var k=this.session.doc.removeLines(e,f);k=this.$reAlignText(k,g),this.session.doc.insert({row:e,column:0},k.join("\n")+"\n"),g||(d.start.column=0,d.end.column=k[k.length-1].length),this.selection.setRange(d)}},this.$reAlignText=function(a,b){function c(a){return m.stringRepeat(" ",a)}function d(a){return a[2]?c(i)+a[2]+c(j-a[2].length+k)+a[4].replace(/^([=:])\s+/,"$1 "):a[0]}function e(a){return a[2]?c(i+j-a[2].length)+a[2]+c(k," ")+a[4].replace(/^([=:])\s+/,"$1 "):a[0]
}function f(a){return a[2]?c(i)+a[2]+c(k)+a[4].replace(/^([=:])\s+/,"$1 "):a[0]}var i,j,k,g=!0,h=!0;return a.map(function(a){var b=a.match(/(\s*)(.*?)(\s*)([=:].*)/);return b?null==i?(i=b[1].length,j=b[2].length,k=b[3].length,b):(i+j+k!=b[1].length+b[2].length+b[3].length&&(h=!1),i!=b[1].length&&(g=!1),i>b[1].length&&(i=b[1].length),j<b[2].length&&(j=b[2].length),k>b[3].length&&(k=b[3].length),b):[a]}).map(b?d:g?h?e:d:f)}}).call(r.prototype),b.onSessionChange=function(a){var b=a.session;b.multiSelect||(b.$selectionMarkers=[],b.selection.$initRangeList(),b.multiSelect=b.selection),this.multiSelect=b.multiSelect;
var c=a.oldSession;c&&(c.multiSelect.removeEventListener("addRange",this.$onAddRange),c.multiSelect.removeEventListener("removeRange",this.$onRemoveRange),c.multiSelect.removeEventListener("multiSelect",this.$onMultiSelect),c.multiSelect.removeEventListener("singleSelect",this.$onSingleSelect)),b.multiSelect.on("addRange",this.$onAddRange),b.multiSelect.on("removeRange",this.$onRemoveRange),b.multiSelect.on("multiSelect",this.$onMultiSelect),b.multiSelect.on("singleSelect",this.$onSingleSelect),this.inMultiSelectMode!=b.selection.inMultiSelectMode&&(b.selection.inMultiSelectMode?this.$onMultiSelect():this.$onSingleSelect())
},b.MultiSelect=f,a("./config").defineOptions(r.prototype,"editor",{enableMultiselect:{set:function(a){f(this),a?(this.on("changeSession",this.$multiselectOnSessionChange),this.on("mousedown",k)):(this.off("changeSession",this.$multiselectOnSessionChange),this.off("mousedown",k))},value:!0}})}),ace.define("ace/editor",["require","exports","module","ace/lib/fixoldbrowsers","ace/lib/oop","ace/lib/dom","ace/lib/lang","ace/lib/useragent","ace/keyboard/textinput","ace/mouse/mouse_handler","ace/mouse/fold_handler","ace/keyboard/keybinding","ace/edit_session","ace/search","ace/range","ace/lib/event_emitter","ace/commands/command_manager","ace/commands/default_commands","ace/config"],function(a,b){a("./lib/fixoldbrowsers");
var d=a("./lib/oop"),e=a("./lib/dom"),f=a("./lib/lang"),g=a("./lib/useragent"),h=a("./keyboard/textinput").TextInput,i=a("./mouse/mouse_handler").MouseHandler,j=a("./mouse/fold_handler").FoldHandler,k=a("./keyboard/keybinding").KeyBinding,l=a("./edit_session").EditSession,m=a("./search").Search,n=a("./range").Range,o=a("./lib/event_emitter").EventEmitter,p=a("./commands/command_manager").CommandManager,q=a("./commands/default_commands").commands,r=a("./config"),s=function(a,b){var c=a.getContainerElement();this.container=c,this.renderer=a,this.commands=new p(g.isMac?"mac":"win",q),this.textInput=new h(a.getTextAreaContainer(),this),this.renderer.textarea=this.textInput.getElement(),this.keyBinding=new k(this),this.$mouseHandler=new i(this),new j(this),this.$blockScrolling=0,this.$search=(new m).set({wrap:!0}),this.$historyTracker=this.$historyTracker.bind(this),this.commands.on("exec",this.$historyTracker),this.$initOperationListeners(),this._$emitInputEvent=f.delayedCall(function(){this._signal("input",{}),this.session.bgTokenizer&&this.session.bgTokenizer.scheduleStart()
}.bind(this)),this.on("change",function(a,b){b._$emitInputEvent.schedule(31)}),this.setSession(b||new l("")),r.resetOptions(this),r._signal("editor",this)};(function(){d.implement(this,o),this.$initOperationListeners=function(){function a(a){return a[a.length-1]}this.selections=[],this.commands.on("exec",function(b){this.startOperation(b);var c=b.command;if("fileJump"==c.aceCommandGroup){var d=this.prevOp;d&&"fileJump"==d.command.aceCommandGroup||(this.lastFileJumpPos=a(this.selections))}else this.lastFileJumpPos=null
}.bind(this),!0),this.commands.on("afterExec",function(a){var b=a.command;"fileJump"==b.aceCommandGroup&&this.lastFileJumpPos&&!this.curOp.selectionChanged&&this.selection.fromJSON(this.lastFileJumpPos),this.endOperation(a)}.bind(this),!0),this.$opResetTimer=f.delayedCall(this.endOperation.bind(this)),this.on("change",function(){this.curOp||this.startOperation(),this.curOp.docChanged=!0}.bind(this),!0),this.on("changeSelection",function(){this.curOp||this.startOperation(),this.curOp.selectionChanged=!0}.bind(this),!0)
},this.curOp=null,this.prevOp={},this.startOperation=function(a){if(this.curOp){if(!a||this.curOp.command)return;this.prevOp=this.curOp}a||(this.previousCommand=null,a={}),this.$opResetTimer.schedule(),this.curOp={command:a.command||{},args:a.args,scrollTop:this.renderer.scrollTop};var b=this.curOp.command;b&&b.scrollIntoView&&this.$blockScrolling++,this.selections.push(this.selection.toJSON())},this.endOperation=function(){if(this.curOp){var a=this.curOp.command;if(a&&a.scrollIntoView){switch(this.$blockScrolling--,a.scrollIntoView){case"center":this.renderer.scrollCursorIntoView(null,.5);
break;case"animate":case"cursor":this.renderer.scrollCursorIntoView();break;case"selectionPart":var b=this.selection.getRange(),c=this.renderer.layerConfig;(b.start.row>=c.lastRow||b.end.row<=c.firstRow)&&this.renderer.scrollSelectionIntoView(this.selection.anchor,this.selection.lead)}"animate"==a.scrollIntoView&&this.renderer.animateScrolling(this.curOp.scrollTop)}this.prevOp=this.curOp,this.curOp=null}},this.$historyTracker=function(a){if(this.$mergeUndoDeltas){var b=this.prevOp,c=["backspace","del","insertstring"],d=b.command&&a.command.name==b.command.name;
if("insertstring"==a.command.name){var e=a.args;void 0===this.mergeNextCommand&&(this.mergeNextCommand=!0),d=d&&this.mergeNextCommand&&(!/\s/.test(e)||/\s/.test(b.args)),this.mergeNextCommand=!0}else d=d&&-1!==c.indexOf(a.command.name);"always"!=this.$mergeUndoDeltas&&Date.now()-this.sequenceStartTime>2e3&&(d=!1),d?this.session.mergeUndoDeltas=!0:-1!==c.indexOf(a.command.name)&&(this.sequenceStartTime=Date.now())}},this.setKeyboardHandler=function(a){if(a)if("string"==typeof a){this.$keybindingId=a;var b=this;
r.loadModule(["keybinding",a],function(c){b.$keybindingId==a&&b.keyBinding.setKeyboardHandler(c&&c.handler)})}else this.$keybindingId=null,this.keyBinding.setKeyboardHandler(a);else this.keyBinding.setKeyboardHandler(null)},this.getKeyboardHandler=function(){return this.keyBinding.getKeyboardHandler()},this.setSession=function(a){if(this.session!=a){var b=this.session;if(b){this.session.removeEventListener("change",this.$onDocumentChange),this.session.removeEventListener("changeMode",this.$onChangeMode),this.session.removeEventListener("tokenizerUpdate",this.$onTokenizerUpdate),this.session.removeEventListener("changeTabSize",this.$onChangeTabSize),this.session.removeEventListener("changeWrapLimit",this.$onChangeWrapLimit),this.session.removeEventListener("changeWrapMode",this.$onChangeWrapMode),this.session.removeEventListener("onChangeFold",this.$onChangeFold),this.session.removeEventListener("changeFrontMarker",this.$onChangeFrontMarker),this.session.removeEventListener("changeBackMarker",this.$onChangeBackMarker),this.session.removeEventListener("changeBreakpoint",this.$onChangeBreakpoint),this.session.removeEventListener("changeAnnotation",this.$onChangeAnnotation),this.session.removeEventListener("changeOverwrite",this.$onCursorChange),this.session.removeEventListener("changeScrollTop",this.$onScrollTopChange),this.session.removeEventListener("changeScrollLeft",this.$onScrollLeftChange);
var c=this.session.getSelection();c.removeEventListener("changeCursor",this.$onCursorChange),c.removeEventListener("changeSelection",this.$onSelectionChange)}this.session=a,a&&(this.$onDocumentChange=this.onDocumentChange.bind(this),a.addEventListener("change",this.$onDocumentChange),this.renderer.setSession(a),this.$onChangeMode=this.onChangeMode.bind(this),a.addEventListener("changeMode",this.$onChangeMode),this.$onTokenizerUpdate=this.onTokenizerUpdate.bind(this),a.addEventListener("tokenizerUpdate",this.$onTokenizerUpdate),this.$onChangeTabSize=this.renderer.onChangeTabSize.bind(this.renderer),a.addEventListener("changeTabSize",this.$onChangeTabSize),this.$onChangeWrapLimit=this.onChangeWrapLimit.bind(this),a.addEventListener("changeWrapLimit",this.$onChangeWrapLimit),this.$onChangeWrapMode=this.onChangeWrapMode.bind(this),a.addEventListener("changeWrapMode",this.$onChangeWrapMode),this.$onChangeFold=this.onChangeFold.bind(this),a.addEventListener("changeFold",this.$onChangeFold),this.$onChangeFrontMarker=this.onChangeFrontMarker.bind(this),this.session.addEventListener("changeFrontMarker",this.$onChangeFrontMarker),this.$onChangeBackMarker=this.onChangeBackMarker.bind(this),this.session.addEventListener("changeBackMarker",this.$onChangeBackMarker),this.$onChangeBreakpoint=this.onChangeBreakpoint.bind(this),this.session.addEventListener("changeBreakpoint",this.$onChangeBreakpoint),this.$onChangeAnnotation=this.onChangeAnnotation.bind(this),this.session.addEventListener("changeAnnotation",this.$onChangeAnnotation),this.$onCursorChange=this.onCursorChange.bind(this),this.session.addEventListener("changeOverwrite",this.$onCursorChange),this.$onScrollTopChange=this.onScrollTopChange.bind(this),this.session.addEventListener("changeScrollTop",this.$onScrollTopChange),this.$onScrollLeftChange=this.onScrollLeftChange.bind(this),this.session.addEventListener("changeScrollLeft",this.$onScrollLeftChange),this.selection=a.getSelection(),this.selection.addEventListener("changeCursor",this.$onCursorChange),this.$onSelectionChange=this.onSelectionChange.bind(this),this.selection.addEventListener("changeSelection",this.$onSelectionChange),this.onChangeMode(),this.$blockScrolling+=1,this.onCursorChange(),this.$blockScrolling-=1,this.onScrollTopChange(),this.onScrollLeftChange(),this.onSelectionChange(),this.onChangeFrontMarker(),this.onChangeBackMarker(),this.onChangeBreakpoint(),this.onChangeAnnotation(),this.session.getUseWrapMode()&&this.renderer.adjustWrapLimit(),this.renderer.updateFull()),this._signal("changeSession",{session:a,oldSession:b}),b&&b._signal("changeEditor",{oldEditor:this}),a&&a._signal("changeEditor",{editor:this})
}},this.getSession=function(){return this.session},this.setValue=function(a,b){return this.session.doc.setValue(a),b?1==b?this.navigateFileEnd():-1==b&&this.navigateFileStart():this.selectAll(),a},this.getValue=function(){return this.session.getValue()},this.getSelection=function(){return this.selection},this.resize=function(a){this.renderer.onResize(a)},this.setTheme=function(a,b){this.renderer.setTheme(a,b)},this.getTheme=function(){return this.renderer.getTheme()},this.setStyle=function(a){this.renderer.setStyle(a)
},this.unsetStyle=function(a){this.renderer.unsetStyle(a)},this.getFontSize=function(){return this.getOption("fontSize")||e.computedStyle(this.container,"fontSize")},this.setFontSize=function(a){this.setOption("fontSize",a)},this.$highlightBrackets=function(){if(this.session.$bracketHighlight&&(this.session.removeMarker(this.session.$bracketHighlight),this.session.$bracketHighlight=null),!this.$highlightPending){var a=this;this.$highlightPending=!0,setTimeout(function(){a.$highlightPending=!1;var b=a.session.findMatchingBracket(a.getCursorPosition());
if(b)var c=new n(b.row,b.column,b.row,b.column+1);else if(a.session.$mode.getMatching)var c=a.session.$mode.getMatching(a.session);c&&(a.session.$bracketHighlight=a.session.addMarker(c,"ace_bracket","text"))},50)}},this.focus=function(){var a=this;setTimeout(function(){a.textInput.focus()}),this.textInput.focus()},this.isFocused=function(){return this.textInput.isFocused()},this.blur=function(){this.textInput.blur()},this.onFocus=function(){this.$isFocused||(this.$isFocused=!0,this.renderer.showCursor(),this.renderer.visualizeFocus(),this._emit("focus"))
},this.onBlur=function(){this.$isFocused&&(this.$isFocused=!1,this.renderer.hideCursor(),this.renderer.visualizeBlur(),this._emit("blur"))},this.$cursorChange=function(){this.renderer.updateCursor()},this.onDocumentChange=function(a){var d,b=a.data,c=b.range;d=c.start.row==c.end.row&&"insertLines"!=b.action&&"removeLines"!=b.action?c.end.row:1/0,this.renderer.updateLines(c.start.row,d),this._signal("change",a),this.$cursorChange()},this.onTokenizerUpdate=function(a){var b=a.data;this.renderer.updateLines(b.first,b.last)
},this.onScrollTopChange=function(){this.renderer.scrollToY(this.session.getScrollTop())},this.onScrollLeftChange=function(){this.renderer.scrollToX(this.session.getScrollLeft())},this.onCursorChange=function(){this.$cursorChange(),this.$blockScrolling||this.renderer.scrollCursorIntoView(),this.$highlightBrackets(),this.$updateHighlightActiveLine(),this._signal("changeSelection")},this.$updateHighlightActiveLine=function(){var b,a=this.getSession();if(this.$highlightActiveLine&&("line"==this.$selectionStyle&&this.selection.isMultiLine()||(b=this.getCursorPosition()),this.renderer.$maxLines&&1===this.session.getLength()&&!(this.renderer.$minLines>1)&&(b=!1)),a.$highlightLineMarker&&!b)a.removeMarker(a.$highlightLineMarker.id),a.$highlightLineMarker=null;
else if(!a.$highlightLineMarker&&b){var c=new n(b.row,b.column,b.row,1/0);c.id=a.addMarker(c,"ace_active-line","screenLine"),a.$highlightLineMarker=c}else b&&(a.$highlightLineMarker.start.row=b.row,a.$highlightLineMarker.end.row=b.row,a.$highlightLineMarker.start.column=b.column,a._signal("changeBackMarker"))},this.onSelectionChange=function(){var b=this.session;if(b.$selectionMarker&&b.removeMarker(b.$selectionMarker),b.$selectionMarker=null,this.selection.isEmpty())this.$updateHighlightActiveLine();else{var c=this.selection.getRange(),d=this.getSelectionStyle();
b.$selectionMarker=b.addMarker(c,"ace_selection",d)}var e=this.$highlightSelectedWord&&this.$getSelectionHighLightRegexp();this.session.highlight(e),this._signal("changeSelection")},this.$getSelectionHighLightRegexp=function(){var a=this.session,b=this.getSelectionRange();if(!b.isEmpty()&&!b.isMultiLine()){var c=b.start.column-1,d=b.end.column+1,e=a.getLine(b.start.row),f=e.length,g=e.substring(Math.max(c,0),Math.min(d,f));if(!(c>=0&&/^[\w\d]/.test(g)||f>=d&&/[\w\d]$/.test(g))&&(g=e.substring(b.start.column,b.end.column),/^[\w\d]+$/.test(g))){var h=this.$search.$assembleRegExp({wholeWord:!0,caseSensitive:!0,needle:g});
return h}}},this.onChangeFrontMarker=function(){this.renderer.updateFrontMarkers()},this.onChangeBackMarker=function(){this.renderer.updateBackMarkers()},this.onChangeBreakpoint=function(){this.renderer.updateBreakpoints()},this.onChangeAnnotation=function(){this.renderer.setAnnotations(this.session.getAnnotations())},this.onChangeMode=function(a){this.renderer.updateText(),this._emit("changeMode",a)},this.onChangeWrapLimit=function(){this.renderer.updateFull()},this.onChangeWrapMode=function(){this.renderer.onResize(!0)
},this.onChangeFold=function(){this.$updateHighlightActiveLine(),this.renderer.updateFull()},this.getSelectedText=function(){return this.session.getTextRange(this.getSelectionRange())},this.getCopyText=function(){var a=this.getSelectedText();return this._signal("copy",a),a},this.onCopy=function(){this.commands.exec("copy",this)},this.onCut=function(){this.commands.exec("cut",this)},this.onPaste=function(a){if(!this.$readOnly){var b={text:a};this._signal("paste",b),this.insert(b.text,!0)}},this.execCommand=function(a,b){this.commands.exec(a,this,b)
},this.insert=function(a,b){var c=this.session,d=c.getMode(),e=this.getCursorPosition();if(this.getBehavioursEnabled()&&!b){var f=d.transformAction(c.getState(e.row),"insertion",this,c,a);f&&(a!==f.text&&(this.session.mergeUndoDeltas=!1,this.$mergeNextCommand=!1),a=f.text)}if("	"==a&&(a=this.session.getTabString()),this.selection.isEmpty()){if(this.session.getOverwrite()){var g=new n.fromPoints(e,e);g.end.column+=a.length,this.session.remove(g)}}else{var g=this.getSelectionRange();e=this.session.remove(g),this.clearSelection()
}if("\n"==a||"\r\n"==a){var h=c.getLine(e.row);if(e.column>h.search(/\S|$/)){var i=h.substr(e.column).search(/\S|$/);c.doc.removeInLine(e.row,e.column,e.column+i)}}this.clearSelection();{var j=e.column,k=c.getState(e.row),h=c.getLine(e.row),l=d.checkOutdent(k,h,a);c.insert(e,a)}if(f&&f.selection&&(2==f.selection.length?this.selection.setSelectionRange(new n(e.row,j+f.selection[0],e.row,j+f.selection[1])):this.selection.setSelectionRange(new n(e.row+f.selection[0],f.selection[1],e.row+f.selection[2],f.selection[3]))),c.getDocument().isNewLine(a)){var o=d.getNextLineIndent(k,h.slice(0,e.column),c.getTabString());
c.insert({row:e.row+1,column:0},o)}l&&d.autoOutdent(k,c,e.row)},this.onTextInput=function(a){this.keyBinding.onTextInput(a)},this.onCommandKey=function(a,b,c){this.keyBinding.onCommandKey(a,b,c)},this.setOverwrite=function(a){this.session.setOverwrite(a)},this.getOverwrite=function(){return this.session.getOverwrite()},this.toggleOverwrite=function(){this.session.toggleOverwrite()},this.setScrollSpeed=function(a){this.setOption("scrollSpeed",a)},this.getScrollSpeed=function(){return this.getOption("scrollSpeed")
},this.setDragDelay=function(a){this.setOption("dragDelay",a)},this.getDragDelay=function(){return this.getOption("dragDelay")},this.setSelectionStyle=function(a){this.setOption("selectionStyle",a)},this.getSelectionStyle=function(){return this.getOption("selectionStyle")},this.setHighlightActiveLine=function(a){this.setOption("highlightActiveLine",a)},this.getHighlightActiveLine=function(){return this.getOption("highlightActiveLine")},this.setHighlightGutterLine=function(a){this.setOption("highlightGutterLine",a)
},this.getHighlightGutterLine=function(){return this.getOption("highlightGutterLine")},this.setHighlightSelectedWord=function(a){this.setOption("highlightSelectedWord",a)},this.getHighlightSelectedWord=function(){return this.$highlightSelectedWord},this.setAnimatedScroll=function(a){this.renderer.setAnimatedScroll(a)},this.getAnimatedScroll=function(){return this.renderer.getAnimatedScroll()},this.setShowInvisibles=function(a){this.renderer.setShowInvisibles(a)},this.getShowInvisibles=function(){return this.renderer.getShowInvisibles()
},this.setDisplayIndentGuides=function(a){this.renderer.setDisplayIndentGuides(a)},this.getDisplayIndentGuides=function(){return this.renderer.getDisplayIndentGuides()},this.setShowPrintMargin=function(a){this.renderer.setShowPrintMargin(a)},this.getShowPrintMargin=function(){return this.renderer.getShowPrintMargin()},this.setPrintMarginColumn=function(a){this.renderer.setPrintMarginColumn(a)},this.getPrintMarginColumn=function(){return this.renderer.getPrintMarginColumn()},this.setReadOnly=function(a){this.setOption("readOnly",a)
},this.getReadOnly=function(){return this.getOption("readOnly")},this.setBehavioursEnabled=function(a){this.setOption("behavioursEnabled",a)},this.getBehavioursEnabled=function(){return this.getOption("behavioursEnabled")},this.setWrapBehavioursEnabled=function(a){this.setOption("wrapBehavioursEnabled",a)},this.getWrapBehavioursEnabled=function(){return this.getOption("wrapBehavioursEnabled")},this.setShowFoldWidgets=function(a){this.setOption("showFoldWidgets",a)},this.getShowFoldWidgets=function(){return this.getOption("showFoldWidgets")
},this.setFadeFoldWidgets=function(a){this.setOption("fadeFoldWidgets",a)},this.getFadeFoldWidgets=function(){return this.getOption("fadeFoldWidgets")},this.remove=function(a){this.selection.isEmpty()&&("left"==a?this.selection.selectLeft():this.selection.selectRight());var b=this.getSelectionRange();if(this.getBehavioursEnabled()){var c=this.session,d=c.getState(b.start.row),e=c.getMode().transformAction(d,"deletion",this,c,b);if(0===b.end.column){var f=c.getTextRange(b);if("\n"==f[f.length-1]){var g=c.getLine(b.end.row);
/^\s+$/.test(g)&&(b.end.column=g.length)}}e&&(b=e)}this.session.remove(b),this.clearSelection()},this.removeWordRight=function(){this.selection.isEmpty()&&this.selection.selectWordRight(),this.session.remove(this.getSelectionRange()),this.clearSelection()},this.removeWordLeft=function(){this.selection.isEmpty()&&this.selection.selectWordLeft(),this.session.remove(this.getSelectionRange()),this.clearSelection()},this.removeToLineStart=function(){this.selection.isEmpty()&&this.selection.selectLineStart(),this.session.remove(this.getSelectionRange()),this.clearSelection()
},this.removeToLineEnd=function(){this.selection.isEmpty()&&this.selection.selectLineEnd();var a=this.getSelectionRange();a.start.column==a.end.column&&a.start.row==a.end.row&&(a.end.column=0,a.end.row++),this.session.remove(a),this.clearSelection()},this.splitLine=function(){this.selection.isEmpty()||(this.session.remove(this.getSelectionRange()),this.clearSelection());var a=this.getCursorPosition();this.insert("\n"),this.moveCursorToPosition(a)},this.transposeLetters=function(){if(this.selection.isEmpty()){var a=this.getCursorPosition(),b=a.column;
if(0!==b){var d,e,c=this.session.getLine(a.row);b<c.length?(d=c.charAt(b)+c.charAt(b-1),e=new n(a.row,b-1,a.row,b+1)):(d=c.charAt(b-1)+c.charAt(b-2),e=new n(a.row,b-2,a.row,b)),this.session.replace(e,d)}}},this.toLowerCase=function(){var a=this.getSelectionRange();this.selection.isEmpty()&&this.selection.selectWord();var b=this.getSelectionRange(),c=this.session.getTextRange(b);this.session.replace(b,c.toLowerCase()),this.selection.setSelectionRange(a)},this.toUpperCase=function(){var a=this.getSelectionRange();
this.selection.isEmpty()&&this.selection.selectWord();var b=this.getSelectionRange(),c=this.session.getTextRange(b);this.session.replace(b,c.toUpperCase()),this.selection.setSelectionRange(a)},this.indent=function(){var a=this.session,b=this.getSelectionRange();if(b.start.row<b.end.row){var c=this.$getSelectedRows();return a.indentRows(c.first,c.last,"	"),void 0}if(b.start.column<b.end.column){var d=a.getTextRange(b);if(!/^\s+$/.test(d)){var c=this.$getSelectedRows();return a.indentRows(c.first,c.last,"	"),void 0
}}var e=a.getLine(b.start.row),g=b.start,h=a.getTabSize(),i=a.documentToScreenColumn(g.row,g.column);if(this.session.getUseSoftTabs())var j=h-i%h,k=f.stringRepeat(" ",j);else{for(var j=i%h;" "==e[b.start.column]&&j;)b.start.column--,j--;this.selection.setSelectionRange(b),k="	"}return this.insert(k)},this.blockIndent=function(){var a=this.$getSelectedRows();this.session.indentRows(a.first,a.last,"	")},this.blockOutdent=function(){var a=this.session.getSelection();this.session.outdentRows(a.getRange())},this.sortLines=function(){var a=this.$getSelectedRows(),b=this.session,c=[];
for(e=a.first;e<=a.last;e++)c.push(b.getLine(e));c.sort(function(a,b){return a.toLowerCase()<b.toLowerCase()?-1:a.toLowerCase()>b.toLowerCase()?1:0});for(var d=new n(0,0,0,0),e=a.first;e<=a.last;e++){var f=b.getLine(e);d.start.row=e,d.end.row=e,d.end.column=f.length,b.replace(d,c[e-a.first])}},this.toggleCommentLines=function(){var a=this.session.getState(this.getCursorPosition().row),b=this.$getSelectedRows();this.session.getMode().toggleCommentLines(a,this.session,b.first,b.last)},this.toggleBlockComment=function(){var a=this.getCursorPosition(),b=this.session.getState(a.row),c=this.getSelectionRange();
this.session.getMode().toggleBlockComment(b,this.session,c,a)},this.getNumberAt=function(a,b){var c=/[\-]?[0-9]+(?:\.[0-9]+)?/g;c.lastIndex=0;for(var d=this.session.getLine(a);c.lastIndex<b;){var e=c.exec(d);if(e.index<=b&&e.index+e[0].length>=b){var f={value:e[0],start:e.index,end:e.index+e[0].length};return f}}return null},this.modifyNumber=function(a){var b=this.selection.getCursor().row,c=this.selection.getCursor().column,d=new n(b,c-1,b,c),e=this.session.getTextRange(d);if(!isNaN(parseFloat(e))&&isFinite(e)){var f=this.getNumberAt(b,c);
if(f){var g=f.value.indexOf(".")>=0?f.start+f.value.indexOf(".")+1:f.end,h=f.start+f.value.length-g,i=parseFloat(f.value);i*=Math.pow(10,h),a*=g!==f.end&&g>c?Math.pow(10,f.end-c-1):Math.pow(10,f.end-c),i+=a,i/=Math.pow(10,h);var j=i.toFixed(h),k=new n(b,f.start,b,f.end);this.session.replace(k,j),this.moveCursorTo(b,Math.max(f.start+1,c+j.length-f.value.length))}}},this.removeLines=function(){var b,a=this.$getSelectedRows();b=0===a.first||a.last+1<this.session.getLength()?new n(a.first,0,a.last+1,0):new n(a.first-1,this.session.getLine(a.first-1).length,a.last,this.session.getLine(a.last).length),this.session.remove(b),this.clearSelection()
},this.duplicateSelection=function(){var a=this.selection,b=this.session,c=a.getRange(),d=a.isBackwards();if(c.isEmpty()){var e=c.start.row;b.duplicateLines(e,e)}else{var f=d?c.start:c.end,g=b.insert(f,b.getTextRange(c),!1);c.start=f,c.end=g,a.setSelectionRange(c,d)}},this.moveLinesDown=function(){this.$moveLines(function(a,b){return this.session.moveLinesDown(a,b)})},this.moveLinesUp=function(){this.$moveLines(function(a,b){return this.session.moveLinesUp(a,b)})},this.moveText=function(a,b,c){return this.session.moveText(a,b,c)
},this.copyLinesUp=function(){this.$moveLines(function(a,b){return this.session.duplicateLines(a,b),0})},this.copyLinesDown=function(){this.$moveLines(function(a,b){return this.session.duplicateLines(a,b)})},this.$moveLines=function(a){var b=this.selection;if(!b.inMultiSelectMode||this.inVirtualSelectionMode){var c=b.toOrientedRange(),d=this.$getSelectedRows(c),e=a.call(this,d.first,d.last);c.moveBy(e,0),b.fromOrientedRange(c)}else{var f=b.rangeList.ranges;b.rangeList.detach(this.session);for(var g=f.length;g--;){for(var h=g,d=f[g].collapseRows(),i=d.end.row,j=d.start.row;g--&&(d=f[g].collapseRows(),j-d.end.row<=1);)j=d.end.row;
g++;for(var e=a.call(this,j,i);h>=g;)f[h].moveBy(e,0),h--}b.fromOrientedRange(b.ranges[0]),b.rangeList.attach(this.session)}},this.$getSelectedRows=function(){var a=this.getSelectionRange().collapseRows();return{first:this.session.getRowFoldStart(a.start.row),last:this.session.getRowFoldEnd(a.end.row)}},this.onCompositionStart=function(){this.renderer.showComposition(this.getCursorPosition())},this.onCompositionUpdate=function(a){this.renderer.setCompositionText(a)},this.onCompositionEnd=function(){this.renderer.hideComposition()
},this.getFirstVisibleRow=function(){return this.renderer.getFirstVisibleRow()},this.getLastVisibleRow=function(){return this.renderer.getLastVisibleRow()},this.isRowVisible=function(a){return a>=this.getFirstVisibleRow()&&a<=this.getLastVisibleRow()},this.isRowFullyVisible=function(a){return a>=this.renderer.getFirstFullyVisibleRow()&&a<=this.renderer.getLastFullyVisibleRow()},this.$getVisibleRowCount=function(){return this.renderer.getScrollBottomRow()-this.renderer.getScrollTopRow()+1},this.$moveByPage=function(a,b){var c=this.renderer,d=this.renderer.layerConfig,e=a*Math.floor(d.height/d.lineHeight);
this.$blockScrolling++,b===!0?this.selection.$moveSelection(function(){this.moveCursorBy(e,0)}):b===!1&&(this.selection.moveCursorBy(e,0),this.selection.clearSelection()),this.$blockScrolling--;var f=c.scrollTop;c.scrollBy(0,e*d.lineHeight),null!=b&&c.scrollCursorIntoView(null,.5),c.animateScrolling(f)},this.selectPageDown=function(){this.$moveByPage(1,!0)},this.selectPageUp=function(){this.$moveByPage(-1,!0)},this.gotoPageDown=function(){this.$moveByPage(1,!1)},this.gotoPageUp=function(){this.$moveByPage(-1,!1)
},this.scrollPageDown=function(){this.$moveByPage(1)},this.scrollPageUp=function(){this.$moveByPage(-1)},this.scrollToRow=function(a){this.renderer.scrollToRow(a)},this.scrollToLine=function(a,b,c,d){this.renderer.scrollToLine(a,b,c,d)},this.centerSelection=function(){var a=this.getSelectionRange(),b={row:Math.floor(a.start.row+(a.end.row-a.start.row)/2),column:Math.floor(a.start.column+(a.end.column-a.start.column)/2)};this.renderer.alignCursor(b,.5)},this.getCursorPosition=function(){return this.selection.getCursor()
},this.getCursorPositionScreen=function(){return this.session.documentToScreenPosition(this.getCursorPosition())},this.getSelectionRange=function(){return this.selection.getRange()},this.selectAll=function(){this.$blockScrolling+=1,this.selection.selectAll(),this.$blockScrolling-=1},this.clearSelection=function(){this.selection.clearSelection()},this.moveCursorTo=function(a,b){this.selection.moveCursorTo(a,b)},this.moveCursorToPosition=function(a){this.selection.moveCursorToPosition(a)},this.jumpToMatching=function(a){var b=this.getCursorPosition(),c=this.session.getBracketRange(b);
if(!c){if(c=this.find({needle:/[{}()\[\]]/g,preventScroll:!0,start:{row:b.row,column:b.column-1}}),!c)return;var d=c.start;d.row==b.row&&Math.abs(d.column-b.column)<2&&(c=this.session.getBracketRange(d))}d=c&&c.cursor||d,d&&(a?c&&c.isEqual(this.getSelectionRange())?this.clearSelection():this.selection.selectTo(d.row,d.column):this.selection.moveTo(d.row,d.column))},this.gotoLine=function(a,b,c){this.selection.clearSelection(),this.session.unfold({row:a-1,column:b||0}),this.$blockScrolling+=1,this.exitMultiSelectMode&&this.exitMultiSelectMode(),this.moveCursorTo(a-1,b||0),this.$blockScrolling-=1,this.isRowFullyVisible(a-1)||this.scrollToLine(a-1,!0,c)
},this.navigateTo=function(a,b){this.selection.moveTo(a,b)},this.navigateUp=function(a){if(this.selection.isMultiLine()&&!this.selection.isBackwards()){var b=this.selection.anchor.getPosition();return this.moveCursorToPosition(b)}this.selection.clearSelection(),this.selection.moveCursorBy(-a||-1,0)},this.navigateDown=function(a){if(this.selection.isMultiLine()&&this.selection.isBackwards()){var b=this.selection.anchor.getPosition();return this.moveCursorToPosition(b)}this.selection.clearSelection(),this.selection.moveCursorBy(a||1,0)
},this.navigateLeft=function(a){if(this.selection.isEmpty())for(a=a||1;a--;)this.selection.moveCursorLeft();else{var b=this.getSelectionRange().start;this.moveCursorToPosition(b)}this.clearSelection()},this.navigateRight=function(a){if(this.selection.isEmpty())for(a=a||1;a--;)this.selection.moveCursorRight();else{var b=this.getSelectionRange().end;this.moveCursorToPosition(b)}this.clearSelection()},this.navigateLineStart=function(){this.selection.moveCursorLineStart(),this.clearSelection()},this.navigateLineEnd=function(){this.selection.moveCursorLineEnd(),this.clearSelection()
},this.navigateFileEnd=function(){this.selection.moveCursorFileEnd(),this.clearSelection()},this.navigateFileStart=function(){this.selection.moveCursorFileStart(),this.clearSelection()},this.navigateWordRight=function(){this.selection.moveCursorWordRight(),this.clearSelection()},this.navigateWordLeft=function(){this.selection.moveCursorWordLeft(),this.clearSelection()},this.replace=function(a,b){b&&this.$search.set(b);var c=this.$search.find(this.session),d=0;return c?(this.$tryReplace(c,a)&&(d=1),null!==c&&(this.selection.setSelectionRange(c),this.renderer.scrollSelectionIntoView(c.start,c.end)),d):d
},this.replaceAll=function(a,b){b&&this.$search.set(b);var c=this.$search.findAll(this.session),d=0;if(!c.length)return d;this.$blockScrolling+=1;var e=this.getSelectionRange();this.selection.moveTo(0,0);for(var f=c.length-1;f>=0;--f)this.$tryReplace(c[f],a)&&d++;return this.selection.setSelectionRange(e),this.$blockScrolling-=1,d},this.$tryReplace=function(a,b){var c=this.session.getTextRange(a);return b=this.$search.replace(c,b),null!==b?(a.end=this.session.replace(a,b),a):null},this.getLastSearchOptions=function(){return this.$search.getOptions()
},this.find=function(a,b,c){b||(b={}),"string"==typeof a||a instanceof RegExp?b.needle=a:"object"==typeof a&&d.mixin(b,a);var e=this.selection.getRange();null==b.needle&&(a=this.session.getTextRange(e)||this.$search.$options.needle,a||(e=this.session.getWordRange(e.start.row,e.start.column),a=this.session.getTextRange(e)),this.$search.set({needle:a})),this.$search.set(b),b.start||this.$search.set({start:e});var f=this.$search.find(this.session);return b.preventScroll?f:f?(this.revealRange(f,c),f):(b.backwards?e.start=e.end:e.end=e.start,this.selection.setRange(e),void 0)
},this.findNext=function(a,b){this.find({skipCurrent:!0,backwards:!1},a,b)},this.findPrevious=function(a,b){this.find(a,{skipCurrent:!0,backwards:!0},b)},this.revealRange=function(a,b){this.$blockScrolling+=1,this.session.unfold(a),this.selection.setSelectionRange(a),this.$blockScrolling-=1;var c=this.renderer.scrollTop;this.renderer.scrollSelectionIntoView(a.start,a.end,.5),b!==!1&&this.renderer.animateScrolling(c)},this.undo=function(){this.$blockScrolling++,this.session.getUndoManager().undo(),this.$blockScrolling--,this.renderer.scrollCursorIntoView(null,.5)
},this.redo=function(){this.$blockScrolling++,this.session.getUndoManager().redo(),this.$blockScrolling--,this.renderer.scrollCursorIntoView(null,.5)},this.destroy=function(){this.renderer.destroy(),this._signal("destroy",this)},this.setAutoScrollEditorIntoView=function(a){if(a){var b,c=this,d=!1;this.$scrollAnchor||(this.$scrollAnchor=document.createElement("div"));var e=this.$scrollAnchor;e.style.cssText="position:absolute",this.container.insertBefore(e,this.container.firstChild);var f=this.on("changeSelection",function(){d=!0
}),g=this.renderer.on("beforeRender",function(){d&&(b=c.renderer.container.getBoundingClientRect())}),h=this.renderer.on("afterRender",function(){if(d&&b&&c.isFocused()){var a=c.renderer,f=a.$cursorLayer.$pixelPos,g=a.layerConfig,h=f.top-g.offset;d=f.top>=0&&h+b.top<0?!0:f.top<g.height&&f.top+b.top+g.lineHeight>window.innerHeight?!1:null,null!=d&&(e.style.top=h+"px",e.style.left=f.left+"px",e.style.height=g.lineHeight+"px",e.scrollIntoView(d)),d=b=null}});this.setAutoScrollEditorIntoView=function(a){a||(delete this.setAutoScrollEditorIntoView,this.removeEventListener("changeSelection",f),this.renderer.removeEventListener("afterRender",h),this.renderer.removeEventListener("beforeRender",g))
}}},this.$resetCursorStyle=function(){var a=this.$cursorStyle||"ace",b=this.renderer.$cursorLayer;b&&(b.setSmoothBlinking("smooth"==a),b.isBlinking=!this.$readOnly&&"wide"!=a)}}).call(s.prototype),r.defineOptions(s.prototype,"editor",{selectionStyle:{set:function(a){this.onSelectionChange(),this._signal("changeSelectionStyle",{data:a})},initialValue:"line"},highlightActiveLine:{set:function(){this.$updateHighlightActiveLine()},initialValue:!0},highlightSelectedWord:{set:function(){this.$onSelectionChange()},initialValue:!0},readOnly:{set:function(a){this.textInput.setReadOnly(a),this.$resetCursorStyle()
},initialValue:!1},cursorStyle:{set:function(){this.$resetCursorStyle()},values:["ace","slim","smooth","wide"],initialValue:"ace"},mergeUndoDeltas:{values:[!1,!0,"always"],initialValue:!0},behavioursEnabled:{initialValue:!0},wrapBehavioursEnabled:{initialValue:!0},autoScrollEditorIntoView:{set:function(a){this.setAutoScrollEditorIntoView(a)}},hScrollBarAlwaysVisible:"renderer",vScrollBarAlwaysVisible:"renderer",highlightGutterLine:"renderer",animatedScroll:"renderer",showInvisibles:"renderer",showPrintMargin:"renderer",printMarginColumn:"renderer",printMargin:"renderer",fadeFoldWidgets:"renderer",showFoldWidgets:"renderer",showLineNumbers:"renderer",showGutter:"renderer",displayIndentGuides:"renderer",fontSize:"renderer",fontFamily:"renderer",maxLines:"renderer",minLines:"renderer",scrollPastEnd:"renderer",fixedWidthGutter:"renderer",theme:"renderer",scrollSpeed:"$mouseHandler",dragDelay:"$mouseHandler",dragEnabled:"$mouseHandler",focusTimout:"$mouseHandler",tooltipFollowsMouse:"$mouseHandler",firstLineNumber:"session",overwrite:"session",newLineMode:"session",useWorker:"session",useSoftTabs:"session",tabSize:"session",wrap:"session",foldStyle:"session",mode:"session"}),b.Editor=s
}),ace.define("ace/mouse/multi_select_handler",["require","exports","module","ace/lib/event"],function(a,b){function d(a,b){return a.row==b.row&&a.column==b.column}function e(a){var b=a.domEvent,c=b.altKey,e=b.shiftKey,g=a.getAccelKey(),h=a.getButton();if(a.editor.inMultiSelectMode&&2==h)return a.editor.textInput.onContextMenu(a.domEvent),void 0;if(!g&&!c)return 0===h&&a.editor.inMultiSelectMode&&a.editor.exitMultiSelectMode(),void 0;var i=a.editor,j=i.selection,k=i.inMultiSelectMode,l=a.getDocumentPosition(),m=j.getCursor(),n=a.inSelection()||j.isEmpty()&&d(l,m),o=a.x,p=a.y,q=function(a){o=a.clientX,p=a.clientY
},r=function(){var a=i.renderer.pixelToScreenCoordinates(o,p),b=s.screenToDocumentPosition(a.row,a.column);d(u,a)&&d(b,j.selectionLead)||(u=a,i.selection.moveToPosition(b),i.renderer.scrollCursorIntoView(),i.removeSelectionMarkers(x),x=j.rectangularRangeBlock(u,t),x.forEach(i.addSelectionMarker,i),i.updateSelectionMarkers())},s=i.session,t=i.renderer.pixelToScreenCoordinates(o,p),u=t;if(!g||c||e||0!==h){if(c&&0===h){a.stop(),k&&!g?j.toSingleRange():!k&&g&&j.addRange();var x=[];e?(t=s.documentToScreenPosition(j.lead),r()):j.moveToPosition(l);
var y=function(){clearInterval(A),i.removeSelectionMarkers(x);for(var b=0;b<x.length;b++)j.addRange(x[b])},z=r;f.capture(i.container,q,y);var A=setInterval(function(){z()},20);return a.preventDefault()}}else{if(!k&&n)return;if(!k){var v=j.toOrientedRange();i.addSelectionMarker(v)}var w=j.rangeList.rangeAtPoint(l);i.$blockScrolling++,i.once("mouseup",function(){var a=j.toOrientedRange();w&&a.isEmpty()&&d(w.cursor,a.cursor)?j.substractPoint(a.cursor):(v&&(i.removeSelectionMarker(v),j.addRange(v)),j.addRange(a)),i.$blockScrolling--
})}}var f=a("../lib/event");b.onMouseDown=e}),ace.define("ace/lib/useragent",["require","exports","module"],function(a,b){if(b.OS={LINUX:"LINUX",MAC:"MAC",WINDOWS:"WINDOWS"},b.getOS=function(){return b.isMac?b.OS.MAC:b.isLinux?b.OS.LINUX:b.OS.WINDOWS},"object"==typeof navigator){var d=(navigator.platform.match(/mac|win|linux/i)||["other"])[0].toLowerCase(),e=navigator.userAgent;b.isWin="win"==d,b.isMac="mac"==d,b.isLinux="linux"==d,b.isIE=("Microsoft Internet Explorer"==navigator.appName||navigator.appName.indexOf("MSAppHost")>=0)&&parseFloat(navigator.userAgent.match(/(?:Trident\/[0-9]+[\.0-9]+;.*rv:|MSIE )([0-9]+[\.0-9]+)/)[1]),b.isOldIE=b.isIE&&b.isIE<9,b.isGecko=b.isMozilla=window.controllers&&"Gecko"===window.navigator.product,b.isOldGecko=b.isGecko&&parseInt((navigator.userAgent.match(/rv\:(\d+)/)||[])[1],10)<4,b.isOpera=window.opera&&"[object Opera]"==Object.prototype.toString.call(window.opera),b.isWebKit=parseFloat(e.split("WebKit/")[1])||void 0,b.isChrome=parseFloat(e.split(" Chrome/")[1])||void 0,b.isAIR=e.indexOf("AdobeAIR")>=0,b.isIPad=e.indexOf("iPad")>=0,b.isTouchPad=e.indexOf("TouchPad")>=0
}}),ace.define("ace/commands/multi_select_commands",["require","exports","module","ace/keyboard/hash_handler"],function(a,b){b.defaultCommands=[{name:"addCursorAbove",exec:function(a){a.selectMoreLines(-1)},bindKey:{win:"Ctrl-Alt-Up",mac:"Ctrl-Alt-Up"},readonly:!0},{name:"addCursorBelow",exec:function(a){a.selectMoreLines(1)},bindKey:{win:"Ctrl-Alt-Down",mac:"Ctrl-Alt-Down"},readonly:!0},{name:"addCursorAboveSkipCurrent",exec:function(a){a.selectMoreLines(-1,!0)},bindKey:{win:"Ctrl-Alt-Shift-Up",mac:"Ctrl-Alt-Shift-Up"},readonly:!0},{name:"addCursorBelowSkipCurrent",exec:function(a){a.selectMoreLines(1,!0)
},bindKey:{win:"Ctrl-Alt-Shift-Down",mac:"Ctrl-Alt-Shift-Down"},readonly:!0},{name:"selectMoreBefore",exec:function(a){a.selectMore(-1)},bindKey:{win:"Ctrl-Alt-Left",mac:"Ctrl-Alt-Left"},readonly:!0},{name:"selectMoreAfter",exec:function(a){a.selectMore(1)},bindKey:{win:"Ctrl-Alt-Right",mac:"Ctrl-Alt-Right"},readonly:!0},{name:"selectNextBefore",exec:function(a){a.selectMore(-1,!0)},bindKey:{win:"Ctrl-Alt-Shift-Left",mac:"Ctrl-Alt-Shift-Left"},readonly:!0},{name:"selectNextAfter",exec:function(a){a.selectMore(1,!0)
},bindKey:{win:"Ctrl-Alt-Shift-Right",mac:"Ctrl-Alt-Shift-Right"},readonly:!0},{name:"splitIntoLines",exec:function(a){a.multiSelect.splitIntoLines()},bindKey:{win:"Ctrl-Alt-L",mac:"Ctrl-Alt-L"},readonly:!0},{name:"alignCursors",exec:function(a){a.alignCursors()},bindKey:{win:"Ctrl-Alt-A",mac:"Ctrl-Alt-A"}}],b.multiSelectCommands=[{name:"singleSelection",bindKey:"esc",exec:function(a){a.exitMultiSelectMode()},readonly:!0,isAvailable:function(a){return a&&a.inMultiSelectMode}}];var d=a("../keyboard/hash_handler").HashHandler;
b.keyboardHandler=new d(b.multiSelectCommands)}),ace.define("ace/lib/oop",["require","exports","module"],function(a,b){b.inherits=function(a,b){a.super_=b,a.prototype=Object.create(b.prototype,{constructor:{value:a,enumerable:!1,writable:!0,configurable:!0}})},b.mixin=function(a,b){for(var c in b)a[c]=b[c];return a},b.implement=function(a,c){b.mixin(a,c)}}),ace.define("ace/worker/worker_client",["require","exports","module","ace/lib/oop","ace/lib/event_emitter","ace/config"],function(a,b){var d=a("../lib/oop"),e=a("../lib/event_emitter").EventEmitter,f=a("../config"),g=function(b,c,d,e){if(this.$sendDeltaQueue=this.$sendDeltaQueue.bind(this),this.changeListener=this.changeListener.bind(this),this.onMessage=this.onMessage.bind(this),a.nameToUrl&&!a.toUrl&&(a.toUrl=a.nameToUrl),f.get("packaged")||!a.toUrl)e=e||f.moduleUrl(c,"worker");
else{var g=this.$normalizePath;e=e||g(a.toUrl("ace/worker/worker.js",null,"_"));var h={};b.forEach(function(b){h[b]=g(a.toUrl(b,null,"_").replace(/(\.js)?(\?.*)?$/,""))})}try{this.$worker=new Worker(e)}catch(i){if(!(i instanceof window.DOMException))throw i;var j=this.$workerBlob(e),k=window.URL||window.webkitURL,l=k.createObjectURL(j);this.$worker=new Worker(l),k.revokeObjectURL(l)}this.$worker.postMessage({init:!0,tlns:h,module:c,classname:d}),this.callbackId=1,this.callbacks={},this.$worker.onmessage=this.onMessage
};(function(){d.implement(this,e),this.onMessage=function(a){var b=a.data;switch(b.type){case"log":window.console&&console.log&&console.log.apply(console,b.data);break;case"event":this._signal(b.name,{data:b.data});break;case"call":var c=this.callbacks[b.id];c&&(c(b.data),delete this.callbacks[b.id])}},this.$normalizePath=function(a){return location.host?(a=a.replace(/^[a-z]+:\/\/[^\/]+/,""),a=location.protocol+"//"+location.host+("/"==a.charAt(0)?"":location.pathname.replace(/\/[^\/]*$/,""))+"/"+a.replace(/^[\/]+/,"")):a
},this.terminate=function(){this._signal("terminate",{}),this.deltaQueue=null,this.$worker.terminate(),this.$worker=null,this.$doc.removeEventListener("change",this.changeListener),this.$doc=null},this.send=function(a,b){this.$worker.postMessage({command:a,args:b})},this.call=function(a,b,c){if(c){var d=this.callbackId++;this.callbacks[d]=c,b.push(d)}this.send(a,b)},this.emit=function(a,b){try{this.$worker.postMessage({event:a,data:{data:b.data}})}catch(c){}},this.attachToDocument=function(a){this.$doc&&this.terminate(),this.$doc=a,this.call("setValue",[a.getValue()]),a.on("change",this.changeListener)
},this.changeListener=function(a){this.deltaQueue?this.deltaQueue.push(a.data):(this.deltaQueue=[a.data],setTimeout(this.$sendDeltaQueue,0))},this.$sendDeltaQueue=function(){var a=this.deltaQueue;a&&(this.deltaQueue=null,a.length>20&&a.length>this.$doc.getLength()>>1?this.call("setValue",[this.$doc.getValue()]):this.emit("change",{data:a}))},this.$workerBlob=function(a){var b="importScripts('"+a+"');";try{return new Blob([b],{type:"application/javascript"})}catch(c){var d=window.BlobBuilder||window.WebKitBlobBuilder||window.MozBlobBuilder,e=new d;
return e.append(b),e.getBlob("application/javascript")}}}).call(g.prototype);var h=function(a,b,c){this.$sendDeltaQueue=this.$sendDeltaQueue.bind(this),this.changeListener=this.changeListener.bind(this),this.callbackId=1,this.callbacks={},this.messageBuffer=[];var d=null,g=!1,h=Object.create(e),i=this;this.$worker={},this.$worker.terminate=function(){},this.$worker.postMessage=function(a){i.messageBuffer.push(a),d&&(g?setTimeout(j):j())},this.setEmitSync=function(a){g=a};var j=function(){var a=i.messageBuffer.shift();
a.command?d[a.command].apply(d,a.args):a.event&&h._signal(a.event,a.data)};h.postMessage=function(a){i.onMessage({data:a})},h.callback=function(a,b){this.postMessage({type:"call",id:b,data:a})},h.emit=function(a,b){this.postMessage({type:"event",name:a,data:b})},f.loadModule(["worker",b],function(a){for(d=new a[c](h);i.messageBuffer.length;)j()})};h.prototype=g.prototype,b.UIWorkerClient=h,b.WorkerClient=g}),ace.define("ace/lib/keys",["require","exports","module","ace/lib/oop"],function(a,b){var d=a("./oop"),e=function(){var b,c,a={MODIFIER_KEYS:{16:"Shift",17:"Ctrl",18:"Alt",224:"Meta"},KEY_MODS:{ctrl:1,alt:2,option:2,shift:4,"super":8,meta:8,command:8,cmd:8},FUNCTION_KEYS:{8:"Backspace",9:"Tab",13:"Return",19:"Pause",27:"Esc",32:"Space",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"Left",38:"Up",39:"Right",40:"Down",44:"Print",45:"Insert",46:"Delete",96:"Numpad0",97:"Numpad1",98:"Numpad2",99:"Numpad3",100:"Numpad4",101:"Numpad5",102:"Numpad6",103:"Numpad7",104:"Numpad8",105:"Numpad9","-13":"NumpadEnter",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"Numlock",145:"Scrolllock"},PRINTABLE_KEYS:{32:" ",48:"0",49:"1",50:"2",51:"3",52:"4",53:"5",54:"6",55:"7",56:"8",57:"9",59:";",61:"=",65:"a",66:"b",67:"c",68:"d",69:"e",70:"f",71:"g",72:"h",73:"i",74:"j",75:"k",76:"l",77:"m",78:"n",79:"o",80:"p",81:"q",82:"r",83:"s",84:"t",85:"u",86:"v",87:"w",88:"x",89:"y",90:"z",107:"+",109:"-",110:".",188:",",190:".",191:"/",192:"`",219:"[",220:"\\",221:"]",222:"'"}};
for(c in a.FUNCTION_KEYS)b=a.FUNCTION_KEYS[c].toLowerCase(),a[b]=parseInt(c,10);for(c in a.PRINTABLE_KEYS)b=a.PRINTABLE_KEYS[c].toLowerCase(),a[b]=parseInt(c,10);return d.mixin(a,a.MODIFIER_KEYS),d.mixin(a,a.PRINTABLE_KEYS),d.mixin(a,a.FUNCTION_KEYS),a.enter=a["return"],a.escape=a.esc,a.del=a["delete"],a[173]="-",function(){for(var b=["cmd","ctrl","alt","shift"],c=Math.pow(2,b.length);c--;)a.KEY_MODS[c]=b.filter(function(b){return c&a.KEY_MODS[b]}).join("-")+"-"}(),a}();d.mixin(b,e),b.keyCodeToString=function(a){return(e[a]||String.fromCharCode(a)).toLowerCase()
}}),ace.define("ace/placeholder",["require","exports","module","ace/range","ace/lib/event_emitter","ace/lib/oop"],function(a,b){var d=a("./range").Range,e=a("./lib/event_emitter").EventEmitter,f=a("./lib/oop"),g=function(a,b,c,d,e,f){var g=this;this.length=b,this.session=a,this.doc=a.getDocument(),this.mainClass=e,this.othersClass=f,this.$onUpdate=this.onUpdate.bind(this),this.doc.on("change",this.$onUpdate),this.$others=d,this.$onCursorChange=function(){setTimeout(function(){g.onCursorChange()})},this.$pos=c;
var h=a.getUndoManager().$undoStack||a.getUndoManager().$undostack||{length:-1};this.$undoStackDepth=h.length,this.setup(),a.selection.on("changeCursor",this.$onCursorChange)};(function(){f.implement(this,e),this.setup=function(){var a=this,b=this.doc,c=this.session,e=this.$pos;this.pos=b.createAnchor(e.row,e.column),this.markerId=c.addMarker(new d(e.row,e.column,e.row,e.column+this.length),this.mainClass,null,!1),this.pos.on("change",function(b){c.removeMarker(a.markerId),a.markerId=c.addMarker(new d(b.value.row,b.value.column,b.value.row,b.value.column+a.length),a.mainClass,null,!1)
}),this.others=[],this.$others.forEach(function(c){var d=b.createAnchor(c.row,c.column);a.others.push(d)}),c.setUndoSelect(!1)},this.showOtherMarkers=function(){if(!this.othersActive){var a=this.session,b=this;this.othersActive=!0,this.others.forEach(function(c){c.markerId=a.addMarker(new d(c.row,c.column,c.row,c.column+b.length),b.othersClass,null,!1),c.on("change",function(e){a.removeMarker(c.markerId),c.markerId=a.addMarker(new d(e.value.row,e.value.column,e.value.row,e.value.column+b.length),b.othersClass,null,!1)
})})}},this.hideOtherMarkers=function(){if(this.othersActive){this.othersActive=!1;for(var a=0;a<this.others.length;a++)this.session.removeMarker(this.others[a].markerId)}},this.onUpdate=function(a){var b=a.data,c=b.range;if(c.start.row===c.end.row&&c.start.row===this.pos.row&&!this.$updating){this.$updating=!0;var e="insertText"===b.action?c.end.column-c.start.column:c.start.column-c.end.column;if(c.start.column>=this.pos.column&&c.start.column<=this.pos.column+this.length+1){var f=c.start.column-this.pos.column;
if(this.length+=e,!this.session.$fromUndo){if("insertText"===b.action)for(var g=this.others.length-1;g>=0;g--){var h=this.others[g],i={row:h.row,column:h.column+f};h.row===c.start.row&&c.start.column<h.column&&(i.column+=e),this.doc.insert(i,b.text)}else if("removeText"===b.action)for(var g=this.others.length-1;g>=0;g--){var h=this.others[g],i={row:h.row,column:h.column+f};h.row===c.start.row&&c.start.column<h.column&&(i.column+=e),this.doc.remove(new d(i.row,i.column,i.row,i.column-e))}c.start.column===this.pos.column&&"insertText"===b.action?setTimeout(function(){this.pos.setPosition(this.pos.row,this.pos.column-e);
for(var a=0;a<this.others.length;a++){var b=this.others[a],d={row:b.row,column:b.column-e};b.row===c.start.row&&c.start.column<b.column&&(d.column+=e),b.setPosition(d.row,d.column)}}.bind(this),0):c.start.column===this.pos.column&&"removeText"===b.action&&setTimeout(function(){for(var a=0;a<this.others.length;a++){var b=this.others[a];b.row===c.start.row&&c.start.column<b.column&&b.setPosition(b.row,b.column-e)}}.bind(this),0)}this.pos._emit("change",{value:this.pos});for(var g=0;g<this.others.length;g++)this.others[g]._emit("change",{value:this.others[g]})
}this.$updating=!1}},this.onCursorChange=function(a){if(!this.$updating){var b=this.session.selection.getCursor();b.row===this.pos.row&&b.column>=this.pos.column&&b.column<=this.pos.column+this.length?(this.showOtherMarkers(),this._emit("cursorEnter",a)):(this.hideOtherMarkers(),this._emit("cursorLeave",a))}},this.detach=function(){this.session.removeMarker(this.markerId),this.hideOtherMarkers(),this.doc.removeEventListener("change",this.$onUpdate),this.session.selection.removeEventListener("changeCursor",this.$onCursorChange),this.pos.detach();
for(var a=0;a<this.others.length;a++)this.others[a].detach();this.session.setUndoSelect(!0)},this.cancel=function(){if(-1===this.$undoStackDepth)throw Error("Canceling placeholders only supported with undo manager attached to session.");for(var a=this.session.getUndoManager(),b=(a.$undoStack||a.$undostack).length-this.$undoStackDepth,c=0;b>c;c++)a.undo(!0)}}).call(g.prototype),b.PlaceHolder=g}),ace.define("ace/lib/event",["require","exports","module","ace/lib/keys","ace/lib/useragent"],function(a,b){function d(a,b,c){var d=g(b);
if(!f.isMac&&h){if((h[91]||h[92])&&(d|=8),h.altGr){if(3==(3&d))return;h.altGr=0}if(18===c||17===c){var j=b.location||b.keyLocation;if(17===c&&1===j)i=b.timeStamp;else if(18===c&&3===d&&2===j){var k=-i;i=b.timeStamp,k+=i,3>k&&(h.altGr=!0)}}}if(c in e.MODIFIER_KEYS){switch(e.MODIFIER_KEYS[c]){case"Alt":d=2;break;case"Shift":d=4;break;case"Ctrl":d=1;break;default:d=8}c=-1}return 8&d&&(91===c||93===c)&&(c=-1),d||13!==c||!b.location&&3!==b.keyLocation||(a(b,d,-c),!b.defaultPrevented)?d||c in e.FUNCTION_KEYS||c in e.PRINTABLE_KEYS?a(b,d,c):!1:void 0
}var e=a("./keys"),f=a("./useragent");b.addListener=function(a,b,c){if(a.addEventListener)return a.addEventListener(b,c,!1);if(a.attachEvent){var d=function(){c.call(a,window.event)};c._wrapper=d,a.attachEvent("on"+b,d)}},b.removeListener=function(a,b,c){return a.removeEventListener?a.removeEventListener(b,c,!1):(a.detachEvent&&a.detachEvent("on"+b,c._wrapper||c),void 0)},b.stopEvent=function(a){return b.stopPropagation(a),b.preventDefault(a),!1},b.stopPropagation=function(a){a.stopPropagation?a.stopPropagation():a.cancelBubble=!0
},b.preventDefault=function(a){a.preventDefault?a.preventDefault():a.returnValue=!1},b.getButton=function(a){return"dblclick"==a.type?0:"contextmenu"==a.type||a.ctrlKey&&f.isMac?2:a.preventDefault?a.button:{1:0,2:2,4:1}[a.button]},b.capture=function(a,c,d){function e(a){c&&c(a),d&&d(a),b.removeListener(document,"mousemove",c,!0),b.removeListener(document,"mouseup",e,!0),b.removeListener(document,"dragstart",e,!0)}return b.addListener(document,"mousemove",c,!0),b.addListener(document,"mouseup",e,!0),b.addListener(document,"dragstart",e,!0),e
},b.addMouseWheelListener=function(a,c){"onmousewheel"in a?b.addListener(a,"mousewheel",function(a){var b=8;void 0!==a.wheelDeltaX?(a.wheelX=-a.wheelDeltaX/b,a.wheelY=-a.wheelDeltaY/b):(a.wheelX=0,a.wheelY=-a.wheelDelta/b),c(a)}):"onwheel"in a?b.addListener(a,"wheel",function(a){var b=.35;switch(a.deltaMode){case a.DOM_DELTA_PIXEL:a.wheelX=a.deltaX*b||0,a.wheelY=a.deltaY*b||0;break;case a.DOM_DELTA_LINE:case a.DOM_DELTA_PAGE:a.wheelX=5*(a.deltaX||0),a.wheelY=5*(a.deltaY||0)}c(a)}):b.addListener(a,"DOMMouseScroll",function(a){a.axis&&a.axis==a.HORIZONTAL_AXIS?(a.wheelX=5*(a.detail||0),a.wheelY=0):(a.wheelX=0,a.wheelY=5*(a.detail||0)),c(a)
})},b.addMultiMouseDownListener=function(a,c,d,e){var h,i,j,g=0,k={2:"dblclick",3:"tripleclick",4:"quadclick"};b.addListener(a,"mousedown",function(a){if(0!==b.getButton(a)?g=0:a.detail>1?(g++,g>4&&(g=1)):g=1,f.isIE){var c=Math.abs(a.clientX-h)>5||Math.abs(a.clientY-i)>5;c&&(g=1),1==g&&(h=a.clientX,i=a.clientY)}if(d[e]("mousedown",a),g>4)g=0;else if(g>1)return d[e](k[g],a)}),f.isOldIE&&b.addListener(a,"dblclick",function(a){g=2,j&&clearTimeout(j),j=setTimeout(function(){j=null},c[g-1]||600),d[e]("mousedown",a),d[e](k[g],a)
})};var g=!f.isMac||!f.isOpera||"KeyboardEvent"in window?function(a){return 0|(a.ctrlKey?1:0)|(a.altKey?2:0)|(a.shiftKey?4:0)|(a.metaKey?8:0)}:function(a){return 0|(a.metaKey?1:0)|(a.altKey?2:0)|(a.shiftKey?4:0)|(a.ctrlKey?8:0)};b.getModifierString=function(a){return e.KEY_MODS[g(a)]};var h=null,i=0;if(b.addCommandKeyListener=function(a,c){var e=b.addListener;if(f.isOldGecko||f.isOpera&&!("KeyboardEvent"in window)){var g=null;e(a,"keydown",function(a){g=a.keyCode}),e(a,"keypress",function(a){return d(c,a,g)})
}else{var i=null;e(a,"keydown",function(a){h[a.keyCode]=!0;var b=d(c,a,a.keyCode);return i=a.defaultPrevented,b}),e(a,"keypress",function(a){i&&(a.ctrlKey||a.altKey||a.shiftKey||a.metaKey)&&(b.stopEvent(a),i=null)}),e(a,"keyup",function(a){h[a.keyCode]=null}),h||(h=Object.create(null),e(window,"focus",function(){h=Object.create(null)}))}},window.postMessage&&!f.isOldIE){var j=1;b.nextTick=function(a,c){c=c||window;var d="zero-timeout-message-"+j;b.addListener(c,"message",function e(f){f.data==d&&(b.stopPropagation(f),b.removeListener(c,"message",e),a())
}),c.postMessage(d,"*")}}b.nextFrame=window.requestAnimationFrame||window.mozRequestAnimationFrame||window.webkitRequestAnimationFrame||window.msRequestAnimationFrame||window.oRequestAnimationFrame,b.nextFrame=b.nextFrame?b.nextFrame.bind(window):function(a){setTimeout(a,17)}}),ace.define("ace/mode/folding/fold_mode",["require","exports","module","ace/range"],function(a,b){var d=a("../../range").Range,e=b.FoldMode=function(){};(function(){this.foldingStartMarker=null,this.foldingStopMarker=null,this.getFoldWidget=function(a,b,c){var d=a.getLine(c);
return this.foldingStartMarker.test(d)?"start":"markbeginend"==b&&this.foldingStopMarker&&this.foldingStopMarker.test(d)?"end":""},this.getFoldWidgetRange=function(){return null},this.indentationBlock=function(a,b,c){var e=/\S/,f=a.getLine(b),g=f.search(e);if(-1!=g){for(var h=c||f.length,i=a.getLength(),j=b,k=b;++b<i;){var l=a.getLine(b).search(e);if(-1!=l){if(g>=l)break;k=b}}if(k>j){var m=a.getLine(k).length;return new d(j,h,k,m)}}},this.openingBracketBlock=function(a,b,c,e,f){var g={row:c,column:e+1},h=a.$findClosingBracket(b,g,f);
if(h){var i=a.foldWidgets[h.row];return null==i&&(i=a.getFoldWidget(h.row)),"start"==i&&h.row>g.row&&(h.row--,h.column=a.getLine(h.row).length),d.fromPoints(g,h)}},this.closingBracketBlock=function(a,b,c,e){var g={row:c,column:e},h=a.$findOpeningBracket(b,g);if(h)return h.column++,g.column--,d.fromPoints(h,g)}}).call(e.prototype)}),ace.define("ace/lib/dom",["require","exports","module"],function(a,b){if("undefined"!=typeof document){var d="http://www.w3.org/1999/xhtml";b.getDocumentHead=function(a){return a||(a=document),a.head||a.getElementsByTagName("head")[0]||a.documentElement
},b.createElement=function(a,b){return document.createElementNS?document.createElementNS(b||d,a):document.createElement(a)},b.hasCssClass=function(a,b){var c=a.className.split(/\s+/g);return-1!==c.indexOf(b)},b.addCssClass=function(a,c){b.hasCssClass(a,c)||(a.className+=" "+c)},b.removeCssClass=function(a,b){for(var c=a.className.split(/\s+/g);;){var d=c.indexOf(b);if(-1==d)break;c.splice(d,1)}a.className=c.join(" ")},b.toggleCssClass=function(a,b){for(var c=a.className.split(/\s+/g),d=!0;;){var e=c.indexOf(b);
if(-1==e)break;d=!1,c.splice(e,1)}return d&&c.push(b),a.className=c.join(" "),d},b.setCssClass=function(a,c,d){d?b.addCssClass(a,c):b.removeCssClass(a,c)},b.hasCssString=function(a,b){var d,c=0;if(b=b||document,b.createStyleSheet&&(d=b.styleSheets)){for(;c<d.length;)if(d[c++].owningElement.id===a)return!0}else if(d=b.getElementsByTagName("style"))for(;c<d.length;)if(d[c++].id===a)return!0;return!1},b.importCssString=function(a,c,e){if(e=e||document,c&&b.hasCssString(c,e))return null;var f;e.createStyleSheet?(f=e.createStyleSheet(),f.cssText=a,c&&(f.owningElement.id=c)):(f=e.createElementNS?e.createElementNS(d,"style"):e.createElement("style"),f.appendChild(e.createTextNode(a)),c&&(f.id=c),b.getDocumentHead(e).appendChild(f))
},b.importCssStylsheet=function(a,c){if(c.createStyleSheet)c.createStyleSheet(a);else{var d=b.createElement("link");d.rel="stylesheet",d.href=a,b.getDocumentHead(c).appendChild(d)}},b.getInnerWidth=function(a){return parseInt(b.computedStyle(a,"paddingLeft"),10)+parseInt(b.computedStyle(a,"paddingRight"),10)+a.clientWidth},b.getInnerHeight=function(a){return parseInt(b.computedStyle(a,"paddingTop"),10)+parseInt(b.computedStyle(a,"paddingBottom"),10)+a.clientHeight},void 0!==window.pageYOffset?(b.getPageScrollTop=function(){return window.pageYOffset
},b.getPageScrollLeft=function(){return window.pageXOffset}):(b.getPageScrollTop=function(){return document.body.scrollTop},b.getPageScrollLeft=function(){return document.body.scrollLeft}),b.computedStyle=window.getComputedStyle?function(a,b){return b?(window.getComputedStyle(a,"")||{})[b]||"":window.getComputedStyle(a,"")||{}}:function(a,b){return b?a.currentStyle[b]:a.currentStyle},b.scrollbarWidth=function(a){var c=b.createElement("ace_inner");c.style.width="100%",c.style.minWidth="0px",c.style.height="200px",c.style.display="block";
var d=b.createElement("ace_outer"),e=d.style;e.position="absolute",e.left="-10000px",e.overflow="hidden",e.width="200px",e.minWidth="0px",e.height="150px",e.display="block",d.appendChild(c);var f=a.documentElement;f.appendChild(d);var g=c.offsetWidth;e.overflow="scroll";var h=c.offsetWidth;return g==h&&(h=d.clientWidth),f.removeChild(d),g-h},b.setInnerHtml=function(a,b){var c=a.cloneNode(!1);return c.innerHTML=b,a.parentNode.replaceChild(c,a),c},"textContent"in document.documentElement?(b.setInnerText=function(a,b){a.textContent=b
},b.getInnerText=function(a){return a.textContent}):(b.setInnerText=function(a,b){a.innerText=b},b.getInnerText=function(a){return a.innerText}),b.getParentWindow=function(a){return a.defaultView||a.parentWindow}}}),ace.define("ace/theme/textmate",["require","exports","module","ace/lib/dom"],function(a,b){b.isDark=!1,b.cssClass="ace-tm",b.cssText='.ace-tm .ace_gutter {background: #f0f0f0;color: #333;}.ace-tm .ace_print-margin {width: 1px;background: #e8e8e8;}.ace-tm .ace_fold {background-color: #6B72E6;}.ace-tm {background-color: #FFFFFF;color: black;}.ace-tm .ace_cursor {color: black;}.ace-tm .ace_invisible {color: rgb(191, 191, 191);}.ace-tm .ace_storage,.ace-tm .ace_keyword {color: blue;}.ace-tm .ace_constant {color: rgb(197, 6, 11);}.ace-tm .ace_constant.ace_buildin {color: rgb(88, 72, 246);}.ace-tm .ace_constant.ace_language {color: rgb(88, 92, 246);}.ace-tm .ace_constant.ace_library {color: rgb(6, 150, 14);}.ace-tm .ace_invalid {background-color: rgba(255, 0, 0, 0.1);color: red;}.ace-tm .ace_support.ace_function {color: rgb(60, 76, 114);}.ace-tm .ace_support.ace_constant {color: rgb(6, 150, 14);}.ace-tm .ace_support.ace_type,.ace-tm .ace_support.ace_class {color: rgb(109, 121, 222);}.ace-tm .ace_keyword.ace_operator {color: rgb(104, 118, 135);}.ace-tm .ace_string {color: rgb(3, 106, 7);}.ace-tm .ace_comment {color: rgb(76, 136, 107);}.ace-tm .ace_comment.ace_doc {color: rgb(0, 102, 255);}.ace-tm .ace_comment.ace_doc.ace_tag {color: rgb(128, 159, 191);}.ace-tm .ace_constant.ace_numeric {color: rgb(0, 0, 205);}.ace-tm .ace_variable {color: rgb(49, 132, 149);}.ace-tm .ace_xml-pe {color: rgb(104, 104, 91);}.ace-tm .ace_entity.ace_name.ace_function {color: #0000A2;}.ace-tm .ace_heading {color: rgb(12, 7, 255);}.ace-tm .ace_list {color:rgb(185, 6, 144);}.ace-tm .ace_meta.ace_tag {color:rgb(0, 22, 142);}.ace-tm .ace_string.ace_regex {color: rgb(255, 0, 0)}.ace-tm .ace_marker-layer .ace_selection {background: rgb(181, 213, 255);}.ace-tm.ace_multiselect .ace_selection.ace_start {box-shadow: 0 0 3px 0px white;border-radius: 2px;}.ace-tm .ace_marker-layer .ace_step {background: rgb(252, 255, 0);}.ace-tm .ace_marker-layer .ace_stack {background: rgb(164, 229, 101);}.ace-tm .ace_marker-layer .ace_bracket {margin: -1px 0 0 -1px;border: 1px solid rgb(192, 192, 192);}.ace-tm .ace_marker-layer .ace_active-line {background: rgba(0, 0, 0, 0.07);}.ace-tm .ace_gutter-active-line {background-color : #dcdcdc;}.ace-tm .ace_marker-layer .ace_selected-word {background: rgb(250, 250, 255);border: 1px solid rgb(200, 200, 250);}.ace-tm .ace_indent-guide {background: url("data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAACCAYAAACZgbYnAAAAE0lEQVQImWP4////f4bLly//BwAmVgd1/w11/gAAAABJRU5ErkJggg==") right repeat-y;}';
var d=a("../lib/dom");d.importCssString(b.cssText,b.cssClass)}),ace.define("ace/lib/es5-shim",["require","exports","module"],function(){function d(){}function e(a){try{return Object.defineProperty(a,"sentinel",{}),"sentinel"in a}catch(b){}}function f(a){return a=+a,a!==a?a=0:0!==a&&a!==1/0&&a!==-1/0&&(a=(a>0||-1)*Math.floor(Math.abs(a))),a}Function.prototype.bind||(Function.prototype.bind=function(a){var b=this;if("function"!=typeof b)throw new TypeError("Function.prototype.bind called on incompatible "+b);var c=l.call(arguments,1),e=function(){if(this instanceof e){var d=b.apply(this,c.concat(l.call(arguments)));
return Object(d)===d?d:this}return b.apply(a,c.concat(l.call(arguments)))};return b.prototype&&(d.prototype=b.prototype,e.prototype=new d,d.prototype=null),e});var o,p,q,r,s,i=Function.prototype.call,j=Array.prototype,k=Object.prototype,l=j.slice,m=i.bind(k.toString),n=i.bind(k.hasOwnProperty);if((s=n(k,"__defineGetter__"))&&(o=i.bind(k.__defineGetter__),p=i.bind(k.__defineSetter__),q=i.bind(k.__lookupGetter__),r=i.bind(k.__lookupSetter__)),2!=[1,2].splice(0).length)if(function(){function a(a){var b=new Array(a+2);
return b[0]=b[1]=0,b}var c,b=[];return b.splice.apply(b,a(20)),b.splice.apply(b,a(26)),c=b.length,b.splice(5,0,"XXX"),c+1==b.length,c+1==b.length?!0:void 0}()){var t=Array.prototype.splice;Array.prototype.splice=function(a,b){return arguments.length?t.apply(this,[void 0===a?0:a,void 0===b?this.length-a:b].concat(l.call(arguments,2))):[]}}else Array.prototype.splice=function(a,b){var c=this.length;a>0?a>c&&(a=c):void 0==a?a=0:0>a&&(a=Math.max(c+a,0)),c>a+b||(b=c-a);var d=this.slice(a,a+b),e=l.call(arguments,2),f=e.length;
if(a===c)f&&this.push.apply(this,e);else{var g=Math.min(b,c-a),h=a+g,i=h+f-g,j=c-h,k=c-g;if(h>i)for(var m=0;j>m;++m)this[i+m]=this[h+m];else if(i>h)for(m=j;m--;)this[i+m]=this[h+m];if(f&&a===k)this.length=k,this.push.apply(this,e);else for(this.length=k+f,m=0;f>m;++m)this[a+m]=e[m]}return d};Array.isArray||(Array.isArray=function(a){return"[object Array]"==m(a)});var u=Object("a"),v="a"!=u[0]||!(0 in u);if(Array.prototype.forEach||(Array.prototype.forEach=function(a){var b=M(this),c=v&&"[object String]"==m(this)?this.split(""):b,d=arguments[1],e=-1,f=c.length>>>0;
if("[object Function]"!=m(a))throw new TypeError;for(;++e<f;)e in c&&a.call(d,c[e],e,b)}),Array.prototype.map||(Array.prototype.map=function(a){var b=M(this),c=v&&"[object String]"==m(this)?this.split(""):b,d=c.length>>>0,e=Array(d),f=arguments[1];if("[object Function]"!=m(a))throw new TypeError(a+" is not a function");for(var g=0;d>g;g++)g in c&&(e[g]=a.call(f,c[g],g,b));return e}),Array.prototype.filter||(Array.prototype.filter=function(a){var f,b=M(this),c=v&&"[object String]"==m(this)?this.split(""):b,d=c.length>>>0,e=[],g=arguments[1];
if("[object Function]"!=m(a))throw new TypeError(a+" is not a function");for(var h=0;d>h;h++)h in c&&(f=c[h],a.call(g,f,h,b)&&e.push(f));return e}),Array.prototype.every||(Array.prototype.every=function(a){var b=M(this),c=v&&"[object String]"==m(this)?this.split(""):b,d=c.length>>>0,e=arguments[1];if("[object Function]"!=m(a))throw new TypeError(a+" is not a function");for(var f=0;d>f;f++)if(f in c&&!a.call(e,c[f],f,b))return!1;return!0}),Array.prototype.some||(Array.prototype.some=function(a){var b=M(this),c=v&&"[object String]"==m(this)?this.split(""):b,d=c.length>>>0,e=arguments[1];
if("[object Function]"!=m(a))throw new TypeError(a+" is not a function");for(var f=0;d>f;f++)if(f in c&&a.call(e,c[f],f,b))return!0;return!1}),Array.prototype.reduce||(Array.prototype.reduce=function(a){var b=M(this),c=v&&"[object String]"==m(this)?this.split(""):b,d=c.length>>>0;if("[object Function]"!=m(a))throw new TypeError(a+" is not a function");if(!d&&1==arguments.length)throw new TypeError("reduce of empty array with no initial value");var f,e=0;if(arguments.length>=2)f=arguments[1];else for(;;){if(e in c){f=c[e++];
break}if(++e>=d)throw new TypeError("reduce of empty array with no initial value")}for(;d>e;e++)e in c&&(f=a.call(void 0,f,c[e],e,b));return f}),Array.prototype.reduceRight||(Array.prototype.reduceRight=function(a){var b=M(this),c=v&&"[object String]"==m(this)?this.split(""):b,d=c.length>>>0;if("[object Function]"!=m(a))throw new TypeError(a+" is not a function");if(!d&&1==arguments.length)throw new TypeError("reduceRight of empty array with no initial value");var e,f=d-1;if(arguments.length>=2)e=arguments[1];
else for(;;){if(f in c){e=c[f--];break}if(--f<0)throw new TypeError("reduceRight of empty array with no initial value")}do f in this&&(e=a.call(void 0,e,c[f],f,b));while(f--);return e}),Array.prototype.indexOf&&-1==[0,1].indexOf(1,2)||(Array.prototype.indexOf=function(a){var b=v&&"[object String]"==m(this)?this.split(""):M(this),c=b.length>>>0;if(!c)return-1;var d=0;for(arguments.length>1&&(d=f(arguments[1])),d=d>=0?d:Math.max(0,c+d);c>d;d++)if(d in b&&b[d]===a)return d;return-1}),Array.prototype.lastIndexOf&&-1==[0,1].lastIndexOf(0,-3)||(Array.prototype.lastIndexOf=function(a){var b=v&&"[object String]"==m(this)?this.split(""):M(this),c=b.length>>>0;
if(!c)return-1;var d=c-1;for(arguments.length>1&&(d=Math.min(d,f(arguments[1]))),d=d>=0?d:c-Math.abs(d);d>=0;d--)if(d in b&&a===b[d])return d;return-1}),Object.getPrototypeOf||(Object.getPrototypeOf=function(a){return a.__proto__||(a.constructor?a.constructor.prototype:k)}),!Object.getOwnPropertyDescriptor){var w="Object.getOwnPropertyDescriptor called on a non-object: ";Object.getOwnPropertyDescriptor=function(a,b){if("object"!=typeof a&&"function"!=typeof a||null===a)throw new TypeError(w+a);if(n(a,b)){var c,d,e;
if(c={enumerable:!0,configurable:!0},s){var f=a.__proto__;a.__proto__=k;var d=q(a,b),e=r(a,b);if(a.__proto__=f,d||e)return d&&(c.get=d),e&&(c.set=e),c}return c.value=a[b],c}}}if(Object.getOwnPropertyNames||(Object.getOwnPropertyNames=function(a){return Object.keys(a)}),!Object.create){var x;x=null===Object.prototype.__proto__?function(){return{__proto__:null}}:function(){var a={};for(var b in a)a[b]=null;return a.constructor=a.hasOwnProperty=a.propertyIsEnumerable=a.isPrototypeOf=a.toLocaleString=a.toString=a.valueOf=a.__proto__=null,a
},Object.create=function(a,b){var c;if(null===a)c=x();else{if("object"!=typeof a)throw new TypeError("typeof prototype["+typeof a+"] != 'object'");var d=function(){};d.prototype=a,c=new d,c.__proto__=a}return void 0!==b&&Object.defineProperties(c,b),c}}if(Object.defineProperty){var y=e({}),z="undefined"==typeof document||e(document.createElement("div"));if(!y||!z)var A=Object.defineProperty}if(!Object.defineProperty||A){var B="Property description must be an object: ",C="Object.defineProperty called on non-object: ",D="getters & setters can not be defined on this javascript engine";
Object.defineProperty=function(a,b,c){if("object"!=typeof a&&"function"!=typeof a||null===a)throw new TypeError(C+a);if("object"!=typeof c&&"function"!=typeof c||null===c)throw new TypeError(B+c);if(A)try{return A.call(Object,a,b,c)}catch(d){}if(n(c,"value"))if(s&&(q(a,b)||r(a,b))){var e=a.__proto__;a.__proto__=k,delete a[b],a[b]=c.value,a.__proto__=e}else a[b]=c.value;else{if(!s)throw new TypeError(D);n(c,"get")&&o(a,b,c.get),n(c,"set")&&p(a,b,c.set)}return a}}Object.defineProperties||(Object.defineProperties=function(a,b){for(var c in b)n(b,c)&&Object.defineProperty(a,c,b[c]);
return a}),Object.seal||(Object.seal=function(a){return a}),Object.freeze||(Object.freeze=function(a){return a});try{Object.freeze(function(){})}catch(E){Object.freeze=function(a){return function(b){return"function"==typeof b?b:a(b)}}(Object.freeze)}if(Object.preventExtensions||(Object.preventExtensions=function(a){return a}),Object.isSealed||(Object.isSealed=function(){return!1}),Object.isFrozen||(Object.isFrozen=function(){return!1}),Object.isExtensible||(Object.isExtensible=function(a){if(Object(a)===a)throw new TypeError;
for(var b="";n(a,b);)b+="?";a[b]=!0;var c=n(a,b);return delete a[b],c}),!Object.keys){var F=!0,G=["toString","toLocaleString","valueOf","hasOwnProperty","isPrototypeOf","propertyIsEnumerable","constructor"],H=G.length;for(var I in{toString:null})F=!1;Object.keys=function N(a){if("object"!=typeof a&&"function"!=typeof a||null===a)throw new TypeError("Object.keys called on a non-object");var N=[];for(var b in a)n(a,b)&&N.push(b);if(F)for(var c=0,d=H;d>c;c++){var e=G[c];n(a,e)&&N.push(e)}return N}}Date.now||(Date.now=function(){return(new Date).getTime()
});var J="	\n\f\r \xa0\u1680\u180e\u2000\u2001\u2002\u2003\u2004\u2005\u2006\u2007\u2008\u2009\u200a\u202f\u205f\u3000\u2028\u2029\ufeff";if(!String.prototype.trim||J.trim()){J="["+J+"]";var K=new RegExp("^"+J+J+"*"),L=new RegExp(J+J+"*$");String.prototype.trim=function(){return String(this).replace(K,"").replace(L,"")}}var M=function(a){if(null==a)throw new TypeError("can't convert "+a+" to object");return Object(a)}}),ace.define("ace/lib/regexp",["require","exports","module"],function(){function d(a){return(a.global?"g":"")+(a.ignoreCase?"i":"")+(a.multiline?"m":"")+(a.extended?"x":"")+(a.sticky?"y":"")
}function e(a,b,c){if(Array.prototype.indexOf)return a.indexOf(b,c);for(var d=c||0;d<a.length;d++)if(a[d]===b)return d;return-1}var f={exec:RegExp.prototype.exec,test:RegExp.prototype.test,match:String.prototype.match,replace:String.prototype.replace,split:String.prototype.split},g=void 0===f.exec.call(/()??/,"")[1],h=function(){var a=/^/g;return f.test.call(a,""),!a.lastIndex}();h&&g||(RegExp.prototype.exec=function(a){var c,i,b=f.exec.apply(this,arguments);if("string"==typeof a&&b){if(!g&&b.length>1&&e(b,"")>-1&&(i=RegExp(this.source,f.replace.call(d(this),"g","")),f.replace.call(a.slice(b.index),i,function(){for(var a=1;a<arguments.length-2;a++)void 0===arguments[a]&&(b[a]=void 0)
})),this._xregexp&&this._xregexp.captureNames)for(var j=1;j<b.length;j++)c=this._xregexp.captureNames[j-1],c&&(b[c]=b[j]);!h&&this.global&&!b[0].length&&this.lastIndex>b.index&&this.lastIndex--}return b},h||(RegExp.prototype.test=function(a){var b=f.exec.call(this,a);return b&&this.global&&!b[0].length&&this.lastIndex>b.index&&this.lastIndex--,!!b}))}),ace.define("ace/ext/error_marker",["require","exports","module","ace/line_widgets","ace/lib/dom","ace/range"],function(a,b){function d(a,b,c){for(var d=0,e=a.length-1;e>=d;){var f=d+e>>1,g=c(b,a[f]);
if(g>0)d=f+1;else{if(!(0>g))return f;e=f-1}}return-(d+1)}function e(a,b,c){var e=a.getAnnotations().sort(h.comparePoints);if(e.length){var f=d(e,{row:b,column:-1},h.comparePoints);0>f&&(f=-f-1),f>=e.length-1?f=c>0?0:e.length-1:0===f&&0>c&&(f=e.length-1);var g=e[f];if(g&&c){if(g.row===b){do g=e[f+=c];while(g&&g.row===b);if(!g)return e.slice()}var i=[];b=g.row;do i[0>c?"unshift":"push"](g),g=e[f+=c];while(g&&g.row==b);return i.length&&i}}}var f=a("ace/line_widgets").LineWidgets,g=a("ace/lib/dom"),h=a("ace/range").Range;
b.showErrorMarker=function(a,b){var c=a.session;c.widgetManager||(c.widgetManager=new f(c),c.widgetManager.attach(a));var d=a.getCursorPosition(),h=d.row,i=c.lineWidgets&&c.lineWidgets[h];i?i.destroy():h-=b;var k,j=e(c,h,b);if(j){var l=j[0];d.column=(l.pos&&"number"!=typeof l.column?l.pos.sc:l.column)||0,d.row=l.row,k=a.renderer.$gutterLayer.$annotations[d.row]}else{if(i)return;k={text:["Looks good!"],className:"ace_ok"}}a.session.unfold(d.row),a.selection.moveToPosition(d);var m={row:d.row,fixedWidth:!0,coverGutter:!0,el:g.createElement("div")},n=m.el.appendChild(g.createElement("div")),o=m.el.appendChild(g.createElement("div"));
o.className="error_widget_arrow "+k.className;var p=a.renderer.$cursorLayer.getPixelPosition(d).left;o.style.left=p+a.renderer.gutterWidth-5+"px",m.el.className="error_widget_wrapper",n.className="error_widget "+k.className,n.innerHTML=k.text.join("<br>"),n.appendChild(g.createElement("div"));var q=function(a,b,c){return 0!==b||"esc"!==c&&"return"!==c?void 0:(m.destroy(),{command:"null"})};m.destroy=function(){a.$mouseHandler.isMousePressed||(a.keyBinding.removeKeyboardHandler(q),c.widgetManager.removeLineWidget(m),a.off("changeSelection",m.destroy),a.off("changeSession",m.destroy),a.off("mouseup",m.destroy),a.off("change",m.destroy))
},a.keyBinding.addKeyboardHandler(q),a.on("changeSelection",m.destroy),a.on("changeSession",m.destroy),a.on("mouseup",m.destroy),a.on("change",m.destroy),a.session.widgetManager.addLineWidget(m),m.el.onmousedown=a.focus.bind(a),a.renderer.scrollCursorIntoView(null,.5,{bottom:m.el.offsetHeight})},g.importCssString("    .error_widget_wrapper {        background: inherit;        color: inherit;        border:none    }    .error_widget {        border-top: solid 2px;        border-bottom: solid 2px;        margin: 5px 0;        padding: 10px 40px;        white-space: pre-wrap;    }    .error_widget.ace_error, .error_widget_arrow.ace_error{        border-color: #ff5a5a    }    .error_widget.ace_warning, .error_widget_arrow.ace_warning{        border-color: #F1D817    }    .error_widget.ace_info, .error_widget_arrow.ace_info{        border-color: #5a5a5a    }    .error_widget.ace_ok, .error_widget_arrow.ace_ok{        border-color: #5aaa5a    }    .error_widget_arrow {        position: absolute;        border: solid 5px;        border-top-color: transparent!important;        border-right-color: transparent!important;        border-left-color: transparent!important;        top: -5px;    }","")
}),ace.define("ace/lib/fixoldbrowsers",["require","exports","module","ace/lib/regexp","ace/lib/es5-shim"],function(a){a("./regexp"),a("./es5-shim")}),ace.define("ace/line_widgets",["require","exports","module","ace/lib/oop","ace/lib/dom","ace/range"],function(a,b){function d(a){this.session=a,this.session.widgetManager=this,this.session.getRowLength=this.getRowLength,this.session.$getWidgetScreenLength=this.$getWidgetScreenLength,this.updateOnChange=this.updateOnChange.bind(this),this.renderWidgets=this.renderWidgets.bind(this),this.measureWidgets=this.measureWidgets.bind(this),this.session._changedWidgets=[],this.detach=this.detach.bind(this),this.session.on("change",this.updateOnChange)
}{var f=(a("./lib/oop"),a("./lib/dom"));a("./range").Range}(function(){this.getRowLength=function(a){var b;return b=this.lineWidgets?this.lineWidgets[a]&&this.lineWidgets[a].rowCount||0:0,this.$useWrapMode&&this.$wrapData[a]?this.$wrapData[a].length+1+b:1+b},this.$getWidgetScreenLength=function(){var a=0;return this.lineWidgets.forEach(function(b){b&&b.rowCount&&(a+=b.rowCount)}),a},this.attach=function(a){a.widgetManager&&a.widgetManager!=this&&a.widgetManager.detach(),this.editor!=a&&(this.detach(),this.editor=a,this.editor.on("changeSession",this.detach),a.widgetManager=this,a.setOption("enableLineWidgets",!0),a.renderer.on("beforeRender",this.measureWidgets),a.renderer.on("afterRender",this.renderWidgets))
},this.detach=function(a){if(!a||a.session!=this.session){var b=this.editor;if(b){b.off("changeSession",this.detach),this.editor=null,b.widgetManager=null,b.renderer.off("beforeRender",this.measureWidgets),b.renderer.off("afterRender",this.renderWidgets);var c=this.session.lineWidgets;c&&c.forEach(function(a){a&&a.el&&a.el.parentNode&&(a._inDocument=!1,a.el.parentNode.removeChild(a.el))})}}},this.updateOnChange=function(a){var b=this.session.lineWidgets;if(b){var c=a.data,d=c.range,e=d.start.row,f=d.end.row-e;
if(0!==f)if("removeText"==c.action||"removeLines"==c.action){var g=b.splice(e+1,f);g.forEach(function(a){a&&this.removeLineWidget(a)},this),this.$updateRows()}else{var h=new Array(f);h.unshift(e,0),b.splice.apply(b,h),this.$updateRows()}}},this.$updateRows=function(){var a=this.session.lineWidgets;if(a){var b=!0;a.forEach(function(a,c){a&&(b=!1,a.row=c)}),b&&(this.session.lineWidgets=null)}},this.addLineWidget=function(a){this.session.lineWidgets||(this.session.lineWidgets=new Array(this.session.getLength())),this.session.lineWidgets[a.row]=a;
var b=this.editor.renderer;return a.html&&!a.el&&(a.el=f.createElement("div"),a.el.innerHTML=a.html),a.el&&(f.addCssClass(a.el,"ace_lineWidgetContainer"),a.el.style.position="absolute",a.el.style.zIndex=5,b.container.appendChild(a.el),a._inDocument=!0),a.coverGutter||(a.el.style.zIndex=3),a.pixelHeight||(a.pixelHeight=a.el.offsetHeight),null==a.rowCount&&(a.rowCount=a.pixelHeight/b.layerConfig.lineHeight),this.session._emit("changeFold",{data:{start:{row:a.row}}}),this.$updateRows(),this.renderWidgets(null,b),a
},this.removeLineWidget=function(a){if(a._inDocument=!1,a.el&&a.el.parentNode&&a.el.parentNode.removeChild(a.el),a.editor&&a.editor.destroy)try{a.editor.destroy()}catch(b){}this.session.lineWidgets&&(this.session.lineWidgets[a.row]=void 0),this.session._emit("changeFold",{data:{start:{row:a.row}}}),this.$updateRows()},this.onWidgetChanged=function(a){this.session._changedWidgets.push(a),this.editor&&this.editor.renderer.updateFull()},this.measureWidgets=function(a,b){var c=this.session._changedWidgets,d=b.layerConfig;
if(c&&c.length){for(var e=1/0,f=0;f<c.length;f++){var g=c[f];g._inDocument||(g._inDocument=!0,b.container.appendChild(g.el)),g.h=g.el.offsetHeight,g.fixedWidth||(g.w=g.el.offsetWidth,g.screenWidth=Math.ceil(g.w/d.characterWidth));var h=g.h/d.lineHeight;g.coverLine&&(h-=this.session.getRowLineCount(g.row),0>h&&(h=0)),g.rowCount!=h&&(g.rowCount=h,g.row<e&&(e=g.row))}1/0!=e&&(this.session._emit("changeFold",{data:{start:{row:e}}}),this.session.lineWidgetWidth=null),this.session._changedWidgets=[]}},this.renderWidgets=function(a,b){var c=b.layerConfig,d=this.session.lineWidgets;
if(d){for(var e=Math.min(this.firstRow,c.firstRow),f=Math.max(this.lastRow,c.lastRow,d.length);e>0&&!d[e];)e--;this.firstRow=c.firstRow,this.lastRow=c.lastRow,b.$cursorLayer.config=c;for(var g=e;f>=g;g++){var h=d[g];if(h&&h.el){h._inDocument||(h._inDocument=!0,b.container.appendChild(h.el));var i=b.$cursorLayer.getPixelPosition({row:g,column:0},!0).top;h.coverLine||(i+=c.lineHeight*this.session.getRowLineCount(h.row)),h.el.style.top=i-c.offset+"px";var j=h.coverGutter?0:b.gutterWidth;h.fixedWidth||(j-=b.scrollLeft),h.el.style.left=j+"px",h.el.style.right=h.fixedWidth?b.scrollBar.getWidth()+"px":""
}}}}}).call(d.prototype),b.LineWidgets=d}),ace.define("ace/document",["require","exports","module","ace/lib/oop","ace/lib/event_emitter","ace/range","ace/anchor"],function(a,b){var d=a("./lib/oop"),e=a("./lib/event_emitter").EventEmitter,f=a("./range").Range,g=a("./anchor").Anchor,h=function(a){this.$lines=[],0===a.length?this.$lines=[""]:Array.isArray(a)?this._insertLines(0,a):this.insert({row:0,column:0},a)};(function(){d.implement(this,e),this.setValue=function(a){var b=this.getLength();this.remove(new f(0,0,b,this.getLine(b-1).length)),this.insert({row:0,column:0},a)
},this.getValue=function(){return this.getAllLines().join(this.getNewLineCharacter())},this.createAnchor=function(a,b){return new g(this,a,b)},this.$split=0==="aaa".split(/a/).length?function(a){return a.replace(/\r\n|\r/g,"\n").split("\n")}:function(a){return a.split(/\r\n|\r|\n/)},this.$detectNewLine=function(a){var b=a.match(/^.*?(\r\n|\r|\n)/m);this.$autoNewLine=b?b[1]:"\n",this._signal("changeNewLineMode")},this.getNewLineCharacter=function(){switch(this.$newLineMode){case"windows":return"\r\n";case"unix":return"\n";
default:return this.$autoNewLine||"\n"}},this.$autoNewLine="",this.$newLineMode="auto",this.setNewLineMode=function(a){this.$newLineMode!==a&&(this.$newLineMode=a,this._signal("changeNewLineMode"))},this.getNewLineMode=function(){return this.$newLineMode},this.isNewLine=function(a){return"\r\n"==a||"\r"==a||"\n"==a},this.getLine=function(a){return this.$lines[a]||""},this.getLines=function(a,b){return this.$lines.slice(a,b+1)},this.getAllLines=function(){return this.getLines(0,this.getLength())},this.getLength=function(){return this.$lines.length
},this.getTextRange=function(a){if(a.start.row==a.end.row)return this.getLine(a.start.row).substring(a.start.column,a.end.column);var b=this.getLines(a.start.row,a.end.row);b[0]=(b[0]||"").substring(a.start.column);var c=b.length-1;return a.end.row-a.start.row==c&&(b[c]=b[c].substring(0,a.end.column)),b.join(this.getNewLineCharacter())},this.$clipPosition=function(a){var b=this.getLength();return a.row>=b?(a.row=Math.max(0,b-1),a.column=this.getLine(b-1).length):a.row<0&&(a.row=0),a},this.insert=function(a,b){if(!b||0===b.length)return a;
a=this.$clipPosition(a),this.getLength()<=1&&this.$detectNewLine(b);var c=this.$split(b),d=c.splice(0,1)[0],e=0==c.length?null:c.splice(c.length-1,1)[0];return a=this.insertInLine(a,d),null!==e&&(a=this.insertNewLine(a),a=this._insertLines(a.row,c),a=this.insertInLine(a,e||"")),a},this.insertLines=function(a,b){return a>=this.getLength()?this.insert({row:a,column:0},"\n"+b.join("\n")):this._insertLines(Math.max(a,0),b)},this._insertLines=function(a,b){if(0==b.length)return{row:a,column:0};for(;b.length>61440;){var c=this._insertLines(a,b.slice(0,61440));
b=b.slice(61440),a=c.row}var d=[a,0];d.push.apply(d,b),this.$lines.splice.apply(this.$lines,d);var e=new f(a,0,a+b.length,0),g={action:"insertLines",range:e,lines:b};return this._signal("change",{data:g}),e.end},this.insertNewLine=function(a){a=this.$clipPosition(a);var b=this.$lines[a.row]||"";this.$lines[a.row]=b.substring(0,a.column),this.$lines.splice(a.row+1,0,b.substring(a.column,b.length));var c={row:a.row+1,column:0},d={action:"insertText",range:f.fromPoints(a,c),text:this.getNewLineCharacter()};return this._signal("change",{data:d}),c
},this.insertInLine=function(a,b){if(0==b.length)return a;var c=this.$lines[a.row]||"";this.$lines[a.row]=c.substring(0,a.column)+b+c.substring(a.column);var d={row:a.row,column:a.column+b.length},e={action:"insertText",range:f.fromPoints(a,d),text:b};return this._signal("change",{data:e}),d},this.remove=function(a){if(a instanceof f||(a=f.fromPoints(a.start,a.end)),a.start=this.$clipPosition(a.start),a.end=this.$clipPosition(a.end),a.isEmpty())return a.start;var b=a.start.row,c=a.end.row;if(a.isMultiLine()){var d=0==a.start.column?b:b+1,e=c-1;
a.end.column>0&&this.removeInLine(c,0,a.end.column),e>=d&&this._removeLines(d,e),d!=b&&(this.removeInLine(b,a.start.column,this.getLine(b).length),this.removeNewLine(a.start.row))}else this.removeInLine(b,a.start.column,a.end.column);return a.start},this.removeInLine=function(a,b,c){if(b!=c){var d=new f(a,b,a,c),e=this.getLine(a),g=e.substring(b,c),h=e.substring(0,b)+e.substring(c,e.length);this.$lines.splice(a,1,h);var i={action:"removeText",range:d,text:g};return this._signal("change",{data:i}),d.start}},this.removeLines=function(a,b){return 0>a||b>=this.getLength()?this.remove(new f(a,0,b+1,0)):this._removeLines(a,b)
},this._removeLines=function(a,b){var c=new f(a,0,b+1,0),d=this.$lines.splice(a,b-a+1),e={action:"removeLines",range:c,nl:this.getNewLineCharacter(),lines:d};return this._signal("change",{data:e}),d},this.removeNewLine=function(a){var b=this.getLine(a),c=this.getLine(a+1),d=new f(a,b.length,a+1,0),e=b+c;this.$lines.splice(a,2,e);var g={action:"removeText",range:d,text:this.getNewLineCharacter()};this._signal("change",{data:g})},this.replace=function(a,b){if(a instanceof f||(a=f.fromPoints(a.start,a.end)),0==b.length&&a.isEmpty())return a.start;
if(b==this.getTextRange(a))return a.end;if(this.remove(a),b)var c=this.insert(a.start,b);else c=a.start;return c},this.applyDeltas=function(a){for(var b=0;b<a.length;b++){var c=a[b],d=f.fromPoints(c.range.start,c.range.end);"insertLines"==c.action?this.insertLines(d.start.row,c.lines):"insertText"==c.action?this.insert(d.start,c.text):"removeLines"==c.action?this._removeLines(d.start.row,d.end.row-1):"removeText"==c.action&&this.remove(d)}},this.revertDeltas=function(a){for(var b=a.length-1;b>=0;b--){var c=a[b],d=f.fromPoints(c.range.start,c.range.end);
"insertLines"==c.action?this._removeLines(d.start.row,d.end.row-1):"insertText"==c.action?this.remove(d):"removeLines"==c.action?this._insertLines(d.start.row,c.lines):"removeText"==c.action&&this.insert(d.start,c.text)}},this.indexToPosition=function(a,b){for(var c=this.$lines||this.getAllLines(),d=this.getNewLineCharacter().length,e=b||0,f=c.length;f>e;e++)if(a-=c[e].length+d,0>a)return{row:e,column:a+c[e].length+d};return{row:f-1,column:c[f-1].length}},this.positionToIndex=function(a,b){for(var c=this.$lines||this.getAllLines(),d=this.getNewLineCharacter().length,e=0,f=Math.min(a.row,c.length),g=b||0;f>g;++g)e+=c[g].length+d;
return e+a.column}}).call(h.prototype),b.Document=h}),function(){ace.require(["ace/ace"],function(a){a&&a.config.init(!0),window.ace||(window.ace=a);for(var b in a)a.hasOwnProperty(b)&&(ace[b]=a[b])})}()};c(),b.resolveWith(c)};FD50.module("ace",a)}(),function(){var moduleFactory=function($){var module=this,exports=function(){function _handleMultipleEvents(a,b,c,d){vjs.arr.forEach(c,function(c){a(b,c,d)})}function _logType(a,b){var c,d,e;c=Array.prototype.slice.call(b),d=function(){},e=window.console||{log:d,warn:d,error:d},a?c.unshift(a.toUpperCase()+":"):a="log",vjs.log.history.push(c),c.unshift("VIDEOJS:"),e[a].apply?e[a].apply(e,c):e[a](c.join(" "))
}document.createElement("video"),document.createElement("audio"),document.createElement("track");var vjs=function(a,b,c){var d;if("string"==typeof a){if(0===a.indexOf("#")&&(a=a.slice(1)),vjs.players[a])return b&&vjs.log.warn('Player "'+a+'" is already initialised. Options will not be applied.'),c&&vjs.players[a].ready(c),vjs.players[a];d=vjs.el(a)}else d=a;if(!d||!d.nodeName)throw new TypeError("The element or ID supplied is not valid. (videojs)");return d.player||new vjs.Player(d,b,c)},videojs=window.videojs=vjs;
vjs.CDN_VERSION="4.12",vjs.ACCESS_PROTOCOL="https:"==document.location.protocol?"https://":"http://",vjs.VERSION="4.12.1",vjs.options={techOrder:["html5","flash"],html5:{},flash:{swf:$.path+"/scripts/videojs/videojs.swf"},width:300,height:150,defaultVolume:0,playbackRates:[],inactivityTimeout:2e3,children:{mediaLoader:{},posterImage:{},loadingSpinner:{},textTrackDisplay:{},bigPlayButton:{},controlBar:{},errorDisplay:{},textTrackSettings:{}},language:document.getElementsByTagName("html")[0].getAttribute("lang")||navigator.languages&&navigator.languages[0]||navigator.userLanguage||navigator.language||"en",languages:{},notSupportedMessage:"No compatible source was found for this video."},vjs.addLanguage=function(a,b){return vjs.options.languages[a]=void 0!==vjs.options.languages[a]?vjs.util.mergeOptions(vjs.options.languages[a],b):b,vjs.options.languages
},vjs.players={},"function"==typeof define&&define.amd?define("videojs",[],function(){return videojs}):"object"==typeof exports&&"object"==typeof module&&(module.exports=videojs),vjs.CoreObject=vjs.CoreObject=function(){},vjs.CoreObject.extend=function(a){var b,c;a=a||{},b=a.init||a.init||this.prototype.init||this.prototype.init||function(){},c=function(){b.apply(this,arguments)},c.prototype=vjs.obj.create(this.prototype),c.prototype.constructor=c,c.extend=vjs.CoreObject.extend,c.create=vjs.CoreObject.create;
for(var d in a)a.hasOwnProperty(d)&&(c.prototype[d]=a[d]);return c},vjs.CoreObject.create=function(){var a=vjs.obj.create(this.prototype);return this.apply(a,arguments),a},vjs.on=function(a,b,c){if(vjs.obj.isArray(b))return _handleMultipleEvents(vjs.on,a,b,c);var d=vjs.getData(a);d.handlers||(d.handlers={}),d.handlers[b]||(d.handlers[b]=[]),c.guid||(c.guid=vjs.guid++),d.handlers[b].push(c),d.dispatcher||(d.disabled=!1,d.dispatcher=function(b){if(!d.disabled){b=vjs.fixEvent(b);var c=d.handlers[b.type];if(c)for(var e=c.slice(0),f=0,g=e.length;g>f&&!b.isImmediatePropagationStopped();f++)e[f].call(a,b)
}}),1==d.handlers[b].length&&(a.addEventListener?a.addEventListener(b,d.dispatcher,!1):a.attachEvent&&a.attachEvent("on"+b,d.dispatcher))},vjs.off=function(a,b,c){if(vjs.hasData(a)){var d=vjs.getData(a);if(d.handlers){if(vjs.obj.isArray(b))return _handleMultipleEvents(vjs.off,a,b,c);var e=function(b){d.handlers[b]=[],vjs.cleanUpEvents(a,b)};if(b){var g=d.handlers[b];if(g){if(!c)return e(b),void 0;if(c.guid)for(var h=0;h<g.length;h++)g[h].guid===c.guid&&g.splice(h--,1);vjs.cleanUpEvents(a,b)}}else for(var f in d.handlers)e(f)
}}},vjs.cleanUpEvents=function(a,b){var c=vjs.getData(a);0===c.handlers[b].length&&(delete c.handlers[b],a.removeEventListener?a.removeEventListener(b,c.dispatcher,!1):a.detachEvent&&a.detachEvent("on"+b,c.dispatcher)),vjs.isEmpty(c.handlers)&&(delete c.handlers,delete c.dispatcher,delete c.disabled),vjs.isEmpty(c)&&vjs.removeData(a)},vjs.fixEvent=function(a){function b(){return!0}function c(){return!1}if(!a||!a.isPropagationStopped){var d=a||window.event;a={};for(var e in d)"layerX"!==e&&"layerY"!==e&&"keyLocation"!==e&&("returnValue"==e&&d.preventDefault||(a[e]=d[e]));
if(a.target||(a.target=a.srcElement||document),a.relatedTarget=a.fromElement===a.target?a.toElement:a.fromElement,a.preventDefault=function(){d.preventDefault&&d.preventDefault(),a.returnValue=!1,a.isDefaultPrevented=b,a.defaultPrevented=!0},a.isDefaultPrevented=c,a.defaultPrevented=!1,a.stopPropagation=function(){d.stopPropagation&&d.stopPropagation(),a.cancelBubble=!0,a.isPropagationStopped=b},a.isPropagationStopped=c,a.stopImmediatePropagation=function(){d.stopImmediatePropagation&&d.stopImmediatePropagation(),a.isImmediatePropagationStopped=b,a.stopPropagation()
},a.isImmediatePropagationStopped=c,null!=a.clientX){var f=document.documentElement,g=document.body;a.pageX=a.clientX+(f&&f.scrollLeft||g&&g.scrollLeft||0)-(f&&f.clientLeft||g&&g.clientLeft||0),a.pageY=a.clientY+(f&&f.scrollTop||g&&g.scrollTop||0)-(f&&f.clientTop||g&&g.clientTop||0)}a.which=a.charCode||a.keyCode,null!=a.button&&(a.button=1&a.button?0:4&a.button?1:2&a.button?2:0)}return a},vjs.trigger=function(a,b){var c=vjs.hasData(a)?vjs.getData(a):{},d=a.parentNode||a.ownerDocument;if("string"==typeof b&&(b={type:b,target:a}),b=vjs.fixEvent(b),c.dispatcher&&c.dispatcher.call(a,b),d&&!b.isPropagationStopped()&&b.bubbles!==!1)vjs.trigger(d,b);
else if(!d&&!b.defaultPrevented){var e=vjs.getData(b.target);b.target[b.type]&&(e.disabled=!0,"function"==typeof b.target[b.type]&&b.target[b.type](),e.disabled=!1)}return!b.defaultPrevented},vjs.one=function(a,b,c){if(vjs.obj.isArray(b))return _handleMultipleEvents(vjs.one,a,b,c);var d=function(){vjs.off(a,b,d),c.apply(this,arguments)};d.guid=c.guid=c.guid||vjs.guid++,vjs.on(a,b,d)};var hasOwnProp=Object.prototype.hasOwnProperty;vjs.createEl=function(a,b){var c;return a=a||"div",b=b||{},c=document.createElement(a),vjs.obj.each(b,function(a,b){-1!==a.indexOf("aria-")||"role"==a?c.setAttribute(a,b):c[a]=b
}),c},vjs.capitalize=function(a){return a.charAt(0).toUpperCase()+a.slice(1)},vjs.obj={},vjs.obj.create=Object.create||function(a){function b(){}return b.prototype=a,new b},vjs.obj.each=function(a,b,c){for(var d in a)hasOwnProp.call(a,d)&&b.call(c||this,d,a[d])},vjs.obj.merge=function(a,b){if(!b)return a;for(var c in b)hasOwnProp.call(b,c)&&(a[c]=b[c]);return a},vjs.obj.deepMerge=function(a,b){var c,d,e;a=vjs.obj.copy(a);for(c in b)hasOwnProp.call(b,c)&&(d=a[c],e=b[c],a[c]=vjs.obj.isPlain(d)&&vjs.obj.isPlain(e)?vjs.obj.deepMerge(d,e):b[c]);
return a},vjs.obj.copy=function(a){return vjs.obj.merge({},a)},vjs.obj.isPlain=function(a){return!!a&&"object"==typeof a&&"[object Object]"===a.toString()&&a.constructor===Object},vjs.obj.isArray=Array.isArray||function(a){return"[object Array]"===Object.prototype.toString.call(a)},vjs.isNaN=function(a){return a!==a},vjs.bind=function(a,b,c){b.guid||(b.guid=vjs.guid++);var d=function(){return b.apply(a,arguments)};return d.guid=c?c+"_"+b.guid:b.guid,d},vjs.cache={},vjs.guid=1,vjs.expando="vdata"+(new Date).getTime(),vjs.getData=function(a){var b=a[vjs.expando];
return b||(b=a[vjs.expando]=vjs.guid++),vjs.cache[b]||(vjs.cache[b]={}),vjs.cache[b]},vjs.hasData=function(a){var b=a[vjs.expando];return!(!b||vjs.isEmpty(vjs.cache[b]))},vjs.removeData=function(a){var b=a[vjs.expando];if(b){delete vjs.cache[b];try{delete a[vjs.expando]}catch(c){a.removeAttribute?a.removeAttribute(vjs.expando):a[vjs.expando]=null}}},vjs.isEmpty=function(a){for(var b in a)if(null!==a[b])return!1;return!0},vjs.hasClass=function(a,b){return-1!==(" "+a.className+" ").indexOf(" "+b+" ")},vjs.addClass=function(a,b){vjs.hasClass(a,b)||(a.className=""===a.className?b:a.className+" "+b)
},vjs.removeClass=function(a,b){var c,d;if(vjs.hasClass(a,b)){for(c=a.className.split(" "),d=c.length-1;d>=0;d--)c[d]===b&&c.splice(d,1);a.className=c.join(" ")}},vjs.TEST_VID=vjs.createEl("video"),function(){var a=document.createElement("track");a.kind="captions",a.srclang="en",a.label="English",vjs.TEST_VID.appendChild(a)}(),vjs.USER_AGENT=navigator.userAgent,vjs.IS_IPHONE=/iPhone/i.test(vjs.USER_AGENT),vjs.IS_IPAD=/iPad/i.test(vjs.USER_AGENT),vjs.IS_IPOD=/iPod/i.test(vjs.USER_AGENT),vjs.IS_IOS=vjs.IS_IPHONE||vjs.IS_IPAD||vjs.IS_IPOD,vjs.IOS_VERSION=function(){var a=vjs.USER_AGENT.match(/OS (\d+)_/i);
return a&&a[1]?a[1]:void 0}(),vjs.IS_ANDROID=/Android/i.test(vjs.USER_AGENT),vjs.ANDROID_VERSION=function(){var b,c,a=vjs.USER_AGENT.match(/Android (\d+)(?:\.(\d+))?(?:\.(\d+))*/i);return a?(b=a[1]&&parseFloat(a[1]),c=a[2]&&parseFloat(a[2]),b&&c?parseFloat(a[1]+"."+a[2]):b?b:null):null}(),vjs.IS_OLD_ANDROID=vjs.IS_ANDROID&&/webkit/i.test(vjs.USER_AGENT)&&vjs.ANDROID_VERSION<2.3,vjs.IS_FIREFOX=/Firefox/i.test(vjs.USER_AGENT),vjs.IS_CHROME=/Chrome/i.test(vjs.USER_AGENT),vjs.IS_IE8=/MSIE\s8\.0/.test(vjs.USER_AGENT),vjs.TOUCH_ENABLED=!!("ontouchstart"in window||window.DocumentTouch&&document instanceof window.DocumentTouch),vjs.BACKGROUND_SIZE_SUPPORTED="backgroundSize"in vjs.TEST_VID.style,vjs.setElementAttributes=function(a,b){vjs.obj.each(b,function(b,c){null===c||"undefined"==typeof c||c===!1?a.removeAttribute(b):a.setAttribute(b,c===!0?"":c)
})},vjs.getElementAttributes=function(a){var b,c,d,e,f;if(b={},c=",autoplay,controls,loop,muted,default,",a&&a.attributes&&a.attributes.length>0){d=a.attributes;for(var g=d.length-1;g>=0;g--)e=d[g].name,f=d[g].value,("boolean"==typeof a[e]||-1!==c.indexOf(","+e+","))&&(f=null!==f?!0:!1),b[e]=f}return b},vjs.getComputedDimension=function(a,b){var c="";return document.defaultView&&document.defaultView.getComputedStyle?c=document.defaultView.getComputedStyle(a,"").getPropertyValue(b):a.currentStyle&&(c=a["client"+b.substr(0,1).toUpperCase()+b.substr(1)]+"px"),c
},vjs.insertFirst=function(a,b){b.firstChild?b.insertBefore(a,b.firstChild):b.appendChild(a)},vjs.browser={},vjs.el=function(a){return 0===a.indexOf("#")&&(a=a.slice(1)),document.getElementById(a)},vjs.formatTime=function(a,b){b=b||a;var c=Math.floor(a%60),d=Math.floor(a/60%60),e=Math.floor(a/3600),f=Math.floor(b/60%60),g=Math.floor(b/3600);return(isNaN(a)||1/0===a)&&(e=d=c="-"),e=e>0||g>0?e+":":"",d=((e||f>=10)&&10>d?"0"+d:d)+":",c=10>c?"0"+c:c,e+d+c},vjs.blockTextSelection=function(){document.body.focus(),document.onselectstart=function(){return!1
}},vjs.unblockTextSelection=function(){document.onselectstart=function(){return!0}},vjs.trim=function(a){return(a+"").replace(/^\s+|\s+$/g,"")},vjs.round=function(a,b){return b||(b=0),Math.round(a*Math.pow(10,b))/Math.pow(10,b)},vjs.createTimeRange=function(a,b){return{length:1,start:function(){return a},end:function(){return b}}},vjs.setLocalStorage=function(a,b){try{var c=window.localStorage||!1;if(!c)return;c[a]=b}catch(d){22==d.code||1014==d.code?vjs.log("LocalStorage Full (VideoJS)",d):18==d.code?vjs.log("LocalStorage not allowed (VideoJS)",d):vjs.log("LocalStorage Error (VideoJS)",d)
}},vjs.getAbsoluteURL=function(a){return a.match(/^https?:\/\//)||(a=vjs.createEl("div",{innerHTML:'<a href="'+a+'">x</a>'}).firstChild.href),a},vjs.parseUrl=function(a){var b,c,d,e,f;e=["protocol","hostname","port","pathname","search","hash","host"],c=vjs.createEl("a",{href:a}),d=""===c.host&&"file:"!==c.protocol,d&&(b=vjs.createEl("div"),b.innerHTML='<a href="'+a+'"></a>',c=b.firstChild,b.setAttribute("style","display:none; position:absolute;"),document.body.appendChild(b)),f={};for(var g=0;g<e.length;g++)f[e[g]]=c[e[g]];
return"http:"===f.protocol&&(f.host=f.host.replace(/:80$/,"")),"https:"===f.protocol&&(f.host=f.host.replace(/:443$/,"")),d&&document.body.removeChild(b),f},vjs.log=function(){_logType(null,arguments)},vjs.log.history=[],vjs.log.error=function(){_logType("error",arguments)},vjs.log.warn=function(){_logType("warn",arguments)},vjs.findPosition=function(a){var b,c,d,e,f,g,h,i,j;return a.getBoundingClientRect&&a.parentNode&&(b=a.getBoundingClientRect()),b?(c=document.documentElement,d=document.body,e=c.clientLeft||d.clientLeft||0,f=window.pageXOffset||d.scrollLeft,g=b.left+f-e,h=c.clientTop||d.clientTop||0,i=window.pageYOffset||d.scrollTop,j=b.top+i-h,{left:vjs.round(g),top:vjs.round(j)}):{left:0,top:0}
},vjs.arr={},vjs.arr.forEach=function(a,b,c){if(vjs.obj.isArray(a)&&b instanceof Function)for(var d=0,e=a.length;e>d;++d)b.call(c||vjs,a[d],d,a);return a},vjs.xhr=function(a,b){var c,d,e,f,g,h,i,j,k;"string"==typeof a&&(a={uri:a}),videojs.util.mergeOptions({method:"GET",timeout:45e3},a),b=b||function(){},j=function(){window.clearTimeout(i),b(null,d,d.response||d.responseText)},k=function(a){window.clearTimeout(i),a&&"string"!=typeof a||(a=new Error(a)),b(a,d)},c=window.XMLHttpRequest,"undefined"==typeof c&&(c=function(){try{return new window.ActiveXObject("Msxml2.XMLHTTP.6.0")
}catch(a){}try{return new window.ActiveXObject("Msxml2.XMLHTTP.3.0")}catch(b){}try{return new window.ActiveXObject("Msxml2.XMLHTTP")}catch(c){}throw new Error("This browser does not support XMLHttpRequest.")}),d=new c,d.uri=a.uri,e=vjs.parseUrl(a.uri),f=window.location,h=e.protocol+e.host!==f.protocol+f.host,!h||!window.XDomainRequest||"withCredentials"in d?(g="file:"==e.protocol||"file:"==f.protocol,d.onreadystatechange=function(){if(4===d.readyState){if(d.timedout)return k("timeout");200===d.status||g&&0===d.status?j():k()
}},a.timeout&&(i=window.setTimeout(function(){4!==d.readyState&&(d.timedout=!0,d.abort())},a.timeout))):(d=new window.XDomainRequest,d.onload=j,d.onerror=k,d.onprogress=function(){},d.ontimeout=function(){});try{d.open(a.method||"GET",a.uri,!0)}catch(l){return k(l)}a.withCredentials&&(d.withCredentials=!0),a.responseType&&(d.responseType=a.responseType);try{d.send()}catch(l){return k(l)}return d},vjs.util={},vjs.util.mergeOptions=function(a,b){var c,d,e;a=vjs.obj.copy(a);for(c in b)b.hasOwnProperty(c)&&(d=a[c],e=b[c],a[c]=vjs.obj.isPlain(d)&&vjs.obj.isPlain(e)?vjs.util.mergeOptions(d,e):b[c]);
return a},vjs.EventEmitter=function(){},vjs.EventEmitter.prototype.allowedEvents_={},vjs.EventEmitter.prototype.on=function(a,b){var c=this.addEventListener;this.addEventListener=Function.prototype,vjs.on(this,a,b),this.addEventListener=c},vjs.EventEmitter.prototype.addEventListener=vjs.EventEmitter.prototype.on,vjs.EventEmitter.prototype.off=function(a,b){vjs.off(this,a,b)},vjs.EventEmitter.prototype.removeEventListener=vjs.EventEmitter.prototype.off,vjs.EventEmitter.prototype.one=function(a,b){vjs.one(this,a,b)
},vjs.EventEmitter.prototype.trigger=function(a){var b=a.type||a;"string"==typeof a&&(a={type:b}),a=vjs.fixEvent(a),this.allowedEvents_[b]&&this["on"+b]&&this["on"+b](a),vjs.trigger(this,a)},vjs.EventEmitter.prototype.dispatchEvent=vjs.EventEmitter.prototype.trigger,vjs.Component=vjs.CoreObject.extend({init:function(a,b,c){this.player_=a,this.options_=vjs.obj.copy(this.options_),b=this.options(b),this.id_=b.id||b.el&&b.el.id,this.id_||(this.id_=(a.id&&a.id()||"no_player")+"_component_"+vjs.guid++),this.name_=b.name||null,this.el_=b.el||this.createEl(),this.children_=[],this.childIndex_={},this.childNameIndex_={},this.initChildren(),this.ready(c),b.reportTouchActivity!==!1&&this.enableTouchActivity()
}}),vjs.Component.prototype.dispose=function(){if(this.trigger({type:"dispose",bubbles:!1}),this.children_)for(var a=this.children_.length-1;a>=0;a--)this.children_[a].dispose&&this.children_[a].dispose();this.children_=null,this.childIndex_=null,this.childNameIndex_=null,this.off(),this.el_.parentNode&&this.el_.parentNode.removeChild(this.el_),vjs.removeData(this.el_),this.el_=null},vjs.Component.prototype.player_=!0,vjs.Component.prototype.player=function(){return this.player_},vjs.Component.prototype.options_,vjs.Component.prototype.options=function(a){return void 0===a?this.options_:this.options_=vjs.util.mergeOptions(this.options_,a)
},vjs.Component.prototype.el_,vjs.Component.prototype.createEl=function(a,b){return vjs.createEl(a,b)},vjs.Component.prototype.localize=function(a){var b=this.player_.language(),c=this.player_.languages();return c&&c[b]&&c[b][a]?c[b][a]:a},vjs.Component.prototype.el=function(){return this.el_},vjs.Component.prototype.contentEl_,vjs.Component.prototype.contentEl=function(){return this.contentEl_||this.el_},vjs.Component.prototype.id_,vjs.Component.prototype.id=function(){return this.id_},vjs.Component.prototype.name_,vjs.Component.prototype.name=function(){return this.name_
},vjs.Component.prototype.children_,vjs.Component.prototype.children=function(){return this.children_},vjs.Component.prototype.childIndex_,vjs.Component.prototype.getChildById=function(a){return this.childIndex_[a]},vjs.Component.prototype.childNameIndex_,vjs.Component.prototype.getChild=function(a){return this.childNameIndex_[a]},vjs.Component.prototype.addChild=function(a,b){var c,d,e;return"string"==typeof a?(e=a,b=b||{},d=b.componentClass||vjs.capitalize(e),b.name=e,c=new window.videojs[d](this.player_||this,b)):c=a,this.children_.push(c),"function"==typeof c.id&&(this.childIndex_[c.id()]=c),e=e||c.name&&c.name(),e&&(this.childNameIndex_[e]=c),"function"==typeof c.el&&c.el()&&this.contentEl().appendChild(c.el()),c
},vjs.Component.prototype.removeChild=function(a){if("string"==typeof a&&(a=this.getChild(a)),a&&this.children_){for(var b=!1,c=this.children_.length-1;c>=0;c--)if(this.children_[c]===a){b=!0,this.children_.splice(c,1);break}if(b){this.childIndex_[a.id()]=null,this.childNameIndex_[a.name()]=null;var d=a.el();d&&d.parentNode===this.contentEl()&&this.contentEl().removeChild(a.el())}}},vjs.Component.prototype.initChildren=function(){var a,b,c,d,e,f,g;if(a=this,b=a.options(),c=b.children)if(g=function(c,d){void 0!==b[c]&&(d=b[c]),d!==!1&&(a[c]=a.addChild(c,d))
},vjs.obj.isArray(c))for(var h=0;h<c.length;h++)d=c[h],"string"==typeof d?(e=d,f={}):(e=d.name,f=d),g(e,f);else vjs.obj.each(c,g)},vjs.Component.prototype.buildCSSClass=function(){return""},vjs.Component.prototype.on=function(a,b,c){var d,e,f,g,h,i;return"string"==typeof a||vjs.obj.isArray(a)?vjs.on(this.el_,a,vjs.bind(this,b)):(d=a,e=b,f=vjs.bind(this,c),i=this,g=function(){i.off(d,e,f)},g.guid=f.guid,this.on("dispose",g),h=function(){i.off("dispose",g)},h.guid=f.guid,a.nodeName?(vjs.on(d,e,f),vjs.on(d,"dispose",h)):"function"==typeof a.on&&(d.on(e,f),d.on("dispose",h))),this
},vjs.Component.prototype.off=function(a,b,c){var d,f,g;return!a||"string"==typeof a||vjs.obj.isArray(a)?vjs.off(this.el_,a,b):(d=a,f=b,g=vjs.bind(this,c),this.off("dispose",g),a.nodeName?(vjs.off(d,f,g),vjs.off(d,"dispose",g)):(d.off(f,g),d.off("dispose",g))),this},vjs.Component.prototype.one=function(a,b,c){var d,e,f,g,h;return"string"==typeof a||vjs.obj.isArray(a)?vjs.one(this.el_,a,vjs.bind(this,b)):(d=a,e=b,f=vjs.bind(this,c),g=this,h=function(){g.off(d,e,h),f.apply(this,arguments)},h.guid=f.guid,this.on(d,e,h)),this
},vjs.Component.prototype.trigger=function(a){return vjs.trigger(this.el_,a),this},vjs.Component.prototype.isReady_,vjs.Component.prototype.isReadyOnInitFinish_=!0,vjs.Component.prototype.readyQueue_,vjs.Component.prototype.ready=function(a){return a&&(this.isReady_?a.call(this):(void 0===this.readyQueue_&&(this.readyQueue_=[]),this.readyQueue_.push(a))),this},vjs.Component.prototype.triggerReady=function(){this.isReady_=!0;var a=this.readyQueue_;if(a&&a.length>0){for(var b=0,c=a.length;c>b;b++)a[b].call(this);
this.readyQueue_=[],this.trigger("ready")}},vjs.Component.prototype.hasClass=function(a){return vjs.hasClass(this.el_,a)},vjs.Component.prototype.addClass=function(a){return vjs.addClass(this.el_,a),this},vjs.Component.prototype.removeClass=function(a){return vjs.removeClass(this.el_,a),this},vjs.Component.prototype.show=function(){return this.removeClass("vjs-hidden"),this},vjs.Component.prototype.hide=function(){return this.addClass("vjs-hidden"),this},vjs.Component.prototype.lockShowing=function(){return this.addClass("vjs-lock-showing"),this
},vjs.Component.prototype.unlockShowing=function(){return this.removeClass("vjs-lock-showing"),this},vjs.Component.prototype.disable=function(){this.hide(),this.show=function(){}},vjs.Component.prototype.width=function(a,b){return this.dimension("width",a,b)},vjs.Component.prototype.height=function(a,b){return this.dimension("height",a,b)},vjs.Component.prototype.dimensions=function(a,b){return this.width(a,!0).height(b)},vjs.Component.prototype.dimension=function(a,b,c){if(void 0!==b)return(null===b||vjs.isNaN(b))&&(b=0),this.el_.style[a]=-1!==(""+b).indexOf("%")||-1!==(""+b).indexOf("px")?b:"auto"===b?"":b+"px",c||this.trigger("resize"),this;
if(!this.el_)return 0;var d=this.el_.style[a],e=d.indexOf("px");return-1!==e?parseInt(d.slice(0,e),10):parseInt(this.el_["offset"+vjs.capitalize(a)],10)},vjs.Component.prototype.onResize,vjs.Component.prototype.emitTapEvents=function(){var a,b,c,d,e,f,g,h,i,j;a=0,b=null,i=10,j=200,this.on("touchstart",function(c){1===c.touches.length&&(b=vjs.obj.copy(c.touches[0]),a=(new Date).getTime(),d=!0)}),this.on("touchmove",function(a){a.touches.length>1?d=!1:b&&(f=a.touches[0].pageX-b.pageX,g=a.touches[0].pageY-b.pageY,h=Math.sqrt(f*f+g*g),h>i&&(d=!1))
}),e=function(){d=!1},this.on("touchleave",e),this.on("touchcancel",e),this.on("touchend",function(e){b=null,d===!0&&(c=(new Date).getTime()-a,j>c&&(e.preventDefault(),this.trigger("tap")))})},vjs.Component.prototype.enableTouchActivity=function(){var a,b,c;this.player().reportUserActivity&&(a=vjs.bind(this.player(),this.player().reportUserActivity),this.on("touchstart",function(){a(),this.clearInterval(b),b=this.setInterval(a,250)}),c=function(){a(),this.clearInterval(b)},this.on("touchmove",a),this.on("touchend",c),this.on("touchcancel",c))
},vjs.Component.prototype.setTimeout=function(a,b){a=vjs.bind(this,a);var c=setTimeout(a,b),d=function(){this.clearTimeout(c)};return d.guid="vjs-timeout-"+c,this.on("dispose",d),c},vjs.Component.prototype.clearTimeout=function(a){clearTimeout(a);var b=function(){};return b.guid="vjs-timeout-"+a,this.off("dispose",b),a},vjs.Component.prototype.setInterval=function(a,b){a=vjs.bind(this,a);var c=setInterval(a,b),d=function(){this.clearInterval(c)};return d.guid="vjs-interval-"+c,this.on("dispose",d),c},vjs.Component.prototype.clearInterval=function(a){clearInterval(a);
var b=function(){};return b.guid="vjs-interval-"+a,this.off("dispose",b),a},vjs.Button=vjs.Component.extend({init:function(a,b){vjs.Component.call(this,a,b),this.emitTapEvents(),this.on("tap",this.onClick),this.on("click",this.onClick),this.on("focus",this.onFocus),this.on("blur",this.onBlur)}}),vjs.Button.prototype.createEl=function(a,b){var c;return b=vjs.obj.merge({className:this.buildCSSClass(),role:"button","aria-live":"polite",tabIndex:0},b),c=vjs.Component.prototype.createEl.call(this,a,b),b.innerHTML||(this.contentEl_=vjs.createEl("div",{className:"vjs-control-content"}),this.controlText_=vjs.createEl("span",{className:"vjs-control-text",innerHTML:this.localize(this.buttonText)||"Need Text"}),this.contentEl_.appendChild(this.controlText_),c.appendChild(this.contentEl_)),c
},vjs.Button.prototype.buildCSSClass=function(){return"vjs-control "+vjs.Component.prototype.buildCSSClass.call(this)},vjs.Button.prototype.onClick=function(){},vjs.Button.prototype.onFocus=function(){vjs.on(document,"keydown",vjs.bind(this,this.onKeyPress))},vjs.Button.prototype.onKeyPress=function(a){(32==a.which||13==a.which)&&(a.preventDefault(),this.onClick())},vjs.Button.prototype.onBlur=function(){vjs.off(document,"keydown",vjs.bind(this,this.onKeyPress))},vjs.Slider=vjs.Component.extend({init:function(a,b){vjs.Component.call(this,a,b),this.bar=this.getChild(this.options_.barName),this.handle=this.getChild(this.options_.handleName),this.on("mousedown",this.onMouseDown),this.on("touchstart",this.onMouseDown),this.on("focus",this.onFocus),this.on("blur",this.onBlur),this.on("click",this.onClick),this.on(a,"controlsvisible",this.update),this.on(a,this.playerEvent,this.update)
}}),vjs.Slider.prototype.createEl=function(a,b){return b=b||{},b.className=b.className+" vjs-slider",b=vjs.obj.merge({role:"slider","aria-valuenow":0,"aria-valuemin":0,"aria-valuemax":100,tabIndex:0},b),vjs.Component.prototype.createEl.call(this,a,b)},vjs.Slider.prototype.onMouseDown=function(a){a.preventDefault(),vjs.blockTextSelection(),this.addClass("vjs-sliding"),this.on(document,"mousemove",this.onMouseMove),this.on(document,"mouseup",this.onMouseUp),this.on(document,"touchmove",this.onMouseMove),this.on(document,"touchend",this.onMouseUp),this.onMouseMove(a)
},vjs.Slider.prototype.onMouseMove=function(){},vjs.Slider.prototype.onMouseUp=function(){vjs.unblockTextSelection(),this.removeClass("vjs-sliding"),this.off(document,"mousemove",this.onMouseMove),this.off(document,"mouseup",this.onMouseUp),this.off(document,"touchmove",this.onMouseMove),this.off(document,"touchend",this.onMouseUp),this.update()},vjs.Slider.prototype.update=function(){if(this.el_){var a,b=this.getPercent(),c=this.handle,d=this.bar;if(("number"!=typeof b||b!==b||0>b||1/0===b)&&(b=0),a=b,c){var e=this.el_,f=e.offsetWidth,g=c.el().offsetWidth,h=g?g/f:0,i=1-h,j=b*i;
a=j+h/2,c.el().style.left=vjs.round(100*j,2)+"%"}d&&(d.el().style.width=vjs.round(100*a,2)+"%")}},vjs.Slider.prototype.calculateDistance=function(a){var b,c,d,e,f,g,h,i,j;if(b=this.el_,c=vjs.findPosition(b),f=g=b.offsetWidth,h=this.handle,this.options().vertical){if(e=c.top,j=a.changedTouches?a.changedTouches[0].pageY:a.pageY,h){var k=h.el().offsetHeight;e+=k/2,g-=k}return Math.max(0,Math.min(1,(e-j+g)/g))}if(d=c.left,i=a.changedTouches?a.changedTouches[0].pageX:a.pageX,h){var l=h.el().offsetWidth;d+=l/2,f-=l
}return Math.max(0,Math.min(1,(i-d)/f))},vjs.Slider.prototype.onFocus=function(){this.on(document,"keydown",this.onKeyPress)},vjs.Slider.prototype.onKeyPress=function(a){37==a.which||40==a.which?(a.preventDefault(),this.stepBack()):(38==a.which||39==a.which)&&(a.preventDefault(),this.stepForward())},vjs.Slider.prototype.onBlur=function(){this.off(document,"keydown",this.onKeyPress)},vjs.Slider.prototype.onClick=function(a){a.stopImmediatePropagation(),a.preventDefault()},vjs.SliderHandle=vjs.Component.extend(),vjs.SliderHandle.prototype.defaultValue=0,vjs.SliderHandle.prototype.createEl=function(a,b){return b=b||{},b.className=b.className+" vjs-slider-handle",b=vjs.obj.merge({innerHTML:'<span class="vjs-control-text">'+this.defaultValue+"</span>"},b),vjs.Component.prototype.createEl.call(this,"div",b)
},vjs.Menu=vjs.Component.extend(),vjs.Menu.prototype.addItem=function(a){this.addChild(a),a.on("click",vjs.bind(this,function(){this.unlockShowing()}))},vjs.Menu.prototype.createEl=function(){var a=this.options().contentElType||"ul";this.contentEl_=vjs.createEl(a,{className:"vjs-menu-content"});var b=vjs.Component.prototype.createEl.call(this,"div",{append:this.contentEl_,className:"vjs-menu"});return b.appendChild(this.contentEl_),vjs.on(b,"click",function(a){a.preventDefault(),a.stopImmediatePropagation()}),b
},vjs.MenuItem=vjs.Button.extend({init:function(a,b){vjs.Button.call(this,a,b),this.selected(b.selected)}}),vjs.MenuItem.prototype.createEl=function(a,b){return vjs.Button.prototype.createEl.call(this,"li",vjs.obj.merge({className:"vjs-menu-item",innerHTML:this.localize(this.options_.label)},b))},vjs.MenuItem.prototype.onClick=function(){this.selected(!0)},vjs.MenuItem.prototype.selected=function(a){a?(this.addClass("vjs-selected"),this.el_.setAttribute("aria-selected",!0)):(this.removeClass("vjs-selected"),this.el_.setAttribute("aria-selected",!1))
},vjs.MenuButton=vjs.Button.extend({init:function(a,b){vjs.Button.call(this,a,b),this.update(),this.on("keydown",this.onKeyPress),this.el_.setAttribute("aria-haspopup",!0),this.el_.setAttribute("role","button")}}),vjs.MenuButton.prototype.update=function(){var a=this.createMenu();this.menu&&this.removeChild(this.menu),this.menu=a,this.addChild(a),this.items&&0===this.items.length?this.hide():this.items&&this.items.length>1&&this.show()},vjs.MenuButton.prototype.buttonPressed_=!1,vjs.MenuButton.prototype.createMenu=function(){var a=new vjs.Menu(this.player_);
if(this.options().title&&a.contentEl().appendChild(vjs.createEl("li",{className:"vjs-menu-title",innerHTML:vjs.capitalize(this.options().title),tabindex:-1})),this.items=this.createItems(),this.items)for(var b=0;b<this.items.length;b++)a.addItem(this.items[b]);return a},vjs.MenuButton.prototype.createItems=function(){},vjs.MenuButton.prototype.buildCSSClass=function(){return this.className+" vjs-menu-button "+vjs.Button.prototype.buildCSSClass.call(this)},vjs.MenuButton.prototype.onFocus=function(){},vjs.MenuButton.prototype.onBlur=function(){},vjs.MenuButton.prototype.onClick=function(){this.one("mouseout",vjs.bind(this,function(){this.menu.unlockShowing(),this.el_.blur()
})),this.buttonPressed_?this.unpressButton():this.pressButton()},vjs.MenuButton.prototype.onKeyPress=function(a){32==a.which||13==a.which?(this.buttonPressed_?this.unpressButton():this.pressButton(),a.preventDefault()):27==a.which&&(this.buttonPressed_&&this.unpressButton(),a.preventDefault())},vjs.MenuButton.prototype.pressButton=function(){this.buttonPressed_=!0,this.menu.lockShowing(),this.el_.setAttribute("aria-pressed",!0),this.items&&this.items.length>0&&this.items[0].el().focus()},vjs.MenuButton.prototype.unpressButton=function(){this.buttonPressed_=!1,this.menu.unlockShowing(),this.el_.setAttribute("aria-pressed",!1)
},vjs.MediaError=function(a){"number"==typeof a?this.code=a:"string"==typeof a?this.message=a:"object"==typeof a&&vjs.obj.merge(this,a),this.message||(this.message=vjs.MediaError.defaultMessages[this.code]||"")},vjs.MediaError.prototype.code=0,vjs.MediaError.prototype.message="",vjs.MediaError.prototype.status=null,vjs.MediaError.errorTypes=["MEDIA_ERR_CUSTOM","MEDIA_ERR_ABORTED","MEDIA_ERR_NETWORK","MEDIA_ERR_DECODE","MEDIA_ERR_SRC_NOT_SUPPORTED","MEDIA_ERR_ENCRYPTED"],vjs.MediaError.defaultMessages={1:"You aborted the video playback",2:"A network error caused the video download to fail part-way.",3:"The video playback was aborted due to a corruption problem or because the video used features your browser did not support.",4:"The video could not be loaded, either because the server or network failed or because the format is not supported.",5:"The video is encrypted and we do not have the keys to decrypt it."};
for(var errNum=0;errNum<vjs.MediaError.errorTypes.length;errNum++)vjs.MediaError[vjs.MediaError.errorTypes[errNum]]=errNum,vjs.MediaError.prototype[vjs.MediaError.errorTypes[errNum]]=errNum;if(function(){var a,b,c,d;for(vjs.browser.fullscreenAPI,a=[["requestFullscreen","exitFullscreen","fullscreenElement","fullscreenEnabled","fullscreenchange","fullscreenerror"],["webkitRequestFullscreen","webkitExitFullscreen","webkitFullscreenElement","webkitFullscreenEnabled","webkitfullscreenchange","webkitfullscreenerror"],["webkitRequestFullScreen","webkitCancelFullScreen","webkitCurrentFullScreenElement","webkitCancelFullScreen","webkitfullscreenchange","webkitfullscreenerror"],["mozRequestFullScreen","mozCancelFullScreen","mozFullScreenElement","mozFullScreenEnabled","mozfullscreenchange","mozfullscreenerror"],["msRequestFullscreen","msExitFullscreen","msFullscreenElement","msFullscreenEnabled","MSFullscreenChange","MSFullscreenError"]],b=a[0],d=0;d<a.length;d++)if(a[d][1]in document){c=a[d];
break}if(c)for(vjs.browser.fullscreenAPI={},d=0;d<c.length;d++)vjs.browser.fullscreenAPI[b[d]]=c[d]}(),vjs.Player=vjs.Component.extend({init:function(a,b,c){this.tag=a,a.id=a.id||"vjs_video_"+vjs.guid++,this.tagAttributes=a&&vjs.getElementAttributes(a),b=vjs.obj.merge(this.getTagSettings(a),b),this.language_=b.language||vjs.options.language,this.languages_=b.languages||vjs.options.languages,this.cache_={},this.poster_=b.poster||"",this.controls_=!!b.controls,a.controls=!1,b.reportTouchActivity=!1,this.isAudio("audio"===this.tag.nodeName.toLowerCase()),vjs.Component.call(this,this,b,c),this.controls()?this.addClass("vjs-controls-enabled"):this.addClass("vjs-controls-disabled"),this.isAudio()&&this.addClass("vjs-audio"),vjs.players[this.id_]=this,b.plugins&&vjs.obj.each(b.plugins,function(a,b){this[a](b)
},this),this.listenForUserActivity()}}),vjs.Player.prototype.language_,vjs.Player.prototype.language=function(a){return void 0===a?this.language_:(this.language_=a,this)},vjs.Player.prototype.languages_,vjs.Player.prototype.languages=function(){return this.languages_},vjs.Player.prototype.options_=vjs.options,vjs.Player.prototype.dispose=function(){this.trigger("dispose"),this.off("dispose"),vjs.players[this.id_]=null,this.tag&&this.tag.player&&(this.tag.player=null),this.el_&&this.el_.player&&(this.el_.player=null),this.tech&&this.tech.dispose(),vjs.Component.prototype.dispose.call(this)
},vjs.Player.prototype.getTagSettings=function(a){var b,c,d={sources:[],tracks:[]};if(b=vjs.getElementAttributes(a),c=b["data-setup"],null!==c&&vjs.obj.merge(b,vjs.JSON.parse(c||"{}")),vjs.obj.merge(d,b),a.hasChildNodes()){var e,f,g,h,i;for(e=a.childNodes,h=0,i=e.length;i>h;h++)f=e[h],g=f.nodeName.toLowerCase(),"source"===g?d.sources.push(vjs.getElementAttributes(f)):"track"===g&&d.tracks.push(vjs.getElementAttributes(f))}return d},vjs.Player.prototype.createEl=function(){var c,a=this.el_=vjs.Component.prototype.createEl.call(this,"div"),b=this.tag;
return b.removeAttribute("width"),b.removeAttribute("height"),c=vjs.getElementAttributes(b),vjs.obj.each(c,function(b){"class"==b?a.className=c[b]:a.setAttribute(b,c[b])}),b.id+="_html5_api",b.className="vjs-tech",b.player=a.player=this,this.addClass("vjs-paused"),this.width(this.options_.width,!0),this.height(this.options_.height,!0),b.initNetworkState_=b.networkState,b.parentNode&&b.parentNode.insertBefore(a,b),vjs.insertFirst(b,a),this.el_=a,this.on("loadstart",this.onLoadStart),this.on("waiting",this.onWaiting),this.on(["canplay","canplaythrough","playing","ended"],this.onWaitEnd),this.on("seeking",this.onSeeking),this.on("seeked",this.onSeeked),this.on("ended",this.onEnded),this.on("play",this.onPlay),this.on("firstplay",this.onFirstPlay),this.on("pause",this.onPause),this.on("progress",this.onProgress),this.on("durationchange",this.onDurationChange),this.on("fullscreenchange",this.onFullscreenChange),a
},vjs.Player.prototype.loadTech=function(a,b){this.tech&&this.unloadTech(),"Html5"!==a&&this.tag&&(vjs.Html5.disposeMediaElement(this.tag),this.tag=null),this.techName=a,this.isReady_=!1;var c=function(){this.player_.triggerReady()},d=vjs.obj.merge({source:b,parentEl:this.el_},this.options_[a.toLowerCase()]);b&&(this.currentType_=b.type,b.src==this.cache_.src&&this.cache_.currentTime>0&&(d.startTime=this.cache_.currentTime),this.cache_.src=b.src),this.tech=new window.videojs[a](this,d),this.tech.ready(c)},vjs.Player.prototype.unloadTech=function(){this.isReady_=!1,this.tech.dispose(),this.tech=!1
},vjs.Player.prototype.onLoadStart=function(){this.removeClass("vjs-ended"),this.error(null),this.paused()?this.hasStarted(!1):this.trigger("firstplay")},vjs.Player.prototype.hasStarted_=!1,vjs.Player.prototype.hasStarted=function(a){return void 0!==a?(this.hasStarted_!==a&&(this.hasStarted_=a,a?(this.addClass("vjs-has-started"),this.trigger("firstplay")):this.removeClass("vjs-has-started")),this):this.hasStarted_},vjs.Player.prototype.onLoadedMetaData,vjs.Player.prototype.onLoadedData,vjs.Player.prototype.onLoadedAllData,vjs.Player.prototype.onPlay=function(){this.removeClass("vjs-ended"),this.removeClass("vjs-paused"),this.addClass("vjs-playing"),this.hasStarted(!0)
},vjs.Player.prototype.onWaiting=function(){this.addClass("vjs-waiting")},vjs.Player.prototype.onWaitEnd=function(){this.removeClass("vjs-waiting")},vjs.Player.prototype.onSeeking=function(){this.addClass("vjs-seeking")},vjs.Player.prototype.onSeeked=function(){this.removeClass("vjs-seeking")},vjs.Player.prototype.onFirstPlay=function(){this.options_.starttime&&this.currentTime(this.options_.starttime),this.addClass("vjs-has-started")},vjs.Player.prototype.onPause=function(){this.removeClass("vjs-playing"),this.addClass("vjs-paused")
},vjs.Player.prototype.onTimeUpdate,vjs.Player.prototype.onProgress=function(){1==this.bufferedPercent()&&this.trigger("loadedalldata")},vjs.Player.prototype.onEnded=function(){this.addClass("vjs-ended"),this.options_.loop?(this.currentTime(0),this.play()):this.paused()||this.pause()},vjs.Player.prototype.onDurationChange=function(){var a=this.techGet("duration");a&&(0>a&&(a=1/0),this.duration(a),1/0===a?this.addClass("vjs-live"):this.removeClass("vjs-live"))},vjs.Player.prototype.onVolumeChange,vjs.Player.prototype.onFullscreenChange=function(){this.isFullscreen()?this.addClass("vjs-fullscreen"):this.removeClass("vjs-fullscreen")
},vjs.Player.prototype.onError,vjs.Player.prototype.cache_,vjs.Player.prototype.getCache=function(){return this.cache_},vjs.Player.prototype.techCall=function(a,b){if(this.tech&&!this.tech.isReady_)this.tech.ready(function(){this[a](b)});else try{this.tech[a](b)}catch(c){throw vjs.log(c),c}},vjs.Player.prototype.techGet=function(a){if(this.tech&&this.tech.isReady_)try{return this.tech[a]()}catch(b){throw void 0===this.tech[a]?vjs.log("Video.js: "+a+" method not defined for "+this.techName+" playback technology.",b):"TypeError"==b.name?(vjs.log("Video.js: "+a+" unavailable on "+this.techName+" playback technology element.",b),this.tech.isReady_=!1):vjs.log(b),b
}},vjs.Player.prototype.play=function(){return this.techCall("play"),this},vjs.Player.prototype.pause=function(){return this.techCall("pause"),this},vjs.Player.prototype.paused=function(){return this.techGet("paused")===!1?!1:!0},vjs.Player.prototype.currentTime=function(a){return void 0!==a?(this.techCall("setCurrentTime",a),this):this.cache_.currentTime=this.techGet("currentTime")||0},vjs.Player.prototype.duration=function(a){return void 0!==a?(this.cache_.duration=parseFloat(a),this):(void 0===this.cache_.duration&&this.onDurationChange(),this.cache_.duration||0)
},vjs.Player.prototype.remainingTime=function(){return this.duration()-this.currentTime()},vjs.Player.prototype.buffered=function(){var a=this.techGet("buffered");return a&&a.length||(a=vjs.createTimeRange(0,0)),a},vjs.Player.prototype.bufferedPercent=function(){var d,e,a=this.duration(),b=this.buffered(),c=0;if(!a)return 0;for(var f=0;f<b.length;f++)d=b.start(f),e=b.end(f),e>a&&(e=a),c+=e-d;return c/a},vjs.Player.prototype.bufferedEnd=function(){var a=this.buffered(),b=this.duration(),c=a.end(a.length-1);return c>b&&(c=b),c
},vjs.Player.prototype.volume=function(a){var b;return void 0!==a?(b=Math.max(0,Math.min(1,parseFloat(a))),this.cache_.volume=b,this.techCall("setVolume",b),vjs.setLocalStorage("volume",b),this):(b=parseFloat(this.techGet("volume")),isNaN(b)?1:b)},vjs.Player.prototype.muted=function(a){return void 0!==a?(this.techCall("setMuted",a),this):this.techGet("muted")||!1},vjs.Player.prototype.supportsFullScreen=function(){return this.techGet("supportsFullScreen")||!1},vjs.Player.prototype.isFullscreen_=!1,vjs.Player.prototype.isFullscreen=function(a){return void 0!==a?(this.isFullscreen_=!!a,this):this.isFullscreen_
},vjs.Player.prototype.isFullScreen=function(a){return vjs.log.warn('player.isFullScreen() has been deprecated, use player.isFullscreen() with a lowercase "s")'),this.isFullscreen(a)},vjs.Player.prototype.requestFullscreen=function(){var a=vjs.browser.fullscreenAPI;return this.isFullscreen(!0),a?(vjs.on(document,a.fullscreenchange,vjs.bind(this,function(){this.isFullscreen(document[a.fullscreenElement]),this.isFullscreen()===!1&&vjs.off(document,a.fullscreenchange,arguments.callee),this.trigger("fullscreenchange")
})),this.el_[a.requestFullscreen]()):this.tech.supportsFullScreen()?this.techCall("enterFullScreen"):(this.enterFullWindow(),this.trigger("fullscreenchange")),this},vjs.Player.prototype.requestFullScreen=function(){return vjs.log.warn('player.requestFullScreen() has been deprecated, use player.requestFullscreen() with a lowercase "s")'),this.requestFullscreen()},vjs.Player.prototype.exitFullscreen=function(){var a=vjs.browser.fullscreenAPI;return this.isFullscreen(!1),a?document[a.exitFullscreen]():this.tech.supportsFullScreen()?this.techCall("exitFullScreen"):(this.exitFullWindow(),this.trigger("fullscreenchange")),this
},vjs.Player.prototype.cancelFullScreen=function(){return vjs.log.warn("player.cancelFullScreen() has been deprecated, use player.exitFullscreen()"),this.exitFullscreen()},vjs.Player.prototype.enterFullWindow=function(){this.isFullWindow=!0,this.docOrigOverflow=document.documentElement.style.overflow,vjs.on(document,"keydown",vjs.bind(this,this.fullWindowOnEscKey)),document.documentElement.style.overflow="hidden",vjs.addClass(document.body,"vjs-full-window"),this.trigger("enterFullWindow")},vjs.Player.prototype.fullWindowOnEscKey=function(a){27===a.keyCode&&(this.isFullscreen()===!0?this.exitFullscreen():this.exitFullWindow())
},vjs.Player.prototype.exitFullWindow=function(){this.isFullWindow=!1,vjs.off(document,"keydown",this.fullWindowOnEscKey),document.documentElement.style.overflow=this.docOrigOverflow,vjs.removeClass(document.body,"vjs-full-window"),this.trigger("exitFullWindow")},vjs.Player.prototype.selectSource=function(a){for(var b=0,c=this.options_.techOrder;b<c.length;b++){var d=vjs.capitalize(c[b]),e=window.videojs[d];if(e){if(e.isSupported())for(var f=0,g=a;f<g.length;f++){var h=g[f];if(e.canPlaySource(h))return{source:h,tech:d}
}}else vjs.log.error('The "'+d+'" tech is undefined. Skipped browser support check for that tech.')}return!1},vjs.Player.prototype.src=function(a){return void 0===a?this.techGet("src"):(vjs.obj.isArray(a)?this.sourceList_(a):"string"==typeof a?this.src({src:a}):a instanceof Object&&(a.type&&!window.videojs[this.techName].canPlaySource(a)?this.sourceList_([a]):(this.cache_.src=a.src,this.currentType_=a.type||"",this.ready(function(){window.videojs[this.techName].prototype.hasOwnProperty("setSource")?this.techCall("setSource",a):this.techCall("src",a.src),"auto"==this.options_.preload&&this.load(),this.options_.autoplay&&this.play()
}))),this)},vjs.Player.prototype.sourceList_=function(a){var b=this.selectSource(a);b?b.tech===this.techName?this.src(b.source):this.loadTech(b.tech,b.source):(this.setTimeout(function(){this.error({code:4,message:this.localize(this.options().notSupportedMessage)})},0),this.triggerReady())},vjs.Player.prototype.load=function(){return this.techCall("load"),this},vjs.Player.prototype.currentSrc=function(){return this.techGet("currentSrc")||this.cache_.src||""},vjs.Player.prototype.currentType=function(){return this.currentType_||""
},vjs.Player.prototype.preload=function(a){return void 0!==a?(this.techCall("setPreload",a),this.options_.preload=a,this):this.techGet("preload")},vjs.Player.prototype.autoplay=function(a){return void 0!==a?(this.techCall("setAutoplay",a),this.options_.autoplay=a,this):this.techGet("autoplay",a)},vjs.Player.prototype.loop=function(a){return void 0!==a?(this.techCall("setLoop",a),this.options_.loop=a,this):this.techGet("loop")},vjs.Player.prototype.poster_,vjs.Player.prototype.poster=function(a){return void 0===a?this.poster_:(a||(a=""),this.poster_=a,this.techCall("setPoster",a),this.trigger("posterchange"),this)
},vjs.Player.prototype.controls_,vjs.Player.prototype.controls=function(a){return void 0!==a?(a=!!a,this.controls_!==a&&(this.controls_=a,a?(this.removeClass("vjs-controls-disabled"),this.addClass("vjs-controls-enabled"),this.trigger("controlsenabled")):(this.removeClass("vjs-controls-enabled"),this.addClass("vjs-controls-disabled"),this.trigger("controlsdisabled"))),this):this.controls_},vjs.Player.prototype.usingNativeControls_,vjs.Player.prototype.usingNativeControls=function(a){return void 0!==a?(a=!!a,this.usingNativeControls_!==a&&(this.usingNativeControls_=a,a?(this.addClass("vjs-using-native-controls"),this.trigger("usingnativecontrols")):(this.removeClass("vjs-using-native-controls"),this.trigger("usingcustomcontrols"))),this):this.usingNativeControls_
},vjs.Player.prototype.error_=null,vjs.Player.prototype.error=function(a){return void 0===a?this.error_:null===a?(this.error_=a,this.removeClass("vjs-error"),this):(this.error_=a instanceof vjs.MediaError?a:new vjs.MediaError(a),this.trigger("error"),this.addClass("vjs-error"),vjs.log.error("(CODE:"+this.error_.code+" "+vjs.MediaError.errorTypes[this.error_.code]+")",this.error_.message,this.error_),this)},vjs.Player.prototype.ended=function(){return this.techGet("ended")},vjs.Player.prototype.seeking=function(){return this.techGet("seeking")
},vjs.Player.prototype.userActivity_=!0,vjs.Player.prototype.reportUserActivity=function(){this.userActivity_=!0},vjs.Player.prototype.userActive_=!0,vjs.Player.prototype.userActive=function(a){return void 0!==a?(a=!!a,a!==this.userActive_&&(this.userActive_=a,a?(this.userActivity_=!0,this.removeClass("vjs-user-inactive"),this.addClass("vjs-user-active"),this.trigger("useractive")):(this.userActivity_=!1,this.tech&&this.tech.one("mousemove",function(a){a.stopPropagation(),a.preventDefault()}),this.removeClass("vjs-user-active"),this.addClass("vjs-user-inactive"),this.trigger("userinactive"))),this):this.userActive_
},vjs.Player.prototype.listenForUserActivity=function(){var a,b,c,d,e,f,g,h,i;a=vjs.bind(this,this.reportUserActivity),b=function(b){(b.screenX!=h||b.screenY!=i)&&(h=b.screenX,i=b.screenY,a())},c=function(){a(),this.clearInterval(d),d=this.setInterval(a,250)},e=function(){a(),this.clearInterval(d)},this.on("mousedown",c),this.on("mousemove",b),this.on("mouseup",e),this.on("keydown",a),this.on("keyup",a),f=this.setInterval(function(){if(this.userActivity_){this.userActivity_=!1,this.userActive(!0),this.clearTimeout(g);
var a=this.options().inactivityTimeout;a>0&&(g=this.setTimeout(function(){this.userActivity_||this.userActive(!1)},a))}},250)},vjs.Player.prototype.playbackRate=function(a){return void 0!==a?(this.techCall("setPlaybackRate",a),this):this.tech&&this.tech.featuresPlaybackRate?this.techGet("playbackRate"):1},vjs.Player.prototype.isAudio_=!1,vjs.Player.prototype.isAudio=function(a){return void 0!==a?(this.isAudio_=!!a,this):this.isAudio_},vjs.Player.prototype.networkState=function(){return this.techGet("networkState")
},vjs.Player.prototype.readyState=function(){return this.techGet("readyState")},vjs.Player.prototype.textTracks=function(){return this.tech&&this.tech.textTracks()},vjs.Player.prototype.remoteTextTracks=function(){return this.tech&&this.tech.remoteTextTracks()},vjs.Player.prototype.addTextTrack=function(a,b,c){return this.tech&&this.tech.addTextTrack(a,b,c)},vjs.Player.prototype.addRemoteTextTrack=function(a){return this.tech&&this.tech.addRemoteTextTrack(a)},vjs.Player.prototype.removeRemoteTextTrack=function(a){this.tech&&this.tech.removeRemoteTextTrack(a)
},vjs.ControlBar=vjs.Component.extend(),vjs.ControlBar.prototype.options_={loadEvent:"play",children:{playToggle:{},currentTimeDisplay:{},timeDivider:{},durationDisplay:{},remainingTimeDisplay:{},liveDisplay:{},progressControl:{},fullscreenToggle:{},volumeControl:{},muteToggle:{},playbackRateMenuButton:{},subtitlesButton:{},captionsButton:{},chaptersButton:{}}},vjs.ControlBar.prototype.createEl=function(){return vjs.createEl("div",{className:"vjs-control-bar"})},vjs.LiveDisplay=vjs.Component.extend({init:function(a,b){vjs.Component.call(this,a,b)
}}),vjs.LiveDisplay.prototype.createEl=function(){var a=vjs.Component.prototype.createEl.call(this,"div",{className:"vjs-live-controls vjs-control"});return this.contentEl_=vjs.createEl("div",{className:"vjs-live-display",innerHTML:'<span class="vjs-control-text">'+this.localize("Stream Type")+"</span>"+this.localize("LIVE"),"aria-live":"off"}),a.appendChild(this.contentEl_),a},vjs.PlayToggle=vjs.Button.extend({init:function(a,b){vjs.Button.call(this,a,b),this.on(a,"play",this.onPlay),this.on(a,"pause",this.onPause)
}}),vjs.PlayToggle.prototype.buttonText="Play",vjs.PlayToggle.prototype.buildCSSClass=function(){return"vjs-play-control "+vjs.Button.prototype.buildCSSClass.call(this)},vjs.PlayToggle.prototype.onClick=function(){this.player_.paused()?this.player_.play():this.player_.pause()},vjs.PlayToggle.prototype.onPlay=function(){this.removeClass("vjs-paused"),this.addClass("vjs-playing"),this.el_.children[0].children[0].innerHTML=this.localize("Pause")},vjs.PlayToggle.prototype.onPause=function(){this.removeClass("vjs-playing"),this.addClass("vjs-paused"),this.el_.children[0].children[0].innerHTML=this.localize("Play")
},vjs.CurrentTimeDisplay=vjs.Component.extend({init:function(a,b){vjs.Component.call(this,a,b),this.on(a,"timeupdate",this.updateContent)}}),vjs.CurrentTimeDisplay.prototype.createEl=function(){var a=vjs.Component.prototype.createEl.call(this,"div",{className:"vjs-current-time vjs-time-controls vjs-control"});return this.contentEl_=vjs.createEl("div",{className:"vjs-current-time-display",innerHTML:'<span class="vjs-control-text">Current Time </span>0:00',"aria-live":"off"}),a.appendChild(this.contentEl_),a},vjs.CurrentTimeDisplay.prototype.updateContent=function(){var a=this.player_.scrubbing?this.player_.getCache().currentTime:this.player_.currentTime();
this.contentEl_.innerHTML='<span class="vjs-control-text">'+this.localize("Current Time")+"</span> "+vjs.formatTime(a,this.player_.duration())},vjs.DurationDisplay=vjs.Component.extend({init:function(a,b){vjs.Component.call(this,a,b),this.on(a,"timeupdate",this.updateContent)}}),vjs.DurationDisplay.prototype.createEl=function(){var a=vjs.Component.prototype.createEl.call(this,"div",{className:"vjs-duration vjs-time-controls vjs-control"});return this.contentEl_=vjs.createEl("div",{className:"vjs-duration-display",innerHTML:'<span class="vjs-control-text">'+this.localize("Duration Time")+"</span> 0:00","aria-live":"off"}),a.appendChild(this.contentEl_),a
},vjs.DurationDisplay.prototype.updateContent=function(){var a=this.player_.duration();a&&(this.contentEl_.innerHTML='<span class="vjs-control-text">'+this.localize("Duration Time")+"</span> "+vjs.formatTime(a))},vjs.TimeDivider=vjs.Component.extend({init:function(a,b){vjs.Component.call(this,a,b)}}),vjs.TimeDivider.prototype.createEl=function(){return vjs.Component.prototype.createEl.call(this,"div",{className:"vjs-time-divider",innerHTML:"<div><span>/</span></div>"})},vjs.RemainingTimeDisplay=vjs.Component.extend({init:function(a,b){vjs.Component.call(this,a,b),this.on(a,"timeupdate",this.updateContent)
}}),vjs.RemainingTimeDisplay.prototype.createEl=function(){var a=vjs.Component.prototype.createEl.call(this,"div",{className:"vjs-remaining-time vjs-time-controls vjs-control"});return this.contentEl_=vjs.createEl("div",{className:"vjs-remaining-time-display",innerHTML:'<span class="vjs-control-text">'+this.localize("Remaining Time")+"</span> -0:00","aria-live":"off"}),a.appendChild(this.contentEl_),a},vjs.RemainingTimeDisplay.prototype.updateContent=function(){this.player_.duration()&&(this.contentEl_.innerHTML='<span class="vjs-control-text">'+this.localize("Remaining Time")+"</span> -"+vjs.formatTime(this.player_.remainingTime()))
},vjs.FullscreenToggle=vjs.Button.extend({init:function(a,b){vjs.Button.call(this,a,b)}}),vjs.FullscreenToggle.prototype.buttonText="Fullscreen",vjs.FullscreenToggle.prototype.buildCSSClass=function(){return"vjs-fullscreen-control "+vjs.Button.prototype.buildCSSClass.call(this)},vjs.FullscreenToggle.prototype.onClick=function(){this.player_.isFullscreen()?(this.player_.exitFullscreen(),this.controlText_.innerHTML=this.localize("Fullscreen")):(this.player_.requestFullscreen(),this.controlText_.innerHTML=this.localize("Non-Fullscreen"))
},vjs.ProgressControl=vjs.Component.extend({init:function(a,b){vjs.Component.call(this,a,b)}}),vjs.ProgressControl.prototype.options_={children:{seekBar:{}}},vjs.ProgressControl.prototype.createEl=function(){return vjs.Component.prototype.createEl.call(this,"div",{className:"vjs-progress-control vjs-control"})},vjs.SeekBar=vjs.Slider.extend({init:function(a,b){vjs.Slider.call(this,a,b),this.on(a,"timeupdate",this.updateARIAAttributes),a.ready(vjs.bind(this,this.updateARIAAttributes))}}),vjs.SeekBar.prototype.options_={children:{loadProgressBar:{},playProgressBar:{},seekHandle:{}},barName:"playProgressBar",handleName:"seekHandle"},vjs.SeekBar.prototype.playerEvent="timeupdate",vjs.SeekBar.prototype.createEl=function(){return vjs.Slider.prototype.createEl.call(this,"div",{className:"vjs-progress-holder","aria-label":"video progress bar"})
},vjs.SeekBar.prototype.updateARIAAttributes=function(){var a=this.player_.scrubbing?this.player_.getCache().currentTime:this.player_.currentTime();this.el_.setAttribute("aria-valuenow",vjs.round(100*this.getPercent(),2)),this.el_.setAttribute("aria-valuetext",vjs.formatTime(a,this.player_.duration()))},vjs.SeekBar.prototype.getPercent=function(){return this.player_.currentTime()/this.player_.duration()},vjs.SeekBar.prototype.onMouseDown=function(a){vjs.Slider.prototype.onMouseDown.call(this,a),this.player_.scrubbing=!0,this.player_.addClass("vjs-scrubbing"),this.videoWasPlaying=!this.player_.paused(),this.player_.pause()
},vjs.SeekBar.prototype.onMouseMove=function(a){var b=this.calculateDistance(a)*this.player_.duration();b==this.player_.duration()&&(b-=.1),this.player_.currentTime(b)},vjs.SeekBar.prototype.onMouseUp=function(a){vjs.Slider.prototype.onMouseUp.call(this,a),this.player_.scrubbing=!1,this.player_.removeClass("vjs-scrubbing"),this.videoWasPlaying&&this.player_.play()},vjs.SeekBar.prototype.stepForward=function(){this.player_.currentTime(this.player_.currentTime()+5)},vjs.SeekBar.prototype.stepBack=function(){this.player_.currentTime(this.player_.currentTime()-5)
},vjs.LoadProgressBar=vjs.Component.extend({init:function(a,b){vjs.Component.call(this,a,b),this.on(a,"progress",this.update)}}),vjs.LoadProgressBar.prototype.createEl=function(){return vjs.Component.prototype.createEl.call(this,"div",{className:"vjs-load-progress",innerHTML:'<span class="vjs-control-text"><span>'+this.localize("Loaded")+"</span>: 0%</span>"})},vjs.LoadProgressBar.prototype.update=function(){var a,b,c,d,e=this.player_.buffered(),f=this.player_.duration(),g=this.player_.bufferedEnd(),h=this.el_.children,i=function(a,b){var c=a/b||0;
return 100*c+"%"};for(this.el_.style.width=i(g,f),a=0;a<e.length;a++)b=e.start(a),c=e.end(a),d=h[a],d||(d=this.el_.appendChild(vjs.createEl())),d.style.left=i(b,g),d.style.width=i(c-b,g);for(a=h.length;a>e.length;a--)this.el_.removeChild(h[a-1])},vjs.PlayProgressBar=vjs.Component.extend({init:function(a,b){vjs.Component.call(this,a,b)}}),vjs.PlayProgressBar.prototype.createEl=function(){return vjs.Component.prototype.createEl.call(this,"div",{className:"vjs-play-progress",innerHTML:'<span class="vjs-control-text"><span>'+this.localize("Progress")+"</span>: 0%</span>"})
},vjs.SeekHandle=vjs.SliderHandle.extend({init:function(a,b){vjs.SliderHandle.call(this,a,b),this.on(a,"timeupdate",this.updateContent)}}),vjs.SeekHandle.prototype.defaultValue="00:00",vjs.SeekHandle.prototype.createEl=function(){return vjs.SliderHandle.prototype.createEl.call(this,"div",{className:"vjs-seek-handle","aria-live":"off"})},vjs.SeekHandle.prototype.updateContent=function(){var a=this.player_.scrubbing?this.player_.getCache().currentTime:this.player_.currentTime();this.el_.innerHTML='<span class="vjs-control-text">'+vjs.formatTime(a,this.player_.duration())+"</span>"
},vjs.VolumeControl=vjs.Component.extend({init:function(a,b){vjs.Component.call(this,a,b),a.tech&&a.tech.featuresVolumeControl===!1&&this.addClass("vjs-hidden"),this.on(a,"loadstart",function(){a.tech.featuresVolumeControl===!1?this.addClass("vjs-hidden"):this.removeClass("vjs-hidden")})}}),vjs.VolumeControl.prototype.options_={children:{volumeBar:{}}},vjs.VolumeControl.prototype.createEl=function(){return vjs.Component.prototype.createEl.call(this,"div",{className:"vjs-volume-control vjs-control"})},vjs.VolumeBar=vjs.Slider.extend({init:function(a,b){vjs.Slider.call(this,a,b),this.on(a,"volumechange",this.updateARIAAttributes),a.ready(vjs.bind(this,this.updateARIAAttributes))
}}),vjs.VolumeBar.prototype.updateARIAAttributes=function(){this.el_.setAttribute("aria-valuenow",vjs.round(100*this.player_.volume(),2)),this.el_.setAttribute("aria-valuetext",vjs.round(100*this.player_.volume(),2)+"%")},vjs.VolumeBar.prototype.options_={children:{volumeLevel:{},volumeHandle:{}},barName:"volumeLevel",handleName:"volumeHandle"},vjs.VolumeBar.prototype.playerEvent="volumechange",vjs.VolumeBar.prototype.createEl=function(){return vjs.Slider.prototype.createEl.call(this,"div",{className:"vjs-volume-bar","aria-label":"volume level"})
},vjs.VolumeBar.prototype.onMouseMove=function(a){this.player_.muted()&&this.player_.muted(!1),this.player_.volume(this.calculateDistance(a))},vjs.VolumeBar.prototype.getPercent=function(){return this.player_.muted()?0:this.player_.volume()},vjs.VolumeBar.prototype.stepForward=function(){this.player_.volume(this.player_.volume()+.1)},vjs.VolumeBar.prototype.stepBack=function(){this.player_.volume(this.player_.volume()-.1)},vjs.VolumeLevel=vjs.Component.extend({init:function(a,b){vjs.Component.call(this,a,b)}}),vjs.VolumeLevel.prototype.createEl=function(){return vjs.Component.prototype.createEl.call(this,"div",{className:"vjs-volume-level",innerHTML:'<span class="vjs-control-text"></span>'})
},vjs.VolumeHandle=vjs.SliderHandle.extend(),vjs.VolumeHandle.prototype.defaultValue="00:00",vjs.VolumeHandle.prototype.createEl=function(){return vjs.SliderHandle.prototype.createEl.call(this,"div",{className:"vjs-volume-handle"})},vjs.MuteToggle=vjs.Button.extend({init:function(a,b){vjs.Button.call(this,a,b),this.on(a,"volumechange",this.update),a.tech&&a.tech.featuresVolumeControl===!1&&this.addClass("vjs-hidden"),this.on(a,"loadstart",function(){a.tech.featuresVolumeControl===!1?this.addClass("vjs-hidden"):this.removeClass("vjs-hidden")
})}}),vjs.MuteToggle.prototype.createEl=function(){return vjs.Button.prototype.createEl.call(this,"div",{className:"vjs-mute-control vjs-control",innerHTML:'<div><span class="vjs-control-text">'+this.localize("Mute")+"</span></div>"})},vjs.MuteToggle.prototype.onClick=function(){this.player_.muted(this.player_.muted()?!1:!0)},vjs.MuteToggle.prototype.update=function(){var a=this.player_.volume(),b=3;0===a||this.player_.muted()?b=0:.33>a?b=1:.67>a&&(b=2),this.player_.muted()?this.el_.children[0].children[0].innerHTML!=this.localize("Unmute")&&(this.el_.children[0].children[0].innerHTML=this.localize("Unmute")):this.el_.children[0].children[0].innerHTML!=this.localize("Mute")&&(this.el_.children[0].children[0].innerHTML=this.localize("Mute"));
for(var c=0;4>c;c++)vjs.removeClass(this.el_,"vjs-vol-"+c);vjs.addClass(this.el_,"vjs-vol-"+b)},vjs.VolumeMenuButton=vjs.MenuButton.extend({init:function(a,b){vjs.MenuButton.call(this,a,b),this.on(a,"volumechange",this.volumeUpdate),a.tech&&a.tech.featuresVolumeControl===!1&&this.addClass("vjs-hidden"),this.on(a,"loadstart",function(){a.tech.featuresVolumeControl===!1?this.addClass("vjs-hidden"):this.removeClass("vjs-hidden")}),this.addClass("vjs-menu-button")}}),vjs.VolumeMenuButton.prototype.createMenu=function(){var a=new vjs.Menu(this.player_,{contentElType:"div"}),b=new vjs.VolumeBar(this.player_,this.options_.volumeBar);
return b.on("focus",function(){a.lockShowing()}),b.on("blur",function(){a.unlockShowing()}),a.addChild(b),a},vjs.VolumeMenuButton.prototype.onClick=function(){vjs.MuteToggle.prototype.onClick.call(this),vjs.MenuButton.prototype.onClick.call(this)},vjs.VolumeMenuButton.prototype.createEl=function(){return vjs.Button.prototype.createEl.call(this,"div",{className:"vjs-volume-menu-button vjs-menu-button vjs-control",innerHTML:'<div><span class="vjs-control-text">'+this.localize("Mute")+"</span></div>"})},vjs.VolumeMenuButton.prototype.volumeUpdate=vjs.MuteToggle.prototype.update,vjs.PlaybackRateMenuButton=vjs.MenuButton.extend({init:function(a,b){vjs.MenuButton.call(this,a,b),this.updateVisibility(),this.updateLabel(),this.on(a,"loadstart",this.updateVisibility),this.on(a,"ratechange",this.updateLabel)
}}),vjs.PlaybackRateMenuButton.prototype.buttonText="Playback Rate",vjs.PlaybackRateMenuButton.prototype.className="vjs-playback-rate",vjs.PlaybackRateMenuButton.prototype.createEl=function(){var a=vjs.MenuButton.prototype.createEl.call(this);return this.labelEl_=vjs.createEl("div",{className:"vjs-playback-rate-value",innerHTML:1}),a.appendChild(this.labelEl_),a},vjs.PlaybackRateMenuButton.prototype.createMenu=function(){var a=new vjs.Menu(this.player()),b=this.player().options().playbackRates;if(b)for(var c=b.length-1;c>=0;c--)a.addChild(new vjs.PlaybackRateMenuItem(this.player(),{rate:b[c]+"x"}));
return a},vjs.PlaybackRateMenuButton.prototype.updateARIAAttributes=function(){this.el().setAttribute("aria-valuenow",this.player().playbackRate())},vjs.PlaybackRateMenuButton.prototype.onClick=function(){for(var a=this.player().playbackRate(),b=this.player().options().playbackRates,c=b[0],d=0;d<b.length;d++)if(b[d]>a){c=b[d];break}this.player().playbackRate(c)},vjs.PlaybackRateMenuButton.prototype.playbackRateSupported=function(){return this.player().tech&&this.player().tech.featuresPlaybackRate&&this.player().options().playbackRates&&this.player().options().playbackRates.length>0
},vjs.PlaybackRateMenuButton.prototype.updateVisibility=function(){this.playbackRateSupported()?this.removeClass("vjs-hidden"):this.addClass("vjs-hidden")},vjs.PlaybackRateMenuButton.prototype.updateLabel=function(){this.playbackRateSupported()&&(this.labelEl_.innerHTML=this.player().playbackRate()+"x")},vjs.PlaybackRateMenuItem=vjs.MenuItem.extend({contentElType:"button",init:function(a,b){var c=this.label=b.rate,d=this.rate=parseFloat(c,10);b.label=c,b.selected=1===d,vjs.MenuItem.call(this,a,b),this.on(a,"ratechange",this.update)
}}),vjs.PlaybackRateMenuItem.prototype.onClick=function(){vjs.MenuItem.prototype.onClick.call(this),this.player().playbackRate(this.rate)},vjs.PlaybackRateMenuItem.prototype.update=function(){this.selected(this.player().playbackRate()==this.rate)},vjs.PosterImage=vjs.Button.extend({init:function(a,b){vjs.Button.call(this,a,b),this.update(),a.on("posterchange",vjs.bind(this,this.update))}}),vjs.PosterImage.prototype.dispose=function(){this.player().off("posterchange",this.update),vjs.Button.prototype.dispose.call(this)
},vjs.PosterImage.prototype.createEl=function(){var a=vjs.createEl("div",{className:"vjs-poster",tabIndex:-1});return vjs.BACKGROUND_SIZE_SUPPORTED||(this.fallbackImg_=vjs.createEl("img"),a.appendChild(this.fallbackImg_)),a},vjs.PosterImage.prototype.update=function(){var a=this.player().poster();this.setSrc(a),a?this.show():this.hide()},vjs.PosterImage.prototype.setSrc=function(a){var b;this.fallbackImg_?this.fallbackImg_.src=a:(b="",a&&(b='url("'+a+'")'),this.el_.style.backgroundImage=b)},vjs.PosterImage.prototype.onClick=function(){this.player_.play()
},vjs.LoadingSpinner=vjs.Component.extend({init:function(a,b){vjs.Component.call(this,a,b)}}),vjs.LoadingSpinner.prototype.createEl=function(){return vjs.Component.prototype.createEl.call(this,"div",{className:"vjs-loading-spinner"})},vjs.BigPlayButton=vjs.Button.extend(),vjs.BigPlayButton.prototype.createEl=function(){return vjs.Button.prototype.createEl.call(this,"div",{className:"vjs-big-play-button",innerHTML:'<span aria-hidden="true"></span>',"aria-label":"play video"})},vjs.BigPlayButton.prototype.onClick=function(){this.player_.play()
},vjs.ErrorDisplay=vjs.Component.extend({init:function(a,b){vjs.Component.call(this,a,b),this.update(),this.on(a,"error",this.update)}}),vjs.ErrorDisplay.prototype.createEl=function(){var a=vjs.Component.prototype.createEl.call(this,"div",{className:"vjs-error-display"});return this.contentEl_=vjs.createEl("div"),a.appendChild(this.contentEl_),a},vjs.ErrorDisplay.prototype.update=function(){this.player().error()&&(this.contentEl_.innerHTML=this.localize(this.player().error().message))},function(){var a;vjs.MediaTechController=vjs.Component.extend({init:function(a,b,c){b=b||{},b.reportTouchActivity=!1,vjs.Component.call(this,a,b,c),this.featuresProgressEvents||this.manualProgressOn(),this.featuresTimeupdateEvents||this.manualTimeUpdatesOn(),this.initControlsListeners(),this.featuresNativeTextTracks||this.emulateTextTracks(),this.initTextTrackListeners()
}}),vjs.MediaTechController.prototype.initControlsListeners=function(){var a,b;a=this.player(),b=function(){a.controls()&&!a.usingNativeControls()&&this.addControlsListeners()},this.ready(b),this.on(a,"controlsenabled",b),this.on(a,"controlsdisabled",this.removeControlsListeners),this.ready(function(){this.networkState&&this.networkState()>0&&this.player().trigger("loadstart")})},vjs.MediaTechController.prototype.addControlsListeners=function(){var a;this.on("mousedown",this.onClick),this.on("touchstart",function(){a=this.player_.userActive()
}),this.on("touchmove",function(){a&&this.player().reportUserActivity()}),this.on("touchend",function(a){a.preventDefault()}),this.emitTapEvents(),this.on("tap",this.onTap)},vjs.MediaTechController.prototype.removeControlsListeners=function(){this.off("tap"),this.off("touchstart"),this.off("touchmove"),this.off("touchleave"),this.off("touchcancel"),this.off("touchend"),this.off("click"),this.off("mousedown")},vjs.MediaTechController.prototype.onClick=function(a){0===a.button&&this.player().controls()&&(this.player().paused()?this.player().play():this.player().pause())
},vjs.MediaTechController.prototype.onTap=function(){this.player().userActive(!this.player().userActive())},vjs.MediaTechController.prototype.manualProgressOn=function(){this.manualProgress=!0,this.trackProgress()},vjs.MediaTechController.prototype.manualProgressOff=function(){this.manualProgress=!1,this.stopTrackingProgress()},vjs.MediaTechController.prototype.trackProgress=function(){this.progressInterval=this.setInterval(function(){var a=this.player().bufferedPercent();this.bufferedPercent_!=a&&this.player().trigger("progress"),this.bufferedPercent_=a,1===a&&this.stopTrackingProgress()
},500)},vjs.MediaTechController.prototype.stopTrackingProgress=function(){this.clearInterval(this.progressInterval)},vjs.MediaTechController.prototype.manualTimeUpdatesOn=function(){var a=this.player_;this.manualTimeUpdates=!0,this.on(a,"play",this.trackCurrentTime),this.on(a,"pause",this.stopTrackingCurrentTime),this.one("timeupdate",function(){this.featuresTimeupdateEvents=!0,this.manualTimeUpdatesOff()})},vjs.MediaTechController.prototype.manualTimeUpdatesOff=function(){var a=this.player_;this.manualTimeUpdates=!1,this.stopTrackingCurrentTime(),this.off(a,"play",this.trackCurrentTime),this.off(a,"pause",this.stopTrackingCurrentTime)
},vjs.MediaTechController.prototype.trackCurrentTime=function(){this.currentTimeInterval&&this.stopTrackingCurrentTime(),this.currentTimeInterval=this.setInterval(function(){this.player().trigger("timeupdate")},250)},vjs.MediaTechController.prototype.stopTrackingCurrentTime=function(){this.clearInterval(this.currentTimeInterval),this.player().trigger("timeupdate")},vjs.MediaTechController.prototype.dispose=function(){this.manualProgress&&this.manualProgressOff(),this.manualTimeUpdates&&this.manualTimeUpdatesOff(),vjs.Component.prototype.dispose.call(this)
},vjs.MediaTechController.prototype.setCurrentTime=function(){this.manualTimeUpdates&&this.player().trigger("timeupdate")},vjs.MediaTechController.prototype.initTextTrackListeners=function(){var b,a=this.player_,c=function(){var b=a.getChild("textTrackDisplay");b&&b.updateDisplay()};b=this.textTracks(),b&&(b.addEventListener("removetrack",c),b.addEventListener("addtrack",c),this.on("dispose",vjs.bind(this,function(){b.removeEventListener("removetrack",c),b.removeEventListener("addtrack",c)})))},vjs.MediaTechController.prototype.emulateTextTracks=function(){var b,c,d,a=this.player_;
window.WebVTT||(d=document.createElement("script"),d.src=a.options()["vtt.js"]||"../node_modules/vtt.js/dist/vtt.js",a.el().appendChild(d),window.WebVTT=!0),c=this.textTracks(),c&&(b=function(){var b,c,d;for(d=a.getChild("textTrackDisplay"),d.updateDisplay(),b=0;b<this.length;b++)c=this[b],c.removeEventListener("cuechange",vjs.bind(d,d.updateDisplay)),"showing"===c.mode&&c.addEventListener("cuechange",vjs.bind(d,d.updateDisplay))},c.addEventListener("change",b),this.on("dispose",vjs.bind(this,function(){c.removeEventListener("change",b)
})))},vjs.MediaTechController.prototype.textTracks_,vjs.MediaTechController.prototype.textTracks=function(){return this.player_.textTracks_=this.player_.textTracks_||new vjs.TextTrackList,this.player_.textTracks_},vjs.MediaTechController.prototype.remoteTextTracks=function(){return this.player_.remoteTextTracks_=this.player_.remoteTextTracks_||new vjs.TextTrackList,this.player_.remoteTextTracks_},a=function(a,b,c,d,e){var g,f=a.textTracks();return e=e||{},e.kind=b,c&&(e.label=c),d&&(e.language=d),e.player=a.player_,g=new vjs.TextTrack(e),f.addTrack_(g),g
},vjs.MediaTechController.prototype.addTextTrack=function(b,c,d){if(!b)throw new Error("TextTrack kind is required but was not provided");return a(this,b,c,d)},vjs.MediaTechController.prototype.addRemoteTextTrack=function(b){var c=a(this,b.kind,b.label,b.language,b);return this.remoteTextTracks().addTrack_(c),{track:c}},vjs.MediaTechController.prototype.removeRemoteTextTrack=function(a){this.textTracks().removeTrack_(a),this.remoteTextTracks().removeTrack_(a)},vjs.MediaTechController.prototype.setPoster=function(){},vjs.MediaTechController.prototype.featuresVolumeControl=!0,vjs.MediaTechController.prototype.featuresFullscreenResize=!1,vjs.MediaTechController.prototype.featuresPlaybackRate=!1,vjs.MediaTechController.prototype.featuresProgressEvents=!1,vjs.MediaTechController.prototype.featuresTimeupdateEvents=!1,vjs.MediaTechController.prototype.featuresNativeTextTracks=!1,vjs.MediaTechController.withSourceHandlers=function(a){a.registerSourceHandler=function(b,c){var d=a.sourceHandlers;
d||(d=a.sourceHandlers=[]),void 0===c&&(c=d.length),d.splice(c,0,b)},a.selectSourceHandler=function(b){for(var d,c=a.sourceHandlers||[],e=0;e<c.length;e++)if(d=c[e].canHandleSource(b))return c[e];return null},a.canPlaySource=function(b){var c=a.selectSourceHandler(b);return c?c.canHandleSource(b):""},a.prototype.setSource=function(b){var c=a.selectSourceHandler(b);return this.disposeSourceHandler(),this.off("dispose",this.disposeSourceHandler),this.currentSource_=b,this.sourceHandler_=c.handleSource(b,this),this.on("dispose",this.disposeSourceHandler),this
},a.prototype.disposeSourceHandler=function(){this.sourceHandler_&&this.sourceHandler_.dispose&&this.sourceHandler_.dispose()}},vjs.media={}}(),vjs.Html5=vjs.MediaTechController.extend({init:function(a,b,c){var d,e,f,g,h,i;(b.nativeCaptions===!1||b.nativeTextTracks===!1)&&(this.featuresNativeTextTracks=!1),vjs.MediaTechController.call(this,a,b,c),this.setupTriggers();var j=b.source;if(j&&(this.el_.currentSrc!==j.src||a.tag&&3===a.tag.initNetworkState_)&&this.setSource(j),this.el_.hasChildNodes()){for(d=this.el_.childNodes,e=d.length,i=[];e--;)g=d[e],h=g.nodeName.toLowerCase(),"track"===h&&(this.featuresNativeTextTracks?this.remoteTextTracks().addTrack_(g.track):i.push(g));
for(f=0;f<i.length;f++)this.el_.removeChild(i[f])}this.featuresNativeTextTracks&&this.on("loadstart",vjs.bind(this,this.hideCaptions)),vjs.TOUCH_ENABLED&&a.options().nativeControlsForTouch===!0&&this.useNativeControls(),a.ready(function(){this.tag&&this.options_.autoplay&&this.paused()&&(delete this.tag.poster,this.play())}),this.triggerReady()}}),vjs.Html5.prototype.dispose=function(){vjs.Html5.disposeMediaElement(this.el_),vjs.MediaTechController.prototype.dispose.call(this)},vjs.Html5.prototype.createEl=function(){var b,c,d,f,h,a=this.player_,e=a.tag;
if(!e||this.movingMediaElementInDOM===!1){if(e?(h=e.cloneNode(!1),vjs.Html5.disposeMediaElement(e),e=h,a.tag=null):(e=vjs.createEl("video"),f=videojs.util.mergeOptions({},a.tagAttributes),vjs.TOUCH_ENABLED&&a.options().nativeControlsForTouch===!0||delete f.controls,vjs.setElementAttributes(e,vjs.obj.merge(f,{id:a.id()+"_html5_api","class":"vjs-tech"}))),e.player=a,a.options_.tracks)for(d=0;d<a.options_.tracks.length;d++)b=a.options_.tracks[d],c=document.createElement("track"),c.kind=b.kind,c.label=b.label,c.srclang=b.srclang,c.src=b.src,"default"in b&&c.setAttribute("default","default"),e.appendChild(c);
vjs.insertFirst(e,a.el())}var i=["autoplay","preload","loop","muted"];for(d=i.length-1;d>=0;d--){var j=i[d],k={};"undefined"!=typeof a.options_[j]&&(k[j]=a.options_[j]),vjs.setElementAttributes(e,k)}return e},vjs.Html5.prototype.hideCaptions=function(){for(var b,a=this.el_.textTracks,c=a.length,d={captions:1,subtitles:1};c--;)b=a[c],b&&b.kind in d&&(b.mode="disabled")},vjs.Html5.prototype.setupTriggers=function(){for(var a=vjs.Html5.Events.length-1;a>=0;a--)this.on(vjs.Html5.Events[a],this.eventHandler)},vjs.Html5.prototype.eventHandler=function(a){"error"==a.type&&this.error()?this.player().error(this.error().code):(a.bubbles=!1,this.player().trigger(a))
},vjs.Html5.prototype.useNativeControls=function(){var a,b,c,d,e;a=this,b=this.player(),a.setControls(b.controls()),c=function(){a.setControls(!0)},d=function(){a.setControls(!1)},b.on("controlsenabled",c),b.on("controlsdisabled",d),e=function(){b.off("controlsenabled",c),b.off("controlsdisabled",d)},a.on("dispose",e),b.on("usingcustomcontrols",e),b.usingNativeControls(!0)},vjs.Html5.prototype.play=function(){this.el_.play()},vjs.Html5.prototype.pause=function(){this.el_.pause()},vjs.Html5.prototype.paused=function(){return this.el_.paused
},vjs.Html5.prototype.currentTime=function(){return this.el_.currentTime},vjs.Html5.prototype.setCurrentTime=function(a){try{this.el_.currentTime=a}catch(b){vjs.log(b,"Video is not ready. (Video.js)")}},vjs.Html5.prototype.duration=function(){return this.el_.duration||0},vjs.Html5.prototype.buffered=function(){return this.el_.buffered},vjs.Html5.prototype.volume=function(){return this.el_.volume},vjs.Html5.prototype.setVolume=function(a){this.el_.volume=a},vjs.Html5.prototype.muted=function(){return this.el_.muted
},vjs.Html5.prototype.setMuted=function(a){this.el_.muted=a},vjs.Html5.prototype.width=function(){return this.el_.offsetWidth},vjs.Html5.prototype.height=function(){return this.el_.offsetHeight},vjs.Html5.prototype.supportsFullScreen=function(){return"function"!=typeof this.el_.webkitEnterFullScreen||!/Android/.test(vjs.USER_AGENT)&&/Chrome|Mac OS X 10.5/.test(vjs.USER_AGENT)?!1:!0},vjs.Html5.prototype.enterFullScreen=function(){var a=this.el_;"webkitDisplayingFullscreen"in a&&this.one("webkitbeginfullscreen",function(){this.player_.isFullscreen(!0),this.one("webkitendfullscreen",function(){this.player_.isFullscreen(!1),this.player_.trigger("fullscreenchange")
}),this.player_.trigger("fullscreenchange")}),a.paused&&a.networkState<=a.HAVE_METADATA?(this.el_.play(),this.setTimeout(function(){a.pause(),a.webkitEnterFullScreen()},0)):a.webkitEnterFullScreen()},vjs.Html5.prototype.exitFullScreen=function(){this.el_.webkitExitFullScreen()},vjs.Html5.prototype.src=function(a){return void 0===a?this.el_.src:(this.setSrc(a),void 0)},vjs.Html5.prototype.setSrc=function(a){this.el_.src=a},vjs.Html5.prototype.load=function(){this.el_.load()},vjs.Html5.prototype.currentSrc=function(){return this.el_.currentSrc
},vjs.Html5.prototype.poster=function(){return this.el_.poster},vjs.Html5.prototype.setPoster=function(a){this.el_.poster=a},vjs.Html5.prototype.preload=function(){return this.el_.preload},vjs.Html5.prototype.setPreload=function(a){this.el_.preload=a},vjs.Html5.prototype.autoplay=function(){return this.el_.autoplay},vjs.Html5.prototype.setAutoplay=function(a){this.el_.autoplay=a},vjs.Html5.prototype.controls=function(){return this.el_.controls},vjs.Html5.prototype.setControls=function(a){this.el_.controls=!!a
},vjs.Html5.prototype.loop=function(){return this.el_.loop},vjs.Html5.prototype.setLoop=function(a){this.el_.loop=a},vjs.Html5.prototype.error=function(){return this.el_.error},vjs.Html5.prototype.seeking=function(){return this.el_.seeking},vjs.Html5.prototype.ended=function(){return this.el_.ended},vjs.Html5.prototype.defaultMuted=function(){return this.el_.defaultMuted},vjs.Html5.prototype.playbackRate=function(){return this.el_.playbackRate},vjs.Html5.prototype.setPlaybackRate=function(a){this.el_.playbackRate=a
},vjs.Html5.prototype.networkState=function(){return this.el_.networkState},vjs.Html5.prototype.readyState=function(){return this.el_.readyState},vjs.Html5.prototype.textTracks=function(){return this.featuresNativeTextTracks?this.el_.textTracks:vjs.MediaTechController.prototype.textTracks.call(this)},vjs.Html5.prototype.addTextTrack=function(a,b,c){return this.featuresNativeTextTracks?this.el_.addTextTrack(a,b,c):vjs.MediaTechController.prototype.addTextTrack.call(this,a,b,c)},vjs.Html5.prototype.addRemoteTextTrack=function(a){if(!this.featuresNativeTextTracks)return vjs.MediaTechController.prototype.addRemoteTextTrack.call(this,a);
var b=document.createElement("track");return a=a||{},a.kind&&(b.kind=a.kind),a.label&&(b.label=a.label),(a.language||a.srclang)&&(b.srclang=a.language||a.srclang),a["default"]&&(b["default"]=a["default"]),a.id&&(b.id=a.id),a.src&&(b.src=a.src),this.el().appendChild(b),b.track.mode="metadata"===b.track.kind?"hidden":"disabled",b.onload=function(){var a=b.track;b.readyState>=2&&("metadata"===a.kind&&"hidden"!==a.mode?a.mode="hidden":"metadata"!==a.kind&&"disabled"!==a.mode&&(a.mode="disabled"),b.onload=null)},this.remoteTextTracks().addTrack_(b.track),b
},vjs.Html5.prototype.removeRemoteTextTrack=function(a){if(!this.featuresNativeTextTracks)return vjs.MediaTechController.prototype.removeRemoteTextTrack.call(this,a);var b,c;for(this.remoteTextTracks().removeTrack_(a),b=this.el().querySelectorAll("track"),c=0;c<b.length;c++)if(b[c]===a||b[c].track===a){b[c].parentNode.removeChild(b[c]);break}},vjs.Html5.isSupported=function(){try{vjs.TEST_VID.volume=.5}catch(a){return!1}return!!vjs.TEST_VID.canPlayType},vjs.MediaTechController.withSourceHandlers(vjs.Html5),vjs.Html5.nativeSourceHandler={},vjs.Html5.nativeSourceHandler.canHandleSource=function(a){function d(a){try{return vjs.TEST_VID.canPlayType(a)
}catch(b){return""}}var b,c;return a.type?d(a.type):a.src?(b=a.src.match(/\.([^.\/\?]+)(\?[^\/]+)?$/i),c=b&&b[1],d("video/"+c)):""},vjs.Html5.nativeSourceHandler.handleSource=function(a,b){b.setSrc(a.src)},vjs.Html5.nativeSourceHandler.dispose=function(){},vjs.Html5.registerSourceHandler(vjs.Html5.nativeSourceHandler),vjs.Html5.canControlVolume=function(){var a=vjs.TEST_VID.volume;return vjs.TEST_VID.volume=a/2+.1,a!==vjs.TEST_VID.volume},vjs.Html5.canControlPlaybackRate=function(){var a=vjs.TEST_VID.playbackRate;
return vjs.TEST_VID.playbackRate=a/2+.1,a!==vjs.TEST_VID.playbackRate},vjs.Html5.supportsNativeTextTracks=function(){var a;return a=!!vjs.TEST_VID.textTracks,a&&vjs.TEST_VID.textTracks.length>0&&(a="number"!=typeof vjs.TEST_VID.textTracks[0].mode),a&&vjs.IS_FIREFOX&&(a=!1),a},vjs.Html5.prototype.featuresVolumeControl=vjs.Html5.canControlVolume(),vjs.Html5.prototype.featuresPlaybackRate=vjs.Html5.canControlPlaybackRate(),vjs.Html5.prototype.movingMediaElementInDOM=!vjs.IS_IOS,vjs.Html5.prototype.featuresFullscreenResize=!0,vjs.Html5.prototype.featuresProgressEvents=!0,vjs.Html5.prototype.featuresNativeTextTracks=vjs.Html5.supportsNativeTextTracks(),function(){var a,b=/^application\/(?:x-|vnd\.apple\.)mpegurl/i,c=/^video\/mp4/i;
vjs.Html5.patchCanPlayType=function(){vjs.ANDROID_VERSION>=4&&(a||(a=vjs.TEST_VID.constructor.prototype.canPlayType),vjs.TEST_VID.constructor.prototype.canPlayType=function(c){return c&&b.test(c)?"maybe":a.call(this,c)}),vjs.IS_OLD_ANDROID&&(a||(a=vjs.TEST_VID.constructor.prototype.canPlayType),vjs.TEST_VID.constructor.prototype.canPlayType=function(b){return b&&c.test(b)?"maybe":a.call(this,b)})},vjs.Html5.unpatchCanPlayType=function(){var b=vjs.TEST_VID.constructor.prototype.canPlayType;return vjs.TEST_VID.constructor.prototype.canPlayType=a,a=null,b
},vjs.Html5.patchCanPlayType()}(),vjs.Html5.Events="loadstart,suspend,abort,error,emptied,stalled,loadedmetadata,loadeddata,canplay,canplaythrough,playing,waiting,seeking,seeked,ended,durationchange,timeupdate,progress,play,pause,ratechange,volumechange".split(","),vjs.Html5.disposeMediaElement=function(a){if(a){for(a.player=null,a.parentNode&&a.parentNode.removeChild(a);a.hasChildNodes();)a.removeChild(a.firstChild);a.removeAttribute("src"),"function"==typeof a.load&&!function(){try{a.load()}catch(b){}}()}},vjs.Flash=vjs.MediaTechController.extend({init:function(a,b,c){vjs.MediaTechController.call(this,a,b,c);
var d=b.source,e=b.parentEl,f=this.el_=vjs.createEl("div",{id:a.id()+"_temp_flash"}),g=a.id()+"_flash_api",h=a.options_,i=vjs.obj.merge({readyFunction:"videojs.Flash.onReady",eventProxyFunction:"videojs.Flash.onEvent",errorEventProxyFunction:"videojs.Flash.onError",autoplay:h.autoplay,preload:h.preload,loop:h.loop,muted:h.muted},b.flashVars),j=vjs.obj.merge({wmode:"opaque",bgcolor:"#000000"},b.params),k=vjs.obj.merge({id:g,name:g,"class":"vjs-tech"},b.attributes);d&&this.ready(function(){this.setSource(d)}),vjs.insertFirst(f,e),b.startTime&&this.ready(function(){this.load(),this.play(),this.currentTime(b.startTime)
}),vjs.IS_FIREFOX&&this.ready(function(){this.on("mousemove",function(){this.player().trigger({type:"mousemove",bubbles:!1})})}),a.on("stageclick",a.reportUserActivity),this.el_=vjs.Flash.embed(b.swf,f,i,j,k)}}),vjs.Flash.prototype.dispose=function(){vjs.MediaTechController.prototype.dispose.call(this)},vjs.Flash.prototype.play=function(){this.el_.vjs_play()},vjs.Flash.prototype.pause=function(){this.el_.vjs_pause()},vjs.Flash.prototype.src=function(a){return void 0===a?this.currentSrc():this.setSrc(a)},vjs.Flash.prototype.setSrc=function(a){if(a=vjs.getAbsoluteURL(a),this.el_.vjs_src(a),this.player_.autoplay()){var b=this;
this.setTimeout(function(){b.play()},0)}},vjs.Flash.prototype.setCurrentTime=function(a){this.lastSeekTarget_=a,this.el_.vjs_setProperty("currentTime",a),vjs.MediaTechController.prototype.setCurrentTime.call(this)},vjs.Flash.prototype.currentTime=function(){return this.seeking()?this.lastSeekTarget_||0:this.el_.vjs_getProperty("currentTime")},vjs.Flash.prototype.currentSrc=function(){return this.currentSource_?this.currentSource_.src:this.el_.vjs_getProperty("currentSrc")},vjs.Flash.prototype.load=function(){this.el_.vjs_load()
},vjs.Flash.prototype.poster=function(){this.el_.vjs_getProperty("poster")},vjs.Flash.prototype.setPoster=function(){},vjs.Flash.prototype.buffered=function(){return vjs.createTimeRange(0,this.el_.vjs_getProperty("buffered"))},vjs.Flash.prototype.supportsFullScreen=function(){return!1},vjs.Flash.prototype.enterFullScreen=function(){return!1},function(){function e(b){var c=b.charAt(0).toUpperCase()+b.slice(1);a["set"+c]=function(a){return this.el_.vjs_setProperty(b,a)}}function f(b){a[b]=function(){return this.el_.vjs_getProperty(b)
}}var d,a=vjs.Flash.prototype,b="rtmpConnection,rtmpStream,preload,defaultPlaybackRate,playbackRate,autoplay,loop,mediaGroup,controller,controls,volume,muted,defaultMuted".split(","),c="error,networkState,readyState,seeking,initialTime,duration,startOffsetTime,paused,played,seekable,ended,videoTracks,audioTracks,videoWidth,videoHeight".split(",");for(d=0;d<b.length;d++)f(b[d]),e(b[d]);for(d=0;d<c.length;d++)f(c[d])}(),vjs.Flash.isSupported=function(){return vjs.Flash.version()[0]>=10},vjs.MediaTechController.withSourceHandlers(vjs.Flash),vjs.Flash.nativeSourceHandler={},vjs.Flash.nativeSourceHandler.canHandleSource=function(a){var b;
return a.type?(b=a.type.replace(/;.*/,"").toLowerCase(),b in vjs.Flash.formats?"maybe":""):""},vjs.Flash.nativeSourceHandler.handleSource=function(a,b){b.setSrc(a.src)},vjs.Flash.nativeSourceHandler.dispose=function(){},vjs.Flash.registerSourceHandler(vjs.Flash.nativeSourceHandler),vjs.Flash.formats={"video/flv":"FLV","video/x-flv":"FLV","video/mp4":"MP4","video/m4v":"MP4"},vjs.Flash.onReady=function(a){var b,c;b=vjs.el(a),c=b&&b.parentNode&&b.parentNode.player,c&&(b.player=c,vjs.Flash.checkReady(c.tech))},vjs.Flash.checkReady=function(a){a.el()&&(a.el().vjs_getProperty?a.triggerReady():this.setTimeout(function(){vjs.Flash.checkReady(a)
},50))},vjs.Flash.onEvent=function(a,b){var c=vjs.el(a).player;c.trigger(b)},vjs.Flash.onError=function(a,b){var c=vjs.el(a).player,d="FLASH: "+b;"srcnotfound"==b?c.error({code:4,message:d}):c.error(d)},vjs.Flash.version=function(){var a="0,0,0";try{a=new window.ActiveXObject("ShockwaveFlash.ShockwaveFlash").GetVariable("$version").replace(/\D+/g,",").match(/^,?(.+),?$/)[1]}catch(b){try{navigator.mimeTypes["application/x-shockwave-flash"].enabledPlugin&&(a=(navigator.plugins["Shockwave Flash 2.0"]||navigator.plugins["Shockwave Flash"]).description.replace(/\D+/g,",").match(/^,?(.+),?$/)[1])
}catch(c){}}return a.split(",")},vjs.Flash.embed=function(a,b,c,d,e){var f=vjs.Flash.getEmbedCode(a,c,d,e),g=vjs.createEl("div",{innerHTML:f}).childNodes[0],h=b.parentNode;b.parentNode.replaceChild(g,b);var i=h.childNodes[0];return setTimeout(function(){i.style.display="block"},1e3),g},vjs.Flash.getEmbedCode=function(a,b,c,d){var e='<object type="application/x-shockwave-flash" ',f="",g="",h="";return b&&vjs.obj.each(b,function(a,b){f+=a+"="+b+"&amp;"}),c=vjs.obj.merge({movie:a,flashvars:f,allowScriptAccess:"always",allowNetworking:"all"},c),vjs.obj.each(c,function(a,b){g+='<param name="'+a+'" value="'+b+'" />'
}),d=vjs.obj.merge({data:a,width:"100%",height:"100%"},d),vjs.obj.each(d,function(a,b){h+=a+'="'+b+'" '}),e+h+">"+g+"</object>"},vjs.Flash.streamingFormats={"rtmp/mp4":"MP4","rtmp/flv":"FLV"},vjs.Flash.streamFromParts=function(a,b){return a+"&"+b},vjs.Flash.streamToParts=function(a){var b={connection:"",stream:""};if(!a)return b;var d,c=a.indexOf("&");return-1!==c?d=c+1:(c=d=a.lastIndexOf("/")+1,0===c&&(c=d=a.length)),b.connection=a.substring(0,c),b.stream=a.substring(d,a.length),b},vjs.Flash.isStreamingType=function(a){return a in vjs.Flash.streamingFormats
},vjs.Flash.RTMP_RE=/^rtmp[set]?:\/\//i,vjs.Flash.isStreamingSrc=function(a){return vjs.Flash.RTMP_RE.test(a)},vjs.Flash.rtmpSourceHandler={},vjs.Flash.rtmpSourceHandler.canHandleSource=function(a){return vjs.Flash.isStreamingType(a.type)||vjs.Flash.isStreamingSrc(a.src)?"maybe":""},vjs.Flash.rtmpSourceHandler.handleSource=function(a,b){var c=vjs.Flash.streamToParts(a.src);b.setRtmpConnection(c.connection),b.setRtmpStream(c.stream)},vjs.Flash.registerSourceHandler(vjs.Flash.rtmpSourceHandler),vjs.MediaLoader=vjs.Component.extend({init:function(a,b,c){if(vjs.Component.call(this,a,b,c),a.options_.sources&&0!==a.options_.sources.length)a.src(a.options_.sources);
else for(var d=0,e=a.options_.techOrder;d<e.length;d++){var f=vjs.capitalize(e[d]),g=window.videojs[f];if(g&&g.isSupported()){a.loadTech(f);break}}}}),vjs.TextTrackMode={disabled:"disabled",hidden:"hidden",showing:"showing"},vjs.TextTrackKind={subtitles:"subtitles",captions:"captions",descriptions:"descriptions",chapters:"chapters",metadata:"metadata"},function(){vjs.TextTrack=function(b){var d,e,f,g,h,i,j,k,l,m,n;if(b=b||{},!b.player)throw new Error("A player was not provided.");if(d=this,vjs.IS_IE8){d=document.createElement("custom");
for(n in vjs.TextTrack.prototype)d[n]=vjs.TextTrack.prototype[n]}return d.player_=b.player,f=vjs.TextTrackMode[b.mode]||"disabled",g=vjs.TextTrackKind[b.kind]||"subtitles",h=b.label||"",i=b.language||b.srclang||"",e=b.id||"vjs_text_track_"+vjs.guid++,("metadata"===g||"chapters"===g)&&(f="hidden"),d.cues_=[],d.activeCues_=[],j=new vjs.TextTrackCueList(d.cues_),k=new vjs.TextTrackCueList(d.activeCues_),m=!1,l=vjs.bind(d,function(){this.activeCues,m&&(this.trigger("cuechange"),m=!1)}),"disabled"!==f&&d.player_.on("timeupdate",l),Object.defineProperty(d,"kind",{get:function(){return g
},set:Function.prototype}),Object.defineProperty(d,"label",{get:function(){return h},set:Function.prototype}),Object.defineProperty(d,"language",{get:function(){return i},set:Function.prototype}),Object.defineProperty(d,"id",{get:function(){return e},set:Function.prototype}),Object.defineProperty(d,"mode",{get:function(){return f},set:function(a){vjs.TextTrackMode[a]&&(f=a,"showing"===f&&this.player_.on("timeupdate",l),this.trigger("modechange"))}}),Object.defineProperty(d,"cues",{get:function(){return this.loaded_?j:null
},set:Function.prototype}),Object.defineProperty(d,"activeCues",{get:function(){var a,b,d,e,f;if(!this.loaded_)return null;if(0===this.cues.length)return k;for(e=this.player_.currentTime(),a=0,b=this.cues.length,d=[];b>a;a++)f=this.cues[a],f.startTime<=e&&f.endTime>=e?d.push(f):f.startTime===f.endTime&&f.startTime<=e&&f.startTime+.5>=e&&d.push(f);if(m=!1,d.length!==this.activeCues_.length)m=!0;else for(a=0;a<d.length;a++)-1===c.call(this.activeCues_,d[a])&&(m=!0);return this.activeCues_=d,k.setCues_(this.activeCues_),k
},set:Function.prototype}),b.src?a(b.src,d):d.loaded_=!0,vjs.IS_IE8?d:void 0},vjs.TextTrack.prototype=vjs.obj.create(vjs.EventEmitter.prototype),vjs.TextTrack.prototype.constructor=vjs.TextTrack,vjs.TextTrack.prototype.allowedEvents_={cuechange:"cuechange"},vjs.TextTrack.prototype.addCue=function(a){var b=this.player_.textTracks(),c=0;if(b)for(;c<b.length;c++)b[c]!==this&&b[c].removeCue(a);this.cues_.push(a),this.cues.setCues_(this.cues_)},vjs.TextTrack.prototype.removeCue=function(a){for(var d,b=0,c=this.cues_.length,e=!1;c>b;b++)d=this.cues_[b],d===a&&(this.cues_.splice(b,1),e=!0);
e&&this.cues.setCues_(this.cues_)};var a,b,c;a=function(a,c){vjs.xhr(a,vjs.bind(this,function(a,d,e){return a?vjs.log.error(a):(c.loaded_=!0,b(e,c),void 0)}))},b=function(a,c){if("function"!=typeof window.WebVTT)return window.setTimeout(function(){b(a,c)},25);var d=new window.WebVTT.Parser(window,window.vttjs,window.WebVTT.StringDecoder());d.oncue=function(a){c.addCue(a)},d.onparsingerror=function(a){vjs.log.error(a)},d.parse(a),d.flush()},c=function(a,b){var c;if(null==this)throw new TypeError('"this" is null or not defined');
var d=Object(this),e=d.length>>>0;if(0===e)return-1;var f=+b||0;if(1/0===Math.abs(f)&&(f=0),f>=e)return-1;for(c=Math.max(f>=0?f:e-Math.abs(f),0);e>c;){if(c in d&&d[c]===a)return c;c++}return-1}}(),vjs.TextTrackList=function(a){var c,b=this,d=0;if(vjs.IS_IE8){b=document.createElement("custom");for(c in vjs.TextTrackList.prototype)b[c]=vjs.TextTrackList.prototype[c]}for(a=a||[],b.tracks_=[],Object.defineProperty(b,"length",{get:function(){return this.tracks_.length}});d<a.length;d++)b.addTrack_(a[d]);return vjs.IS_IE8?b:void 0
},vjs.TextTrackList.prototype=vjs.obj.create(vjs.EventEmitter.prototype),vjs.TextTrackList.prototype.constructor=vjs.TextTrackList,vjs.TextTrackList.prototype.allowedEvents_={change:"change",addtrack:"addtrack",removetrack:"removetrack"},function(){var a;for(a in vjs.TextTrackList.prototype.allowedEvents_)vjs.TextTrackList.prototype["on"+a]=null}(),vjs.TextTrackList.prototype.addTrack_=function(a){var b=this.tracks_.length;""+b in this||Object.defineProperty(this,b,{get:function(){return this.tracks_[b]}}),a.addEventListener("modechange",vjs.bind(this,function(){this.trigger("change")
})),this.tracks_.push(a),this.trigger({type:"addtrack",track:a})},vjs.TextTrackList.prototype.removeTrack_=function(a){for(var e,b=0,c=this.length;c>b;b++)if(e=this[b],e===a){this.tracks_.splice(b,1);break}this.trigger({type:"removetrack",track:a})},vjs.TextTrackList.prototype.getTrackById=function(a){for(var e,b=0,c=this.length,d=null;c>b;b++)if(e=this[b],e.id===a){d=e;break}return d},vjs.TextTrackCueList=function(a){var c,b=this;if(vjs.IS_IE8){b=document.createElement("custom");for(c in vjs.TextTrackCueList.prototype)b[c]=vjs.TextTrackCueList.prototype[c]
}return vjs.TextTrackCueList.prototype.setCues_.call(b,a),Object.defineProperty(b,"length",{get:function(){return this.length_}}),vjs.IS_IE8?b:void 0},vjs.TextTrackCueList.prototype.setCues_=function(a){var e,b=this.length||0,c=0,d=a.length;if(this.cues_=a,this.length_=a.length,e=function(a){""+a in this||Object.defineProperty(this,""+a,{get:function(){return this.cues_[a]}})},d>b)for(c=b;d>c;c++)e.call(this,c)},vjs.TextTrackCueList.prototype.getCueById=function(a){for(var e,b=0,c=this.length,d=null;c>b;b++)if(e=this[b],e.id===a){d=e;
break}return d},function(){"use strict";vjs.TextTrackDisplay=vjs.Component.extend({init:function(a,b,c){vjs.Component.call(this,a,b,c),a.on("loadstart",vjs.bind(this,this.toggleDisplay)),a.ready(vjs.bind(this,function(){if(a.tech&&a.tech.featuresNativeTextTracks)return this.hide(),void 0;var b,c,d;for(a.on("fullscreenchange",vjs.bind(this,this.updateDisplay)),c=a.options_.tracks||[],b=0;b<c.length;b++)d=c[b],this.player_.addRemoteTextTrack(d)}))}}),vjs.TextTrackDisplay.prototype.toggleDisplay=function(){this.player_.tech&&this.player_.tech.featuresNativeTextTracks?this.hide():this.show()
},vjs.TextTrackDisplay.prototype.createEl=function(){return vjs.Component.prototype.createEl.call(this,"div",{className:"vjs-text-track-display"})},vjs.TextTrackDisplay.prototype.clearDisplay=function(){"function"==typeof window.WebVTT&&window.WebVTT.processCues(window,[],this.el_)};var a=function(a,b){return"rgba("+parseInt(a[1]+a[1],16)+","+parseInt(a[2]+a[2],16)+","+parseInt(a[3]+a[3],16)+","+b+")"},b="#222",c="#ccc",d={monospace:"monospace",sansSerif:"sans-serif",serif:"serif",monospaceSansSerif:'"Andale Mono", "Lucida Console", monospace',monospaceSerif:'"Courier New", monospace',proportionalSansSerif:"sans-serif",proportionalSerif:"serif",casual:'"Comic Sans MS", Impact, fantasy',script:'"Monotype Corsiva", cursive',smallcaps:'"Andale Mono", "Lucida Console", monospace, sans-serif'},e=function(a,b,c){try{a.style[b]=c
}catch(d){}};vjs.TextTrackDisplay.prototype.updateDisplay=function(){var c,a=this.player_.textTracks(),b=0;if(this.clearDisplay(),a)for(;b<a.length;b++)c=a[b],"showing"===c.mode&&this.updateForTrack(c)},vjs.TextTrackDisplay.prototype.updateForTrack=function(f){if("function"==typeof window.WebVTT&&f.activeCues){for(var i,k,g=0,j=this.player_.textTrackSettings.getValues(),l=[];g<f.activeCues.length;g++)l.push(f.activeCues[g]);for(window.WebVTT.processCues(window,f.activeCues,this.el_),g=l.length;g--;)i=l[g].displayState,j.color&&(i.firstChild.style.color=j.color),j.textOpacity&&e(i.firstChild,"color",a(j.color||"#fff",j.textOpacity)),j.backgroundColor&&(i.firstChild.style.backgroundColor=j.backgroundColor),j.backgroundOpacity&&e(i.firstChild,"backgroundColor",a(j.backgroundColor||"#000",j.backgroundOpacity)),j.windowColor&&(j.windowOpacity?e(i,"backgroundColor",a(j.windowColor,j.windowOpacity)):i.style.backgroundColor=j.windowColor),j.edgeStyle&&("dropshadow"===j.edgeStyle?i.firstChild.style.textShadow="2px 2px 3px "+b+", 2px 2px 4px "+b+", 2px 2px 5px "+b:"raised"===j.edgeStyle?i.firstChild.style.textShadow="1px 1px "+b+", 2px 2px "+b+", 3px 3px "+b:"depressed"===j.edgeStyle?i.firstChild.style.textShadow="1px 1px "+c+", 0 1px "+c+", -1px -1px "+b+", 0 -1px "+b:"uniform"===j.edgeStyle&&(i.firstChild.style.textShadow="0 0 4px "+b+", 0 0 4px "+b+", 0 0 4px "+b+", 0 0 4px "+b)),j.fontPercent&&1!==j.fontPercent&&(k=window.parseFloat(i.style.fontSize),i.style.fontSize=k*j.fontPercent+"px",i.style.height="auto",i.style.top="auto",i.style.bottom="2px"),j.fontFamily&&"default"!==j.fontFamily&&("small-caps"===j.fontFamily?i.firstChild.style.fontVariant="small-caps":i.firstChild.style.fontFamily=d[j.fontFamily])
}},vjs.TextTrackMenuItem=vjs.MenuItem.extend({init:function(a,b){var e,f,c=this.track=b.track,d=a.textTracks();d&&(e=vjs.bind(this,function(){var b,c,e,a="showing"===this.track.mode;if(this instanceof vjs.OffTextTrackMenuItem)for(a=!0,c=0,e=d.length;e>c;c++)if(b=d[c],b.kind===this.track.kind&&"showing"===b.mode){a=!1;break}this.selected(a)}),d.addEventListener("change",e),a.on("dispose",function(){d.removeEventListener("change",e)})),b.label=c.label||c.language||"Unknown",b.selected=c["default"]||"showing"===c.mode,vjs.MenuItem.call(this,a,b),d&&void 0===d.onchange&&this.on(["tap","click"],function(){if("object"!=typeof window.Event)try{f=new window.Event("change")
}catch(a){}f||(f=document.createEvent("Event"),f.initEvent("change",!0,!0)),d.dispatchEvent(f)})}}),vjs.TextTrackMenuItem.prototype.onClick=function(){var d,a=this.track.kind,b=this.player_.textTracks(),e=0;if(vjs.MenuItem.prototype.onClick.call(this),b)for(;e<b.length;e++)d=b[e],d.kind===a&&(d.mode=d===this.track?"showing":"disabled")},vjs.OffTextTrackMenuItem=vjs.TextTrackMenuItem.extend({init:function(a,b){b.track={kind:b.kind,player:a,label:b.kind+" off","default":!1,mode:"disabled"},vjs.TextTrackMenuItem.call(this,a,b),this.selected(!0)
}}),vjs.CaptionSettingsMenuItem=vjs.TextTrackMenuItem.extend({init:function(a,b){b.track={kind:b.kind,player:a,label:b.kind+" settings","default":!1,mode:"disabled"},vjs.TextTrackMenuItem.call(this,a,b),this.addClass("vjs-texttrack-settings")}}),vjs.CaptionSettingsMenuItem.prototype.onClick=function(){this.player().getChild("textTrackSettings").show()},vjs.TextTrackButton=vjs.MenuButton.extend({init:function(a,b){var c,d;vjs.MenuButton.call(this,a,b),c=this.player_.textTracks(),this.items.length<=1&&this.hide(),c&&(d=vjs.bind(this,this.update),c.addEventListener("removetrack",d),c.addEventListener("addtrack",d),this.player_.on("dispose",function(){c.removeEventListener("removetrack",d),c.removeEventListener("addtrack",d)
}))}}),vjs.TextTrackButton.prototype.createItems=function(){var b,c,a=[];if(!(this instanceof vjs.CaptionsButton)||this.player().tech&&this.player().tech.featuresNativeTextTracks||a.push(new vjs.CaptionSettingsMenuItem(this.player_,{kind:this.kind_})),a.push(new vjs.OffTextTrackMenuItem(this.player_,{kind:this.kind_})),c=this.player_.textTracks(),!c)return a;for(var d=0;d<c.length;d++)b=c[d],b.kind===this.kind_&&a.push(new vjs.TextTrackMenuItem(this.player_,{track:b}));return a},vjs.CaptionsButton=vjs.TextTrackButton.extend({init:function(a,b,c){vjs.TextTrackButton.call(this,a,b,c),this.el_.setAttribute("aria-label","Captions Menu")
}}),vjs.CaptionsButton.prototype.kind_="captions",vjs.CaptionsButton.prototype.buttonText="Captions",vjs.CaptionsButton.prototype.className="vjs-captions-button",vjs.CaptionsButton.prototype.update=function(){var a=2;vjs.TextTrackButton.prototype.update.call(this),this.player().tech&&this.player().tech.featuresNativeTextTracks&&(a=1),this.items&&this.items.length>a?this.show():this.hide()},vjs.SubtitlesButton=vjs.TextTrackButton.extend({init:function(a,b,c){vjs.TextTrackButton.call(this,a,b,c),this.el_.setAttribute("aria-label","Subtitles Menu")
}}),vjs.SubtitlesButton.prototype.kind_="subtitles",vjs.SubtitlesButton.prototype.buttonText="Subtitles",vjs.SubtitlesButton.prototype.className="vjs-subtitles-button",vjs.ChaptersButton=vjs.TextTrackButton.extend({init:function(a,b,c){vjs.TextTrackButton.call(this,a,b,c),this.el_.setAttribute("aria-label","Chapters Menu")}}),vjs.ChaptersButton.prototype.kind_="chapters",vjs.ChaptersButton.prototype.buttonText="Chapters",vjs.ChaptersButton.prototype.className="vjs-chapters-button",vjs.ChaptersButton.prototype.createItems=function(){var b,c,a=[];
if(c=this.player_.textTracks(),!c)return a;for(var d=0;d<c.length;d++)b=c[d],b.kind===this.kind_&&a.push(new vjs.TextTrackMenuItem(this.player_,{track:b}));return a},vjs.ChaptersButton.prototype.createMenu=function(){for(var d,e,a=this.player_.textTracks()||[],b=0,c=a.length,f=this.items=[];c>b;b++)if(d=a[b],d.kind==this.kind_){if(d.cues){e=d;break}d.mode="hidden",window.setTimeout(vjs.bind(this,function(){this.createMenu()}),100)}var g=this.menu;if(void 0===g&&(g=new vjs.Menu(this.player_),g.contentEl().appendChild(vjs.createEl("li",{className:"vjs-menu-title",innerHTML:vjs.capitalize(this.kind_),tabindex:-1}))),e){var i,j,h=e.cues;
for(b=0,c=h.length;c>b;b++)i=h[b],j=new vjs.ChaptersTrackMenuItem(this.player_,{track:e,cue:i}),f.push(j),g.addChild(j);this.addChild(g)}return this.items.length>0&&this.show(),g},vjs.ChaptersTrackMenuItem=vjs.MenuItem.extend({init:function(a,b){var c=this.track=b.track,d=this.cue=b.cue,e=a.currentTime();b.label=d.text,b.selected=d.startTime<=e&&e<d.endTime,vjs.MenuItem.call(this,a,b),c.addEventListener("cuechange",vjs.bind(this,this.update))}}),vjs.ChaptersTrackMenuItem.prototype.onClick=function(){vjs.MenuItem.prototype.onClick.call(this),this.player_.currentTime(this.cue.startTime),this.update(this.cue.startTime)
},vjs.ChaptersTrackMenuItem.prototype.update=function(){var a=this.cue,b=this.player_.currentTime();this.selected(a.startTime<=b&&b<a.endTime)}}(),function(){"use strict";function a(a){var b;return a.selectedOptions?b=a.selectedOptions[0]:a.options&&(b=a.options[a.options.selectedIndex]),b.value}function b(a,b){var c,d;if(b){for(c=0;c<a.options.length&&(d=a.options[c],d.value!==b);c++);a.selectedIndex=c}}function c(){return'<div class="vjs-tracksettings"><div class="vjs-tracksettings-colors"><div class="vjs-fg-color vjs-tracksetting"><label class="vjs-label">Foreground</label><select><option value="">---</option><option value="#FFF">White</option><option value="#000">Black</option><option value="#F00">Red</option><option value="#0F0">Green</option><option value="#00F">Blue</option><option value="#FF0">Yellow</option><option value="#F0F">Magenta</option><option value="#0FF">Cyan</option></select><span class="vjs-text-opacity vjs-opacity"><select><option value="">---</option><option value="1">Opaque</option><option value="0.5">Semi-Opaque</option></select></span></div><div class="vjs-bg-color vjs-tracksetting"><label class="vjs-label">Background</label><select><option value="">---</option><option value="#FFF">White</option><option value="#000">Black</option><option value="#F00">Red</option><option value="#0F0">Green</option><option value="#00F">Blue</option><option value="#FF0">Yellow</option><option value="#F0F">Magenta</option><option value="#0FF">Cyan</option></select><span class="vjs-bg-opacity vjs-opacity"><select><option value="">---</option><option value="1">Opaque</option><option value="0.5">Semi-Transparent</option><option value="0">Transparent</option></select></span></div><div class="window-color vjs-tracksetting"><label class="vjs-label">Window</label><select><option value="">---</option><option value="#FFF">White</option><option value="#000">Black</option><option value="#F00">Red</option><option value="#0F0">Green</option><option value="#00F">Blue</option><option value="#FF0">Yellow</option><option value="#F0F">Magenta</option><option value="#0FF">Cyan</option></select><span class="vjs-window-opacity vjs-opacity"><select><option value="">---</option><option value="1">Opaque</option><option value="0.5">Semi-Transparent</option><option value="0">Transparent</option></select></span></div></div><div class="vjs-tracksettings-font"><div class="vjs-font-percent vjs-tracksetting"><label class="vjs-label">Font Size</label><select><option value="0.50">50%</option><option value="0.75">75%</option><option value="1.00" selected>100%</option><option value="1.25">125%</option><option value="1.50">150%</option><option value="1.75">175%</option><option value="2.00">200%</option><option value="3.00">300%</option><option value="4.00">400%</option></select></div><div class="vjs-edge-style vjs-tracksetting"><label class="vjs-label">Text Edge Style</label><select><option value="none">None</option><option value="raised">Raised</option><option value="depressed">Depressed</option><option value="uniform">Uniform</option><option value="dropshadow">Dropshadow</option></select></div><div class="vjs-font-family vjs-tracksetting"><label class="vjs-label">Font Family</label><select><option value="">Default</option><option value="monospaceSerif">Monospace Serif</option><option value="proportionalSerif">Proportional Serif</option><option value="monospaceSansSerif">Monospace Sans-Serif</option><option value="proportionalSansSerif">Proportional Sans-Serif</option><option value="casual">Casual</option><option value="script">Script</option><option value="small-caps">Small Caps</option></select></div></div></div><div class="vjs-tracksettings-controls"><button class="vjs-default-button">Defaults</button><button class="vjs-done-button">Done</button></div>'
}vjs.TextTrackSettings=vjs.Component.extend({init:function(a,b){vjs.Component.call(this,a,b),this.hide(),vjs.on(this.el().querySelector(".vjs-done-button"),"click",vjs.bind(this,function(){this.saveSettings(),this.hide()})),vjs.on(this.el().querySelector(".vjs-default-button"),"click",vjs.bind(this,function(){this.el().querySelector(".vjs-fg-color > select").selectedIndex=0,this.el().querySelector(".vjs-bg-color > select").selectedIndex=0,this.el().querySelector(".window-color > select").selectedIndex=0,this.el().querySelector(".vjs-text-opacity > select").selectedIndex=0,this.el().querySelector(".vjs-bg-opacity > select").selectedIndex=0,this.el().querySelector(".vjs-window-opacity > select").selectedIndex=0,this.el().querySelector(".vjs-edge-style select").selectedIndex=0,this.el().querySelector(".vjs-font-family select").selectedIndex=0,this.el().querySelector(".vjs-font-percent select").selectedIndex=2,this.updateDisplay()
})),vjs.on(this.el().querySelector(".vjs-fg-color > select"),"change",vjs.bind(this,this.updateDisplay)),vjs.on(this.el().querySelector(".vjs-bg-color > select"),"change",vjs.bind(this,this.updateDisplay)),vjs.on(this.el().querySelector(".window-color > select"),"change",vjs.bind(this,this.updateDisplay)),vjs.on(this.el().querySelector(".vjs-text-opacity > select"),"change",vjs.bind(this,this.updateDisplay)),vjs.on(this.el().querySelector(".vjs-bg-opacity > select"),"change",vjs.bind(this,this.updateDisplay)),vjs.on(this.el().querySelector(".vjs-window-opacity > select"),"change",vjs.bind(this,this.updateDisplay)),vjs.on(this.el().querySelector(".vjs-font-percent select"),"change",vjs.bind(this,this.updateDisplay)),vjs.on(this.el().querySelector(".vjs-edge-style select"),"change",vjs.bind(this,this.updateDisplay)),vjs.on(this.el().querySelector(".vjs-font-family select"),"change",vjs.bind(this,this.updateDisplay)),a.options().persistTextTrackSettings&&this.restoreSettings()
}}),vjs.TextTrackSettings.prototype.createEl=function(){return vjs.Component.prototype.createEl.call(this,"div",{className:"vjs-caption-settings vjs-modal-overlay",innerHTML:c()})},vjs.TextTrackSettings.prototype.getValues=function(){var b,c,d,e,f,g,h,i,j,k,l,m;b=this.el(),f=a(b.querySelector(".vjs-edge-style select")),g=a(b.querySelector(".vjs-font-family select")),h=a(b.querySelector(".vjs-fg-color > select")),d=a(b.querySelector(".vjs-text-opacity > select")),i=a(b.querySelector(".vjs-bg-color > select")),c=a(b.querySelector(".vjs-bg-opacity > select")),j=a(b.querySelector(".window-color > select")),e=a(b.querySelector(".vjs-window-opacity > select")),m=window.parseFloat(a(b.querySelector(".vjs-font-percent > select"))),k={backgroundOpacity:c,textOpacity:d,windowOpacity:e,edgeStyle:f,fontFamily:g,color:h,backgroundColor:i,windowColor:j,fontPercent:m};
for(l in k)(""===k[l]||"none"===k[l]||"fontPercent"===l&&1===k[l])&&delete k[l];return k},vjs.TextTrackSettings.prototype.setValues=function(a){var d,c=this.el();b(c.querySelector(".vjs-edge-style select"),a.edgeStyle),b(c.querySelector(".vjs-font-family select"),a.fontFamily),b(c.querySelector(".vjs-fg-color > select"),a.color),b(c.querySelector(".vjs-text-opacity > select"),a.textOpacity),b(c.querySelector(".vjs-bg-color > select"),a.backgroundColor),b(c.querySelector(".vjs-bg-opacity > select"),a.backgroundOpacity),b(c.querySelector(".window-color > select"),a.windowColor),b(c.querySelector(".vjs-window-opacity > select"),a.windowOpacity),d=a.fontPercent,d&&(d=d.toFixed(2)),b(c.querySelector(".vjs-font-percent > select"),d)
},vjs.TextTrackSettings.prototype.restoreSettings=function(){var a;try{a=JSON.parse(window.localStorage.getItem("vjs-text-track-settings"))}catch(b){}a&&this.setValues(a)},vjs.TextTrackSettings.prototype.saveSettings=function(){var a;if(this.player_.options().persistTextTrackSettings){a=this.getValues();try{vjs.isEmpty(a)?window.localStorage.removeItem("vjs-text-track-settings"):window.localStorage.setItem("vjs-text-track-settings",JSON.stringify(a))}catch(b){}}},vjs.TextTrackSettings.prototype.updateDisplay=function(){var a=this.player_.getChild("textTrackDisplay");
a&&a.updateDisplay()}}(),vjs.JSON,"undefined"!=typeof window.JSON&&"function"==typeof window.JSON.parse)vjs.JSON=window.JSON;else{vjs.JSON={};var cx=/[\u0000\u00ad\u0600-\u0604\u070f\u17b4\u17b5\u200c-\u200f\u2028-\u202f\u2060-\u206f\ufeff\ufff0-\uffff]/g;vjs.JSON.parse=function(text,reviver){function walk(a,b){var c,d,e=a[b];if(e&&"object"==typeof e)for(c in e)Object.prototype.hasOwnProperty.call(e,c)&&(d=walk(e,c),void 0!==d?e[c]=d:delete e[c]);return reviver.call(a,b,e)}var j;if(text=String(text),cx.lastIndex=0,cx.test(text)&&(text=text.replace(cx,function(a){return"\\u"+("0000"+a.charCodeAt(0).toString(16)).slice(-4)
})),/^[\],:{}\s]*$/.test(text.replace(/\\(?:["\\\/bfnrt]|u[0-9a-fA-F]{4})/g,"@").replace(/"[^"\\\n\r]*"|true|false|null|-?\d+(?:\.\d*)?(?:[eE][+\-]?\d+)?/g,"]").replace(/(?:^|:|,)(?:\s*\[)+/g,"")))return j=eval("("+text+")"),"function"==typeof reviver?walk({"":j},""):j;throw new SyntaxError("JSON.parse(): invalid or malformed JSON data")}}vjs.autoSetup=function(){var a,b,c,d,e,f=document.getElementsByTagName("video"),g=document.getElementsByTagName("audio"),h=[];if(f&&f.length>0)for(d=0,e=f.length;e>d;d++)h.push(f[d]);
if(g&&g.length>0)for(d=0,e=g.length;e>d;d++)h.push(g[d]);if(h&&h.length>0)for(d=0,e=h.length;e>d;d++){if(b=h[d],!b||!b.getAttribute){vjs.autoSetupTimeout(1);break}void 0===b.player&&(a=b.getAttribute("data-setup"),null!==a&&(c=videojs(b)))}else vjs.windowLoaded||vjs.autoSetupTimeout(1)},vjs.autoSetupTimeout=function(a){setTimeout(vjs.autoSetup,a)},"complete"===document.readyState?vjs.windowLoaded=!0:vjs.one(window,"load",function(){vjs.windowLoaded=!0}),vjs.autoSetupTimeout(1),vjs.plugin=function(a,b){vjs.Player.prototype[a]=b
},function(a){var b=a.vttjs={},c=b.VTTCue,d=b.VTTRegion,e=a.VTTCue,f=a.VTTRegion;b.shim=function(){b.VTTCue=c,b.VTTRegion=d},b.restore=function(){b.VTTCue=e,b.VTTRegion=f}}(this),function(a,b){function f(a){if("string"!=typeof a)return!1;var b=d[a.toLowerCase()];return b?a.toLowerCase():!1}function g(a){if("string"!=typeof a)return!1;var b=e[a.toLowerCase()];return b?a.toLowerCase():!1}function h(a){for(var b=1;b<arguments.length;b++){var c=arguments[b];for(var d in c)a[d]=c[d]}return a}function i(a,b,d){var e=this,i=/MSIE\s8\.0/.test(navigator.userAgent),j={};
i?e=document.createElement("custom"):j.enumerable=!0,e.hasBeenReset=!1;var k="",l=!1,m=a,n=b,o=d,p=null,q="",r=!0,s="auto",t="start",u=50,v="middle",w=50,x="middle";return Object.defineProperty(e,"id",h({},j,{get:function(){return k},set:function(a){k=""+a}})),Object.defineProperty(e,"pauseOnExit",h({},j,{get:function(){return l},set:function(a){l=!!a}})),Object.defineProperty(e,"startTime",h({},j,{get:function(){return m},set:function(a){if("number"!=typeof a)throw new TypeError("Start time must be set to a number.");
m=a,this.hasBeenReset=!0}})),Object.defineProperty(e,"endTime",h({},j,{get:function(){return n},set:function(a){if("number"!=typeof a)throw new TypeError("End time must be set to a number.");n=a,this.hasBeenReset=!0}})),Object.defineProperty(e,"text",h({},j,{get:function(){return o},set:function(a){o=""+a,this.hasBeenReset=!0}})),Object.defineProperty(e,"region",h({},j,{get:function(){return p},set:function(a){p=a,this.hasBeenReset=!0}})),Object.defineProperty(e,"vertical",h({},j,{get:function(){return q},set:function(a){var b=f(a);
if(b===!1)throw new SyntaxError("An invalid or illegal string was specified.");q=b,this.hasBeenReset=!0}})),Object.defineProperty(e,"snapToLines",h({},j,{get:function(){return r},set:function(a){r=!!a,this.hasBeenReset=!0}})),Object.defineProperty(e,"line",h({},j,{get:function(){return s},set:function(a){if("number"!=typeof a&&a!==c)throw new SyntaxError("An invalid number or illegal string was specified.");s=a,this.hasBeenReset=!0}})),Object.defineProperty(e,"lineAlign",h({},j,{get:function(){return t},set:function(a){var b=g(a);
if(!b)throw new SyntaxError("An invalid or illegal string was specified.");t=b,this.hasBeenReset=!0}})),Object.defineProperty(e,"position",h({},j,{get:function(){return u},set:function(a){if(0>a||a>100)throw new Error("Position must be between 0 and 100.");u=a,this.hasBeenReset=!0}})),Object.defineProperty(e,"positionAlign",h({},j,{get:function(){return v},set:function(a){var b=g(a);if(!b)throw new SyntaxError("An invalid or illegal string was specified.");v=b,this.hasBeenReset=!0}})),Object.defineProperty(e,"size",h({},j,{get:function(){return w
},set:function(a){if(0>a||a>100)throw new Error("Size must be between 0 and 100.");w=a,this.hasBeenReset=!0}})),Object.defineProperty(e,"align",h({},j,{get:function(){return x},set:function(a){var b=g(a);if(!b)throw new SyntaxError("An invalid or illegal string was specified.");x=b,this.hasBeenReset=!0}})),e.displayState=void 0,i?e:void 0}var c="auto",d={"":!0,lr:!0,rl:!0},e={start:!0,middle:!0,end:!0,left:!0,right:!0};i.prototype.getCueAsHTML=function(){return WebVTT.convertCueToDOMTree(window,this.text)},a.VTTCue=a.VTTCue||i,b.VTTCue=i
}(this,this.vttjs||{}),function(a,b){function d(a){if("string"!=typeof a)return!1;var b=c[a.toLowerCase()];return b?a.toLowerCase():!1}function e(a){return"number"==typeof a&&a>=0&&100>=a}function f(){var a=100,b=3,c=0,f=100,g=0,h=100,i="";Object.defineProperties(this,{width:{enumerable:!0,get:function(){return a},set:function(b){if(!e(b))throw new Error("Width must be between 0 and 100.");a=b}},lines:{enumerable:!0,get:function(){return b},set:function(a){if("number"!=typeof a)throw new TypeError("Lines must be set to a number.");
b=a}},regionAnchorY:{enumerable:!0,get:function(){return f},set:function(a){if(!e(a))throw new Error("RegionAnchorX must be between 0 and 100.");f=a}},regionAnchorX:{enumerable:!0,get:function(){return c},set:function(a){if(!e(a))throw new Error("RegionAnchorY must be between 0 and 100.");c=a}},viewportAnchorY:{enumerable:!0,get:function(){return h},set:function(a){if(!e(a))throw new Error("ViewportAnchorY must be between 0 and 100.");h=a}},viewportAnchorX:{enumerable:!0,get:function(){return g},set:function(a){if(!e(a))throw new Error("ViewportAnchorX must be between 0 and 100.");
g=a}},scroll:{enumerable:!0,get:function(){return i},set:function(a){var b=d(a);if(b===!1)throw new SyntaxError("An invalid or illegal string was specified.");i=b}}})}var c={"":!0,up:!0};a.VTTRegion=a.VTTRegion||f,b.VTTRegion=f}(this,this.vttjs||{}),function(a){function c(a,b){this.name="ParsingError",this.code=a.code,this.message=b||a.message}function d(a){function b(a,b,c,d){return 3600*(0|a)+60*(0|b)+(0|c)+(0|d)/1e3}var c=a.match(/^(\d+):(\d{2})(:\d{2})?\.(\d{3})/);return c?c[3]?b(c[1],c[2],c[3].replace(":",""),c[4]):c[1]>59?b(c[1],c[2],0,c[4]):b(0,c[1],c[2],c[4]):null
}function e(){this.values=b(null)}function f(a,b,c,d){var e=d?a.split(d):[a];for(var f in e)if("string"==typeof e[f]){var g=e[f].split(c);if(2===g.length){var h=g[0],i=g[1];b(h,i)}}}function g(a,b,g){function i(){var b=d(a);if(null===b)throw new c(c.Errors.BadTimeStamp,"Malformed timestamp: "+h);return a=a.replace(/^[^\sa-zA-Z-]+/,""),b}function j(a,b){var c=new e;f(a,function(a,b){switch(a){case"region":for(var d=g.length-1;d>=0;d--)if(g[d].id===b){c.set(a,g[d].region);break}break;case"vertical":c.alt(a,b,["rl","lr"]);
break;case"line":var e=b.split(","),f=e[0];c.integer(a,f),c.percent(a,f)?c.set("snapToLines",!1):null,c.alt(a,f,["auto"]),2===e.length&&c.alt("lineAlign",e[1],["start","middle","end"]);break;case"position":e=b.split(","),c.percent(a,e[0]),2===e.length&&c.alt("positionAlign",e[1],["start","middle","end"]);break;case"size":c.percent(a,b);break;case"align":c.alt(a,b,["start","middle","end","left","right"])}},/:/,/\s/),b.region=c.get("region",null),b.vertical=c.get("vertical",""),b.line=c.get("line","auto"),b.lineAlign=c.get("lineAlign","start"),b.snapToLines=c.get("snapToLines",!0),b.size=c.get("size",100),b.align=c.get("align","middle"),b.position=c.get("position",{start:0,left:0,middle:50,end:100,right:100},b.align),b.positionAlign=c.get("positionAlign",{start:"start",left:"start",middle:"middle",end:"end",right:"end"},b.align)
}function k(){a=a.replace(/^\s+/,"")}var h=a;if(k(),b.startTime=i(),k(),"-->"!==a.substr(0,3))throw new c(c.Errors.BadTimeStamp,"Malformed time stamp (time stamps must be separated by '-->'): "+h);a=a.substr(3),k(),b.endTime=i(),k(),j(a,b)}function l(a,b){function c(){function a(a){return b=b.substr(a.length),a}if(!b)return null;var c=b.match(/^([^<]*)(<[^>]+>?)?/);return a(c[1]?c[1]:c[2])}function e(a){return h[a]}function f(a){for(;s=a.match(/&(amp|lt|gt|lrm|rlm|nbsp);/);)a=a.replace(s[0],e);return a}function g(a,b){return!k[b.localName]||k[b.localName]===a.localName
}function l(b,c){var d=i[b];if(!d)return null;var e=a.document.createElement(d);e.localName=d;var f=j[b];return f&&c&&(e[f]=c.trim()),e}for(var o,m=a.document.createElement("div"),n=m,p=[];null!==(o=c());)if("<"!==o[0])n.appendChild(a.document.createTextNode(f(o)));else{if("/"===o[1]){p.length&&p[p.length-1]===o.substr(2).replace(">","")&&(p.pop(),n=n.parentNode);continue}var r,q=d(o.substr(1,o.length-2));if(q){r=a.document.createProcessingInstruction("timestamp",q),n.appendChild(r);continue}var s=o.match(/^<([^.\s/0-9>]+)(\.[^\s\\>]+)?([^>\\]+)?(\\?)>?$/);
if(!s)continue;if(r=l(s[1],s[3]),!r)continue;if(!g(n,r))continue;s[2]&&(r.className=s[2].substr(1).replace("."," ")),p.push(s[1]),n.appendChild(r),n=r}return m}function n(a){function e(a,b){for(var c=b.childNodes.length-1;c>=0;c--)a.push(b.childNodes[c])}function f(a){if(!a||!a.length)return null;var b=a.pop(),c=b.textContent||b.innerText;if(c){var d=c.match(/^.*(\n|\r)/);return d?(a.length=0,d[0]):c}return"ruby"===b.tagName?f(a):b.childNodes?(e(a,b),f(a)):void 0}var d,b=[],c="";if(!a||!a.childNodes)return"ltr";
for(e(b,a);c=f(b);)for(var g=0;g<c.length;g++){d=c.charCodeAt(g);for(var h=0;h<m.length;h++)if(m[h]===d)return"rtl"}return"ltr"}function o(a){if("number"==typeof a.line&&(a.snapToLines||a.line>=0&&a.line<=100))return a.line;if(!a.track||!a.track.textTrackList||!a.track.textTrackList.mediaElement)return-1;for(var b=a.track,c=b.textTrackList,d=0,e=0;e<c.length&&c[e]!==b;e++)"showing"===c[e].mode&&d++;return-1*++d}function p(){}function q(a,b,c){var d=/MSIE\s8\.0/.test(navigator.userAgent),e="rgba(255, 255, 255, 1)",f="rgba(0, 0, 0, 0.8)";
d&&(e="rgb(255, 255, 255)",f="rgb(0, 0, 0)"),p.call(this),this.cue=b,this.cueDiv=l(a,b.text);var g={color:e,backgroundColor:f,position:"relative",left:0,right:0,top:0,bottom:0,display:"inline"};d||(g.writingMode=""===b.vertical?"horizontal-tb":"lr"===b.vertical?"vertical-lr":"vertical-rl",g.unicodeBidi="plaintext"),this.applyStyles(g,this.cueDiv),this.div=a.document.createElement("div"),g={textAlign:"middle"===b.align?"center":b.align,font:c.font,whiteSpace:"pre-line",position:"absolute"},d||(g.direction=n(this.cueDiv),g.writingMode=""===b.vertical?"horizontal-tb":"lr"===b.vertical?"vertical-lr":"vertical-rl".stylesunicodeBidi="plaintext"),this.applyStyles(g),this.div.appendChild(this.cueDiv);
var h=0;switch(b.positionAlign){case"start":h=b.position;break;case"middle":h=b.position-b.size/2;break;case"end":h=b.position-b.size}""===b.vertical?this.applyStyles({left:this.formatStyle(h,"%"),width:this.formatStyle(b.size,"%")}):this.applyStyles({top:this.formatStyle(h,"%"),height:this.formatStyle(b.size,"%")}),this.move=function(a){this.applyStyles({top:this.formatStyle(a.top,"px"),bottom:this.formatStyle(a.bottom,"px"),left:this.formatStyle(a.left,"px"),right:this.formatStyle(a.right,"px"),height:this.formatStyle(a.height,"px"),width:this.formatStyle(a.width,"px")})
}}function r(a){var c,d,e,f,b=/MSIE\s8\.0/.test(navigator.userAgent);if(a.div){d=a.div.offsetHeight,e=a.div.offsetWidth,f=a.div.offsetTop;var g=(g=a.div.childNodes)&&(g=g[0])&&g.getClientRects&&g.getClientRects();a=a.div.getBoundingClientRect(),c=g?Math.max(g[0]&&g[0].height||0,a.height/g.length):0}this.left=a.left,this.right=a.right,this.top=a.top||f,this.height=a.height||d,this.bottom=a.bottom||f+(a.height||d),this.width=a.width||e,this.lineHeight=void 0!==c?c:a.lineHeight,b&&!this.lineHeight&&(this.lineHeight=13)
}function s(a,b,c,d){function e(a,b){for(var e,f=new r(a),g=1,h=0;h<b.length;h++){for(;a.overlapsOppositeAxis(c,b[h])||a.within(c)&&a.overlapsAny(d);)a.move(b[h]);if(a.within(c))return a;var i=a.intersectPercentage(c);g>i&&(e=new r(a),g=i),a=new r(f)}return e||f}var f=new r(b),g=b.cue,h=o(g),i=[];if(g.snapToLines){var j;switch(g.vertical){case"":i=["+y","-y"],j="height";break;case"rl":i=["+x","-x"],j="width";break;case"lr":i=["-x","+x"],j="width"}var k=f.lineHeight,l=k*Math.round(h),m=c[j]+k,n=i[0];Math.abs(l)>m&&(l=0>l?-1:1,l*=Math.ceil(m/k)*k),0>h&&(l+=""===g.vertical?c.height:c.width,i=i.reverse()),f.move(n,l)
}else{var p=f.lineHeight/c.height*100;switch(g.lineAlign){case"middle":h-=p/2;break;case"end":h-=p}switch(g.vertical){case"":b.applyStyles({top:b.formatStyle(h,"%")});break;case"rl":b.applyStyles({left:b.formatStyle(h,"%")});break;case"lr":b.applyStyles({right:b.formatStyle(h,"%")})}i=["+y","-x","+x","-y"],f=new r(b)}var q=e(f,i);b.move(q.toCSSCompatValues(c))}function t(){}var b=Object.create||function(){function a(){}return function(b){if(1!==arguments.length)throw new Error("Object.create shim only accepts one parameter.");
return a.prototype=b,new a}}();c.prototype=b(Error.prototype),c.prototype.constructor=c,c.Errors={BadSignature:{code:0,message:"Malformed WebVTT signature."},BadTimeStamp:{code:1,message:"Malformed time stamp."}},e.prototype={set:function(a,b){this.get(a)||""===b||(this.values[a]=b)},get:function(a,b,c){return c?this.has(a)?this.values[a]:b[c]:this.has(a)?this.values[a]:b},has:function(a){return a in this.values},alt:function(a,b,c){for(var d=0;d<c.length;++d)if(b===c[d]){this.set(a,b);break}},integer:function(a,b){/^-?\d+$/.test(b)&&this.set(a,parseInt(b,10))
},percent:function(a,b){var c;return(c=b.match(/^([\d]{1,3})(\.[\d]*)?%$/))&&(b=parseFloat(b),b>=0&&100>=b)?(this.set(a,b),!0):!1}};var h={"&amp;":"&","&lt;":"<","&gt;":">","&lrm;":"\u200e","&rlm;":"\u200f","&nbsp;":"\xa0"},i={c:"span",i:"i",b:"b",u:"u",ruby:"ruby",rt:"rt",v:"span",lang:"span"},j={v:"title",lang:"lang"},k={rt:"ruby"},m=[1470,1472,1475,1478,1488,1489,1490,1491,1492,1493,1494,1495,1496,1497,1498,1499,1500,1501,1502,1503,1504,1505,1506,1507,1508,1509,1510,1511,1512,1513,1514,1520,1521,1522,1523,1524,1544,1547,1549,1563,1566,1567,1568,1569,1570,1571,1572,1573,1574,1575,1576,1577,1578,1579,1580,1581,1582,1583,1584,1585,1586,1587,1588,1589,1590,1591,1592,1593,1594,1595,1596,1597,1598,1599,1600,1601,1602,1603,1604,1605,1606,1607,1608,1609,1610,1645,1646,1647,1649,1650,1651,1652,1653,1654,1655,1656,1657,1658,1659,1660,1661,1662,1663,1664,1665,1666,1667,1668,1669,1670,1671,1672,1673,1674,1675,1676,1677,1678,1679,1680,1681,1682,1683,1684,1685,1686,1687,1688,1689,1690,1691,1692,1693,1694,1695,1696,1697,1698,1699,1700,1701,1702,1703,1704,1705,1706,1707,1708,1709,1710,1711,1712,1713,1714,1715,1716,1717,1718,1719,1720,1721,1722,1723,1724,1725,1726,1727,1728,1729,1730,1731,1732,1733,1734,1735,1736,1737,1738,1739,1740,1741,1742,1743,1744,1745,1746,1747,1748,1749,1765,1766,1774,1775,1786,1787,1788,1789,1790,1791,1792,1793,1794,1795,1796,1797,1798,1799,1800,1801,1802,1803,1804,1805,1807,1808,1810,1811,1812,1813,1814,1815,1816,1817,1818,1819,1820,1821,1822,1823,1824,1825,1826,1827,1828,1829,1830,1831,1832,1833,1834,1835,1836,1837,1838,1839,1869,1870,1871,1872,1873,1874,1875,1876,1877,1878,1879,1880,1881,1882,1883,1884,1885,1886,1887,1888,1889,1890,1891,1892,1893,1894,1895,1896,1897,1898,1899,1900,1901,1902,1903,1904,1905,1906,1907,1908,1909,1910,1911,1912,1913,1914,1915,1916,1917,1918,1919,1920,1921,1922,1923,1924,1925,1926,1927,1928,1929,1930,1931,1932,1933,1934,1935,1936,1937,1938,1939,1940,1941,1942,1943,1944,1945,1946,1947,1948,1949,1950,1951,1952,1953,1954,1955,1956,1957,1969,1984,1985,1986,1987,1988,1989,1990,1991,1992,1993,1994,1995,1996,1997,1998,1999,2e3,2001,2002,2003,2004,2005,2006,2007,2008,2009,2010,2011,2012,2013,2014,2015,2016,2017,2018,2019,2020,2021,2022,2023,2024,2025,2026,2036,2037,2042,2048,2049,2050,2051,2052,2053,2054,2055,2056,2057,2058,2059,2060,2061,2062,2063,2064,2065,2066,2067,2068,2069,2074,2084,2088,2096,2097,2098,2099,2100,2101,2102,2103,2104,2105,2106,2107,2108,2109,2110,2112,2113,2114,2115,2116,2117,2118,2119,2120,2121,2122,2123,2124,2125,2126,2127,2128,2129,2130,2131,2132,2133,2134,2135,2136,2142,2208,2210,2211,2212,2213,2214,2215,2216,2217,2218,2219,2220,8207,64285,64287,64288,64289,64290,64291,64292,64293,64294,64295,64296,64298,64299,64300,64301,64302,64303,64304,64305,64306,64307,64308,64309,64310,64312,64313,64314,64315,64316,64318,64320,64321,64323,64324,64326,64327,64328,64329,64330,64331,64332,64333,64334,64335,64336,64337,64338,64339,64340,64341,64342,64343,64344,64345,64346,64347,64348,64349,64350,64351,64352,64353,64354,64355,64356,64357,64358,64359,64360,64361,64362,64363,64364,64365,64366,64367,64368,64369,64370,64371,64372,64373,64374,64375,64376,64377,64378,64379,64380,64381,64382,64383,64384,64385,64386,64387,64388,64389,64390,64391,64392,64393,64394,64395,64396,64397,64398,64399,64400,64401,64402,64403,64404,64405,64406,64407,64408,64409,64410,64411,64412,64413,64414,64415,64416,64417,64418,64419,64420,64421,64422,64423,64424,64425,64426,64427,64428,64429,64430,64431,64432,64433,64434,64435,64436,64437,64438,64439,64440,64441,64442,64443,64444,64445,64446,64447,64448,64449,64467,64468,64469,64470,64471,64472,64473,64474,64475,64476,64477,64478,64479,64480,64481,64482,64483,64484,64485,64486,64487,64488,64489,64490,64491,64492,64493,64494,64495,64496,64497,64498,64499,64500,64501,64502,64503,64504,64505,64506,64507,64508,64509,64510,64511,64512,64513,64514,64515,64516,64517,64518,64519,64520,64521,64522,64523,64524,64525,64526,64527,64528,64529,64530,64531,64532,64533,64534,64535,64536,64537,64538,64539,64540,64541,64542,64543,64544,64545,64546,64547,64548,64549,64550,64551,64552,64553,64554,64555,64556,64557,64558,64559,64560,64561,64562,64563,64564,64565,64566,64567,64568,64569,64570,64571,64572,64573,64574,64575,64576,64577,64578,64579,64580,64581,64582,64583,64584,64585,64586,64587,64588,64589,64590,64591,64592,64593,64594,64595,64596,64597,64598,64599,64600,64601,64602,64603,64604,64605,64606,64607,64608,64609,64610,64611,64612,64613,64614,64615,64616,64617,64618,64619,64620,64621,64622,64623,64624,64625,64626,64627,64628,64629,64630,64631,64632,64633,64634,64635,64636,64637,64638,64639,64640,64641,64642,64643,64644,64645,64646,64647,64648,64649,64650,64651,64652,64653,64654,64655,64656,64657,64658,64659,64660,64661,64662,64663,64664,64665,64666,64667,64668,64669,64670,64671,64672,64673,64674,64675,64676,64677,64678,64679,64680,64681,64682,64683,64684,64685,64686,64687,64688,64689,64690,64691,64692,64693,64694,64695,64696,64697,64698,64699,64700,64701,64702,64703,64704,64705,64706,64707,64708,64709,64710,64711,64712,64713,64714,64715,64716,64717,64718,64719,64720,64721,64722,64723,64724,64725,64726,64727,64728,64729,64730,64731,64732,64733,64734,64735,64736,64737,64738,64739,64740,64741,64742,64743,64744,64745,64746,64747,64748,64749,64750,64751,64752,64753,64754,64755,64756,64757,64758,64759,64760,64761,64762,64763,64764,64765,64766,64767,64768,64769,64770,64771,64772,64773,64774,64775,64776,64777,64778,64779,64780,64781,64782,64783,64784,64785,64786,64787,64788,64789,64790,64791,64792,64793,64794,64795,64796,64797,64798,64799,64800,64801,64802,64803,64804,64805,64806,64807,64808,64809,64810,64811,64812,64813,64814,64815,64816,64817,64818,64819,64820,64821,64822,64823,64824,64825,64826,64827,64828,64829,64848,64849,64850,64851,64852,64853,64854,64855,64856,64857,64858,64859,64860,64861,64862,64863,64864,64865,64866,64867,64868,64869,64870,64871,64872,64873,64874,64875,64876,64877,64878,64879,64880,64881,64882,64883,64884,64885,64886,64887,64888,64889,64890,64891,64892,64893,64894,64895,64896,64897,64898,64899,64900,64901,64902,64903,64904,64905,64906,64907,64908,64909,64910,64911,64914,64915,64916,64917,64918,64919,64920,64921,64922,64923,64924,64925,64926,64927,64928,64929,64930,64931,64932,64933,64934,64935,64936,64937,64938,64939,64940,64941,64942,64943,64944,64945,64946,64947,64948,64949,64950,64951,64952,64953,64954,64955,64956,64957,64958,64959,64960,64961,64962,64963,64964,64965,64966,64967,65008,65009,65010,65011,65012,65013,65014,65015,65016,65017,65018,65019,65020,65136,65137,65138,65139,65140,65142,65143,65144,65145,65146,65147,65148,65149,65150,65151,65152,65153,65154,65155,65156,65157,65158,65159,65160,65161,65162,65163,65164,65165,65166,65167,65168,65169,65170,65171,65172,65173,65174,65175,65176,65177,65178,65179,65180,65181,65182,65183,65184,65185,65186,65187,65188,65189,65190,65191,65192,65193,65194,65195,65196,65197,65198,65199,65200,65201,65202,65203,65204,65205,65206,65207,65208,65209,65210,65211,65212,65213,65214,65215,65216,65217,65218,65219,65220,65221,65222,65223,65224,65225,65226,65227,65228,65229,65230,65231,65232,65233,65234,65235,65236,65237,65238,65239,65240,65241,65242,65243,65244,65245,65246,65247,65248,65249,65250,65251,65252,65253,65254,65255,65256,65257,65258,65259,65260,65261,65262,65263,65264,65265,65266,65267,65268,65269,65270,65271,65272,65273,65274,65275,65276,67584,67585,67586,67587,67588,67589,67592,67594,67595,67596,67597,67598,67599,67600,67601,67602,67603,67604,67605,67606,67607,67608,67609,67610,67611,67612,67613,67614,67615,67616,67617,67618,67619,67620,67621,67622,67623,67624,67625,67626,67627,67628,67629,67630,67631,67632,67633,67634,67635,67636,67637,67639,67640,67644,67647,67648,67649,67650,67651,67652,67653,67654,67655,67656,67657,67658,67659,67660,67661,67662,67663,67664,67665,67666,67667,67668,67669,67671,67672,67673,67674,67675,67676,67677,67678,67679,67840,67841,67842,67843,67844,67845,67846,67847,67848,67849,67850,67851,67852,67853,67854,67855,67856,67857,67858,67859,67860,67861,67862,67863,67864,67865,67866,67867,67872,67873,67874,67875,67876,67877,67878,67879,67880,67881,67882,67883,67884,67885,67886,67887,67888,67889,67890,67891,67892,67893,67894,67895,67896,67897,67903,67968,67969,67970,67971,67972,67973,67974,67975,67976,67977,67978,67979,67980,67981,67982,67983,67984,67985,67986,67987,67988,67989,67990,67991,67992,67993,67994,67995,67996,67997,67998,67999,68e3,68001,68002,68003,68004,68005,68006,68007,68008,68009,68010,68011,68012,68013,68014,68015,68016,68017,68018,68019,68020,68021,68022,68023,68030,68031,68096,68112,68113,68114,68115,68117,68118,68119,68121,68122,68123,68124,68125,68126,68127,68128,68129,68130,68131,68132,68133,68134,68135,68136,68137,68138,68139,68140,68141,68142,68143,68144,68145,68146,68147,68160,68161,68162,68163,68164,68165,68166,68167,68176,68177,68178,68179,68180,68181,68182,68183,68184,68192,68193,68194,68195,68196,68197,68198,68199,68200,68201,68202,68203,68204,68205,68206,68207,68208,68209,68210,68211,68212,68213,68214,68215,68216,68217,68218,68219,68220,68221,68222,68223,68352,68353,68354,68355,68356,68357,68358,68359,68360,68361,68362,68363,68364,68365,68366,68367,68368,68369,68370,68371,68372,68373,68374,68375,68376,68377,68378,68379,68380,68381,68382,68383,68384,68385,68386,68387,68388,68389,68390,68391,68392,68393,68394,68395,68396,68397,68398,68399,68400,68401,68402,68403,68404,68405,68416,68417,68418,68419,68420,68421,68422,68423,68424,68425,68426,68427,68428,68429,68430,68431,68432,68433,68434,68435,68436,68437,68440,68441,68442,68443,68444,68445,68446,68447,68448,68449,68450,68451,68452,68453,68454,68455,68456,68457,68458,68459,68460,68461,68462,68463,68464,68465,68466,68472,68473,68474,68475,68476,68477,68478,68479,68608,68609,68610,68611,68612,68613,68614,68615,68616,68617,68618,68619,68620,68621,68622,68623,68624,68625,68626,68627,68628,68629,68630,68631,68632,68633,68634,68635,68636,68637,68638,68639,68640,68641,68642,68643,68644,68645,68646,68647,68648,68649,68650,68651,68652,68653,68654,68655,68656,68657,68658,68659,68660,68661,68662,68663,68664,68665,68666,68667,68668,68669,68670,68671,68672,68673,68674,68675,68676,68677,68678,68679,68680,126464,126465,126466,126467,126469,126470,126471,126472,126473,126474,126475,126476,126477,126478,126479,126480,126481,126482,126483,126484,126485,126486,126487,126488,126489,126490,126491,126492,126493,126494,126495,126497,126498,126500,126503,126505,126506,126507,126508,126509,126510,126511,126512,126513,126514,126516,126517,126518,126519,126521,126523,126530,126535,126537,126539,126541,126542,126543,126545,126546,126548,126551,126553,126555,126557,126559,126561,126562,126564,126567,126568,126569,126570,126572,126573,126574,126575,126576,126577,126578,126580,126581,126582,126583,126585,126586,126587,126588,126590,126592,126593,126594,126595,126596,126597,126598,126599,126600,126601,126603,126604,126605,126606,126607,126608,126609,126610,126611,126612,126613,126614,126615,126616,126617,126618,126619,126625,126626,126627,126629,126630,126631,126632,126633,126635,126636,126637,126638,126639,126640,126641,126642,126643,126644,126645,126646,126647,126648,126649,126650,126651,1114109];
p.prototype.applyStyles=function(a,b){b=b||this.div;for(var c in a)a.hasOwnProperty(c)&&(b.style[c]=a[c])},p.prototype.formatStyle=function(a,b){return 0===a?0:a+b},q.prototype=b(p.prototype),q.prototype.constructor=q,r.prototype.move=function(a,b){switch(b=void 0!==b?b:this.lineHeight,a){case"+x":this.left+=b,this.right+=b;break;case"-x":this.left-=b,this.right-=b;break;case"+y":this.top+=b,this.bottom+=b;break;case"-y":this.top-=b,this.bottom-=b}},r.prototype.overlaps=function(a){return this.left<a.right&&this.right>a.left&&this.top<a.bottom&&this.bottom>a.top
},r.prototype.overlapsAny=function(a){for(var b=0;b<a.length;b++)if(this.overlaps(a[b]))return!0;return!1},r.prototype.within=function(a){return this.top>=a.top&&this.bottom<=a.bottom&&this.left>=a.left&&this.right<=a.right},r.prototype.overlapsOppositeAxis=function(a,b){switch(b){case"+x":return this.left<a.left;case"-x":return this.right>a.right;case"+y":return this.top<a.top;case"-y":return this.bottom>a.bottom}},r.prototype.intersectPercentage=function(a){var b=Math.max(0,Math.min(this.right,a.right)-Math.max(this.left,a.left)),c=Math.max(0,Math.min(this.bottom,a.bottom)-Math.max(this.top,a.top)),d=b*c;
return d/(this.height*this.width)},r.prototype.toCSSCompatValues=function(a){return{top:this.top-a.top,bottom:a.bottom-this.bottom,left:this.left-a.left,right:a.right-this.right,height:this.height,width:this.width}},r.getSimpleBoxPosition=function(a){var b=a.div?a.div.offsetHeight:a.tagName?a.offsetHeight:0,c=a.div?a.div.offsetWidth:a.tagName?a.offsetWidth:0,d=a.div?a.div.offsetTop:a.tagName?a.offsetTop:0;a=a.div?a.div.getBoundingClientRect():a.tagName?a.getBoundingClientRect():a;var e={left:a.left,right:a.right,top:a.top||d,height:a.height||b,bottom:a.bottom||d+(a.height||b),width:a.width||c};
return e},t.StringDecoder=function(){return{decode:function(a){if(!a)return"";if("string"!=typeof a)throw new Error("Error - expected string data.");return decodeURIComponent(encodeURIComponent(a))}}},t.convertCueToDOMTree=function(a,b){return a&&b?l(a,b):null};var u=.05,v="sans-serif",w="1.5%";t.processCues=function(a,b,c){function e(a){for(var b=0;b<a.length;b++)if(a[b].hasBeenReset||!a[b].displayState)return!0;return!1}if(!a||!b||!c)return null;for(;c.firstChild;)c.removeChild(c.firstChild);var d=a.document.createElement("div");
if(d.style.position="absolute",d.style.left="0",d.style.right="0",d.style.top="0",d.style.bottom="0",d.style.margin=w,c.appendChild(d),e(b)){var g=[],h=r.getSimpleBoxPosition(d),i=Math.round(h.height*u*100)/100,j={font:i+"px "+v};!function(){for(var c,e,f=0;f<b.length;f++)e=b[f],c=new q(a,e,j),d.appendChild(c.div),s(a,c,h,g),e.displayState=c.div,g.push(r.getSimpleBoxPosition(c))}()}else for(var f=0;f<b.length;f++)d.appendChild(b[f].displayState)},t.Parser=function(a,b,c){c||(c=b,b={}),b||(b={}),this.window=a,this.vttjs=b,this.state="INITIAL",this.buffer="",this.decoder=c||new TextDecoder("utf8"),this.regionList=[]
},t.Parser.prototype={reportOrThrowError:function(a){if(!(a instanceof c))throw a;this.onparsingerror&&this.onparsingerror(a)},parse:function(a){function d(){for(var a=b.buffer,c=0;c<a.length&&"\r"!==a[c]&&"\n"!==a[c];)++c;var d=a.substr(0,c);return"\r"===a[c]&&++c,"\n"===a[c]&&++c,b.buffer=a.substr(c),d}function h(a){var c=new e;if(f(a,function(a,b){switch(a){case"id":c.set(a,b);break;case"width":c.percent(a,b);break;case"lines":c.integer(a,b);break;case"regionanchor":case"viewportanchor":var d=b.split(",");
if(2!==d.length)break;var f=new e;if(f.percent("x",d[0]),f.percent("y",d[1]),!f.has("x")||!f.has("y"))break;c.set(a+"X",f.get("x")),c.set(a+"Y",f.get("y"));break;case"scroll":c.alt(a,b,["up"])}},/=/,/\s/),c.has("id")){var d=new(b.vttjs.VTTRegion||b.window.VTTRegion);d.width=c.get("width",100),d.lines=c.get("lines",3),d.regionAnchorX=c.get("regionanchorX",0),d.regionAnchorY=c.get("regionanchorY",100),d.viewportAnchorX=c.get("viewportanchorX",0),d.viewportAnchorY=c.get("viewportanchorY",100),d.scroll=c.get("scroll",""),b.onregion&&b.onregion(d),b.regionList.push({id:c.get("id"),region:d})
}}function i(a){f(a,function(a,b){switch(a){case"Region":h(b)}},/:/)}var b=this;a&&(b.buffer+=b.decoder.decode(a,{stream:!0}));try{var j;if("INITIAL"===b.state){if(!/\r\n|\n/.test(b.buffer))return this;j=d();var k=j.match(/^WEBVTT([ \t].*)?$/);if(!k||!k[0])throw new c(c.Errors.BadSignature);b.state="HEADER"}for(var l=!1;b.buffer;){if(!/\r\n|\n/.test(b.buffer))return this;switch(l?l=!1:j=d(),b.state){case"HEADER":/:/.test(j)?i(j):j||(b.state="ID");continue;case"NOTE":j||(b.state="ID");continue;case"ID":if(/^NOTE($|[ \t])/.test(j)){b.state="NOTE";
break}if(!j)continue;if(b.cue=new(b.vttjs.VTTCue||b.window.VTTCue)(0,0,""),b.state="CUE",-1===j.indexOf("-->")){b.cue.id=j;continue}case"CUE":try{g(j,b.cue,b.regionList)}catch(m){b.reportOrThrowError(m),b.cue=null,b.state="BADCUE";continue}b.state="CUETEXT";continue;case"CUETEXT":var n=-1!==j.indexOf("-->");if(!j||n&&(l=!0)){b.oncue&&b.oncue(b.cue),b.cue=null,b.state="ID";continue}b.cue.text&&(b.cue.text+="\n"),b.cue.text+=j;continue;case"BADCUE":j||(b.state="ID");continue}}}catch(m){b.reportOrThrowError(m),"CUETEXT"===b.state&&b.cue&&b.oncue&&b.oncue(b.cue),b.cue=null,b.state="INITIAL"===b.state?"BADWEBVTT":"BADCUE"
}return this},flush:function(){var a=this;try{if(a.buffer+=a.decoder.decode(),(a.cue||"HEADER"===a.state)&&(a.buffer+="\n\n",a.parse()),"INITIAL"===a.state)throw new c(c.Errors.BadSignature)}catch(b){a.reportOrThrowError(b)}return a.onflush&&a.onflush(),this}},a.WebVTT=t}(this,this.vttjs||{})};exports(),module.resolveWith(exports)};FD50.module("videojs",moduleFactory)}(),function(){var a=function(a){var b=this,c=a;a.require().script("ui/core","ui/mouse","ui/widget").done(function(){var a=function(){!function(a){function c(a,b,c){return a>b&&b+c>a
}function d(a){return/left|right/.test(a.css("float"))||/inline|table-cell/.test(a.css("display"))}a.widget("ui.sortable",a.ui.mouse,{version:"1.10.4pre",widgetEventPrefix:"sort",ready:!1,options:{appendTo:"parent",axis:!1,connectWith:!1,containment:!1,cursor:"auto",cursorAt:!1,dropOnEmpty:!0,forcePlaceholderSize:!1,forceHelperSize:!1,grid:!1,handle:!1,helper:"original",items:"> *",opacity:!1,placeholder:!1,revert:!1,scroll:!0,scrollSensitivity:20,scrollSpeed:20,scope:"default",tolerance:"intersect",zIndex:1e3,activate:null,beforeStop:null,change:null,deactivate:null,out:null,over:null,receive:null,remove:null,sort:null,start:null,stop:null,update:null},_create:function(){var a=this.options;
this.containerCache={},this.element.addClass("ui-sortable"),this.refresh(),this.floating=this.items.length?"x"===a.axis||d(this.items[0].item):!1,this.offset=this.element.offset(),this._mouseInit(),this.ready=!0},_destroy:function(){this.element.removeClass("ui-sortable ui-sortable-disabled"),this._mouseDestroy();for(var a=this.items.length-1;a>=0;a--)this.items[a].item.removeData(this.widgetName+"-item");return this},_setOption:function(b,c){"disabled"===b?(this.options[b]=c,this.widget().toggleClass("ui-sortable-disabled",!!c)):a.Widget.prototype._setOption.apply(this,arguments)
},_mouseCapture:function(b,c){var d=null,e=!1,f=this;return this.reverting?!1:this.options.disabled||"static"===this.options.type?!1:(this._refreshItems(b),a(b.target).parents().each(function(){return a.data(this,f.widgetName+"-item")===f?(d=a(this),!1):void 0}),a.data(b.target,f.widgetName+"-item")===f&&(d=a(b.target)),d?!this.options.handle||c||(a(this.options.handle,d).find("*").addBack().each(function(){this===b.target&&(e=!0)}),e)?(this.currentItem=d,this._removeCurrentsFromItems(),!0):!1:!1)},_mouseStart:function(b,c,d){var e,f,g=this.options;
if(this.currentContainer=this,this.refreshPositions(),this.helper=this._createHelper(b),this._cacheHelperProportions(),this._cacheMargins(),this.scrollParent=this.helper.scrollParent(),this.offset=this.currentItem.offset(),this.offset={top:this.offset.top-this.margins.top,left:this.offset.left-this.margins.left},a.extend(this.offset,{click:{left:b.pageX-this.offset.left,top:b.pageY-this.offset.top},parent:this._getParentOffset(),relative:this._getRelativeOffset()}),this.helper.css("position","absolute"),this.cssPosition=this.helper.css("position"),this.originalPosition=this._generatePosition(b),this.originalPageX=b.pageX,this.originalPageY=b.pageY,g.cursorAt&&this._adjustOffsetFromHelper(g.cursorAt),this.domPosition={prev:this.currentItem.prev()[0],parent:this.currentItem.parent()[0]},this.helper[0]!==this.currentItem[0]&&this.currentItem.hide(),this._createPlaceholder(),g.containment&&this._setContainment(),g.cursor&&"auto"!==g.cursor&&(f=this.document.find("body"),this.storedCursor=f.css("cursor"),f.css("cursor",g.cursor),this.storedStylesheet=a("<style>*{ cursor: "+g.cursor+" !important; }</style>").appendTo(f)),g.opacity&&(this.helper.css("opacity")&&(this._storedOpacity=this.helper.css("opacity")),this.helper.css("opacity",g.opacity)),g.zIndex&&(this.helper.css("zIndex")&&(this._storedZIndex=this.helper.css("zIndex")),this.helper.css("zIndex",g.zIndex)),this.scrollParent[0]!==document&&"HTML"!==this.scrollParent[0].tagName&&(this.overflowOffset=this.scrollParent.offset()),this._trigger("start",b,this._uiHash()),this._preserveHelperProportions||this._cacheHelperProportions(),!d)for(e=this.containers.length-1;e>=0;e--)this.containers[e]._trigger("activate",b,this._uiHash(this));
return a.ui.ddmanager&&(a.ui.ddmanager.current=this),a.ui.ddmanager&&!g.dropBehaviour&&a.ui.ddmanager.prepareOffsets(this,b),this.dragging=!0,this.helper.addClass("ui-sortable-helper"),this._mouseDrag(b),!0},_mouseDrag:function(b){var c,d,e,f,g=this.options,h=!1;for(this.position=this._generatePosition(b),this.positionAbs=this._convertPositionTo("absolute"),this.lastPositionAbs||(this.lastPositionAbs=this.positionAbs),this.options.scroll&&(this.scrollParent[0]!==document&&"HTML"!==this.scrollParent[0].tagName?(this.overflowOffset.top+this.scrollParent[0].offsetHeight-b.pageY<g.scrollSensitivity?this.scrollParent[0].scrollTop=h=this.scrollParent[0].scrollTop+g.scrollSpeed:b.pageY-this.overflowOffset.top<g.scrollSensitivity&&(this.scrollParent[0].scrollTop=h=this.scrollParent[0].scrollTop-g.scrollSpeed),this.overflowOffset.left+this.scrollParent[0].offsetWidth-b.pageX<g.scrollSensitivity?this.scrollParent[0].scrollLeft=h=this.scrollParent[0].scrollLeft+g.scrollSpeed:b.pageX-this.overflowOffset.left<g.scrollSensitivity&&(this.scrollParent[0].scrollLeft=h=this.scrollParent[0].scrollLeft-g.scrollSpeed)):(b.pageY-a(document).scrollTop()<g.scrollSensitivity?h=a(document).scrollTop(a(document).scrollTop()-g.scrollSpeed):a(window).height()-(b.pageY-a(document).scrollTop())<g.scrollSensitivity&&(h=a(document).scrollTop(a(document).scrollTop()+g.scrollSpeed)),b.pageX-a(document).scrollLeft()<g.scrollSensitivity?h=a(document).scrollLeft(a(document).scrollLeft()-g.scrollSpeed):a(window).width()-(b.pageX-a(document).scrollLeft())<g.scrollSensitivity&&(h=a(document).scrollLeft(a(document).scrollLeft()+g.scrollSpeed))),h!==!1&&a.ui.ddmanager&&!g.dropBehaviour&&a.ui.ddmanager.prepareOffsets(this,b)),this.positionAbs=this._convertPositionTo("absolute"),this.options.axis&&"y"===this.options.axis||(this.helper[0].style.left=this.position.left+"px"),this.options.axis&&"x"===this.options.axis||(this.helper[0].style.top=this.position.top+"px"),c=this.items.length-1;c>=0;c--)if(d=this.items[c],e=d.item[0],f=this._intersectsWithPointer(d),f&&d.instance===this.currentContainer&&e!==this.currentItem[0]&&this.placeholder[1===f?"next":"prev"]()[0]!==e&&!a.contains(this.placeholder[0],e)&&("semi-dynamic"===this.options.type?!a.contains(this.element[0],e):!0)){if(this.direction=1===f?"down":"up","pointer"!==this.options.tolerance&&!this._intersectsWithSides(d))break;
this._rearrange(b,d),this._trigger("change",b,this._uiHash());break}return this._contactContainers(b),a.ui.ddmanager&&a.ui.ddmanager.drag(this,b),this._trigger("sort",b,this._uiHash()),this.lastPositionAbs=this.positionAbs,!1},_mouseStop:function(b,c){if(b){if(a.ui.ddmanager&&!this.options.dropBehaviour&&a.ui.ddmanager.drop(this,b),this.options.revert){var d=this,e=this.placeholder.offset(),f=this.options.axis,g={};f&&"x"!==f||(g.left=e.left-this.offset.parent.left-this.margins.left+(this.offsetParent[0]===document.body?0:this.offsetParent[0].scrollLeft)),f&&"y"!==f||(g.top=e.top-this.offset.parent.top-this.margins.top+(this.offsetParent[0]===document.body?0:this.offsetParent[0].scrollTop)),this.reverting=!0,a(this.helper).animate(g,parseInt(this.options.revert,10)||500,function(){d._clear(b)
})}else this._clear(b,c);return!1}},cancel:function(){if(this.dragging){this._mouseUp({target:null}),"original"===this.options.helper?this.currentItem.css(this._storedCSS).removeClass("ui-sortable-helper"):this.currentItem.show();for(var b=this.containers.length-1;b>=0;b--)this.containers[b]._trigger("deactivate",null,this._uiHash(this)),this.containers[b].containerCache.over&&(this.containers[b]._trigger("out",null,this._uiHash(this)),this.containers[b].containerCache.over=0)}return this.placeholder&&(this.placeholder[0].parentNode&&this.placeholder[0].parentNode.removeChild(this.placeholder[0]),"original"!==this.options.helper&&this.helper&&this.helper[0].parentNode&&this.helper.remove(),a.extend(this,{helper:null,dragging:!1,reverting:!1,_noFinalSort:null}),this.domPosition.prev?a(this.domPosition.prev).after(this.currentItem):a(this.domPosition.parent).prepend(this.currentItem)),this
},serialize:function(b){var c=this._getItemsAsjQuery(b&&b.connected),d=[];return b=b||{},a(c).each(function(){var c=(a(b.item||this).attr(b.attribute||"id")||"").match(b.expression||/(.+)[\-=_](.+)/);c&&d.push((b.key||c[1]+"[]")+"="+(b.key&&b.expression?c[1]:c[2]))}),!d.length&&b.key&&d.push(b.key+"="),d.join("&")},toArray:function(b){var c=this._getItemsAsjQuery(b&&b.connected),d=[];return b=b||{},c.each(function(){d.push(a(b.item||this).attr(b.attribute||"id")||"")}),d},_intersectsWith:function(a){var b=this.positionAbs.left,c=b+this.helperProportions.width,d=this.positionAbs.top,e=d+this.helperProportions.height,f=a.left,g=f+a.width,h=a.top,i=h+a.height,j=this.offset.click.top,k=this.offset.click.left,l="x"===this.options.axis||d+j>h&&i>d+j,m="y"===this.options.axis||b+k>f&&g>b+k,n=l&&m;
return"pointer"===this.options.tolerance||this.options.forcePointerForContainers||"pointer"!==this.options.tolerance&&this.helperProportions[this.floating?"width":"height"]>a[this.floating?"width":"height"]?n:f<b+this.helperProportions.width/2&&c-this.helperProportions.width/2<g&&h<d+this.helperProportions.height/2&&e-this.helperProportions.height/2<i},_intersectsWithPointer:function(a){var b="x"===this.options.axis||c(this.positionAbs.top+this.offset.click.top,a.top,a.height),d="y"===this.options.axis||c(this.positionAbs.left+this.offset.click.left,a.left,a.width),e=b&&d,f=this._getDragVerticalDirection(),g=this._getDragHorizontalDirection();
return e?this.floating?g&&"right"===g||"down"===f?2:1:f&&("down"===f?2:1):!1},_intersectsWithSides:function(a){var b=c(this.positionAbs.top+this.offset.click.top,a.top+a.height/2,a.height),d=c(this.positionAbs.left+this.offset.click.left,a.left+a.width/2,a.width),e=this._getDragVerticalDirection(),f=this._getDragHorizontalDirection();return this.floating&&f?"right"===f&&d||"left"===f&&!d:e&&("down"===e&&b||"up"===e&&!b)},_getDragVerticalDirection:function(){var a=this.positionAbs.top-this.lastPositionAbs.top;
return 0!==a&&(a>0?"down":"up")},_getDragHorizontalDirection:function(){var a=this.positionAbs.left-this.lastPositionAbs.left;return 0!==a&&(a>0?"right":"left")},refresh:function(a){return this._refreshItems(a),this.refreshPositions(),this},_connectWith:function(){var a=this.options;return a.connectWith.constructor===String?[a.connectWith]:a.connectWith},_getItemsAsjQuery:function(b){var c,d,e,f,g=[],h=[],i=this._connectWith();if(i&&b)for(c=i.length-1;c>=0;c--)for(e=a(i[c]),d=e.length-1;d>=0;d--)f=a.data(e[d],this.widgetFullName),f&&f!==this&&!f.options.disabled&&h.push([a.isFunction(f.options.items)?f.options.items.call(f.element):a(f.options.items,f.element).not(".ui-sortable-helper").not(".ui-sortable-placeholder"),f]);
for(h.push([a.isFunction(this.options.items)?this.options.items.call(this.element,null,{options:this.options,item:this.currentItem}):a(this.options.items,this.element).not(".ui-sortable-helper").not(".ui-sortable-placeholder"),this]),c=h.length-1;c>=0;c--)h[c][0].each(function(){g.push(this)});return a(g)},_removeCurrentsFromItems:function(){var b=this.currentItem.find(":data("+this.widgetName+"-item)");this.items=a.grep(this.items,function(a){for(var c=0;c<b.length;c++)if(b[c]===a.item[0])return!1;return!0})
},_refreshItems:function(b){this.items=[],this.containers=[this];var c,d,e,f,g,h,i,j,k=this.items,l=[[a.isFunction(this.options.items)?this.options.items.call(this.element[0],b,{item:this.currentItem}):a(this.options.items,this.element),this]],m=this._connectWith();if(m&&this.ready)for(c=m.length-1;c>=0;c--)for(e=a(m[c]),d=e.length-1;d>=0;d--)f=a.data(e[d],this.widgetFullName),f&&f!==this&&!f.options.disabled&&(l.push([a.isFunction(f.options.items)?f.options.items.call(f.element[0],b,{item:this.currentItem}):a(f.options.items,f.element),f]),this.containers.push(f));
for(c=l.length-1;c>=0;c--)for(g=l[c][1],h=l[c][0],d=0,j=h.length;j>d;d++)i=a(h[d]),i.data(this.widgetName+"-item",g),k.push({item:i,instance:g,width:0,height:0,left:0,top:0})},refreshPositions:function(b){this.offsetParent&&this.helper&&(this.offset.parent=this._getParentOffset());var c,d,e,f;for(c=this.items.length-1;c>=0;c--)d=this.items[c],d.instance!==this.currentContainer&&this.currentContainer&&d.item[0]!==this.currentItem[0]||(e=this.options.toleranceElement?a(this.options.toleranceElement,d.item):d.item,b||(d.width=e.outerWidth(),d.height=e.outerHeight()),f=e.offset(),d.left=f.left,d.top=f.top);
if(this.options.custom&&this.options.custom.refreshContainers)this.options.custom.refreshContainers.call(this);else for(c=this.containers.length-1;c>=0;c--)f=this.containers[c].element.offset(),this.containers[c].containerCache.left=f.left,this.containers[c].containerCache.top=f.top,this.containers[c].containerCache.width=this.containers[c].element.outerWidth(),this.containers[c].containerCache.height=this.containers[c].element.outerHeight();return this},_createPlaceholder:function(b){b=b||this;var c,d=b.options;
d.placeholder&&d.placeholder.constructor!==String||(c=d.placeholder,d.placeholder={element:function(){var d=b.currentItem[0].nodeName.toLowerCase(),e=a("<"+d+">",b.document[0]).addClass(c||b.currentItem[0].className+" ui-sortable-placeholder").removeClass("ui-sortable-helper");return"tr"===d?b.currentItem.children().each(function(){a("<td>&#160;</td>",b.document[0]).attr("colspan",a(this).attr("colspan")||1).appendTo(e)}):"img"===d&&e.attr("src",b.currentItem.attr("src")),c||e.css("visibility","hidden"),e},update:function(a,e){(!c||d.forcePlaceholderSize)&&(e.height()||e.height(b.currentItem.innerHeight()-parseInt(b.currentItem.css("paddingTop")||0,10)-parseInt(b.currentItem.css("paddingBottom")||0,10)),e.width()||e.width(b.currentItem.innerWidth()-parseInt(b.currentItem.css("paddingLeft")||0,10)-parseInt(b.currentItem.css("paddingRight")||0,10)))
}}),b.placeholder=a(d.placeholder.element.call(b.element,b.currentItem)),b.currentItem.after(b.placeholder),d.placeholder.update(b,b.placeholder)},_contactContainers:function(b){var e,f,g,h,i,j,k,l,m,n,o=null,p=null;for(e=this.containers.length-1;e>=0;e--)if(!a.contains(this.currentItem[0],this.containers[e].element[0]))if(this._intersectsWith(this.containers[e].containerCache)){if(o&&a.contains(this.containers[e].element[0],o.element[0]))continue;o=this.containers[e],p=e}else this.containers[e].containerCache.over&&(this.containers[e]._trigger("out",b,this._uiHash(this)),this.containers[e].containerCache.over=0);
if(o)if(1===this.containers.length)this.containers[p].containerCache.over||(this.containers[p]._trigger("over",b,this._uiHash(this)),this.containers[p].containerCache.over=1);else{for(g=1e4,h=null,n=o.floating||d(this.currentItem),i=n?"left":"top",j=n?"width":"height",k=this.positionAbs[i]+this.offset.click[i],f=this.items.length-1;f>=0;f--)a.contains(this.containers[p].element[0],this.items[f].item[0])&&this.items[f].item[0]!==this.currentItem[0]&&(!n||c(this.positionAbs.top+this.offset.click.top,this.items[f].top,this.items[f].height))&&(l=this.items[f].item.offset()[i],m=!1,Math.abs(l-k)>Math.abs(l+this.items[f][j]-k)&&(m=!0,l+=this.items[f][j]),Math.abs(l-k)<g&&(g=Math.abs(l-k),h=this.items[f],this.direction=m?"up":"down"));
if(!h&&!this.options.dropOnEmpty)return;if(this.currentContainer===this.containers[p])return;h?this._rearrange(b,h,null,!0):this._rearrange(b,null,this.containers[p].element,!0),this._trigger("change",b,this._uiHash()),this.containers[p]._trigger("change",b,this._uiHash(this)),this.currentContainer=this.containers[p],this.options.placeholder.update(this.currentContainer,this.placeholder),this.containers[p]._trigger("over",b,this._uiHash(this)),this.containers[p].containerCache.over=1}},_createHelper:function(b){var c=this.options,d=a.isFunction(c.helper)?a(c.helper.apply(this.element[0],[b,this.currentItem])):"clone"===c.helper?this.currentItem.clone():this.currentItem;
return d.parents("body").length||a("parent"!==c.appendTo?c.appendTo:this.currentItem[0].parentNode)[0].appendChild(d[0]),d[0]===this.currentItem[0]&&(this._storedCSS={width:this.currentItem[0].style.width,height:this.currentItem[0].style.height,position:this.currentItem.css("position"),top:this.currentItem.css("top"),left:this.currentItem.css("left")}),(!d[0].style.width||c.forceHelperSize)&&d.width(this.currentItem.width()),(!d[0].style.height||c.forceHelperSize)&&d.height(this.currentItem.height()),d},_adjustOffsetFromHelper:function(b){"string"==typeof b&&(b=b.split(" ")),a.isArray(b)&&(b={left:+b[0],top:+b[1]||0}),"left"in b&&(this.offset.click.left=b.left+this.margins.left),"right"in b&&(this.offset.click.left=this.helperProportions.width-b.right+this.margins.left),"top"in b&&(this.offset.click.top=b.top+this.margins.top),"bottom"in b&&(this.offset.click.top=this.helperProportions.height-b.bottom+this.margins.top)
},_getParentOffset:function(){this.offsetParent=this.helper.offsetParent();var b=this.offsetParent.offset();return"absolute"===this.cssPosition&&this.scrollParent[0]!==document&&a.contains(this.scrollParent[0],this.offsetParent[0])&&(b.left+=this.scrollParent.scrollLeft(),b.top+=this.scrollParent.scrollTop()),(this.offsetParent[0]===document.body||this.offsetParent[0].tagName&&"html"===this.offsetParent[0].tagName.toLowerCase()&&a.ui.ie)&&(b={top:0,left:0}),{top:b.top+(parseInt(this.offsetParent.css("borderTopWidth"),10)||0),left:b.left+(parseInt(this.offsetParent.css("borderLeftWidth"),10)||0)}
},_getRelativeOffset:function(){if("relative"===this.cssPosition){var a=this.currentItem.position();return{top:a.top-(parseInt(this.helper.css("top"),10)||0)+this.scrollParent.scrollTop(),left:a.left-(parseInt(this.helper.css("left"),10)||0)+this.scrollParent.scrollLeft()}}return{top:0,left:0}},_cacheMargins:function(){this.margins={left:parseInt(this.currentItem.css("marginLeft"),10)||0,top:parseInt(this.currentItem.css("marginTop"),10)||0}},_cacheHelperProportions:function(){this.helperProportions={width:this.helper.outerWidth(),height:this.helper.outerHeight()}
},_setContainment:function(){var b,c,d,e=this.options;"parent"===e.containment&&(e.containment=this.helper[0].parentNode),("document"===e.containment||"window"===e.containment)&&(this.containment=[0-this.offset.relative.left-this.offset.parent.left,0-this.offset.relative.top-this.offset.parent.top,a("document"===e.containment?document:window).width()-this.helperProportions.width-this.margins.left,(a("document"===e.containment?document:window).height()||document.body.parentNode.scrollHeight)-this.helperProportions.height-this.margins.top]),/^(document|window|parent)$/.test(e.containment)||(b=a(e.containment)[0],c=a(e.containment).offset(),d="hidden"!==a(b).css("overflow"),this.containment=[c.left+(parseInt(a(b).css("borderLeftWidth"),10)||0)+(parseInt(a(b).css("paddingLeft"),10)||0)-this.margins.left,c.top+(parseInt(a(b).css("borderTopWidth"),10)||0)+(parseInt(a(b).css("paddingTop"),10)||0)-this.margins.top,c.left+(d?Math.max(b.scrollWidth,b.offsetWidth):b.offsetWidth)-(parseInt(a(b).css("borderLeftWidth"),10)||0)-(parseInt(a(b).css("paddingRight"),10)||0)-this.helperProportions.width-this.margins.left,c.top+(d?Math.max(b.scrollHeight,b.offsetHeight):b.offsetHeight)-(parseInt(a(b).css("borderTopWidth"),10)||0)-(parseInt(a(b).css("paddingBottom"),10)||0)-this.helperProportions.height-this.margins.top])
},_convertPositionTo:function(b,c){c||(c=this.position);var d="absolute"===b?1:-1,e="absolute"!==this.cssPosition||this.scrollParent[0]!==document&&a.contains(this.scrollParent[0],this.offsetParent[0])?this.scrollParent:this.offsetParent,f=/(html|body)/i.test(e[0].tagName);return{top:c.top+this.offset.relative.top*d+this.offset.parent.top*d-("fixed"===this.cssPosition?-this.scrollParent.scrollTop():f?0:e.scrollTop())*d,left:c.left+this.offset.relative.left*d+this.offset.parent.left*d-("fixed"===this.cssPosition?-this.scrollParent.scrollLeft():f?0:e.scrollLeft())*d}
},_generatePosition:function(b){var c,d,e=this.options,f=b.pageX,g=b.pageY,h="absolute"!==this.cssPosition||this.scrollParent[0]!==document&&a.contains(this.scrollParent[0],this.offsetParent[0])?this.scrollParent:this.offsetParent,i=/(html|body)/i.test(h[0].tagName);return"relative"!==this.cssPosition||this.scrollParent[0]!==document&&this.scrollParent[0]!==this.offsetParent[0]||(this.offset.relative=this._getRelativeOffset()),this.originalPosition&&(this.containment&&(b.pageX-this.offset.click.left<this.containment[0]&&(f=this.containment[0]+this.offset.click.left),b.pageY-this.offset.click.top<this.containment[1]&&(g=this.containment[1]+this.offset.click.top),b.pageX-this.offset.click.left>this.containment[2]&&(f=this.containment[2]+this.offset.click.left),b.pageY-this.offset.click.top>this.containment[3]&&(g=this.containment[3]+this.offset.click.top)),e.grid&&(c=this.originalPageY+Math.round((g-this.originalPageY)/e.grid[1])*e.grid[1],g=this.containment?c-this.offset.click.top>=this.containment[1]&&c-this.offset.click.top<=this.containment[3]?c:c-this.offset.click.top>=this.containment[1]?c-e.grid[1]:c+e.grid[1]:c,d=this.originalPageX+Math.round((f-this.originalPageX)/e.grid[0])*e.grid[0],f=this.containment?d-this.offset.click.left>=this.containment[0]&&d-this.offset.click.left<=this.containment[2]?d:d-this.offset.click.left>=this.containment[0]?d-e.grid[0]:d+e.grid[0]:d)),{top:g-this.offset.click.top-this.offset.relative.top-this.offset.parent.top+("fixed"===this.cssPosition?-this.scrollParent.scrollTop():i?0:h.scrollTop()),left:f-this.offset.click.left-this.offset.relative.left-this.offset.parent.left+("fixed"===this.cssPosition?-this.scrollParent.scrollLeft():i?0:h.scrollLeft())}
},_rearrange:function(a,b,c,d){c?c[0].appendChild(this.placeholder[0]):b.item[0].parentNode.insertBefore(this.placeholder[0],"down"===this.direction?b.item[0]:b.item[0].nextSibling),this.counter=this.counter?++this.counter:1;var e=this.counter;this._delay(function(){e===this.counter&&this.refreshPositions(!d)})},_clear:function(a,b){this.reverting=!1;var c,d=[];if(!this._noFinalSort&&this.currentItem.parent().length&&this.placeholder.before(this.currentItem),this._noFinalSort=null,this.helper[0]===this.currentItem[0]){for(c in this._storedCSS)("auto"===this._storedCSS[c]||"static"===this._storedCSS[c])&&(this._storedCSS[c]="");
this.currentItem.css(this._storedCSS).removeClass("ui-sortable-helper")}else this.currentItem.show();for(this.fromOutside&&!b&&d.push(function(a){this._trigger("receive",a,this._uiHash(this.fromOutside))}),!this.fromOutside&&this.domPosition.prev===this.currentItem.prev().not(".ui-sortable-helper")[0]&&this.domPosition.parent===this.currentItem.parent()[0]||b||d.push(function(a){this._trigger("update",a,this._uiHash())}),this!==this.currentContainer&&(b||(d.push(function(a){this._trigger("remove",a,this._uiHash())
}),d.push(function(a){return function(b){a._trigger("receive",b,this._uiHash(this))}}.call(this,this.currentContainer)),d.push(function(a){return function(b){a._trigger("update",b,this._uiHash(this))}}.call(this,this.currentContainer)))),c=this.containers.length-1;c>=0;c--)b||d.push(function(a){return function(b){a._trigger("deactivate",b,this._uiHash(this))}}.call(this,this.containers[c])),this.containers[c].containerCache.over&&(d.push(function(a){return function(b){a._trigger("out",b,this._uiHash(this))}}.call(this,this.containers[c])),this.containers[c].containerCache.over=0);
if(this.storedCursor&&(this.document.find("body").css("cursor",this.storedCursor),this.storedStylesheet.remove()),this._storedOpacity&&this.helper.css("opacity",this._storedOpacity),this._storedZIndex&&this.helper.css("zIndex","auto"===this._storedZIndex?"":this._storedZIndex),this.dragging=!1,this.cancelHelperRemoval){if(!b){for(this._trigger("beforeStop",a,this._uiHash()),c=0;c<d.length;c++)d[c].call(this,a);this._trigger("stop",a,this._uiHash())}return this.fromOutside=!1,!1}if(b||this._trigger("beforeStop",a,this._uiHash()),this.placeholder[0].parentNode.removeChild(this.placeholder[0]),this.helper[0]!==this.currentItem[0]&&this.helper.remove(),this.helper=null,!b){for(c=0;c<d.length;c++)d[c].call(this,a);
this._trigger("stop",a,this._uiHash())}return this.fromOutside=!1,!0},_trigger:function(){a.Widget.prototype._trigger.apply(this,arguments)===!1&&this.cancel()},_uiHash:function(b){var c=b||this;return{helper:c.helper,placeholder:c.placeholder||a([]),position:c.position,originalPosition:c.originalPosition,offset:c.positionAbs,item:c.currentItem,sender:b?b.element:null}}})}(c)};a(),b.resolveWith(a)})};FD50.module("ui/sortable",a)}(),function(){var a=function(a){var b=this,c=a;a.require().script("ui/core","ui/mouse","ui/widget").done(function(){var a=function(){!function(a){function c(a){return parseInt(a,10)||0
}function d(a){return!isNaN(parseInt(a,10))}a.widget("ui.resizable",a.ui.mouse,{version:"1.10.4pre",widgetEventPrefix:"resize",options:{alsoResize:!1,animate:!1,animateDuration:"slow",animateEasing:"swing",aspectRatio:!1,autoHide:!1,containment:!1,ghost:!1,grid:!1,handles:"e,s,se",helper:!1,maxHeight:null,maxWidth:null,minHeight:10,minWidth:10,zIndex:90,resize:null,start:null,stop:null},_create:function(){var b,c,d,e,f,g=this,h=this.options;if(this.element.addClass("ui-resizable"),a.extend(this,{_aspectRatio:!!h.aspectRatio,aspectRatio:h.aspectRatio,originalElement:this.element,_proportionallyResizeElements:[],_helper:h.helper||h.ghost||h.animate?h.helper||"ui-resizable-helper":null}),this.element[0].nodeName.match(/canvas|textarea|input|select|button|img/i)&&(this.element.wrap(a("<div class='ui-wrapper' style='overflow: hidden;'></div>").css({position:this.element.css("position"),width:this.element.outerWidth(),height:this.element.outerHeight(),top:this.element.css("top"),left:this.element.css("left")})),this.element=this.element.parent().data("ui-resizable",this.element.data("ui-resizable")),this.elementIsWrapper=!0,this.element.css({marginLeft:this.originalElement.css("marginLeft"),marginTop:this.originalElement.css("marginTop"),marginRight:this.originalElement.css("marginRight"),marginBottom:this.originalElement.css("marginBottom")}),this.originalElement.css({marginLeft:0,marginTop:0,marginRight:0,marginBottom:0}),this.originalResizeStyle=this.originalElement.css("resize"),this.originalElement.css("resize","none"),this._proportionallyResizeElements.push(this.originalElement.css({position:"static",zoom:1,display:"block"})),this.originalElement.css({margin:this.originalElement.css("margin")}),this._proportionallyResize()),this.handles=h.handles||(a(".ui-resizable-handle",this.element).length?{n:".ui-resizable-n",e:".ui-resizable-e",s:".ui-resizable-s",w:".ui-resizable-w",se:".ui-resizable-se",sw:".ui-resizable-sw",ne:".ui-resizable-ne",nw:".ui-resizable-nw"}:"e,s,se"),this.handles.constructor===String)for("all"===this.handles&&(this.handles="n,e,s,w,se,sw,ne,nw"),b=this.handles.split(","),this.handles={},c=0;c<b.length;c++)d=a.trim(b[c]),f="ui-resizable-"+d,e=a("<div class='ui-resizable-handle "+f+"'></div>"),e.css({zIndex:h.zIndex}),"se"===d&&e.addClass("ui-icon ui-icon-gripsmall-diagonal-se"),this.handles[d]=".ui-resizable-"+d,this.element.append(e);
this._renderAxis=function(b){var c,d,e,f;b=b||this.element;for(c in this.handles)this.handles.hasOwnProperty(c)&&(this.handles[c].constructor===String&&(this.handles[c]=a(this.handles[c],this.element).show()),this.elementIsWrapper&&this.originalElement[0].nodeName.match(/textarea|input|select|button/i)&&(d=a(this.handles[c],this.element),f=/sw|ne|nw|se|n|s/.test(c)?d.outerHeight():d.outerWidth(),e=["padding",/ne|nw|n/.test(c)?"Top":/se|sw|s/.test(c)?"Bottom":/^e$/.test(c)?"Right":"Left"].join(""),b.css(e,f),this._proportionallyResize()),a(this.handles[c]).length)
},this._renderAxis(this.element),this._handles=a(".ui-resizable-handle",this.element).disableSelection(),this._handles.mouseover(function(){g.resizing||(this.className&&(e=this.className.match(/ui-resizable-(se|sw|ne|nw|n|e|s|w)/i)),g.axis=e&&e[1]?e[1]:"se")}),h.autoHide&&(this._handles.hide(),a(this.element).addClass("ui-resizable-autohide").mouseenter(function(){h.disabled||(a(this).removeClass("ui-resizable-autohide"),g._handles.show())}).mouseleave(function(){h.disabled||g.resizing||(a(this).addClass("ui-resizable-autohide"),g._handles.hide())
})),this._mouseInit()},_destroy:function(){this._mouseDestroy();var b,c=function(b){a(b).removeClass("ui-resizable ui-resizable-disabled ui-resizable-resizing").removeData("resizable").removeData("ui-resizable").unbind(".resizable").find(".ui-resizable-handle").remove()};return this.elementIsWrapper&&(c(this.element),b=this.element,this.originalElement.css({position:b.css("position"),width:b.outerWidth(),height:b.outerHeight(),top:b.css("top"),left:b.css("left")}).insertAfter(b),b.remove()),this.originalElement.css("resize",this.originalResizeStyle),c(this.originalElement),this
},_mouseCapture:function(b){var c,d,e=!1;for(c in this.handles)this.handles.hasOwnProperty(c)&&(d=a(this.handles[c])[0],(d===b.target||a.contains(d,b.target))&&(e=!0));return!this.options.disabled&&e},_mouseStart:function(b){var d,e,f,g=this.options,h=this.element.position(),i=this.element;return this.resizing=!0,/absolute/.test(i.css("position"))?i.css({position:"absolute",top:i.css("top"),left:i.css("left")}):i.is(".ui-draggable")&&i.css({position:"absolute",top:h.top,left:h.left}),this._renderProxy(),d=c(this.helper.css("left")),e=c(this.helper.css("top")),g.containment&&(d+=a(g.containment).scrollLeft()||0,e+=a(g.containment).scrollTop()||0),this.offset=this.helper.offset(),this.position={left:d,top:e},this.size=this._helper?{width:i.outerWidth(),height:i.outerHeight()}:{width:i.width(),height:i.height()},this.originalSize=this._helper?{width:i.outerWidth(),height:i.outerHeight()}:{width:i.width(),height:i.height()},this.originalPosition={left:d,top:e},this.sizeDiff={width:i.outerWidth()-i.width(),height:i.outerHeight()-i.height()},this.originalMousePosition={left:b.pageX,top:b.pageY},this.aspectRatio="number"==typeof g.aspectRatio?g.aspectRatio:this.originalSize.width/this.originalSize.height||1,f=a(".ui-resizable-"+this.axis).css("cursor"),a("body").css("cursor","auto"===f?this.axis+"-resize":f),i.addClass("ui-resizable-resizing"),this._propagate("start",b),!0
},_mouseDrag:function(b){var c,d=this.helper,e={},f=this.originalMousePosition,g=this.axis,h=this.position.top,i=this.position.left,j=this.size.width,k=this.size.height,l=b.pageX-f.left||0,m=b.pageY-f.top||0,n=this._change[g];return n?(c=n.apply(this,[b,l,m]),this._updateVirtualBoundaries(b.shiftKey),(this._aspectRatio||b.shiftKey)&&(c=this._updateRatio(c,b)),c=this._respectSize(c,b),this._updateCache(c),this._propagate("resize",b),this.position.top!==h&&(e.top=this.position.top+"px"),this.position.left!==i&&(e.left=this.position.left+"px"),this.size.width!==j&&(e.width=this.size.width+"px"),this.size.height!==k&&(e.height=this.size.height+"px"),d.css(e),!this._helper&&this._proportionallyResizeElements.length&&this._proportionallyResize(),a.isEmptyObject(e)||this._trigger("resize",b,this.ui()),!1):!1
},_mouseStop:function(b){this.resizing=!1;var c,d,e,f,g,h,i,j=this.options,k=this;return this._helper&&(c=this._proportionallyResizeElements,d=c.length&&/textarea/i.test(c[0].nodeName),e=d&&a.ui.hasScroll(c[0],"left")?0:k.sizeDiff.height,f=d?0:k.sizeDiff.width,g={width:k.helper.width()-f,height:k.helper.height()-e},h=parseInt(k.element.css("left"),10)+(k.position.left-k.originalPosition.left)||null,i=parseInt(k.element.css("top"),10)+(k.position.top-k.originalPosition.top)||null,j.animate||this.element.css(a.extend(g,{top:i,left:h})),k.helper.height(k.size.height),k.helper.width(k.size.width),this._helper&&!j.animate&&this._proportionallyResize()),a("body").css("cursor","auto"),this.element.removeClass("ui-resizable-resizing"),this._propagate("stop",b),this._helper&&this.helper.remove(),!1
},_updateVirtualBoundaries:function(a){var b,c,e,f,g,h=this.options;g={minWidth:d(h.minWidth)?h.minWidth:0,maxWidth:d(h.maxWidth)?h.maxWidth:1/0,minHeight:d(h.minHeight)?h.minHeight:0,maxHeight:d(h.maxHeight)?h.maxHeight:1/0},(this._aspectRatio||a)&&(b=g.minHeight*this.aspectRatio,e=g.minWidth/this.aspectRatio,c=g.maxHeight*this.aspectRatio,f=g.maxWidth/this.aspectRatio,b>g.minWidth&&(g.minWidth=b),e>g.minHeight&&(g.minHeight=e),c<g.maxWidth&&(g.maxWidth=c),f<g.maxHeight&&(g.maxHeight=f)),this._vBoundaries=g
},_updateCache:function(a){this.offset=this.helper.offset(),d(a.left)&&(this.position.left=a.left),d(a.top)&&(this.position.top=a.top),d(a.height)&&(this.size.height=a.height),d(a.width)&&(this.size.width=a.width)},_updateRatio:function(a){var b=this.position,c=this.size,e=this.axis;return d(a.height)?a.width=a.height*this.aspectRatio:d(a.width)&&(a.height=a.width/this.aspectRatio),"sw"===e&&(a.left=b.left+(c.width-a.width),a.top=null),"nw"===e&&(a.top=b.top+(c.height-a.height),a.left=b.left+(c.width-a.width)),a
},_respectSize:function(a){var b=this._vBoundaries,c=this.axis,e=d(a.width)&&b.maxWidth&&b.maxWidth<a.width,f=d(a.height)&&b.maxHeight&&b.maxHeight<a.height,g=d(a.width)&&b.minWidth&&b.minWidth>a.width,h=d(a.height)&&b.minHeight&&b.minHeight>a.height,i=this.originalPosition.left+this.originalSize.width,j=this.position.top+this.size.height,k=/sw|nw|w/.test(c),l=/nw|ne|n/.test(c);return g&&(a.width=b.minWidth),h&&(a.height=b.minHeight),e&&(a.width=b.maxWidth),f&&(a.height=b.maxHeight),g&&k&&(a.left=i-b.minWidth),e&&k&&(a.left=i-b.maxWidth),h&&l&&(a.top=j-b.minHeight),f&&l&&(a.top=j-b.maxHeight),a.width||a.height||a.left||!a.top?a.width||a.height||a.top||!a.left||(a.left=null):a.top=null,a
},_proportionallyResize:function(){if(this._proportionallyResizeElements.length){var a,b,c,d,e,f=this.helper||this.element;for(a=0;a<this._proportionallyResizeElements.length;a++){if(e=this._proportionallyResizeElements[a],!this.borderDif)for(this.borderDif=[],c=[e.css("borderTopWidth"),e.css("borderRightWidth"),e.css("borderBottomWidth"),e.css("borderLeftWidth")],d=[e.css("paddingTop"),e.css("paddingRight"),e.css("paddingBottom"),e.css("paddingLeft")],b=0;b<c.length;b++)this.borderDif[b]=(parseInt(c[b],10)||0)+(parseInt(d[b],10)||0);
e.css({height:f.height()-this.borderDif[0]-this.borderDif[2]||0,width:f.width()-this.borderDif[1]-this.borderDif[3]||0})}}},_renderProxy:function(){var b=this.element,c=this.options;this.elementOffset=b.offset(),this._helper?(this.helper=this.helper||a("<div style='overflow:hidden;'></div>"),this.helper.addClass(this._helper).css({width:this.element.outerWidth()-1,height:this.element.outerHeight()-1,position:"absolute",left:this.elementOffset.left+"px",top:this.elementOffset.top+"px",zIndex:++c.zIndex}),this.helper.appendTo("body").disableSelection()):this.helper=this.element
},_change:{e:function(a,b){return{width:this.originalSize.width+b}},w:function(a,b){var c=this.originalSize,d=this.originalPosition;return{left:d.left+b,width:c.width-b}},n:function(a,b,c){var d=this.originalSize,e=this.originalPosition;return{top:e.top+c,height:d.height-c}},s:function(a,b,c){return{height:this.originalSize.height+c}},se:function(b,c,d){return a.extend(this._change.s.apply(this,arguments),this._change.e.apply(this,[b,c,d]))},sw:function(b,c,d){return a.extend(this._change.s.apply(this,arguments),this._change.w.apply(this,[b,c,d]))
},ne:function(b,c,d){return a.extend(this._change.n.apply(this,arguments),this._change.e.apply(this,[b,c,d]))},nw:function(b,c,d){return a.extend(this._change.n.apply(this,arguments),this._change.w.apply(this,[b,c,d]))}},_propagate:function(b,c){a.ui.plugin.call(this,b,[c,this.ui()]),"resize"!==b&&this._trigger(b,c,this.ui())},plugins:{},ui:function(){return{originalElement:this.originalElement,element:this.element,helper:this.helper,position:this.position,size:this.size,originalSize:this.originalSize,originalPosition:this.originalPosition}
}}),a.ui.plugin.add("resizable","animate",{stop:function(b){var c=a(this).data("ui-resizable"),d=c.options,e=c._proportionallyResizeElements,f=e.length&&/textarea/i.test(e[0].nodeName),g=f&&a.ui.hasScroll(e[0],"left")?0:c.sizeDiff.height,h=f?0:c.sizeDiff.width,i={width:c.size.width-h,height:c.size.height-g},j=parseInt(c.element.css("left"),10)+(c.position.left-c.originalPosition.left)||null,k=parseInt(c.element.css("top"),10)+(c.position.top-c.originalPosition.top)||null;c.element.animate(a.extend(i,k&&j?{top:k,left:j}:{}),{duration:d.animateDuration,easing:d.animateEasing,step:function(){var d={width:parseInt(c.element.css("width"),10),height:parseInt(c.element.css("height"),10),top:parseInt(c.element.css("top"),10),left:parseInt(c.element.css("left"),10)};
e&&e.length&&a(e[0]).css({width:d.width,height:d.height}),c._updateCache(d),c._propagate("resize",b)}})}}),a.ui.plugin.add("resizable","containment",{start:function(){var b,d,e,f,g,h,i,j=a(this).data("ui-resizable"),k=j.options,l=j.element,m=k.containment,n=m instanceof a?m.get(0):/parent/.test(m)?l.parent().get(0):m;n&&(j.containerElement=a(n),/document/.test(m)||m===document?(j.containerOffset={left:0,top:0},j.containerPosition={left:0,top:0},j.parentData={element:a(document),left:0,top:0,width:a(document).width(),height:a(document).height()||document.body.parentNode.scrollHeight}):(b=a(n),d=[],a(["Top","Right","Left","Bottom"]).each(function(a,e){d[a]=c(b.css("padding"+e))
}),j.containerOffset=b.offset(),j.containerPosition=b.position(),j.containerSize={height:b.innerHeight()-d[3],width:b.innerWidth()-d[1]},e=j.containerOffset,f=j.containerSize.height,g=j.containerSize.width,h=a.ui.hasScroll(n,"left")?n.scrollWidth:g,i=a.ui.hasScroll(n)?n.scrollHeight:f,j.parentData={element:n,left:e.left,top:e.top,width:h,height:i}))},resize:function(b){var c,d,e,f,g=a(this).data("ui-resizable"),h=g.options,i=g.containerOffset,j=g.position,k=g._aspectRatio||b.shiftKey,l={top:0,left:0},m=g.containerElement;
m[0]!==document&&/static/.test(m.css("position"))&&(l=i),j.left<(g._helper?i.left:0)&&(g.size.width=g.size.width+(g._helper?g.position.left-i.left:g.position.left-l.left),k&&(g.size.height=g.size.width/g.aspectRatio),g.position.left=h.helper?i.left:0),j.top<(g._helper?i.top:0)&&(g.size.height=g.size.height+(g._helper?g.position.top-i.top:g.position.top),k&&(g.size.width=g.size.height*g.aspectRatio),g.position.top=g._helper?i.top:0),g.offset.left=g.parentData.left+g.position.left,g.offset.top=g.parentData.top+g.position.top,c=Math.abs((g._helper?g.offset.left-l.left:g.offset.left-l.left)+g.sizeDiff.width),d=Math.abs((g._helper?g.offset.top-l.top:g.offset.top-i.top)+g.sizeDiff.height),e=g.containerElement.get(0)===g.element.parent().get(0),f=/relative|absolute/.test(g.containerElement.css("position")),e&&f&&(c-=g.parentData.left),c+g.size.width>=g.parentData.width&&(g.size.width=g.parentData.width-c,k&&(g.size.height=g.size.width/g.aspectRatio)),d+g.size.height>=g.parentData.height&&(g.size.height=g.parentData.height-d,k&&(g.size.width=g.size.height*g.aspectRatio))
},stop:function(){var b=a(this).data("ui-resizable"),c=b.options,d=b.containerOffset,e=b.containerPosition,f=b.containerElement,g=a(b.helper),h=g.offset(),i=g.outerWidth()-b.sizeDiff.width,j=g.outerHeight()-b.sizeDiff.height;b._helper&&!c.animate&&/relative/.test(f.css("position"))&&a(this).css({left:h.left-e.left-d.left,width:i,height:j}),b._helper&&!c.animate&&/static/.test(f.css("position"))&&a(this).css({left:h.left-e.left-d.left,width:i,height:j})}}),a.ui.plugin.add("resizable","alsoResize",{start:function(){var b=a(this).data("ui-resizable"),c=b.options,d=function(b){a(b).each(function(){var b=a(this);
b.data("ui-resizable-alsoresize",{width:parseInt(b.width(),10),height:parseInt(b.height(),10),left:parseInt(b.css("left"),10),top:parseInt(b.css("top"),10)})})};"object"!=typeof c.alsoResize||c.alsoResize.parentNode?d(c.alsoResize):c.alsoResize.length?(c.alsoResize=c.alsoResize[0],d(c.alsoResize)):a.each(c.alsoResize,function(a){d(a)})},resize:function(b,c){var d=a(this).data("ui-resizable"),e=d.options,f=d.originalSize,g=d.originalPosition,h={height:d.size.height-f.height||0,width:d.size.width-f.width||0,top:d.position.top-g.top||0,left:d.position.left-g.left||0},i=function(b,d){a(b).each(function(){var b=a(this),e=a(this).data("ui-resizable-alsoresize"),f={},g=d&&d.length?d:b.parents(c.originalElement[0]).length?["width","height"]:["width","height","top","left"];
a.each(g,function(a,b){var c=(e[b]||0)+(h[b]||0);c&&c>=0&&(f[b]=c||null)}),b.css(f)})};"object"!=typeof e.alsoResize||e.alsoResize.nodeType?i(e.alsoResize):a.each(e.alsoResize,function(a,b){i(a,b)})},stop:function(){a(this).removeData("resizable-alsoresize")}}),a.ui.plugin.add("resizable","ghost",{start:function(){var b=a(this).data("ui-resizable"),c=b.options,d=b.size;b.ghost=b.originalElement.clone(),b.ghost.css({opacity:.25,display:"block",position:"relative",height:d.height,width:d.width,margin:0,left:0,top:0}).addClass("ui-resizable-ghost").addClass("string"==typeof c.ghost?c.ghost:""),b.ghost.appendTo(b.helper)
},resize:function(){var b=a(this).data("ui-resizable");b.ghost&&b.ghost.css({position:"relative",height:b.size.height,width:b.size.width})},stop:function(){var b=a(this).data("ui-resizable");b.ghost&&b.helper&&b.helper.get(0).removeChild(b.ghost.get(0))}}),a.ui.plugin.add("resizable","grid",{resize:function(){var b=a(this).data("ui-resizable"),c=b.options,d=b.size,e=b.originalSize,f=b.originalPosition,g=b.axis,h="number"==typeof c.grid?[c.grid,c.grid]:c.grid,i=h[0]||1,j=h[1]||1,k=Math.round((d.width-e.width)/i)*i,l=Math.round((d.height-e.height)/j)*j,m=e.width+k,n=e.height+l,o=c.maxWidth&&c.maxWidth<m,p=c.maxHeight&&c.maxHeight<n,q=c.minWidth&&c.minWidth>m,r=c.minHeight&&c.minHeight>n;
c.grid=h,q&&(m+=i),r&&(n+=j),o&&(m-=i),p&&(n-=j),/^(se|s|e)$/.test(g)?(b.size.width=m,b.size.height=n):/^(ne)$/.test(g)?(b.size.width=m,b.size.height=n,b.position.top=f.top-l):/^(sw)$/.test(g)?(b.size.width=m,b.size.height=n,b.position.left=f.left-k):(b.size.width=m,b.size.height=n,b.position.top=f.top-l,b.position.left=f.left-k)}})}(c)};a(),b.resolveWith(a)})};FD50.module("ui/resizable",a)}(),function(){var a=function(a){var b=this,c=a,d=function(){!function(a){function c(a){return"object"==typeof a?a:{top:a,left:a}
}var b=a.scrollTo=function(b,c,d){a(window).scrollTo(b,c,d)};b.defaults={axis:"xy",duration:parseFloat(a.fn.jquery)>=1.3?0:1,limit:!0},b.window=function(){return a(window)._scrollable()},a.fn._scrollable=function(){return this.map(function(){var b=this,c=!b.nodeName||-1!=a.inArray(b.nodeName.toLowerCase(),["iframe","#document","html","body"]);if(!c)return b;var d=(b.contentWindow||b).document||b.ownerDocument||b;return/webkit/i.test(navigator.userAgent)||"BackCompat"==d.compatMode?d.body:d.documentElement})},a.fn.scrollTo=function(d,e,f){return"object"==typeof e&&(f=e,e=0),"function"==typeof f&&(f={onAfter:f}),"max"==d&&(d=9e9),f=a.extend({},b.defaults,f),e=e||f.duration,f.queue=f.queue&&f.axis.length>1,f.queue&&(e/=2),f.offset=c(f.offset),f.over=c(f.over),this._scrollable().each(function(){function m(a){h.animate(k,e,f.easing,a&&function(){a.call(this,d,f)
})}if(null!=d){var j,g=this,h=a(g),i=d,k={},l=h.is("html,body");switch(typeof i){case"number":case"string":if(/^([+-]=)?\d+(\.\d+)?(px|%)?$/.test(i)){i=c(i);break}if(i=a(i,this),!i.length)return;case"object":(i.is||i.style)&&(j=(i=a(i)).offset())}a.each(f.axis.split(""),function(a,c){var d="x"==c?"Left":"Top",e=d.toLowerCase(),n="scroll"+d,o=g[n],p=b.max(g,c);if(j)k[n]=j[e]+(l?0:o-h.offset()[e]),f.margin&&(k[n]-=parseInt(i.css("margin"+d))||0,k[n]-=parseInt(i.css("border"+d+"Width"))||0),k[n]+=f.offset[e]||0,f.over[e]&&(k[n]+=i["x"==c?"width":"height"]()*f.over[e]);
else{var q=i[e];k[n]=q.slice&&"%"==q.slice(-1)?parseFloat(q)/100*p:q}f.limit&&/^\d+$/.test(k[n])&&(k[n]=k[n]<=0?0:Math.min(k[n],p)),!a&&f.queue&&(o!=k[n]&&m(f.onAfterFirst),delete k[n])}),m(f.onAfter)}}).end()},a.fn.scrollIntoView=function(b){var b=a(b);if(!(b.length<1)){var c=this.offset(),d=this.height(),e=c.top,f=e+d,g=b.offset(),h=b.height(),i=g.top,j=i+h;return j>f?this.scrollTo(b):e>i?this.scrollTo(b,{offset:-1*(d-h)}):void 0}},b.max=function(b,c){var d="x"==c?"Width":"Height",e="scroll"+d;if(!a(b).is("html,body"))return b[e]-a(b)[d.toLowerCase()]();
var f="client"+d,g=b.ownerDocument.documentElement,h=b.ownerDocument.body;return Math.max(g[e],h[e])-Math.min(g[f],h[f])}}(c)};d(),b.resolveWith(d)};FD50.module("scrollTo",a)}(),function(){var a=function(a){var b=this,c=function(){a.fn.image=function(b){var b=a.Image[b];return b&&b.apply(this[0],a.makeArray(arguments).slice(1))},a.Image={get:function(b){var c="IMG"===this.nodeName,d=a(c?this:new Image),e=a.Deferred();return d.load(function(){var a,b,f,g;c||d.appendTo("body");var h={width:a=d.width(),height:b=d.height(),aspectRatio:f=a/b,orientation:g=1===f?"square":1>f?"tall":"wide"};
d.css({position:"absolute",left:"-99999px"}).data(h).addClass("orientation-"+g).removeAttr("style"),c||d.detach(),e.resolve(d,h)}).error(function(){e.reject()}).attr("src",b),e},aspectRatio:function(b,c){return a.isPlainObject(b)&&(b=b.width,c=b.height),b/c},orientation:function(b,c){return a.isPlainObject(b)&&(b=b.width,c=b.height),b===c?"square":b>c?"wide":"tall"},resizeProportionate:function(a,b,c,d,e){var f=a,g=b,h=c/a;f=a*h,g=b*h;var i=g>d;return"outer"==e&&(i=d>g),i&&(h=d/b,f=a*h,g=b*h),{top:(d-g)/2,left:(c-f)/2,width:f,height:g}
},resizeWithin:function(b,c,d,e){return a.Image.resizeProportionate(b,c,d,e,"inner")},resizeToFill:function(b,c,d,e){return a.Image.resizeProportionate(b,c,d,e,"outer")}}};c(),b.resolveWith(c)};FD50.module("image",a)}(),function(){var a=function(a){var b=this,c=function(){(function(c){function ab(){return{empty:!1,unusedTokens:[],unusedInput:[],overflow:-2,charsLeftOver:0,nullInput:!1,invalidMonth:null,invalidFormat:!1,userInvalidated:!1,iso:!1}}function bb(a,b){function e(){d.suppressDeprecationWarnings===!1&&"undefined"!=typeof console&&console.warn&&console.warn("Deprecation warning: "+a)
}var c=!0;return hb(function(){return c&&(e(),c=!1),b.apply(this,arguments)},b)}function cb(a,b){return function(c){return kb(a.call(this,c),b)}}function db(a,b){return function(c){return this.lang().ordinal(a.call(this,c),b)}}function eb(){}function fb(a){xb(a),hb(this,a)}function gb(a){var b=qb(a),c=b.year||0,d=b.quarter||0,e=b.month||0,f=b.week||0,g=b.day||0,h=b.hour||0,i=b.minute||0,j=b.second||0,k=b.millisecond||0;this._milliseconds=+k+1e3*j+6e4*i+36e5*h,this._days=+g+7*f,this._months=+e+3*d+12*c,this._data={},this._bubble()
}function hb(a,b){for(var c in b)b.hasOwnProperty(c)&&(a[c]=b[c]);return b.hasOwnProperty("toString")&&(a.toString=b.toString),b.hasOwnProperty("valueOf")&&(a.valueOf=b.valueOf),a}function ib(a){var c,b={};for(c in a)a.hasOwnProperty(c)&&r.hasOwnProperty(c)&&(b[c]=a[c]);return b}function jb(a){return 0>a?Math.ceil(a):Math.floor(a)}function kb(a,b,c){for(var d=""+Math.abs(a),e=a>=0;d.length<b;)d="0"+d;return(e?c?"+":"":"-")+d}function lb(a,b,c,e){var f=b._milliseconds,g=b._days,h=b._months;e=null==e?!0:e,f&&a._d.setTime(+a._d+f*c),g&&cc(a,"Date",bc(a,"Date")+g*c),h&&ac(a,bc(a,"Month")+h*c),e&&d.updateOffset(a,g||h)
}function mb(a){return"[object Array]"===Object.prototype.toString.call(a)}function nb(a){return"[object Date]"===Object.prototype.toString.call(a)||a instanceof Date}function ob(a,b,c){var g,d=Math.min(a.length,b.length),e=Math.abs(a.length-b.length),f=0;for(g=0;d>g;g++)(c&&a[g]!==b[g]||!c&&sb(a[g])!==sb(b[g]))&&f++;return f+e}function pb(a){if(a){var b=a.toLowerCase().replace(/(.)s$/,"$1");a=V[a]||W[b]||b}return a}function qb(a){var c,d,b={};for(d in a)a.hasOwnProperty(d)&&(c=pb(d),c&&(b[c]=a[d]));return b
}function rb(a){var b,e;if(0===a.indexOf("week"))b=7,e="day";else{if(0!==a.indexOf("month"))return;b=12,e="month"}d[a]=function(f,g){var h,i,j=d.fn._lang[a],k=[];if("number"==typeof f&&(g=f,f=c),i=function(a){var b=d().utc().set(e,a);return j.call(d.fn._lang,b,f||"")},null!=g)return i(g);for(h=0;b>h;h++)k.push(i(h));return k}}function sb(a){var b=+a,c=0;return 0!==b&&isFinite(b)&&(c=b>=0?Math.floor(b):Math.ceil(b)),c}function tb(a,b){return new Date(Date.UTC(a,b+1,0)).getUTCDate()}function ub(a,b,c){return Zb(d([a,11,31+b-c]),b,c).week
}function vb(a){return wb(a)?366:365}function wb(a){return a%4===0&&a%100!==0||a%400===0}function xb(a){var b;a._a&&-2===a._pf.overflow&&(b=a._a[k]<0||a._a[k]>11?k:a._a[l]<1||a._a[l]>tb(a._a[j],a._a[k])?l:a._a[m]<0||a._a[m]>23?m:a._a[n]<0||a._a[n]>59?n:a._a[o]<0||a._a[o]>59?o:a._a[p]<0||a._a[p]>999?p:-1,a._pf._overflowDayOfYear&&(j>b||b>l)&&(b=l),a._pf.overflow=b)}function yb(a){return null==a._isValid&&(a._isValid=!isNaN(a._d.getTime())&&a._pf.overflow<0&&!a._pf.empty&&!a._pf.invalidMonth&&!a._pf.nullInput&&!a._pf.invalidFormat&&!a._pf.userInvalidated,a._strict&&(a._isValid=a._isValid&&0===a._pf.charsLeftOver&&0===a._pf.unusedTokens.length)),a._isValid
}function zb(a){return a?a.toLowerCase().replace("_","-"):a}function Ab(a,b){return b._isUTC?d(a).zone(b._offset||0):d(a).local()}function Bb(a,b){return b.abbr=a,q[a]||(q[a]=new eb),q[a].set(b),q[a]}function Cb(a){delete q[a]}function Db(a){var c,e,f,g,b=0,h=function(a){if(!q[a]&&s)try{require("./lang/"+a)}catch(b){}return q[a]};if(!a)return d.fn._lang;if(!mb(a)){if(e=h(a))return e;a=[a]}for(;b<a.length;){for(g=zb(a[b]).split("-"),c=g.length,f=zb(a[b+1]),f=f?f.split("-"):null;c>0;){if(e=h(g.slice(0,c).join("-")))return e;
if(f&&f.length>=c&&ob(g,f,!0)>=c-1)break;c--}b++}return d.fn._lang}function Eb(a){return a.match(/\[[\s\S]/)?a.replace(/^\[|\]$/g,""):a.replace(/\\/g,"")}function Fb(a){var c,d,b=a.match(w);for(c=0,d=b.length;d>c;c++)b[c]=$[b[c]]?$[b[c]]:Eb(b[c]);return function(e){var f="";for(c=0;d>c;c++)f+=b[c]instanceof Function?b[c].call(e,a):b[c];return f}}function Gb(a,b){return a.isValid()?(b=Hb(b,a.lang()),X[b]||(X[b]=Fb(b)),X[b](a)):a.lang().invalidDate()}function Hb(a,b){function d(a){return b.longDateFormat(a)||a
}var c=5;for(x.lastIndex=0;c>=0&&x.test(a);)a=a.replace(x,d),x.lastIndex=0,c-=1;return a}function Ib(a,b){var c,d=b._strict;switch(a){case"Q":return I;case"DDDD":return K;case"YYYY":case"GGGG":case"gggg":return d?L:A;case"Y":case"G":case"g":return N;case"YYYYYY":case"YYYYY":case"GGGGG":case"ggggg":return d?M:B;case"S":if(d)return I;case"SS":if(d)return J;case"SSS":if(d)return K;case"DDD":return z;case"MMM":case"MMMM":case"dd":case"ddd":case"dddd":return D;case"a":case"A":return Db(b._l)._meridiemParse;case"X":return G;
case"Z":case"ZZ":return E;case"T":return F;case"SSSS":return C;case"MM":case"DD":case"YY":case"GG":case"gg":case"HH":case"hh":case"mm":case"ss":case"ww":case"WW":return d?J:y;case"M":case"D":case"d":case"H":case"h":case"m":case"s":case"w":case"W":case"e":case"E":return y;case"Do":return H;default:return c=new RegExp(Qb(Pb(a.replace("\\","")),"i"))}}function Jb(a){a=a||"";var b=a.match(E)||[],c=b[b.length-1]||[],d=(c+"").match(S)||["-",0,0],e=+(60*d[1])+sb(d[2]);return"+"===d[0]?-e:e}function Kb(a,b,c){var e,f=c._a;
switch(a){case"Q":null!=b&&(f[k]=3*(sb(b)-1));break;case"M":case"MM":null!=b&&(f[k]=sb(b)-1);break;case"MMM":case"MMMM":e=Db(c._l).monthsParse(b),null!=e?f[k]=e:c._pf.invalidMonth=b;break;case"D":case"DD":null!=b&&(f[l]=sb(b));break;case"Do":null!=b&&(f[l]=sb(parseInt(b,10)));break;case"DDD":case"DDDD":null!=b&&(c._dayOfYear=sb(b));break;case"YY":f[j]=d.parseTwoDigitYear(b);break;case"YYYY":case"YYYYY":case"YYYYYY":f[j]=sb(b);break;case"a":case"A":c._isPm=Db(c._l).isPM(b);break;case"H":case"HH":case"h":case"hh":f[m]=sb(b);
break;case"m":case"mm":f[n]=sb(b);break;case"s":case"ss":f[o]=sb(b);break;case"S":case"SS":case"SSS":case"SSSS":f[p]=sb(1e3*("0."+b));break;case"X":c._d=new Date(1e3*parseFloat(b));break;case"Z":case"ZZ":c._useUTC=!0,c._tzm=Jb(b);break;case"w":case"ww":case"W":case"WW":case"d":case"dd":case"ddd":case"dddd":case"e":case"E":a=a.substr(0,1);case"gg":case"gggg":case"GG":case"GGGG":case"GGGGG":a=a.substr(0,2),b&&(c._w=c._w||{},c._w[a]=b)}}function Lb(a){var b,c,f,g,h,i,o,p,q,r,e=[];if(!a._d){for(f=Nb(a),a._w&&null==a._a[l]&&null==a._a[k]&&(h=function(b){var c=parseInt(b,10);
return b?b.length<3?c>68?1900+c:2e3+c:c:null==a._a[j]?d().weekYear():a._a[j]},i=a._w,null!=i.GG||null!=i.W||null!=i.E?o=$b(h(i.GG),i.W||1,i.E,4,1):(p=Db(a._l),q=null!=i.d?Wb(i.d,p):null!=i.e?parseInt(i.e,10)+p._week.dow:0,r=parseInt(i.w,10)||1,null!=i.d&&q<p._week.dow&&r++,o=$b(h(i.gg),r,q,p._week.doy,p._week.dow)),a._a[j]=o.year,a._dayOfYear=o.dayOfYear),a._dayOfYear&&(g=null==a._a[j]?f[j]:a._a[j],a._dayOfYear>vb(g)&&(a._pf._overflowDayOfYear=!0),c=Vb(g,0,a._dayOfYear),a._a[k]=c.getUTCMonth(),a._a[l]=c.getUTCDate()),b=0;3>b&&null==a._a[b];++b)a._a[b]=e[b]=f[b];
for(;7>b;b++)a._a[b]=e[b]=null==a._a[b]?2===b?1:0:a._a[b];e[m]+=sb((a._tzm||0)/60),e[n]+=sb((a._tzm||0)%60),a._d=(a._useUTC?Vb:Ub).apply(null,e)}}function Mb(a){var b;a._d||(b=qb(a._i),a._a=[b.year,b.month,b.day,b.hour,b.minute,b.second,b.millisecond],Lb(a))}function Nb(a){var b=new Date;return a._useUTC?[b.getUTCFullYear(),b.getUTCMonth(),b.getUTCDate()]:[b.getFullYear(),b.getMonth(),b.getDate()]}function Ob(a){a._a=[],a._pf.empty=!0;var d,e,f,g,h,b=Db(a._l),c=""+a._i,i=c.length,j=0;for(f=Hb(a._f,b).match(w)||[],d=0;d<f.length;d++)g=f[d],e=(c.match(Ib(g,a))||[])[0],e&&(h=c.substr(0,c.indexOf(e)),h.length>0&&a._pf.unusedInput.push(h),c=c.slice(c.indexOf(e)+e.length),j+=e.length),$[g]?(e?a._pf.empty=!1:a._pf.unusedTokens.push(g),Kb(g,e,a)):a._strict&&!e&&a._pf.unusedTokens.push(g);
a._pf.charsLeftOver=i-j,c.length>0&&a._pf.unusedInput.push(c),a._isPm&&a._a[m]<12&&(a._a[m]+=12),a._isPm===!1&&12===a._a[m]&&(a._a[m]=0),Lb(a),xb(a)}function Pb(a){return a.replace(/\\(\[)|\\(\])|\[([^\]\[]*)\]|\\(.)/g,function(a,b,c,d,e){return b||c||d||e})}function Qb(a){return a.replace(/[-\/\\^$*+?.()|[\]{}]/g,"\\$&")}function Rb(a){var b,c,d,e,f;if(0===a._f.length)return a._pf.invalidFormat=!0,a._d=new Date(0/0),void 0;for(e=0;e<a._f.length;e++)f=0,b=hb({},a),b._pf=ab(),b._f=a._f[e],Ob(b),yb(b)&&(f+=b._pf.charsLeftOver,f+=10*b._pf.unusedTokens.length,b._pf.score=f,(null==d||d>f)&&(d=f,c=b));
hb(a,c||b)}function Sb(a){var b,c,e=a._i,f=O.exec(e);if(f){for(a._pf.iso=!0,b=0,c=Q.length;c>b;b++)if(Q[b][1].exec(e)){a._f=Q[b][0]+(f[6]||" ");break}for(b=0,c=R.length;c>b;b++)if(R[b][1].exec(e)){a._f+=R[b][0];break}e.match(E)&&(a._f+="Z"),Ob(a)}else d.createFromInputFallback(a)}function Tb(a){var b=a._i,e=t.exec(b);b===c?a._d=new Date:e?a._d=new Date(+e[1]):"string"==typeof b?Sb(a):mb(b)?(a._a=b.slice(0),Lb(a)):nb(b)?a._d=new Date(+b):"object"==typeof b?Mb(a):"number"==typeof b?a._d=new Date(b):d.createFromInputFallback(a)
}function Ub(a,b,c,d,e,f,g){var h=new Date(a,b,c,d,e,f,g);return 1970>a&&h.setFullYear(a),h}function Vb(a){var b=new Date(Date.UTC.apply(null,arguments));return 1970>a&&b.setUTCFullYear(a),b}function Wb(a,b){if("string"==typeof a)if(isNaN(a)){if(a=b.weekdaysParse(a),"number"!=typeof a)return null}else a=parseInt(a,10);return a}function Xb(a,b,c,d,e){return e.relativeTime(b||1,!!c,a,d)}function Yb(a,b,c){var d=h(Math.abs(a)/1e3),e=h(d/60),f=h(e/60),g=h(f/24),i=h(g/365),j=45>d&&["s",d]||1===e&&["m"]||45>e&&["mm",e]||1===f&&["h"]||22>f&&["hh",f]||1===g&&["d"]||25>=g&&["dd",g]||45>=g&&["M"]||345>g&&["MM",h(g/30)]||1===i&&["y"]||["yy",i];
return j[2]=b,j[3]=a>0,j[4]=c,Xb.apply({},j)}function Zb(a,b,c){var g,e=c-b,f=c-a.day();return f>e&&(f-=7),e-7>f&&(f+=7),g=d(a).add("d",f),{week:Math.ceil(g.dayOfYear()/7),year:g.year()}}function $b(a,b,c,d,e){var g,h,f=Vb(a,0,1).getUTCDay();return c=null!=c?c:e,g=e-f+(f>d?7:0)-(e>f?7:0),h=7*(b-1)+(c-e)+g+1,{year:h>0?a:a-1,dayOfYear:h>0?h:vb(a-1)+h}}function _b(a){var b=a._i,e=a._f;return null===b||e===c&&""===b?d.invalid({nullInput:!0}):("string"==typeof b&&(a._i=b=Db().preparse(b)),d.isMoment(b)?(a=ib(b),a._d=new Date(+b._d)):e?mb(e)?Rb(a):Ob(a):Tb(a),new fb(a))
}function ac(a,b){var c;return"string"==typeof b&&(b=a.lang().monthsParse(b),"number"!=typeof b)?a:(c=Math.min(a.date(),tb(a.year(),b)),a._d["set"+(a._isUTC?"UTC":"")+"Month"](b,c),a)}function bc(a,b){return a._d["get"+(a._isUTC?"UTC":"")+b]()}function cc(a,b,c){return"Month"===b?ac(a,c):a._d["set"+(a._isUTC?"UTC":"")+b](c)}function dc(a,b){return function(c){return null!=c?(cc(this,a,c),d.updateOffset(this,b),this):bc(this,a)}}function ec(a){d.duration.fn[a]=function(){return this._data[a]}}function fc(a,b){d.duration.fn["as"+a]=function(){return+this/b
}}for(var d,i,e="2.6.0",h=Math.round,j=0,k=1,l=2,m=3,n=4,o=5,p=6,q={},r={_isAMomentObject:null,_i:null,_f:null,_l:null,_strict:null,_isUTC:null,_offset:null,_pf:null,_lang:null},s="undefined"!=typeof b&&b.exports,t=/^\/?Date\((\-?\d+)/i,u=/(\-)?(?:(\d*)\.)?(\d+)\:(\d+)(?:\:(\d+)\.?(\d{3})?)?/,v=/^(-)?P(?:(?:([0-9,.]*)Y)?(?:([0-9,.]*)M)?(?:([0-9,.]*)D)?(?:T(?:([0-9,.]*)H)?(?:([0-9,.]*)M)?(?:([0-9,.]*)S)?)?|([0-9,.]*)W)$/,w=/(\[[^\[]*\])|(\\)?(Mo|MM?M?M?|Do|DDDo|DD?D?D?|ddd?d?|do?|w[o|w]?|W[o|W]?|Q|YYYYYY|YYYYY|YYYY|YY|gg(ggg?)?|GG(GGG?)?|e|E|a|A|hh?|HH?|mm?|ss?|S{1,4}|X|zz?|ZZ?|.)/g,x=/(\[[^\[]*\])|(\\)?(LT|LL?L?L?|l{1,4})/g,y=/\d\d?/,z=/\d{1,3}/,A=/\d{1,4}/,B=/[+\-]?\d{1,6}/,C=/\d+/,D=/[0-9]*['a-z\u00A0-\u05FF\u0700-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF]+|[\u0600-\u06FF\/]+(\s*?[\u0600-\u06FF]+){1,2}/i,E=/Z|[\+\-]\d\d:?\d\d/gi,F=/T/i,G=/[\+\-]?\d+(\.\d{1,3})?/,H=/\d{1,2}/,I=/\d/,J=/\d\d/,K=/\d{3}/,L=/\d{4}/,M=/[+-]?\d{6}/,N=/[+-]?\d+/,O=/^\s*(?:[+-]\d{6}|\d{4})-(?:(\d\d-\d\d)|(W\d\d$)|(W\d\d-\d)|(\d\d\d))((T| )(\d\d(:\d\d(:\d\d(\.\d+)?)?)?)?([\+\-]\d\d(?::?\d\d)?|\s*Z)?)?$/,P="YYYY-MM-DDTHH:mm:ssZ",Q=[["YYYYYY-MM-DD",/[+-]\d{6}-\d{2}-\d{2}/],["YYYY-MM-DD",/\d{4}-\d{2}-\d{2}/],["GGGG-[W]WW-E",/\d{4}-W\d{2}-\d/],["GGGG-[W]WW",/\d{4}-W\d{2}/],["YYYY-DDD",/\d{4}-\d{3}/]],R=[["HH:mm:ss.SSSS",/(T| )\d\d:\d\d:\d\d\.\d+/],["HH:mm:ss",/(T| )\d\d:\d\d:\d\d/],["HH:mm",/(T| )\d\d:\d\d/],["HH",/(T| )\d\d/]],S=/([\+\-]|\d\d)/gi,U=("Date|Hours|Minutes|Seconds|Milliseconds".split("|"),{Milliseconds:1,Seconds:1e3,Minutes:6e4,Hours:36e5,Days:864e5,Months:2592e6,Years:31536e6}),V={ms:"millisecond",s:"second",m:"minute",h:"hour",d:"day",D:"date",w:"week",W:"isoWeek",M:"month",Q:"quarter",y:"year",DDD:"dayOfYear",e:"weekday",E:"isoWeekday",gg:"weekYear",GG:"isoWeekYear"},W={dayofyear:"dayOfYear",isoweekday:"isoWeekday",isoweek:"isoWeek",weekyear:"weekYear",isoweekyear:"isoWeekYear"},X={},Y="DDD w W M D d".split(" "),Z="M D H h m s w W".split(" "),$={M:function(){return this.month()+1
},MMM:function(a){return this.lang().monthsShort(this,a)},MMMM:function(a){return this.lang().months(this,a)},D:function(){return this.date()},DDD:function(){return this.dayOfYear()},d:function(){return this.day()},dd:function(a){return this.lang().weekdaysMin(this,a)},ddd:function(a){return this.lang().weekdaysShort(this,a)},dddd:function(a){return this.lang().weekdays(this,a)},w:function(){return this.week()},W:function(){return this.isoWeek()},YY:function(){return kb(this.year()%100,2)},YYYY:function(){return kb(this.year(),4)
},YYYYY:function(){return kb(this.year(),5)},YYYYYY:function(){var a=this.year(),b=a>=0?"+":"-";return b+kb(Math.abs(a),6)},gg:function(){return kb(this.weekYear()%100,2)},gggg:function(){return kb(this.weekYear(),4)},ggggg:function(){return kb(this.weekYear(),5)},GG:function(){return kb(this.isoWeekYear()%100,2)},GGGG:function(){return kb(this.isoWeekYear(),4)},GGGGG:function(){return kb(this.isoWeekYear(),5)},e:function(){return this.weekday()},E:function(){return this.isoWeekday()},a:function(){return this.lang().meridiem(this.hours(),this.minutes(),!0)
},A:function(){return this.lang().meridiem(this.hours(),this.minutes(),!1)},H:function(){return this.hours()},h:function(){return this.hours()%12||12},m:function(){return this.minutes()},s:function(){return this.seconds()},S:function(){return sb(this.milliseconds()/100)},SS:function(){return kb(sb(this.milliseconds()/10),2)},SSS:function(){return kb(this.milliseconds(),3)},SSSS:function(){return kb(this.milliseconds(),3)},Z:function(){var a=-this.zone(),b="+";return 0>a&&(a=-a,b="-"),b+kb(sb(a/60),2)+":"+kb(sb(a)%60,2)
},ZZ:function(){var a=-this.zone(),b="+";return 0>a&&(a=-a,b="-"),b+kb(sb(a/60),2)+kb(sb(a)%60,2)},z:function(){return this.zoneAbbr()},zz:function(){return this.zoneName()},X:function(){return this.unix()},Q:function(){return this.quarter()}},_=["months","monthsShort","weekdays","weekdaysShort","weekdaysMin"];Y.length;)i=Y.pop(),$[i+"o"]=db($[i],i);for(;Z.length;)i=Z.pop(),$[i+i]=cb($[i],2);for($.DDDD=cb($.DDD,3),hb(eb.prototype,{set:function(a){var b,c;for(c in a)b=a[c],"function"==typeof b?this[c]=b:this["_"+c]=b
},_months:"January_February_March_April_May_June_July_August_September_October_November_December".split("_"),months:function(a){return this._months[a.month()]},_monthsShort:"Jan_Feb_Mar_Apr_May_Jun_Jul_Aug_Sep_Oct_Nov_Dec".split("_"),monthsShort:function(a){return this._monthsShort[a.month()]},monthsParse:function(a){var b,c,e;for(this._monthsParse||(this._monthsParse=[]),b=0;12>b;b++)if(this._monthsParse[b]||(c=d.utc([2e3,b]),e="^"+this.months(c,"")+"|^"+this.monthsShort(c,""),this._monthsParse[b]=new RegExp(e.replace(".",""),"i")),this._monthsParse[b].test(a))return b
},_weekdays:"Sunday_Monday_Tuesday_Wednesday_Thursday_Friday_Saturday".split("_"),weekdays:function(a){return this._weekdays[a.day()]},_weekdaysShort:"Sun_Mon_Tue_Wed_Thu_Fri_Sat".split("_"),weekdaysShort:function(a){return this._weekdaysShort[a.day()]},_weekdaysMin:"Su_Mo_Tu_We_Th_Fr_Sa".split("_"),weekdaysMin:function(a){return this._weekdaysMin[a.day()]},weekdaysParse:function(a){var b,c,e;for(this._weekdaysParse||(this._weekdaysParse=[]),b=0;7>b;b++)if(this._weekdaysParse[b]||(c=d([2e3,1]).day(b),e="^"+this.weekdays(c,"")+"|^"+this.weekdaysShort(c,"")+"|^"+this.weekdaysMin(c,""),this._weekdaysParse[b]=new RegExp(e.replace(".",""),"i")),this._weekdaysParse[b].test(a))return b
},_longDateFormat:{LT:"h:mm A",L:"MM/DD/YYYY",LL:"MMMM D YYYY",LLL:"MMMM D YYYY LT",LLLL:"dddd, MMMM D YYYY LT"},longDateFormat:function(a){var b=this._longDateFormat[a];return!b&&this._longDateFormat[a.toUpperCase()]&&(b=this._longDateFormat[a.toUpperCase()].replace(/MMMM|MM|DD|dddd/g,function(a){return a.slice(1)}),this._longDateFormat[a]=b),b},isPM:function(a){return"p"===(a+"").toLowerCase().charAt(0)},_meridiemParse:/[ap]\.?m?\.?/i,meridiem:function(a,b,c){return a>11?c?"pm":"PM":c?"am":"AM"},_calendar:{sameDay:"[Today at] LT",nextDay:"[Tomorrow at] LT",nextWeek:"dddd [at] LT",lastDay:"[Yesterday at] LT",lastWeek:"[Last] dddd [at] LT",sameElse:"L"},calendar:function(a,b){var c=this._calendar[a];
return"function"==typeof c?c.apply(b):c},_relativeTime:{future:"in %s",past:"%s ago",s:"a few seconds",m:"a minute",mm:"%d minutes",h:"an hour",hh:"%d hours",d:"a day",dd:"%d days",M:"a month",MM:"%d months",y:"a year",yy:"%d years"},relativeTime:function(a,b,c,d){var e=this._relativeTime[c];return"function"==typeof e?e(a,b,c,d):e.replace(/%d/i,a)},pastFuture:function(a,b){var c=this._relativeTime[a>0?"future":"past"];return"function"==typeof c?c(b):c.replace(/%s/i,b)},ordinal:function(a){return this._ordinal.replace("%d",a)
},_ordinal:"%d",preparse:function(a){return a},postformat:function(a){return a},week:function(a){return Zb(a,this._week.dow,this._week.doy).week},_week:{dow:0,doy:6},_invalidDate:"Invalid date",invalidDate:function(){return this._invalidDate}}),d=function(a,b,d,e){var f;return"boolean"==typeof d&&(e=d,d=c),f={},f._isAMomentObject=!0,f._i=a,f._f=b,f._l=d,f._strict=e,f._isUTC=!1,f._pf=ab(),_b(f)},d.suppressDeprecationWarnings=!1,d.createFromInputFallback=bb("moment construction falls back to js Date. This is discouraged and will be removed in upcoming major release. Please refer to https://github.com/moment/moment/issues/1407 for more info.",function(a){a._d=new Date(a._i)
}),d.utc=function(a,b,d,e){var f;return"boolean"==typeof d&&(e=d,d=c),f={},f._isAMomentObject=!0,f._useUTC=!0,f._isUTC=!0,f._l=d,f._i=a,f._f=b,f._strict=e,f._pf=ab(),_b(f).utc()},d.unix=function(a){return d(1e3*a)},d.duration=function(a,b){var f,g,h,c=a,e=null;return d.isDuration(a)?c={ms:a._milliseconds,d:a._days,M:a._months}:"number"==typeof a?(c={},b?c[b]=a:c.milliseconds=a):(e=u.exec(a))?(f="-"===e[1]?-1:1,c={y:0,d:sb(e[l])*f,h:sb(e[m])*f,m:sb(e[n])*f,s:sb(e[o])*f,ms:sb(e[p])*f}):(e=v.exec(a))&&(f="-"===e[1]?-1:1,h=function(a){var b=a&&parseFloat(a.replace(",","."));
return(isNaN(b)?0:b)*f},c={y:h(e[2]),M:h(e[3]),d:h(e[4]),h:h(e[5]),m:h(e[6]),s:h(e[7]),w:h(e[8])}),g=new gb(c),d.isDuration(a)&&a.hasOwnProperty("_lang")&&(g._lang=a._lang),g},d.version=e,d.defaultFormat=P,d.momentProperties=r,d.updateOffset=function(){},d.lang=function(a,b){var c;return a?(b?Bb(zb(a),b):null===b?(Cb(a),a="en"):q[a]||Db(a),c=d.duration.fn._lang=d.fn._lang=Db(a),c._abbr):d.fn._lang._abbr},d.langData=function(a){return a&&a._lang&&a._lang._abbr&&(a=a._lang._abbr),Db(a)},d.isMoment=function(a){return a instanceof fb||null!=a&&a.hasOwnProperty("_isAMomentObject")
},d.isDuration=function(a){return a instanceof gb},i=_.length-1;i>=0;--i)rb(_[i]);d.normalizeUnits=function(a){return pb(a)},d.invalid=function(a){var b=d.utc(0/0);return null!=a?hb(b._pf,a):b._pf.userInvalidated=!0,b},d.parseZone=function(){return d.apply(null,arguments).parseZone()},d.parseTwoDigitYear=function(a){return sb(a)+(sb(a)>68?1900:2e3)},hb(d.fn=fb.prototype,{clone:function(){return d(this)},valueOf:function(){return+this._d+6e4*(this._offset||0)},unix:function(){return Math.floor(+this/1e3)},toString:function(){return this.clone().lang("en").format("ddd MMM DD YYYY HH:mm:ss [GMT]ZZ")
},toDate:function(){return this._offset?new Date(+this):this._d},toISOString:function(){var a=d(this).utc();return 0<a.year()&&a.year()<=9999?Gb(a,"YYYY-MM-DD[T]HH:mm:ss.SSS[Z]"):Gb(a,"YYYYYY-MM-DD[T]HH:mm:ss.SSS[Z]")},toArray:function(){var a=this;return[a.year(),a.month(),a.date(),a.hours(),a.minutes(),a.seconds(),a.milliseconds()]},isValid:function(){return yb(this)},isDSTShifted:function(){return this._a?this.isValid()&&ob(this._a,(this._isUTC?d.utc(this._a):d(this._a)).toArray())>0:!1},parsingFlags:function(){return hb({},this._pf)
},invalidAt:function(){return this._pf.overflow},utc:function(){return this.zone(0)},local:function(){return this.zone(0),this._isUTC=!1,this},format:function(a){var b=Gb(this,a||d.defaultFormat);return this.lang().postformat(b)},add:function(a,b){var c;return c="string"==typeof a?d.duration(+b,a):d.duration(a,b),lb(this,c,1),this},subtract:function(a,b){var c;return c="string"==typeof a?d.duration(+b,a):d.duration(a,b),lb(this,c,-1),this},diff:function(a,b,c){var g,h,e=Ab(a,this),f=6e4*(this.zone()-e.zone());
return b=pb(b),"year"===b||"month"===b?(g=432e5*(this.daysInMonth()+e.daysInMonth()),h=12*(this.year()-e.year())+(this.month()-e.month()),h+=(this-d(this).startOf("month")-(e-d(e).startOf("month")))/g,h-=6e4*(this.zone()-d(this).startOf("month").zone()-(e.zone()-d(e).startOf("month").zone()))/g,"year"===b&&(h/=12)):(g=this-e,h="second"===b?g/1e3:"minute"===b?g/6e4:"hour"===b?g/36e5:"day"===b?(g-f)/864e5:"week"===b?(g-f)/6048e5:g),c?h:jb(h)},from:function(a,b){return d.duration(this.diff(a)).lang(this.lang()._abbr).humanize(!b)
},fromNow:function(a){return this.from(d(),a)},calendar:function(){var a=Ab(d(),this).startOf("day"),b=this.diff(a,"days",!0),c=-6>b?"sameElse":-1>b?"lastWeek":0>b?"lastDay":1>b?"sameDay":2>b?"nextDay":7>b?"nextWeek":"sameElse";return this.format(this.lang().calendar(c,this))},isLeapYear:function(){return wb(this.year())},isDST:function(){return this.zone()<this.clone().month(0).zone()||this.zone()<this.clone().month(5).zone()},day:function(a){var b=this._isUTC?this._d.getUTCDay():this._d.getDay();return null!=a?(a=Wb(a,this.lang()),this.add({d:a-b})):b
},month:dc("Month",!0),startOf:function(a){switch(a=pb(a)){case"year":this.month(0);case"quarter":case"month":this.date(1);case"week":case"isoWeek":case"day":this.hours(0);case"hour":this.minutes(0);case"minute":this.seconds(0);case"second":this.milliseconds(0)}return"week"===a?this.weekday(0):"isoWeek"===a&&this.isoWeekday(1),"quarter"===a&&this.month(3*Math.floor(this.month()/3)),this},endOf:function(a){return a=pb(a),this.startOf(a).add("isoWeek"===a?"week":a,1).subtract("ms",1)},isAfter:function(a,b){return b="undefined"!=typeof b?b:"millisecond",+this.clone().startOf(b)>+d(a).startOf(b)
},isBefore:function(a,b){return b="undefined"!=typeof b?b:"millisecond",+this.clone().startOf(b)<+d(a).startOf(b)},isSame:function(a,b){return b=b||"ms",+this.clone().startOf(b)===+Ab(a,this).startOf(b)},min:function(a){return a=d.apply(null,arguments),this>a?this:a},max:function(a){return a=d.apply(null,arguments),a>this?this:a},zone:function(a,b){var c=this._offset||0;return null==a?this._isUTC?c:this._d.getTimezoneOffset():("string"==typeof a&&(a=Jb(a)),Math.abs(a)<16&&(a=60*a),this._offset=a,this._isUTC=!0,c!==a&&(!b||this._changeInProgress?lb(this,d.duration(c-a,"m"),1,!1):this._changeInProgress||(this._changeInProgress=!0,d.updateOffset(this,!0),this._changeInProgress=null)),this)
},zoneAbbr:function(){return this._isUTC?"UTC":""},zoneName:function(){return this._isUTC?"Coordinated Universal Time":""},parseZone:function(){return this._tzm?this.zone(this._tzm):"string"==typeof this._i&&this.zone(this._i),this},hasAlignedHourOffset:function(a){return a=a?d(a).zone():0,(this.zone()-a)%60===0},daysInMonth:function(){return tb(this.year(),this.month())},dayOfYear:function(a){var b=h((d(this).startOf("day")-d(this).startOf("year"))/864e5)+1;return null==a?b:this.add("d",a-b)},quarter:function(a){return null==a?Math.ceil((this.month()+1)/3):this.month(3*(a-1)+this.month()%3)
},weekYear:function(a){var b=Zb(this,this.lang()._week.dow,this.lang()._week.doy).year;return null==a?b:this.add("y",a-b)},isoWeekYear:function(a){var b=Zb(this,1,4).year;return null==a?b:this.add("y",a-b)},week:function(a){var b=this.lang().week(this);return null==a?b:this.add("d",7*(a-b))},isoWeek:function(a){var b=Zb(this,1,4).week;return null==a?b:this.add("d",7*(a-b))},weekday:function(a){var b=(this.day()+7-this.lang()._week.dow)%7;return null==a?b:this.add("d",a-b)},isoWeekday:function(a){return null==a?this.day()||7:this.day(this.day()%7?a:a-7)
},isoWeeksInYear:function(){return ub(this.year(),1,4)},weeksInYear:function(){var a=this._lang._week;return ub(this.year(),a.dow,a.doy)},get:function(a){return a=pb(a),this[a]()},set:function(a,b){return a=pb(a),"function"==typeof this[a]&&this[a](b),this},lang:function(a){return a===c?this._lang:(this._lang=Db(a),this)}}),d.fn.millisecond=d.fn.milliseconds=dc("Milliseconds",!1),d.fn.second=d.fn.seconds=dc("Seconds",!1),d.fn.minute=d.fn.minutes=dc("Minutes",!1),d.fn.hour=d.fn.hours=dc("Hours",!0),d.fn.date=dc("Date",!0),d.fn.dates=bb("dates accessor is deprecated. Use date instead.",dc("Date",!0)),d.fn.year=dc("FullYear",!0),d.fn.years=bb("years accessor is deprecated. Use year instead.",dc("FullYear",!0)),d.fn.days=d.fn.day,d.fn.months=d.fn.month,d.fn.weeks=d.fn.week,d.fn.isoWeeks=d.fn.isoWeek,d.fn.quarters=d.fn.quarter,d.fn.toJSON=d.fn.toISOString,hb(d.duration.fn=gb.prototype,{_bubble:function(){var e,f,g,h,a=this._milliseconds,b=this._days,c=this._months,d=this._data;
d.milliseconds=a%1e3,e=jb(a/1e3),d.seconds=e%60,f=jb(e/60),d.minutes=f%60,g=jb(f/60),d.hours=g%24,b+=jb(g/24),d.days=b%30,c+=jb(b/30),d.months=c%12,h=jb(c/12),d.years=h},weeks:function(){return jb(this.days()/7)},valueOf:function(){return this._milliseconds+864e5*this._days+this._months%12*2592e6+31536e6*sb(this._months/12)},humanize:function(a){var b=+this,c=Yb(b,!a,this.lang());return a&&(c=this.lang().pastFuture(b,c)),this.lang().postformat(c)},add:function(a,b){var c=d.duration(a,b);return this._milliseconds+=c._milliseconds,this._days+=c._days,this._months+=c._months,this._bubble(),this
},subtract:function(a,b){var c=d.duration(a,b);return this._milliseconds-=c._milliseconds,this._days-=c._days,this._months-=c._months,this._bubble(),this},get:function(a){return a=pb(a),this[a.toLowerCase()+"s"]()},as:function(a){return a=pb(a),this["as"+a.charAt(0).toUpperCase()+a.slice(1)+"s"]()},lang:d.fn.lang,toIsoString:function(){var a=Math.abs(this.years()),b=Math.abs(this.months()),c=Math.abs(this.days()),d=Math.abs(this.hours()),e=Math.abs(this.minutes()),f=Math.abs(this.seconds()+this.milliseconds()/1e3);
return this.asSeconds()?(this.asSeconds()<0?"-":"")+"P"+(a?a+"Y":"")+(b?b+"M":"")+(c?c+"D":"")+(d||e||f?"T":"")+(d?d+"H":"")+(e?e+"M":"")+(f?f+"S":""):"P0D"}});for(i in U)U.hasOwnProperty(i)&&(fc(i,U[i]),ec(i.toLowerCase()));fc("Weeks",6048e5),d.duration.fn.asMonths=function(){return(+this-31536e6*this.years())/2592e6+12*this.years()},d.lang("en",{ordinal:function(a){var b=a%10,c=1===sb(a%100/10)?"th":1===b?"st":2===b?"nd":3===b?"rd":"th";return a+c}}),a.moment=d}).call(this)};c(),b.resolveWith(c)};FD50.module("moment",a)
}(),function(){var a=function(a){var b=this;a.require().script("moment").done(function(){var c=function(){var b=0,c=a.moment,d=function(d,e){var f={pickDate:!0,pickTime:!0,useMinutes:!0,useSeconds:!1,useCurrent:!0,minuteStepping:1,minDate:new c({y:1900}),maxDate:(new c).add(100,"y"),showToday:!0,collapse:!0,language:"en",defaultDate:"",disabledDates:!1,enabledDates:!1,icons:{},useStrict:!1,direction:"auto",sideBySide:!1,daysOfWeekDisabled:!1,component:"",dow:0},g={time:"fa fa-clock-o",date:"fa fa-calendar",up:"fa fa-chevron-up",down:"fa fa-chevron-down"},h=this,j=function(){var n,i=!1;
if(h.options=a.extend({},f,e),h.options.icons=a.extend({},g,h.options.icons),h.element=a(d),l(),!h.options.pickTime&&!h.options.pickDate)throw new Error("Must choose at least one picker");if(h.id=b++,c.lang(h.options.language),h.date=c(),h.unset=!1,h.isInput=h.element.is("input"),h.component=!1,c()._lang._week.dow=h.options.dow,h.element.hasClass("input-group")&&(h.component=0==h.element.find(".datepickerbutton").size()?h.element.find("[class^='input-group-']"):h.element.find(".datepickerbutton")),h.format=h.options.format,n=c()._lang._longDateFormat,h.format||(h.format=h.options.pickDate?n.L:"",h.options.pickDate&&h.options.pickTime&&(h.format+=" "),h.format+=h.options.pickTime?n.LT:"",h.options.useSeconds&&(~n.LT.indexOf(" A")?h.format=h.format.split(" A")[0]+":ss A":h.format+=":ss")),h.use24hours=h.format.toLowerCase().indexOf("a")<1,h.component&&(i=h.component.find("span")),h.options.pickTime&&i&&i.addClass(h.options.icons.time),h.options.pickDate&&i&&(i.removeClass(h.options.icons.time),i.addClass(h.options.icons.date)),h.widget=a(O()).appendTo("body"),h.options.useSeconds&&!h.use24hours&&h.widget.width(300),h.minViewMode=h.options.minViewMode||0,"string"==typeof h.minViewMode)switch(h.minViewMode){case"months":h.minViewMode=1;
break;case"years":h.minViewMode=2;break;default:h.minViewMode=0}if(h.viewMode=h.options.viewMode||0,"string"==typeof h.viewMode)switch(h.viewMode){case"months":h.viewMode=1;break;case"years":h.viewMode=2;break;default:h.viewMode=0}if(h.options.disabledDates=M(h.options.disabledDates),h.options.enabledDates=M(h.options.enabledDates),h.startViewMode=h.viewMode,h.setMinDate(h.options.minDate),h.setMaxDate(h.options.maxDate),q(),r(),t(),u(),v(),p(),C(),D(),""!==h.options.defaultDate&&""==k().val()&&h.setValue(h.options.defaultDate),1!==h.options.minuteStepping){var o=h.options.minuteStepping;
h.date.minutes(Math.round(h.date.minutes()/o)*o%60).seconds(0)}},k=function(){return h.isInput?h.element:dateStr=h.element.find("input")},l=function(){var a;a=h.element.is("input")?h.element.data():h.element.data(),void 0!==a.dateFormat&&(h.options.format=a.dateFormat),void 0!==a.datePickdate&&(h.options.pickDate=a.datePickdate),void 0!==a.datePicktime&&(h.options.pickTime=a.datePicktime),void 0!==a.dateUseminutes&&(h.options.useMinutes=a.dateUseminutes),void 0!==a.dateUseseconds&&(h.options.useSeconds=a.dateUseseconds),void 0!==a.dateUsecurrent&&(h.options.useCurrent=a.dateUsecurrent),void 0!==a.dateMinutestepping&&(h.options.minuteStepping=a.dateMinutestepping),void 0!==a.dateMindate&&(h.options.minDate=a.dateMindate),void 0!==a.dateMaxdate&&(h.options.maxDate=a.dateMaxdate),void 0!==a.dateShowtoday&&(h.options.showToday=a.dateShowtoday),void 0!==a.dateCollapse&&(h.options.collapse=a.dateCollapse),void 0!==a.dateLanguage&&(h.options.language=a.dateLanguage),void 0!==a.dateDefaultdate&&(h.options.defaultDate=a.dateDefaultdate),void 0!==a.dateDisableddates&&(h.options.disabledDates=a.dateDisableddates),void 0!==a.dateEnableddates&&(h.options.enabledDates=a.dateEnableddates),void 0!==a.dateIcons&&(h.options.icons=a.dateIcons),void 0!==a.dateUsestrict&&(h.options.useStrict=a.dateUsestrict),void 0!==a.dateDirection&&(h.options.direction=a.dateDirection),void 0!==a.dateSidebyside&&(h.options.sideBySide=a.dateSidebyside)
},m=function(){var b="absolute",c=h.component?h.component.offset():h.element.offset(),d=a(window);h.width=h.component?h.component.outerWidth():h.element.outerWidth(),c.top=c.top+h.element.outerHeight();var e;"up"===h.options.direction?e="top":"bottom"===h.options.direction?e="bottom":"auto"===h.options.direction&&(e=c.top+h.widget.height()>d.height()+d.scrollTop()&&h.widget.height()+h.element.outerHeight()<c.top?"top":"bottom"),"top"===e?(c.top-=h.widget.height()+h.element.outerHeight()+15,h.widget.addClass("top").removeClass("bottom")):(c.top+=1,h.widget.addClass("bottom").removeClass("top")),void 0!==h.options.width&&h.widget.width(h.options.width),"left"===h.options.orientation&&(h.widget.addClass("left-oriented"),c.left=c.left-h.widget.width()+20),H()&&(b="fixed",c.top-=d.scrollTop(),c.left-=d.scrollLeft()),d.width()<c.left+h.widget.outerWidth()?(c.right=d.width()-c.left-h.width,c.left="auto",h.widget.addClass("pull-right")):(c.right="auto",h.widget.removeClass("pull-right")),h.widget.css({position:b,top:c.top,left:c.left,right:c.right})
},n=function(a,b){c(h.date).isSame(c(a))||(h.element.trigger({type:"dp.change",date:c(h.date),oldDate:c(a)}),"change"!==b&&h.element.change())},o=function(a){h.element.trigger({type:"dp.error",date:c(a)})},p=function(a){c.lang(h.options.language);var b=a;b||(b=k().val(),b&&(h.date=c(b,h.format,h.options.useStrict)),h.date||(h.date=c())),h.viewDate=c(h.date).startOf("month"),s(),w()},q=function(){c.lang(h.options.language);var b=a("<tr>"),d=c.weekdaysMin(),f=d.splice(c()._lang._week.dow);d=f.concat(d),a.each(d,function(a,c){b.append('<th class="dow">'+c+"</th>")
}),h.widget.find(".datepicker-days thead").append(b)},r=function(){c.lang(h.options.language);for(var a="",b=0,d=c.monthsShort();12>b;)a+='<span class="month">'+d[b++]+"</span>";h.widget.find(".datepicker-months td").append(a)},s=function(){c.lang(h.options.language);var j,k,l,n,o,p,q,r,s,b=h.viewDate.year(),d=h.viewDate.month(),e=h.options.minDate.year(),f=h.options.minDate.month(),g=h.options.maxDate.year(),i=h.options.maxDate.month(),m=[],t=c.months();for(h.widget.find(".datepicker-days").find(".disabled").removeClass("disabled"),h.widget.find(".datepicker-months").find(".disabled").removeClass("disabled"),h.widget.find(".datepicker-years").find(".disabled").removeClass("disabled"),h.widget.find(".datepicker-days th:eq(1)").text(t[d]+" "+b),k=c(h.viewDate).subtract("months",1),q=k.daysInMonth(),k.date(q).startOf("week"),(b==e&&f>=d||e>b)&&h.widget.find(".datepicker-days th:eq(0)").addClass("disabled"),(b==g&&d>=i||b>g)&&h.widget.find(".datepicker-days th:eq(2)").addClass("disabled"),l=c(k).add(42,"d");k.isBefore(l);){if(k.weekday()===c().startOf("week").weekday()&&(n=a("<tr>"),m.push(n)),o="",k.year()<b||k.year()==b&&k.month()<d?o+=" old":(k.year()>b||k.year()==b&&k.month()>d)&&(o+=" new"),k.isSame(c({y:h.date.year(),M:h.date.month(),d:h.date.date()}))&&(o+=" active"),(K(k)||!L(k))&&(o+=" disabled"),h.options.showToday===!0&&k.isSame(c(),"day")&&(o+=" today"),h.options.daysOfWeekDisabled)for(p in h.options.daysOfWeekDisabled)if(k.day()==h.options.daysOfWeekDisabled[p]){o+=" disabled";
break}n.append('<td class="day'+o+'">'+k.date()+"</td>"),j=k.date(),k.add(1,"d"),j==k.date()&&k.add(1,"d")}for(h.widget.find(".datepicker-days tbody").empty().append(m),s=h.date.year(),t=h.widget.find(".datepicker-months").find("th:eq(1)").text(b).end().find("span").removeClass("active"),s===b&&t.eq(h.date.month()).addClass("active"),e>s-1&&h.widget.find(".datepicker-months th:eq(0)").addClass("disabled"),s+1>g&&h.widget.find(".datepicker-months th:eq(2)").addClass("disabled"),p=0;12>p;p++)b==e&&f>p||e>b?a(t[p]).addClass("disabled"):(b==g&&p>i||b>g)&&a(t[p]).addClass("disabled");
for(m="",b=10*parseInt(b/10,10),r=h.widget.find(".datepicker-years").find("th:eq(1)").text(b+"-"+(b+9)).end().find("td"),h.widget.find(".datepicker-years").find("th").removeClass("disabled"),e>b&&h.widget.find(".datepicker-years").find("th:eq(0)").addClass("disabled"),b+9>g&&h.widget.find(".datepicker-years").find("th:eq(2)").addClass("disabled"),b-=1,p=-1;11>p;p++)m+='<span class="year'+(-1===p||10===p?" old":"")+(s===b?" active":"")+(e>b||b>g?" disabled":"")+'">'+b+"</span>",b+=1;r.html(m)},t=function(){c.lang(h.options.language);
var d,e,f,a=h.widget.find(".timepicker .timepicker-hours table"),b="";if(a.parent().hide(),h.use24hours)for(d=0,e=0;6>e;e+=1){for(b+="<tr>",f=0;4>f;f+=1)b+='<td class="hour">'+N(d.toString())+"</td>",d++;b+="</tr>"}else for(d=1,e=0;3>e;e+=1){for(b+="<tr>",f=0;4>f;f+=1)b+='<td class="hour">'+N(d.toString())+"</td>",d++;b+="</tr>"}a.html(b)},u=function(){var d,e,a=h.widget.find(".timepicker .timepicker-minutes table"),b="",c=0,f=h.options.minuteStepping;for(a.parent().hide(),1==f&&(f=5),d=0;d<Math.ceil(60/f/4);d++){for(b+="<tr>",e=0;4>e;e+=1)60>c?(b+='<td class="minute">'+N(c.toString())+"</td>",c+=f):b+="<td></td>";
b+="</tr>"}a.html(b)},v=function(){var d,e,a=h.widget.find(".timepicker .timepicker-seconds table"),b="",c=0;for(a.parent().hide(),d=0;3>d;d++){for(b+="<tr>",e=0;4>e;e+=1)b+='<td class="second">'+N(c.toString())+"</td>",c+=5;b+="</tr>"}a.html(b)},w=function(){if(h.date){var a=h.widget.find(".timepicker span[data-time-component]"),b=h.date.hours(),c="AM";h.use24hours||(b>=12&&(c="PM"),0===b?b=12:12!=b&&(b%=12),h.widget.find(".timepicker [data-action=togglePeriod]").text(c)),a.filter("[data-time-component=hours]").text(N(b)),a.filter("[data-time-component=minutes]").text(N(h.date.minutes())),a.filter("[data-time-component=seconds]").text(N(h.date.second()))
}},x=function(b){b.stopPropagation(),b.preventDefault(),h.unset=!1;var e,f,g,i,d=a(b.target).closest("span, td, th"),j=c(h.date);if(1===d.length&&!d.is(".disabled"))switch(d[0].nodeName.toLowerCase()){case"th":switch(d[0].className){case"switch":C(1);break;case"prev":case"next":g=P.modes[h.viewMode].navStep,"prev"===d[0].className&&(g=-1*g),h.viewDate.add(g,P.modes[h.viewMode].navFnc),s()}break;case"span":d.is(".month")?(e=d.parent().find("span").index(d),h.viewDate.month(e)):(f=parseInt(d.text(),10)||0,h.viewDate.year(f)),h.viewMode===h.minViewMode&&(h.date=c({y:h.viewDate.year(),M:h.viewDate.month(),d:h.viewDate.date(),h:h.date.hours(),m:h.date.minutes(),s:h.date.seconds()}),n(j,b.type),I()),C(-1),s();
break;case"td":d.is(".day")&&(i=parseInt(d.text(),10)||1,e=h.viewDate.month(),f=h.viewDate.year(),d.is(".old")?0===e?(e=11,f-=1):e-=1:d.is(".new")&&(11==e?(e=0,f+=1):e+=1),h.date=c({y:f,M:e,d:i,h:h.date.hours(),m:h.date.minutes(),s:h.date.seconds()}),h.viewDate=c({y:f,M:e,d:Math.min(28,i)}),s(),I(),n(j,b.type))}},y={incrementHours:function(){J("add","hours",1)},incrementMinutes:function(){J("add","minutes",h.options.minuteStepping)},incrementSeconds:function(){J("add","seconds",1)},decrementHours:function(){J("subtract","hours",1)
},decrementMinutes:function(){J("subtract","minutes",h.options.minuteStepping)},decrementSeconds:function(){J("subtract","seconds",1)},togglePeriod:function(){var a=h.date.hours();a>=12?a-=12:a+=12,h.date.hours(a)},showPicker:function(){h.widget.find(".timepicker > div:not(.timepicker-picker)").hide(),h.widget.find(".timepicker .timepicker-picker").show()},showHours:function(){h.widget.find(".timepicker .timepicker-picker").hide(),h.widget.find(".timepicker .timepicker-hours").show()},showMinutes:function(){h.widget.find(".timepicker .timepicker-picker").hide(),h.widget.find(".timepicker .timepicker-minutes").show()
},showSeconds:function(){h.widget.find(".timepicker .timepicker-picker").hide(),h.widget.find(".timepicker .timepicker-seconds").show()},selectHour:function(b){var c=h.widget.find(".timepicker [data-action=togglePeriod]").text(),d=parseInt(a(b.target).text(),10);"PM"==c&&(d+=12),h.date.hours(d),y.showPicker.call(h)},selectMinute:function(b){h.date.minutes(parseInt(a(b.target).text(),10)),y.showPicker.call(h)},selectSecond:function(b){h.date.seconds(parseInt(a(b.target).text(),10)),y.showPicker.call(h)}},z=function(b){var d=c(h.date),e=a(b.currentTarget).data("action"),f=y[e].apply(h,arguments);
return A(b),h.date||(h.date=c({y:1970})),I(),w(),n(d,b.type),f},A=function(a){a.stopPropagation(),a.preventDefault()},B=function(b){c.lang(h.options.language);var d=a(b.target),e=c(h.date),f=c(d.val(),h.format,h.options.useStrict);f.isValid()&&!K(f)&&L(f)?(p(),h.setValue(f),n(e,b.type),I()):(h.viewDate=e,n(e,b.type),o(f),h.unset=!0)},C=function(a){a&&(h.viewMode=Math.max(h.minViewMode,Math.min(2,h.viewMode+a)));P.modes[h.viewMode].clsName;h.widget.find(".datepicker > div").hide().filter(".datepicker-"+P.modes[h.viewMode].clsName).show()
},D=function(){var b,c,d,e,f;h.widget.on("click",".datepicker *",a.proxy(x,this)),h.widget.on("click","[data-action]",a.proxy(z,this)),h.widget.on("mousedown",a.proxy(A,this)),h.options.pickDate&&h.options.pickTime&&h.widget.on("click.togglePicker",".accordion-toggle",function(g){if(g.stopPropagation(),b=a(this),c=b.closest("ul"),d=c.find(".in"),e=c.find(".collapse:not(.in)"),d&&d.length){if(f=d.data("collapse"),f&&f.date-transitioning)return;d.collapse("hide"),e.collapse("show"),b.find("span").toggleClass(h.options.icons.time+" "+h.options.icons.date),h.element.find(".input-group-addon span").toggleClass(h.options.icons.time+" "+h.options.icons.date)
}}),h.isInput?h.element.on({focus:a.proxy(h.show,this),change:a.proxy(B,this),blur:a.proxy(h.hide,this)}):(h.element.on({change:a.proxy(B,this)},"input"),h.component?h.component.on("click",a.proxy(h.show,this)):h.element.on("click",a.proxy(h.show,this)))},E=function(){a(window).on("resize.datetimepicker"+h.id,a.proxy(m,this)),h.isInput||a(document).on("mousedown.datetimepicker"+h.id,a.proxy(h.hide,this))},F=function(){h.widget.off("click",".datepicker *",h.click),h.widget.off("click","[data-action]"),h.widget.off("mousedown",h.stopEvent),h.options.pickDate&&h.options.pickTime&&h.widget.off("click.togglePicker"),h.isInput?h.element.off({focus:h.show,change:h.change}):(h.element.off({change:h.change},"input"),h.component?h.component.off("click",h.show):h.element.off("click",h.show))
},G=function(){a(window).off("resize.datetimepicker"+h.id),h.isInput||a(document).off("mousedown.datetimepicker"+h.id)},H=function(){if(h.element){var d,b=h.element.parents(),c=!1;for(d=0;d<b.length;d++)if("fixed"==a(b[d]).css("position")){c=!0;break}return c}return!1},I=function(){c.lang(h.options.language);var a="";h.unset||(a=c(h.date).format(h.format)),k().val(a),h.element.data("date",a),h.options.pickTime||h.hide()},J=function(a,b,d){c.lang(h.options.language);var e;return"add"==a?(e=c(h.date),23==e.hours()&&e.add(d,b),e.add(d,b)):e=c(h.date).subtract(d,b),K(c(e.subtract(d,b)))||K(e)?(o(e.format(h.format)),void 0):("add"==a?h.date.add(d,b):h.date.subtract(d,b),h.unset=!1,void 0)
},K=function(a){return c.lang(h.options.language),a.isAfter(h.options.maxDate)||a.isBefore(h.options.minDate)?!0:h.options.disabledDates===!1?!1:h.options.disabledDates[c(a).format("YYYY-MM-DD")]===!0},L=function(a){return c.lang(h.options.language),h.options.enabledDates===!1?!0:h.options.enabledDates[c(a).format("YYYY-MM-DD")]===!0},M=function(a){var b={},d=0;for(i=0;i<a.length;i++)dDate=c(a[i]),dDate.isValid()&&(b[dDate.format("YYYY-MM-DD")]=!0,d++);return d>0?b:!1},N=function(a){return a=a.toString(),a.length>=2?a:"0"+a
},O=function(){if(h.options.pickDate&&h.options.pickTime){var a="";return a='<div id="fd" class="bootstrap-datetimepicker-widget'+(h.options.sideBySide?" timepicker-sbs":"")+" "+h.options.component+'">',a+=h.options.sideBySide?'<div class="row"><div class="col-sm-6 datepicker">'+P.template+'</div><div class="col-sm-6 timepicker">'+Q.getTemplate()+"</div></div>":'<ul class="list-unstyled"><li'+(h.options.collapse?' class="collapse in"':"")+'><div class="datepicker">'+P.template+'</div></li><li class="picker-switch accordion-toggle"><a class="btn btn-primary" style="width:100%"><span class="'+h.options.icons.time+'"></span></a></li><li'+(h.options.collapse?' class="collapse"':"")+'><div class="timepicker">'+Q.getTemplate()+"</div></li></ul>",a+="</div>"
}return h.options.pickTime?'<div id="fd" class="bootstrap-datetimepicker-widget"><div class="timepicker">'+Q.getTemplate()+"</div></div>":'<div id="fd" class="bootstrap-datetimepicker-widget"><div class="datepicker">'+P.template+"</div></div>"},P={modes:[{clsName:"days",navFnc:"month",navStep:1},{clsName:"months",navFnc:"year",navStep:1},{clsName:"years",navFnc:"year",navStep:10}],headTemplate:'<thead><tr><th class="prev">&lsaquo;</th><th colspan="5" class="switch"></th><th class="next">&rsaquo;</th></tr></thead>',contTemplate:'<tbody><tr><td colspan="7"></td></tr></tbody>'},Q={hourTemplate:'<span data-action="showHours"   data-time-component="hours"   class="timepicker-hour"></span>',minuteTemplate:'<span data-action="showMinutes" data-time-component="minutes" class="timepicker-minute"></span>',secondTemplate:'<span data-action="showSeconds"  data-time-component="seconds" class="timepicker-second"></span>'};
P.template='<div class="datepicker-days"><table class="table-condensed">'+P.headTemplate+'<tbody></tbody></table></div><div class="datepicker-months"><table class="table-condensed">'+P.headTemplate+P.contTemplate+'</table></div><div class="datepicker-years"><table class="table-condensed">'+P.headTemplate+P.contTemplate+"</table></div>",Q.getTemplate=function(){return'<div class="timepicker-picker"><table class="table-condensed"><tr><td><a href="#" class="btn" data-action="incrementHours"><i class="'+h.options.icons.up+'"></i></a></td><td class="separator"></td><td>'+(h.options.useMinutes?'<a href="#" class="btn" data-action="incrementMinutes"><i class="'+h.options.icons.up+'"></i></a>':"")+"</td>"+(h.options.useSeconds?'<td class="separator"></td><td><a href="#" class="btn" data-action="incrementSeconds"><i class="'+h.options.icons.up+'"></i></a></td>':"")+(h.use24hours?"":'<td class="separator"></td>')+"</tr><tr><td>"+Q.hourTemplate+'</td> <td class="separator">:</td><td>'+(h.options.useMinutes?Q.minuteTemplate:'<span class="timepicker-minute">00</span>')+"</td> "+(h.options.useSeconds?'<td class="separator">:</td><td>'+Q.secondTemplate+"</td>":"")+(h.use24hours?"":'<td class="separator"></td><td><button type="button" class="btn btn-primary" data-action="togglePeriod"></button></td>')+'</tr><tr><td><a href="#" class="btn" data-action="decrementHours"><i class="'+h.options.icons.down+'"></i></a></td><td class="separator"></td><td>'+(h.options.useMinutes?'<a href="#" class="btn" data-action="decrementMinutes"><i class="'+h.options.icons.down+'"></i></a>':"")+"</td>"+(h.options.useSeconds?'<td class="separator"></td><td><a href="#" class="btn" data-action="decrementSeconds"><i class="'+h.options.icons.down+'"></i></a></td>':"")+(h.use24hours?"":'<td class="separator"></td>')+'</tr></table></div><div class="timepicker-hours" data-action="selectHour"><table class="table-condensed"></table></div><div class="timepicker-minutes" data-action="selectMinute"><table class="table-condensed"></table></div>'+(h.options.useSeconds?'<div class="timepicker-seconds" data-action="selectSecond"><table class="table-condensed"></table></div>':"")
},h.destroy=function(){F(),G(),h.widget.remove(),h.element.removeData("DateTimePicker"),h.component&&h.component.removeData("DateTimePicker")},h.show=function(a){if(h.options.useCurrent&&""==k().val())if(1!==h.options.minuteStepping){var b=c(),d=h.options.minuteStepping;b.minutes(Math.round(b.minutes()/d)*d%60).seconds(0),h.setValue(b.format(h.format))}else h.setValue(c().format(h.format));h.widget.hasClass("picker-open")?(h.widget.hide(),h.widget.removeClass("picker-open")):(h.widget.show(),h.widget.addClass("picker-open")),h.height=h.component?h.component.outerHeight():h.element.outerHeight(),m(),h.element.trigger({type:"dp.show",date:c(h.date)}),E(),a&&A(a)
},h.disable=function(){var a=h.element.find("input");a.prop("disabled")||(a.prop("disabled",!0),F())},h.enable=function(){var a=h.element.find("input");a.prop("disabled")&&(a.prop("disabled",!1),D())},h.hide=function(b){if(!b||!a(b.target).is(h.element.attr("id"))){var e,f,d=h.widget.find(".collapse");for(e=0;e<d.length;e++)if(f=d.eq(e).data("collapse"),f&&f.date-transitioning)return;h.widget.hide(),h.widget.removeClass("picker-open"),h.viewMode=h.startViewMode,C(),h.element.trigger({type:"dp.hide",date:c(h.date)}),G()
}},h.setValue=function(a){c.lang(h.options.language),a?h.unset=!1:(h.unset=!0,I()),c.isMoment(a)||(a=c(a,h.format)),a.isValid()?(h.date=a,I(),h.viewDate=c({y:h.date.year(),M:h.date.month()}),s(),w()):o(a)},h.getDate=function(){return h.unset?null:h.date},h.setDate=function(a){var b=c(h.date);a?h.setValue(a):h.setValue(null),n(b,"function")},h.setDisabledDates=function(a){h.options.disabledDates=M(a),h.viewDate&&p()},h.setEnabledDates=function(a){h.options.enabledDates=M(a),h.viewDate&&p()},h.setMaxDate=function(a){void 0!=a&&(h.options.maxDate=c(a),h.viewDate&&p())
},h.setMinDate=function(a){void 0!=a&&(h.options.minDate=c(a),h.viewDate&&p())},j()};a.fn._datetimepicker=function(b){return this.each(function(){var c=a(this),e=c.data("DateTimePicker");e||c.data("DateTimePicker",new d(this,b))})}};c(),b.resolveWith(c)})};FD50.module("datetimepicker",a)}(),function(){var a=function(a){var b=this,c=function(){function f(){var b=a(this).data("textareaClone");b.find("div").text(this.value.replace(/\r\n/g,"\n")+" "),a(this).trigger("resize.expanding")}a.expandingTextarea=a.extend({autoInitialize:!0,initialSelector:"textarea.expanding",opts:{resize:function(){}}},a.expandingTextarea||{});
var b=["lineHeight","textDecoration","letterSpacing","fontSize","fontFamily","fontStyle","fontWeight","textTransform","textAlign","direction","wordSpacing","fontSizeAdjust","wordWrap","word-break","borderLeftWidth","borderRightWidth","borderTopWidth","borderBottomWidth","paddingLeft","paddingRight","paddingTop","paddingBottom","marginLeft","marginRight","marginTop","marginBottom","boxSizing","webkitBoxSizing","mozBoxSizing","msBoxSizing"],c={position:"absolute",height:"100%",resize:"none"},d={visibility:"hidden",border:"0 solid",whiteSpace:"pre-wrap"},e={position:"relative"};
a.fn.expandingTextarea=function(g){var h=a.extend({},a.expandingTextarea.opts,g);return"resize"===g?this.trigger("input.expanding"):"destroy"===g?(this.filter(".expanding-init").each(function(){var b=a(this).removeClass("expanding-init");b.attr("style",b.data("expanding-styles")||"").removeData("expanding-styles")}),this):(this.filter("textarea").not(".expanding-init").addClass("expanding-init").each(function(){var g=a(this),i=g.parent(),j=a(a.parseHTML("<pre class='textareaClone'><div></div></pre>"));g.after(j).data("textareaClone",j),i.css(e),g.data("expanding-styles",g.attr("style")),g.css(c),j.css(d),a.each(b,function(a,b){var c=g.css(b);
j.css(b)!==c&&j.css(b,c)}),g.bind("input.expanding propertychange.expanding keyup.expanding",f),f.apply(this),h.resize&&g.bind("resize.expanding",h.resize)}),this)},a(function(){a.expandingTextarea.autoInitialize&&a(a.expandingTextarea.initialSelector).expandingTextarea()})};c(),b.resolveWith(c)};FD50.module("expanding",a)}(),function(){var a=function(a){var b=this,c=function(){a.selectionchange=function(a){function e(b){var c=b.onselectionchange;if(c!==a)try{return b.onselectionchange=0,null===b.onselectionchange
}catch(d){}finally{b.onselectionchange=c}return!1}function f(){return"undefined"!=typeof WeakMap?new WeakMap:(console.error("selectionchange: WeakMap not supported"),null)}function g(a){var b=a.getSelection();return b.rangeCount?b.getRangeAt(0):null}function h(a,b,c){a.addEventListener(b,c,!0)}function i(a,b,c){a.removeEventListener(b,c,!0)}function j(a){var c=a.keyCode;(65===c&&a[b]&&!a.shiftKey&&!a.altKey||40>=c&&c>=37&&a.shiftKey)&&setTimeout(o.bind(null,this),0)}function k(a){0===a.button&&(h(this,"mousemove",l),setTimeout(o.bind(null,this),0))
}function l(a){1&a.buttons?o(this):i(this,"mousemove",l)}function m(a){0===a.button?setTimeout(o.bind(null,this),0):i(this,"mousemove",l)}function n(){setTimeout(o.bind(null,this.document),0)}function o(a){var b=d.get(a),c=g(a);p(c,b)||(d.set(a,c),setTimeout(a.dispatchEvent.bind(a,new Event("selectionchange")),0))}function p(a,b){return a===b||a&&b&&c.every(function(c){return a[c]===b[c]})}var d,b=/^Mac/.test(navigator.platform)?"metaKey":"ctrlKey",c=["startContainer","startOffset","endContainer","endOffset"];
return{start:function(a){var b=a||document;(d||!e(b)&&(d=f()))&&(d.has(b)||(d.set(b,g(b)),h(b,"keydown",j),h(b,"mousedown",k),h(b,"mousemove",l),h(b,"mouseup",m),h(b.defaultView,"focus",n)))},stop:function(a){var b=a||document;d&&d.has(b)&&(d["delete"](b),i(b,"keydown",j),i(b,"mousedown",k),i(b,"mousemove",l),i(b,"mouseup",m),i(b.defaultView,"focus",n))}}}()};c(),b.resolveWith(c)};FD50.module("selectionchange",a)}(),function(){var a=function(a){var b=this,c=function(){a.fn.pageslide=function(b,c){var d=this.find(".pageslide-viewport"),e=a('<div class="pageslide-page active"></div>').append(b)["prev"==c?"prependTo":"appendTo"](d).siblings().filter(".is-deactivating").detach().end().addClass("is-deactivating").removeClass("active").end();
return container=this.switchClass("fx-"+c),setTimeout(function(){container.removeClass("fx-prev fx-next"),e.siblings().detach()},500),this}};c(),b.resolveWith(c)};FD50.module("pageslide",a)}(),function(){var a=function(a){var b=this;a.require().script("autosize.input","scrollTo").done(function(){var c=function(){var b={BACKSPACE:8,COMMA:188,DELETE:46,DOWN:40,ENTER:13,ESCAPE:27,LEFT:37,RIGHT:39,SPACE:32,TAB:9,UP:38};a.template("textboxlist/item",'<div class="textboxlist-item[%== (this.locked) ? " is-locked" : "" %]" data-textboxlist-item><span class="textboxlist-itemContent" data-textboxlist-itemContent>[%== html %]</span><div class="textboxlist-itemRemoveButton" data-textboxlist-itemRemoveButton><i class="ies-cancel-2"></i></a></div>'),a.template("textboxlist/itemContent",'[%= title %]<input type="hidden" name="[%= name %]" value="[%= id %]"/>'),a.Controller("Textboxlist",{pluginName:"textboxlist",hostname:"textboxlist",defaultOptions:{view:{item:"textboxlist/item",itemContent:"textboxlist/itemContent"},plugin:{},name:"items[]",unique:!0,caseSensitive:!1,max:null,ignoreLocked:!1,filterItem:null,"{item}":"[data-textboxlist-item]","{itemContent}":"[data-textboxlist-itemContent]","{itemRemoveButton}":"[data-textboxlist-itemRemoveButton]","{textField}":"[data-textboxlist-textField]"}},function(c){return{init:function(){var d=c.textField();
d.autosizeInput(),d.data("placeholderText",d.attr("placeholder"));var e=d.data("textboxlistName");e&&(c.options.name=e),c.item().each(function(){var b=a(this),d=b.find(c.itemContent.selector);c.createItem({id:b.data("id")||function(){var c=a.uid("item-");return b.data("id",c),c}(),title:b.data("title")||a.trim(d.text()),locked:b.hasClass("is-locked"),html:d.html()})}),(c.options.plugin.autocomplete||c.element.data("query"))&&c.addPlugin("autocomplete"),c.on("keypress",c.textField(),function(a){return a.keyCode==b.ENTER?a.preventDefault():void 0
})},setLayout:function(){var a=c.textField(),b=a.data("placeholderText");c.item().length>0&&(b=""),a.attr("placeholder",b).data("autosizeInputInstance").update()},enable:function(){c.element.removeClass("disabled"),c.textField().enabled(!0)},disable:function(){c.element.addClass("disabled"),c.textField().disabled(!0)},items:{},itemsByTitle:{},get:function(a){var b=c.getItemKey(a);return c.itemsByTitle.hasOwnProperty(b)?c.itemsByTitle[b]:void 0},getItemKey:function(a){return c.options.caseSensitive?a:a.toLowerCase()
},filterItem:function(b){var d=c.options,e=d.filterItem;a.isFunction(e)&&(b=e.call(c,b));var f=c.itemsByTitle;if(a.isString(b)&&""!==b){var g=b,h=c.getItemKey(g);b=f.hasOwnProperty(h)?c.itemsByTitle[h]:{id:a.uid("item-"),title:g,key:c.getItemKey(g),locked:!1}}return b.name=b.name||c.options.name,b.html=b.html||c.view.itemContent(!0,b),b},createItem:function(a){a.key=c.getItemKey(a.title),c.items[a.id]=a,c.itemsByTitle[a.key]=a},deleteItem:function(a){var b=c.items[a];c.item().filterBy("id",a).remove(),delete c.items[a];
var d=c.options.caseSensitive?b.title:b.title.toLowerCase();delete c.itemsByTitle[d]},addItem:function(b,d){if(b){var e=c.options,f=e.max;if((d||null===f||!((e.ignoreLocked?c.item(":not(.is-locked)"):c.item()).length>=f))&&(b=c.filterItem(b),a.isPlainObject(b))){var g,h=c.item().filterBy("id",b.id);if(e.unique&&h.length>0&&(g=h),g||(g=c.view.item(b).addClass(b.className||"").attr("data-id",b.id)),c.createItem(b),b.locked){var i=c.item(".is-locked:last");i.length>0?g.insertAfter(i):g.prependTo(c.element)}else g.insertBefore(c.textField());
return c.trigger("addItem",[b]),c.trigger("listChange"),b}}},removeItem:function(a){var b=c.items[a];c.deleteItem(a),c.trigger("removeItem",[b]),c.trigger("listChange")},clearItems:function(){c.item().each(function(){c.removeItem(a(this).data("id"))})},getAddedItems:function(){var b=[];return c.item().each(function(){var d=a(this),e=d.data("id");b.push(c.items[e])}),b},"{self} addItem":function(){c.setLayout()},"{self} removeItem":function(){c.setLayout()},"{itemRemoveButton} click":function(a){var b=a.parents(c.item.selector);
c.removeItem(b.data("id"))},"{textField} keydown":function(a,c){var d=c.keyCode;a.data("realEnterKey",d==b.ENTER)},"{textField} keypress":function(d,e){var f=d.data("realEnterKey"),g=e.keyCode==b.ENTER;d.data("realEnterKey",f&&g);var h=a.trim(c.textField().val());switch(e.keyCode){case b.ENTER:if(d.data("realEnterKey")){var e=c.trigger("useItem",[h]),i=e.item;if(void 0===i&&(i=h),i===!1||null===i)return;c.addItem(i),d.val("")}}},"{textField} keyup":function(d,e){var f=a.trim(c.textField().val()),g="canRemoveItemUsingBackspace";
switch(e.keyCode){case b.BACKSPACE:if(""===f)if(c[g]){var h=d.prev(c.item.selector);if(h.length>0){var i=h.data("id"),f=c.items[i];!f.locked&&c.removeItem(i)}}else c[g]=!0;break;default:c[g]=!1}},"{self} click":function(a,b){var d=c.textField();d.is(b.target)||d.focus()},"{textField} focusin":function(){c.activated||(c.activated=!0,c.trigger("textboxlistActivate"))},"{self} mousedown":function(){c.focusing=!0},"{self} mouseup":function(){c.focusing=!1},"{self} focusout":function(){c.focusing||(c.activated=!1,c.deactivateTimer=setTimeout(function(){c.activated||c.trigger("textboxlistDeactivate")
},1))}}}),a(document).on("click.textboxlist.data-api","[data-textboxlist]",function(){a(this).addController(a.Controller.Textboxlist).textField().focus()}).on("focus.textboxlist.data-api","[data-textboxlist] [data-textboxlist-textField]",function(){a(this).parents("[data-textboxlist]").addController(a.Controller.Textboxlist)}),a.template("textboxlist/menu",'<div id="fd" class="textboxlist-autocomplete" data-textboxlist-autocomplete><b><b></b></b><div class="textboxlist-autocomplete-inner" data-textboxlist-autocomplete-viewport><div class="textboxlist-autocomplete-loading" data-textboxlist-autocomplete-loading></div><div class="textboxlist-autocomplete-empty" data-textboxlist-autocomplete-empty></div><ul class="textboxlist-menu" data-textboxlist-menu></ul></div></div>'),a.template("textboxlist/menuItem",'<li class="textboxlist-menuItem" data-textboxlist-menuItem>[%== html %]</li>'),a.template("textboxlist/loadingHint",'<i class="textboxlist-autocomplete-loading-indicator"></i>'),a.template("textboxlist/emptyHint",'<span class="textboxlist-autocomplete-empty-text">No items found.</span>'),a.Controller("Textboxlist.Autocomplete",{defaultOptions:{view:{menu:"textboxlist/menu",menuItem:"textboxlist/menuItem",loadingHint:"textboxlist/loadingHint",emptyHint:"textboxlist/emptyHint"},cache:!0,minLength:1,limit:10,highlight:!0,caseSensitive:!1,exclusive:!1,query:null,position:{my:"left top",at:"left bottom",collision:"none"},filterItem:null,showEmptyHint:!1,showLoadingHint:!1,id:"fd",component:"",modifier:"",shadow:!1,sticky:!1,animation:!1,"{menu}":"[data-textboxlist-menu]","{menuItem}":"[data-textboxlist-menuItem]","{viewport}":"[data-textboxlist-autocomplete-viewport]","{loadingHint}":"[data-textboxlist-autocomplete-loading]","{emptyHint}":"[data-textboxlist-autocomplete-empty]"}},function(c,d){return{init:function(){if(!c.element.data(c.Class.fullName))return c.destroy(),c.view.menu().attr("id",d.id).addClass(d.component).addClass(d.modifier).addClass(d.shadow?"has-shadow":"").addClass(d.animation?"has-animation":"").addClass(d.sticky?"is-sticky":"").addClass(c.textboxlist.options.component).appendTo("body").data(c.Class.fullName,!0).addController(c.Class,c.options),void 0;
var a=c.textboxlist;a.autocomplete=c,a.pluginInstances.autocomplete=c,c.options.position.of=c.textboxlist.element,c.initQuery(),c.view.loadingHint().appendTo(c.loadingHint()),c.view.emptyHint().appendTo(c.emptyHint()),c.element.detach()},initQuery:function(){var b=c.options.query||c.textboxlist.element.data("query");if(a.isUrl(b)){var d=b;return c.query=function(b){return a.ajax(d+b)},void 0}if(a.isFunction(b)){var e=b;return c.query=function(a){return e.call(c,a)},void 0}if(a.isArray(b)){var f=b;return c.query=function(b){var c=a.Deferred(),b=b.toLowerCase();
return setTimeout(function(){var d=a.grep(f,function(a){return a.title.toLowerCase().indexOf(b)>-1});c.resolve(d)},0),c},void 0}},setLayout:function(){c.hidden||c.element.css({opacity:1,width:c.textboxlist.element.outerWidth()}).position(c.options.position)},"{window} resize":a.debounce(function(){c.element.css("opacity",0),c.setLayout()},250),"{window} scroll":a.debounce(function(){c.element.css("opacity",0),c.setLayout()},250),"{window} dialogTransitionStart":function(){c.hidden=!0,c.element.css("opacity",0)
},"{window} dialogTransitionEnd":function(){c.hidden=!1,c.setLayout()},show:function(){clearTimeout(c.sleep),c.element.appendTo("body").show(),c.hidden=!1,c.setLayout()},hide:function(){c.element.hide();var b=c.menuItem(),d=b.filter(".active");d.length>0&&(c.lastItem={keyword:a.trim(c.textboxlist.textField().val()),item:d.data("item")}),b.removeClass("active"),c.render.reset(),c.hidden=!0,clearTimeout(c.sleep),c.sleep=setTimeout(function(){c.element.detach()},3e3)},queries:{},populated:!1,populate:function(b){c.populated=!1;
var d=c.element,e=c.options;d.removeClass("loading empty"),e.showLoadingHint&&c.hide();var f=c.trigger("populateKeyword",[b]);f.keyword&&(b=f.keyword);var g=e.caseSensitive?b:b.toLowerCase(),h=c.queries[g],i=!a.isDeferred(h)||!c.options.cache,j=function(){e.showLoadingHint&&(d.addClass("loading"),c.show()),(i||!i&&"rejected"==h.state())&&(h=c.queries[g]=c.query(b)),h.done(c.render(function(a){return[a,b]})).fail(function(){c.hide()}).always(function(){d.removeClass("loading")}),c.trigger("queryKeyword",[h,b])
};i?(clearTimeout(c.queryTask),c.queryTask=setTimeout(j,250)):j()},populateTask:null,populateFromTextField:function(){clearTimeout(c.populateTask),c.populateTask=setTimeout(function(){var b=c.textboxlist.textField(),d=a.trim(b.val());""===d||d.length<c.options.minLength?c.hide():c.populate(d)},1)},render:a.Enqueue(function(b,d){a.isArray(b)||(b=[]);var e=c.textboxlist,f=c,g=c.element,h=c.options,i=c.menu();if(b.length<1)return h.showEmptyHint?(i.empty(),g.addClass("empty"),e.trigger("renderMenu",[i,f,e]),c.show()):c.hide(),void 0;
g.removeClass("empty"),h.cache&&i.data("keyword")===d||(i.empty(),a.each(b,function(b,g){e.trigger("filterItem",[g,f,e]);var j=h.filterItem;if(a.isFunction(j)&&(g=j.call(c,g,d)),a.isPlainObject(g)&&!g.discard){var k=g.menuHtml||g.title;c.view.menuItem({html:k}).addClass(g.className||"").data("item",g).appendTo(i)}}),i.data("keyword",d));var j=c.menuItem();return e.trigger("filterMenu",[i,j,f,e]),j.filter(":not(.hidden)").length<1&&(g.addClass("empty"),!h.showEmptyHint)?c.hide():(h.exclusive&&c.menuItem(":not(.hidden):first").addClass("active"),e.trigger("renderMenu",[i,f,e]),c.show(),void 0)
}),"{textboxlist.textField} keydown":function(a,d){clearTimeout(c.sleep);var e=c.menuItem(".active:not(.hidden)");e.length<1&&(e=!1);c.textboxlist.textField();switch(d.keyCode){case b.UP:c.menuItem().removeClass("active"),e?e.prev(c.menuItem.selector+":not(.hidden)").addClass("active"):c.menuItem(":not(.hidden):last").addClass("active"),d.preventDefault();break;case b.DOWN:c.menuItem().removeClass("active"),e?e.next(c.menuItem.selector+":not(.hidden)").addClass("active"):c.menuItem(":not(.hidden):first").addClass("active"),d.preventDefault();
break;case b.ESCAPE:c.hide();break;case b.ENTER:break;default:c.populateFromTextField()}var e=c.menuItem(".active:not(.hidden)");e.length<1||c.viewport().scrollIntoView(e)},"{textboxlist} textboxlistActivate":function(){c.populateFromTextField()},"{textboxlist} textboxlistDeactivate":function(){setTimeout(function(){c.hide()},150)},"{textboxlist} destroyed":function(){c.element.remove()},"{textboxlist} useItem":function(a,b,d){var e=c.options.exclusive;if(e&&(b.item=!1),c.hidden){var f=c.lastItem;return e&&f&&f.keyword==d&&(b.item=f.item),void 0
}var g=c.menuItem(".active");if(g.length>0){var h=g.data("item");b.item=h}c.hide()},"{menuItem} mousedown":function(){c.textboxlist.focusing=!0},"{menuItem} mouseup":function(){c.textboxlist.focusing=!1},"{menuItem} click":function(a){c.hide();var b=a.data("item");c.textboxlist.addItem(b);var d=c.textboxlist.textField().val("");setTimeout(function(){d.focus()},150)},"{menuItem} mouseover":function(a){c.menuItem().removeClass("active"),a.addClass("active")},"{menuItem} mouseout":function(){c.menuItem().removeClass("active")
}}})};c(),b.resolveWith(c)})};FD50.module("textboxlist",a)}(),function(){var a=function(a){var b=this,d=function(){var b=function(c,d){var e=this;e.input=a(c),e.options=a.extend(b.defaultOptions,d),e.mirror=a('<span style="position:absolute; top:-999px; left:0; white-space:pre;"/>'),a.each(["fontFamily","fontSize","fontWeight","fontStyle","letterSpacing","textTransform","wordSpacing","textIndent"],function(a,b){e.mirror[0].style[b]=e.input.css(b)}),a("body").append(e.mirror),e.input.bind("keydown keyup input",function(){e.update()
}),e.update()};b.defaultOptions={space:30},b.validTypes=["text","password","search","url","tel","email"],b.prototype.update=function(){var a=this,b=a.input,c=a.mirror,d=b.val();if(d||(d=b.attr("placeholder")),d!==c.text()){c.text(d);var e=c.width()+a.options.space;b.width(e)}},a.fn.autosizeInput=function(c){return this.each(function(){if("INPUT"==this.tagName&&a.inArray(this.type,b.validTypes)>-1){var d=a(this);d.data("autosizeInputInstance")||d.data("autosizeInputInstance",new b(this,c))}})},a(function(){a("input[data-autosize-input]").autosizeInput()
})};d(),b.resolveWith(d)};FD50.module("autosize.input",a)}(),function(){var a=function(a){var b=this,c=function(){var b={left:[-1,0],up:[0,-1],right:[1,0],down:[0,1]};a.distance=function(a,c,d){function e(a,b){return Math.floor(Math.sqrt(a*a+b*b))}d=b[d];var x,y,z,f=a.offset(),g=a.outerWidth(),h=a.outerHeight(),i=f.left,j=f.top,k=i+g,l=j+h,m=i+g/2,n=j+h/2,o=c.offset(),p=c.outerWidth(),q=c.outerHeight(),r=o.left,s=o.top,t=r+p,u=s+q,v=r+p/2,w=s+q/2;return 0==d[1]?(d[0]<0?(i>=t&&(y=i-t),i>=v&&(y=void 0!=y?Math.min(y,i-v):i-v),i>=t&&(y=void 0!=y?Math.min(y,i-t):i-t)):(r>=k&&(y=r-k),v>=k&&(y=void 0!=y?Math.min(y,v-k):v-k),r>i&&(y=void 0!=y?Math.min(y,r-i):r-i)),z=2*Math.min(Math.abs(n-s),Math.abs(n-w),Math.abs(n-u))):0==d[0]&&(d[1]<0?(j>=u&&(z=j-u),j>=w&&(z=void 0!=z?Math.min(z,j-w):j-w),j>=u&&(z=void 0!=z?Math.min(z,j-u):j-u)):(s>=l&&(z=s-l),w>=l&&(z=void 0!=z?Math.min(z,w-l):w-l),s>j&&(z=void 0!=z?Math.min(z,s-j):s-j)),y=2*Math.min(Math.abs(m-r),Math.abs(m-v),Math.abs(m-t))),x=void 0==y||void 0==z?-1:e(y,z)
},a.fn.nearest=function(b,c){for(var e,g,d=this,f=a(),h=null,i=-1,j=b.length;++i<j;)e=a(b[i]),d[0]!=e[0]&&(g=a.distance(d,e,c),g>=0&&(null===h||h>g)&&(h=g,f=e));return f}};c(),b.resolveWith(c)};FD50.module("nearest",a)}(),function(){var moduleFactory=function($){var module=this;$.require().script("mousewheel").done(function(){var exports=function(){!function(){var isWin=navigator.appVersion.indexOf("Win")>-1,doco=$(document),scrolly="[data-scrolly]",viewport="[data-scrolly-viewport]",disabled="scrolly-disabled",activeScrolly="[data-scrolly]:not(.scrolly-disabled)",ns=function(a){return a.split(" ").join(".scrolly ")+".scrolly"
},percent=function(a){return 100*a+"%"},toggle_=function(a){return 1>a?"block":"none"},self={axis:function(a,b){var c=$(a).data("axis");if(c&&!b)return c;b=(b||$(a).data("scrolly")||"xy").split("");for(var d,c={};d=b.shift();)c[d]=!0;return $(a).data("axis",c),c},viewport:function(a){return $(a).find("> "+viewport)[0]||$(a).wrapInner("<div data-scrolly-viewport>").find("> "+viewport)[0]},x:function(a){return $(a).find("> s[data-scrolly-axis=x]")[0]||$('<s data-scrolly-axis="x">').appendTo(a)[0]},y:function(a){return $(a).find("> s[data-scrolly-axis=y]")[0]||$('<s data-scrolly-axis="y">').appendTo(a)[0]
},update:function(node,dx,dy,fromScrollbar){var axis=self.axis(node),acceleration=isWin?28:1;with(self.viewport(node)){var a=fromScrollbar?scrollHeight/offsetHeight:1;axis.y&&(scrollTop-=(dy||0)*a*acceleration),axis.x&&(scrollLeft-=(dx||0)*a*acceleration);var scrollbarTop=scrollTop/scrollHeight,scrollbarLeft=scrollLeft/scrollWidth,scrollbarHeight=offsetHeight/scrollHeight,scrollbarWidth=offsetWidth/scrollWidth}if(axis.x)with(self.x(node).style)left=percent(scrollbarLeft),width=percent(scrollbarWidth),display=toggle_(scrollbarWidth);
if(axis.y)with(self.y(node).style)top=percent(scrollbarTop),height=percent(scrollbarHeight),display=toggle_(scrollbarHeight);var elem=$(node);clearTimeout(elem.data("scrolly_timer")),elem.data("scrolly_timer",setTimeout(function(){elem.removeData("scrolly_timer")},1e3)).trigger("scrolly")},enable:function(a){$(a).removeClass(disabled)},disable:function(a){$(a).addClass(disabled)},reset:function(a){$(a).removeData("axis")}};$.fn.scrolly=function(a){if($.isString(a)){var b=self[a]([this[0]].concat($.makeArray(arguments).slice(1)));
return b||this}return $(this).eq(0).attr("data-scrolly",(a||{}).axis)},doco.on(ns("mouseover"),scrolly,function(a){var b=$(a.target).closest(activeScrolly)[0];b&&!$(b).data("scrolly_timer")&&self.update(b)}).on(ns("mousewheel"),scrolly,function(a,b,c,d){var e=$(a.target).closest(activeScrolly)[0];e&&self.update(e,c,d)}).on(ns("mousedown"),scrolly+" > s",function(a){var b=$(this).parent(scrolly).addClass("scrolling");doco.on(ns("mousemove"),function(c){self.update(b[0],a.pageX-c.pageX,a.pageY-c.pageY,!0),a=c,c.preventDefault()
}).on(ns("mouseup"),function(){b.removeClass("scrolling"),doco.off(ns("mousemove mouseup"))})})}()};exports(),module.resolveWith(exports)})};FD50.module("scrolly",moduleFactory)}(),function(){var a=function(a){var b=this,c=function(){function i(b){var c=b||window.event,g=d.call(arguments,1),i=0,l=0,m=0,n=0,o=0,p=0;if(b=a.event.fix(c),b.type="mousewheel","detail"in c&&(m=-1*c.detail),"wheelDelta"in c&&(m=c.wheelDelta),"wheelDeltaY"in c&&(m=c.wheelDeltaY),"wheelDeltaX"in c&&(l=-1*c.wheelDeltaX),"axis"in c&&c.axis===c.HORIZONTAL_AXIS&&(l=-1*m,m=0),i=0===m?l:m,"deltaY"in c&&(m=-1*c.deltaY,i=m),"deltaX"in c&&(l=c.deltaX,0===m&&(i=-1*l)),0!==m||0!==l){if(1===c.deltaMode){var q=a.data(this,"mousewheel-line-height");
i*=q,m*=q,l*=q}else if(2===c.deltaMode){var r=a.data(this,"mousewheel-page-height");i*=r,m*=r,l*=r}if(n=Math.max(Math.abs(m),Math.abs(l)),(!f||f>n)&&(f=n,k(c,n)&&(f/=40)),k(c,n)&&(i/=40,l/=40,m/=40),i=Math[i>=1?"floor":"ceil"](i/f),l=Math[l>=1?"floor":"ceil"](l/f),m=Math[m>=1?"floor":"ceil"](m/f),h.settings.normalizeOffset&&this.getBoundingClientRect){var s=this.getBoundingClientRect();o=b.clientX-s.left,p=b.clientY-s.top}return b.deltaX=l,b.deltaY=m,b.deltaFactor=f,b.offsetX=o,b.offsetY=p,b.deltaMode=0,g.unshift(b,i,l,m),e&&clearTimeout(e),e=setTimeout(j,200),(a.event.dispatch||a.event.handle).apply(this,g)
}}function j(){f=null}function k(a,b){return h.settings.adjustOldDeltas&&"mousewheel"===a.type&&b%120===0}var e,f,b=["wheel","mousewheel","DOMMouseScroll","MozMousePixelScroll"],c="onwheel"in document||document.documentMode>=9?["wheel"]:["mousewheel","DomMouseScroll","MozMousePixelScroll"],d=Array.prototype.slice;if(a.event.fixHooks)for(var g=b.length;g;)a.event.fixHooks[b[--g]]=a.event.mouseHooks;var h=a.event.special.mousewheel={version:"3.1.12",setup:function(){if(this.addEventListener)for(var b=c.length;b;)this.addEventListener(c[--b],i,!1);
else this.onmousewheel=i;a.data(this,"mousewheel-line-height",h.getLineHeight(this)),a.data(this,"mousewheel-page-height",h.getPageHeight(this))},teardown:function(){if(this.removeEventListener)for(var b=c.length;b;)this.removeEventListener(c[--b],i,!1);else this.onmousewheel=null;a.removeData(this,"mousewheel-line-height"),a.removeData(this,"mousewheel-page-height")},getLineHeight:function(b){var c=a(b),d=c["offsetParent"in a.fn?"offsetParent":"parent"]();return d.length||(d=a("body")),parseInt(d.css("fontSize"),10)||parseInt(c.css("fontSize"),10)||16
},getPageHeight:function(b){return a(b).height()},settings:{adjustOldDeltas:!0,normalizeOffset:!0}};a.fn.extend({mousewheel:function(a){return a?this.bind("mousewheel",a):this.trigger("mousewheel")},unmousewheel:function(a){return this.unbind("mousewheel",a)}})};c(),b.resolveWith(c)};FD50.module("mousewheel",a)}(),function(){var a=function(a){var b=this,c=a,d=function(){!function(a,b){"use strict";var d=a.History=a.History||{};if("undefined"!=typeof d.Adapter)throw new Error("History.js Adapter has already been loaded...");
d.Adapter={bind:function(a,b,d){c(a).bind(b,d)},trigger:function(a,b,d){c(a).trigger(b,d)},extractEventData:function(a,c,d){var e=c&&c.originalEvent&&c.originalEvent[a]||d&&d[a]||b;return e},onDomLoad:function(a){c(a)}},"undefined"!=typeof d.init&&d.init()}(window),function(a){"use strict";var c=a.document,d=a.setTimeout||d,e=a.clearTimeout||e,f=a.setInterval||f,g=a.History=a.History||{};if("undefined"!=typeof g.initHtml4)throw new Error("History.js HTML4 Support has already been loaded...");g.initHtml4=function(){return"undefined"!=typeof g.initHtml4.initialized?!1:(g.initHtml4.initialized=!0,g.enabled=!0,g.savedHashes=[],g.isLastHash=function(a){var c,b=g.getHashByIndex();
return c=a===b},g.saveHash=function(a){return g.isLastHash(a)?!1:(g.savedHashes.push(a),!0)},g.getHashByIndex=function(a){var b=null;return b="undefined"==typeof a?g.savedHashes[g.savedHashes.length-1]:0>a?g.savedHashes[g.savedHashes.length+a]:g.savedHashes[a]},g.discardedHashes={},g.discardedStates={},g.discardState=function(a,b,c){var e,d=g.getHashByState(a);return e={discardedState:a,backState:c,forwardState:b},g.discardedStates[d]=e,!0},g.discardHash=function(a,b,c){var d={discardedHash:a,backState:c,forwardState:b};
return g.discardedHashes[a]=d,!0},g.discardedState=function(a){var c,b=g.getHashByState(a);return c=g.discardedStates[b]||!1},g.discardedHash=function(a){var b=g.discardedHashes[a]||!1;return b},g.recycleState=function(a){var b=g.getHashByState(a);return g.discardedState(a)&&delete g.discardedStates[b],!0},g.emulated.hashChange&&(g.hashChangeInit=function(){g.checkerFunction=null;var d,e,h,i,b="";return g.isInternetExplorer()?(d="historyjs-iframe",e=c.createElement("iframe"),e.setAttribute("id",d),e.style.display="none",c.body.appendChild(e),e.contentWindow.document.open(),e.contentWindow.document.close(),h="",i=!1,g.checkerFunction=function(){if(i)return!1;
i=!0;var c=g.getHash()||"",d=g.unescapeHash(e.contentWindow.document.location.hash)||"";return c!==b?(b=c,d!==c&&(h=d=c,e.contentWindow.document.open(),e.contentWindow.document.close(),e.contentWindow.document.location.hash=g.escapeHash(c)),g.Adapter.trigger(a,"hashchange")):d!==h&&(h=d,g.setHash(d,!1)),i=!1,!0}):g.checkerFunction=function(){var c=g.getHash();return c!==b&&(b=c,g.Adapter.trigger(a,"hashchange")),!0},g.intervalList.push(f(g.checkerFunction,g.options.hashChangeInterval)),!0},g.Adapter.onDomLoad(g.hashChangeInit)),g.emulated.pushState&&(g.onHashChange=function(b){var j,d=b&&b.newURL||c.location.href,e=g.getHashByUrl(d),f=null,h=null;
return g.isLastHash(e)?(g.busy(!1),!1):(g.doubleCheckComplete(),g.saveHash(e),e&&g.isTraditionalAnchor(e)?(g.Adapter.trigger(a,"anchorchange"),g.busy(!1),!1):(f=g.extractState(g.getFullUrl(e||c.location.href,!1),!0),g.isLastSavedState(f)?(g.busy(!1),!1):(h=g.getHashByState(f),(j=g.discardedState(f))?(g.getHashByIndex(-2)===g.getHashByState(j.forwardState)?g.back(!1):g.forward(!1),!1):(g.pushState(f.data,f.title,f.url,!1),!0))))},g.Adapter.bind(a,"hashchange",g.onHashChange),g.pushState=function(b,d,e,f){if(g.getHashByUrl(e))throw new Error("History.js does not support states with fragement-identifiers (hashes/anchors).");
if(f!==!1&&g.busy())return g.pushQueue({scope:g,callback:g.pushState,args:arguments,queue:f}),!1;g.busy(!0);var h=g.createStateObject(b,d,e),i=g.getHashByState(h),j=g.getState(!1),k=g.getHashByState(j),l=g.getHash();return g.storeState(h),g.expectedStateId=h.id,g.recycleState(h),g.setTitle(h),i===k?(g.busy(!1),!1):i!==l&&i!==g.getShortUrl(c.location.href)?(g.setHash(i,!1),!1):(g.saveState(h),g.Adapter.trigger(a,"statechange"),g.busy(!1),!0)},g.replaceState=function(a,b,c,d){if(g.getHashByUrl(c))throw new Error("History.js does not support states with fragement-identifiers (hashes/anchors).");
if(d!==!1&&g.busy())return g.pushQueue({scope:g,callback:g.replaceState,args:arguments,queue:d}),!1;g.busy(!0);var e=g.createStateObject(a,b,c),f=g.getState(!1),h=g.getStateByIndex(-2);return g.discardState(f,e,h),g.pushState(e.data,e.title,e.url,!1),!0}),g.emulated.pushState&&g.getHash()&&!g.emulated.hashChange&&g.Adapter.onDomLoad(function(){g.Adapter.trigger(a,"hashchange")}),void 0)},"undefined"!=typeof g.init&&g.init()}(window),function(a,b){"use strict";var c=a.console||b,d=a.document,e=a.navigator,f=a.sessionStorage||!1,g=a.setTimeout,h=a.clearTimeout,i=a.setInterval,j=a.clearInterval,k=a.JSON,l=a.alert,m=a.History=a.History||{},n=a.history;
if(k.stringify=k.stringify||k.encode,k.parse=k.parse||k.decode,"undefined"!=typeof m.init)throw new Error("History.js Core has already been loaded...");m.init=function(){return"undefined"==typeof m.Adapter?!1:("undefined"!=typeof m.initCore&&m.initCore(),"undefined"!=typeof m.initHtml4&&m.initHtml4(),!0)},m.initCore=function(){if("undefined"!=typeof m.initCore.initialized)return!1;if(m.initCore.initialized=!0,m.options=m.options||{},m.options.hashChangeInterval=m.options.hashChangeInterval||100,m.options.safariPollInterval=m.options.safariPollInterval||500,m.options.doubleCheckInterval=m.options.doubleCheckInterval||500,m.options.storeInterval=m.options.storeInterval||1e3,m.options.busyDelay=m.options.busyDelay||250,m.options.debug=m.options.debug||!1,m.options.initialTitle=m.options.initialTitle||d.title,m.intervalList=[],m.clearAllIntervals=function(){var a,b=m.intervalList;
if("undefined"!=typeof b&&null!==b){for(a=0;a<b.length;a++)j(b[a]);m.intervalList=null}},m.debug=function(){m.options.debug&&m.log.apply(m,arguments)},m.log=function(){var e,f,g,h,i,a=!("undefined"==typeof c||"undefined"==typeof c.log||"undefined"==typeof c.log.apply),b=d.getElementById("log");for(a?(h=Array.prototype.slice.call(arguments),e=h.shift(),"undefined"!=typeof c.debug?c.debug.apply(c,[e,h]):c.log.apply(c,[e,h])):e="\n"+arguments[0]+"\n",f=1,g=arguments.length;g>f;++f){if(i=arguments[f],"object"==typeof i&&"undefined"!=typeof k)try{i=k.stringify(i)
}catch(j){}e+="\n"+i+"\n"}return b?(b.value+=e+"\n-----\n",b.scrollTop=b.scrollHeight-b.clientHeight):a||l(e),!0},m.getInternetExplorerMajorVersion=function(){var a=m.getInternetExplorerMajorVersion.cached="undefined"!=typeof m.getInternetExplorerMajorVersion.cached?m.getInternetExplorerMajorVersion.cached:function(){for(var a=3,b=d.createElement("div"),c=b.getElementsByTagName("i");(b.innerHTML="<!--[if gt IE "+ ++a+"]><i></i><![endif]-->")&&c[0];);return a>4?a:!1}();return a},m.isInternetExplorer=function(){var a=m.isInternetExplorer.cached="undefined"!=typeof m.isInternetExplorer.cached?m.isInternetExplorer.cached:Boolean(m.getInternetExplorerMajorVersion());
return a},m.emulated={pushState:!Boolean(a.history&&a.history.pushState&&a.history.replaceState&&!(/ Mobile\/([1-7][a-z]|(8([abcde]|f(1[0-8]))))/i.test(e.userAgent)||/AppleWebKit\/5([0-2]|3[0-2])/i.test(e.userAgent))),hashChange:Boolean(!("onhashchange"in a||"onhashchange"in d)||m.isInternetExplorer()&&m.getInternetExplorerMajorVersion()<8)},m.enabled=!m.emulated.pushState,m.bugs={setHash:Boolean(!m.emulated.pushState&&"Apple Computer, Inc."===e.vendor&&/AppleWebKit\/5([0-2]|3[0-3])/.test(e.userAgent)),safariPoll:Boolean(!m.emulated.pushState&&"Apple Computer, Inc."===e.vendor&&/AppleWebKit\/5([0-2]|3[0-3])/.test(e.userAgent)),ieDoubleCheck:Boolean(m.isInternetExplorer()&&m.getInternetExplorerMajorVersion()<8),hashEscape:Boolean(m.isInternetExplorer()&&m.getInternetExplorerMajorVersion()<7)},m.isEmptyObject=function(a){for(var b in a)return!1;
return!0},m.cloneObject=function(a){var b,c;return a?(b=k.stringify(a),c=k.parse(b)):c={},c},m.getRootUrl=function(){var a=d.location.protocol+"//"+(d.location.hostname||d.location.host);return d.location.port&&(a+=":"+d.location.port),a+="/"},m.getBaseHref=function(){var a=d.getElementsByTagName("base"),b=null,c="";return 1===a.length&&(b=a[0],c=b.href.replace(/[^\/]+$/,"")),c=c.replace(/\/+$/,""),c&&(c+="/"),c},m.getBaseUrl=function(){var a=m.getBaseHref()||m.getBasePageUrl()||m.getRootUrl();return a},m.getPageUrl=function(){var c,a=m.getState(!1,!1),b=(a||{}).url||d.location.href;
return c=b.replace(/\/+$/,"").replace(/[^\/]+$/,function(a){return/\./.test(a)?a:a+"/"})},m.getBasePageUrl=function(){var a=d.location.href.replace(/[#\?].*/,"").replace(/[^\/]+$/,function(a){return/[^\/]$/.test(a)?"":a}).replace(/\/+$/,"")+"/";return a},m.getFullUrl=function(a,b){var c=a,d=a.substring(0,1);return b="undefined"==typeof b?!0:b,/[a-z]+\:\/\//.test(a)||(c="/"===d?m.getRootUrl()+a.replace(/^\/+/,""):"#"===d?m.getPageUrl().replace(/#.*/,"")+a:"?"===d?m.getPageUrl().replace(/[\?#].*/,"")+a:b?m.getBaseUrl()+a.replace(/^(\.\/)+/,""):m.getBasePageUrl()+a.replace(/^(\.\/)+/,"")),c.replace(/\#$/,"")
},m.getShortUrl=function(a){var b=a,c=m.getBaseUrl(),d=m.getRootUrl();return m.emulated.pushState&&(b=b.replace(c,"")),b=b.replace(d,"/"),m.isTraditionalAnchor(b)&&(b="./"+b),b=b.replace(/^(\.\/)+/g,"./").replace(/\#$/,"")},m.store={},m.idToState=m.idToState||{},m.stateToId=m.stateToId||{},m.urlToId=m.urlToId||{},m.storedStates=m.storedStates||[],m.savedStates=m.savedStates||[],m.normalizeStore=function(){m.store.idToState=m.store.idToState||{},m.store.urlToId=m.store.urlToId||{},m.store.stateToId=m.store.stateToId||{}
},m.getState=function(a,b){"undefined"==typeof a&&(a=!0),"undefined"==typeof b&&(b=!0);var c=m.getLastSavedState();return!c&&b&&(c=m.createStateObject()),a&&(c=m.cloneObject(c),c.url=c.cleanUrl||c.url),c},m.getIdByState=function(a){var c,b=m.extractId(a.url);if(!b)if(c=m.getStateString(a),"undefined"!=typeof m.stateToId[c])b=m.stateToId[c];else if("undefined"!=typeof m.store.stateToId[c])b=m.store.stateToId[c];else{for(;;)if(b=(new Date).getTime()+String(Math.random()).replace(/\D/g,""),"undefined"==typeof m.idToState[b]&&"undefined"==typeof m.store.idToState[b])break;
m.stateToId[c]=b,m.idToState[b]=a}return b},m.normalizeState=function(a){var b,c;return a&&"object"==typeof a||(a={}),"undefined"!=typeof a.normalized?a:(a.data&&"object"==typeof a.data||(a.data={}),b={},b.normalized=!0,b.title=a.title||"",b.url=m.getFullUrl(m.unescapeString(a.url||d.location.href)),b.hash=m.getShortUrl(b.url),b.data=m.cloneObject(a.data),b.id=m.getIdByState(b),b.cleanUrl=b.url.replace(/\??\&_suid.*/,""),b.url=b.cleanUrl,c=!m.isEmptyObject(b.data),(b.title||c)&&(b.hash=m.getShortUrl(b.url).replace(/\??\&_suid.*/,""),/\?/.test(b.hash)||(b.hash+="?"),b.hash+="&_suid="+b.id),b.hashedUrl=m.getFullUrl(b.hash),(m.emulated.pushState||m.bugs.safariPoll)&&m.hasUrlDuplicate(b)&&(b.url=b.hashedUrl),b)
},m.createStateObject=function(a,b,c){var d={data:a,title:b,url:c};return d=m.normalizeState(d)},m.getStateById=function(a){a=String(a);var c=m.idToState[a]||m.store.idToState[a]||b;return c},m.getStateString=function(a){var b,c,d;return b=m.normalizeState(a),c={data:b.data,title:a.title,url:a.url},d=k.stringify(c)},m.getStateId=function(a){var b,c;return b=m.normalizeState(a),c=b.id},m.getHashByState=function(a){var b,c;return b=m.normalizeState(a),c=b.hash},m.extractId=function(a){var b,c,d;return c=/(.*)\&_suid=([0-9]+)$/.exec(a),d=c?c[1]||a:a,b=c?String(c[2]||""):"",b||!1
},m.isTraditionalAnchor=function(a){var b=!/[\/\?\.]/.test(a);return b},m.extractState=function(a,b){var d,e,c=null;return b=b||!1,d=m.extractId(a),d&&(c=m.getStateById(d)),c||(e=m.getFullUrl(a),d=m.getIdByUrl(e)||!1,d&&(c=m.getStateById(d)),c||!b||m.isTraditionalAnchor(a)||(c=m.createStateObject(null,null,e))),c},m.getIdByUrl=function(a){var c=m.urlToId[a]||m.store.urlToId[a]||b;return c},m.getLastSavedState=function(){return m.savedStates[m.savedStates.length-1]||b},m.getLastStoredState=function(){return m.storedStates[m.storedStates.length-1]||b
},m.hasUrlDuplicate=function(a){var c,b=!1;return c=m.extractState(a.url),b=c&&c.id!==a.id},m.storeState=function(a){return m.urlToId[a.url]=a.id,m.storedStates.push(m.cloneObject(a)),a},m.isLastSavedState=function(a){var c,d,e,b=!1;return m.savedStates.length&&(c=a.id,d=m.getLastSavedState(),e=d.id,b=c===e),b},m.saveState=function(a){return m.isLastSavedState(a)?!1:(m.savedStates.push(m.cloneObject(a)),!0)},m.getStateByIndex=function(a){var b=null;return b="undefined"==typeof a?m.savedStates[m.savedStates.length-1]:0>a?m.savedStates[m.savedStates.length+a]:m.savedStates[a]
},m.getHash=function(){var a=m.unescapeHash(d.location.hash);return a},m.unescapeString=function(b){for(var d,c=b;;){if(d=a.unescape(c),d===c)break;c=d}return c},m.unescapeHash=function(a){var b=m.normalizeHash(a);return b=m.unescapeString(b)},m.normalizeHash=function(a){var b=a.replace(/[^#]*#/,"").replace(/#.*/,"");return b},m.setHash=function(a,b){var c,e,f;return b!==!1&&m.busy()?(m.pushQueue({scope:m,callback:m.setHash,args:arguments,queue:b}),!1):(c=m.escapeHash(a),m.busy(!0),e=m.extractState(a,!0),e&&!m.emulated.pushState?m.pushState(e.data,e.title,e.url,!1):d.location.hash!==c&&(m.bugs.setHash?(f=m.getPageUrl(),m.pushState(null,null,f+"#"+c,!1)):d.location.hash=c),m)
},m.escapeHash=function(b){var c=m.normalizeHash(b);return c=a.escape(c),m.bugs.hashEscape||(c=c.replace(/\%21/g,"!").replace(/\%26/g,"&").replace(/\%3D/g,"=").replace(/\%3F/g,"?")),c},m.getHashByUrl=function(a){var b=String(a).replace(/([^#]*)#?([^#]*)#?(.*)/,"$2");return b=m.unescapeHash(b)},m.setTitle=function(a){var c,b=a.title;b||(c=m.getStateByIndex(0),c&&c.url===a.url&&(b=c.title||m.options.initialTitle));try{d.getElementsByTagName("title")[0].innerHTML=b.replace("<","&lt;").replace(">","&gt;").replace(" & "," &amp; ")
}catch(e){}return d.title=b,m},m.queues=[],m.busy=function(a){if("undefined"!=typeof a?m.busy.flag=a:"undefined"==typeof m.busy.flag&&(m.busy.flag=!1),!m.busy.flag){h(m.busy.timeout);var b=function(){var a,c,d;if(!m.busy.flag)for(a=m.queues.length-1;a>=0;--a)c=m.queues[a],0!==c.length&&(d=c.shift(),m.fireQueueItem(d),m.busy.timeout=g(b,m.options.busyDelay))};m.busy.timeout=g(b,m.options.busyDelay)}return m.busy.flag},m.busy.flag=!1,m.fireQueueItem=function(a){return a.callback.apply(a.scope||m,a.args||[])},m.pushQueue=function(a){return m.queues[a.queue||0]=m.queues[a.queue||0]||[],m.queues[a.queue||0].push(a),m
},m.queue=function(a,b){return"function"==typeof a&&(a={callback:a}),"undefined"!=typeof b&&(a.queue=b),m.busy()?m.pushQueue(a):m.fireQueueItem(a),m},m.clearQueue=function(){return m.busy.flag=!1,m.queues=[],m},m.stateChanged=!1,m.doubleChecker=!1,m.doubleCheckComplete=function(){return m.stateChanged=!0,m.doubleCheckClear(),m},m.doubleCheckClear=function(){return m.doubleChecker&&(h(m.doubleChecker),m.doubleChecker=!1),m},m.doubleCheck=function(a){return m.stateChanged=!1,m.doubleCheckClear(),m.bugs.ieDoubleCheck&&(m.doubleChecker=g(function(){return m.doubleCheckClear(),m.stateChanged||a(),!0
},m.options.doubleCheckInterval)),m},m.safariStatePoll=function(){var c,b=m.extractState(d.location.href);if(!m.isLastSavedState(b))return c=b,c||(c=m.createStateObject()),m.Adapter.trigger(a,"popstate"),m},m.back=function(a){return a!==!1&&m.busy()?(m.pushQueue({scope:m,callback:m.back,args:arguments,queue:a}),!1):(m.busy(!0),m.doubleCheck(function(){m.back(!1)}),n.go(-1),!0)},m.forward=function(a){return a!==!1&&m.busy()?(m.pushQueue({scope:m,callback:m.forward,args:arguments,queue:a}),!1):(m.busy(!0),m.doubleCheck(function(){m.forward(!1)
}),n.go(1),!0)},m.go=function(a,b){var c;if(a>0)for(c=1;a>=c;++c)m.forward(b);else{if(!(0>a))throw new Error("History.go: History.go requires a positive or negative integer passed.");for(c=-1;c>=a;--c)m.back(b)}return m},m.emulated.pushState){var o=function(){};m.pushState=m.pushState||o,m.replaceState=m.replaceState||o}else m.onPopState=function(b,c){var g,h,e=!1,f=!1;return m.doubleCheckComplete(),(g=m.getHash())?(h=m.extractState(g||d.location.href,!0),h?m.replaceState(h.data,h.title,h.url,!1):(m.Adapter.trigger(a,"anchorchange"),m.busy(!1)),m.expectedStateId=!1,!1):(e=m.Adapter.extractEventData("state",b,c)||!1,f=e?m.getStateById(e):m.expectedStateId?m.getStateById(m.expectedStateId):m.extractState(d.location.href),f||(f=m.createStateObject(null,null,d.location.href)),m.expectedStateId=!1,m.isLastSavedState(f)?(m.busy(!1),!1):(m.storeState(f),m.saveState(f),m.setTitle(f),m.Adapter.trigger(a,"statechange"),m.busy(!1),!0))
},m.Adapter.bind(a,"popstate",m.onPopState),m.pushState=function(b,c,d,e){if(m.getHashByUrl(d)&&m.emulated.pushState)throw new Error("History.js does not support states with fragement-identifiers (hashes/anchors).");if(e!==!1&&m.busy())return m.pushQueue({scope:m,callback:m.pushState,args:arguments,queue:e}),!1;m.busy(!0);var f=m.createStateObject(b,c,d);return m.isLastSavedState(f)?m.busy(!1):(m.storeState(f),m.expectedStateId=f.id,n.pushState(f.id,f.title,f.url),m.Adapter.trigger(a,"popstate")),!0},m.replaceState=function(b,c,d,e){if(m.getHashByUrl(d)&&m.emulated.pushState)throw new Error("History.js does not support states with fragement-identifiers (hashes/anchors).");
if(e!==!1&&m.busy())return m.pushQueue({scope:m,callback:m.replaceState,args:arguments,queue:e}),!1;m.busy(!0);var f=m.createStateObject(b,c,d);return m.isLastSavedState(f)?m.busy(!1):(m.storeState(f),m.expectedStateId=f.id,n.replaceState(f.id,f.title,f.url),m.Adapter.trigger(a,"popstate")),!0};if(f){try{m.store=k.parse(f.getItem("History.store"))||{}}catch(p){m.store={}}m.normalizeStore()}else m.store={},m.normalizeStore();m.Adapter.bind(a,"beforeunload",m.clearAllIntervals),m.Adapter.bind(a,"unload",m.clearAllIntervals),m.saveState(m.storeState(m.extractState(d.location.href,!0))),f&&(m.onUnload=function(){var a,b;
try{a=k.parse(f.getItem("History.store"))||{}}catch(c){a={}}a.idToState=a.idToState||{},a.urlToId=a.urlToId||{},a.stateToId=a.stateToId||{};for(b in m.idToState)m.idToState.hasOwnProperty(b)&&(a.idToState[b]=m.idToState[b]);for(b in m.urlToId)m.urlToId.hasOwnProperty(b)&&(a.urlToId[b]=m.urlToId[b]);for(b in m.stateToId)m.stateToId.hasOwnProperty(b)&&(a.stateToId[b]=m.stateToId[b]);m.store=a,m.normalizeStore(),f.setItem("History.store",k.stringify(a))},m.intervalList.push(i(m.onUnload,m.options.storeInterval)),m.Adapter.bind(a,"beforeunload",m.onUnload),m.Adapter.bind(a,"unload",m.onUnload)),m.emulated.pushState||(m.bugs.safariPoll&&m.intervalList.push(i(m.safariStatePoll,m.options.safariPollInterval)),("Apple Computer, Inc."===e.vendor||"Mozilla"===(e.appCodeName||""))&&(m.Adapter.bind(a,"hashchange",function(){m.Adapter.trigger(a,"popstate")
}),m.getHash()&&m.Adapter.onDomLoad(function(){m.Adapter.trigger(a,"hashchange")})))},m.init()}(window);var b=[];a.fn.route=function(c){if(this.is("a")){var d=this.attr("title"),e=a.joomla.appendTitle;"before"===e&&(d=a.joomla.sitename+(d?" - "+d:"")),"after"===e&&(d=(d?d+" - ":"")+a.joomla.sitename);var f=(new Date).getTime();b[f]=f,History.pushState(a.extend({timestamp:f,refresh:!0},c),d,this.attr("href"))}return this},History.Adapter.bind(window,"statechange",function(){var a=History.getState();a.id===History.savedStates[0].id&&(window.location=a.url),a.data.timestamp in b?delete b[a.data.timestamp]:a.data.refresh&&(window.location=a.url)
})};d(),b.resolveWith(d)};FD50.module("history",a)}()}),FD50.installer("EasyBlog","definitions",function(a){a.module(["easyblog/easyblog","easyblog/layout/template","easyblog/layout/responsive","easyblog/layout/dialog","easyblog/layout/elements","easyblog/layout/launcher","easyblog/layout/placeholder","easyblog/layout/image/popup","easyblog/layout/image/gallery","easyblog/layout/image/legacy","easyblog/subscribe","easyblog/composer/document/artboard","easyblog/composer/blocks/dimensions","easyblog/composer/blocks/droppable","easyblog/composer/blocks/font","easyblog/composer/blocks/guide","easyblog/composer/blocks/handlers/audio","easyblog/composer/blocks/handlers/behance","easyblog/composer/blocks/handlers/buttons","easyblog/composer/blocks/handlers/code","easyblog/composer/blocks/handlers/codepen","easyblog/composer/blocks/handlers/columns","easyblog/composer/blocks/handlers/compare","easyblog/composer/blocks/handlers/file","easyblog/composer/blocks/handlers/gist","easyblog/composer/blocks/handlers/heading","easyblog/composer/blocks/handlers/html","easyblog/composer/blocks/handlers/image","easyblog/composer/blocks/handlers/instagram","easyblog/composer/blocks/handlers/links","easyblog/composer/blocks/handlers/list","easyblog/composer/blocks/handlers/note","easyblog/composer/blocks/handlers/post","easyblog/composer/blocks/handlers/quotes","easyblog/composer/blocks/handlers/readmore","easyblog/composer/blocks/handlers/rule","easyblog/composer/blocks/handlers/slideshare","easyblog/composer/blocks/handlers/soundcloud","easyblog/composer/blocks/handlers/spotify","easyblog/composer/blocks/handlers/table","easyblog/composer/blocks/handlers/tabs","easyblog/composer/blocks/handlers/text","easyblog/composer/blocks/handlers/tweet","easyblog/composer/blocks/handlers/video","easyblog/composer/blocks/mobile","easyblog/composer/blocks/nestable","easyblog/composer/blocks/panel","easyblog/composer/blocks/removal","easyblog/composer/blocks/resizable","easyblog/composer/blocks/scrollable","easyblog/composer/blocks/search","easyblog/composer/blocks/text","easyblog/composer/blocks/tree","easyblog/composer/blocks","easyblog/composer/blocks/media","easyblog/composer/blocks/toolbar","easyblog/","easyblog/composer/blogimage","easyblog/composer/category","easyblog/composer/datetime","easyblog/composer/debugger","easyblog/composer/document/overlay","easyblog/composer/document","easyblog/composer/document/toolbar","easyblog/composer/redactor10","easyblog/composer/location","easyblog/composer/manager","easyblog/composer/media","easyblog/mediamanager","easyblog/mediamanager/uploader","easyblog/composer/panels/authorship","easyblog/composer/panels/autopost","easyblog/composer/panels/fields","easyblog/composer/panels/post","easyblog/composer/panels/seo","easyblog/composer/panels","easyblog/composer/posts","easyblog/composer/redactor","easyblog/composer/tags","easyblog/composer/templates","easyblog/composer","easyblog/composer/revisions","easyblog/composer/panels/category","easyblog/layout/image/caption","easyblog/mediamanager/audio","easyblog/mediamanager/image","easyblog/mediamanager/video"]),a.require.template.loader(["easyblog/site/composer/primary.category.item"])
}),FD50.installer("EasyBlog","scripts",function($){EasyBlog.require().library("ui/position").script("layout/template","layout/responsive","layout/dialog","layout/elements","layout/launcher","layout/placeholder","layout/image/popup","layout/image/gallery","layout/image/legacy","subscribe").done(),EasyBlog.module("layout/template",function(a){var b=this,c=EasyBlog.template=function(b){if(b){if(c.cache.hasOwnProperty(b))return c.cache[b];var d='.eb-template[data-name="'+b+'"]',e=a.trim(a(d).detach().html());return e&&(c.cache[b]=e),e
}};c.cache={},b.resolve()}),EasyBlog.module("layout/responsive",function(a){var b=this;a(function(){a.responsive(".eb-responsive",[{at:1200,switchTo:"wide"},{at:960,switchTo:"wide w960"},{at:818,switchTo:"wide w960 w768"},{at:600,switchTo:"wide w960 w768 w600"},{at:560,switchTo:"wide w960 w768 w600 w480"},{at:480,switchTo:"wide w960 w768 w600 w480 w320"}])});var c="#fd.eb [data-responsive]",d=function(){a(c).each(function(){for(var e,b=a(this),c=b.outerWidth(),d=b.data("responsive").split(","),f=[],g=[];e=d.shift();)(e>=c?g:f).push("w"+e);
b.removeClass(f.join(" ")).addClass(g.join(" "))})};a(document).ready(d),a(window).on("load.responsive",d).on("resize.responsive_",a.debounce(d,350)),b.resolve()}),EasyBlog.module("layout/dialog",function($){var module=this,dialogHtml='<div id="fd" class="eb eb-dialog has-footer"><div class="eb-dialog-modal"><div class="eb-dialog-header"><div class="row-table"><div class="col-cell cell-ellipse"><span class="eb-dialog-title"></span></div><div class="col-cell cell-tight eb-dialog-close-button"><i class="fa fa-close"></i></div></div></div><div class="eb-dialog-body"><div class="eb-dialog-container"><div class="eb-dialog-content"></div><div class="eb-hint hint-loading layout-overlay style-gray size-sm"><div><i class="eb-hint-icon"><span class="eb-loader-o size-lg"></span></i></div></div><div class="eb-hint hint-failed layout-overlay style-gray size-sm"><div><i class="eb-hint-icon fa fa-warning"></i><span class="eb-hint-text"><span class="eb-dialog-error-message"></span></span></div></div></div></div><div class="eb-dialog-footer"><div class="row-table"><div class="col-cell eb-dialog-footer-content"></div></div></div></div></div>',dialog_=".eb-dialog",dialogModal_=".eb-dialog-modal",dialogContent_=".eb-dialog-content",dialogHeader_=".eb-dialog-header",dialogFooter_=".eb-dialog-footer",dialogFooterContent_=".eb-dialog-footer-content",dialogCloseButton_=".eb-dialog-close-button",dialogTitle_=".eb-dialog-title",dialogErrorMessage_=".eb-dialog-error-message",isFailed="is-failed",isLoading="is-loading",rxBraces=/\{|\}/gi,self=EasyBlog.dialog=function(a){if(void 0===a)return self;
$.isString(a)&&(a={content:a});var b=self.open;return window.parentEasyBlogDialog&&(b=window.parentEasyBlogDialog.open),b.apply(self,[a]),self};$.extend(self,{defaultOptions:{title:"",content:"",buttons:"",classname:"",width:"auto",height:"auto",escapeKey:!0},open:function(a){var b=$(dialog_);b.length<1&&(b=$(dialogHtml).appendTo("body"));var a=$.extend({},self.defaultOptions,a),c=$(dialogTitle_);c.text(a.title);var d=$(dialogFooterContent_);d.html(a.buttons),b.toggleClass("has-footer",!!a.buttons),self.setBindings(a);
var e=$(dialogContent_).empty(),f=a.content,g=self.getContentType(f);b.switchClass("type-"+g);var h=$(dialogModal_),i=a.width,j=a.height;if($.isNumeric(j)){var k=$(dialogHeader_),l=$(dialogFooter_);j+=k.height()+l.height()}switch(h.css({width:i,height:j}),b.addClassAfter("active"),g){case"html":e.html(f);break;case"iframe":var m=$("<iframe>"),n=f;m.appendTo(e).one("load",function(){try{m[0].contentWindow.parentEasyBlogDialog=self}catch(a){}}).attr("src",n);break;case"deferred":return b.switchClass(isLoading),f.done(function(c){$.isPlainObject(c)?self.reopen($.extend(!0,a,c)):$.isString(c)?(a.content=c,self.reopen(a)):b.switchClass(isFailed)
}).fail(function(a){b.switchClass(isFailed);var c=$(dialogErrorMessage_);$.isString(a)&&c.html(a),$.isPlainObject(a)&&a.message&&c.html(a.message)}),void 0;case"dialog":var o=self.parseXMLOptions(f);return self.open($.extend(!0,a,o)),void 0}},reopen:function(a){self.close(),self.open(a)},close:function(){self.unsetBindings();var a=$(dialog_);a.remove()},getContentType:function(a){return/<dialog>(.*?)/.test(a)?"dialog":$.isUrl(a)?"iframe":$.isDeferred(a)?"deferred":"html"},parseXMLOptions:function(xml){var xmlOptions=$.buildHTML(xml),newOptions={};
return $.each(xmlOptions.children(),function(i,node){var node=$(node),key=$.String.camelize(this.nodeName.toLowerCase()),val=node.html(),type=node.attr("type");switch(type){case"json":try{val=$.parseJSON(val)}catch(e){}break;case"javascript":try{val=eval("(function($){ return "+$.trim(val)+" })("+$.globalNamespace+")")}catch(e){}break;case"text":val=node.text()}$.isNumeric(val)&&(val=parseFloat(val)),newOptions[key]=val}),newOptions},bindings:{},setBindings:function(a){self.unsetBindings();var b=a.selectors,c=a.bindings;
if(b&&c){var d={parent:self},e=$(dialog_);$.each(b,function(a,b){var a=a.replace(rxBraces,""),c=d[a]=function(){return e.find(b)};c.selector=b}),$.each(c,function(a,b){var c=a.split(" "),f=c[0].replace(rxBraces,""),g=c[1]+".eb.dialog",h=d[f];if(h){var i=h.selector;e.on(g,i,function(){b.apply(d,[this].concat(arguments))}),self.bindings[g]=b}})}a.escapeKey&&$(document).on("keydown.eb.dialog",function(a){27==a.keyCode&&self.close()})},unsetBindings:function(){var a=$(dialog_);$.each(self.bindings,function(b){a.off(b)
}),$(document).off("keydown.eb.dialog")}}),$(document).on("click",dialogCloseButton_,function(){self.close()}).on("click",dialog_,function(a){var b=$(dialog_);a.target==b[0]&&self.close()}),module.resolve()}),EasyBlog.module("layout/elements",function(a){var b=this;a(document).on("click.button.data-bp-api","[data-bp-toggle-value]",function(){var b=a(this),d=(b.siblings("[data-bp-toggle-value]"),b.parents('[data-bp-toggle="radio-buttons"]'));if(!d.hasClass("disabled")&&d.length>0){var e=b.data("bp-toggle-value");
return d.find("input[type=hidden]").val(e).trigger("change"),void 0}}),a(document).on("change.data-bp-input",'[data-bp-toggle="radio-buttons"] input[type=hidden]',function(){{var b=a(this),c=b.siblings("[data-bp-toggle-value]");b.val()}c.removeClass("active").filter('[data-bp-toggle-value="'+b.val()+'"]').addClass("active")}),a(document).on("mouseover.tooltip.data-eb-api","[data-eb-provide=tooltip]",function(){a(this).tooltip({delay:{show:200,hide:100},animation:!1,template:'<div id="fd" class="eb tooltip tooltip-eb"><div class="tooltip-arrow"></div><div class="tooltip-inner"></div></div>',container:"body"}).tooltip("show")
}),a(document).on("mouseover.popover.data-eb-api","[data-eb-provide=popover]",function(){a(this).popover({delay:{show:200,hide:100},animation:!1,trigger:"hover",container:"body"}).popover("show")});var c=function(a){return a%400?a%100?a%4?!1:!0:!1:!0};a(document).on("keyup","[data-date-form] [data-date-day]",function(){if(a.trim(a(this).val())){var b=parseInt(a(this).siblings("[data-date-year]").val()||a(this).siblings("[data-date-year]").data("dateDefault")),d=parseInt(a(this).siblings("[data-date-month]").val()||a(this).siblings("[data-date-month]").data("dateDefault")),e=parseInt(a(this).val()||a(this).data("dateDefault")),f=/1|3|5|7|8|10|12/.test(d)?31:30;
2==d&&(f=c(b)?29:28),1>e&&(e=1),e>f&&(e=f),a.isNumeric(e)?a(this).val(e):a(this).val("")}}),a(document).on("keyup","[data-date-form] [data-date-year]",function(){if(a.trim(a(this).val())){var b=parseInt(a(this).val());1>b&&(b=1),a.isNumeric(b)?a(this).val(b):a(this).val("")}}),a.fn.listbox=function(b){var c=this;if(a.isPlainObject(b)||void 0===b)return c.each(function(){var c=a(this),e=d.get(c);e?e.update(b):e=new d(c,b)}),this;if(a.isString(b)){var h,e=a(this[0]),f=d.get(e)||new d(e),g=f[b];return a.isFunction(g)&&(h=g.apply(f,a.makeArray(arguments).slice(1))),h||this
}return this},a.fn.listboxitem=function(b){var c=this;if(void 0===b)return c.each(function(){var b=a(this);d.Item.init(b)}),this;if(a.isString(b)){var e=a(this[0]);d.Item.init(e);var h,f=e.data("listboxitem"),g=f[b];return a.isFunction(g)&&(h=g.apply(f,a.makeArray(arguments).slice(1))),h||this}return this};var d=function(b,c,e){var f=this,g={};f.container=b,b.data("listbox",f),a.each(d.defaultOptions,function(a){var d=b.attr("data-listbox-"+a);void 0!==d&&(g[a]=isNaN(parseInt(d))?d:parseInt(d))}),e&&f.extend(e),f.update(a.extend(!0,{},d.defaultOptions,g,c)),f.init()
};d.defaultOptions={toggleDefault:!0,sortable:!0,allowAdd:!0,allowRemove:!0,max:0,min:1,customHTML:"",itemTitle:"Title"},d.get=function(b){var c=a(b).data("listbox");return c instanceof d?c:void 0},a.extend(d.prototype,{options:{},addButton:function(){return this.container.find("[data-listbox-button-add]")},update:function(b){var c=this;a.extend(!0,c.options,b)},extend:function(b){a.each(b,function(b,c){a.isFunction(c)&&(d.prototype[b]=c)})},getItems:function(a){var c=this.container.find("[data-listbox-item]");
return a&&(c=c.filter(a)),d.Item.init(c),c},getParentItem:function(b){var c=a(b).closest("[data-listbox-item]");return d.Item.init(c),c},init:function(){var a=this,b=a.container,c=b.find("[data-listbox-custom-html]");a.options.customHTML=c.html(),c.remove(),a.options.toggleDefault&&b.on("click.listbox.toggleDefault","[data-listbox-button-default]",function(){return a.toggleDefault(this)}),a.options.allowAdd&&b.on("click.listbox.addItem","[data-listbox-button-add]",function(){return a.add(this)}),a.options.allowRemove&&b.on("click.listbox.removeItem","[data-listbox-button-remove]",function(){return a.remove(this)
}),a.options.sortable&&this.initSortable(),!a.options.customHTML&&this.getItems().find("[data-listbox-item-content]").editable(!0)},initSortable:function(){},toggleDefault:function(a){var b=this.getItems(),c=this.getParentItem(a);0!=c.length&&(this.container.trigger("listboxBeforeToggleDefault",[c]),c&&(b.removeClass("is-default"),c.addClass("is-default"),this.container.trigger("listboxAfterToggleDefault",[c])))},isDefault:function(a){return a.hasClass("is-default")},add:function(){var a=this.getItems();if(!(this.options.max>0&&a.length>=this.options.max)){var b=d.Item.newItem(this.options);
this.container.trigger("listboxBeforeAddItem",[b]),b&&(this.addButton().before(b),this.container.trigger("listboxAfterAddItem",[b]),0==this.getItems(".is-default").length&&this.toggleDefault(this.getItems(":first")))}},remove:function(a){var b=this.getItems();if(!(this.options.min>0&&b.length<=this.options.min)){var c=this.getParentItem(a);this.container.trigger("listboxBeforeRemoveItem",[c]),c&&(c.remove(),this.container.trigger("listboxAfterRemoveItem",[c]),this.isDefault(c)&&this.toggleDefault(this.getItems(":first")))
}},populate:function(b,c){var e=this;e.getItems().remove(),a.each(b,function(b,f){var g=d.Item.newItem(e.options);a.isFunction(c)&&c(g,f.content),f.default&&g.addClass("is-default"),e.container.trigger("listboxBeforePopulateItem",[f]),e.addButton().before(g),e.container.trigger("listboxAfterPopulateItem",[f])})},toData:function(){var b=[];return a.each(this.getItems(),function(c,d){b.push(a(d).listboxitem("toData"))}),b}}),d.Item=function(a){this.item=a,this.parent=a.parents("[data-listbox]").data("listbox")
},d.Item.get=function(b){var c=a(b).data("listboxitem");return c instanceof d.Item?c:void 0},d.Item.init=function(b){return b=a(b),a.each(b,function(b,c){c=a(c),d.Item.get(c)||c.data("listboxitem",new d.Item(c))}),b},d.Item.newItem=function(b){var c=a("<div></div>",{"data-listbox-item":"","class":"eb-composer-manage-tab row-table"}),e=a("<div></div>",{"class":"col-cell eb-composer-manage-tab-handler"});b.sortable&&e.append('<i class="fa fa-bars"></i>'),b.toggleDefault&&e.append(' <i class="fa fa-star" data-listbox-button-default></i>'),c.append(e);
var f=a("<div></div>",{"data-listbox-item-content":"","class":"col-cell eb-composer-manage-tab-name"}).html(b.customHTML?a.buildHTML(b.customHTML):b.itemTitle);return!b.customHTML&&f.editable(!0),c.append(f),b.allowRemove&&c.append(a("<div></div>",{"data-listbox-button-remove":"","class":"col-cell eb-composer-manage-tab-remove"}).html("&times;")),d.Item.init(c),c},a.extend(d.Item.prototype,{isDefault:function(){return this.item.hasClass("is-default")},content:function(a){var b=this.item.find("[data-listbox-item-content]");
return void 0!==a?(b.html(a),this):b.html()},remove:function(){this.parent.remove(this.item)},setDefault:function(){this.parent.toggleDefault(this.item)},toData:function(){var a=this;return{"default":a.isDefault()?1:0,content:a.content()}}}),EasyBlog.UI=function(b){var c=b.document;a(c).on("click.ebtabs",".eb-tabs-menu-item",function(){var b=a(this),c=b.closest(".eb-tabs"),d=c.find("> .eb-tabs-menu"),e=d.find("> .eb-tabs-menu-item"),f=c.find("> .eb-tabs-content"),g=f.find("> .eb-tabs-content-item");"toggle"==c.data("eb-tabs-mode")&&b.hasClass("active")?(e.removeClass("active"),g.removeClass("active")):(e.removeClass("active"),b.addClass("active"),g.removeClass("active").where("id",b.data("id")).addClass("active")),c[g.filter(".active").length>0?"addClassAfter":"removeClassAfter"]("is-open",1)
})},EasyBlog.UI(window),b.resolve()}),EasyBlog.module("layout/launcher",function(a){var b=this,c='<div id="fd" class="eb eb-composer-launcher is-loading" data-eb-composer-launcher><div class="eb-composer-launcher-header"><div class="eb-composer-launcher-close-button" data-eb-composer-launcher-close-button><i class="fa fa-close"></i></div></div><div class="eb-composer-launcher-container" data-eb-composer-launcher-container><div class="eb-loader-o size-lg"></div></div></div>',d='<iframe class="eb-composer-launcher-instance" data-eb-composer-launcher-instance />',e="[data-eb-composer-launcher]",f="[data-eb-composer]",g="[data-eb-composer-launcher-close-button]",h="[data-eb-composer-launcher-container]",j=EasyBlog.ComposerLauncher={open:function(b){j.close(),a("body").noscroll(!0);
{var e=a(c),f=e.find(h);a(d).attr("src",b).one("load",j.ready).appendTo(f)}e.appendTo("body").addClassAfter("active")},close:function(){a(e).remove(),a("body").noscroll(!1)},ready:function(){a(e).removeClass("is-loading")},redirect:function(a){parent.window.location=a}};a(document).on("composerSaveError",function(){}),a(document).on("composerSaveSuccess",function(){}),a(document).on("click",f,function(b){if(!(b.shiftKey||b.ctrlKey||b.metaKey||/Android|webOS|iPhone|iPad|iPod|BlackBerry|IEMobile|Opera Mini/i.test(navigator.userAgent))){var c=a(this),d=c.attr("href");
j.open(d),b.preventDefault()}}).on("click",g,function(){EasyBlog.dialog({content:EasyBlog.ajax("site/views/composer/confirmClose"),bindings:{"{cancelButton} click":function(){EasyBlog.dialog.close()},"{closeButton} click":function(){EasyBlog.dialog.close(),j.close()}}})}),b.resolve()}),EasyBlog.module("layout/placeholder",function(a){var b=this;if(a.IE<=9){var c="textarea[placeholder]:not(.placeholder), :input[placeholder]:not(.placeholder)";EasyBlog.require().library("placeholder").done(function(){EasyBlog.fixPlaceholder=function(){a(c).placeholder()
},a(EasyBlog.fixPlaceholder),a(document).on("mouseover",c,function(){a(this).placeholder()})})}b.resolve()}),EasyBlog.module("layout/image/popup",function(a){var b=this,c=EasyBlog.template("site/layout/image/popup"),d=EasyBlog.template("site/layout/image/popup/thumb"),e=EasyBlog.template("site/layout/image/container"),f=".eb-image-popup",g=".eb-image-popup-button",h=".eb-image-popup-close-button",i=".eb-image-popup-container",j=".eb-image-popup-footer",k=".eb-image-popup-thumbs",l=".eb-image-popup-thumb",m=".eb-image",n=".eb-image-viewport",o=".eb-image-caption > span",p=".eb-thumbs",q="keyup.eb.imagepopup",r="click.eb.imagepopup",s="resize.eb.imagepopup",t="keydown.eb.imagepopup",u=EasyBlog.ImagePopup={open:function(){u.close(),a("body").noscroll(!0),a(window).off(q).on(q,function(a){27==a.which&&u.close()
}).off(r).on(r,function(b){var c=a(b.target).parentsUntil(f).andSelf().filter(m);c.length||u.close()}).off(s).on(s,function(){u.refresh()}).off(t).on(t,function(b){if(a(l).length){var c=b.which;if(/37|38|39|40/.test(c)){var e,d=a(l+".active");/37|38/.test(c)&&(e=d.prev(l)),/39|40/.test(c)&&(e=d.next(l)),e.length&&u.openPopupThumb(e),b.preventDefault()}}});var b=a(c);b.appendTo("body")},close:function(){a(window).off(q).off(r).off(s).off(t),a(f).data("destoyed",!0).remove(),a("body").noscroll(!1)},openThumbnails:function(b,c){u.open();
var i,e=a(j),f=a(k),h=0;e.show(),b.find(m).each(function(){var b=a(this),e=b.find("img"),j=b.find(g),k=e.attr("src"),l=j.attr("href"),m=a(d).attr("data-url",l).find("img").attr("src",k).end().appendTo(f);h+=m.outerWidth(!0),b[0]==c[0]&&(i=m)}),f.css("width",h),u.openPopupThumb(i)},openImage:function(a){u.open();var b=a.find(o),c=a.find(g),d=c.attr("href"),e=b.text();e||(e=c.attr("title")),u.showImage(d,e)},openPopupThumb:function(b){var c=b.attr("data-url");a(l).removeClass("active"),b.addClass("active"),u.showImage(c,""),u._reposition()
},showImage:function(b,c){var d=a(f),g=d.find(i);d.addClass("is-loading"),d.find(m).remove();var h=a(e),j=h.find(n),k=h.find(o);k.text(c).css("display",c?"block":"none"),h.addClass("style-popup").appendTo(g);var l=a("<img>");l.on("load",function(){d.data("destroyed")||(d.removeClass("is-loading").addClass("is-preparing"),u.resize(),d.removeClassAfter("is-preparing"))}).on("error",function(){d.removeClass("is-loading").addClass("is-failed")}).appendTo(j).attr("src",b)},refresh:function(){u.resize(),u.reposition()
},resize:function(){var b=a(f),c=a(j),d=b.find(m),e=d.find("img"),g=c.height(),h=e.width(),i=e.height(),k=b.width(),l=b.height(),n=.75*k,o=.75*l-g,p=n/h;targetWidth=h*p,targetHeight=i*p;var q=targetHeight>o;q&&(p=o/i,targetWidth=h*p,targetHeight=i*p),e.css({width:targetWidth,height:targetHeight});var r=d.width(),s=d.height()-g;d.css({top:(l-s)/2-g,left:(k-r)/2})},reposition:function(){var b=a(j),c=a(k),d=a(l+".active"),e=b.width()/2,f=d.position().left+d.width()/2,g=e-f;c.css("left",g)},_reposition:a.debounce(function(){u.reposition()
},350)};a(document).on("click",n,function(){var c=a(this),d=c.attr("href");"javascript:void(0)"===d&&c.siblings(g).click()}).on("click",g,function(b){if(!(b.shiftKey||b.ctrlKey||b.metaKey)){var c=a(this),d=c.closest(m),e=d.closest(p);e.length?u.openThumbnails(e,d):u.openImage(d),b.stopPropagation(),b.preventDefault()}}).on("click",n,function(b){var c=a(this);if(!c.attr("href")){var d=c.closest(m),e=d.find(g);e.length&&(e.click(),b.stopPropagation(),b.preventDefault())}}).on("click",l,function(b){var c=a(this);
u.openPopupThumb(c),b.stopPropagation(),b.preventDefault()}).on("click",h,function(){u.close()}),b.resolve()}),EasyBlog.module("layout/image/gallery",function(a){var b=this,c=".eb-gallery",d=".eb-gallery-viewport",e=".eb-gallery-item",g=".eb-gallery-next-button",i=".eb-gallery-button",k=".eb-gallery-menu-item",l=EasyBlog.ImageGallery={setLayout:function(b){var c=b.find(e);c.each(function(b){var c=a(this),d=100*b;c.css("left",d+"%")});var d=b.data("autoplay");d&&this.autoplay.start(b)},autoplay:{start:function(a){var b=1e3*a.data("interval");
l.autoplay.stop(a);var c=setTimeout(function(){l.next(a),l.autoplay.start(a)},b);a.data("timer",c)},stop:function(a){var b=a.data("timer");clearTimeout(b)}},checkAutoplay:function(a){var b=1e3*a.data("interval");this.stopMonitoringAutoplay(a),setTimeout(function(){l.next(a),l.startMonitoringAutoplay(a)},b)},go:function(a,b){var c=l.getMenuItems(a).length-1;0>b&&(b=c),b>c&&(b=0),l.setActiveIndex(a,b);var e=a.find(d),f=-100*b;e.css("left",f+"%")},next:function(a){var b=l.getActiveIndex(a),c=b+1;l.go(a,c)},prev:function(a){var b=l.getActiveIndex(a),c=b-1;
l.go(a,c)},setActiveIndex:function(a,b){var c=l.getMenuItems(a);c.removeClass("active").eq(b).addClass("active")},getActiveIndex:function(a){var b=l.getMenuItems(a),c=b.filter(".active").index();return 0>c&&(c=0),c},getMenuItems:function(a){return a.find(k)}};a(document).on("click.eb.gallery.button",i,function(){var d=a(this),e=d.closest(c);if(!(e.length<1)){var f=d.is(g)?"next":"prev";l[f](e)}}).on("click.eb.gallery.menuItem",k,function(){var d=a(this),e=d.closest(c);if(!(e.length<1)){var f=e.find(k).index(d);
l.go(e,f)}}).ready(function(){a(c).each(function(){var b=a(this);l.setLayout(b)})}),b.resolve()}),EasyBlog.module("layout/image/legacy",function(a){function c(a){var b=a.parent(),c=b.css("float");if("none"==c&&(c=a.css("float")),"none"==c){var d=a[0].style;"auto"==d.marginLeft&&"auto"==d.marginRight&&(c="center")}return"none"==c&&(c=b.attr("align"),(void 0===c||"none"==c)&&(c=a.attr("align"))),/none|middle/.test(c)&&(c="center"),c}var b=this,d=".easyblog-thumb-preview img, img.easyblog-image-caption, img[data-popup], img[data-style]";
a(document).ready(function(){a(d).each(function(){var b=a(this),d=b.parent(),e=b.attr("src"),f=a('<div class="eb-image">'),g=a('<div class="eb-image-figure">');g.appendTo(f);var h=a('<a class="eb-image-viewport"><img /></a>');h.appendTo(g);{var i=d.is(".easyblog-thumb-preview"),j=!!b.attr("data-popup"),k=i||j;d.is("a:not(.easyblog-thumb-preview)")}if(k){var m=i?d.attr("href"):b.attr("data-popup");h.addClass("eb-image-popup-button").attr({href:m,title:d.attr("title")})}else h.attr({href:d.attr("href"),title:d.attr("title"),target:d.attr("target")});
var n=f.find("img");n.attr({src:e,width:b.attr("width"),height:b.attr("height"),alt:b.attr("alt")});var o=b.is(".easyblog-image-caption");if(o){var p=a('<div class="eb-image-caption"><span></span></div>'),q=b.attr("title");p.appendTo(f).find("span").append(q);var r=b.attr("width");r?p.css("width",r):(p.hide(),n.on("load",function(){p.css("width",n.width()).show()}))}var s=b.attr("data-style")||(o?"gray":"");s&&f.addClass("style-"+s);var t=c(b),u=a('<div class="ebd-block" data-type="image">');/left|right/.test(t)&&u.addClass("is-nested nest-"+t).css("width","auto"),/center/.test(t)&&u.css("text-align","center"),u.append(f),k&&!j?d.replaceWith(u):b.replaceWith(u)
})}),b.resolve()}),EasyBlog.module("subscribe",function(a){var b=this;a(document).on("click.eb.subscribe","[data-blog-subscribe]",function(){var b=a(this).data("type"),c=a(this).data("id");EasyBlog.dialog({content:EasyBlog.ajax("site/views/subscription/form",{type:b,id:c})})}),a(document).on("click.eb.unsubscribe","[data-blog-unsubscribe]",function(){var b=a(this).data("subscription-id"),c=a(this).data("return");console.log(b,c),EasyBlog.dialog({content:EasyBlog.ajax("site/views/subscription/confirmUnsubscribe",{id:b,"return":c}),bindings:{"{submitButton} click":function(){this.form().submit()
}}})}),b.resolve()}),EasyBlog.module("composer/document/artboard",function(){var b=this;EasyBlog.Controller("Composer.Document.Artboard",{defaultOptions:{"{container}":".eb-composer-artboard","{viewport}":".eb-composer-artboard-viewport","{art}":"[data-eb-composer-art]","{metaButton}":"[data-eb-composer-meta-button]"}},function(a){return{init:function(){},current:function(){return a.art(".active").data("id")},show:function(b){var b=b||a.current();a.container().switchClass("show-"+b).switchClass("state-expand").addClassAfter("active",1),a.art().removeClass("active").where("id",b).addClass("active"),a.metaButton().removeClass("active").where("id",b).addClass("active"),a.trigger("composerArtboardShow",[b])
},hide:function(b){var b=b||a.current();a.container().toggleClass("active",!!a.art(".has-image").length).switchClass("state-collapse"),a.art().removeClass("active"),a.metaButton().removeClass("active"),a.trigger("composerArtboardHide",[b])},"{metaButton} click":function(b){var c=b.data("id");a[a.current()===c?"hide":"show"](c)}}}),b.resolve()}),EasyBlog.module("composer/blocks/dimensions",function(a){var b=this,c=function(a){return a.toString().match("%")?"%":"px"};EasyBlog.require().library("nouislider").done(function(){EasyBlog.Controller("Composer.Blocks.Dimensions",{elements:["[data-eb-block-dimensions-{field}]","[data-eb-block-dimensions-field-container] [data-eb-{numslider-toggle|numslider-widget|numslider-value|numslider-input|numslider-units|numslider-unit|numslider-current-unit}]"],defaultOptions:a.extend({},EBD.selectors)},function(b,d,e,f,g,h){return{init:function(){g=b.blocks,f=g.composer,h=a()
},"{self} composerBlockActivate":function(a,c,d){h=d,b.populate(d)},isResizableNestedBlock:function(a){return g.isNestedBlock(a)?"content"==g.getBlockNestType(a):!1},allowDimensionsFieldset:function(a){return b.isResizableNestedBlock(a)&&b.getDimensionsSettings(a).enabled},getDimensionsSettings:function(a){return g.getBlockMeta(a).dimensions},getDimensionsFieldset:function(){return f.panels.fieldset.get("dimensions")},shouldRespectMinContentSize:function(a){return b.isResizableNestedBlock(a)&&b.getDimensionsSettings(a).respectMinContentSize
},isInherited:function(a){return!a||/auto|inherit/.test(a)},hasInheritedSize:function(a,c){var d=a[0].style[c];return b.isInherited(d)},hasInheritedWidth:function(a){return b.hasInheritedSize(a,"width")},hasInheritedHeight:function(a){return b.hasInheritedSize(a,"height")},getSize:function(a,c){var d=a[0].style[c];return b.isInherited(d)?a.css(c):d},getWidth:function(a){return b.getSize(a,"width")},getHeight:function(a){return b.getSize(a,"height")},getComputedWidth:function(a){return a.width()},getComputedHeight:function(a){return a.height()
},setWidth:function(a,b){a.css("width",b)},setHeight:function(a,b){a.css("height",b)},updateWidth:function(a,c){b.setWidth(a,c),b.populateWidth(a)},updateHeight:function(a,c){b.setHeight(a,c),b.populateHeight(a)},getFluidWidth:function(b){var c=a(g.getBlockNest(b)[0]||b.parent()[0]),d=Math.round(b.width()/c.width()*100)+"%";return d},toFluidWidth:function(a){if(!g.isRootBlock(a)){var c=b.getFluidWidth(a);b.updateWidth(a,c)}},toFluidHeight:function(a){b.updateHeight(a,"")},toFixedWidth:function(a){b.updateWidth(a,a.width())
},toFixedHeight:function(a){b.updateHeight(a,a.height())},toAutoWidth:function(a){b.updateWidth(a,"auto")},toAutoHeight:function(a){b.updateHeight(a,"")},setUnit:function(a,c,d){if("width"===c){var e=b.getUnit(a,c);"%"==e&&"px"==d&&b.toFixedWidth(a),"px"==e&&"%"==d&&b.toFluidWidth(a)}},getUnit:function(a,d){return c(b.getSize(a,d))},updateUnit:function(a,c,d){b.setUnit(a,c,d),"width"==c&&b.populateWidth(a),"height"==c&&b.populateHeight(a)},populate:function(a){var c=b.getDimensionsFieldset(),d=b.allowDimensionsFieldset(a);
c.toggle(d),d&&(b.populateWidth(a),b.populateHeight(a))},populateWidth:function(a){var c=b.getWidth(a),d=!b.hasInheritedWidth(a);b.populateField("width",c,d)},populateHeight:function(a){var c=b.getHeight(a),d=!b.hasInheritedHeight(a);b.populateField("height",c,d)},populateField:function(a,d,e){var f=b.field().where("name",a),g=parseFloat(d),h=c(d);if(b.numsliderToggle.inside(f).prop("checked",e),b.numsliderInput.inside(f).data("number",g).val(g),b.numsliderCurrentUnit.inside(f).html(h),b.numsliderUnit.inside(f).where("unit",'"'+h+'"').activateClass("active"),f.data("unit",h),b.resizingFromSlider!==a){if("px"==h)var i={start:g,step:1,range:{min:0,max:800},pips:{mode:"values",density:4,values:[0,200,400,600,800,1e3]}};
if("%"==h)var i={start:g,step:1,range:{min:0,max:100},pips:{mode:"positions",values:[0,20,40,60,80,100],density:5}};b.numsliderWidget.inside(f).find(".noUi-pips").remove().end().noUiSlider(i,!0).noUiSlider_pips(i.pips)}},handleNumsliderWidget:function(a,c){var d=b.workarea(),e=b.field.of(a),f=e.data("name"),g=e.data("unit"),i=Math.round(c)+g;b.resizingFromSlider=f,clearTimeout(b.resizingTimer),d.addClass("is-resizing"),"width"==f&&b.updateWidth(h,i),"height"==f&&b.updateHeight(h,i),b.resizingTimer=setTimeout(function(){d.removeClass("is-resizing")
},15),b.resizingFromSlider=null},"{numsliderWidget} nouislide":function(a,c,d){b.handleNumsliderWidget(a,d)},"{numsliderWidget} set":function(a,c,d){b.handleNumsliderWidget(a,d)},"{numsliderInput} input":function(c){function d(a){c.on("blur.numslider",function(){c.val(a)})}c.off("blur.numslider");var e=b.field.of(c),f=e.data("name"),g=a.trim(c.val()),i=b.numsliderUnit.inside(e),j=i.data("unit"),k=g+j;if(0==g||!a.isNumeric(g)){var l=c.data("number");return d(l)}"width"==f&&b.updateWidth(h,k),"height"==f&&b.updateHeight(h,k)
},"{numsliderUnit} click":function(a){var c=b.field.of(a),d=c.data("name"),e=a.data("unit");b.setUnit(h,d,e)},"{numsliderToggle} change":function(a){var c=b.field.of(a),d=c.data("name");a.is(":checked")||("width"==d&&b.toAutoWidth(h),"height"==d&&b.toAutoHeight(h))},"{self} composerBlockResize":function(a,c,d){b.populate(d)},"{self} composerBlockNestOut":function(a,b,c){c.css({width:"",height:""})}}}),b.resolve()})}),EasyBlog.module("composer/blocks/droppable",function(a){var b=this;EasyBlog.require().library("ui/draggable","ui/droppable").done(function(){EasyBlog.Controller("Composer.Blocks.Droppable",{defaultOptions:a.extend({"{dropzones}":"[data-ebd-dropzone]","{dropzonePlaceholder}":"[data-ebd-dropzone-placeholder]","{mediaFile}":"[data-eb-mm-file]"},EBD.selectors)},function(b,c,d,e,f,g){return{init:function(){f=b.blocks,e=f.composer,g=a(),b.dropzonePlaceholder=b.dropzonePlaceholder().detach().removeClass("hide")[0]
},"{self} composerReady":function(){b.draggableOptions={connectWith:EBD.dropzone,helper:"clone",appendTo:e.document.ghosts(),placeholder:"ebd-block is-placeholder",refreshPositions:!0,handle:EBD.immediateBlockSortHandle},b.droppableOptions={accept:[EBD.block,".eb-mm-file"].join(","),tolerance:"pointer"},b.enable()},enable:function(){f.getAllBlocks().draggable(b.draggableOptions)},disable:function(){b.block(".ui-draggable").draggable("destroy")},selectedBlock:null,"{self} composerBlockMove":function(a,c,d){b.selectedBlock=d
},"{self} composerBlockMenuSelected":function(a,c,d){b.selectedBlock=d},"{self} composerBlockInit":function(a,c,d){d.draggable(b.draggableOptions)},populateDropzones:function(){b.nest().each(function(){var c=a(this),d=c.data("type");if("block"==d&&(c.prepend(b.createNestedDropzone()),c.find(EBD.childBlock).each(function(){var c=a(this);c.after(b.createNestedDropzone())})),"content"==d){var e=f.nestable.availablePositions(c);a.each(e,function(a,d){c.prepend(b.createNestedDropzone(d))})}});var c=f.getRootBlocks();
c.each(function(c){var d=a(this);0==c&&d.before(b.createDropzone()),d.hasClass("is-sort-item")||d.after(b.createDropzone())}),c.length<1&&b.root().append(b.createDropzone()),b.dropzone().droppable(b.droppableOptions)},createDropzone:function(){return a(b.dropzonePlaceholder).clone()},createNestedDropzone:function(a){var c=b.createDropzone().addClass("is-nested");return a&&c.addClass("nest-"+a).data("position",a),c},destroyDropzones:function(){b.dropzone().remove()},"{block} dragstart":function(a,c,d){c.stopPropagation(),d.helper.addClass("is-helper").css({width:a.width(),height:a.height()}),f.deactivateBlock(),f.drag(a),a.addClass("hide"),g=a,b.populateDropzones(),e.manager().addClass("is-resizing")
},"{blocks.menu} dragstart":function(a){b.populateDropzones(),g=a,e.manager().addClass("is-resizing")},"{mediaFile} dragstart":function(){b.populateDropzones(),g=a(),e.manager().addClass("is-resizing")},"{dropzone} click":function(a){if(!e.manager().hasClass("is-dragging-block")){b.isDropping=!0;var d=b.selectedBlock;d.removeClass("hide").removeClass("is-sort-item"),b.dropBlock(a,d),setTimeout(function(){b.isDropping=!1,b.dropStop(),b.selectedMenu=null,b.selectedBlock=null,e.manager().removeClass("is-dropping-block"),e.manager().removeClass("is-moving-block")
},0)}},"{dropzone} mouseenter":function(a){a.addClass("is-receiving")},"{dropzone} mouseleave":function(a){a.removeClass("is-receiving")},"{dropzone} dropover":function(a,c,d){f.over(a),b.lastDropzone=a;var e=a.data("position");d.helper.addClass("is-sending"),e&&b.nest.of(a).data("snappedPosition",e)},"{dropzone} dropout":function(a,c,d){b.lastDropzone=null,f.out(a),d.helper.removeClass("is-sending")},isDropping:!1,lastDropzone:null,dropBlock:function(a,c){var d=c,g=c.is(f.menu);g&&(d=f.createBlockFromMenu(c));
var h=c.is(b.mediaFile);h&&(d=f.createBlockFromMediaFile(c));var i=e.manager().hasClass("is-moving-block"),j=e.manager().hasClass("is-dropping-block");if(i||j){var k=f.getBlockNest(a),l=a.data("position");k.data("snappedPosition",l)}a.replaceWith(d),(g||h||i||j)&&(f.drop(d),f.release(d),f.out(d))},dropStop:function(){setTimeout(function(){b.destroyDropzones()},1),e.manager().removeClass("is-resizing")},"{dropzone} drop":function(a,c,d){if(!b.isDropping){b.isDropping=!0;var e=d.draggable;b.dropBlock(a,e),setTimeout(function(){b.isDropping=!1
},0)}},"{block} dragstop":function(a){a.removeClass("hide"),f.drop(a),f.release(a),f.out(a),b.dropStop()},"{blocks.menu} dragstop":function(a,c,d){if(b.isDropping||!b.lastDropzone)return b.dropStop(),void 0;var e=d.helper;b.dropBlock(b.lastDropzone,e),b.dropStop()},"{mediaFile} dragstop":function(a,c,d){if(b.isDropping||!b.lastDropzone)return b.dropStop(),void 0;var e=d.helper;b.dropBlock(b.lastDropzone,e),b.dropStop()},"{self} composerDocumentScroll":function(b,c){var d=g.data("ui-draggable");a.ui.ddmanager.prepareOffsets(d,c)
},"{dropzone} dropdeactivate":function(a){f.out(a)}}}),b.resolve()})}),EasyBlog.module("composer/blocks/font",function(a){var b=this;EasyBlog.require().library("colorpicker","nouislider").done(function(){EasyBlog.Controller("Composer.Blocks.Font",{elements:[".eb-composer-fieldset[data-name=font] [data-eb-{font-color-menu|font-family-menu|font-size-menu|font-color-content|font-color-picker|font-family-content|font-size-content|font-color-caption|font-family-caption|font-size-caption|font-family-option|font-format-option}]",".eb-composer-fieldset[data-name=font] [data-eb-{numslider-toggle|numslider-widget|numslider-value|numslider-input|numslider-units|numslider-unit|numslider-current-unit}]",".eb-composer-fieldset[data-name=font] [data-eb-{colorpicker|colorpicker-toggle}]"],defaultOptions:a.extend({fontSizeUnits:{px:{start:12,step:2,range:{min:8,max:72},pips:{mode:"values",density:4,values:[8,12,18,24,48,72]}},"%":{start:100,step:10,range:{min:0,max:200},pips:{mode:"positions",values:[0,50,100],density:10}}}},EBD.selectors)},function(b,c,d,e,f,g){return{init:function(){f=b.blocks,e=f.composer,g=a(),b.initFontFormatting(),b.initFontColor()
},"{self} composerBlockActivate":function(a,c,d){g=d,b.populate(d)},populate:function(a){var c=f.getBlockMeta(a),d=c.properties.fonts;e.panels.fieldset.get("font").toggle(d),d&&(b.populateFontColor(a),b.populateFontFamily(a),b.populateFontSize(a),b.populateFontFormatting(a))},initFontColor:function(){b.fontColorPicker().colorpicker()},populateFontColor:function(a){var c=a.css("color");b.updateFontColorUI(c)},setFontColor:function(a,c){a.css("color",c),b.updateFontColorUI(c)},updateFontColorUI:function(a){b.updatingFontColorUI=!0,a||(a=g.css("color")||"#000"),b.fontColorCaption().css("backgroundColor",a),b.fontColorPicker().colorpicker("setColor",a),b.updatingFontColorUI=!1
},removeFontColor:function(a){b.setFontColor(a,"")},populateFontFamily:function(a){var c=a[0].style.fontFamily;b.updateFontFamilyUI(c)},setFontFamily:function(c,e){b.unpreviewFontFamily(c);var f=a.Event("composertBlockFontFamilyChange");f.fontFamily=e,d.trigger(f,e),b.updateFontFamilyUI(f.fontFamily),f.isDefaultPrevented()||c.css("fontFamily",f.fontFamily)},updateFontFamilyUI:function(a){var c=b.fontFamilyOption().removeClass("active").where("value",'"'+a+'"').addClass("active"),d=c.length>0?c.html():a.split(",")[0];
b.fontFamilyCaption().html(d)},previewFontFamily:function(b,c){var e=b.data("originalFontFamily")||g[0].style.fontFamily,f=a.Event("composerBlockFontFamilyPreview");f.originalFontFamily=e,f.fontFamily=c,d.trigger(f,c,e),b.data("originalFontFamily",f.originalFontFamily),f.isDefaultPrevented()||b.css("fontFamily",f.fontFamily)},unpreviewFontFamily:function(b){var c=b.data("originalFontFamily"),e=a.Event("composerBlockFontFamilyUnpreview");return e.originalFontFamily=c,d.trigger(e,c),b.removeData("originalFontFamily"),e.isDefaultPrevented()?void 0:(b.css("fontFamily",e.originalFontFamily),void 0)
},populateFontSize:function(a){var c=a.css("fontSize");b.updateFontSizeUI(c)},setFontSize:function(c,d){if(a.isNumeric(d)){var e=b.getFontSizeUnit();d+=e}c.css("fontSize",d),b.updateFontSizeUI(d||c.css("fontSize")),d?(b.setLineHeight(c,"120%"),b.numsliderToggle().prop("checked",!0)):(b.removeLineHeight(c),b.numsliderToggle().prop("checked",!1))},updateFontSizeUI:function(a){b.updatingFontSizeUI=!0;var c=Math.abs(a.replace(/\%|px/gi,""));unit=a.match("%")?"%":"px",b.getFontSizeUnit()!==unit&&b.setFontSizeUnit(unit),b.fontSizeCaption().html(a),b.numsliderCurrentUnit().html(unit),b.numsliderUnit().removeClass("active").where("unit",'"'+unit+'"').addClass("active"),b.numsliderWidget().val(c),b.numsliderInput().val(c),b.updatingFontSizeUI=!1
},removeFontSize:function(a){b.setFontSize(a,"")},getFontSizeUnit:function(){return b.fontSizeContent().data("unit")||"%"},setFontSizeUnit:function(a){b.fontSizeContent().data("unit",a);var d=c.fontSizeUnits[a];b.numsliderWidget().find(".noUi-pips").remove().end().noUiSlider(d,!0).noUiSlider_pips(d.pips)},setLineHeight:function(a,b){a.css("lineHeight",b)},removeLineHeight:function(a){b.setLineHeight(a,"")},fontFormatting:{bold:{key:"fontWeight",val:"bold"},italic:{key:"fontStyle",val:"italic"},underline:{key:"textDecoration",val:"underline"},strikethrough:{key:"textDecoration",val:"line-through"},alignleft:{key:"textAlign",val:"left"},alignright:{key:"textAlign",val:"right"},aligncenter:{key:"textAlign",val:"center"},justify:{key:"textAlign",val:"justify"}},initFontFormatting:function(){b.fontFormatOption().on("touchstart click mousedown mouseup",function(a){a.preventDefault()
}).on("touchstart click",function(){var d=a(this),e=d.data("format");b.setFontFormatting(g,e,d.hasClass("active"))})},populateFontFormatting:function(c){var d=c[0],f=d.style,g=b.fontFormatOption().each(function(){var c=a(this),d=c.data("format");if(/orderedlist|unorderedlist|indent|outdent/.test(d))return c.removeClass("active"),void 0;var e=b.fontFormatting[d],g=f[e.key]==e.val;c.toggleClass("active",g)}),h="text"==c.data("type");if(h){var i=e.editor.selection.getCurrent(),j=a(i).parentsUntil(c).filter("ul, ol").eq(0);
a.each({orderedlist:"ol",unorderedlist:"ul"},function(a,b){var c=j.is(b);g.where("format",a).toggleClass("active",c)})}e.panels.fieldset.get("font").find(".eb-font-formatting.section-list").toggle(h)},setFontFormatting:function(a,c,d){var f=e.editor;switch(c){case"orderedlist":case"unorderedlist":f.list.toggle(c);break;case"indent":f.indent.increase();break;case"outdent":f.indent.decrease();break;default:var g=b.fontFormatting[c];a.css(g.key,d?"":g.val)}b.populateFontFormatting(a)},removeFontFormatting:function(a,c){b.setFontFormatting(a,c,!0)
},"{colorpicker} colorpickerChange":function(a,c,d){b.updatingFontColorUI||(b.colorpickerToggle().prop("checked",!0),b.setFontColor(g,d))},"{colorpickerToggle} change":function(a){a.checked()||b.removeFontColor(g)},"{fontFamilyOption} mouseover":function(a){var c=a.data("value");b.previewFontFamily(g,c)},"{fontFamilyOption} mouseout":function(){b.unpreviewFontFamily(g)},"{fontFamilyOption} click":function(a){var c=a.data("value");b.setFontFamily(g,c)},"{numsliderWidget} nouislide":function(a,c,d){b.numsliderInput().val(Math.abs(d))
},"{numsliderWidget} set":function(a,c,d){b.updatingFontSizeUI||b.setFontSize(g,Math.abs(d))},"{numsliderInput} input":function(c){if(!b.updatingFontSizeUI){var d=Math.abs(a.trim(c.val()));b.numsliderToggle().checked(!0),b.setFontSize(g,d)}},"{numsliderUnit} click":function(a){var c=a.data("unit");b.setFontSizeUnit(c)},"{numsliderToggle} change":function(a){a.checked()||b.removeFontSize(g)}}}),b.resolve()})}),EasyBlog.module("composer/blocks/guide",function(a){var b=this;EasyBlog.Controller("Composer.Blocks.Guide",{defaultOptions:a.extend({},EBD.selectors)},function(a,b,c,d,e){return{init:function(){e=a.blocks,d=a.blocks.composer
},"{self} composerBlockHoverIn":function(a,b,c){c.addClass("hover")},"{self} composerBlockHoverOut":function(a,b,c){c.removeClass("hover")},"{self} composerBlockDrop":function(){},"{self} composerBlockActivate":function(b,c,d){d.addClass("active");var g=d.is(EBD.nestedBlock);g&&(a.nest.of(d).addClass("active"),e.getAllParentBlocks(d).addClass("has-active-child")),a.workarea().toggleClass("has-active-nest",g),d.addClass("is-glowing"),setTimeout(function(){d.removeTransitionClass("is-glowing",2e3)},10)},"{self} composerBlockDeactivate":function(){a.block().removeClass("active has-active-child"),a.nest().removeClass("active")
}}}),b.resolve()}),EasyBlog.module("composer/blocks/handlers/audio",function(){var b=this;EasyBlog.require().library("plupload2","audiojs").done(function(a){EasyBlog.Controller("Composer.Blocks.Handlers.Audio",{elements:["[data-eb-{file-error}]"],defaultOptions:{"{browseButton}":".eb-composer-placeholder-audio [data-eb-mm-browse-button]","{audio}":"audio","{placeholder}":"[data-eb-composer-audio-placeholder]","{infoBox}":"[data-audio-infobox]","{artist}":"[data-audio-artist]","{track}":"[data-audio-track]","{trackSeparator}":"[data-audio-track-separator]","{download}":"[data-audio-download]","{displayArtist}":"[data-audio-fieldset-artist]","{displayTrack}":"[data-audio-fieldset-track]","{displayDownload}":"[data-audio-fieldset-download]","{autoplay}":"[data-audio-fieldset-autoplay]","{loop}":"[data-audio-fieldset-loop]"}},function(b,c,d,e,f,g,h,i){return{init:function(){f=b.blocks,e=f.composer,g=c.meta,h=a(),i=EasyBlog.MediaManager
},toText:function(){},toData:function(a){var c=f.data(a),d=f.getBlockContent(a);return c.download=b.download.inside(d).attr("href"),c.artist=b.artist.inside(d).text(),c.track=b.track.inside(d).text(),c},toHTML:function(a){var a=a.clone()},toLegacyShortcode:function(a){var c={uri:a.uri},d="[embed=audio]"+JSON.stringify(c)+"[/embed]";return d},activate:function(a){h=a,b.populate(a)},deactivate:function(){},construct:function(b){var c=f.createBlockContainer("audio"),d=f.data(c);return a.extend(d,b),c},constructFromMediaFile:function(a){{var c=a.data("key"),d=i.getUri(c),e=f.createBlockContainer("audio");
f.getBlockContent(e),f.data(e)}return e.addClass("is-loading"),i.getMedia(d).done(function(a){var c=a.meta;b.createPlayer(e,c.url,c.title)}).fail(function(){}).always(function(){e.removeClass("is-loading")}),e},reconstruct:function(a){var c=b.placeholder.inside(a),d=f.data(a);d.url&&b.createPlayer(a,d.url,d.track),c.length>0&&EasyBlog.MediaManager.uploader.register(c)},deconstruct:function(){},refocus:function(){},reset:function(a){f.getBlockContent(a)},populate:function(a){f.data(a);b.updateFieldset(a)},updateFieldset:function(a){var c=f.data(a);
b.autoplay().val(c.autoplay?"1":"0").trigger("change"),b.loop().val(c.loop?"1":"0").trigger("change"),b.displayArtist().val(c.showArtist?"1":"0").trigger("change"),b.displayDownload().val(c.showDownload?"1":"0").trigger("change"),b.displayTrack().val(c.showTrack?"1":"0").trigger("change")},getPlayerTemplate:function(){return a(g.player)},createPlayer:function(c,d,e){var g=f.getBlockContent(c),h=b.getPlayerTemplate(),i=f.data(c),j=i.uid||(i.uid=a.uid("audio-")),d=i.url||d,k=e||"",l=i.artist;i.url=d,i.track=k,i.artist=l,i.uid=j,b.audio.inside(h).attr("id",j).attr("src",d),b.artist.inside(h).html(i.artist).editable(!0),b.track.inside(h).html(i.track).editable(!0),b.download.inside(h).attr("href",d).attr("target","blank").on("click",function(a){a.preventDefault()
}),g.html(h),a.audiojs.events.ready(function(){a.audiojs.create(g.find("audio"))}),i.showDownload||b.download.inside(g).addClass("hide"),i.showArtist||b.artist.inside(g).addClass("hide"),i.showTrack||b.track.inside(g).addClass("hide"),b.updateInfoBox(c)},updateInfoBox:function(a){var c=f.data(a),d=f.getBlockContent(a),e=b.infoBox.inside(d);return c.showDownload||c.showTrack||c.showArtist?(e.removeClass("disabled"),void 0):(e.addClass("disabled"),void 0)},"{displayDownload} change":function(a){var e=(f.getBlockContent(h),1==a.val()?!0:!1),g=f.data(h);
return g.showDownload=e,b.updateInfoBox(h),e?(b.download.inside(h).removeClass("hide"),void 0):(b.download.inside(h).addClass("hide"),void 0)},"{displayArtist} change":function(a){var d=f.getBlockContent(h),e=1==a.val()?!0:!1,g=b.artist.inside(d),i=f.data(h);return i.showArtist=e,b.updateInfoBox(h),e?(g.removeClass("hide"),void 0):(g.addClass("hide"),void 0)},"{displayTrack} change":function(a){var d=f.getBlockContent(h),e=1==a.val()?!0:!1,g=b.track.inside(d),i=b.trackSeparator.inside(d),j=f.data(h);return j.showTrack=e,b.updateInfoBox(h),e?(i.removeClass("hide"),g.removeClass("hide"),void 0):(i.addClass("hide"),g.addClass("hide"),void 0)
},"{autoplay} change":function(a){var c=f.data(h),d=1==a.val()?!0:!1;c.autoplay=d},"{loop} change":function(a){var c=f.data(h),d=1==a.val()?!0:!1;c.loop=d},"{placeholder} mediaUploaderFilesAdded":function(a,b,c,d){EasyBlog.MediaManager.uploader.addItem(d[0],a)},"{placeholder} mediaUploaderFileUploaded":function(a,c,d,e,g){var h=g.response,i=h.media,j=i.meta,k=f.block.of(a);setTimeout(function(){b.createPlayer(k,j.url,e.name),k.hasClass("active")&&b.populate(k)},600)},"{browseButton} mediaSelect":function(a,c,d){var g=f.block.of(a);
if("audio"==d.meta.type){var h=d.meta,i=e.document,j=i.isLegacy();j?(content=b.toLegacyHTML(g),i.insertContent(content)):b.createPlayer(g,h.url,h.title)}},"{placeholder} mediaUploaderFileError":function(c,d,e,f){f.code==a.plupload2.FILE_EXTENSION_ERROR&&b.fileError.inside(h).removeClass("hide")},"{self} mediaInsert":function(a,c,d,g){if("audio"==d.meta.type){var h=e.document,i=h.isLegacy();if(i)content=b.toLegacyShortcode(d,g),h.insertContent(content);else{var g=f.constructBlock("audio",{url:d.meta.url,track:d.meta.title});
f.addBlock(g),f.activateBlock(g)}}}}}),b.resolve()})}),EasyBlog.module("composer/blocks/handlers/behance",function(a){var b=this;EasyBlog.Controller("Composer.Blocks.Handlers.Behance",{defaultOptions:a.extend({"{form}":"> [data-behance-form]","{insert}":"[data-behance-insert]","{source}":"[data-behance-source]","{loader}":"> [data-behance-loader]","{preview}":"> [data-behance-preview]","{errorMessage}":"[data-behance-error]","{fsSource}":"[data-fs-behance-source]","{fsUpdate}":"[data-fs-behance-update]"},EBD.selectors)},function(b,c,d,e,f,g,h){return{init:function(){f=b.blocks,e=f.composer,g=c.meta,h=a()
},toData:function(a){var b=f.data(a);return b},toText:function(a){var b=f.data(a);return b.url},toEditableHTML:function(){return""},toHTML:function(a){var b=f.data(a);return b.embed},activate:function(a){h=a,b.populate(a)},deactivate:function(){},construct:function(){},reconstruct:function(c){var d=f.data(c),e=c.data("overlay"),h=f.getBlockContent(c);d.embed&&!e&&b.setOverlay(c,d.embed),d.embed||h.html(a(g.html)),c.find(b.source.selector).off("paste").on("paste",function(a){a.stopPropagation()})},deconstruct:function(a){var c=f.getBlockContent(a);
return b.form.inside(c).remove(),b.loader.inside(c).remove(),a},refocus:function(){},reset:function(){},populate:function(a){var c=f.data(a);c.url&&b.fsSource().val(c.url)},loading:function(){var a=f.getBlockContent(h);return b.isLoading?(b.loader.inside(a).addClass("hidden"),b.form.inside(a).removeClass("hidden"),b.isLoading=!1,void 0):(b.loader.inside(a).removeClass("hidden"),b.form.inside(a).addClass("hidden"),b.isLoading=!0,void 0)},setOverlay:function(a,b){var c=f.getBlockContent(a),d=a.data("overlay");
d?(d.element().empty(),d.element().append(b)):(d=e.document.overlay.create(a),d.placeholder().css("height","450px").appendTo(c),d.element().append(b),d.attach()),a.data("overlay",d)},isUrlValid:function(a){if(""==a)return!1;var b=/^https:\/\/www\.behance\.net\/gallery\/(.*)\/(.*)$/,c=b.test(a);return c},getOembedUrl:function(a){return"http://www.behance.net/services/oembed?url="+a},crawl:function(a,c){var d=f.getBlockContent(a),e=f.data(a),g=b.getOembedUrl(c);if(!b.isUrlValid(c))return b.errorMessage().removeClass("hide"),!1;
var h=a.data("overlay");return h&&h.element().empty(),b.loading(),EasyBlog.ajax("site/views/crawler/crawl",{url:g}).done(function(f){b.loading();var h=f[g];e.url=c,e.embed=h.oembed.html,b.setOverlay(a,e.embed),b.form.inside(d).addClass("hidden")}).fail(function(a){b.loading(),b.errorMessage().removeClass("hide").html(a)}),task},"{insert} click":function(a){if(h.length<1){var c=b.block.of(a);f.activateBlock(c)}var d=f.getBlockContent(h),e=b.source.inside(d).val();b.fsSource().val(e),b.crawl(h,e)},"{fsUpdate} click":function(){var c=(f.getBlockContent(h),b.fsSource().val());
b.crawl(h,c)}}}),b.resolve()}),EasyBlog.module("composer/blocks/handlers/buttons",function(a){var b=this;EasyBlog.require().library("rangeslider").done(function(){EasyBlog.Controller("Composer.Blocks.Handlers.Buttons",{defaultOptions:{"{button}":"> a.btn","{textWrapper}":"> span","{buttonSize}":"[data-eb-composer-block-button-size] [data-size]","{buttonHyperlink}":"[data-button-link]","{buttonNofollow}":"[data-button-nofollow]","{buttonTarget}":"[data-button-target]","{buttonSwatchItem}":"[data-eb-composer-button-swatch-item]"}},function(b,c,d,e,f,g,h){return{init:function(){f=b.blocks,e=f.composer,g=c.meta,h=a()
},selectionState:{},toData:function(a){var b=f.data(a);return b},toText:function(a){{var c=f.getBlockContent(a);b.button.inside(c)}return text=f.data(a).link},toHTML:function(a){var c=a.clone(),d=b.deconstruct(c),e=f.getBlockContent(d).html();return e},activate:function(a){h=a,b.populate(a)},deactivate:function(){},construct:function(){},reconstruct:function(a){var c=f.getBlockContent(a),d=b.button.inside(c);d.on("click",function(a){a.stopPropagation(),a.preventDefault()})},deconstruct:function(a){var c=f.getBlockContent(a),d=b.button.inside(c);
return b.textWrapper.inside(d).removeAttr("contenteditable").editable(!1),a},refocus:function(){},reset:function(){},populate:function(a){var c=f.data(a);b.buttonSwatchItem().removeClass("active").where("style",c.style).addClass("active");var d=b.buttonSize().filter('[data-size="'+c.size+'"]');d.siblings().removeClass("active"),d.addClass("active"),b.buttonHyperlink().val(c.link),b.buttonNofollow().val(c.nofollow).trigger("change"),b.buttonTarget().val(c.target)},"{buttonSwatchItem} click":function(a){var c=a.data("style"),d=f.getBlockContent(h);
b.buttonSwatchItem().removeClass("active").where("style",c).addClass("active"),b.button.inside(d).removeClass("btn-info btn-primary btn-success btn-warning btn-danger").addClass(c),f.data(h).style=c},"{buttonSwatchItem} mouseover":function(a){clearTimeout(b.previewTimer);var c=a.data("style"),d=f.getBlockContent(h);b.button.inside(d).removeClass("btn-info btn-primary btn-success btn-warning btn-danger").addClass(c)},"{buttonSwatchItem} mouseout":function(){clearTimeout(b.previewTimer);var c=f.getBlockContent(h);
b.previewTimer=setTimeout(function(){b.button.inside(c).removeClass("btn-info btn-primary btn-success btn-warning btn-danger").addClass(f.data(h).style)},50)},"{buttonSize} click":function(a){var c=a.data("size"),d=f.getBlockContent(h);a.addClass("active").siblings().removeClass("active"),b.button.inside(d).removeClass("btn-sm btn-xs btn-lg btn-xlg").addClass(c),f.data(h).size=c},"{buttonSize} mouseover":function(a){clearTimeout(b.previewTimer);var c=a.data("size"),d=f.getBlockContent(h);b.button.inside(d).removeClass("btn-sm btn-xs btn-lg btn-xlg").addClass(c)
},"{buttonSize} mouseout":function(){clearTimeout(b.previewTimer);var c=f.getBlockContent(h);b.previewTimer=setTimeout(function(){b.button.inside(c).removeClass("btn-sm btn-xs btn-lg btn-xlg").addClass(f.data(h).size)},50)},"{buttonHyperlink} keyup":a.debounce(function(a){var c=f.getBlockContent(h),d=f.data(h);d.link=a.val(),b.button.inside(c).attr("href",a.val())},250),"{buttonNofollow} change":function(a){var c=f.getBlockContent(h),d=f.data(h);d.nofollow=1==a.val()?1:0,b.button.inside(c).attr("rel",1==a.val()?"nofollow":"")
},"{buttonTarget} change":function(a){var c=f.getBlockContent(h),d=f.data(h);d.target=a.val(),b.button.inside(c).attr("target",a.val())}}}),b.resolve()})}),EasyBlog.module("composer/blocks/handlers/code",function(a){var b=this,c=a.uri(a.require.defaultOptions.path).toPath("./ace"+("compressed"==a.mode?".min.js":".js")).toString();window.FD50_PSEUDO={module:function(b,c){c.call(a.Deferred(),a)}},EasyBlog.Controller("Composer.Blocks.Handlers.Code",{defaultOptions:{"{pre}":"> pre","{readOnly}":"[data-code-readonly]","{showGutter}":"[data-code-gutter]","{fontsize}":"[data-code-fontsize]","{themeSelection}":"[data-code-theme]","{modeSelection}":"[data-code-mode]",theme:"github",mode:"html",css:{position:"fixed",width:"100%",height:"100%",top:0,bottom:0,left:0,right:0,margin:0,padding:0}}},function(b,d,e,f,g,h,i){return{init:function(){g=b.blocks,f=g.composer,h=d.meta,i=a()
},toText:function(){},toData:function(a){{var c=g.data(a);a.data("uid")}return instance=b.editor.instances[a.data("uid")],contents=instance.editor.getSession().getValue(),c.code=contents,c},toEditableHTML:function(a){var b=a.clone(),c=g.getBlockContent(b);return c.find("[data-ebd-overlay-placeholder]").remove(),c.html()},toHTML:function(a){{var c=g.data(a);a.data("uid")}instance=b.editor.instances[a.data("uid")],contents=instance.editor.getSession().getValue();var e=a.clone(),f=b.deconstruct(e),h=g.getBlockContent(f),i=b.pre.inside(h);
i.html(contents),i.attr("data-mode",c.mode);var j=i.html();return j},activate:function(a){i=a,b.populate(a)},deactivate:function(){},construct:function(b){var b=a.extend({},d.data,b)},reconstruct:function(a){{var c=g.getBlockContent(a);g.data(a)}if(!a.data("overlay")){var e=f.document.overlay.create(a);e.placeholder().prependTo(c),e.attach(),a.data("overlay",e)}b.editor.get(a)},deconstruct:function(a){return a},reset:function(){},refocus:function(){},populate:function(a){var c=g.data(a);b.modeSelection().val(c.mode),b.themeSelection().val(c.theme),b.showGutter().val(c.show_gutter?1:0),b.showGutter().trigger("change")
},getEditor:function(a){b.editor.get(i).done(a)},switchMode:function(a){var c=g.data(i);b.getEditor(function(b,d){d.setMode("ace/mode/"+a),c.mode=a})},switchTheme:function(a){var c=g.data(i);b.getEditor(function(b){b.setTheme(a),c.theme=a})},switchInvisible:function(a){var c=g.data(current);b.getEditor(function(b){b.setShowInvisibles(a),c.show_invisible=a})},toggleGutter:function(a){var c=g.data(i);b.getEditor(function(b){b.renderer.setShowGutter(a),c.show_gutter=a})},updateFontSize:function(a){var c=g.data(i);
b.getEditor(function(b){b.setFontSize(a),c.fontsize=a})},"{fontsize} change":function(c){var e=parseInt(a(c).val());b.updateFontSize(e)},"{readOnly} change":function(){},"{showGutter} change":function(c){var e=1==a(c).val()?!0:!1;b.toggleGutter(e)},"{modeSelection} change":function(c){var e=a(c).val();b.switchMode(e)},"{themeSelection} change":function(c){var e=a(c).val();b.switchTheme(e)},editor:{instances:{},get:function(a){var c=b.editor.instances[a.data("uid")];return c||b.editor.create(a)},create:function(e){var h=e.data("uid"),i=g.getBlockContent(e),j=b.pre.inside(i),k=b.editor.instances[h]=a.Deferred(),l=g.data(e),m=k.overlay=e.data("overlay");
m||(m=f.document.overlay.create(e),m.placeholder().prependTo(i),m.attach(),e.data("overlay",m));var n=a.create("iframe"),o=a.rootPath+"/media/index.html";return n.attr("src",o).one("load",function(){var e=n[0].contentWindow,f=e.document,g=f.head,i=f.body,m=j.clone().css(d.css).appendTo(i)[0];e.eval("window.FD50 = window.parent.FD50_PSEUDO;"),a.script({url:c,head:g}).done(function(){var b=e.ace,c=b.edit(m),f=l.theme||j.data("theme")||d.theme,g=l.mode||j.data("mode")||d.mode,h=l.fontsize||j.data("fontsize")||d.fontsize,i=l.show_gutter||j.data("gutter")||d.show_gutter;
c.setTheme(f),c.setFontSize(h),c.renderer.setShowGutter(i),l.code&&c.setValue(l.code),a(m).css("height","100%"),c.resize();var n=c.getSession();n.setMode("ace/mode/"+g),k.editor=c,k.resolve(c,n,j)}).fail(function(){k.reject(a.Exception("ACE Editor could not be loaded.")),delete b.instances[h]})}),m.element().append(n),k}}}}),b.resolve()}),EasyBlog.module("composer/blocks/handlers/codepen",function(a){var b=this;EasyBlog.Controller("Composer.Blocks.Handlers.Codepen",{defaultOptions:{"{form}":"> [data-codepen-form]","{insert}":"[data-codepen-insert]","{source}":"[data-codepen-source]","{loader}":"> [data-codepen-loader]","{preview}":"> [data-codepen-preview]","{fsSource}":"[data-fs-codepen-source]","{fsUpdate}":"[data-fs-codepen-update]","{errorMessage}":"[data-codepen-error]"}},function(b,c,d,e,f,g,h){return{init:function(){f=b.blocks,e=f.composer,g=c.meta,h=a()
},toText:function(a){var b=f.data(a);return b.url},toData:function(a){var b=f.data(a);return b},toEditableHTML:function(){return""},toHTML:function(a){var b=f.data(a);return b.embed},activate:function(a){h=a,b.populate(a)},deactivate:function(){},construct:function(){},reconstruct:function(c){var d=f.data(c),e=c.data("overlay"),h=f.getBlockContent(c);d.embed&&!e&&b.setOverlay(c,d.embed),d.embed||h.html(a(g.html))},deconstruct:function(a){var c=f.getBlockContent(a);return b.form.inside(c).remove(),b.loader.inside(c).remove(),a
},refocus:function(){},reset:function(){},populate:function(a){var c=f.data(a);b.fsSource().val(c.url)},loading:function(){var a=f.getBlockContent(h);b.isLoading?(b.loader.inside(a).addClass("hidden"),b.form.inside(a).removeClass("hidden"),b.isLoading=!1):(b.loader.inside(a).removeClass("hidden"),b.form.inside(a).addClass("hidden"),b.isLoading=!0)},setOverlay:function(a,b){var c=a.data("overlay");if(c)c.element().empty(),c.element().append(b);else{c=e.document.overlay.create(a);var d=f.getBlockContent(a);c.placeholder().css("height","300px").appendTo(d),c.element().append(b),c.attach()
}a.data("overlay",c)},getUrl:function(a){return"http://codepen.io/api/oembed?url="+a},isUrlValid:function(a){if(""==a)return!1;var b=/^http:\/\/codepen\.io\/(.*)\/pen\/(.*)$/,c=b.test(a);return c},crawl:function(a,c){var d=b.getUrl(c),e=f.data(a),g=f.getBlockContent(a);if(!b.isUrlValid(c))return b.errorMessage().removeClass("hide"),!1;var h=a.data("overlay");h&&h.element().empty(),b.loading(),EasyBlog.ajax("site/views/crawler/crawl",{url:d}).done(function(f){var g=f[d];e.url=c,e.embed=g.oembed.html,b.setOverlay(a,e.embed)
}).fail(function(a){b.errorMessage().removeClass("hide").html(a)}).always(function(){b.loading(),b.form.inside(g).addClass("hidden")})},"{insert} click":function(a){if(h.length<1){var c=b.block.of(a);f.activateBlock(c)}var e=(f.data(h),f.getBlockContent(h)),g=b.source.inside(e).val();b.fsSource().val(g),b.crawl(h,g)},"{fsUpdate} click":function(){{var a=b.fsSource().val();f.data(h)}b.crawl(h,a)}}}),b.resolve()}),EasyBlog.module("composer/blocks/handlers/columns",function(a){var b=this;EasyBlog.Controller("Composer.Blocks.Handlers.Columns",{defaultOptions:{"{columnsHeader}":".row","{columns}":".row > div","{wrapper}":"> div[data-col-wrapper]","{columnRange}":"[data-eb-composer-block-column-range]","{control}":"[data-columns-control]","{controlWidth}":"[data-select-width]","{dropdown}":".eb-composer-manage-tab-name > select ","{listboxItem}":"[data-listbox-item]"}},function(b,c,d,e,f,g,h){return{init:function(){f=b.blocks,e=f.composer,g=c.meta,h=a()
},matchWrapperHeight:function(c){var d=0;b.wrapper.inside(c).css("height","").each(function(){d=Math.max(d,a(this).height())}).css("height",d)},removeWrapperHeight:function(a){b.wrapper.inside(a).css("height","")},"{blocks.root} sortactivate":function(){f.getBlocksByType("columns").each(function(){var c=f.getBlockContent(a(this));b.matchWrapperHeight(c)})},"{blocks.root} sortdeactivate":function(){f.getBlocksByType("columns").each(function(){var c=f.getBlockContent(a(this));b.removeWrapperHeight(c)})},"{wrapper} sortchange":function(a){var e=a.closest(EBD.block);
b.matchWrapperHeight(e)},"{wrapper} sortout":function(a){var e=a.closest(EBD.block);b.matchWrapperHeight(e)},activate:function(a){h=a,b.populate(a)},deactivate:function(){},construct:function(b){var b=a.extend({},c.data,b);return content},reconstruct:function(){},deconstruct:function(b){var c=f.getBlockContent(b),d=c.find("> .row > .col > [data-col-wrapper]");return d.each(function(){var b=a(this),c=b.parent();b.children().appendTo(c),c.removeAttr("contenteditable"),b.remove()}),b},refocus:function(a){var c=f.getBlockContent(a),d=a.data("lastFocused")||b.columns.inside(c).filter(":first");
d.focus()},reset:function(){},populate:function(c){var d=f.data(c);b.control().listbox().listbox("populate",d.columns);var e=f.getBlockContent(c),g=b.columns.inside(e);g.each(function(c,e){var f=b.listboxItem().eq(c),g=b.controlWidth.inside(f);a(e).attr("data-size",d.columns[c].size),a(e).data("size",d.columns[c].size);var h=a(e).data("size");g.val(h)})},toHTML:function(a){var c=a.clone(),d=b.deconstruct(c),e=f.getBlockContent(d);return e.html()},toData:function(a){var b=f.data(a);return b},toText:function(a){var b=f.getBlockContent(a).clone();
return b.text()},column:{activate:function(a){var c=f.getBlockContent(h),d=b.columns.inside(c);d.eq(a).addClass("active-column")},deactivate:function(a){var c=f.getBlockContent(h),d=b.columns.inside(c);d.eq(a).removeClass("active-column")},create:function(c){var d=f.getBlockContent(h),g=(b.columns.inside(d),"col col-md-"+c),i=f.createBlockNest();i.attr("data-col-wrapper","").addClass("ui-sortable");var j=f.constructNestedBlock("text");i.append(j);var k=a("<div></div>");k.addClass(g).attr("data-size",c).append(i),b.columnsHeader.inside(d).append(k)
},remove:function(a){var c=f.getBlockContent(h);b.columns.inside(c).eq(a).remove();var d=b.columns.inside(c).length,e=Math.ceil(12/d),g=!1;if(5==d){var e=2;g=!0}var i="col col-md-"+e;b.columnsHeader.inside(c).find("div.col").removeClass().addClass(i),g&&(b.columns.inside(c).first().addClass("col-md-offset-1"),b.columns.inside(c).last().addClass("col-md-offset-0"))},change:function(a,c){var d=f.getBlockContent(h),e=b.columns.inside(d).length,g=f.data(h);if(c>4&&3==e&&b.columns.inside(d).last().addClass("col col-md-2"),4==c&&4==e&&b.columns.inside(d).last().addClass("col col-md-2"),!(c>4)||4!=e&&5!=e){if(6==e)return b.dropdown().val("2"),void 0;
b.columns.inside(d).first().removeClass("col-md-offset-1"),b.columns.inside(d).last().removeClass("col-md-offset-0");{var i="col col-md-"+c;b.columns.inside(d).eq(a)}g.columns[a].size=c,b.columns.inside(d).eq(a).attr("data-size",c).removeClass().addClass(i)}}},"{listboxItem} mouseover":function(a){var d=a.index();b.column.activate(d)},"{listboxItem} mouseout":function(a){var d=a.index();b.column.deactivate(d)},"{control} listboxBeforeAddItem":function(){},"{control} listboxAfterAddItem":function(){f.data(h).columns=b.control().listbox("toData"),b.column.create(1)
},"{control} listboxBeforeRemoveItem":function(a,c,d){var e=d.index();b.column.remove(e)},"{control} listboxAfterRemoveItem":function(){f.data(h).columns=b.control().listbox("toData")},"{controlWidth} change":function(a){var d=a.parents(b.listboxItem.selector),e=d.index(),f=a.val();b.column.change(e,f)}}}),b.resolve()}),EasyBlog.module("composer/blocks/handlers/compare",function(a){var b=this;EasyBlog.require().library("imgareaselect").done(function(){EasyBlog.Controller("Composer.Blocks.Handlers.Compare",{defaultOptions:{image:"[data-type=compare] img"}},function(b,c,d,e,f,g,i){return{init:function(){f=b.blocks,e=f.composer,g=c.meta,i=a()
},toData:function(a){return f.getData(a)},activate:function(c){i=c,b.populate(c),i.find("img").on("click.compare dragstart.compare",function(a){a.preventDefault(),a.stopPropagation()}).on("mousedown.compare",function(c){if(!b.drawing){c.stopPropagation(),c.preventDefault();var e=a(this),f=e.parents(".ebd-block:first");images=f.find("img"),console.log(f),b.drawing=!0,d.addClass("active");var g=parseInt(e.css("top")),i=parseInt(e.css("left")),j=e.width()-e.parent().width();h=e.height()-e.parent().height();var k=c.pageX,l=c.pageY;
a(document).on("mousemove.compare mouseup.compare",function(a){if(b.drawing){var c=-1*(k-a.pageX),d=-1*(l-a.pageY),e=0==j?0:i+(c||0),f=0==h?0:g+(d||0);images.css({top:g=f,left:i=e}),k=a.pageX,l=a.pageY}}).on("mouseup.compare",function(){a(document).off("mousemove.compare mouseup.compare"),f.removeClass("active"),b.drawing=!1})}})},construct:function(){},reconstruct:function(){},refocus:function(){},reset:function(){},populate:function(){},drawing:!1,"{image} mousedown":function(){}}}),b.resolve()})}),EasyBlog.module("composer/blocks/handlers/file",function(a){var b=this;
EasyBlog.Controller("Composer.Blocks.Handlers.File",{defaultOptions:{"{browseButton}":".eb-composer-placeholder-file [data-eb-mm-browse-button]","{fileError}":"[data-eb-file-error]","{placeholder}":"[data-eb-composer-file-placeholder]","{player}":"[data-file-preview]","{dropElement}":"[data-plupload-drop-element]","{showIcon}":"[data-file-fieldset-icon]","{showSize}":"[data-file-fieldset-size]","{fileName}":"[data-file-name]","{fileType}":"[data-file-type]","{fileIcon}":"[data-file-icon]","{fileSize}":"[data-file-size]","{fileUrl}":"[data-file-url]"}},function(b,c,d,e,f,g,h,i){return{init:function(){f=b.blocks,e=f.composer,g=c.meta,h=a(),i=EasyBlog.MediaManager
},toData:function(a){var b=f.data(a);return b},toText:function(){},toHTML:function(a){var c=f.data(a);if(!c.url)return"";var d=a.clone(),e=b.deconstruct(d),g=f.getBlockContent(e);return g.html()},constructFromMediaFile:function(a){{var c=a.data("key"),d=i.getUri(c),e=f.createBlockContainer("file");f.getBlockContent(e),f.data(e)}return e.addClass("is-loading"),i.getMedia(d).done(function(a){var c=a.meta;b.createPreview(e,c.url,c.title,c.extension,c.size)}).fail(function(){}).always(function(){e.removeClass("is-loading")
}),e},toLegacyHTML:function(b,c){var e=(f.data(c),a("<a>").attr({href:b.url}).html(b.title));return e.prop("outerHTML")},activate:function(a){h=a,b.populate(a)},deactivate:function(){},construct:function(b){var c=f.createBlockContainer("file"),d=f.data(c);return a.extend(d,b),c},reconstruct:function(a){var c=f.data(a),d=b.placeholder.inside(a),e=b.dropElement.inside(d);c.url&&b.createPreview(a,c.url,c.name,c.type,c.size),e.length>0&&EasyBlog.MediaManager.uploader.register(d)},deconstruct:function(a){var c=f.getBlockContent(a);
return b.fileName.inside(c).editable(!1),a},refocus:function(){},reset:function(){},populate:function(a){var c=f.data(a);b.showIcon().val(c.showicon?1:0).trigger("change"),b.showSize().val(c.showsize?1:0).trigger("change")},getPreviewTemplate:function(){a(g.preview);return a(g.preview)},createPreview:function(c,d,e,g,h){var i=f.getBlockContent(c),j=b.getPreviewTemplate(),k=f.data(c);k.url=d,k.name=e,k.type=g,k.size=h,j.attr("id",k.uid),b.fileName.inside(j).text(k.name).editable(!0),b.fileType.inside(j).text(k.type);
var l=a.plupload2.formatSize(k.size);b.fileSize.inside(j).text(l),b.fileUrl.inside(j).attr("href",k.url).on("click",function(a){a.preventDefault()}),i.html(j)},"{showIcon} change":function(a){var d=f.getBlockContent(h),e=f.data(h);e.showicon=1==a.val()?!0:!1,e.showicon?b.fileIcon.inside(d).removeClass("hide"):b.fileIcon.inside(d).addClass("hide")},"{showSize} change":function(a){var d=f.getBlockContent(h),e=f.data(h);e.showsize=1==a.val()?!0:!1,e.showsize?b.fileSize.inside(d).parent("div").removeClass("hide"):b.fileSize.inside(d).parent("div").addClass("hide")
},"{placeholder} mediaUploaderFilesAdded":function(a,b,c,d){EasyBlog.MediaManager.uploader.addItem(d[0],a)},"{placeholder} mediaUploaderFileUploaded":function(a,c,d,e,g){var h=g.response,i=h.media,j=i.meta,k=f.block.of(a);setTimeout(function(){b.createPreview(k,j.url,j.title,j.extension,j.size)},600)},"{placeholder} mediaUploaderFileError":function(c,d,e,f){f.code==a.plupload2.FILE_EXTENSION_ERROR&&b.fileError.inside(h).removeClass("hide")},"{placeholder} mediaUploaderError":function(){},"{self} mediaInfoDisplay":function(b,c,d,e){"file"==e.meta.type&&a(d).find("[data-file-url]").on("click",function(a){a.preventDefault()
})},"{browseButton} mediaSelect":function(a,c,d){var g=f.block.of(a);if("file"==d.meta.type){var h=d.meta,i=e.document,j=i.isLegacy();j?(content=b.toLegacyHTML(g),i.insertContent(content)):b.createPreview(g,h.url,h.title,h.type,h.size)}},"{self} mediaInsert":function(a,c,d,g){if("file"==d.meta.type){var h=e.document,i=h.isLegacy();if(i)content=b.toLegacyHTML(d.meta,g),h.insertContent(content);else{var g=f.constructBlock("file",{name:d.meta.title,type:d.meta.extension,size:d.meta.size,url:d.meta.url});f.addBlock(g),f.activateBlock(g)
}}}}}),b.resolve()}),EasyBlog.module("composer/blocks/handlers/gist",function(a){var b=this;EasyBlog.Controller("Composer.Blocks.Handlers.Gist",{defaultOptions:a.extend({"{form}":"> [data-gist-form]","{insert}":"[data-gist-insert]","{source}":"[data-gist-source]","{preview}":"[data-gist-preview]","{fsSource}":"[data-fs-gist-source]","{fsRefreshButton}":"[data-fs-gist-refresh]","{errorMessage}":"[data-gist-error]"},EBD.selectors)},function(b,c,d,e,f,g,h){return{init:function(){f=b.blocks,e=f.composer,g=c.meta,h=a()
},toData:function(a){var b=f.data(a);return b},toText:function(a){var b=f.data(a);return b.source},toEditableHTML:function(){return""},toHTML:function(a){var c=(f.data(a),a.data("overlay"));return c?c.element().html():void 0},activate:function(a){f.getBlockContent(a),f.data(a);h=a,b.populate(a)},deactivate:function(){},construct:function(){},reconstruct:function(a){var c=f.data(a),d=a.data("overlay"),e=f.getBlockContent(a);c.source&&!d?b.createIframe(a,c.source):e.html(g.html),a.find(b.source.selector).off("paste").on("paste",function(a){a.stopPropagation()
})},deconstruct:function(){},refocus:function(){},reset:function(){},populate:function(a){var c=f.data(a);b.fsSource().val(c.source)},setOverlay:function(a,b){var c=a.data("overlay");if(c)c.element().empty(),c.element().append(b);else{var c=e.document.overlay.create(a),d=f.getBlockContent(a);c.placeholder().css("height","400px").appendTo(d),c.element().append(b),c.attach()}a.data("overlay",c)},isUrlValid:function(a){if(""==a)return!1;var b=/^https:\/\/gist\.github\.com\/(.*)\/(.*)$/,c=b.test(a);return c},createIframe:function(c,d){var e=document.createElement("iframe"),g=f.getBlockContent(c),h=f.data(c);
h.source=d,e.setAttribute("width","100%"),e.id="gistFrame",b.setOverlay(c,e);var i=a.callback(function(a){a+="px",g.find("iframe").css("height",a)}),j='<html><body onload="parent.'+i+'(document.body.scrollHeight);"><script type="text/javascript" src="'+d+'.js"></script></body></html>',k=e.document;return e.contentDocument?k=e.contentDocument:e.contentWindow&&(k=e.contentWindow.document),k.open(),k.writeln(j),k.close(),e},"{insert} click":function(a){if(h.length<1){var c=b.block.of(a);f.activateBlock(c)}{var d=f.getBlockContent(h),e=b.source.inside(d).val();
f.data(h)}return b.isUrlValid(e)?(b.fsSource().val(e),b.createIframe(h,e),b.form.inside(d).addClass("hidden"),void 0):(b.errorMessage().removeClass("hide"),void 0)},"{fsRefreshButton} click":function(){{var a=f.getBlockContent(h),c=b.fsSource().val();f.data(h)}return b.isUrlValid(c)?(b.createIframe(h,c),b.form.inside(a).addClass("hidden"),void 0):(b.errorMessage.inside(a).removeClass("hide"),void 0)}}}),b.resolve()}),EasyBlog.module("composer/blocks/handlers/heading",function(a){var b=this;EasyBlog.Controller("Composer.Blocks.Handlers.Heading",{defaultOptions:{"{headingElement}":"h1, h2, h3, h4, h5, h6","{levelSelection}":"[data-eb-composer-block-heading-level] [data-level]"}},function(b,c,d,e,f,g,h){return{init:function(){f=b.blocks,e=f.composer,g=c.meta,h=a()
},activate:function(a){h=a,b.populate(a)},deactivate:function(){},construct:function(b){return a.create(b.level).html(b.content)},reconstruct:function(){},deconstruct:function(a,c){return c&&(a=a.clone()),b.headingElement.inside(a).editable(!1),a},refocus:function(a){var c=b.headingElement.inside(a);c.focus(),a.hasClass("is-new")&&e.editor.caret.setEnd(c[0])},reset:function(a){a.html(g.content)},populate:function(a){var c=b.level(a);b.levelSelection().where("level",c).activateClass("active")},toData:function(a){return f.getData(a)
},toHTML:function(a){var a=f.getBlockContent(a);return b.deconstruct(a,!0).html()},toText:function(a){return a.text()},heading:{inside:function(a){return a.children(":first")}},level:function(a,c){var d=f.getBlockContent(a),e=b.headingElement.inside(d),g=e.tagName();return c&&g!==c&&(d.html(b.construct({level:c,content:e.html()})),b.headingElement.inside(a).editable(!0),g=c),g},setLevel:function(a,c){var c=b.level(a,c),d=b.headingElement.inside(a),e=[a,b,d];b.trigger("composerBlockHeadingSetLevel",e),b.trigger("composerBlockChange",e)
},previewLevel:function(a,c){clearTimeout(b.previewTimer);var d=b.headingElement.inside(a),e=d.tagName();a.defineData("originalLevel",e).addClass("is-preview"),b.level(a,c);var f=[a,b,d];b.trigger("composerBlockHeadingPreviewLevel",f),b.trigger("composerBlockChange",f)},previewTimer:null,"{levelSelection} mouseover":function(a){var c=a.data("level");b.previewLevel(h,c)},"{levelSelection} mouseout":function(){clearTimeout(b.previewTimer),b.previewTimer=setTimeout(function(){var a=h.data("originalLevel");a&&b.setLevel(h,a)
},50)},"{levelSelection} click":function(a){var c=a.data("level");b.setLevel(h,c),b.refocus(h)},"{self} composerBlockHeadingSetLevel":function(a,c,d){clearTimeout(b.previewTimer),d.removeClass("is-preview").removeData("originalLevel"),d.is(h)&&b.populate(d)}}}),b.resolve()}),EasyBlog.module("composer/blocks/handlers/html",function(){var b=this;EasyBlog.require().library("ace").done(function(a){EasyBlog.Controller("Composer.Blocks.Handlers.Html",{defaultOptions:{"{pre}":"[data-eb-composer-blocks-html-pre]"}},function(b,c,d,e,f,g,h){return{init:function(){f=b.blocks,e=f.composer,g=c.meta,h=a()
},activate:function(a){h=a,b.populate(a)},deactivate:function(a){var b=f.getBlockContent(a),c=b.html();""==c&&b.html(g.html)},construct:function(){},reconstruct:function(){},deconstruct:function(){},refocus:function(){},reset:function(){},toText:function(a){var c=(f.data(a),a.clone()),d=f.getBlockContent(c),e=d.text();return e},toData:function(a){var b=f.data(a);return b},toHTML:function(a){var d=(f.data(a),a.clone()),e=f.getBlockContent(d),g=b.editor(),h=g.getSession();return h.setValue(e.html()),e.html()},editor:a.memoize(function(){var c=e.find(b.pre)[0];
void 0==c&&(c=a.create("pre")[0]);var d=ace.edit(c);d.setTheme("ace/theme/github");var f=d.getSession();return f.setMode("ace/mode/html"),f.on("change",a.debounce(b.sync,150)),d}),populate:function(c){var d=b.editor(),e=d.getSession(),g=f.getBlockContent(c),i=a.trim(g.html());e.setValue(i),h=c},sync:function(){var a=b.editor(e),c=a.getSession(),d=f.getBlockContent(h),g=c.getValue();d.html(g)},reset:function(){}}}),b.resolve()})}),EasyBlog.module("composer/blocks/handlers/image",function(a){function m(a){return a.replace(/image-/,"")
}function n(a){return a.toString().match("%")?"%":"px"}function o(a,b){var c=Math.pow(10,b);return Math.round(a*c)/c}function p(b){if(a.isNumeric(b))return b;var c=b.split(":");return c[0]/c[1]}function r(a,b){return o(1/p(a)*100,b||3)+"%"}function s(a,b){return o(100*a,b||3)+"%"}function t(b){if(b=a.trim(b),/\:/.test(b)){var c=b.split(":");return parseInt(c[0])+":"+parseInt(c[1])}return parseFloat(b)||0}function u(a,b){return a.css("width",b)}function v(a,b){return a.css("top",b)}function w(a,b){return a.css("left",b)
}function x(a,b){return a.css("padding-top",b)}function y(a,b){return a.css("height",b)}var b=this,c="view-selectratio",d="view-customratio",e=/fit|fill/,f="is-fluid",g="is-loading",h="is-failed",i="is-different",j="Variation could not be retrieved because media meta does not exist in library!",k=["image-width","image-height"],l=["numslider","numslider-toggle","numslider-widget","numslider-value","numslider-input","numslider-units","numslider-unit","numslider-current-unit"],z=a.Image.resizeWithin,A=a.Image.resizeToFill;
EasyBlog.require().library("plupload2","imgareaselect").done(function(){EasyBlog.Controller("Composer.Blocks.Handlers.Image",{elements:["[data-eb-composer-image-{placeholder|browse-button}]","[data-eb-image-{url-fieldset|url-field|url-field-text|url-field-update-button}]","[data-eb-image-{source-fieldset|source-field|source-thumbnail|source-title|source-size|source-url|source-change-button}]","[data-eb-image-{variation-field|variation-list-container|variation-new-button|variation-create-button|variation-rebuild-button|variation-delete-button|variation-cancel-button|variation-cancel-failed-button}]","[data-eb-image-source-fieldset] [data-eb-mm-{variation-list|variation-list-item-group|variation-item}]","[data-eb-image-{variation-name|variation-width|variation-height}]","[data-eb-{image-size-fieldset|image-size-simple-field|image-size-advanced-field}]","^imageSize [data-eb-image-size-{preset-toggle|current-preset|preset|retry-button}]","[data-eb-image-size-fieldset] [data-eb-{"+l.join("|")+"}]","^imageSizeField .eb-composer-field[data-name={"+k.join("|")+"}]","[data-eb-image-{alignment-selection}]","[data-eb-image-{ratio-lock|ratio-button|ratio-label|ratio-customize-button|ratio-cancel-button|ratio-use-custom-button|ratio-cancel-custom-button|ratio-selection|ratio-preview|ratio-input}]","[data-eb-image-{map|map-container|map-figure|map-viewport|map-preview|map-picker}]","[data-eb-image-{strategy-menu-item|strategy-menu-content}]","[data-eb-image-{resize-input-field|resize-ratio-lock|resize-reset-button}]","[data-eb-image-{style-toggle|style-selection}]","[data-eb-image-{caption-toggle|caption-text-field}]","[data-eb-image-{link-toggle}]","[data-eb-image-link-fieldset] [data-eb-{link-url-field|link-title-field|link-blank-option}]","[data-eb-image-{popup-toggle|popup-fieldset|popup-field|popup-thumbnail|popup-title|popup-size|popup-url|popup-change-button}]","[data-eb-image-{popup-variation-field|popup-variation-list-container}]","^popup [data-eb-image-popup-fieldset] [data-eb-mm-{variation-list|variation-list-item-group|variation-item}]"],defaultOptions:a.extend({uploader:{runtimes:"html5,flash",url:"/echo/json",max_file_size:"10mb",filters:[{title:"Image files",extensions:"jpg,gif,png"}]},"{browseButton}":".eb-composer-placeholder-image [data-eb-mm-browse-button]","{imagePlaceholder}":"[data-eb-composer-image-placeholder]","{imageContainer}":".eb-image","{imageFigure}":".eb-image-figure","{imageViewport}":".eb-image-viewport","{imageElement}":".eb-image-figure img","{imagePopupButton}":".eb-image-popup-button","{imageCaption}":".eb-image-caption","{imageCaptionText}":".eb-image-caption > span","{imageHint}":".eb-image-hint","{imageUrlForm}":"[data-eb-image-url-form]","{imageUrlTextbox}":"[data-eb-image-url-textbox]","{imageUrlAdd}":"[data-eb-image-url-add]","{imageUrlCancel}":"[data-eb-image-url-cancel]"},EBD.selectors)},function(b,k,o,q,B,C,D,E,F){function G(a){return"image"==B.getBlockType(a)
}return{init:function(){B=b.blocks,q=B.composer,C=k.meta,D=a(),E=EasyBlog.MediaManager,F=q.panels.fieldset,a.each(l,function(c,d){var e=a.camelize(d),f={};b[e].of=function(a){var c=f[a];if(!c){var d=b.getImageSizeField(a);c=b[e].under(d),c.length&&(f[a]=c)}return c}})},deactivate:function(){},activate:function(a){D=a,a.hasClass("is-new")&&a.css("text-align","center"),b.populate(a)},construct:function(c){var d=B.createBlockContainer("image"),c=a.extend(B.data(d),c),e=B.getBlockContent(d).empty(),f=b.constructImage(c);
return e.append(f),d.css("text-align","center"),d},constructFromMediaFile:function(c){var d=c.data("key"),e=E.getUri(d),f=B.createBlockContainer("image"),g=B.getBlockContent(f),h=B.data(f);return f.css("text-align","center"),f.addClass("is-loading"),E.getMedia(e).done(function(a){var c=a.meta,d=E.getVariation(c.uri,"thumbnail");h.uri=c.uri,h.url=d.url,h.simple="simple",h.ratio_lock=!0,h.variation=d.key;var e=b.constructImage(h);g.html(e),f.hasClass("active")&&b.populate(f)}).fail(function(){var b=a(C.html);b.addClass("state-failed"),g.html(b)
}).always(function(){f.removeClass("is-loading")}),f},constructImage:function(c){var d=a(C.imageContainer),e=b.imageFigure.inside(d),g=b.imageElement.inside(d);if(g.attr("src",c.url),c.fluid&&d.addClass(f),d.addClass("style-"+c.style),c.caption_text&&(d.append(C.imageCaption),b.imageCaptionText.inside(d).html(c.caption_text)),c.popup_url){var h=a(C.imagePopupButton);h.attr("href",c.popup_url),e.append(h)}return d},toData:function(a){var b=B.data(a);return b},toHTML:function(a){if(!b.hasImage(a))return"";var c=a.clone(),d=b.deconstruct(c),e=B.getBlockContent(d);
return e.html()},toLegacyHTML:function(c){var d=b.toData(c),e=a("<img>").attr({src:d.url,width:d.width,height:d.height});if(d.caption_text&&e.addClass("easyblog-image-caption").attr("title",d.caption_text),d.popup_url&&e.attr("data-popup",d.popup_url),d.style&&e.attr("data-style",d.style),d.link_url){var f=a("<a>").attr({href:d.link_url,title:d.link_title,target:d.link_target}).append(e);return f.prop("outerHTML")}return e.prop("outerHTML")},toText:function(a){var c=b.imageCaptionText.inside(a).text(),d=b.imageElement.inside(a).attr("alt");
return c+"\n"+d},reconstruct:function(a){var c=b.imagePlaceholder.inside(a);c.length>0&&EasyBlog.MediaManager.uploader.register(c)},hasImage:function(a){return b.imageContainer.inside(a).length>0},"{imagePlaceholder} mediaUploaderFilesAdded":function(a,b,c,d){EasyBlog.MediaManager.uploader.addItem(d[0],a)},"{imagePlaceholder} mediaUploaderFileUploaded":function(a,c,d,e,f){var g=f.response,h=g.media,i=h.meta,j=B.block.of(a);setTimeout(function(){b.updateImageSource(j,i)},600)},"{browseButton} mediaSelect":function(a,c,d){var e=B.block.of(a);
if("image"==d.meta.type){var f=d.meta,g=q.document,h=g.isLegacy();h?(content=b.toLegacyHTML(e),g.insertContent(content)):b.setImageSource(e,f)}},"{popupChangeButton} mediaSelectStart":function(a){var d=D.data("uid");a.data("uid",d)},"{popupChangeButton} mediaSelect":function(a,c,d){if("image"==d.meta.type){{var e=D.data("uid"),f=a.data("uid"),g=d.meta,h=q.document;h.isLegacy()}if(e!=f){var j=B.getBlock(f);b.setImagePopup(j,g.uri)}else b.updateImagePopup(D,g.uri)}},"{sourceChangeButton} mediaSelectStart":function(a){var b=D.data("uid");
a.data("uid",b)},"{sourceChangeButton} mediaSelect":function(a,c,d){if("image"==d.meta.type){var e=D.data("uid"),f=a.data("uid"),g=d.meta,h=q.document,i=h.isLegacy();if(i)content=b.toLegacyHTML(j),h.insertContent(content);else if(e!=f){var j=B.getBlock(f);b.setImageSource(j,g)}else b.updateImageSource(D,g)}},"{self} mediaInsert":function(a,c,d,e){if("image"==d.meta.type){var f=q.document,g=f.isLegacy();if(b.normalizeImageSize(e),g)content=b.toLegacyHTML(e),f.insertContent(content);else{var h=B.data(e),e=B.constructBlock("image",h);
B.addBlock(e),B.activateBlock(e)}}},deconstruct:function(a){return a},refocus:function(){},reset:function(){},populate:function(a){var c=b.hasImage(a),d=B.panel.fieldgroup.get("image");d.toggleClass("is-new",!c),c&&(b.populateImageUrl(a),b.populateImageSource(a),b.populateImageSize(a),b.populateImageCaption(a),b.populateImageLink(a),b.populateImagePopup(a),b.populateImageStyle(a))},showImageHint:function(c,d){b.imageHint.inside(c).remove();var e=a(C.imageHint);e.find(".eb-hint-text").html(d);var f=b.imageViewport.inside(c);
f.append(e),e.removeClassAfter("is-new",1e3),setTimeout(function(){e.remove()},2500)},setImageSource:function(a,c){var d=B.data(a),e=E.getVariation(c.uri,"thumbnail");d.variation=e.key,d.url=e.url,d.uri=c.uri,d.natural_width=e.width,d.natural_height=e.height,d.natural_ratio=e.width/e.height;var f=b.constructImage(d);B.getBlockContent(a).empty().append(f)},updateImageSource:function(a,c){b.setImageSource(a,c),b.populate(a)},getSourceThumbnailImage:function(b){return a("<img>").attr("src",b)[0]},populateImageUrl:function(a){var c=B.data(a),d=b.urlFieldset();
return d.removeClass("hidden"),c.isurl?(b.urlFieldText().val(c.url),void 0):(d.addClass("hidden"),void 0)},populateImageSource:function(c){var d=B.data(c),e=b.sourceFieldset();if(e.removeClass("hidden"),d.isurl)return e.addClass("hidden"),void 0;var f=d.uri,e=b.sourceFieldset();e.addClass(g),E.getMedia(f).done(function(d){var e=d.meta,f=b.getSourceThumbnailImage(e.thumbnail);b.sourceThumbnail().empty().append(f),b.sourceTitle().text(e.title);var g=a(d.variations);b.variationListContainer().empty().append(g),b.populateImageVariation(c)
}).fail(function(){e.addClass(h)}).always(function(){e.removeClass(g)})},populateImageVariation:function(c){var d=B.data(c),e=d.uri,f=d.variation,g=E.getVariation(e,f);if(!g)return console.error(j),void 0;var h=b.variationItem().where("key",'"'+f+'"').activateClass("active");b.sourceSize().text(a.plupload2.formatSize(g.size||"")),b.sourceUrl().text(g.url||"");var i=h.hasClass("is-system"),k=h.hasClass("is-missing");b.variationField().toggleClass("can-delete",!i).toggleClass("is-missing",k)},setImageVariation:function(c,d){var e=B.data(c),f=e.uri,g=E.getVariation(f,d);
return g?(b.imageElement.inside(c).attr("src",g.url),b.showImageHint(c,a.String.capitalize(g.name)+'<br/><span style="font-weight: normal;">'+g.width+"x"+g.height+"</span>"),e.variation=d,e.url=g.url,void 0):EasyBlog.debug&&console.error(j)},updateImageVariation:function(a,c){b.setImageVariation(a,c),b.populateImageVariation(a)},"{variationItem} click":function(a){var c=a.data("key");b.updateImageVariation(D,c)},"{variationNewButton} click":function(){b.variationField().addClass("show-create-form");var c=B.data(D),d=c.uri,e=E.getVariation(d,"system/original"),f=e.width,g=e.height,h=f/g;
b.variationWidth().val(f).data("value",f).data("ratio",h),b.variationHeight().val(g).data("value",g).data("ratio",h)},"{variationCancelButton} click":function(){b.variationField().removeClass("show-create-form")},"{variationCreateButton} click":function(){var d=b.variationField(),e=a.trim(b.variationName().val()),f=b.variationWidth().val(),g=b.variationHeight().val();if(""!=a.trim(e)){d.addClass("is-creating");var h=D,i=B.data(h),j=i.uri;E.createVariation(j,e,f,g).done(function(c){var e=a(c.variations);b.variationListContainer().empty().append(e),b.populateImageVariation(h),d.removeClass("show-create-form")
}).fail(function(){d.removeClass("is-creating").addClass("is-failed")}).always(function(){d.removeClass("is-creating")})}},"{variationCancelFailedButton} click":function(){b.variationField().removeClass("is-failed")},"{variationRebuildButton} click":function(){var d=B.data(D),e=d.uri,f=b.variationItem(".active"),g=f.data("key"),h=E.getVariation(e,g),i=h.name,j=E.getKey(e);EasyBlog.ajax("site/views/mediamanager/rebuildVariation",{name:i,key:j}).done(function(c){var d=a(c.variations);b.variationListContainer().empty().append(d),b.populateImageVariation(D),E.setMedia(e,c)
})},"{variationDeleteButton} click":function(){var d=B.data(D),e=d.uri,f=b.variationItem(".active"),g=f.data("key"),h=E.getVariation(e,g),i=h.name;E.removeVariation(e,i).done(function(c){var d=a(c.variations);b.variationListContainer().empty().append(d);var f=E.getVariation(e,"thumbnail");b.updateImageVariation(D,f.key)})},"{variationWidth} input":function(c){var d=c.data("ratio"),e=Math.round(parseFloat(c.val()));if(a.isNumeric(e)){var f=Math.round(e/d);b.variationHeight().val(f)}},"{variationHeight} input":function(c){var d=c.data("ratio"),e=Math.round(parseFloat(c.val()));
if(a.isNumeric(e)){var f=Math.round(e*d);b.variationWidth().val(f)}},"{variationWidth} focus":function(a){a.select()},"{variationHeight} focus":function(a){a.select()},"{variationWidth} blur":function(c){var d=c.data("ratio"),e=Math.round(parseFloat(c.val()));if(c.val(e),!a.isNumeric(e)){var f=b.variationHeight(),g=Math.round(parseFloat(f.val()));a.isNumeric(g)?(e=Math.round(g*d),c.val(e),f.val(g)):b.resetVariationFields()}},"{variationHeight} blur":function(c){var d=c.data("ratio"),e=Math.round(parseFloat(c.val()));
if(c.val(e),!a.isNumeric(e)){var f=b.variationWidth(),g=Math.round(parseFloat(f.val()));a.isNumeric(g)?(e=Math.round(g/d),f.val(g),c.val(e)):b.resetVariationFields()}},resetVariationFields:function(){var a=b.variationWidth(),c=b.variationHeight();a.val(a.data("width")),c.val(c.data("height"))},populateImageMode:function(c){var d=B.data(c),e=d.mode,f=d.mode_lock;B.isRootBlock(c)&&(e="simple",f=!0),b.imageSizeFieldset().toggleClass("mode-lock",f);var g=b.imageSizePreset().removeClass("active").where("type",e).addClass("active"),h=a.trim(g.text());
b.imageSizeCurrentPreset().html(h);var i="preset-"+e;b.imageSizeFieldset().switchClass(i)},setImageMode:function(a,c){"simple"==c&&b.toSimpleImageMode(a),"advanced"==c&&b.toAdvancedImageMode(a)},toSimpleImageMode:function(a){var c=B.data(a);c.mode="simple",c.ratio=c.natural_ratio,c.ratio_lock=!0,c.element_width="",c.element_height="",c.element_top="",c.element_left="";var d=b.imageElement.inside(a);d.css({width:"",height:"",top:"",left:""}),b.normalizeImageSize(a)},toAdvancedImageMode:function(a){var c=B.data(a);
c.mode="advanced",c.ratio||(c.ratio=c.natural_ratio),c.element_ratio||(c.element_ratio=c.ratio),b.normalizeImageSize(a),b.resizeToFitViewport(a)},updateImageMode:function(a,c){b.setImageMode(a,c),b.populateImageSize(a)},"{imageSizePreset} click":function(a){var c=a.data("type");b.updateImageMode(D,c)},populateImageSize:function(){var c=function(a){if(a.is(D)){for(var d,c=c||["width","height"];d=c.shift();){var e="width"==d?b.getImageWidth(a):b.getImageHeight(a),f=parseFloat(e),g=n(e);if(b.resizingFromSlider!==d){if("px"==g)var h={start:f,step:1,range:{min:1,max:1600},pips:{mode:"values",values:[64,320,640,960,1280,1600],density:4}};
if("%"==g)var h={start:f,step:1,range:{min:1,max:100},pips:{mode:"values",values:[0,20,40,60,80,100],density:5}};b.numsliderWidget.of(d).find(".noUi-pips").remove().end().noUiSlider(h,!0).noUiSlider_pips(h.pips)}b.numsliderInput.of(d).val(Math.round(f)),b.numsliderCurrentUnit.of(d).html(g),b.numsliderUnit.of(d).removeClass("active").where("unit",'"'+g+'"').addClass("active")}var i=B.data(a),j=i.width_lock&&i.height_lock;b.imageSizeFieldset().toggleClass("hide-simple-field",j),b.populateImageMode(a),b.populateImageRatio(a),b.populateImageAlignment(a),b.populateImageAdvancedFields(a)
}};return function(d){var e=B.data(d),f=b.imageSizeFieldset(),g=b.imageElement.inside(d),h=e.size_enabled;if(F.toggle("image-size",h),g[0].complete)f.removeClass("is-loading is-failed"),c(d);else{var i=g.attr("src");f.addClass("is-loading"),a.Image.get(i).done(function(){c(d)}).fail(function(){f.switchClass("is-failed")}).always(function(){f.removeClass("is-loading is-failed")})}}}(),"{imageSizeRetryButton} click":function(){b.populateImageSize(D)},setImageSize:function(a,c,d){"width"==c&&b.setImageWidth(a,d),"height"==c&&b.setImageHeight(a,d)
},updateImageSize:function(a,c,d){b.setImageSize(a,c,d),b.populateImageSize(a)},normalizeImageSize:function(a){var c=B.data(a),d=b.isFluidImage(a);if(B.isRootBlock(a))var e=b.imageFigure.inside(a).width();if(B.isNestedBlock(a))var e=B.dimensions.getFluidWidth(a);b.setImageWidth(a,e),(d||"advanced"==c.mode)&&b.toFluidImage(a)},resetImageSize:function(a){var c=B.data(a);c.mode="simple";var d=b.imageContainer.inside(a),e=b.imageFigure.inside(a),f=b.imageElement.inside(a),g={width:"",height:"",top:"",left:"",paddingTop:"","float":""};
d.css(g),e.css(g),f.css(g),B.isRootBlock(a)&&b.setImageWidth(a,"100%"),B.isNestedBlock(a)&&b.setImageWidth(a,"30%")},getImageWidth:function(a){var c=b.imageFigure.inside(a),d=c[0].style;if(B.isRootBlock(a)){var e=b.imageContainer.inside(a),f=e[0].style.width;if(/%/.test(f))return f}if(B.isNestedBlock(a)){var g=a[0].style.width;if(/%/.test(g))return g}return d.width||c.css("width")},setImageWidth:function(a,c){var d=B.getData(a),e=n(c),g=parseFloat(c),h="%"==e,i="px"==e,j="simple"==d.mode,k="advanced"==d.mode,l=b.imageContainer.inside(a),m=b.imageElement.inside(a),q=(b.imageViewport.inside(a),b.imageFigure.inside(a)),t=(m.width(),m.height());
h&&(d.fluid=!0,l.addClass(f)),i&&(d.fluid=!1,l.removeClass(f)),k&&b.toFixedElement(a),B.isRootBlock(a)&&(a.css("width",""),h&&(u(l,c),u(q,"100%"),j&&(u(m,"100%"),d.element_width="100%")),i&&(u(l,""),u(q,c),j&&(u(m,c),d.element_width=parseFloat(c)))),B.isNestedBlock(a)&&(h&&(u(a,c),u(q,""),j&&(u(m,"100%"),d.element_width="100%")),i&&(u(a,"auto"),u(q,c),j&&(u(m,c),d.element_width=parseFloat(c)))),d.width=h?c:g;var v=d.ratio,w=d.ratio_lock,z=d.natural_ratio;if(w){var A=j?z:v;if(h&&(y(q,""),x(q,r(A)),j&&(y(m,"100%"),d.element_height="100%"),d.height="100%"),i){var C=m.width(),D=C/p(A);
y(q,D),x(q,""),j&&(y(m,D),d.element_height=D),d.height=D}d.ratio=A,j&&(d.element_ratio=A)}else{var C=m.width(),v=C/t;h&&x(q,r(v)),i&&x(q,""),d.ratio=v,j&&(d.element_ratio=v)}if(k){b.toFluidElement(a);var E=d.strategy;/fit|fill/.test(E)&&b.resizeToViewport(a,E)}var F=b.imageCaption.inside(a);h&&u(F,"100%"),i&&u(F,c)},updateImageWidth:function(a,c){b.setImageWidth(a,c),b.populateImageSize(a)},getImageHeight:function(a){var c=b.imageFigure.inside(a),d=c[0].style;return d.height||c.css("height")},setImageHeight:function(a,c){var d=B.data(a),c=parseFloat(c),e=d.ratio,f=d.ratio_lock,g=d.natural_ratio,h="simple"==d.mode,i="advanced"==d.mode,j=b.imageElement.inside(a),l=(b.imageViewport.inside(a),b.imageFigure.inside(a));
if(b.isFluidImage(a)){if(f){var m=h?g:e,n=c*p(m);b.setImageWidth(a,n),b.toFluidImage(a),d.ratio=m,h&&(d.element_ratio=m)}else{i&&b.toFixedElement(a);var o=j.width(),e=o/c;if(x(l,r(e)),d.ratio=e,h&&(d.element_ratio=e),i){b.toFluidElement(a);var q=d.strategy;/fit|fill/.test(q)&&b.resizeToViewport(a,q)}}d.height="100%"}if(b.isFixedImage(a))if(f){var m=h?g:e,n=c*p(m);b.setImageWidth(a,n)}else y(l,c),y(j,c),d.height=c,d.element_width=parseFloat(c)},updateImageHeight:function(a,c){b.setImageHeight(a,c),b.populateImageSize(a)
},isFluidImage:function(a){return b.imageContainer.inside(a).hasClass(f)},isFixedImage:function(a){return!b.isFluidImage(a)},toFixedImage:function(a){var c=B.data(a),d=b.imageElement.inside(a),e=d.width(),f=d.height();b.setImageWidth(a,e);var g=c.ratio_lock;g||b.setImageHeight(a,f)},toFluidImage:function(a){var c=B.data(a),d=b.imageContainer.inside(a),e=b.imageElement.inside(a);if(B.isRootBlock(a))var f=d.width(),g=a.width(),h=Math.round(f/g*100)+"%";if(B.isNestedBlock(a))var h=B.dimensions.getFluidWidth(a);
var i=e.height();b.setImageWidth(a,h);var j=c.ratio_lock;j||b.setImageHeight(a,i)},getImageSizeField:function(c){var d=b["imageSizeFieldImage"+a.capitalize(a.camelize(c))]();return d},getImageSizeProp:function(a){var c=a.closest(b.numslider.selector),d=m(c.data("name"));return d},getImageSizeUnit:function(c){var d=b.getImageSizeField(c);return a.trim(b.numsliderCurrentUnit.under(d).text())},handleNumsliderWidget:function(a,c){var d=b.getImageSizeProp(a),e=b.getImageSizeUnit(d),c=Math.round(c)+e;b.resizingFromSlider=d,b.updateImageSize(D,d,c),b.resizingFromSlider=null
},"{numsliderWidget} nouislide":function(a,c,d){b.handleNumsliderWidget(a,d)},"{numsliderWidget} set":function(a,c,d){b.handleNumsliderWidget(a,d)},"{numsliderInput} input":function(c){function d(a){c.on("blur.numslider",function(){c.val(a)})}c.off("blur.numslider");var e=b.getImageSize(D),f=b.getImageSizeProperty(c),g=c.val();return a.isNumeric(g)?(g=Math.round(g),b.updateImageSize(D,f,g),void 0):d(e[a.camelize(f)])},"{numsliderUnit} click":function(a){var c=a.data("unit");"px"==c&&b.toFixedImage(D),"%"==c&&b.toFluidImage(D),b.populateImageSize(D)
},"{self} composerBlockResizeStart":function(a,c,d){if(G(d)&&b.hasImage(d)){var f=b.imageFigure.inside(d),g={width:f.width(),height:f.outerHeight(),fluid:b.isFluidImage(d)};d.data("initialImageSize",g)}},"{self} composerBlockBeforeResize":function(a,c,d,e){function k(){var a=f.width+i;b.setImageWidth(d,a)}function l(){var a=f.height+j;b.setImageHeight(d,a)}if(G(d)&&b.hasImage(d)){c.preventDefault();var f=d.data("initialImageSize"),g=e.originalSize,h=e.size,i=h.width-g.width,j=h.height-g.height,m=B.data(d),n=m.ratio_lock;
n?0==i?l():k():(0!==i&&k(),0!==j&&l()),f.fluid&&b.toFluidImage(d),b.populateImageSize(d)}},"{self} composerBlockResizeStop":function(a,c,d){G(d)&&b.hasImage(d)&&d.removeData("initialImageSize")},"{self} composerBlockNestIn":function(a,c,d){G(d)&&b.hasImage(d)&&(b.resetImageSize(d),b.populateImageSize(d))},"{self} composerBlockNestOut":function(a,c,d){G(d)&&b.hasImage(d)&&(b.resetImageSize(d),b.populateImageSize(d))},populateImageRatio:function(a){var e=B.data(a),f=e.ratio,g=e.ratio_lock;b.ratioLabel().html(f),b.ratioButton().toggleClass("ratio-unlocked",!g);
var h=".ar-original",i=e.natural_ratio,j=r(i);b.ratioSelection(h).attr("data-value",i),b.ratioPreview(h).find("> div").css("padding-top",j).find("span").text(i),b.imageSizeFieldset().removeClass(d).removeClass(c)},lockImageRatio:function(a){var c=B.data(a);c.ratio_lock=!0,b.normalizeImageSize(a)},unlockImageRatio:function(a){var b=B.data(a);b.ratio_lock=!1},setImageRatio:function(a,c){var d=B.data(a);d.ratio=c;var f=d.ratio_lock=0!==c;if(f){var g="simple"==d.mode,h="advanced"==d.mode;if(g&&(d.element_ratio=c,b.normalizeImageSize(a)),h){var i=d.strategy;
e.test(i)?(b.normalizeImageSize(a),b.resizeToViewport(a,i)):(b.toFixedElement(a),b.normalizeImageSize(a),b.toFluidElement(a))}}},updateImageRatio:function(a,c){b.setImageRatio(a,c),b.populateImageSize(a)},"{ratioLock} change":function(a){a.is(":checked")?b.lockImageRatio(D):b.unlockImageRatio(D)},"{ratioButton} click":function(){b.imageSizeFieldset().switchClass(c)},"{ratioCustomizeButton} click":function(){b.imageSizeFieldset().switchClass(d)},"{ratioCancelButton} click":function(){b.imageSizeFieldset().removeClass(c)
},"{ratioCancelCustomButton} click":function(){b.imageSizeFieldset().switchClass(c)},"{ratioOkCustomButton} click":function(){b.imageSizeFieldset().removeClass(d)},"{ratioUseCustomButton} click":function(){var c=b.ratioInput(),e=t(c.val());0!=e&&(b.updateImageRatio(D,e),b.ratioSelection().removeClass("active"),b.imageSizeFieldset().removeClass(d))},"{ratioSelection} click":function(a){b.ratioSelection().removeClass("active"),a.addClass("active"),b.imageSizeFieldset().removeClass(c);var d=a.data("value");b.updateImageRatio(D,d)
},setImageAlignment:function(a,c){var d=b.imageContainer.inside(a);/left|right/.test(c)&&(d.css("float",c),a.css("text-align","")),/center/.test(c)&&(d.css("float",""),a.css("text-align","center"));var e=B.data(a);e.alignment=c},updateImageAlignment:function(a,c){b.setImageAlignment(a,c),b.populateImageAlignment(a)},populateImageAlignment:function(a){if(B.isNestedBlock(a))return b.imageSizeFieldset().addClass("no-alignment"),void 0;b.imageSizeFieldset().removeClass("no-alignment");var c=B.data(a),d=c.alignment;
b.alignmentSelection().val(d)},"{alignmentSelection} change":function(a){var c=a.val();b.updateImageAlignment(D,c)},populateImageAdvancedFields:function(a){var c=B.data(a);"advanced"===c.mode&&(b.populateImageResizeStrategy(a),b.populateImageResizeMap(a),b.populateImageResizeFields(a))},populateImageResizeStrategy:function(a){var c=B.data(a),d=c.strategy;b.strategyMenuItem().where("strategy",d).activateClass("active"),b.strategyMenuContent().where("strategy",d).activateClass("active")},setImageResizeStrategy:function(a,c){var d=B.data(a);
d.strategy=c,e.test(c)&&b.resizeToViewport(a,c)},updateImageResizeStrategy:function(a,c){b.setImageResizeStrategy(a,c),b.populateImageAdvancedFields(a)},resizeToViewport:function(a,c){var d=B.data(a),e=d.natural_width,f=d.natural_height,g=b.imageViewport.inside(a),h=g.width(),i=g.height(),j=("fit"==c?z:A)(e,f,h,i),k=d.element_width=s(j.width/h),l=d.element_height=s(j.height/i),m=d.element_top=s(j.top/i),n=d.element_left=s(j.left/h),o=b.imageElement.inside(a);o.css({width:k,height:l,top:m,left:n})},resizeToFillViewport:function(a){b.setImageResizeStrategy(a,"fill")
},resizeToFitViewport:function(a){b.setImageResizeStrategy(a,"fit")},"{strategyMenuItem} click":function(a){var c=a.data("strategy");b.updateImageResizeStrategy(D,c)},populateImageResizeMap:function(c){var d=B.data(c);if("custom"===d.strategy){var e=b.mapFigure(),f=e.width(),g=e.height(),h=b.imageViewport(),i=h.width(),j=h.height(),k=b.mapViewport(),l=z(i,j,f,g);k.css(l);var m=b.mapPreview(),n=["n","s","w","e","sw","se","nw","ne"],o=b.createResizeHandleElements(n),p=b.createResizeHandleSelectors(n);m.hasClass("ui-resizable")&&m.resizable("destroy"),m.hasClass("ui-draggable")&&m.draggable("destroy"),m.css({backgroundImage:a.cssUrl(d.url),width:d.element_width,height:d.element_height,top:d.element_top,left:d.element_left}).empty().append(o).resizable({handles:p,aspectRatio:d.element_ratio_lock}).draggable()
}},createResizeHandleSelectors:function(b){var c=[];return a.each(b,function(a,b){c[b]="> .ui-resizable-"+b}),c},createResizeHandleElements:function(b){var c=[];return a.each(b,function(b,d){var e=a('<div class="ui-resizable-handle ui-resizable-'+d+'"><div></div></div>')[0];c.push(e)}),c},getElementSizeFromMap:function(){var a=b.mapViewport(),c=a.width(),d=a.height(),e=b.mapPreview(),f=e.position(),g=f.top,h=f.left,i=e.width(),j=e.height(),k=s(g/d),l=s(h/c),m=s(i/c),n=s(j/d);return{top:k,left:l,width:m,height:n}
},setElementSizeFromMap:function(a){var c=B.data(a),d=b.getElementSizeFromMap(),e=b.imageElement.inside(a);e.css(d),b.setElementSizeOnBlockData(d,c)},updateElementSizeFromMap:function(a){b.setElementSizeFromMap(a),b.populateImageResizeFields(a)},setElementSizeOnBlockData:function(a,b){for(var d,c=["top","left","width","height"];d=c.shift();)b["element_"+d]=a[d]},toFixedElement:function(a){var c=b.imageElement.inside(a),d=c.position(),e=d.top,f=d.left,g=c.width(),h=c.height();c.css({width:g,height:h,top:e,left:f})
},toFluidElement:function(a){var c=B.data(a),d=b.imageElement.inside(a),e=d.position(),f=e.top,g=e.left,h=d.width(),i=d.height(),j=b.imageViewport.inside(a),k=j.width(),l=j.height(),m=c.element_top=s(f/l),n=c.element_left=s(g/k),o=c.element_width=s(h/k),p=c.element_height=s(i/l);d.css({top:m,left:n,width:o,height:p})},"{mapPreview} resize":function(){b.updateElementSizeFromMap(D)},"{mapPreview} drag":function(){b.updateElementSizeFromMap(D)},populateImageResizeFields:function(a){for(var f,c=B.data(a),d=b.resizeInputField(),e=["width","height","top","left"];f=e.shift();){if(b.resizingFromInput==f)return;
d.where("prop",f).val(c["element_"+f])}b.resizeRatioLock().prop("checked",c.element_ratio_lock)},setElementSize:function(c,d,e){return b["setElement"+a.capitalize(d)](c,e)},updateElementSize:function(a,c,d){b.setElementSize(a,c,d),b.populateImageAdvancedFields(a)},setElementWidth:function(a,c){var d=B.data(a),f=(parseFloat(c),n(c)),g=d.element_ratio,h=d.element_ratio_lock,i=b.imageViewport.inside(a),j=b.imageElement.inside(a);if("%"==f)if(h){var k=d.element_width,l=j.width(),m=c,o=l*(parseFloat(m)/parseFloat(k)),p=o/g,q=i.height(),r=s(p/q);
d.element_width=m,d.element_height=r,u(j,m),y(j,r)}else{var m=c;d.element_width=parseFloat(m),u(j,m)}},setElementHeight:function(a,c){var d=B.data(a),f=(parseFloat(c),n(c)),g=d.element_ratio,h=d.element_ratio_lock,i=b.imageViewport.inside(a),j=b.imageElement.inside(a);if("%"==f)if(h){var k=d.element_height,l=j.height(),m=c,o=l*(parseFloat(m)/parseFloat(k)),p=o*g,q=i.width(),r=s(p/q);d.element_width=r,d.element_height=m,u(j,r),y(j,m)}else{var m=c;d.element_height=m,y(j,m)}},setElementTop:function(a,c){var d=B.data(a);
d.element_top=c;var e=b.imageElement.inside(a);v(e,c)},setElementLeft:function(a,c){var d=B.data(a);d.element_left=c;var e=b.imageElement.inside(a);w(e,c)},setElementRatio:function(a,c){var d=B.data(a);d.element_ratio=c,b.setElementWidth(a,d.element_width)},updateElementRatio:function(a,c){b.setElementRatio(a,c),b.populateImageAdvancedFields(a)},resetElementSize:function(a){b.setImageResizeStrategy(a,"fit"),b.setImageResizeStrategy(a,"custom"),b.populateImageAdvancedFields(a)},lockElementRatio:function(a){var c=B.data(a);
c.element_ratio_lock=!0;var d=c.natural_ratio;b.updateElementRatio(a,d)},unlockElementRatio:function(a){var c=B.data(a);c.element_ratio_lock=!1,b.populateImageAdvancedFields(a)},"{resizeInputField} input":function(c){var e=c.data("prop"),f=c.val(),g=a.trim(f.replace(/\%/gi,""));a.isNumeric(g)&&(f=parseFloat(g)+"%",b.resizingFromInput=e,b.updateElementSize(D,e,f),b.resizingFromInput=null)},"{resizeInputField} focus":function(a){a.select()},"{resizeInputField} blur":function(a){var b=B.data(D),c=a.data("prop"),d=b["element_"+c];
a.val(d)},"{resizeResetButton} click":function(){b.resetElementSize(D)},"{resizeRatioLock} click":function(a){var c=a.is(":checked");c?b.lockElementRatio(D):b.unlockElementRatio(D)},populateImageCaption:function(a){var c=B.data(a),d=c.caption_enabled;F.toggle("image-caption",d);var e=b.imageCaption.inside(a).length;F.enable("image-caption",e);var f=c.caption_text;f&&b.captionTextField().val(f)},getImageCaption:function(a){var b=B.data(a);return b.caption_text},setImageCaption:function(c,d){var e=b.imageCaption.inside(c);
if(!e.length){var e=a(C.imageCaption),f=b.imageContainer.inside(c);f.append(e)}var g=b.imageCaptionText.inside(c);g.text(d);var h=B.data(c);h.caption_text=d},removeImageCaption:function(a){var c=b.imageCaption.inside(a);c.remove()},enableImageCaption:function(a){var c=B.data(a);c.caption_text||(c.caption_text=b.captionTextField().val()),b.setImageCaption(a,c.caption_text),b.populateImageCaption(a)},disableImageCaption:function(a){b.removeImageCaption(a),b.populateImageCaption(a)},"{captionToggle} change":function(a){a.is(":checked")?b.enableImageCaption(D):b.disableImageCaption(D)
},"{captionTextField} input":function(a){var d=a.val();b.setImageCaption(D,d)},populateImageStyle:function(a){var c=B.data(a),d=c.style_enabled;F.toggle("image-style",d),b.styleSelection().where("value",c.style).activateClass("active")},setImageStyle:function(a,c){var d=b.imageContainer.inside(a);d.switchClass("style-"+c);var e=B.data(a);e.style=c},updateImageStyle:function(a,c){b.setImageStyle(a,c),b.populateImageStyle(a)},"{styleSelection} click":function(a){var d=a.data("value");b.updateImageStyle(D,d)},populateImageLink:function(a){var c=B.data(a),d=c.link_enabled;
F.toggle("image-link",d),b.linkUrlField().val(c.link_url),b.linkTitleField().val(c.link_title),b.linkBlankOption().prop("checked","_blank"==c.link_target);var e=""!==c.link_url;F.enable("image-link",e)},setImageLinkUrl:function(c,d){var e=B.data(c);e.link_url=d=a.trim(d);var f=b.imageViewport.inside(c);d?f.attr("href",d):f.removeAttr("href")},setImageLinkTitle:function(a,c){var d=B.data(a);d.link_title=c,b.imageViewport.inside(a).attr("title",d.link_title)},setImageLinkTarget:function(a,c){var d=B.data(a);d.link_target=c;
var e=b.imageViewport.inside(a);c?e.attr("target",c):e.removeAttr("target")},removeImageLink:function(a){var c=B.data(a);c.link_url="",c.link_title="",c.link_target="";var d=b.imageViewport.inside(a);d.removeAttr("href").removeAttr("title").removeAttr("target"),b.populateImageLink(a)},"{linkUrlField} input":function(a){var c=a.val();b.setImageLinkUrl(D,c)},"{linkTitleField} input":function(a){var c=a.val();b.setImageLinkTitle(D,c)},"{linkBlankOption} change":function(a){var c=a.is(":checked"),d=c?"_blank":"";
b.setImageLinkTarget(D,d)},"{linkToggle} change":function(a){a.is(":checked")||b.removeImageLink(D)},"{imageViewport} click":function(a,b){b.preventDefault()},setImagePopup:function(a,c,d){var e=B.data(a);b.imagePopupButton.inside(a).remove();var c=e.popup_uri=c||e.popup_uri||e.uri,d=e.popup_variation=d||e.popup_variation,f=E.getMedia(c).done(function(f){var h=(f.meta,E.getVariation(c,[d,"system/large","system/original"]));e.popup_url=h.url,e.popup_variation=h.key,b.imagePopupButton.inside(a).attr("href",e.popup_url)
});return f},unsetImagePopup:function(a){var c=B.data(a);c.popup_url="",c.popup_uri="",c.popup_variation="",b.imagePopupButton.inside(a).remove()},updateImagePopup:function(a,c,d){b.setImagePopup(a,c,d).always(function(){b.populateImagePopup(a)})},removeImagePopup:function(a){b.unsetImagePopup(a),b.populateImagePopup(a)},populateImagePopup:function(c){var d=B.data(c);if(b.popupFieldset().removeClass("hidden"),d.isurl)return b.popupFieldset().addClass("hidden"),void 0;var e=d.popup_uri,f=d.popup_variation,j=d.popup_enabled;
F.toggle("image-popup",j);var k=!!e;F.enable("image-popup",k);var l=d.uri,m=b.popupFieldset();m.toggleClass(i,k&&e!==l),k&&(m.addClass(g),E.getMedia(e).done(function(c){var d=c.meta;b.popupTitle().text(d.title);var g=b.getSourceThumbnailImage(d.thumbnail);b.popupThumbnail().empty().append(g);var h=a(c.variations);b.popupVariationListContainer().empty().append(h);{var i=E.getVariation(e,[f,"system/large","system/original"]);b.popupVariationItem().where("key",'"'+i.key+'"').activateClass("active")}b.popupSize().text(a.plupload2.formatSize(i.size)),b.popupUrl().text(i.url)
}).fail(function(){m.addClass(h)}).always(function(){m.removeClass(g)}))},"{popupToggle} change":function(a){var c=a.is(":checked");c?b.updateImagePopup(D):b.removeImagePopup(D)},"{popupVariationItem} click":function(a){if(!a.hasClass("is-missing")){var c=a.data("key");b.updateImagePopup(D,null,c)}},"{imageUrlAdd} click":function(){var d=b.imageUrlTextbox().val();if(d){var f=(B.getBlockContent(D),B.data(D));D.css("text-align","center"),f.uri=d,f.url=d,f.simple="simple",f.ratio_lock=!0,f.isurl=!0;var g=b.constructImage(f);
B.getBlockContent(D).empty().append(g),D.hasClass("active")&&b.populate(D)}},"{urlFieldUpdateButton} click":function(){var d=b.urlFieldText().val();if(d){var e=B.data(D);e.uri=d,e.url=d;var f=b.constructImage(e);B.getBlockContent(D).empty().append(f)}}}}),b.resolve()})}),EasyBlog.module("composer/blocks/handlers/instagram",function(a){var b=this;EasyBlog.Controller("Composer.Blocks.Handlers.Instagram",{defaultOptions:a.extend({"{form}":"> [data-instagram-form]","{insert}":"[data-instagram-insert]","{source}":"[data-instagram-source]","{preview}":"[data-instagram-preview]","{fsSource}":"[data-fs-instagram-source]","{fsRefreshButton}":"[data-fs-instagram-refresh]","{errorMessage}":"[data-instagram-error]"},EBD.selectors)},function(b,c,d,e,f,g,h){return{init:function(){f=b.blocks,e=f.composer,g=c.meta,h=a()
},toData:function(a){var b=f.data(a);return b},toText:function(a){var b=f.data(a);return b.source},toEditableHTML:function(){return""},toHTML:function(a){var b=a.data("overlay");return b?b.element().html():void 0},activate:function(a){h=a,b.populate(a)},deactivate:function(){},construct:function(){},deconstruct:function(a){var c=f.getBlockContent(a);return b.form.inside(c).remove(),a},reconstruct:function(a){var c=f.data(a),d=a.data("overlay"),e=f.getBlockContent(a);c.source&&!d?b.createIframe(a,c.source):e.html(g.html),a.find(b.source.selector).off("paste").on("paste",function(a){a.stopPropagation()
})},refocus:function(){},reset:function(){},populate:function(a){var c=f.data(a);b.fsSource().val(c.source)},createIframe:function(c,d){var e=a.create("iframe"),g=f.data(c);d=b.sanitizeUrl(d),g.source=d,e.attr("src",d),b.setOverlay(c,e)},sanitizeUrl:function(a){return a=a.replace("?modal=true",""),a=a.replace(/\/$/,""),a.match(/\/embed/)||(a+="/embed/"),a},setOverlay:function(a,b){var c=a.data("overlay");if(c)c.element().empty(),c.element().append(b);else{c=e.document.overlay.create(a);var d=f.getBlockContent(a);
c.placeholder().css("height","400px").appendTo(d),c.element().append(b),c.attach()}a.data("overlay",c)},isUrlValid:function(a){if(""==a)return!1;var b=/^(?:http(?:s)?:\/\/)?instagram\.com\/p\/(.*)\/$/,c=b.test(a);return c},"{insert} click":function(a){if(h.length<1){var d=b.block.of(a);f.activateBlock(d)}var e=f.getBlockContent(h),g=b.source.inside(e).val();return b.isUrlValid(g)?(b.fsSource().val(g),b.createIframe(h,g),b.form.inside(e).addClass("hidden"),void 0):(b.errorMessage().removeClass("hide"),void 0)
},"{fsRefreshButton} click":function(){var a=f.getBlockContent(h),c=b.fsSource().val();return b.isUrlValid(c)?(b.createIframe(h,c),b.form.inside(a).addClass("hidden"),void 0):(b.errorMessage().removeClass("hide"),void 0)}}}),b.resolve()}),EasyBlog.module("composer/blocks/handlers/links",function(a){var b=this;EasyBlog.Controller("Composer.Blocks.Handlers.Links",{defaultOptions:{"{loader}":"> [data-link-loader]","{form}":"> [data-link-form]","{addLink}":"[data-link-add]","{linkInput}":"[data-link-input]","{errorMessage}":"[data-link-error]","{preview}":"> [data-link-preview]","{previewTitle}":"> [data-link-preview] [data-preview-title]","{previewContent}":"> [data-link-preview] [data-preview-content]","{previewLink}":"> [data-link-preview] [data-preview-link]","{previewImage}":"> [data-link-preview] [data-preview-image]","{imageWrapper}":"> [data-link-preview] [data-preview-image-wrapper]","{settings}":"[data-eb-composer-block-links-image]","{imageList}":"[data-eb-composer-block-links-image] [data-images]","{imagePlaceholder}":"[data-eb-composer-block-links-image] [data-image-placeholder]","{currentIndex}":"[data-eb-composer-block-links-image] [data-image-current-index]","{totalImages}":"[data-eb-composer-block-links-image] [data-images-total]","{previousImage}":"[data-eb-composer-block-links-image] [data-images-previous]","{nextImage}":"[data-eb-composer-block-links-image] [data-images-next]","{showImage}":"[data-links-image]"}},function(b,c,d,e,f,g,h){return{init:function(){f=b.blocks,e=f.composer,g=c.meta,h=a()
},activate:function(a){h=a,b.populate(a)},deactivate:function(){},construct:function(){},toText:function(a){var c=f.getBlockContent(a),d=b.previewLink.inside(c).html();return d},toData:function(a){var b=f.data(a);return b},toHTML:function(a){var c=f.data(a);if(!c.url)return"";var d=a.clone(),e=b.deconstruct(d),g=f.getBlockContent(e);return g.html()},makeEditable:function(a){var c=f.getBlockContent(a);b.previewTitle.inside(c).editable(!0).on("click",function(a){a.preventDefault()}),b.previewContent.inside(c).editable(!0),b.previewLink.inside(c).on("click",function(a){a.preventDefault()
}),b.imageWrapper.inside(c).on("click",function(a){a.preventDefault()})},reconstruct:function(a){var c=f.data(a),d=f.getBlockContent(a);c.url||c.title||d.html(g.html),b.makeEditable(a)},deconstruct:function(a){var c=f.getBlockContent(a),d=f.data(a),e=b.preview.inside(c);return d.showImage||b.imageWrapper.inside(c).remove(),b.previewTitle.inside(c).editable(!1),b.previewContent.inside(c).editable(!1),b.loader.inside(c).remove(),b.form.inside(c).remove(),b.preview.inside(c).removeAttr("data-link-preview"),b.previewImage.inside(c).removeAttr("data-preview-image"),b.previewTitle.inside(c).removeAttr("data-preview-title"),b.previewContent.inside(c).removeAttr("data-preview-content"),c.html(e.html()),e.remove(),a
},refocus:function(){},reset:function(){},populate:function(a){var c=f.data(a);c.images&&c.images.length>0&&b.populateImages(c.images,c.image),c.images.length>=1?b.settings().removeClass("hide"):b.settings().addClass("hide"),b.showImage().val(c.showImage?1:0),b.showImage().trigger("change")},populateImages:function(c,d){var e=a.inArray(d,c);return b.currentIndex().html(e+1),b.totalImages().html(c.length),b.imageList().children("img").remove(),c?(a.each(c,function(e,f){var g=a(new Image);g.attr("src",f),b.imagePlaceholder().addClass("hidden"),g.addClass("hidden"),e==a.inArray(d,c)&&g.removeClass("hidden"),b.imageList().append(g)
}),void 0):!1},updatePreview:function(){var a=f.getBlockContent(h),c=f.data(h);b.previewTitle.inside(a).html(c.title).attr("href",c.url),b.previewContent.inside(a).html(c.content),b.previewLink.inside(a).html(c.url).attr("href",c.url),b.previewImage.inside(a).attr("src",c.image),b.imageWrapper.inside(a).attr("href",c.url)},getSuggestions:function(a,c,d){EasyBlog.ajax("site/views/crawler/crawl",{url:a}).done(d).fail(function(a){b.showForm(c),b.errorMessage().html(a).removeClass("hide")})},hideForm:function(a){var c=f.getBlockContent(a);
b.form.inside(c).addClass("hidden"),b.loader.inside(c).removeClass("hidden")},showForm:function(a){var c=f.getBlockContent(a);b.form.inside(c).removeClass("hidden"),b.loader.inside(c).addClass("hidden")},"{showImage} change":function(a){var d=f.getBlockContent(h),e=f.data(h),g=a.val();0==g?(e.showImage=!1,b.imageWrapper.inside(d).addClass("hide")):(e.showImage=!0,b.imageWrapper.inside(d).removeClass("hide"))},"{previousImage} click":function(c){var e=b.imageList().children("img"),g=b.imageList().children("img:not(.hidden)"),i=a(g).prev("img"),j=parseInt(b.currentIndex().html()),k=f.data(h);
if(i.length>0){k.image=i.attr("src"),b.updatePreview(),a(e).addClass("hidden"),a(i).removeClass("hidden");var l=j-1;console.log(l),b.currentIndex().html(l)}b.nextImage().disabled(!1),j-1==1?a(c).disabled(!0):a(c).disabled(!1)},"{nextImage} click":function(c){var e=b.imageList().children("img"),g=b.imageList().children("img:not(.hidden)"),i=a(g).next("img"),j=parseInt(b.currentIndex().html()),k=f.data(h);i.length>0&&(k.image=i.attr("src"),b.updatePreview(),a(e).addClass("hidden"),a(i).removeClass("hidden"),b.currentIndex().html(j+1)),b.previousImage().disabled(!1),j+1==e.length?a(c).disabled(!0):a(c).disabled(!1)
},"{addLink} click":function(){var c=f.getBlockContent(h),d=b.linkInput.inside(c).val(),e=f.data(h);return d?(b.hideForm(h),b.getSuggestions(d,h,function(a){var f=a[d];e.title=f.title,e.content=f.description,e.url=d,e.images=f.images,e.image=f.images[0],e.showImage=!0,b.updatePreview(),b.loader.inside(c).addClass("hidden"),b.preview.inside(c).removeClass("hidden"),b.makeEditable(),b.populate(h)}),void 0):(b.errorMessage().removeClass("hide"),void 0)}}}),b.resolve()}),EasyBlog.module("composer/blocks/handlers/note",function(a){var b=this;
EasyBlog.require().done(function(){EasyBlog.Controller("Composer.Blocks.Handlers.Note",{defaultOptions:{data:{type:"warning",content:"Enter an important note here"},"{note}":".alert","{alertSelection}":"[data-eb-composer-block-alert-type] [data-type]"}},function(b,c,d,e,f,g,h){return{init:function(){f=b.blocks,e=f.composer,g=c.meta,h=a(),c.data.content=a(g.content).html()},activate:function(a){h=a,b.populate(a)},construct:function(b){{var b=a.extend({},c.data,b);a(g.content).switchClass("alert-"+b.type).html(b.content)
}},reconstruct:function(){},deconstruct:function(a){var c=f.getBlockContent(a);return b.note.inside(c).editable(!1),a},refocus:function(a){var c=f.getBlockContent(a),d=b.note.inside(c);d.focus(),a.hasClass("is-new")&&e.editor.caret.setEnd(d[0])},toText:function(a){var c=f.getBlockContent(a),d=b.note.inside(c).text();return d},toData:function(a){var b=f.data(a);return b},toHTML:function(a){var c=a.clone(),d=b.deconstruct(c),e=f.getBlockContent(d);return e.html()},reset:function(a){var c=f.getBlockContent(a);c.html(b.construct())
},populate:function(a){var c=f.data(a);b.alertSelection().where("type",c.type).activateClass("selected")},setAlertType:function(a){var c=f.getBlockContent(h),d=c.find(b.note);d.switchClass("alert-"+a)},previewType:function(a){{var c=f.getBlockContent(h),d=b.note.inside(c),e=d.attr("class");f.getData(h)}h.hasClass("is-preview")||(h.data("originalClass",e),h.addClass("is-preview")),b.setAlertType(a);var i=[h,b,d];b.trigger("composerBlockNotePreviewType",i),b.trigger("composerBlockChange",i)},previewTimer:null,"{alertSelection} mouseover":function(){},"{alertSelection} mouseout":function(){},"{alertSelection} click":function(c){var d=c.data("type"),e=f.data(h);
b.alertSelection().removeClass("selected"),a(c).addClass("selected"),h.removeClass("is-preview"),h.removeData("originalClass"),b.setAlertType(d),e.type=d,b.populate(h)}}}),b.resolve()})}),EasyBlog.module("composer/blocks/handlers/post",function(a){var b=this;EasyBlog.Controller("Composer.Blocks.Handlers.Post",{defaultOptions:{"{block}":".ebd-block[data-type=text]","{wrapper}":"> div[data-text-wrapper]","{lastParagraph}":"> div > p:last","{mediaPreview}":"[data-post-media]","{introPreview}":"[data-post-intro]","{linkPreview}":"[data-post-link-preview]","{titlePreview}":"[data-preview-title]","{showImage}":"[data-post-option-image]","{showIntro}":"[data-post-option-intro]","{showHyperlink}":"[data-post-option-link]"}},function(b,c,d,e,f,g,h){return{init:function(){f=b.blocks,e=f.composer,g=c.meta,h=a()
},activate:function(a){var c=f.data(a);h=a,b.showImage().val(0==c.show_image?0:1).trigger("change"),b.showIntro().val(0==c.show_intro?0:1).trigger("change"),b.showHyperlink().val(0==c.show_link?0:1).trigger("change"),b.populate()},deactivate:function(){},construct:function(b){var c=f.createBlockContainer("post"),b=a.extend({},g.data,b),d=a(b.content);return d.find("[data-post-title]").html(b.title),d.find("[data-post-link]").attr("href",b.url),d.on("click",function(a){a.preventDefault()}),d.find("[data-post-link-preview]").html(b.url),d.find("[data-post-intro]").html(b.intro),b.image?d.find("[data-post-image]").attr("src",b.image):d.find("[data-post-image]").remove(),f.content.inside(c).append(d),c.data("block",b),c
},reconstruct:function(a){{var b=f.getBlockContent(a);f.data(a)}b.find("[data-post-link]").on("click",function(a){a.preventDefault()})},deconstruct:function(a){var c=b.wrapper.inside(a),d=c.parent();return c.children().appendTo(d),c.remove(),a},refocus:function(a){var c=b.wrapper.inside(a),d=b.lastParagraph.inside(a);c.focus(),e.editor.caret.setEnd(d)},reset:function(a){a=f.getBlockContent(a),a.html(g.content)},populate:function(){},recover:function(){},revert:function(){},toText:function(a){var a=f.getBlockContent(a);
return a.text()},toHTML:function(a){{var a=f.getBlockContent(a),c=a.clone();b.deconstruct(c).html()}return b.deconstruct(c).html()},toData:function(a){var c=f.data(a);return c.content=b.toHTML(a),c},"{showImage} change":function(a){var d=f.getBlockContent(h),e=0==a.val()?!1:!0,g=f.data(h);return g.show_image=e,e?(b.mediaPreview.inside(d).show(),void 0):(b.mediaPreview.inside(d).hide(),void 0)},"{showIntro} change":function(a){var d=f.getBlockContent(h),e=0==a.val()?!1:!0,g=f.data(h);return g.show_intro=e,e?(b.introPreview.inside(d).show(),void 0):(b.introPreview.inside(d).hide(),void 0)
},"{showHyperlink} change":function(a){var d=f.getBlockContent(h),e=0==a.val()?!1:!0,g=f.data(h);return g.show_link=e,e?(b.linkPreview.inside(d).show(),void 0):(b.linkPreview.inside(d).hide(),void 0)}}}),b.resolve()}),EasyBlog.module("composer/blocks/handlers/quotes",function(a){var b=this;EasyBlog.Controller("Composer.Blocks.Handlers.Quotes",{defaultOptions:{"{styleSelection}":"[data-eb-composer-block-quotes-style] [data-style]","{citation}":"[data-quotes-citation]","{blockquote}":"> blockquote","{cite}":"> blockquote > cite","{text}":"> blockquote > p"}},function(b,c,d,e,f,g,h){return{init:function(){f=b.blocks,e=f.composer,g=c.meta,h=a()
},reconstruct:function(){},deconstruct:function(a){var c=f.getBlockContent(a);return b.text.inside(c).editable(!1),b.cite.inside(c).editable(!1),a},toData:function(a){var b=f.data(a);return b},toText:function(){},toHTML:function(a){var c=a.clone(),d=b.deconstruct(c),e=f.getBlockContent(d);return e.html()},activate:function(a){h=a,b.populate(a)},deactivate:function(){},construct:function(b){var b=a.extend({},c.data,b);return content},refocus:function(a){var c=f.data(a);c.style&&b.setStyle(a,c.style)},reset:function(a){if(!a.hasClass("is-new")){var c=f.getBlockContent(a);
c.html(b.construct())}},populate:function(a){var c=f.data(a);b.styleSelection("[data-style="+c.style+"]").activateClass("active"),b.citation().val(c.citation).trigger("change")},setStyle:function(a,c){f.data(a,"current",c),b.styleSelection().removeClass("selected"),b.styleSelection().where("style",c).addClass("selected");var d=[a,b,c];b.trigger("composerBlockQuotesSetStyle",d),b.trigger("composerBlockChange",d)},previewType:function(a,c){clearTimeout(b.previewTimer);var d=[a,b,c];b.trigger("composerBlockQuotesSetStyle",d),b.trigger("composerBlockChange",d)
},"{styleSelection} mouseover":function(a){var c=a.data("style");b.previewType(h,c)},"{styleSelection} mouseout":function(){clearTimeout(b.previewTimer),b.previewTimer=a.delay(function(){var a=f.data(h).current;a&&b.setStyle(h,a)},50)},"{styleSelection} click":function(a){var c=a.data("style"),d=f.data(h);d.style=c,b.setStyle(h,c)},"{self} composerBlockQuotesSetStyle":function(a,c,d,e,g){clearTimeout(b.previewTimer);var i=f.getBlockContent(h);b.blockquote.inside(i).switchClass(g),b.populate(d)},"{citation} change":function(c){var e=f.data(h),g=1==a(c).val()?1:0,i=g?!1:!0,j=f.getBlockContent(h);
e.citation=g,b.cite.inside(j).toggleClass("hidden",i)}}}),b.resolve()}),EasyBlog.module("composer/blocks/handlers/readmore",function(a){var b=this;EasyBlog.Controller("Composer.Blocks.Handlers.Readmore",{defaultOptions:{}},function(b,c,d,e,f,g,h){return{init:function(){f=b.blocks,e=f.composer,g=c.meta,h=a()},toData:function(a){var b=f.data(a);return b},toText:function(){},toHTML:function(){var c=a.create("hr");return c.attr("id","system-readmore"),c.toHTML()},deactivate:function(){},activate:function(a){h=a,b.populate(a)
},deconstruct:function(){},construct:function(){},reconstruct:function(a){var d=(f.data(a),f.getBlockContent(a));b.hideMenu(),d.html(g.html)},refocus:function(){},reset:function(){},populate:function(){},showMenu:function(){var a=f.menu().where("type","readmore");a.removeClass("hide")},hideMenu:function(){var a=f.menu().where("type","readmore");a.addClass("hide")},"{self} composerBlockAdd":function(a,c,d){var e=f.getBlockType(d);"readmore"==e&&b.hideMenu()},"{self} composerBlockRemove":function(a,c,d){var e=f.getBlockType(d);
"readmore"==e&&b.showMenu()}}}),b.resolve()}),EasyBlog.module("composer/blocks/handlers/rule",function(a){var b=this;EasyBlog.Controller("Composer.Blocks.Handlers.Rule",{defaultOptions:{"{rule}":"hr","{styleSelection}":"[data-eb-composer-rule-style] [data-style]"}},function(b,c,d,e,f,g,h){return{init:function(){f=b.blocks,e=f.composer,g=c.meta,h=a()},activate:function(a){h=a,b.populate(a)},construct:function(b){var b=a.extend({},c.data,b),d=a("<hr/>");return d},toText:function(){},toData:function(a){var b=f.data(a);
return b},toHTML:function(a){var c=(f.data(a),f.getBlockContent(a));return c.html()},reconstruct:function(a){f.data(a)},refocus:function(a){var c=f.data(a);c.style&&b.setStyle(a,c.style)},reset:function(a){var c=f.getBlockContent(a);c.html(b.construct())},populate:function(a){var c=f.data(a);b.styleSelection("[data-style="+c.style+"]").activateClass("active")},setStyle:function(a,c){f.data(a,"current",c),b.styleSelection().removeClass("selected"),b.styleSelection().where("style",c).addClass("selected");var d=[a,b,c];
b.trigger("composerBlockRuleSetStyle",d),b.trigger("composerBlockChange",d)},previewType:function(a,c){clearTimeout(b.previewTimer);var d=[a,b,c];b.trigger("composerBlockRuleSetStyle",d),b.trigger("composerBlockChange",d)},"{styleSelection} mouseover":function(a){var c=a.data("style");b.previewType(h,c)},"{styleSelection} mouseout":function(){clearTimeout(b.previewTimer),b.previewTimer=a.delay(function(){var a=f.data(h).current;a&&b.setStyle(h,a)},50)},"{styleSelection} click":function(a){var c=a.data("style"),d=f.data(h);
d.style=c,b.setStyle(h,c),b.refocus(h)},"{self} composerBlockRuleSetStyle":function(a,c,d,e,g){clearTimeout(b.previewTimer);var h=f.getBlockContent(d);b.rule.inside(h).switchClass(g),b.populate(d)}}}),b.resolve()}),EasyBlog.module("composer/blocks/handlers/slideshare",function(a){var b=this;EasyBlog.Controller("Composer.Blocks.Handlers.Slideshare",{defaultOptions:a.extend({"{form}":"> [data-slideshare-form]","{insert}":"[data-slideshare-insert]","{source}":"[data-slideshare-source]","{loader}":"> [data-slideshare-loader]","{preview}":"> [data-slideshare-preview]","{fsSource}":"[data-fs-slideshare-source]","{fsUpdate}":"[data-fs-slideshare-update]","{errorMessage}":"[data-slideshare-error]"},EBD.selectors)},function(b,c,d,e,f,g,h){return{init:function(){f=b.blocks,e=f.composer,g=c.meta,h=a()
},toText:function(a){var b=f.data(a);return b.url},toData:function(a){var b=f.data(a);return b},toEditableHTML:function(){return""},toHTML:function(a){var b=f.data(a);return b.embed},activate:function(a){h=a,b.populate(a)},deactivate:function(){},construct:function(){},reconstruct:function(c){var d=f.data(c),e=c.data("overlay"),h=f.getBlockContent(c);d.embed&&!e&&b.setOverlay(c,d.embed),d.embed||h.html(a(g.html)),c.find(b.source.selector).off("paste").on("paste",function(a){a.stopPropagation()})},deconstruct:function(a){var c=f.getBlockContent(a);
return b.form.inside(c).remove(),b.loader.inside(c).remove(),a},refocus:function(){},reset:function(){},populate:function(a){var c=f.data(a);b.fsSource().val(c.url)},loading:function(){var a=f.getBlockContent(h);b.isLoading?(b.loader.inside(a).addClass("hidden"),b.form.inside(a).removeClass("hidden"),b.isLoading=!1):(b.loader.inside(a).removeClass("hidden"),b.form.inside(a).addClass("hidden"),b.isLoading=!0)},setOverlay:function(a,b){var c=a.data("overlay");if(!c){c=e.document.overlay.create(a);var d=f.getBlockContent(a);
return c.placeholder().css("height","600px").appendTo(d),c.element().append(b),c.attach(),a.data("overlay",c),void 0}c.element().empty(),c.element().append(b)},isUrlValid:function(a){if(""==a)return!1;var b=/^http:\/\/www\.slideshare\.net\/(.*)$/,c=b.test(a);return c},crawl:function(a,c){var d=f.getBlockContent(a),e=f.data(a);if(!b.isUrlValid(c))return b.errorMessage().removeClass("hide"),!1;var g=a.data("overlay");g&&g.element().empty(),b.loading(),EasyBlog.ajax("site/views/crawler/crawl",{url:c}).done(function(d){var f=d[c];
e.url=c,e.embed=f.oembed.html,b.setOverlay(a,e.embed)}).fail(function(a){b.errorMessage().removeClass("hide").html(a)}).always(function(){b.loading(),b.form.inside(d).addClass("hidden")})},"{insert} click":function(a){if(h.length<1){var c=b.block.of(a);f.activateBlock(c)}{var d=f.getBlockContent(h),e=b.source.inside(d).val();f.data(h)}b.crawl(h,e),b.fsSource().val(e)},"{fsUpdate} click":function(){{var a=b.fsSource().val();f.data(h)}b.crawl(h,a)}}}),b.resolve()}),EasyBlog.module("composer/blocks/handlers/soundcloud",function(a){var b=this;
EasyBlog.Controller("Composer.Blocks.Handlers.Soundcloud",{defaultOptions:a.extend({"{form}":"> [data-soundcloud-form]","{insert}":"[data-soundcloud-insert]","{source}":"[data-soundcloud-source]","{loader}":"> [data-soundcloud-loader]","{preview}":"> [data-soundcloud-preview]","{fsSource}":"[data-fs-soundcloud-source]","{fsUpdate}":"[data-fs-soundcloud-update]","{errorMessage}":"[data-soundcloud-error]"},EBD.selectors)},function(b,c,d,e,f,g,h){return{init:function(){f=b.blocks,e=f.composer,g=c.meta,h=a()},toText:function(a){var b=f.data(a);
return b.url},toData:function(a){var b=f.data(a);return b},toEditableHTML:function(){return""},toHTML:function(a){var b=f.data(a);return b.embed},normalize:function(b){return a.extend({},g.data,b)},activate:function(a){h=a,b.populate(a)},deactivate:function(){},construct:function(){},reconstruct:function(c){var d=f.data(c),e=c.data("overlay"),h=f.getBlockContent(c);d.embed&&!e&&b.setOverlay(c,d.embed),d.embed||h.html(a(g.html)),c.find(b.source.selector).off("paste").on("paste",function(a){a.stopPropagation()
})},deconstruct:function(a){var c=f.getBlockContent(a);return b.form.inside(c).remove(),b.loader.inside(c).remove(),a},refocus:function(){},reset:function(){},populate:function(a){var c=f.data(a);b.fsSource().val(c.url)},isLoading:!1,loading:function(){var a=f.getBlockContent(h);b.isLoading?(b.loader.inside(a).addClass("hidden"),b.form.inside(a).removeClass("hidden"),b.isLoading=!1):(b.loader.inside(a).removeClass("hidden"),b.form.inside(a).addClass("hidden"),b.isLoading=!0)},setOverlay:function(a,b){var c=a.data("overlay"),d=f.getBlockContent(a);
c?(c.element().empty(),c.element().append(b)):(c=e.document.overlay.create(a),c.placeholder().css("height","350px").appendTo(d),c.element().append(b),c.attach()),a.data("overlay",c)},isUrlValid:function(a){if(""==a)return!1;var b=/^https:\/\/soundcloud\.com\/(.*)$/,c=b.test(a);return c},crawl:function(a,c){var d=f.data(a),e=f.getBlockContent(a);if(!b.isUrlValid(c))return b.errorMessage().removeClass("hide"),!1;var g=a.data("overlay");g&&g.element().empty(),b.loading(),EasyBlog.ajax("site/views/crawler/crawl",{url:c}).done(function(e){var f=e[c];
d.url=c,d.embed=f.oembed.html,b.setOverlay(a,d.embed)}).fail(function(a){b.errorMessage().removeClass("hide").html(a)}).always(function(){b.loading(),b.form.inside(e).addClass("hidden")})},"{insert} click":function(a){if(h.length<1){var c=b.block.of(a);f.activateBlock(c)}var d=f.getBlockContent(h),e=b.source.inside(d).val();b.fsSource().val(e),b.crawl(h,e)},"{fsUpdate} click":function(){var a=b.fsSource().val();b.crawl(h,a)}}}),b.resolve()}),EasyBlog.module("composer/blocks/handlers/spotify",function(a){var b=this;
EasyBlog.Controller("Composer.Blocks.Handlers.Spotify",{defaultOptions:a.extend({"{form}":"> [data-spotify-form]","{insert}":"[data-spotify-insert]","{source}":"[data-spotify-source]","{loader}":"> [data-spotify-loader]","{errorMessage}":"[data-spotify-error]","{preview}":"> [data-spotify-preview]","{fsSource}":"[data-fs-spotify-source]","{fsRefreshButton}":"[data-fs-spotify-refresh]"},EBD.selectors)},function(b,c,d,e,f,g,h){return{init:function(){f=b.blocks,e=f.composer,g=c.meta,h=a()},toData:function(a){var b=f.data(a);
return b},toText:function(a){var b=f.data(a);return b.url},toEditableHTML:function(){return""},toHTML:function(a){var b=f.data(a);return b.embed},activate:function(a){h=a,b.populate(a)},deactivate:function(){},construct:function(){},reconstruct:function(c){var d=f.data(c),e=c.data("overlay"),h=f.getBlockContent(c);d.embed&&!e&&b.setOverlay(c,d.embed),d.embed||h.html(a(g.html)),c.find(b.source.selector).off("paste").on("paste",function(a){a.stopPropagation()})},deconstruct:function(a){var c=f.getBlockContent(a);
return b.form.inside(c).remove(),b.loader.inside(c).remove(),a},refocus:function(){},reset:function(){},populate:function(a){var c=f.data(a);b.fsSource().val(c.url)},isLoading:!1,loading:function(){var a=f.getBlockContent(h);b.isLoading?(b.loader.inside(a).addClass("hidden"),b.form.inside(a).removeClass("hidden"),b.isLoading=!1):(b.loader.inside(a).removeClass("hidden"),b.form.inside(a).addClass("hidden"),b.isLoading=!0)},setOverlay:function(a,b){var c=a.data("overlay");if(c)c.element().empty(),c.element().append(b);
else{c=e.document.overlay.create(a);var d=f.getBlockContent(a);c.placeholder().css("height","400px").appendTo(d),c.element().append(b),c.attach()}a.data("overlay",c)},showForm:function(a){var c=f.getBlockContent(a);b.form.inside(c).removeClass("hidden")},hideForm:function(a){var c=f.getBlockContent(a);b.form.inside(c).addClass("hidden")},crawl:function(a,c){var e=(f.getBlockContent(a),f.data(a));if(!b.isUrlValid(c))return b.errorMessage().removeClass("hide"),!1;var g=a.data("overlay");g&&g.element().empty(),b.loading(),EasyBlog.ajax("site/views/crawler/crawl",{url:c}).done(function(d){b.loading();
var f=d[c];e.url=c,e.embed=f.oembed.html,b.hideForm(a),b.setOverlay(a,e.embed)}).fail(function(a){b.loading(),b.errorMessage().html(a).removeClass("hide")})},isUrlValid:function(a){if(""==a)return!1;var b=/^http(s):\/\/open\.spotify\.com\/(track|artist|album)\/(.*)$/,c=b.test(a);return c},"{insert} click":function(a){if(h.length<1){var c=b.block.of(a);f.activateBlock(c)}var d=f.getBlockContent(h),e=b.source.inside(d).val();b.fsSource().val(e),b.crawl(h,e)},"{fsRefreshButton} click":function(){var a=b.fsSource().val();
b.crawl(h,a)}}}),b.resolve()}),EasyBlog.module("composer/blocks/handlers/table",function(a){var b=this;EasyBlog.Controller("Composer.Blocks.Handlers.Table",{defaultOptions:{"{tableContainer}":"> .table-container","{table}":"table","{row}":"tr","{cell}":"td","{cellContent}":"td div[contenteditable]","{loading}":"[data-table-loading]","{tableStriped}":"[data-table-striped]","{tableBordered}":"[data-table-bordered]","{tableHover}":"[data-table-hover]","{tableCondensed}":"[data-table-condensed]","{tableRowFieldset}":"[data-table-rows]","{addRow}":"[data-table-rows-add]","{removeRow}":"[data-table-rows-remove]","{tableColumns}":"[data-table-columns]","{tableColumnsAdd}":"[data-table-columns-add]","{tableColumnsRemove}":"[data-table-columns-remove]"}},function(b,c,d,e,f,g,h){return{init:function(){f=b.blocks,e=f.composer,g=c.meta,h=a()
},activate:function(c){h=c,b.populate(c),c.on("keydown.tab",b.cellContent.selector,function(c){if(9==c.which){var d=a(c.target).parent(),f=b.cell.inside(h),g=f.eq(Math.min(f.index(d)+1,f.length-1)).find("> div[contenteditable]");e.editor.caret.setAfter(g[0].lastChild),c.stopPropagation()}})},deactivate:function(a){a.off("keydown.tab")},construct:function(){return content},deconstruct:function(){},reconstruct:function(){},refocus:function(a){var c=f.getBlockContent(a),d=a.data("lastFocused")||b.cell.inside(c).filter(":first");
d.focus()},reset:function(){},populate:function(a){var c=f.data(a);b.tableStriped().val(c.striped).trigger("change"),b.tableBordered().val(c.bordered).trigger("change"),b.tableHover().val(c.hover).trigger("change"),b.tableCondensed().val(c.condensed).trigger("change"),b.tableRowFieldset().val(c.rows),b.tableColumns().val(c.columns)},toHTML:function(c){b.loader(!1);var d=f.getBlockContent(c),e=b.table.inside(d).clone();return a.each(e.find("td"),function(b,c){c=a(c),c.html(c.find("div[contenteditable]").html())
}),e[0].outerHTML},toData:function(a){var b=f.data(a);return b},toText:function(a){var c=f.getBlockContent(a);return b.table.inside(c).text()},"{tableStriped} change":function(a){var d=f.getBlockContent(h),e=a.val();b.table.inside(d).toggleClass("table-striped",1==e),f.data(h,"striped",1==e?1:0)},"{tableBordered} change":function(a){var d=f.getBlockContent(h),e=a.val();b.table.inside(d).toggleClass("table-bordered",1==e),f.data(h,"bordered",1==e?1:0)},"{tableHover} change":function(a){var d=f.getBlockContent(h),e=a.val();
b.table.inside(d).toggleClass("table-hover",1==e),f.data(h,"hover",1==e?1:0)},"{tableCondensed} change":function(a){var d=f.getBlockContent(h),e=a.val();b.table.inside(d).toggleClass("table-condensed",1==e),f.data(h,"condensed",1==e?1:0)},loader:function(c){var d=f.getBlockContent(h),e=b.tableContainer.inside(d);if(c===!1)return b.loading.inside(d).remove(),void 0;if(!(b.loading.inside(d).length>0)){var i=(b.table.inside(e),a.create("div").attr("data-table-loading","").css({top:0,left:0,width:"100%",height:"50px",position:"absolute",background:"rgba(0,0,0,0.5)"}).html(a.create("div").css({textAlign:"center",position:"relative",top:"50%",lineHeight:"20px",marginTop:"-10px"}).html('<i class="fa fa-circle-o-notch fa-spin"></i>')));
e.append(i)}},"{tableRowFieldset} change":function(c){var e=f.getBlockContent(h),g=c.val(),i=f.data(h);(isNaN(g)||parseInt(g)<1||a.isEmpty(g))&&c.val(g=1),g=parseInt(g);var j=g-b.row.inside(e).length;if(0!=j){i.rows=g;var k=b.table.inside(e);setTimeout(function(){if(0>j&&b.row.inside(k).slice(j).remove(),j>0){var a=parseInt(b.tableColumns().val()),c=Array(j+1).join("<tr>"+Array(a+1).join('<td><div contenteditable="true">&#8203;</div></td>')+"</tr>");k.append(c)}k.appendTo(e)},50)}},"{tableColumns} change":function(c){var e=f.getBlockContent(h),g=c.val(),i=f.data(h);
(isNaN(g)||parseInt(g)<1||a.isEmpty(g))&&(g=1,c.val(g)),g=parseInt(g);var j=b.row.inside(e).filter(":first-child"),k=g-b.cell.inside(j).length;if(0!=k){i.columns=g;var l=b.table.inside(e);setTimeout(function(){var c=b.row.inside(l);if(0>k&&a.each(c,function(a,c){b.cell.inside(c).slice(k).remove()}),k>0){var d=Array(k+1).join('<td><div contenteditable="true">&#8203;</div></td>');c.append(d)}l.appendTo(e)},50)}},"{addRow} click":function(){var e=(f.getBlockContent(h),parseInt(b.tableRowFieldset().val())+1);b.tableRowFieldset().val(e).trigger("change")
},"{removeRow} click":function(){var e=(f.getBlockContent(h),Math.max(parseInt(b.tableRowFieldset().val())-1,1));b.tableRowFieldset().val(e).trigger("change")},"{tableColumnsAdd} click":function(){var d=parseInt(b.tableColumns().val())+1;b.tableColumns().val(d).trigger("change")},"{tableColumnsRemove} click":function(){b.tableColumns().val(Math.max(parseInt(b.tableColumns().val())-1,1)).trigger("change")}}}),b.resolve()}),EasyBlog.module("composer/blocks/handlers/tabs",function(a){var b=this;EasyBlog.Controller("Composer.Blocks.Handlers.Tabs",{defaultOptions:{"{tabHeader}":".nav-tabs","{tabHeaderListItem}":".nav-tabs > li","{tabHeaderListItemContent}":".nav-tabs > li a","{tabContent}":".tab-content","{tabPane}":"> .tab-content > .tab-pane","{titleItem}":"[data-tab-header-item]","{control}":"[data-tabs-control]","{controlItemContent}":"[data-tabs-control] [data-listbox-item-content]"}},function(b,c,d,e,f,g,h){return{init:function(){f=b.blocks,e=f.composer,g=c.meta,h=a()
},activate:function(a){h=a,b.populate(a)},deactivate:function(){},construct:function(b){var b=a.extend({},c.data,b);return content},reconstruct:function(){},deconstruct:function(c){return a.each(c.find("[data-tab-wrapper]"),function(d,e){e=a(e);var f=e.parent();f.removeAttr("contenteditable"),e.children().appendTo(f),e.remove(),b.tabHeaderListItemContent.inside(c).eq(d).removeAttr("contenteditable")}),c},refocus:function(a){var c=b.tabPane.inside(a).filter(".active");c.focus()},reset:function(){},recover:function(){},populate:function(a){var c=f.data(a);
b.control().listbox().listbox("populate",c.tabs,function(a,b){a.listboxitem("content",b)})},revert:function(){},toHTML:function(a){var c=a.clone(),d=b.deconstruct(c),e=f.getBlockContent(d);return e.html()},toData:function(a){var b=f.data(a);return b},toText:function(a){var c=a.clone();return b.deconstruct(c).text()},tab:{create:function(){var d=a.uid("tab-"),e='<li><a href="#'+d+'" role="tab" data-bp-toggle="tab" contenteditable="true"></a></li>',g=a("<div></div>",{"class":"tab-pane",id:d}),i=a("<div></div>",{"class":"ebd-nest","data-type":"block","data-tab-wrapper":""}),j=f.constructNestedBlock("text");
i.wrapInner(j),g.wrapInner(i),b.tabContent.inside(h).append(g),b.tabHeader.inside(h).append(e)},remove:function(a){b.tabPane.inside(h).eq(a).remove(),b.tabHeaderListItem.inside(h).eq(a).remove()},focus:function(a){b.tabHeaderListItem.inside(h).eq(a).find("a").tab("show")}},"{tabHeaderListItem} click":function(a){a.find("a").tab("show")},"{tabHeaderListItemContent} keyup":a.debounce(function(a,c){var d=c.keyCode?c.keyCode:c.which;if("13"!=d){var e=a.parents(".nav-tabs > li").index(),g=a.html().replace(/(<br>\s*)+$/,"");
b.control().listbox("getItems").eq(e).listboxitem("content",g),f.data(h).tabs[e].content=g}},250),"{tabHeaderListItemContent} click":function(a,b){b.preventDefault()},"{tabHeaderListItemContent} keydown":function(a,b){var c=b.keyCode?b.keyCode:b.which;"13"==c&&b.preventDefault()},"{control} listboxBeforeAddItem":function(a,c,d){b.tab.create();var e=d.listboxitem("toData");b.tabHeaderListItem.inside(h).filter(":last").find("a").html(e.content)},"{control} listboxAfterAddItem":function(){f.data(h).tabs=b.control().listbox("toData"),1==b.tabContent.inside(h).length&&b.tabHeaderListItem.inside(h).filter(":first").find("a").tab("show")
},"{control} listboxBeforeRemoveItem":function(a,c,d){var e=d.index();b.tab.remove(e)},"{control} listboxAfterRemoveItem":function(){f.data(h).tabs=b.control().listbox("toData"),1==b.tabContent.inside(h).length&&b.tabHeaderListItem.inside(h).filter(":first").find("a").tab("show")},"{control} listboxAfterToggleDefault":function(){f.data(h).tabs=b.control().listbox("toData")},"{controlItemContent} keyup":a.debounce(function(a,c){var d=c.keyCode?c.keyCode:c.which;if("13"!=d){var e=a.parents("[data-listbox-item]"),g=e.index(),i=a.html().replace(/(<br>\s*)+$/,"");
b.tabHeaderListItem.inside(h).eq(g).find("a").html(i),f.data(h).tabs[g].content=i}},250),"{controlItemContent} keypress":function(a,b){var c=b.keyCode?b.keyCode:b.which;"13"==c&&b.preventDefault()}}}),b.resolve()}),EasyBlog.module("composer/blocks/handlers/text",function(a){var b=this;EasyBlog.Controller("Composer.Blocks.Handlers.Text",{defaultOptions:{"{block}":".ebd-block[data-type=text]","{blockWrapper}":"> [data-eb-text-block-wrapper]","{contentWrapper}":"> [data-eb-text-block-wrapper] > [data-eb-text-content-wrapper]","{allContentWrapper}":"[data-eb-text-content-wrapper]","{lastParagraph}":"> p:last"}},function(b,c,d,e,f,g,h){return{init:function(){f=b.blocks,e=f.composer,g=c.meta,h=a()
},activateKeys:function(){a(document).off("keydown.blocks.text")},deactivateKeys:function(){a(document).on("keydown.blocks.text",function(a){var b=a.which;return 33==b||34==b?(a.preventDefault(),!1):!0})},activate:function(a){b.deactivateKeys(),h=a,b.populate()},deactivate:function(){b.activateKeys()},construct:function(){var b=f.createBlock("text"),c=f.getBlockContent(b);return c.html(g.data.content),b},reconstruct:function(c){var d=f.getBlockContent(c),e=b.blockWrapper.inside(d);e.length||(e=a(g.blockWrapper).append(d[0].childNodes).appendTo(d));
var h=b.contentWrapper.inside(d);if(!h.length){var i=[];a.each(e[0].childNodes,function(){a(this).is(EBD.block)||i.push(this)}),h=a(g.contentWrapper).append(i).appendTo(e)}},deconstruct:function(a){var c=f.getBlockContent(a),d=b.contentWrapper.inside(c);if(0==d.length)return a;var e=d[0].childNodes,g=c.find(EBD.immediateNestedBlock);return c.empty().append(g).append(e),a},refocus:function(){},reset:function(){},populate:function(){},recover:function(){},revert:function(){},toText:function(a){var c=a.clone(),d=b.deconstruct(c),e=f.getBlockContent(d).text();
return e},toHTML:function(a){var c=a.clone(),d=b.deconstruct(c),e=f.getBlockContent(d).html();return e},toData:function(){},"{self} composerListFormat":function(c,d,e){var g=f.getBlockType(e);"text"==g&&(b.reconstruct(e),e.find(".redactor-selection-marker").each(function(){var b=a(this);b.find("ul, ol").length&&b.children().insertBefore(b)}))},"{allContentWrapper} mouseup":function(a){var b=f.block.of(a);f.font.populateFontFormatting(b)},"{allContentWrapper} keyup":a.debounce(function(a){var b=f.block.of(a);
f.font.populateFontFormatting(b)},100)}}),b.resolve()}),EasyBlog.module("composer/blocks/handlers/tweet",function(a){var b=this;EasyBlog.Controller("Composer.Blocks.Handlers.Tweet",{defaultOptions:a.extend({"{form}":"> [data-tweet-form]","{insert}":"[data-tweet-insert]","{source}":"[data-tweet-source]","{loader}":"> [data-codepen-loader]","{preview}":"> [data-tweet-preview]","{fsSource}":"[data-fs-tweet-source]","{fsUpdate}":"[data-fs-tweet-update]","{errorMessage}":"[data-tweet-error]"},EBD.selectors)},function(b,c,d,e,f,g,h){return{init:function(){f=b.blocks,e=f.composer,g=c.meta,h=a()
},toData:function(a){var b=f.data(a);return b},toText:function(a){var b=f.data(a);return b.source},toEditableHTML:function(){return""},toHTML:function(a){var b=f.data(a);return'<iframe src="'+b.source+'" />'},activate:function(a){h=a,b.populate(a)},deactivate:function(){},construct:function(){},reconstruct:function(c){var d=f.data(c),e=f.getBlockContent(c),h=c.data("overlay");d.embed&&!h&&b.setOverlay(c,d.embed),d.source||e.html(a(g.html)),c.find(b.source.selector).off("paste").on("paste",function(a){a.stopPropagation()
})},deconstruct:function(){},refocus:function(){},reset:function(){},populate:function(a){f.data(a)},loading:function(){var a=f.getBlockContent(h);b.isLoading?(b.loader.inside(a).addClass("hidden"),b.form.inside(a).removeClass("hidden"),b.isLoading=!1):(b.loader.inside(a).removeClass("hidden"),b.form.inside(a).addClass("hidden"),b.isLoading=!0)},isUrlValid:function(a){if(""==a)return!1;var b=/^https:\/\/twitter\.com\/(.*)\/status\/(.*)$/,c=b.test(a);return c},crawl:function(a,c){var d=f.getBlockContent(a),e=f.data(a);
if(!b.isUrlValid(c))return b.errorMessage().removeClass("hide"),!1;var g=a.data("overlay");g&&g.element().empty(),b.loading(),EasyBlog.ajax("site/views/crawler/crawl",{url:c}).done(function(f){b.loading();var g=f[c];e.url=c,e.embed=g.oembed.html,e.source=c,b.setOverlay(a,e.embed),b.form.inside(d).addClass("hidden")}).fail(function(a){b.loading(),b.errorMessage().html(a).removeClass("hide")}).always(function(){})},setOverlay:function(a,b){var c=f.getBlockContent(a),d=a.data("overlay");d?(d.element().empty(),d.element().append(b)):(d=e.document.overlay.create(a),d.placeholder().css("height","400px").appendTo(c),d.element().append(b),d.attach()),a.data("overlay",d)
},"{insert} click":function(a){if(h.length<1){var c=b.block.of(a);f.activateBlock(c)}var d=f.getBlockContent(h),e=b.source.inside(d).val();b.fsSource().val(e),b.crawl(h,e)},"{fsUpdate} click":function(){{var a=b.fsSource().val();f.data(h)}b.crawl(h,a)}}}),b.resolve()}),EasyBlog.module("composer/blocks/handlers/video",function(a){var b=this,c="view-selectratio",d="view-customratio",e=["video-width","video-height"],f=["numslider","numslider-toggle","numslider-widget","numslider-value","numslider-input","numslider-units","numslider-unit","numslider-current-unit"],g=function(a){return a.replace(/video-/,"")
},h=function(a){return a.toString().match("%")?"%":"px"},i=function(a,b){var c=Math.pow(10,b);return Math.round(a*c)/c},j=ratioDecimal=function(b){if(a.isNumeric(b))return b;var c=b.split(":");return c[0]/c[1]},m=(ratioPercent=function(a,b){return i(100*j(a),2)+(b?"%":0)},ratioPadding=function(a){return i(1/j(a)*100,2)+"%"},function(b){if(b=a.trim(b),/\:/.test(b)){var c=b.split(":");return parseInt(c[0])+":"+parseInt(c[1])}return parseFloat(b)||0});EasyBlog.require().library("plupload2","videojs").done(function(){EasyBlog.Controller("Composer.Blocks.Handlers.Video",{elements:["[data-eb-{file-error}]","[data-eb-video-size-field] [data-eb-{"+f.join("|")+"}]","^videoSizeField .eb-composer-field[data-name={"+e.join("|")+"}]","[data-eb-video-{ratio-button|ratio-label|ratio-customize-button|ratio-cancel-button|ratio-use-custom-button|ratio-cancel-custom-button|alignment-selection|size-field|ratio-selection|ratio-input}]"],defaultOptions:{"{browseButton}":".eb-composer-placeholder-video [data-eb-mm-browse-button]","{placeholder}":"[data-eb-composer-video-placeholder]","{player}":"[data-video-player]","{dropElement}":"[data-plupload-drop-element]","{autoplay}":"[data-video-fieldset-autoplay]","{loop}":"[data-video-fieldset-loop]","{muted}":"[data-video-fieldset-muted]","{controls}":"[data-video-controls]","{videoContainer}":".eb-video","{videoViewport}":".eb-video-viewport","{videoPlayer}":"video","{videoSource}":"source"}},function(b,e,i,k,l,n,o,p,q,r){return{init:function(){l=b.blocks,k=l.composer,n=e.meta,o=a(),q=l.dimensions,r=EasyBlog.MediaManager,a.each(f,function(c,d){var e=a.camelize(d);
b[e].of=a.memoize(function(a){var c=b.getVideoSizeField(a);return b[e].under(c)})});var c={};p=function(d){return a(c[d.data("uid")]||(c[d.data("uid")]=b.videoContainer.inside(d)[0]))},getVideoViewport=a.memoize(function(a){return b.videoViewport.inside(a)},function(a){return a.data("uid")})},normalize:function(b){return a.extend({},n.data,b)},activate:function(a){o=a,b.populate(a)},deactivate:function(){},construct:function(b){var c=l.createBlockContainer("video"),d=l.data(c);return a.extend(d,b),c},constructFromMediaFile:function(a){{var c=a.data("key"),d=r.getUri(c),e=l.createBlockContainer("video");
l.getBlockContent(e),l.data(e)}return e.addClass("is-loading"),r.getMedia(d).done(function(a){setTimeout(function(){var c=a.meta,d=c.url;b.createPlayer(e,d)},250)}).fail(function(){}).always(function(){e.removeClass("is-loading")}),e},reconstruct:function(a){a.editable(!1);var c=l.data(a);if(b.hasVideo(a)){var c=l.data(a);b.createPlayer(a,c.url)}else{var d=b.placeholder.inside(a);d.length>0&&EasyBlog.MediaManager.uploader.register(d)}},deconstruct:function(){},refocus:function(){},reset:function(){},populate:function(a){var c=b.hasVideoContainer(a),d=l.panel.fieldgroup.get("video");
d.toggleClass("is-new",!c),c&&(b.populateVideoSize(a),b.populateVideoControls(a))},toData:function(a){var b=l.data(a),c=p(a);if(c.length>0){var d=c[0].style;b.width=d.width,b.height=d.height}return b},toText:function(){},toHTML:function(){},toLegacyShortcode:function(a,c){var d="[embed=video][/embed]",e=b.getVideoSize(c,"width"),f=b.getVideoSize(c,"height"),g=l.data(c),h={width:e,height:f,uri:a.uri,autoplay:g.autoplay?"1":"0",muted:g.muted?"1":"0",loop:g.loop?"1":"0"},d="[embed=video]"+JSON.stringify(h)+"[/embed]";
return d},toEditableHTML:function(){},"{placeholder} mediaUploaderFilesAdded":function(a,b,c,d){EasyBlog.MediaManager.uploader.addItem(d[0],a)},"{placeholder} mediaUploaderFileUploaded":function(a,c,d,e,f){var g=f.response,h=g.media,i=h.meta,j=l.block.of(a);setTimeout(function(){b.createPlayer(j,i.url),j.hasClass("active")&&b.populate(j)},600)},"{placeholder} mediaUploaderFileError":function(c,d,e,f){f.code==a.plupload2.FILE_EXTENSION_ERROR&&b.fileError.inside(o).removeClass("hide")},createPlayer:function(c,d){var e=l.data(c),f=e.uid||(e.uid=a.uid("video-")),g=a(n.player).clone(),h=b.videoPlayer.inside(g),i=b.videoSource.inside(g);
h.attr("id",f),i.attr("src",d),e.url=d,e.width&&g.css("width",e.width),e.height&&g.css("height",e.height),q.toFluidWidth(c),q.toFluidHeight(c),content=l.getBlockContent(c),l.getBlockContent(c).empty().append(g),videojs(f,{controls:!0,autoplay:!1},function(){this.muted(e.muted)})},populateVideoControls:function(a){var c=l.data(a);b.autoplay().val(c.autoplay?1:0).trigger("change"),b.loop().val(c.loop?1:0).trigger("change"),b.muted().val(c.muted?1:0).trigger("change")},"{muted} change":function(a){var c=l.data(o);
c.muted=1==a.val()?!0:!1},"{autoplay} change":function(a){var c=l.data(o);c.autoplay=1==a.val()?!0:!1},"{loop} change":function(a){var c=l.data(o);c.loop=1==a.val()?!0:!1},populateVideoSize:function(a,c){for(var d,c=c||["width","height"];d=c.shift();){var e="width"==d?b.getVideoWidth(a):b.getVideoHeight(a),f=parseFloat(e),g=h(e);if(b.resizingFromSlider!==d){if("px"==g)var i={start:f,step:1,range:{min:1,max:1600},pips:{mode:"values",values:[64,320,640,960,1280,1600],density:4}};if("%"==g)var i={start:f,step:1,range:{min:1,max:100},pips:{mode:"values",values:[0,20,40,60,80,100],density:5}};
b.numsliderWidget.of(d).find(".noUi-pips").remove().end().noUiSlider(i,!0).noUiSlider_pips(i.pips)}b.numsliderInput.of(d).val(Math.round(f)),b.numsliderCurrentUnit.of(d).html(g),b.numsliderUnit.of(d).removeClass("active").where("unit",'"'+g+'"').addClass("active")}b.populateVideoRatio(a),b.populateVideoAlignment(a)},getVideoWidth:function(a){var b=p(a),c=b[0].style;if(l.isNestedBlock(a)){var d=a[0].style.width;if(/%/.test(d))return d}return c.width||b.css("width")},getVideoHeight:function(a){var b=p(a),c=b[0].style;
return c.height||b.css("height")},getVideoSize:function(a,c){return"width"==c?b.getVideoWidth(a):"height"==c?b.getVideoHeight(a):void 0},getVideoComputedWidth:function(a){return p(a).width()},getVideoComputedHeight:function(a){return p(a).outerHeight()},setVideoWidth:function(a,c){{var d=p(a),f=(getVideoViewport(a),b.getVideoRatio(a)),g=h(c);b.getVideoComputedHeight(a)}d.toggleClass("is-responsive","%"==g),l.isNestedBlock(a)?("%"==g&&(a.css("width",c),d.css("width","")),"px"==g&&(a.css("width","auto"),d.css("width",c))):d.css("width",c),0==f&&"%"==g&&(f=null),b.adjustVideoRatio(a,f)
},setVideoFluidWidth:function(a,b){var c=p(a);if(l.isNestedBlock(a))q.toAutoWidth(a),c.css("width",b),q.toFluidWidth(a),c.css("width","");else{var d=l.getBlockContent(a),b=b/d.width()*100+"%";c.css("width",b)}},setVideoSize:function(a,c,d){"width"==c&&b.setVideoWidth(a,d),"height"==c&&b.setVideoHeight(a,d)},updateVideoSize:function(a,c,d){b.setVideoSize(a,c,d),b.populateVideoSize(a)},setVideoHeight:function(a,c){var d=p(a),e=getVideoViewport(a),f=b.getVideoRatio(a);if(b.isFluidVideo(a)){if(0==f){var g=b.getVideoComputedWidth(a),c=parseFloat(c);
f=g/c}else{var g=parseFloat(c)*f;b.setVideoFluidWidth(a,g)}d.css("height",""),e.css("padding-top",ratioPadding(f))}else if(d.css("height",c),0!==f){var g=parseFloat(c)*ratioDecimal(f);d.css("width",g),e.css("padding-top","")}},setVideoUnit:function(a,c,d){if("width"===c){{var f=(p(a),b.getVideoWidth(a)),g=b.getVideoComputedWidth(a);b.getVideoComputedHeight(a)}"px"==d&&/%/.test(f)&&b.setVideoWidth(a,g),"%"==d&&/px/.test(f)&&b.setVideoFluidWidth(a,g)}},getVideoUnit:function(a,c){var d=b.getVideoSize(a,c);return h(d)
},updateVideoUnit:function(a,c,d){b.setVideoUnit(a,c,d),b.populateVideoSize(a)},handleNumsliderWidget:function(a,c){var d=b.getVideoSizeProp(a),e=b.getVideoSizeUnit(d),c=Math.round(c)+e;b.resizingFromSlider=d,b.updateVideoSize(o,d,c),b.resizingFromSlider=null},"{numsliderWidget} nouislide":function(a,c,d){b.handleNumsliderWidget(a,d)},"{numsliderWidget} set":function(a,c,d){b.handleNumsliderWidget(a,d)},"{numsliderInput} input":function(c){function d(a){c.on("blur.numslider",function(){c.val(a)})}c.off("blur.numslider");
var e=b.getVideoSizeProp(c),f=b.getVideoSize(o,e),g=parseFloat(f),i=c.val(),j=h(f),k=i+j;return a.isNumeric(i)?(b.updateVideoSize(o,e,k),void 0):d(g)},"{numsliderUnit} click":function(a){var c=b.getVideoSizeProp(a),d=a.data("unit");b.updateVideoUnit(o,c,d)},"{self} composerBlockResizeStart":function(a,c,d){if("video"===l.getBlockType(d)){var f=b.getVideoComputedWidth(d),g=b.getVideoComputedHeight(d);d.data("initialWidth",f),d.data("initialHeight",g)}},"{self} composerBlockBeforeResize":function(a,c,d,e){function q(){b.isFluidVideo(d)?b.setVideoFluidWidth(d,n):b.setVideoWidth(d,n)
}function r(){b.setVideoHeight(d,o)}if("video"===l.getBlockType(d)&&b.hasVideoContainer(d)){c.preventDefault();var g=(d.data("initialImageSize"),e.originalSize),h=e.size,i=h.width-g.width,j=h.height-g.height,k=d.data("initialWidth"),m=d.data("initialHeight"),n=k+i,o=m+j,p=b.getVideoRatio(d);0==p?(0!==i&&q(),0!==j&&r()):0==i?0!==j&&r():q(),b.populateVideoSize(d)}},setVideoRatio:function(a,c){var d=l.data(a);d.ratio=c,b.adjustVideoRatio(a,c)},adjustVideoRatio:function(a,c){var d=p(a),e=getVideoViewport(a),f=b.getVideoComputedWidth(a),g=b.getVideoComputedHeight(a),h="",i="";
null==c&&(c=f/g),b.isFluidVideo(a)?i=ratioPadding(c):h=0==c?g:f/ratioDecimal(c),d.css("height",h),e.css("padding-top",i)},populateVideoRatio:function(a){var c=l.data(a),d=c.ratio;b.ratioButton().toggleClass("ratio-unlocked",0==d),b.ratioLabel().html(d)},updateVideoRatio:function(a,c){b.setVideoRatio(a,c),b.populateVideoRatio(a)},getVideoRatio:function(a){{var c=l.data(a);p(a)}if(void 0===c.ratio){var e=b.getVideoComputedWidth(a),f=b.getVideoComputedHeight(a);c.ratio=e/f}return j(c.ratio)},"{browseButton} mediaSelect":function(a,c,d){var e=l.block.of(a);
if("video"==d.meta.type){var f=d.meta,g=k.document,h=g.isLegacy();h?(content=b.toLegacyHTML(e),g.insertContent(content)):b.createPlayer(e,f.url)}},"{self} mediaInsert":function(a,c,d,e){if("video"==d.meta.type){var f=k.document,g=f.isLegacy();if(g)content=b.toLegacyShortcode(d.meta,e),f.insertContent(content);else{var e=(l.data(e),l.constructBlock("video",{url:d.meta.url}));l.addBlock(e),l.activateBlock(e)}}},"{self} mediaInfoDestroy":function(a,c,d,e){if(!e||"video"==e.meta.type){var f=b.videoPlayer.inside(d),g=f.attr("id");
videojs(g).dispose()}},"{ratioButton} click":function(){b.sizeField().switchClass(c)},"{ratioCustomizeButton} click":function(){b.sizeField().switchClass(d)},"{ratioCancelButton} click":function(){b.sizeField().removeClass(c)},"{ratioCancelCustomButton} click":function(){b.sizeField().switchClass(c)},"{ratioOkCustomButton} click":function(){b.sizeField().removeClass(d)},"{ratioUseCustomButton} click":function(){var c=b.ratioInput(),e=m(c.val());0!=e&&(b.updateVideoRatio(o,e),b.ratioSelection().removeClass("active"),b.sizeField().removeClass(d))
},"{ratioSelection} click":function(a){b.ratioSelection().removeClass("active"),a.addClass("active"),b.sizeField().removeClass(c);var d=a.data("value");b.updateVideoRatio(o,d)},"{alignmentSelection} change":function(a){var b=a.val();l.font.setFontFormatting(o,"align"+b)},populateVideoAlignment:function(a){if(l.isNestedBlock(a))return b.sizeField().addClass("no-alignment"),void 0;var c=l.getBlockContent(a),d=b.getVideoComputedWidth(a),e=d<c.width();b.sizeField().toggleClass("no-alignment",!e);var f=a.css("text-align");
b.alignmentSelection().val(f)},getVideoSizeField:function(c){var d=b["videoSizeFieldVideo"+a.capitalize(c)]();return d},getVideoSizeProp:function(a){var c=a.closest(b.numslider.selector),d=g(c.data("name"));return d},getVideoSizeUnit:function(c){var d=b.getVideoSizeField(c);return a.trim(b.numsliderCurrentUnit.under(d).text())},isFluidVideo:function(a){var b=p(a);return b.hasClass("is-responsive")},hasVideo:function(a){var b=l.data(a);return!!b.url},hasVideoContainer:function(a){return b.videoContainer.inside(a).length>0
}}}),b.resolve()})}),EasyBlog.module("composer/blocks/mobile",function(a){var b=this;EasyBlog.Controller("Composer.Blocks.Mobile",{defaultOptions:a.extend({"{blipp}":"[data-eb-blipp]","{viewport}":".eb-composer-viewport","{actionBar}":"[data-eb-composer-actions]"},EBD.selectors)},function(b,c,d,e,f){return{init:function(){f=b.blocks,e=f.composer},"{blipp} mousedown":function(c,d){d.stopPropagation(),d.preventDefault();var g;a(document).off("mousemove.blip mouseup.blip").on("mousemove.blip",function(d){var e=a.getPointerPosition(d),f=b.viewport(),h=f.offset(),i=30,j=f.width()-10,k=f.height()-30,l=h.left+30,m=e.x-h.left,n=e.y-h.top;
c.css("left",m),c.css("top",n),g=null,e.y<i&&(g="addBlock"),e.y>k&&(g="removeBlock"),e.x<l&&(g="viewBlockTree"),e.x>j&&(g="moveBlock")}).on("mouseup.blip",function(){return a(document).off("mousemove.blip"),b.actionBar().show(),e.blocks.droppable.destroyDropzones(),e.sidebar.deactivate("blocks"),e.sidebar.deactivate("explorer"),"addBlock"==g?(e.sidebar.activate("blocks"),e.blocks.droppable.populateDropzones(),b.trigger("ComposerMobileAddBlock"),void 0):"moveBlock"==g?(e.blocks.droppable.populateDropzones(),f.getAllBlocks().on("click.tapremove",function(b){b.stopPropagation();
var c=a(this);c.addClass("hide")}),void 0):"removeBlock"==g?(b.actionBar().hide(),f.getAllBlocks().on("click.tapremove",function(b){b.stopPropagation();var c=a(this);f.removeBlock(c)}),b.trigger("ComposerMobileRemoveBlock"),void 0):"viewBlockTree"==g?(EasyBlog.Composer.sidebar.activate("explorer"),b.trigger("ComposerMobileViewTree"),void 0):void 0})}}}),b.resolve()}),EasyBlog.module("composer/blocks/nestable",function(a){var b=this,c="is-nested";EasyBlog.require().library("ui/sortable").done(function(){EasyBlog.Controller("Composer.Blocks.Nestable",{defaultOptions:a.extend({},EBD.selectors)},function(b,d,e,f,g){return{init:function(){g=b.blocks,f=b.blocks.composer,currentNest=a()
},enable:function(){b.nest().each(function(){var c=a(this);b.initNestable(c)})},disable:function(){b.nest().each(function(){var c=a(this);b.destroyNestable(c)})},initNestable:function(a){a.hasClass("ui-sortable")||a.sortable({items:EBD.childBlock,connectWith:EBD.root+", "+EBD.nest,helper:"clone",appendTo:f.document.ghosts(),placeholder:"ebd-block is-placeholder is-nested",tolerance:"pointer",refreshPositions:!0,handle:EBD.immediateBlockSortHandle})},destroyNestable:function(a){a.hasClass("ui-sortable")&&a.sortable("destroy")
},"{self} composerBlockMechanicsChange":function(a,c,d){"sortable"==d?b.enable():b.disable()},isBlockNest:function(a){return"block"==a.data("type")},isContentNest:function(a){return"content"==a.data("type")},"{self} composerBlockCreate":function(){},"{self} composerBlockInit":function(c,d,e){e.is(EBD.nestableBlock)&&"sortable"!=!g.getMechanics()&&e.find(EBD.nest).each(function(){var c=a(this);b.initNestable(c)})},disableEditableNest:function(a){a.editable()&&(a.editable(!1),a.data("editable-nest",!0))},enableEditableNest:function(a){a.data("editable-nest")&&(a.editable(!0),a.removeData("editable-nest"))
},"{block} mouseover":function(a,c){if(!c.nestHandled){if(a.is(EBD.nestedBlock)){var d=b.nest.of(EBD.nestedBlock);b.disableEditableNest(d)}else{var d=b.nest.inside(a);if(d.length<1)return;b.enableEditableNest(d)}c.nestHandled=!0}},"{block} mouseout":function(a){if(a.is(EBD.nestedBlock)){var d=b.nest.of(EBD.nestedBlock);b.enableEditableNest(d)}},snap:function(a,d,e,f){if(b.isBlockNest(e))return f.addClass(c),void 0;var g=e.offset(),h=e.width(),i=g.left+h/2,j=b.position(e,i>a?"left":"right");f.addClass(c).switchClass("nest-"+j),e.data("snappedPosition",j)
},unsnap:function(a){a.removeClass(c).removeClass(function(a,b){return(b.match(/(^|\s)nest-\S+/g)||[]).join(" ")})},positions:function(a){return(a.data("positions")||"left,right").split(",")},availablePositions:function(c){var d=b.positions(c);return c.find(EBD.childBlock+":not(.is-sort-item)").each(function(){var c=b.extractPosition(a(this).attr("class"));c&&a.pull(d,c)}),d},extractPosition:function(b){return b instanceof a&&(b=b.attr("class")),((b.match(/nest-\w+/g)||[])[0]||"").split("nest-")[1]},position:function(c,d){var e=b.availablePositions(c);
return a.indexOf(e,d)>-1?d:e[0]},setTargetNest:function(a){b.clearTargetNest(),g.over(a)},unsetTargetNest:function(a){g.out(a)},clearTargetNest:function(){b.nest().each(function(){var b=a(this);g.out(b)})},trackNest:function(c,d){a(document).off("mousemove.nestable").on("mousemove.nestable",function(a){b.snap(a.pageX,a.pageY,c,d)})},untrackNest:function(){a(document).off("mousemove.nestable")},"{self} composerBlockBeforeDrop":function(a,d,e){var f=e.closest(EBD.nest),h=b.extractPosition(e);if(e.toggleClass(c,f.length>0),b.isContentNest(f)){var i=b.position(f,f.data("snappedPosition"));
e.switchClass("nest-"+i),e.hasClass("is-new")&&g.dimensions.toFluidWidth(e),h&&i!==h?b.trigger("composerBlockNestChange",[e,i,h]):b.trigger("composerBlockNestIn",[e,i])}else h&&(b.unsnap(e),b.trigger("composerBlockNestOut",[e]))},replaceWithCommentPlaceholder:function(c,d){var e=a("<div>").html(c[d]),f=e.find(EBD.immediateNestedBlock);if(!(f.length<=0)){f.each(function(){var d=a(this),e=g.getBlockUid(d),f=document.createComment("block"+e);d.replaceWith(f);var h=g.getBlock(e),i=g.exportBlock(h),j=b.extractPosition(h.attr("class"));
j&&(i.position=j),c.blocks.push(i)});var h=e.html();c[d]=h}},"{self} composerBlockExport":function(a,c,d,e){e.blocks=[],b.replaceWithCommentPlaceholder(e,"editableHtml"),b.replaceWithCommentPlaceholder(e,"html")}}}),b.resolve()})}),EasyBlog.module("composer/blocks/panel",function(a){var b=this;EasyBlog.Controller("Composer.Blocks.Panel",{elements:["[data-eb-composer-blocks-{props}]","[data-eb-composer-blocks-{prop-group|prop-action}]","[data-eb-composer-{panel}][data-id=blocks]","[data-eb-composer-blocks-{block-subpanel|removal-subpanel}]","[data-eb-composer-block-{fieldgroup}]","[data-eb-composer-blocks-props-{block-menu|text-menu|block-content|text-content}]","[data-eb-composer-blocks-{subpanel|subpanel-button}]"],defaultOptions:{"{blockTitle}":"[data-block-property-title]","{blockIcon}":"[data-block-property-icon]"}},function(b,c,d,e,f,g){return{init:function(){f=b.blocks,e=f.composer,g=a()
},"{self} composerBlockBeforeActivate":function(a,c,d){e.panels.activate("blocks"),g=d,b.panel().switchClass("show-block-subpanel"),b.fieldgroup.display(d)},fieldgroup:{get:a.memoize(function(c){var d=e.find(b.fieldgroup).where("type",c);if(d.length<1)var g=f.getBlockMeta(c),d=a(g.fieldgroup);return d}),hide:function(){b.panel().addClass("is-empty").find(b.fieldgroup).detach()},display:function(a){var c=a.attr("data-type"),d=b.panel();d.removeClass("is-empty").find(b.fieldgroup).detach();var e=d.find(b.propGroup).where("type","specific");
b.fieldgroup.get(c).toggleClass("is-standalone",f.isStandaloneBlock(a)).appendTo(e)}},openPanel:function(a){("block"==a||"text"==a)&&(b.panel().switchClass("show-"+a+"-subpanel"),b.subpanelButton().where("name",a).activateClass("active")),"removal"==a&&b.panel().switchClass("show-removal")},activatePanel:function(a){clearTimeout(b.revertToPostPanel);{var c=f.getBlockMeta(a);f.getAllParentBlocks(a),f.getChildBlocks(a)}b.subpanelButton().show(),c.properties.textpanel||b.subpanelButton().hide(),b.blockIcon().attr("class",c.icon),b.blockTitle().html(c.title)
},deactivatePanel:function(){b.revertToPostPanel=setTimeout(function(){e.document.workarea().hasClass("is-sorting")||e.panels.activate("post-options")},1),b.fieldgroup.hide()},"{self} composerBlockActivate":function(a,c,d){b.activatePanel(d)},"{self} composerBlockDeactivate":function(a,c,d){b.deactivatePanel(d)},"{self} composerBlockRemove":function(a,c,d){b.fieldgroup.hide(d)},"{subpanelButton} click":function(a){var c=a.data("name");b.openPanel(c)}}}),b.resolve()}),EasyBlog.module("composer/blocks/removal",function(){var b=this,c="is-removing";
EasyBlog.require().library("ui/droppable").done(function(){EasyBlog.Controller("Composer.Blocks.Removal",{defaultOptions:{"{workarea}":EBD.workarea,"{dropzone}":"[data-eb-composer-blocks-removal-subpanel]"}},function(a,b,d,e,f,g){return{init:function(){f=a.blocks,e=f.composer},"{self} composerBlockDrag":function(b,c,d){g=d,e.panels.activate("blocks"),f.panel.openPanel("removal");var h=a.dropzone();h.data("inited")||(h.droppable({accept:EBD.block,tolerance:"pointer"}),h.data("inited",!0))},"{self} composerBlockDrop":function(){a.workarea().hasClass(c)||f.panel.openPanel("block")
},"{dropzone} drop":function(b,d,e){var g=e.draggable,h=a.workarea();h.addClass(c),g.addClass(c),b.addClass(c),setTimeout(function(){f.removeBlock(g),setTimeout(function(){f.panel.openPanel("block"),h.removeClass("is-removing"),setTimeout(function(){b.removeClass("is-removing active")},250)},250)},100)},"{dropzone} dropout":function(a){a.removeClass("active")},"{dropzone} dropover":function(a){a.addClass("active")}}}),b.resolve()})}),EasyBlog.module("composer/blocks/resizable",function(a){var b=this;EasyBlog.require().library("ui/resizable").done(function(){EasyBlog.Controller("Composer.Blocks.Resizable",{defaultOptions:a.extend({"{resizeHandle}":".ui-resizable-handle"},EBD.selectors)},function(b,c,d,e,f){return{init:function(){f=b.blocks,e=b.blocks.composer
},initResizable:function(c){if(!b.hasResizable(c)){var d=b.determineResizeHandles(c);if(d){{var e=b.createResizeHandleElements(d),g=b.createResizeHandleSelectors(d);f.getBlockViewport(c).append(e).resizable({handles:g})}a(e).hide(),c.addClass("is-resizable")}}},destroyResizable:function(a){f.getBlockViewport(a).resizable("destroy"),a.removeClass("is-resizable")},hasResizable:function(a){return f.getBlockViewport(a).hasClass("ui-resizable")},handles:{right:{w:"dimension",sw:"dimension",s:"dimension"},left:{e:"dimension",se:"dimension",s:"dimension"}},determineResizeHandles:function(a){var c=f.nestable.extractPosition(a);
return b.handles[c]},createResizeHandleElements:function(b){var c=[];return a.each(b,function(b,d){var e=a('<div class="ui-resizable-handle"><div></div></div>').addClass("ui-resizable-"+b).attr({"data-direction":b,"data-role":d});c.push(e[0])}),c},createResizeHandleSelectors:function(b){var c=[];return a.each(b,function(a){c[a]="> .ui-resizable-"+a}),c},getResizeHandles:function(a){return f.getBlockViewport(a).children(b.resizeHandle.selector)},"{self} composerBlockActivate":function(a,c,d){b.initResizable(d),b.getResizeHandles(d).show()
},"{self} composerBlockDeactivate":function(a,c,d){b.getResizeHandles(d).hide()},"{self} composerBlockNestIn":function(a,c,d){b.initResizable(d)},"{self} composerBlockNestOut":function(a,c,d){b.destroyResizable(d)},"{self} composerBlockNestChange":function(a,c,d){b.destroyResizable(d),b.initResizable(d)},"{blocks.viewport} resizestart":function(a,c,d){b.workarea().addClass("is-resizing");var e=b.block.of(a);parentBlocks=f.getAllParentBlocks(e),parentBlocks.addClass("has-resizing-child"),b.trigger("composerBlockResizeStart",[e,d])
},"{blocks.viewport} resize":function(a,c,d){a.css({top:"",left:"",width:"",height:""}),c.stopPropagation();var e=b.block.of(a);if(f.isNestedBlock(e)&&"content"===f.getBlockNestType(e)){var g=b.trigger("composerBlockBeforeResize",[e,d]);if(!g.isDefaultPrevented()){var h=d.originalSize,i=d.size;if(h.width!==i.width){var j=f.getBlockNest(e),k=i.width/j.width();0>k&&(k=0),k>1&&(k=1),k=Math.floor(100*k)+"%",e.css("width",k)}if(h.height!==i.height){e.css("height","");var l=e.height(),m=i.height;l>m&&(m=""),e.css("height",m)
}}b.trigger("composerBlockResize",[e])}},"{blocks.viewport} resizestop":function(a,c,d){b.workarea().removeClassAfter("is-resizing");var e=b.block.of(a);parentBlocks=f.getAllParentBlocks(e),parentBlocks.removeClass("has-resizing-child"),b.trigger("composerBlockResizeStop",[e,d])}}})}),b.resolve()}),EasyBlog.module("composer/blocks/scrollable",function(a){var b=this;EasyBlog.Controller("Composer.Blocks.Scrollable",{defaultOptions:a.extend({},EBD.selectors)},function(b,c,d,e,f){return{init:function(){f=b.blocks,e=f.composer
},"{block} dragstart":function(){b.scrollstart()},"{blocks.menu} dragstart":function(){b.scrollstart()},"{block} dragstop":function(){b.scrollstop()},"{blocks.menu} dragstop":function(){b.scrollstop()},"{self} composerBlockDrop":function(){b.scrollstop()},stop:!1,scrollTimer:null,scrollstart:function(){var i,c=e.viewport(),d=e.document.viewportContent()[0],f=c.height(),g=50,h=f-50,j=function(){b.stop=!1,(i.y>h||i.y<g)&&(b.stop=!0,i.y>h&&(d.scrollTop+=f/2),i.y<g&&(d.scrollTop-=f/2),clearTimeout(b.scrollTimer),b.scrollTimer=setTimeout(j,1e3),b.trigger("composerDocumentScroll"))
};a(document).on(a.ns("mousemove touchmove",".scrollable"),function(c){i=a.getPointerPosition(c),b.stop&&i.y>g&&i.y<h&&(b.stop=!1),b.stop||j()})},scrollstop:function(){clearTimeout(b.scrollTimer),a(document).off(a.ns("mousemove touchmove",".scrollable"))}}}),b.resolve()}),EasyBlog.module("composer/blocks/search",function(a){var b=this,c="is-searching",d="is-empty";EasyBlog.Controller("Composer.Blocks.Search",{elements:["[data-eb-blocks-{search-input|search-toggle-button|search-panel}]"],defaultOptions:{}},function(b,e,f,g,h){return{init:function(){h=b.blocks,g=h.composer
},toggleSearch:function(){h.blocks().hasClass(c)?b.deactivateSearch():b.activateSearch()},activateSearch:function(){h.view().addClass(c),b.searchInput().val("").focus()},deactivateSearch:function(){h.view().removeClass(c),b.resetSearch()},resetSearch:function(){h.view().removeClass(d),b.searchInput().val(""),h.menu().show(),h.menuGroup().each(function(){a(this).parents(".eb-composer-fieldset").show()})},search:function(b){var b=a.trim(b.toLowerCase()),c=h.menu(),e=c.filter("[data-keywords*='"+b+"']"),f=""==b,g=!f&&e.length<1;
f?c.show():c.hide(),e.show(),h.view().toggleClass(d,g),h.menuGroup().each(function(){var b=a(this),c=b.parents(".eb-composer-fieldset").show();b.height()<1&&c.hide()})},"{searchToggleButton} click":function(){b.toggleSearch()},"{searchInput} keyup":function(a,c){var d=a.val();27===c.keyCode&&(""==d?b.deactivateSearch():b.resetSearch())},"{searchInput} input":a.debounce(function(a){b.search(a.val())},150)}}),b.resolve()}),EasyBlog.module("composer/blocks/text",function(a){var b=this;EasyBlog.require().library("colorpicker","nouislider").script("layout/elements").done(function(){EasyBlog.Controller("Composer.Blocks.Text",{elements:[".eb-composer-fieldset[data-name=text] [data-eb-{font-color-menu|font-family-menu|font-size-menu|font-color-content|font-color-picker|font-family-content|font-size-content|font-color-caption|font-family-caption|font-size-caption|font-family-option|font-format-option}]",".eb-composer-fieldset[data-name=text] [data-eb-{numslider-toggle|numslider-widget|numslider-value|numslider-input|numslider-units|numslider-unit|numslider-current-unit|numslider-unit-toggle}]",".eb-composer-fieldset[data-name=text] [data-eb-{colorpicker|colorpicker-toggle}]","[data-eb-{links|link-item-group|link|link-item|link-preview|link-preview-caption|link-url-field|link-title-field|link-blank-option|link-remove-button}]"],defaultOptions:a.extend({fontSizeUnits:{px:{start:12,step:2,range:{min:8,max:72},pips:{mode:"values",density:4,values:[8,12,18,24,48,72]}},"%":{start:100,step:10,range:{min:0,max:200},pips:{mode:"positions",values:[0,50,100],density:10}}},"{textFieldset}":".eb-composer-fieldset[data-name=text]","{linksFieldset}":".eb-composer-fieldset[data-name=links]","{fontSizeCheckbox}":"[data-eb-font-size-content] .eb-numslider-toggle input","{fontSizeToggle}":"[data-eb-font-size-content] .eb-numslider-toggle label","{linkBlankOptionField}":".eb-link-blank-option"},EBD.selectors)},function(b,c,d,e,f,g,h,i,j,k){return{init:function(){f=b.blocks,e=f.composer,b.textFieldset().on("touchstart click mousedown mouseup",function(a){a.preventDefault()
}),b.linksFieldset().on("touchstart click mousedown mouseup",function(a){a.preventDefault()})},"{self} composerDocumentReady":function(){g=e.editor,b.initFontColor(),b.initLinks(),b.initHandlers()},initHandlers:function(){},"{self} composerBlockActivate":function(a,c,d){var e=f.getBlockMeta(d);return e.properties.fonts?void 0:(b.textFieldset().hide(),b.linksFieldset().hide(),void 0)},"{self} composerTextSelect":function(a,c,d,e){var h=f.getBlockMeta(e);return h.properties.fonts?(k||(f.panel.blockSubpanel().addClass("has-text-selection"),b.textFieldset().show(),b.linksFieldset().show(),b.textFieldset().find(".eb-font-formatting.section-list").toggle("text"==e.data("type")),b.populateFont(),b.populateLinks()),void 0):(b.textFieldset().hide(),b.linksFieldset().hide(),void 0)
},"{self} composerTextDeselect":function(){k||b.workarea().hasClass("is-sorting")||(f.panel.blockSubpanel().removeClass("has-text-selection"),b.textFieldset().hide(),b.linksFieldset().hide(),b.removeTextMarkers(),b.linkItemGroup().empty())},populateFont:function(){b.populateFontColor(),b.populateFontFamily(),b.populateFontSize(),b.populateFontFormatting()},initFontColor:function(){b.fontColorPicker().colorpicker()},populateFontColor:function(){if(b.lastUpdatedViaFontColorUI)return b.lastUpdatedViaFontColorUI=!1,void 0;
var c=g.selection.getParent(),d=a(c).css("color");b.colorpickerToggle().prop("checked",c.style.color),b.updateFontColorUI(d)},setFontColor:function(a){b.removeFontColor(),g.inline.toggleStyle("color: "+a),b.updateFontColorUI(a),b.lastUpdatedViaFontColorUI=!0},updateFontColorUI:function(a){b.updatingFontColorUI=!0,!a&&(a="#000"),b.fontColorCaption().css("backgroundColor",a),b.fontColorPicker().colorpicker("setColor",a),b.updatingFontColorUI=!1},removeFontColor:function(){g.inline.removeStyleRule("color")},populateFontFamily:function(){if(b.lastUpdatedViaFontFamilyUI)return b.lastUpdatedViaFontFamilyUI=!1,void 0;
var a=g.selection.getParent(),c=a.style.fontFamily.replace(/\'\"/g,"");b.updateFontFamilyUI(c)},setFontFamily:function(a){b.lastUpdatedViaFontFamilyUI=!0,g.inline.format("span","style","font-family: "+a),b.updateFontFamilyUI(a)},updateFontFamilyUI:function(a){!a&&(a="");var c=b.fontFamilyOption().removeClass("active").where("value",'"'+a+'"').addClass("active"),d=c.length>0?c.html():a.split(",")[0];b.fontFamilyCaption().html(d)},removeFontFamily:function(){b.lastUpdatedViaFontFamilyUI=!0,g.inline.removeStyleRule("font-family")
},populateFontSize:function(){if(b.lastUpdatedViaFontSizeUI)return b.lastUpdatedViaFontSizeUI=!1,void 0;var c=g.selection.getParent(),d=a(c).css("fontSize"),e=!!c.style.fontSize;b.updateFontSizeUI(d),b.numsliderToggle().prop("checked",!!e)},setFontSize:function(c){if(a.isNumeric(c)){var d=b.getFontSizeUnit();c+=d}b.lastUpdatedViaFontSizeUI=!0,g.inline.format("span","style","font-size: "+c);var e=g.selection.getParent(),f=a(e).css("fontSize");b.updateFontSizeUI(c||f),b.numsliderToggle().prop("checked",!!c)},updateFontSizeUI:function(a){b.updatingFontSizeUI=!0;
var c=Math.abs(a.replace(/\%|px/gi,""));unit=a.match("%")?"%":"px",b.getFontSizeUnit()!==unit&&b.setFontSizeUnit(unit),b.fontSizeCaption().html(a),b.numsliderCurrentUnit().html(unit),b.numsliderUnit().removeClass("active").where("unit",'"'+unit+'"').addClass("active"),b.numsliderWidget().val(c),b.numsliderInput().val(c),b.updatingFontSizeUI=!1},removeFontSize:function(){g.inline.removeStyleRule("font-size")},getFontSizeUnit:function(){return b.fontSizeContent().data("unit")||"%"},setFontSizeUnit:function(d){b.fontSizeContent().data("unit",d);
var e=c.fontSizeUnits[d];b.numsliderWidget().find(".noUi-pips").remove().end().noUiSlider(a.extend({document:i},e),!0).noUiSlider_pips(e.pips)},formattingTags:{bold:"strong",italic:"em",underline:"u",strikethrough:"del",code:"code",superscript:"sup",subscript:"sub",orderedlist:"ol",unorderedlist:"ul"},populateFontFormatting:function(){b.lastUpdatedViaFontFormattingUI?b.lastUpdatedViaFontFormattingUI=!1:b.removeTextMarkers();var c=g.selection.getCurrent(),d=a(c).parentsUntil(EBD.block).filter("ul, ol").eq(0);
b.fontFormatOption().each(function(){var e=a(this),f=e.data("format"),g=b.formattingTags[f];hasFormatting=/unorderedlist|orderedlist/.test(f)?d.is(g):0!==a(c).closest(g).length,e.toggleClass("active",hasFormatting)})},toggleFontFormatting:function(a){switch(a){case"orderedlist":case"unorderedlist":g.list.toggle(a);break;case"indent":g.indent.increase();break;case"outdent":g.indent.decrease();break;case"clear":b.selectWithinTextMarkers(),g.inline.removeFormat(),b.removeTextMarkers();break;default:!b.hasTextMarkers()&&b.createTextMarkers(),g.inline.format(a),b.lastUpdatedViaFontFormattingUI=!0
}},hasTextMarkers:function(){return b.workarea().find(".composer-text-marker").length>0},createTextMarkers:function(){g.selection.removeMarkers(),g.selection.createMarkers();var c=a.makeArray(b.workarea().find(".redactor-selection-marker").each(function(){a(this).removeClass("redactor-selection-marker").addClass("composer-text-marker").attr("id",this.id.replace("selection-","text-"))}));return b.selectWithinTextMarkers(c),c},getTextMarkers:function(){var c=a.makeArray(b.workarea().find("span#text-marker-1, span#text-marker-2"));
return c[0]&&c[1]?c:void 0},selectWithinTextMarkers:function(a){a||(a=b.getTextMarkers()),a&&g.caret.set(a[0].nextSibling,0,a[1],0)},removeTextMarkers:function(){b.workarea().find(".composer-text-marker").remove()},startEditingSelection:function(){k=!0,b.removeTextMarkers(),b.workarea().off("mousedown.stopEditingSelection").one("mousedown.stopEditingSelection",function(){b.stopEditingSelection()})},stopEditingSelection:function(){k=!1},initLinks:function(){b.linkItem.template=b.linkItem(".is-blank").detach().removeClass("is-blank")[0]
},populateLinks:function(){var c=g.selection.getNodesInRange(),d=a(c).filter("a"),e=b.linkItemGroup().empty();a.each(d,function(a,c){var d=b.createLinkItem().appendTo(e);b.processLinkItem(d),b.updateLinkItem(d,c)}),b.linkItemGroup().toggleClass("has-existing-links",d.length>0);var f=b.createLinkItem().addClass("is-new").appendTo(e);b.processLinkItem(f);var h=g.selection.getText();b.linkPreviewCaption.inside(f).html(h)},createLinkItem:function(){var c=a(b.linkItem.template).clone();return c},processLinkItem:function(c){var d=b.linkUrlField.inside(c),e=b.linkTitleField.inside(c);
c.data("linkUrlField",d[0]),c.data("linkTitleField",e[0]),d.data("linkItem",c).on("input",b.linkUrlFieldInputHandler).on("mousedown",function(){if(a.IE){var b=c.data("anchorNode");b||g.selection.save()}}),e.data("linkItem",c).on("input",b.linkTitleFieldInputHandler).on("mousedown",function(){if(a.IE){var b=c.data("anchorNode");b||g.selection.save()}});var f=c.find(".eb-link-input");d.css({padding:"6px 12px",display:"block",fontSize:"13px",lineHeight:"24px",fontWeight:"bold",paddingBottom:"0px",color:"#555555",width:"100%",border:"none",outline:"none",position:"relative",zIndex:2}),a.IE&&d.css({height:"28px"}),e.css({border:"none",resize:"none",fontSize:"12px",padding:"12px",paddingTop:"32px",overflow:"hidden",outline:"none",position:"absolute",width:"100%",height:"100%",color:"#555555",fontFamily:"Arial, Helvetica, sans-serif",top:0,left:0,zIndex:1});
try{var h=a("<iframe>");h.on("load",function(){a(h[0].contentWindow.document.body).css({margin:0,overflow:"hidden"}).append(d).append(e)}),f.append(h)}catch(i){console.error("There may a cross-iframe security issue. Unable to create text link item properly",i)}},updateLinkItem:function(c,d){b.linkPreviewCaption.inside(c).html(a(d).text()),a(c.data("linkUrlField")).val(d.getAttribute("href")),a(c.data("linkTitleField")).val(d.title),b.linkBlankOption.inside(c).prop("checked","_blank"==d.target),c.data("anchorNode",d)
},removeLinkItem:function(a){return b.removeAnchorNode(a),a.hasClass("is-new")?(b.resetLinkItem(a),void 0):(a.remove(),b.linkItem(":not(.is-new)").length<1&&b.linkItemGroup().removeClass("has-existing-links"),void 0)},resetLinkItem:function(a){b.linkUrlField.inside(a).val(""),b.linkTitleField.inside(a).val(""),b.linkBlankOption.inside(a).prop("checked",!1)},createAnchorNode:function(b){var c=g.selection.getHtml(),d=a.uid("link-"),e=a("<a />").attr("id",d).html(c)[0];return g.insert.node(e),e=a("#"+d).removeAttr("id")[0],g.selection.selectElement(e),b.data("anchorNode",e),e
},updateAnchorNode:function(c){var d=c.data("anchorNode");if(d){var e=a(c.data("linkUrlField")),f=a(c.data("linkTitleField")),g=b.linkBlankOption.inside(c);d.href=a.trim(e.val()),d.title=f.val(),g.is(":checked")?d.target="_blank":d.removeAttribute("target")}},removeAnchorNode:function(b){var c=b.data("anchorNode");c&&(g.selection.save(),$anchorNode=a(c),$anchorNode.contents().insertAfter($anchorNode),$anchorNode.remove(),g.selection.restore(),b.removeData("anchorNode"))},"{fontFormatOption} click":function(a){var c=a.data("format");
"clear"!=c&&a.toggleClass("active"),b.toggleFontFormatting(c)},"{fontFamilyOption} click":function(a){var c=a.data("value");b.setFontFamily(c)},"{colorpicker} colorpickerChange":function(a,c,d){b.updatingFontColorUI||(b.colorpickerToggle().prop("checked",!0),b.setFontColor(d))},"{colorpickerToggle} change":function(a){a.checked()||b.removeFontColor()},"{fontSizeToggle} click":function(){var c=b.fontSizeCheckbox();c.is(":checked")?(c.prop("checked",!1),b.removeFontSize()):c.prop("checked",!0)},"{numsliderWidget} nouislide":function(a,c,d){b.numsliderInput().val(Math.abs(d))
},"{numsliderWidget} set":function(a,c,d){b.updatingFontSizeUI||b.setFontSize(Math.abs(d))},"{numsliderInput} input":function(c){if(!b.updatingFontSizeUI){var d=Math.abs(a.trim(c.val()));b.setFontSize(d)}},"{numsliderUnit} click":function(a){var c=a.data("unit");b.setFontSizeUnit(c),b.numsliderUnits().removeClass("open")},"{numsliderUnitToggle} click":function(){b.numsliderUnits().toggleClass("open")},"{linkItem} mouseover":function(b){var d=b.data("anchorNode");d&&a(d).addClass("is-highlighting")},"{linkItem} mouseout":function(b){var d=b.data("anchorNode");
d&&a(d).removeClass("is-highlighting")},linkUrlFieldInputHandler:function(){var d=a(this);b.startEditingSelection();var e=a(d.data("linkItem")),f=a.trim(d.val()),h=e.data("anchorNode");return""===f||h||(a.IE&&g.selection.restore(),h=b.createAnchorNode(e),a.IE&&d.focus().val(d.val())),""==f&&h?(b.removeAnchorNode(e),void 0):(b.updateAnchorNode(e),void 0)},linkTitleFieldInputHandler:function(){var d=a(this);b.startEditingSelection();var e=a(d).data("linkItem");b.updateAnchorNode(e)},"{linkBlankOptionField} click":function(a){var d=a.find("input");
d.is(":checked")?d.prop("checked",!1):d.prop("checked",!0),b.startEditingSelection();var e=b.linkItem.of(a);b.updateAnchorNode(e)},"{linkRemoveButton} click":function(a){b.startEditingSelection();var d=b.linkItem.of(a);b.removeLinkItem(d)}}}),b.resolve()})}),EasyBlog.module("composer/blocks/tree",function(a){var b=this;EasyBlog.require().done(function(){EasyBlog.Controller("Composer.Blocks.Tree",{elements:["[data-eb-{block|block-icon|block-title|block-level-count|block-child-count}]","[data-eb-blocks-{tree-field|tree|tree-item|tree-item-template|tree-item-icon|tree-item-title|tree-item-group|tree-toggle-button}]"]},function(b,c,d,e,f,g){return{init:function(){f=b.blocks,e=f.composer,g=b.createTreeItem,b.treeItemTemplate=b.treeItemTemplate().detach().html()
},setCurrentBlock:function(a){var c=f.getBlockType(a),d=f.getBlockMeta(c);b.blockTitle().text(d.title),b.blockIcon().attr("class",d.icon);var e=f.getAllParentBlocks(a),g=f.getChildBlocks(a),h=g.length,i=e.length+1;b.blockChildCount().text(h),b.blockLevelCount().text(i),b.block().toggleClass("has-child",h)},populate:function(c){if(!c)var c=f.getCurrentBlock();if(c.length){var d=b.treeField(),e=f.getParentBlock(c),h=!!e.length,i=f.getChildBlocks(c),j=!!i.length;d.toggleClass("has-parent",h).toggleClass("has-children",j);
var k=[],l=b.getTreeDisplayMode();if("minimal"==l)if(h){k.push(g(e,1));var m=f.getChildBlocks(e);m.each(function(){var b=a(this);k.push(g(b,2)),b.is(c)&&i.each(function(){var b=a(this);k.push(g(b,3))})})}else k.push(g(c,1)),i.each(function(){var b=a(this);k.push(g(b,2))});else{var n=f.getRootBlocks(),o=function(b,c){var d=c;k.push(g(b,d));var e=f.getChildBlocks(b);e.each(function(){var b=a(this);o(b,d+1)})};n.each(function(){o(a(this),1)})}b.tree().toggle("full"==l||k.length>1),b.treeItemGroup().empty().append(k)
}},createTreeItem:function(a,c){var d=a.data("treeItem");return d||(d=b.renderTreeItem(a),a.data("treeItem",d)),d.toggleClass("active",a.hasClass("active")).toggleClass("is-nested",a.hasClass("is-nested")).switchClass("level-"+c),d},renderTreeItem:function(c){var d=f.getBlockUid(c),e=f.getBlockType(c),g=f.getBlockMeta(e),h=a(b.treeItemTemplate);return h.attr({"data-type":g.type,"data-uid":d}).find(b.treeItemIcon).addClass(g.icon).end().find(b.treeItemTitle).text(g.title),h},getTreeDisplayMode:function(){return b.treeField().hasClass("tree-minimal")?"minimal":"full"
},setTreeDisplayMode:function(a){b.treeField().switchClass("tree-"+a),b.populate()},"{self} composerBlockAdd":function(){b.populate()},"{self} composerBlockActivate":function(a,c,d){b.setCurrentBlock(d),b.populate(d)},"{self} composerBlockRemove":function(){b.populate()},"{treeItem} click":function(a){var b=a.data("uid"),c=f.getBlock(b);f.unhighlight(c),f.activateBlock(c)},"{treeItem} mouseenter":function(a){var b=a.data("uid"),c=f.getBlock(b);f.highlight(c),f.scrollTo(c)},"{treeItem} mouseleave":function(a){var b=a.data("uid"),c=f.getBlock(b);
f.unhighlight(c)},"{treeToggleButton} click":function(){var c=(b.treeField(),b.getTreeDisplayMode());b.setTreeDisplayMode("minimal"==c?"full":"minimal")}}}),b.resolve()})}),EasyBlog.module("composer/blocks",function(a){var b=this,c="is-new",d="is-editable",e="is-receiving",f="is-dropping",g="is-releasing",h="is-refocusing",i="is-highlighting",j="is-sorting",k="is-sort-item",l="is-nested",m="is-dragging-block",n="is-dropping-block",o="is-highlighting-block";EasyBlog.require().library("ui/draggable","scrollTo").script("composer/blocks/panel","composer/blocks/guide","composer/blocks/nestable","composer/blocks/droppable","composer/blocks/resizable","composer/blocks/scrollable","composer/blocks/font","composer/blocks/dimensions","composer/blocks/text","composer/blocks/removal","composer/blocks/tree","composer/blocks/search","composer/blocks/mobile","composer/blocks/media","composer/blocks/toolbar").done(function(){EasyBlog.Controller("Composer.Blocks",{hostname:"blocks",pluginExtendsInstance:!0,elements:["[data-eb-composer-{blocks}]","[data-eb-composer-block-{menu|menu-group|meta}]","[data-eb-composer-{editor}]","[data-ebd-block-{viewport|content}]"],defaultOptions:a.extend({"{view}":"[data-eb-composer-blocks]","{editableContent}":EBD.editableContent,"{immediateBlockViewport}":EBD.immediateBlockViewport,"{immediateBlockContent}":EBD.immediateBlockContent,"{sidebar}":"[data-eb-composer-blocks]","{mechswitch}":".mechswitch"},EBD.selectors)},function(b,p,q,r){return{init:function(){r=b.composer;
var c=["panel","guide","nestable","droppable","resizable","scrollable","font","dimensions","text","removal","tree","search","mobile","media","toolbar"];if("legacy"==r.getDoctype())var c=["panel","tree","dimensions","media"];a.each(c,function(a,c){b.addPlugin(c)});var d=["post","image","video","file","audio"];a.each(d,function(a,c){b.loadBlockHandler(c)})},getAllBlocks:function(){return b.root().find(EBD.block)},getCurrentBlock:function(){return b.root().find(EBD.block+".active")},getParentBlock:function(b){return b.is(EBD.nestedBlock)?a(b).parents(EBD.block).eq(0):a()
},getAllParentBlocks:function(a){return a.parentsUntil(EBD.root).filter(EBD.block)},getBlockTree:function(a){return b.getAllParentBlocks(a).add(b.root())},getRootBlocks:function(){return b.root().find(EBD.childBlock)},getChildBlocks:function(a){return a.is(EBD.root)?a.find(EBD.childBlock):a.find(EBD.nestedBlock+":not(.ebd-block[data-uid="+a.data("uid")+"] "+EBD.nest+" "+EBD.nest+" "+EBD.nestedBlock+")")},getAllChildBlocks:function(a){return a.find(EBD.block)},getBlocksByType:function(a){return b.root().find(EBD.block+"[data-type="+a+"]")
},getBlock:function(a){var b=q.find(EBD.block+"[data-uid="+a+"]");return b},getBlockUid:function(a){return a.attr("data-uid")||b.setBlockUid(a)},setBlockUid:function(b){return b.attr("data-uid")||function(){var c=a.uid();return b.attr("data-uid",c),c}()},getBlockType:function(b){return a(b).attr("data-type")},metas:{},getBlockMeta:function(c){return c instanceof a&&(c=b.getBlockType(c)),b.metas[c]||function(){var a=b.meta().where("type",c).val();return a?b.metas[c]=JSON.parse(a):null}()},getBlockViewport:function(a){return b.immediateBlockViewport.inside(a)
},getBlockContent:function(a){return b.immediateBlockContent.inside(a)},getBlockFragment:function(c){var d=function(a){var c=b.getBlockType(a),d=b.getBlockHandler(c),e=b.createBlockContainer(c),f=d.toHTML(a);return a.is(EBD.nested)&&a.addClass(l),e.append(f),e},e=d(c);return e.find(EBD.nestedBlock).each(function(){var b=a(this),c=d(b);b.replaceWith(c)}),e},getBlockHTML:function(a){return b.getBlockFragment(a).toHTML()},getBlockText:function(){},getBlockNest:function(a){return a.closest(EBD.nest)},getBlockNestType:function(a){return b.getBlockNest(a).data("type")
},isBlock:function(a){return a.is(EBD.block)},isNestedBlock:function(a){return a.is(EBD.nestedBlock)},isRootBlock:function(a){return!b.isNestedBlock(a)},isStandaloneBlock:function(a){return a.is(EBD.standaloneBlock)},restoreInlineBlockData:function(a){var c=a.next();if(c.is("textarea[data-block]")){var d=c.val(),e=JSON.parse(d);b.dataset[b.getBlockUid(a)]=e,c.remove()}},initBlock:function(e){var f=arguments,g=b.getBlockType(e);b.setBlockUid(e),b.restoreInlineBlockData(e),b.loadBlockHandler(g).done(function(a){if(e.hasClass(c)){b.trigger("composerBlockBeforeAdd",f);
try{a.reset(e),a.reconstruct(e)}catch(h){EasyBlog.debug&&console.error("Error initializing new block of type '%s'.",g,h)}b.trigger("composerBlockAdd",f),b.release(e),e.removeClass(c).addClass(d),b.trigger("composerBlockInit",f)}else if(!e.hasClass(d)){try{a.reconstruct(e)}catch(h){EasyBlog.debug&&console.error("Error initializing existing block of type '%s'.",g,h)}e.addClass(d),b.trigger("composerBlockInit",f)}}),b.getChildBlocks(e).each(function(){var c=a(this);b.initBlock(c)})},createBlockContainer:function(c){var e=(b.getBlockMeta(c),a(a("[data-eb-block-template]").clone().html()));
return e.attr("data-type",c),e},createBlock:function(c){var d=b.getBlockMeta(c);if(d){var e=a(d.block);return b.setBlockUid(e),b.trigger("composerBlockCreate",[e,d]),e}},createBlockFromMenu:function(a){var d=a.attr("data-type"),e=b.createBlock(d).addClass(c);return e},createBlockFromMediaFile:function(a){var c=a.data("type"),d=b.getBlockHandler(c),e=d.constructFromMediaFile(a);return e},constructBlock:function(a,c){var d=b.getBlockHandler(a),e=d.construct(c);return b.setBlockUid(e),b.trigger("composerBlockConstruct",[e]),e
},constructNestedBlock:function(a,c){var d=b.constructBlock(a,c);return d.addClass(l),d},constructIsolatedBlock:function(a,c){var d=b.constructBlock(a,c);return d.addClass(l).addClass(isIsolated),d},createBlockNest:function(){return a('<div class="ebd-nest" data-type="block">')},createContentNest:function(b){var c=a('<div class="ebd-nest" data-type="content">'),d={editable:!0},b=a.extend(d,b);return b.editable&&c.editable(!0),c},exportBlock:function(a){var c=b.getBlockUid(a),d=b.getBlockType(a),e=b.getBlockHandler(d),f=a.is(EBD.nestedBlock),g=a.is(EBD.isolatedBlock),h={uid:c,type:d,html:"",data:{},blocks:[],nested:f,isolated:g,style:a.attr("style")};
if(EasyBlog.debug&&b.verifyBlockHandler(e,["toData","toText","toHTML"]),e.toData&&(h.data=e.toData(a)||{}),e.toText&&(h.text=e.toText(a)||""),e.toHTML&&(h.html=e.toHTML(a)||""),e.toEditableHTML)h.editableHtml=e.toEditableHTML(a)||"";else{var i=blocks.getBlockContent(a);h.editableHtml=i.html()}return b.trigger("composerBlockExport",[a,h]),h},addBlock:function(a){b.root().append(a),b.initBlock(a)},removeBlock:function(c){b.trigger("composerBlockBeforeRemove",[c]),c.find(EBD.nestedBlock).each(function(){var c=a(this);
b.removeBlock(c)}),c.remove(),b.trigger("composerBlockRemove",[c])},scrollTo:function(a){var b=r.viewport();r.viewportContent().stop(!0).scrollTo(a,500,{axis:"y",offset:{top:(b.height()-a.height())/-2,left:0}})},blockHandlers:{},loadBlockHandler:a.memoize(function(c){if(!c)return a.Deferred().reject(a.Exception("Invalid block type given."));var d=b.getBlockMeta(c);if(!d)return a.Deferred().reject(a.Exception("Block of type '"+c+"' is not installed!"));var e=a.Deferred();return EasyBlog.require().script("composer/blocks/handlers/"+c).done(function(){var f="handler/"+c,g="EasyBlog.Controller.Composer.Blocks.Handlers."+a.String.capitalize(c),h={meta:d},i=b.addPlugin(f,g,h);
b.blockHandlers[c]=i,EasyBlog.debug&&b.verifyBlockHandler(i),e.resolve(i,d)}).fail(function(){b.loadBlockHandler.reset(c),e.reject(a.Exception("Could not load block handler for "+c+"."))}),e}),getBlockHandler:function(c){return c instanceof a&&(c=b.getBlockType(c)),b.blockHandlers[c]},verifyBlockHandler:function(b,c){for(var d,c=c||["activate","deactivate","construct","reconstruct","deconstruct","refocus","reset","populate","toHTML","toData","toText"],e=[];d=c.shift();)a.isFunction(b[d])||e.push(d);e.length>0&&console.warn("Block handler of type '%s' is missing the following method: %s.",b.options.meta.type,e.join(", "))
},activateBlock:function(a){if(!b.workarea().hasClass("is-removing")){b.deactivateBlock();var c=b.getBlockType(a);b.loadBlockHandler(c).done(function(c){var d=[a,c];b.trigger("composerBlockBeforeActivate",d),b.initBlock(a),c.activate&&c.activate(a),c.refocus(a),b.trigger("composerBlockActivate",d)}).fail(function(a){b.trigger("composerBlockActivateError",[a])})}},deactivateBlock:function(a){if(a=a||b.getCurrentBlock(),a.length){var c=b.getBlockHandler(a);c&&c.deactivate&&c.deactivate(a),b.trigger("composerBlockDeactivate",[a,c])
}},"{menu} mouseover":function(a){if(!a.data("uiDraggable")){var c=a.clone();c.find(b.meta.selector).remove(),a.draggable({helper:function(){return c.css({width:a.outerWidth(),height:a.outerHeight()})},appendTo:r.document.ghosts(),connectToSortable:EBD.root})}},selectBlock:function(a){r.views.hide("blocks"),r.manager().addClass(n),b.trigger("composerBlockMenuSelected",[a]),r.blocks.droppable.populateDropzones()},"{menu} touchend":function(){},"{menu} touchstart":function(){},"{menu} click":function(a){b.selectBlock(a)
},"{menu} dragstart":function(a){b.drag(a),r.manager().addClass(m),r.views.hide("blocks")},"{menu} dragstop":function(a){b.release(a),r.manager().removeClass(m)},"{menu} dblclick":function(){},drag:function(a){b.workarea().addClass(j),a.is(b.menu)||(a.addClass(k),r.editor.selection.remove(),b.trigger("composerBlockDrag",[a]))},drop:function(a){a.is(b.menu)||(b.trigger("composerBlockBeforeDrop",[a]),a.addClass(f),b.trigger("composerBlockDrop",[a]),b.activateBlock(a))},release:function(a){b.workarea().removeClass(j),a.is(b.menu)||(a.removeClass(f).addClass(g).removeClassAfter(g+" "+k),b.trigger("composerBlockBeforeRelease",[a]),setTimeout(function(){b.trigger("composerBlockRelease",[a])
},1e3))},over:function(a){a.addClass(e),a.hasClass(l)&&b.nest.of(a).addClass(e),b.block.of(a).addClass(e)},out:function(a){a.removeClass(e),a.hasClass(l)&&b.nest.of(a).removeClass(e),b.block.of(a).removeClass(e)},highlight:function(a){b.root().addClass(o),a.addClass(i)},unhighlight:function(a){b.root().removeClass(o),a.removeClass(i)},dataset:{},"{block} click":function(a,c){c.clickHandled||b.refocusing||b.workarea().hasClass("is-resizing")||(c.clickHandled=!0,a.is(b.menu)||a.hasClass("active")||b.activateBlock(a))
},data:function(c,d){if(void 0===c)return b.dataset;var f=parseInt(c);isNaN(f)?f=b.getBlockUid(c):c=b.getBlock(f);var g=b.getBlockHandler(b.getBlockType(c)),h=blocks.getBlockMeta(c),i=b.dataset[f];return b.dataset[f]=g.normalize?g.normalize(i):a.extend({},h.data,i),0==arguments.length||1==arguments.length||2==arguments.length&&a.isString(d)?b.getData(c,d):b.setData.apply(b,arguments)},getData:function(a,c){var d=b.dataset;if(void 0===a)return d;var e=parseInt(a);isNaN(e)?e=b.getBlockUid(a):a=b.getBlock(a);var f=d[e];
return void 0===c?f:f[c]},setData:function(c,d,e){if(void 0===c)return b.dataset;var f=parseInt(c);return isNaN(f)?f=b.getBlockUid(c):c=b.getBlock(c),a.isPlainObject(d)&&void 0===e?a.extend(b.dataset[f],d):b.dataset[f][d]=e},getMechanics:function(){return r.settings.get("blocks.mechanics")},setMechanics:function(a){r.settings.set("blocks.mechanics",a),b.trigger("composerBlockMechanicsChange",a)},"{mechswitch} click":function(a){b.mechswitch().removeClass("btn-primary"),a.addClass("btn-primary"),b.setMechanics(a.attr("data-value"))
},"{block} mouseover":function(a,c){c.hovered||(c.hovered=!0,b.trigger("composerBlockHoverIn",[a]))},"{block} mouseout":function(a){b.trigger("composerBlockHoverOut",[a])},"{self} composerDocumentInit":function(){var c=b.getAllBlocks();c.each(function(){var c=a(this);b.initBlock(c)})},"{self} composerDocumentBlur":function(){return b.refocusing?(b.refocusing=!1,void 0):(b.deactivateBlock(),void 0)},"{editableContent} focusin":function(a,c){c.focusHandled||b.refocusing||r.document.isLegacy()||(b.refocusing=!0,c.focusHandled=!0,setTimeout(function(){var c=(b.workarea(),r.editor.selection.get()),d=c.focusNode;
if(!d)return b.refocusing=!1,void 0;var e=b.block.of(d);if(!e.length)return b.refocusing=!1,void 0;if(!e.hasClass(h)){e.addClass(h);try{if(e.hasClass("active")){var f=b.getBlockHandler(e);f.refocus(e)}else b.activateBlock(e)}catch(g){}e.removeClass(h),setTimeout(function(){b.refocusing=!1},100)}},1))}}}),b.resolve()})}),EasyBlog.module("composer/blocks/media",function(a){var b=this;EasyBlog.Controller("Composer.Blocks.Media",{defaultOptions:a.extend({},EBD.selectors)},function(a,b,c,d,e){return{init:function(){e=a.blocks,d=e.composer
},"{self} mediaInfoShow":function(){d.frame().addClass("layout-media"),d.panels.activate("blocks")},"{self} mediaInfoDisplay":function(a,b,c){var f=c.find(".ebd-block");e.activateBlock(f),f.addClass("active")},"{self} mediaInfoHide":function(){e.panel.deactivatePanel(),d.frame().removeClass("layout-media")},"{self} mediaInsert":function(){e.panel.deactivatePanel(),d.frame().removeClass("layout-media")}}}),b.resolve()}),EasyBlog.module("composer/blocks/toolbar",function(a){var b=this,c="is-editing-block",d="is-moving-block";
EasyBlog.Controller("Composer.Blocks.Toolbar",{elements:["[data-eb-blocks-{close-button|done-button|parent-button|cancel-drop-button|move-button|cancel-move-button|remove-button}]","[data-ebd-block-{toolbar|sort-handle}]"],defaultOptions:a.extend({},EBD.selectors)},function(a,b,e,f,g){return{init:function(){g=a.blocks,f=a.blocks.composer},"{self} composerBlockActivate":function(b,d,e){e.hasClass("is-standalone")||(a.moveButton().toggle(!e.hasClass("is-isolated")),f.manager().addClass(c))},"{self} composerBlockDeactivate":function(){f.manager().removeClass(c)
},"{moveButton} click":function(){f.blocks.droppable.populateDropzones(),f.manager().addClass(d);var c=g.getCurrentBlock();c.addClass("hide").addClass("is-sort-item"),a.trigger("composerBlockMove",[c])},"{cancelMoveButton} click":function(){f.manager().removeClass(d),f.blocks.droppable.dropStop();var b=g.getCurrentBlock();b.removeClass("hide").removeClass("is-sort-item")},"{doneButton} click":function(){g.deactivateBlock()},"{parentButton} click":function(){var b=g.getCurrentBlock();if(b.length){var c=g.getParentBlock(b);
c.length?g.activateBlock(c):g.deactivateBlock()}},"{cancelDropButton} click":function(){f.blocks.droppable.selectedMenu=null,f.blocks.droppable.selectedBlock=null,f.blocks.droppable.dropStop(),f.manager().removeClass("is-dropping-block")},"{closeButton} click":function(){f.views.hide("blocks")},"{toolbar} mouseenter":function(a){var b=g.block.of(a);b.addClass("show-block-hint")},"{toolbar} mouseleave":function(a){var c=g.block.of(a);c.removeClass("show-block-hint")},"{removeButton} click":function(){var c=g.getCurrentBlock();
g.removeBlock(c),f.manager().removeClass("is-editing-block")}}}),b.resolve()}),EasyBlog.module("composer/blogimage",function(a){var b=this;EasyBlog.require().library("image","plupload2","ui/droppable").done(function(){EasyBlog.Controller("Composer.Blogimage",{elements:["[data-eb-composer-blogimage-{browse-button|remove-button|image|workarea}]",".eb-composer-{field}-blogimage"],defaultOptions:{"{browseButton}":"[data-eb-composer-blogimage-placeholder] [data-eb-mm-browse-button]","{placeholder}":"[data-eb-composer-blogimage-placeholder]","{data}":"[data-eb-composer-blogimage-value]","{progress}":"[data-eb-mm-upload-progress]","{addCoverButton}":".eb-document-add-cover-button"}},function(b){return{defaultUri:null,init:function(){var a=b.placeholder();
a.length>0&&EasyBlog.MediaManager.uploader.register(a);var c=b.data().val();b.defaultUri=c,b.workarea().droppable({accept:".eb-mm-file",tolerance:"pointer"})},"{browseButton} mediaSelect":function(a,c,d){b.data().val(d.meta.uri),b.setImage(d.meta.url)},"{placeholder} mediaUploaderFilesAdded":function(a,b,c,d){EasyBlog.MediaManager.uploader.addItem(d[0],a)},"{placeholder} mediaUploaderFileUploaded":function(a,c,d,e,f){var g=f.response,h=g.media,i=h.meta;b.data().val(i.uri),b.setImage(i.url)},"{placeholder} mediaUploaderFileError":function(){},"{placeholder} mediaUploaderError":function(){},setImage:function(c){b.image().css("backgroundImage",a.cssUrl(c)),setTimeout(function(){b.placeholder().addClass("has-image has-art state-done"),b.addCoverButton().addClass("has-cover")
},250)},show:function(){b.composer.document.artboard.show("cover")},hide:function(){b.composer.document.artboard.hide("cover")},toggle:function(){},"{removeButton} click":function(){b.placeholder().removeClass("has-image is-uploading has-art"),b.addCoverButton().removeClass("has-cover"),setTimeout(function(){b.image().css("backgroundImage",""),b.data().val("")},750)}}}),b.resolve()})}),EasyBlog.module("composer/category",function(a){var b=this;EasyBlog.Controller("Composer.Category",{defaultOptions:{"{itemGroupTemplate}":"[data-category-item-group-template]","{itemTemplate}":"[data-category-item-template]","{viewport}":"[data-eb-composer-category-viewport]","{tree}":"[data-eb-composer-category-tree]","{itemGroup}":"[data-eb-composer-category-item-group]","{itemGroupHeader}":"[data-eb-composer-category-item-group-header]","{item}":"[data-eb-composer-category-item]","{itemCount}":"[data-eb-composer-category-item-count]","{itemCheckbox}":"[data-eb-composer-category-item-checkbox]","{count}":"[data-eb-composer-category-count]","{searchTextfield}":"[data-eb-composer-category-search-textfield]","{jsondata}":"[data-eb-composer-category-jsondata]"}},function(b,c,d,e){return{init:function(){e=b.composer,b.initializeTemplates(),b.viewport().on("mousewheel",function(a){a.stopPropagation()
});var a=0,c=JSON.parse(b.jsondata().val());for(b.build(c);category=c[a++];)category.selected&&b.selectCategory(category.id);b.go(0),b.jsondata().remove(),window.catz=b},initializeTemplates:function(){c.templates={},c.templates.itemGroup=b.itemGroupTemplate().detach().html(),c.templates.item=b.itemTemplate().detach().html()},categories:{0:{id:0,title:"",parent_id:null},search:{id:"search",title:"",parent_id:null}},children:{search:[]},keys:{},clones:{},selected:{},build:function(a){for(var d,c=0;d=a[c++];){var e=parseInt(d.id),f=parseInt(d.parent_id);
b.categories[e]=d,(b.children[f]||(b.children[f]=[])).push(d);var g=d.key=d.title.toLowerCase()+" [#"+e+"]";b.keys[g]=d}},childrens:a.memoize(function(c,d){var e=b.children[c];if(!e)return[];var h,f=d?[].concat(b.childrens(c)):a.flatten(e,"id"),g=f.length;if(d)for(h=0;g>h;h++)f=f.concat(b.childrens(f[h],d));return f},function(a,b){return a+(b?"_deep":"")}),parents:a.memoize(function(a){var c=b.categories[a];if(c){if(0==a)return[0];for(var d=[];c=b.categories[c.parent_id];)d.unshift(c.id);return d}}),itemGroup:{get:a.memoize(function(c){var d=b.children[c];
if(d){for(var g,e=b.categories[c],f=b.getItemGroupTemplate(e),h=[],i=0;g=d[i++];)h.push(b.item.get(g.id));return a(f).locate("viewport").append(h),f}})},item:{get:a.memoize(function(a){var c=b.categories[a];if(c){var d=b.children[a],e=b.getItemTemplate(c,d||null);return e}})},getItemGroupTemplate:function(b){var d=a(c.templates.itemGroup);return d.attr("data-id",b.id),d.find("[data-title]").html(b.title),d[0]},getItemTemplate:function(b,d){var e=a(c.templates.item);return e.attr("data-id",b.id),e.find("[data-title]").html(b.title),d&&e.addClass("has-children"),e[0]
},itemCount:{get:a.memoize(function(c){return a(b.item.get(c)).find(b.itemCount.selector)[0]}),set:function(c,d){a(b.itemCount.get(c)).find("span").html(d)}},populate:function(c){var d=b.children[c];if(d){a(b.itemGroup.get(c)).locate("header").removeClass("active");for(var f,e=0,g=b.selected,h=a.values(g);f=d[e++];){var i=f.id,j=b.childrens(i,!0),k=a.intersection(h,j),l=b.childrens(i),m=a.intersection(k,l);if(a(b.item.get(i)).toggleClass("selected",a.has(g,i)).toggleClass("has-selected-children",k.length>0).toggleClass("is-primary",f.isprimary).removeClass("active"),l.length>0){var n=m.length+"/"+l.length;
b.itemCount.set(i,n)}}}},query:a.memoize(function(c){var d=b.keys,e={},f=new RegExp("^"+a.regExpEscape(c),"i");for(key in d)if(key.match(f)){var g=d[key],h=g.parent_id;(e[h]||(e[h]=[])).push(g)}return e}),search:function(c){var d=b.query(c),e=b.clones,f=[],g=[];for(parentId in d){for(var k,h=b.categories[parentId],i=b.getItemGroupTemplate(h),j=d[parentId],g=[],l=0;k=j[l++];){var m=k.id,n=e[m]||(e[m]=a(b.item.get(m)).clone()[0]);g.push(n)}a(i).locate("viewport").append(g),f[0==parentId?"unshift":"push"](i)}b.itemGroup().detach(),a(b.itemGroup.get("search")).empty().append(f).appendTo(b.tree().switchClass("level-0").data("level",0))
},currentTree:[],go:function(c){var d=b.categories[c];if(d){var e=b.tree(),f=b.parents(c),g=f.length-1,h=a.map(f,function(a){return b.itemGroup.get(a)}),i=e.data("level")||0;i>g&&h.push(b.itemGroup().eq(i)),b.itemGroup().detach(),b.populate(a.last(f)),e.append(h).switchClass("level-"+g).data("level",g),b.searchTextfield().val("")}},open:function(c){var d=b.children[c];d&&(a(b.item.get(c)).addClass("active"),b.go(d[0].id))},selectCategory:function(a){b.toggle(a,!0)},deselect:function(a){b.toggle(a,!1)},toggle:function(c,d){var e=a(b.item.get(c)),f=a(b.clones[c]),g=b.selected;
void 0===d&&(d=!e.hasClass("selected")),d?g[c]=parseInt(c):delete g[c];var h=(d?"add":"remove")+"Class";if(e[h]("selected"),f[h]("selected"),0==a.keys(b.selected).length){var h=(d?"remove":"add")+"Class";return e[h]("selected"),f[h]("selected"),EasyBlog.dialog({content:"You must have at least one category assigned to this blog post."}),d?delete g[c]:g[c]=parseInt(c),void 0}b.trigger("category"+(d?"select":"deselect"),[b.categories[c]]),b.count().html(a.keys(b.selected).length)},enableKeyboardNavigation:function(){a(document).off("keydown.composer.category").on("keydown.composer.category",function(a){var c=a.keyCode,d={38:"up",40:"down",37:"left",39:"right"};
switch(c){case 38:case 40:case 37:case 39:b.navigate(d[c]);break;case 32:}})},disableKeyboardNavigation:function(){a(document).off("keydown.composer.category")},navigate:function(a){console.log(a);var c=b.currentClickedItem;switch(a){case"up":c.prev().click();break;case"down":c.next().click();break;case"left":b.go(c.data("id"));break;case"right":}},toArray:function(){if(!b.selected)return[];var a=[];for(id in b.selected){var c=b.categories[id];a.push(c)}return a},lastClickedItem:a(),currentClickedItem:a(),"{item} click":function(a){b.lastClickedItem=b.currentClickedItem,b.currentClickedItem=a
},"{self} composerSave":function(c,d,e){e.data.categories=a.values(b.selected)},"{self} categorysetprimary":function(c,d,e){b.item().removeClass("is-primary"),a(b.item.get(e.id)).addClass("is-primary")},"{itemGroup} click":function(a,c){var d=a.find(b.item.selector),e=b.lastClickedItem,f=b.currentClickedItem;if(c.metaKey||c.ctrlKey||d.removeClass("active"),f.toggleClass("active"),c.shiftKey&&e.length>0){var g=d.index(e),h=d.index(f);d.slice.apply(d,h>g?[g,h]:[h,g]).addClass("active")}d.filter(".active").length>0?b.enableKeyboardNavigation():b.disableKeyboardNavigation()
},"{item} dblclick":function(a){var c=a.data("id");b.open(c)},"{itemCount} click":function(a){var c=b.item.of(a).data("id");b.open(c)},"{itemCheckbox} click":function(a,c){var d=b.item.of(a).data("id");b.toggle(d),c.stopPropagation()},"{itemGroupHeader} click":function(a){var c=b.itemGroup.of(a).data("id");a.addClass("active"),b.go(c)},"{searchTextfield} keyup":a.debounce(function(c){var d=a.trim(c.val());""==d?b.go(0):b.search(d)},250),"{self} composerValidate":function(){}}}),b.resolve()}),EasyBlog.module("composer/datetime",function(a){var b=this;
EasyBlog.require().library("moment","datetimepicker").done(function(){EasyBlog.Controller("Post.Datetime",{defaultOptions:{format:"Do MMM, YYYY HH:mm",originalValue:"","{preview}":"[data-preview]","{calendar}":"[data-calendar]","{cancel}":"[data-cancel]","{datetime}":"[data-datetime]"}},function(b,c){return{init:function(){b.calendar()._datetimepicker({component:"eb",format:c.format}),b.datetimepicker=b.calendar().data("DateTimePicker"),c.originalValue=b.datetime().val(),a.isEmpty(c.originalValue)||b.datetimepicker.setDate(a.moment(c.originalValue))
},"{calendar} dp.change":function(a,d){b.preview().text(d.date.format(c.format)),b.datetime().val(d.date.format("YYYY-MM-DD HH:mm:ss")),b.toggleCancelButton()},"{cancel} click":function(){var d=a.isEmpty(c.originalValue);d||"0000-00-00 00:00:00"==c.originalValue?(b.preview().text(c.emptyText),b.datetime().val("0000-00-00 00:00:00")):b.datetimepicker.setDate(a.moment(c.originalValue)),b.toggleCancelButton()},toggleCancelButton:function(){b.cancel()[b.datetime().val()==c.originalValue?"hide":"show"]()}}}),b.resolve()
})}),EasyBlog.module("composer/debugger",function(a){var b=this;EasyBlog.Controller("Composer.Debugger",{defaultOptions:{"{nestableBlock}":EBD.nestableBlock}},function(b,c,d,e,f){return{id:1,init:function(){e=b.composer,f=b.console;for(method in window.console)!function(a){b.console[a]=function(){b.active&&window.console[a].apply(window.console,arguments)}}(method);return},console:{},active:!1,activate:function(){b.active=!0,b.trigger("composerDebugActivate")},deactivate:function(){b.active=!1,b.trigger("composerDebugDeactivate")
},toggle:function(){b.active?b.activate():b.deactivate()}}}),b.resolve()}),EasyBlog.module("composer/document/overlay",function(a){var b=this;EasyBlog.Controller("Composer.Document.Overlay",{defaultOptions:a.extend({"{overlay}":"[data-ebd-overlay]","{placeholder}":"[data-ebd-overlay-placeholder]","{sortable}":".ui-sortable","{placeholderInsideSortHelper}":".ebd-block.is-helper .ebd-overlay-placeholder"},EBD.selectors)},function(b,c,d,e){return{id:1,init:function(){composer=b.document.composer,e=composer.blocks,b.DocumentOverlay=function(c){this.id=b.id++,this.uid=c.data("uid"),this.type=c.data("type"),this._element=a("<div>",{"class":"ebd-overlay","data-id":this.id,"data-type":this.type,"data-ebd-overlay":""})[0],this._placeholder=a("<div>",{"class":"ebd-overlay-placeholder","data-id":this.id,"data-ebd-overlay-placeholder":""})[0]
},a.extend(b.DocumentOverlay.prototype,{block:function(){return e.getBlock(this.uid)},element:function(){return a(this._element)},placeholder:function(){return a(this._placeholder)},attach:function(){this.element().appendTo(b.document.workarea()),this.reposition()},refresh:function(){this.element().hasClass("is-animating")||this.reposition()},reposition:function(){var c=this.element(),d=c.hasClass("is-sorting")?a(b.placeholderInsideSortHelper().where("id",this.id)[0]||this._placeholder):this.placeholder();c.css({width:d.width(),height:d.height()}).position({my:"left top",at:"left top",of:d})
},emerge:function(){this.element().addClass("hover"),this.block().addClass("hover")},submerge:function(){this.element().removeClass("hover"),this.block().removeClass("hover")},remove:function(){b.remove(this.id)}});var c=a.throttle(function(){b.refresh()},25,{leading:!0,trailing:!0}),d=a.ns("keydown keypress keyup input mousedown click mousemove mouseup touchstart touchmove touchend",".overlay"),f=a.ns("sortactivate sortchange sortover sortout sortdeactivate sortstop",".overlay");composer.document.root().on(d,c),composer.views().on("scrolly.overlay",c),b.element.on(f,b.sortable.selector,c)
},blocks:{},instances:[],keys:{},get:function(a){return b.keys[a]},getInstancesByBlock:function(a){var c=e.getBlockUid(a);return b.blocks[c]||[]},create:function(a){var c=new b.DocumentOverlay(a);b.instances.push(c),b.keys[c.id]=c;var d=b.blocks;return(d[c.uid]||(d[c.uid]=[])).push(c),c},remove:function(c){var d=b.get(c);d.element().remove(),d.placeholder().remove(),a.pull(b.blocks[c],d),delete b.keys[c],a.pull(b.instances,d)},of:function(a){return b.blocks[a.data("uid")]||[]},refresh:function(c){var d=c?b.of(c):b.instances;
a.each(d,function(a,b){b.refresh()})},"{self} composerBlockDrag":function(c,d,e){setTimeout(function(){b.refresh()},1),a.each(b.of(e),function(a,b){b.element().addClass("is-sorting")})},"{dropzone} dropover":function(){setTimeout(function(){b.refresh()},1)},"{block} drag":function(a){b.refresh(a)},drop:function(c){a.each(b.of(c),function(a,b){b.element().removeClass("is-sorting").addClass("is-dropping")}),b.refresh()},"{self} composerBlockDrop":function(a,c,d){b.drop(d)},"{self} composerBlockAdd":function(a,c,d){b.drop(d)
},"{self} composerBlockBeforeRelease":function(c,d,e){a.each(b.of(e),function(a,b){b.element().removeClass("is-dropping").addClass("is-releasing is-animating").removeClassAfter("is-releasing")}),b.refresh(),setTimeout(function(){b.refresh()},50)},"{self} composerBlockRelease":function(c,d,e){a.each(b.of(e),function(a,b){b.element().removeClass("is-animating")}),b.refresh()},"{self} composerDocumentRefresh":function(){b.refresh()},"{self} composerBlockRemove":function(c,d,e){var f=b.getInstancesByBlock(e);a.each(f,function(a,b){b.remove()
})},"{placeholder} click":function(a){var c=a.data("id"),d=b.get(c);d.emerge()},"{placeholder} mouseover":function(a){var c=a.data("id"),d=b.get(c);d.block().hasClass("active")&&d.emerge()},"{overlay} mouseout":function(a){var c=a.data("id"),d=b.get(c);d.submerge()}}}),b.resolve()}),EasyBlog.module("composer/document",function(a){var b=this;EasyBlog.require().script("composer/document/toolbar","composer/document/artboard").done(function(){EasyBlog.Controller("Composer.Document",{hostname:"document",pluginExtendsInstance:!0,elements:["[data-eb-composer-document] .eb-composer-{viewport|viewport-content}","[data-eb-composer-{page|page-viewport|page-header|page-body}]","[data-ebd-{workarea|textarea}]","[data-ebd-workarea-{ghosts}]"],defaultOptions:{"{root}":"[data-ebd-workarea] "+EBD.root,"{block}":EBD.block,"{nest}":EBD.nest,"{titleField}":"[data-eb-composer-form=page] [name=title]"}},function(b,c,d,e,f){return{init:function(){composer=b.composer,b.initPlugins(),b.initTitlebar(),b.isLegacy()?b.initLegacyDocument():b.initEasyBlogDocument()
},initPlugins:function(){b.addPlugin("toolbar"),b.addPlugin("artboard")},initTitlebar:function(){EasyBlog.require().library("expanding").done(function(){var a=b.titleField().one("focus",function(){a.expandingTextarea()})})},initLegacyDocument:function(){if(window.tinyMCE){var c=function(){if(tinyMCE.activeEditor){var d=tinyMCE.activeEditor.editorContainer;a.isString(d)||(d.style.width="100%",a(tinyMCE.activeEditor.contentDocument).find("html").css({height:"100%"}).end().find("body").css({height:"100%",margin:"1em"})),b.setLayout()
}else setTimeout(c,500)};c()}b.trigger("composerDocumentReady")},initEasyBlogDocument:function(){EasyBlog.require().library("selectionchange").script("composer/redactor10","composer/document/overlay").done(function(){e=b.composer.editor=b.workarea().composer({replaceDivs:!1,toolbar:!1}).data("redactor"),f=b.composer.blocks,b.initDocument(),b.setLayout(),b.addPlugin("overlay"),b.initSelectionChange(),b.trigger("composerDocumentReady")})},isLegacy:function(){return"legacy"==composer.getDoctype()},initDocument:function(){b.trigger("composerDocumentInit"),b.workarea().removeClass("is-loading")
},loadDocument:function(a){b.trigger("composerDocumentLoad"),b.root().html(a),b.initDocument()},"{window} resize":a.throttle(function(){b.setLayout()},250),setLayout:function(){b.updateEditorHeight(),b.trigger("composerDocumentRefresh")},updateEditorHeight:function(){b.page().css("height","auto");var c=b.viewport().height(),d=b.pageViewport().height(),e=b.pageHeader().height(),f=d-e,g=108,h=60,i=50,j=c-i-h-g-e;if(window.tinyMCE){if(!tinyMCE.activeEditor)return;var k=tinyMCE.activeEditor.editorContainer;if(a.isString(k)){var l=b.pageBody(),k=a("#"+k);
k.find("#content_tbl").css("height","auto");var m=a(tinyMCE.activeEditor.contentAreaContainer).find("iframe"),n=l.height()-m.height(),o=f-n;m.css("height",o);var p=a(tinyMCE.activeEditor.getElement()),q=f-l.find(".toggle-editor").height();p.css("height",q)}else{var k=a(k).parent(),m=a(k).find("iframe"),n=k.height()-m.height(),o=f-n;m.css("height",o)}}else b.root().css({minHeight:j})},setTitle:function(a){b.titleField().val(a)},insertContent:function(c){if(b.isLegacy())EasyBlog.LegacyEditor.insert(c);else{var d=a(c);
d.is(EBD.block)&&f.addBlock(d)}},setContent:function(a){return b.isLegacy()?EasyBlog.LegacyEditor.setContent(a):void 0},getContent:function(){if(b.isLegacy())return EasyBlog.LegacyEditor.getContent();var c="";return f.getRootBlocks().each(function(){var b=a(this);c+=f.getBlockHTML(b)}),c},getText:function(){if(b.isLegacy())return a(b.getContent()).text();var c=[];return f.getRootBlocks().each(function(){var b=a(this),d=f.getBlockType(b);blockHandler=f.getBlockHandler(d),blockHandler.toText&&c.push(a.trim(blockHandler.toText(b)))
}),c.join("\n")},initSelectionChange:function(){a.selectionchange.start();var c,d=a.debounce(function(){if(e){var d=e.selection.get(),f=d.toString(),g=!1;if(""!=f){var h=d.focusNode,i=b.block.of(h);if(i.closest(".is-standalone").length)return;if(i.hasClass("active"))for(;h!=i[0];){var j=a(h);if(j.editable()){g=!0;break}h=h.parentNode}}g?(b.trigger("composerTextSelect",[d,i,e]),c=!1):!c&&b.trigger("composerTextDeselect",[e])}},100);a(document).on("selectionchange",d)},saveLegacyDocument:function(b){var c=b.data,d=a.sanitizeHTML(EasyBlog.LegacyEditor.getContent());
a.IE<9&&(d=a.toXHTML(d)),c.intro="",c.content=d;var e=d.split('<hr id="system-readmore" />');e.length>1&&(c.intro=e[0],c.content=e[1])},saveEasyBlogDocument:function(b){var c=f.getRootBlocks(),d=[],e=[],g=b.add("Saving document"),h={title:b.data.title,permalink:b.data.permalink,type:composer.getDoctype(),version:"1.0"};a.when.apply(null,e).always(function(){c.each(function(){var b=a(this),c=f.exportBlock(b);d.push(c)}),h.blocks=d,b.data.document=JSON.stringify(h)}).done(function(){g.resolve()}).fail(function(){g.reject(a.Exception("Error saving document."))
})},"{self} composerSave":function(a,c,d){"legacy"==composer.getDoctype()?b.saveLegacyDocument(d):b.saveEasyBlogDocument(d)},"{titleField} keydown":function(a,b){13==b.keyCode&&b.preventDefault()},"{titleField} keyup":function(a){var d=a.val();b.trigger("composerTitleChange",[d])},"{self} composerDebugActivate":function(){},"{self} composerDebugDeactivate":function(){},"{viewport} click":function(c,d){if(!b.isLegacy()){var e=b.workarea();if(!e.hasClass("is-resizing")){var f=a(d.target).parentsUntil(c).andSelf().filter(EBD.block);
f.length||b.trigger("composerDocumentBlur")}}},"{self} composerValidate":function(){}}}),b.resolve()})}),EasyBlog.module("composer/document/toolbar",function(a){var b=this;EasyBlog.Controller("Composer.Document.Toolbar",{elements:["[data-eb-composer-{add-block-button|add-media-button|add-post-button|show-drawer-button}]","[data-eb-composer-{embed-video-button}]","[data-eb-composer-{mobile-blip}]"],defaultOptions:{}},function(b,c,d,e){return{init:function(){e=b.document.composer},activate:function(){b.mobileBlip().addClass("show-menu")
},deactivate:function(){b.mobileBlip().removeClass("show-menu")},isActive:function(){return b.mobileBlip().hasClass("show-menu")},"{mobileBlip} click":function(){return b.isActive()?(b.deactivate(),void 0):(b.activate(),void 0)},"{addBlockButton} click":function(){b.deactivate(),e.views.show("blocks")},"{addMediaButton} click":function(){b.deactivate(),e.views.show("media")},"{embedVideoButton} click":function(){EasyBlog.dialog({content:EasyBlog.ajax("site/views/composer/embedVideoDialog"),bindings:{"{insertButton} click":function(){var a=this.videoUrl().val(),b=this.videoWidth().val(),c=this.videoHeight().val(),d='[embed=videolink]{"video":"'+a+'","width":"'+b+'","height":"'+c+'"}[/embed]';
EasyBlog.LegacyEditor.insert(d),EasyBlog.dialog().close(),this.videoUrl().val("")}}})},"{addPostButton} click":function(){b.deactivate(),e.views.show("posts")},"{showDrawerButton} click":function(){a("[data-eb-composer-frame]").toggleClass("show-drawer")}}}),b.resolve()}),EasyBlog.module("composer/redactor10",function(a){function d(a,b){return new d.prototype.init(a,b)}var b=this;Function.prototype.bind||(Function.prototype.bind=function(a){var b=this;return function(){return b.apply(a)}});var c=0;a.fn.composer=function(b){var c=[],e=Array.prototype.slice.call(arguments,1);
return"string"==typeof b?this.each(function(){var f,d=a.data(this,"redactor");if("-1"!=b.search(/\./)?(f=b.split("."),"undefined"!=typeof d[f[0]]&&(f=d[f[0]][f[1]])):f=d[b],"undefined"!=typeof d&&a.isFunction(f)){var g=f.apply(d,e);void 0!==g&&g!==d&&c.push(g)}else a.error('No such method "'+b+'" for Redactor')}):this.each(function(){a.data(this,"redactor",{}),a.data(this,"redactor",d(this,b))}),0===c.length?this:1===c.length?c[0]:c},a.Redactor=d,a.Redactor.VERSION="10.0.6",a.Redactor.modules=["alignment","block","buffer","build","caret","clean","core","focus","indent","inline","insert","keydown","keyup","list","paragraphize","paste","selection","shortcuts","tabifier","tidy","utils"],a.Redactor.opts={direction:"ltr",plugins:!1,focus:!1,focusEnd:!1,visual:!0,tabindex:!1,linebreaks:!1,replaceDivs:!0,paragraphize:!0,cleanStyleOnEnter:!1,enterKey:!0,cleanOnPaste:!0,cleanSpaces:!0,pastePlainText:!1,preSpaces:4,tabAsSpaces:!1,tabKey:!0,scrollTarget:!1,formatting:["p","blockquote","pre","h1","h2","h3","h4","h5","h6"],formattingAdd:!1,tabifier:!0,deniedTags:["html","head","link","body","meta","script","style","applet"],allowedTags:!1,removeComments:!1,replaceTags:[["strike","del"]],replaceStyles:[["font-weight:\\s?bold","strong"],["font-style:\\s?italic","em"],["text-decoration:\\s?underline","u"],["text-decoration:\\s?line-through","del"]],removeDataAttr:!1,removeAttr:!1,allowedAttr:!1,removeWithoutAttr:["span"],removeEmpty:["p"],shortcuts:{"ctrl+shift+m, meta+shift+m":{func:"inline.removeFormat"},"ctrl+b, meta+b":{func:"inline.format",params:["bold"]},"ctrl+i, meta+i":{func:"inline.format",params:["italic"]},"ctrl+h, meta+h":{func:"inline.format",params:["superscript"]},"ctrl+l, meta+l":{func:"inline.format",params:["subscript"]},"ctrl+shift+7":{func:"list.toggle",params:["orderedlist"]},"ctrl+shift+8":{func:"list.toggle",params:["unorderedlist"]}},shortcutsAdd:!1,buffer:[],rebuffer:[],emptyHtml:"<p>&#x200b;</p>",invisibleSpace:"&#x200b;",imageTypes:["image/png","image/jpeg","image/gif"],indentValue:20,verifiedTags:["a","img","b","strong","sub","sup","i","em","u","small","strike","del","cite","ul","ol","li"],inlineTags:["strong","b","u","em","i","code","del","ins","samp","kbd","sup","sub","mark","var","cite","small"],alignmentTags:["P","H1","H2","H3","H4","H5","H6","DL","DT","DD","DIV","TD","BLOCKQUOTE","OUTPUT","FIGCAPTION","ADDRESS","SECTION","HEADER","FOOTER","ASIDE","ARTICLE"],blockLevelElements:["PRE","UL","OL","LI"]},d.fn=a.Redactor.prototype={keyCode:{BACKSPACE:8,DELETE:46,DOWN:40,ENTER:13,SPACE:32,ESC:27,TAB:9,CTRL:17,META:91,SHIFT:16,ALT:18,RIGHT:39,LEFT:37,LEFT_WIN:91},init:function(b,d){this.$element=a(b),this.uuid=c++,this.rtePaste=!1,this.$pasteBox=!1,this.loadOptions(d),this.loadModules(),this.formatting={},a.merge(this.opts.blockLevelElements,this.opts.alignmentTags),this.reIsBlock=new RegExp("^("+this.opts.blockLevelElements.join("|")+")$","i"),this.tidy.setupAllowed(),a.extend(this.opts.shortcuts,this.opts.shortcutsAdd),this.core.setCallback("start"),this.start=!0,this.build.run()
},loadOptions:function(b){this.opts=a.extend({},a.extend(!0,{},a.Redactor.opts),this.$element.data(),b)},getModuleMethods:function(a){return Object.getOwnPropertyNames(a).filter(function(b){return"function"==typeof a[b]})},loadModules:function(){for(var b=a.Redactor.modules.length,c=0;b>c;c++)this.bindModuleMethods(a.Redactor.modules[c])},bindModuleMethods:function(a){if("undefined"!=typeof this[a]){this[a]=this[a]();for(var b=this.getModuleMethods(this[a]),c=b.length,d=0;c>d;d++)this[a][b[d]]=this[a][b[d]].bind(this)
}},block:function(){return{formatting:function(a){this.block.clearStyle=!1;var b,c;"undefined"!=typeof this.formatting[a].data?b="data":"undefined"!=typeof this.formatting[a].attr?b="attr":"undefined"!=typeof this.formatting[a].class&&(b="class"),"undefined"!=typeof this.formatting[a].clear&&(this.block.clearStyle=!0),b&&(c=this.formatting[a][b]),this.block.format(this.formatting[a].tag,b,c)},format:function(b,c,d){"quote"==b&&(b="blockquote");var e=["p","pre","blockquote","h1","h2","h3","h4","h5","h6"];-1!=a.inArray(b,e)&&(this.block.isRemoveInline="pre"==b||-1!=b.search(/h[1-6]/i),this.utils.browser("msie")||this.$editor.focus(),this.block.blocks=this.selection.getBlocks(),this.block.blocksSize=this.block.blocks.length,this.block.type=c,this.block.value=d,this.buffer.set(),this.selection.save(),this.block.set(b),this.selection.restore())
},set:function(a){this.selection.get(),this.block.containerTag=this.range.commonAncestorContainer.tagName,this.range.collapsed?this.block.setCollapsed(a):this.block.setMultiple(a)},setCollapsed:function(b){var c=this.block.blocks[0];if(c!==!1){if("LI"==c.tagName){if("blockquote"!=b)return;return this.block.formatListToBlockquote(),void 0}var d="TD"==this.block.containerTag||"TH"==this.block.containerTag;if(d&&!this.opts.linebreaks)document.execCommand("formatblock",!1,"<"+b+">"),c=this.selection.getBlock(),this.block.toggle(a(c));
else if(c.tagName.toLowerCase()!=b)if(this.opts.linebreaks&&"p"==b)a(c).prepend("<br>").append("<br>"),this.utils.replaceWithContents(c);else{var e=this.utils.replaceToTag(c,b);this.block.toggle(e),"p"!=b&&"blockquote"!=b&&e.find("img").remove(),this.block.isRemoveInline&&this.utils.removeInlineTags(e),("p"==b||this.block.headTag)&&e.find("p").contents().unwrap(),this.block.formatTableWrapping(e)}else if("blockquote"==b&&c.tagName.toLowerCase()==b)if(this.opts.linebreaks)a(c).prepend("<br>").append("<br>"),this.utils.replaceWithContents(c);
else{var f=this.utils.replaceToTag(c,"p");this.block.toggle(f)}else c.tagName.toLowerCase()==b&&this.block.toggle(a(c))}},setMultiple:function(b){var c=this.block.blocks[0],d="TD"==this.block.containerTag||"TH"==this.block.containerTag;if(c!==!1&&1===this.block.blocksSize)if(c.tagName.toLowerCase()==b&&"blockquote"==b)if(this.opts.linebreaks)a(c).prepend("<br>").append("<br>"),this.utils.replaceWithContents(c);else{var e=this.utils.replaceToTag(c,"p");this.block.toggle(e)}else if("LI"==c.tagName){if("blockquote"!=b)return;
this.block.formatListToBlockquote()}else if("BLOCKQUOTE"==this.block.containerTag)this.block.formatBlockquote(b);else if(this.opts.linebreaks&&(d||this.range.commonAncestorContainer!=c))this.block.formatWrap(b);else if(this.opts.linebreaks&&"p"==b)a(c).prepend("<br>").append("<br>"),this.utils.replaceWithContents(c);else if("TD"===c.tagName)this.block.formatWrap(b);else{var f=this.utils.replaceToTag(c,b);this.block.toggle(f),this.block.isRemoveInline&&this.utils.removeInlineTags(f),("p"==b||this.block.headTag)&&f.find("p").contents().unwrap()
}else if(this.opts.linebreaks||"p"!=b){if("blockquote"==b){for(var g=0,h=0;h<this.block.blocksSize;h++)"BLOCKQUOTE"==this.block.blocks[h].tagName&&g++;if(g==this.block.blocksSize)return a.each(this.block.blocks,a.proxy(function(b,c){this.opts.linebreaks?(a(c).prepend("<br>").append("<br>"),this.utils.replaceWithContents(c)):this.utils.replaceToTag(c,"p")},this)),void 0}this.block.formatWrap(b)}else{var i=0,j=!1;"class"==this.block.type&&(j="toggle",i=a(this.block.blocks).filter("."+this.block.value).size(),this.block.blocksSize==i?j="toggle":this.block.blocksSize>i?j="set":0===i&&(j="set"));
var k=["ul","ol","li","td","th","dl","dt","dd"];a.each(this.block.blocks,a.proxy(function(c,d){if(-1==a.inArray(d.tagName.toLowerCase(),k)){var e=this.utils.replaceToTag(d,b);j?"toggle"==j?this.block.toggle(e):"remove"==j?this.block.remove(e):"set"==j&&this.block.setForce(e):this.block.toggle(e),"p"!=b&&"blockquote"!=b&&e.find("img").remove(),this.block.isRemoveInline&&this.utils.removeInlineTags(e),("p"==b||this.block.headTag)&&e.find("p").contents().unwrap()}},this))}},setForce:function(a){return this.block.clearStyle&&a.removeAttr("class").removeAttr("style"),"class"==this.block.type?(a.addClass(this.block.value),void 0):"attr"==this.block.type||"data"==this.block.type?(a.attr(this.block.value.name,this.block.value.value),void 0):void 0
},toggle:function(a){return this.block.clearStyle&&a.removeAttr("class").removeAttr("style"),"class"==this.block.type?(a.toggleClass(this.block.value),void 0):"attr"==this.block.type||"data"==this.block.type?(a.attr(this.block.value.name)==this.block.value.value?a.removeAttr(this.block.value.name):a.attr(this.block.value.name,this.block.value.value),void 0):(a.removeAttr("style class"),void 0)},remove:function(a){a.removeClass(this.block.value)},formatListToBlockquote:function(){var b=a(this.block.blocks[0]).closest("ul, ol");
a(b).find("ul, ol").contents().unwrap(),a(b).find("li").append(a("<br>")).contents().unwrap();var c=this.utils.replaceToTag(b,"blockquote");this.block.toggle(c)},formatBlockquote:function(b){document.execCommand("outdent"),document.execCommand("formatblock",!1,b),this.clean.clearUnverified(),this.$editor.find("p:empty").remove();var c=this.selection.getBlock();"p"!=b&&a(c).find("img").remove(),this.opts.linebreaks||this.block.toggle(a(c)),this.$editor.find("ul, ol, tr, blockquote, p").each(a.proxy(this.utils.removeEmpty,this)),this.opts.linebreaks&&"p"==b&&this.utils.replaceWithContents(c)
},formatWrap:function(b){if("UL"==this.block.containerTag||"OL"==this.block.containerTag){if("blockquote"!=b)return;this.block.formatListToBlockquote()}var c=this.selection.wrap(b);if(c!==!1){var d=a(c);this.block.formatTableWrapping(d);var e=d.find(this.opts.blockLevelElements.join(",")+", td, table, thead, tbody, tfoot, th, tr");(this.opts.linebreaks&&"p"==b||"pre"==b||"blockquote"==b)&&e.append("<br />"),e.contents().unwrap(),"p"!=b&&"blockquote"!=b&&d.find("img").remove(),a.each(this.block.blocks,a.proxy(this.utils.removeEmpty,this)),d.append(this.selection.getMarker(2)),this.opts.linebreaks||this.block.toggle(d),this.$editor.find("ul, ol, tr, blockquote, p").each(a.proxy(this.utils.removeEmpty,this)),d.find("blockquote:empty").remove(),this.block.isRemoveInline&&this.utils.removeInlineTags(d),this.opts.linebreaks&&"p"==b&&this.utils.replaceWithContents(d)
}},formatTableWrapping:function(a){0!==a.closest("table").size()&&(0===a.closest("tr").size()&&a.wrap("<tr>"),0===a.closest("td").size()&&0===a.closest("th").size()&&a.wrap("<td>"))},removeData:function(b){var d=this.selection.getBlocks();a(d).removeAttr("data-"+b)},setData:function(b,c){var d=this.selection.getBlocks();a(d).attr("data-"+b,c)},toggleData:function(b,c){var d=this.selection.getBlocks();a.each(d,function(){a(this).attr("data-"+b)?a(this).removeAttr("data-"+b):a(this).attr("data-"+b,c)})},removeAttr:function(b){var d=this.selection.getBlocks();
a(d).removeAttr(b)},setAttr:function(b,c){var d=this.selection.getBlocks();a(d).attr(b,c)},toggleAttr:function(b,c){var d=this.selection.getBlocks();a.each(d,function(){a(this).attr(name)?a(this).removeAttr(name):a(this).attr(name,c)})},removeClass:function(b){var c=this.selection.getBlocks();a(c).removeClass(b),this.utils.removeEmptyAttr(c,"class")},setClass:function(b){var c=this.selection.getBlocks();a(c).addClass(b)},toggleClass:function(b){var c=this.selection.getBlocks();a(c).toggleClass(b)}}},buffer:function(){return{set:function(a){"undefined"==typeof a||"undo"==a?this.buffer.setUndo():this.buffer.setRedo()
},setUndo:function(){this.selection.save(),this.opts.buffer.push(this.$editor.html()),this.selection.restore()},setRedo:function(){this.selection.save(),this.opts.rebuffer.push(this.$editor.html()),this.selection.restore()},getUndo:function(){this.$editor.html(this.opts.buffer.pop())},getRedo:function(){this.$editor.html(this.opts.rebuffer.pop())},add:function(){this.opts.buffer.push(this.$editor.html())},undo:function(){0!==this.opts.buffer.length&&(this.buffer.set("redo"),this.buffer.getUndo(),this.selection.restore())
},redo:function(){0!==this.opts.rebuffer.length&&(this.buffer.set("undo"),this.buffer.getRedo(),this.selection.restore())}}},build:function(){return{run:function(){this.build.createContainerBox(),this.build.loadEditor(),this.build.enableEditor(),this.build.setCodeAndCall()},createContainerBox:function(){this.$box=this.$element},enableEditor:function(){this.$editor.attr({dir:this.opts.direction})},loadEditor:function(){this.$editor=this.$element},setCodeAndCall:function(){this.build.setOptions(),this.build.callEditor()
},callEditor:function(){this.build.disableMozillaEditing(),this.build.setEvents(),this.build.setHelpers(),this.opts.toolbar&&(this.opts.toolbar=this.toolbar.init(),this.toolbar.build()),this.build.plugins(),this.core.setCallback("init")},setOptions:function(){this.opts.linebreaks&&this.$editor.addClass("redactor-linebreaks"),this.opts.tabindex&&this.$editor.attr("tabindex",this.opts.tabindex)},setEvents:function(){this.$editor.on("drop.redactor",a.proxy(function(b){if(b=b.originalEvent||b,void 0===window.FormData||!b.dataTransfer)return!0;
var c=b.dataTransfer.files.length;return 0===c?(setTimeout(a.proxy(this.clean.clearUnverified,this),1),this.core.setCallback("drop",b),!0):(b.preventDefault(),setTimeout(a.proxy(this.clean.clearUnverified,this),1),this.core.setCallback("drop",b),void 0)},this)),this.$editor.on("click.redactor",a.proxy(function(a){var b="click";("click"==this.core.getEvent()||"arrow"==this.core.getEvent())&&(b=!1),this.core.addEvent(b),this.core.setCallback("click",a)},this)),this.$editor.on("paste.redactor",a.proxy(this.paste.init,this)),this.$editor.on("keydown.redactor",a.proxy(this.keydown.init,this)),this.$editor.on("keyup.redactor",a.proxy(this.keyup.init,this)),this.$editor.on("dragstart.redactor",function(a,b){b||(a.preventDefault(),a.stopPropagation())
}),a.isFunction(this.opts.focusCallback)&&this.$editor.on("focus.redactor",a.proxy(this.opts.focusCallback,this));var b;a(document).on("mousedown",function(c){b=a(c.target)})},setHelpers:function(){this.opts.focus&&setTimeout(a.proxy(this.focus.setStart,this),100),this.opts.focusEnd&&setTimeout(a.proxy(this.focus.setEnd,this),100)},plugins:function(){this.opts.plugins&&RedactorPlugins&&a.each(this.opts.plugins,a.proxy(function(b,c){if("undefined"!=typeof RedactorPlugins[c]){if(-1!==a.inArray(c,a.Redactor.modules))return a.error('Plugin name "'+c+"\" matches the name of the Redactor's module."),void 0;
if(a.isFunction(RedactorPlugins[c])){this[c]=RedactorPlugins[c]();for(var d=this.getModuleMethods(this[c]),e=d.length,f=0;e>f;f++)this[c][d[f]]=this[c][d[f]].bind(this);a.isFunction(this[c].init)&&this[c].init()}}},this))},disableMozillaEditing:function(){if(this.utils.browser("mozilla")){document.designMode="on";try{document.execCommand("enableObjectResizing",!1,!1),document.execCommand("enableInlineTableEditing",!1,!1)}catch(a){}document.designMode="off"}}}},caret:function(){return{setStart:function(b){if(this.utils.isBlock(b))this.caret.set(b,0,b,0);
else{var c=this.utils.createSpaceElement();a(b).prepend(c),this.caret.setEnd(c)}},setEnd:function(a){this.caret.set(a,1,a,1)},set:function(b,c,d,e){if(this.utils.browser("msie")||this.$editor.focus(),b=b[0]||b,d=d[0]||d,this.utils.isBlockTag(b.tagName)&&""===b.innerHTML&&(b.innerHTML=this.opts.invisibleSpace),"BR"==b.tagName&&this.opts.linebreaks===!1){var f=a(this.opts.emptyHtml)[0];a(b).replaceWith(f),b=f,d=b}this.selection.get();try{this.range.setStart(b,c),this.range.setEnd(d,e)}catch(g){}this.selection.addRange()
},setAfter:function(b){try{var c=a(b)[0].tagName;if("BR"==c||this.utils.isBlock(b))"BR"!=c&&this.utils.browser("msie")?this.caret.setStart(a(b).next()):this.caret.setAfterOrBefore(b,"after");else{var d=this.utils.createSpaceElement();a(b).after(d),this.caret.setEnd(d)}}catch(e){var d=this.utils.createSpaceElement();a(b).after(d),this.caret.setEnd(d)}},setBefore:function(b){this.utils.isBlock(b)?this.caret.setEnd(a(b).prev()):this.caret.setAfterOrBefore(b,"before")},setAfterOrBefore:function(a,b){if(this.utils.browser("msie")||this.$editor.focus(),a=a[0]||a,this.selection.get(),"after"==b)try{this.range.setStartAfter(a),this.range.setEndAfter(a)
}catch(c){}else try{this.range.setStartBefore(a),this.range.setEndBefore(a)}catch(c){}this.range.collapse(!1),this.selection.addRange()},getOffsetOfElement:function(b){b=b[0]||b,this.selection.get();var c=this.range.cloneRange();return c.selectNodeContents(b),c.setEnd(this.range.endContainer,this.range.endOffset),a.trim(c.toString()).length},getOffset:function(){var a=0,b=window.getSelection();if(b.rangeCount>0){var c=window.getSelection().getRangeAt(0),d=c.cloneRange();d.selectNodeContents(this.$editor[0]),d.setEnd(c.endContainer,c.endOffset),a=d.toString().length
}return a},setOffset:function(a,b){"undefined"==typeof b&&(b=a),this.focus.isFocused()||this.focus.setStart();for(var d,e=(this.selection.get(),0),f=document.createTreeWalker(this.$editor[0],NodeFilter.SHOW_TEXT,null,null);d=f.nextNode();)if(e+=d.nodeValue.length,e>a&&(this.range.setStart(d,d.nodeValue.length+a-e),a=1/0),e>=b){this.range.setEnd(d,d.nodeValue.length+b-e);break}this.range.collapse(!1),this.selection.addRange()},setToPoint:function(a,b){this.caret.setOffset(a,b)},getCoords:function(){return this.caret.getOffset()
}}},clean:function(){return{onSet:function(b){b=this.clean.savePreCode(b),b=b.replace(/<script(.*?[^>]?)>([\w\W]*?)<\/script>/gi,'<pre class="redactor-script-tag" style="display: none;" $1>$2</pre>'),b=b.replace(/\$/g,"&#36;"),b=b.replace(/\u201d/g,'"'),b=b.replace(/\u2018/g,"'"),b=b.replace(/\u2019/g,"'"),this.opts.replaceDivs&&(b=this.clean.replaceDivs(b)),this.opts.linebreaks&&(b=this.clean.replaceParagraphsToBr(b)),b=this.clean.saveFormTags(b);var c=a("<div>");c.html(b);var d=c.find("font[style]");return 0!==d.length&&(d.replaceWith(function(){var b=a(this),c=a("<span>").attr("style",b.attr("style"));
return c.append(b.contents())}),b=c.html()),c.remove(),b=b.replace(/<font(.*?[^<])>/gi,""),b=b.replace(/<\/font>/gi,""),b=this.tidy.load(b),this.opts.paragraphize&&(b=this.paragraphize.load(b)),b=this.clean.setVerified(b),b=this.clean.convertInline(b)},onSync:function(b){if(b=b.replace(/[\u200B-\u200D\uFEFF]/g,""),b=b.replace(/&#x200b;/gi,""),this.opts.cleanSpaces&&(b=b.replace(/&nbsp;/gi," ")),-1!=b.search(/^<p>(||\s||<br\s?\/?>||&nbsp;)<\/p>$/i))return"";b=b.replace(/<pre class="redactor-script-tag" style="display: none;"(.*?[^>]?)>([\w\W]*?)<\/pre>/gi,"<script$1>$2</script>"),b=this.clean.restoreFormTags(b);
var c={"\u2122":"&trade;","\xa9":"&copy;","\u2026":"&hellip;","\u2014":"&mdash;","\u2010":"&dash;"};return a.each(c,function(a,c){b=b.replace(new RegExp(a,"g"),c)}),b=b.replace(new RegExp("<br\\s?/?></li>","gi"),"</li>"),b=b.replace(new RegExp("</li><br\\s?/?>","gi"),"</li>"),b=b.replace(new RegExp('<div(.*?[^>]) data-tagblock="redactor"(.*?[^>])>',"gi"),"<div$1$2>"),b=b.replace(new RegExp('<(.*?) data-verified="redactor"(.*?[^>])>',"gi"),"<$1$2>"),b=b.replace(new RegExp('<span(.*?[^>])srel="(.*?[^>])"(.*?[^>])>',"gi"),"<span$1$3>"),b=b.replace(new RegExp('<img(.*?[^>])srel="(.*?[^>])"(.*?[^>])>',"gi"),"<img$1$3>"),b=b.replace(new RegExp('<img(.*?[^>])sstyle="" (.*?[^>])>',"gi"),"<img$1 $2>"),b=b.replace(new RegExp("<img(.*?[^>])sstyle (.*?[^>])>","gi"),"<img$1 $2>"),b=b.replace(new RegExp('<span class="redactor-invisible-space">(.*?)</span>',"gi"),"$1"),b=b.replace(/ data-save-url="(.*?[^>])"/gi,""),b=b.replace(/<span(.*?)id="redactor-image-box"(.*?[^>])>([\w\W]*?)<img(.*?)><\/span>/gi,"$3<img$4>"),b=b.replace(/<span(.*?)id="redactor-image-resizer"(.*?[^>])>(.*?)<\/span>/gi,""),b=b.replace(/<span(.*?)id="redactor-image-editter"(.*?[^>])>(.*?)<\/span>/gi,""),b=b.replace(/<font(.*?[^<])>/gi,""),b=b.replace(/<\/font>/gi,""),b=this.tidy.load(b),this.opts.linkNofollow&&(b=b.replace(/<a(.*?)rel="nofollow"(.*?[^>])>/gi,"<a$1$2>"),b=b.replace(/<a(.*?[^>])>/gi,'<a$1 rel="nofollow">')),b=b.replace(/<(.*?) data-redactor-tag="(.*?)"(.*?[^>])>/gi,"<$1$3>"),b=b.replace(/<(.*?) data-redactor-class="(.*?)"(.*?[^>])>/gi,"<$1$3>"),b=b.replace(/<(.*?) data-redactor-style="(.*?)"(.*?[^>])>/gi,"<$1$3>"),b=b.replace(new RegExp('<(.*?) data-verified="redactor"(.*?[^>])>',"gi"),"<$1$2>"),b=b.replace(new RegExp('<(.*?) data-verified="redactor">',"gi"),"<$1>")
},onPaste:function(b,c){if(b=a.trim(b),b=b.replace(/\$/g,"&#36;"),b=b.replace(/\u201d/g,'"'),b=b.replace(/\u201c/g,'"'),b=b.replace(/\u2018/g,"'"),b=b.replace(/\u2019/g,"'"),b=b.replace(/<span class="Apple-converted-space">&nbsp;<\/span>/gi," "),b=b.replace(/<span class="Apple-tab-span"[^>]*>\t<\/span>/gi,"	"),b=b.replace(/<span[^>]*>(\s|&nbsp;)<\/span>/gi," "),this.opts.pastePlainText)return this.clean.getPlainText(b);if("undefined"==typeof c){if(this.utils.isCurrentOrParent(["FIGCAPTION","A"]))return this.clean.getPlainText(b,!1);
if(this.utils.isCurrentOrParent("PRE"))return this.clean.getPreCode(b);if(this.utils.isCurrentOrParent(["BLOCKQUOTE","H1","H2","H3","H4","H5","H6"])){if(b=this.clean.getOnlyImages(b),!this.utils.browser("msie")){var d=this.selection.getBlock();d&&"P"==d.tagName&&(b=b.replace(/<img(.*?)>/gi,"<p><img$1></p>"))}return b}if(this.utils.isCurrentOrParent(["TD"]))return b=this.clean.onPasteTidy(b,"td"),this.opts.linebreaks&&(b=this.clean.replaceParagraphsToBr(b)),b=this.clean.replaceDivsToBr(b);if(this.utils.isCurrentOrParent(["LI"]))return this.clean.onPasteTidy(b,"li")
}return b=this.clean.isSingleLine(b,c),this.clean.singleLine||(this.opts.linebreaks&&(b=this.clean.replaceParagraphsToBr(b)),this.opts.replaceDivs&&(b=this.clean.replaceDivs(b)),b=this.clean.saveFormTags(b)),b=this.clean.onPasteWord(b),b=this.clean.onPasteExtra(b),b=this.clean.onPasteTidy(b,"all"),!this.clean.singleLine&&this.opts.paragraphize&&(b=this.paragraphize.load(b)),b=this.clean.removeDirtyStyles(b),b=this.clean.onPasteRemoveSpans(b),b=this.clean.onPasteRemoveEmpty(b),b=this.clean.convertInline(b)},onPasteWord:function(a){return a=a.replace(/<!--[\s\S]*?-->/gi,""),a=a.replace(/<style[^>]*>[\s\S]*?<\/style>/gi,""),/(class=\"?Mso|style=\"[^\"]*\bmso\-|w:WordDocument)/.test(a)&&(a=this.clean.onPasteIeFixLinks(a),a=a.replace(/<img(.*?)v:shapes=(.*?)>/gi,""),a=a.replace(/src="file\:\/\/(.*?)"/,'src=""'),a=a.replace(/<p(.*?)class="MsoListParagraphCxSpFirst"([\w\W]*?)<\/p>/gi,"<ul><li$2</li>"),a=a.replace(/<p(.*?)class="MsoListParagraphCxSpMiddle"([\w\W]*?)<\/p>/gi,"<li$2</li>"),a=a.replace(/<p(.*?)class="MsoListParagraphCxSpLast"([\w\W]*?)<\/p>/gi,"<li$2</li></ul>"),a=a.replace(/<p(.*?)class="MsoListParagraph"([\w\W]*?)<\/p>/gi,"<ul><li$2</li></ul>"),a=a.replace(/\xb7/g,""),a=a.replace(/<p class="Mso(.*?)"/gi,"<p"),a=a.replace(/ class=\"(mso[^\"]*)\"/gi,""),a=a.replace(/ class=(mso\w+)/gi,""),a=a.replace(/<o:p(.*?)>([\w\W]*?)<\/o:p>/gi,"$2"),a=a.replace(/\n/g," "),a=a.replace(/<p>\n?<li>/gi,"<li>")),this.opts.cleanSpaces&&(a=a.replace(/(\s|&nbsp;)+/g," ")),a
},onPasteExtra:function(a){return a=a.replace(/<b\sid="internal-source-marker(.*?)">([\w\W]*?)<\/b>/gi,"$2"),a=a.replace(/<b(.*?)id="docs-internal-guid(.*?)">([\w\W]*?)<\/b>/gi,"$3"),a=a.replace(/<span[^>]*(font-style: italic; font-weight: bold|font-weight: bold; font-style: italic)[^>]*>/gi,'<span style="font-weight: bold;"><span style="font-style: italic;">'),a=a.replace(/<span[^>]*font-style: italic[^>]*>/gi,'<span style="font-style: italic;">'),a=a.replace(/<span[^>]*font-weight: bold[^>]*>/gi,'<span style="font-weight: bold;">'),a=a.replace(/<span[^>]*text-decoration: underline[^>]*>/gi,'<span style="text-decoration: underline;">'),a=a.replace(/<img>/gi,""),a=a.replace(/\n{3,}/gi,"\n"),a=a.replace(/<font(.*?)>([\w\W]*?)<\/font>/gi,"$2"),a=a.replace(/<p><p>/gi,"<p>"),a=a.replace(/<\/p><\/p>/gi,"</p>"),a=a.replace(/<li>(\s*|\t*|\n*)<p>/gi,"<li>"),a=a.replace(/<\/p>(\s*|\t*|\n*)<\/li>/gi,"</li>"),a=a.replace(/<\/p>\s<p/gi,"</p><p"),a=a.replace(/<img src="webkit-fake-url\:\/\/(.*?)"(.*?)>/gi,""),a=a.replace(/<p>\u2022([\w\W]*?)<\/p>/gi,"<li>$1</li>"),this.utils.browser("mozilla")&&(a=a.replace(/<br\s?\/?>$/gi,"")),a
},onPasteTidy:function(a,b){var c=["span","a","pre","blockquote","small","em","strong","code","kbd","mark","address","cite","var","samp","dfn","sup","sub","b","i","u","del","ol","ul","li","dl","dt","dd","p","br","video","audio","iframe","embed","param","object","img","table","td","th","tr","tbody","tfoot","thead","h1","h2","h3","h4","h5","h6"],d=!1,e=[["a","*"],["img",["src","alt"]],["span",["class","rel","data-verified"]],["iframe","*"],["video","*"],["audio","*"],["embed","*"],["object","*"],["param","*"],["source","*"]];
"all"==b?(d=["p","span","h1","h2","h3","h4","h5","h6"],e=[["table","class"],["td",["colspan","rowspan"]],["a","*"],["img",["src","alt","data-redactor-inserted-image"]],["span",["class","rel","data-verified"]],["iframe","*"],["video","*"],["audio","*"],["embed","*"],["object","*"],["param","*"],["source","*"]]):"td"==b?c=["ul","ol","li","span","a","small","em","strong","code","kbd","mark","cite","var","samp","dfn","sup","sub","b","i","u","del","ol","ul","li","dl","dt","dd","br","iframe","video","audio","embed","param","object","img","h1","h2","h3","h4","h5","h6"]:"li"==b&&(c=["ul","ol","li","span","a","small","em","strong","code","kbd","mark","cite","var","samp","dfn","sup","sub","b","i","u","del","br","iframe","video","audio","embed","param","object","img"]);
var f={deniedTags:!1,allowedTags:c,removeComments:!0,removePhp:!0,removeAttr:!1,allowedAttr:e,removeEmpty:d};return this.tidy.load(a,f)},onPasteRemoveEmpty:function(a){return a=a.replace(/<(p|h[1-6])>(|\s|\n|\t|<br\s?\/?>)<\/(p|h[1-6])>/gi,""),this.opts.linebreaks||(a=a.replace(/<br>$/i,"")),a},onPasteRemoveSpans:function(a){return a=a.replace(/<span>(.*?)<\/span>/gi,"$1"),a=a.replace(/<span[^>]*>\s|&nbsp;<\/span>/gi," ")},onPasteIeFixLinks:function(b){if(!this.utils.browser("msie"))return b;var c=a.trim(b);
return 0===c.search(/^<a(.*?)>(.*?)<\/a>$/i)&&(b=b.replace(/^<a(.*?)>(.*?)<\/a>$/i,"$2")),b},isSingleLine:function(a,b){if(this.clean.singleLine=!1,"undefined"==typeof b){var c=this.opts.blockLevelElements.join("|").replace("P|","").replace("DIV|",""),d=a.match(new RegExp("</("+c+")>","gi")),e=a.match(/<\/(p|div)>/gi);if(!d&&(null===e||e&&e.length<=1)){var f=a.match(/<br\s?\/?>/gi),g=a.match(/<img(.*?[^>])>/gi);f||g||(this.clean.singleLine=!0,a=a.replace(/<\/?(p|div)(.*?)>/gi,""))}}return a},stripTags:function(a,b){b=(((b||"")+"").toLowerCase().match(/<[a-z][a-z0-9]*>/g)||[]).join("");
var c=/<\/?([a-z][a-z0-9]*)\b[^>]*>/gi;return a.replace(c,function(a,c){return b.indexOf("<"+c.toLowerCase()+">")>-1?a:""})},savePreCode:function(b){var c=b.match(/<(pre|code)(.*?)>([\w\W]*?)<\/(pre|code)>/gi);return null!==c&&a.each(c,a.proxy(function(a,c){var d=c.match(/<(pre|code)(.*?)>([\w\W]*?)<\/(pre|code)>/i);d[3]=d[3].replace(/<br\s?\/?>/g,"\n"),d[3]=d[3].replace(/&nbsp;/g," "),this.opts.preSpaces&&(d[3]=d[3].replace(/\t/g,Array(this.opts.preSpaces+1).join(" "))),d[3]=this.clean.encodeEntities(d[3]),d[3]=d[3].replace(/\$/g,"&#36;"),b=b.replace(c,"<"+d[1]+d[2]+">"+d[3]+"</"+d[1]+">")
},this)),b},getTextFromHtml:function(b){b=b.replace(/<br\s?\/?>|<\/H[1-6]>|<\/p>|<\/div>|<\/li>|<\/td>/gi,"\n");var c=document.createElement("div");return c.innerHTML=b,b=c.textContent||c.innerText,a.trim(b)},getPlainText:function(a,b){return a=this.clean.getTextFromHtml(a),a=a.replace(/\n/g,"<br />"),this.opts.paragraphize&&"undefined"==typeof b&&(a=this.paragraphize.load(a)),a},getPreCode:function(a){return a=a.replace(/<img(.*?) style="(.*?)"(.*?[^>])>/gi,"<img$1$3>"),a=a.replace(/<img(.*?)>/gi,"&lt;img$1&gt;"),a=this.clean.getTextFromHtml(a),this.opts.preSpaces&&(a=a.replace(/\t/g,Array(this.opts.preSpaces+1).join(" "))),a=this.clean.encodeEntities(a)
},getOnlyImages:function(a){return a=a.replace(/<img(.*?)>/gi,"[img$1]"),a=a.replace(/<([Ss]*?)>/gi,""),a=a.replace(/\[img(.*?)\]/gi,"<img$1>")},getOnlyLinksAndImages:function(a){return a=a.replace(/<a(.*?)href="(.*?)"(.*?)>([\w\W]*?)<\/a>/gi,'[a href="$2"]$4[/a]'),a=a.replace(/<img(.*?)>/gi,"[img$1]"),a=a.replace(/<(.*?)>/gi,""),a=a.replace(/\[a href="(.*?)"\]([\w\W]*?)\[\/a\]/gi,'<a href="$1">$2</a>'),a=a.replace(/\[img(.*?)\]/gi,"<img$1>")},encodeEntities:function(a){return a=String(a).replace(/&amp;/g,"&").replace(/&lt;/g,"<").replace(/&gt;/g,">").replace(/&quot;/g,'"'),a.replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/"/g,"&quot;")
},removeDirtyStyles:function(b){if(this.utils.browser("msie"))return b;var c=document.createElement("div");return c.innerHTML=b,this.clean.clearUnverifiedRemove(a(c)),b=c.innerHTML,a(c).remove(),b},clearUnverified:function(){if(!this.utils.browser("msie")){this.clean.clearUnverifiedRemove(this.$editor);var a=this.$editor.find("h1, h2, h3, h4, h5, h6");a.find("span").removeAttr("style"),a.find(this.opts.verifiedTags.join(", ")).removeAttr("style")}},clearUnverifiedRemove:function(b){b.find(this.opts.verifiedTags.join(", ")).removeAttr("style"),b.find("span").not('[data-verified="redactor"]').removeAttr("style"),b.find('span[data-verified="redactor"], img[data-verified="redactor"]').each(function(b,c){var d=a(c);
d.attr("style",d.attr("rel"))})},setVerified:function(a){if(this.utils.browser("msie"))return a;a=a.replace(new RegExp("<img(.*?[^>])>","gi"),'<img$1 data-verified="redactor">'),a=a.replace(new RegExp("<span(.*?)>","gi"),'<span$1 data-verified="redactor">');var b=a.match(new RegExp('<(span|img)(.*?)style="(.*?)"(.*?[^>])>',"gi"));if(b)for(var c=b.length,d=0;c>d;d++)try{var e=b[d].replace(/style="(.*?)"/i,'style="$1" rel="$1"');a=a.replace(new RegExp(b[d],"gi"),e)}catch(f){}return a},convertInline:function(b){var c=a("<div />").html(b),d=this.opts.inlineTags;
return d.push("span"),c.find(d.join(",")).each(function(){var b=a(this),c=this.tagName.toLowerCase();b.attr("data-redactor-tag",c),"span"==c&&(b.attr("style")?b.attr("data-redactor-style",b.attr("style")):b.attr("class")&&b.attr("data-redactor-class",b.attr("class")))}),b=c.html(),c.remove(),b},normalizeLists:function(){this.$editor.find("li").each(function(b,c){var d=a(c).next();0===d.length||"UL"!=d[0].tagName&&"OL"!=d[0].tagName||a(c).append(d)})},removeSpaces:function(a){return a=a.replace(/\n/g,""),a=a.replace(/[\t]*/g,""),a=a.replace(/\n\s*\n/g,"\n"),a=a.replace(/^[\s\n]*/g," "),a=a.replace(/[\s\n]*$/g," "),a=a.replace(/>\s{2,}</g,"> <"),a=a.replace(/\n\n/g,"\n"),a=a.replace(/[\u200B-\u200D\uFEFF]/g,"")
},replaceDivs:function(a){return this.opts.linebreaks?(a=a.replace(/<div><br\s?\/?><\/div>/gi,"<br />"),a=a.replace(/<div(.*?)>([\w\W]*?)<\/div>/gi,"$2<br />")):a=a.replace(/<div(.*?)>([\w\W]*?)<\/div>/gi,"<p$1>$2</p>"),a},replaceDivsToBr:function(a){return a=a.replace(/<div\s(.*?)>/gi,"<p>"),a=a.replace(/<div><br\s?\/?><\/div>/gi,"<br /><br />"),a=a.replace(/<div>([\w\W]*?)<\/div>/gi,"$1<br /><br />")},replaceParagraphsToBr:function(a){return a=a.replace(/<p\s(.*?)>/gi,"<p>"),a=a.replace(/<p><br\s?\/?><\/p>/gi,"<br />"),a=a.replace(/<p>([\w\W]*?)<\/p>/gi,"$1<br /><br />"),a=a.replace(/(<br\s?\/?>){1,}\n?<\/blockquote>/gi,"</blockquote>")
},saveFormTags:function(a){return a.replace(/<form(.*?)>([\w\W]*?)<\/form>/gi,'<section$1 rel="redactor-form-tag">$2</section>')},restoreFormTags:function(a){return a.replace(/<section(.*?) rel="redactor-form-tag"(.*?)>([\w\W]*?)<\/section>/gi,"<form$1$2>$3</form>")}}},core:function(){return{getObject:function(){return a.extend({},this)},getEditor:function(){return this.$editor},getBox:function(){return this.$box},getElement:function(){return this.$element},addEvent:function(a){this.core.event=a},getEvent:function(){return this.core.event
},setCallback:function(b,c,d){var e=this.opts[b+"Callback"];return a.isFunction(e)?"undefined"==typeof d?e.call(this,c):e.call(this,c,d):"undefined"==typeof d?c:d},destroy:function(){this.core.setCallback("destroy"),this.$element.off(".redactor").removeData("redactor"),this.$editor.off(".redactor"),this.$pasteBox&&this.$pasteBox.remove(),a(".redactor-toolbar-tooltip").remove()}}},focus:function(){return{setStart:function(){this.$editor.focus();var a=this.$editor.children().first();if(0!==a.size()&&0!==a[0].length&&"BR"!=a[0].tagName&&3!=a[0].nodeType){if("UL"==a[0].tagName||"OL"==a[0].tagName){a=a.find("li").first();
var b=a.children().first();if(!this.utils.isBlock(b)&&""===b.text())return this.caret.setStart(b),void 0}return this.opts.linebreaks&&!this.utils.isBlockTag(a[0].tagName)?(this.selection.get(),this.range.setStart(this.$editor[0],0),this.range.setEnd(this.$editor[0],0),this.selection.addRange(),void 0):(this.caret.setStart(a),void 0)}},setEnd:function(){if(this.utils.browser("mozilla")||this.utils.browser("msie")){var a=this.$editor.children().last();this.caret.setEnd(a)}else{this.selection.get();try{this.range.selectNodeContents(this.$editor[0]),this.range.collapse(!1),this.selection.addRange()
}catch(b){}}},isFocused:function(){var a=document.getSelection().focusNode;return null===a?!1:this.utils.isRedactorParent(a.parentNode)?this.$editor.is(":focus"):!1}}},indent:function(){return{increase:function(){this.utils.browser("msie")||this.$editor.focus(),this.buffer.set(),this.selection.save();var b=this.selection.getBlock();b&&"LI"==b.tagName?this.indent.increaseLists():b===!1&&this.opts.linebreaks,setTimeout(a.proxy(function(){this.selection.restore()},this),1)},increaseLists:function(){document.execCommand("indent"),this.indent.fixEmptyIndent(),this.clean.normalizeLists(),this.clean.clearUnverified()
},increaseBlocks:function(){a.each(this.selection.getBlocks(),a.proxy(function(a,b){if("TD"!==b.tagName&&"TH"!==b.tagName){var c=this.utils.getAlignmentElement(b),d=this.utils.normalize(c.css("margin-left"))+this.opts.indentValue;c.css("margin-left",d+"px")}},this))},increaseText:function(){var b=this.selection.wrap("div");a(b).attr("data-tagblock","redactor"),a(b).css("margin-left",this.opts.indentValue+"px")},decrease:function(){this.buffer.set(),this.selection.save();var a=this.selection.getBlock();a&&"LI"==a.tagName&&this.indent.decreaseLists(),this.selection.restore()
},decreaseLists:function(){document.execCommand("outdent");var b=this.selection.getCurrent(),c=a(b).closest("li"),d=c.parent();0!==c.size()&&0!==d.size()&&"LI"==d[0].tagName&&d.after(c),this.indent.fixEmptyIndent(),this.opts.linebreaks||0!==c.size()||(document.execCommand("formatblock",!1,"p"),this.$editor.find("ul, ol, blockquote, p").each(a.proxy(this.utils.removeEmpty,this))),this.clean.clearUnverified()},decreaseBlocks:function(){a.each(this.selection.getBlocks(),a.proxy(function(a,b){var c=this.utils.getAlignmentElement(b),d=this.utils.normalize(c.css("margin-left"))-this.opts.indentValue;
0>=d?this.opts.linebreaks&&"undefined"!=typeof c.data("tagblock")?c.replaceWith(c.html()+"<br />"):(c.css("margin-left",""),this.utils.removeEmptyAttr(c,"style")):c.css("margin-left",d+"px")},this))},fixEmptyIndent:function(){var b=this.selection.getBlock();if(this.range.collapsed&&b&&"LI"==b.tagName&&this.utils.isEmpty(a(b).text())){var c=a(b);c.find("span").not(".redactor-selection-marker").contents().unwrap(),c.append("<br>")}}}},inline:function(){return{formatting:function(a){var b,c;"undefined"!=typeof this.formatting[a].style?b="style":"undefined"!=typeof this.formatting[a].class&&(b="class"),b&&(c=this.formatting[a][b]),this.inline.format(this.formatting[a].tag,b,c)
},format:function(a,b,c){if(!this.utils.isCurrentOrParent("PRE")&&!this.utils.isCurrentOrParentHeader()){for(var d=["b","bold","i","italic","underline","strikethrough","deleted","superscript","subscript"],e=["strong","strong","em","em","u","del","del","sup","sub"],f=0;f<d.length;f++)a==d[f]&&(a=e[f]);this.inline.type=b||!1,this.inline.value=c||!1,this.buffer.set(),this.$editor.focus(),this.selection.get(),this.range.collapsed?this.inline.formatCollapsed(a):this.inline.formatMultiple(a)}},formatCollapsed:function(b){var c=this.selection.getCurrent(),d=a(c).closest(b+"[data-redactor-tag="+b+"]");
if(0!==d.size())return this.caret.setAfter(d[0]),this.utils.isEmpty(d.text())&&d.remove(),void 0;var e=a("<"+b+">").attr("data-verified","redactor").attr("data-redactor-tag",b);e.html(this.opts.invisibleSpace),e=this.inline.setFormat(e);var e=this.insert.node(e);this.caret.setEnd(e)},formatMultiple:function(b){if(this.inline.formatConvert(b),this.selection.save(),document.execCommand("strikethrough"),this.$editor.find("strike").each(a.proxy(function(c,d){var e=a(d);this.inline.formatRemoveSameChildren(e,b);var f;
if(this.inline.type?(f=a("<span>").attr("data-redactor-tag",b).attr("data-verified","redactor"),f=this.inline.setFormat(f)):f=a("<"+b+">").attr("data-redactor-tag",b).attr("data-verified","redactor"),e.replaceWith(f.html(e.contents())),"span"==b){var g=f.parent();if(g&&"SPAN"==g[0].tagName&&"style"==this.inline.type)for(var h=this.inline.value.split(";"),i=0;i<h.length;i++){if(""===h[i])return;var j=h[i].split(":");g.css(j[0],""),this.utils.removeEmptyAttr(g,"style")&&g.replaceWith(g.contents())}}},this)),"span"!=b&&this.$editor.find(this.opts.inlineTags.join(", ")).each(a.proxy(function(b,c){var d=a(c),e=d.css("text-decoration");
"line-through"==e&&(d.css("text-decoration",""),this.utils.removeEmptyAttr(d,"style"))},this)),"del"!=b){var c=this;this.$editor.find("inline").each(function(a,b){c.utils.replaceToTag(b,"del")})}this.selection.restore()},formatRemoveSameChildren:function(b,c){b.children(c).each(function(){var b=a(this);b.hasClass("redactor-selection-marker")||b.contents().unwrap()})},formatConvert:function(b){this.selection.save();var c="";if("class"==this.inline.type?c="[data-redactor-class="+this.inline.value+"]":"style"==this.inline.type&&(c='[data-redactor-style="'+this.inline.value+'"]'),"del"!=b){var d=this;
this.$editor.find("del").each(function(a,b){d.utils.replaceToTag(b,"inline")})}this.$editor.find('[data-redactor-tag="'+b+'"]'+c).each(function(){if(""!==c||"span"!=b||this.tagName.toLowerCase()!=b){var d=a(this);d.replaceWith(a("<strike />").html(d.contents()))}}),this.selection.restore()},setFormat:function(a){switch(this.inline.type){case"class":a.hasClass(this.inline.value)?(a.removeClass(this.inline.value),a.removeAttr("data-redactor-class")):(a.addClass(this.inline.value),a.attr("data-redactor-class",this.inline.value));
break;case"style":a[0].style.cssText=this.inline.value,a.attr("data-redactor-style",this.inline.value)}return a},removeStyle:function(){this.buffer.set();var b=this.selection.getCurrent(),c=this.selection.getInlines();if(this.selection.save(),b&&"SPAN"===b.tagName){var d=a(b);d.removeAttr("style"),0===d[0].attributes.length&&d.replaceWith(d.contents())}a.each(c,a.proxy(function(b,c){var d=a(c);-1==a.inArray(c.tagName.toLowerCase(),this.opts.inlineTags)||d.hasClass("redactor-selection-marker")||(d.removeAttr("style"),0===d[0].attributes.length&&d.replaceWith(d.contents()))
},this)),this.selection.restore()},removeStyleRule:function(b){this.buffer.set();var c=this.selection.getParent(),d=this.selection.getInlines();if(this.selection.save(),c&&"SPAN"===c.tagName){var e=a(c);e.css(b,""),this.utils.removeEmptyAttr(e,"style"),0===e[0].attributes.length&&e.replaceWith(e.contents())}a.each(d,a.proxy(function(c,d){var e=a(d);-1==a.inArray(d.tagName.toLowerCase(),this.opts.inlineTags)||e.hasClass("redactor-selection-marker")||(e.css(b,""),this.utils.removeEmptyAttr(e,"style"),0===e[0].attributes.length&&e.replaceWith(e.contents()))
},this)),this.selection.restore()},removeFormat:function(){this.buffer.set();var b=this.selection.getCurrent();this.selection.save(),document.execCommand("removeFormat"),b&&"SPAN"===b.tagName&&a(b).replaceWith(a(b).contents()),a.each(this.selection.getNodes(),a.proxy(function(b,c){var d=a(c);-1==a.inArray(c.tagName.toLowerCase(),this.opts.inlineTags)||d.hasClass("redactor-selection-marker")||d.replaceWith(d.contents())},this)),this.selection.restore()},toggleClass:function(a){this.inline.format("span","class",a)
},toggleStyle:function(a){this.inline.format("span","style",a)}}},insert:function(){return{set:function(b,c){b=this.clean.setVerified(b),"undefined"==typeof c&&(b=this.clean.onPaste(b,!1)),this.$editor.html(b),this.selection.remove(),this.focus.setEnd(),this.clean.normalizeLists(),"undefined"==typeof c&&setTimeout(a.proxy(this.clean.clearUnverified,this),10)},text:function(b){if(b=b.toString(),b=a.trim(b),b=this.clean.getPlainText(b,!1),this.$editor.focus(),this.utils.browser("msie"))this.insert.htmlIe(b);else{this.selection.get(),this.range.deleteContents();
var c=document.createElement("div");c.innerHTML=b;for(var e,f,d=document.createDocumentFragment();e=c.firstChild;)f=d.appendChild(e);if(this.range.insertNode(d),f){var g=this.range.cloneRange();g.setStartAfter(f),g.collapse(!0),this.sel.removeAllRanges(),this.sel.addRange(g)}}this.clean.clearUnverified()},htmlWithoutClean:function(a){this.insert.html(a,!1)},html:function(b,c){"undefined"==typeof c&&(c=!0),this.$editor.focus(),b=this.clean.setVerified(b),c&&(b=this.clean.onPaste(b)),this.utils.browser("msie")?this.insert.htmlIe(b):(this.clean.singleLine?this.insert.execHtml(b):document.execCommand("insertHTML",!1,b),this.insert.htmlFixMozilla()),this.clean.normalizeLists(),this.opts.linebreaks||this.$editor.find("p").each(a.proxy(this.utils.removeEmpty,this)),c&&this.clean.clearUnverified()
},htmlFixMozilla:function(){if(this.utils.browser("mozilla")){var b=a(this.selection.getBlock()).next();b.length>0&&"P"==b[0].tagName&&""===b.html()&&b.remove()}},htmlIe:function(b){if(this.utils.isIe11()){var c=this.utils.isCurrentOrParent("P"),d=a("<div>").append(b),e=d.contents().is("p, :header, dl, ul, ol, div, table, td, blockquote, pre, address, section, header, footer, aside, article");return c&&e?this.insert.ie11FixInserting(c,b):this.insert.ie11PasteFrag(b),void 0}document.selection.createRange().pasteHTML(b)
},execHtml:function(a){a=this.clean.setVerified(a),this.selection.get(),this.range.deleteContents();var b=document.createElement("div");b.innerHTML=a;for(var d,e,c=document.createDocumentFragment();d=b.firstChild;)e=c.appendChild(d);this.range.insertNode(c),this.range.collapse(!0),this.caret.setAfter(e)},node:function(b,c){b=b[0]||b;var d=this.utils.getOuterHtml(b);return d=this.clean.setVerified(d),b=a(d)[0],this.selection.get(),c!==!1&&this.range.deleteContents(),this.range.insertNode(b),this.range.collapse(!1),this.selection.addRange(),b
},nodeToPoint:function(a,b,c){a=a[0]||a,this.selection.get();var d;if(document.caretPositionFromPoint){var e=document.caretPositionFromPoint(b,c);this.range.setStart(e.offsetNode,e.offset),this.range.collapse(!0),this.range.insertNode(a)}else if(document.caretRangeFromPoint)d=document.caretRangeFromPoint(b,c),d.insertNode(a);else if("undefined"!=typeof document.body.createTextRange){d=document.body.createTextRange(),d.moveToPoint(b,c);var f=d.duplicate();f.moveToPoint(b,c),d.setEndPoint("EndToEnd",f),d.select()
}},nodeToCaretPositionFromPoint:function(a,b){b=b[0]||b;var c,d=a.clientX,e=a.clientY;if(document.caretPositionFromPoint){var f=document.caretPositionFromPoint(d,e),g=document.getSelection();c=g.getRangeAt(0),c.setStart(f.offsetNode,f.offset),c.collapse(!0),c.insertNode(b)}else if(document.caretRangeFromPoint)c=document.caretRangeFromPoint(d,e),c.insertNode(b);else if("undefined"!=typeof document.body.createTextRange){c=document.body.createTextRange(),c.moveToPoint(d,e);var h=c.duplicate();h.moveToPoint(d,e),c.setEndPoint("EndToEnd",h),c.select()
}},ie11FixInserting:function(b,c){var d=document.createElement("span");d.className="redactor-ie-paste",this.insert.node(d);var e=a(b).html();e="<p>"+e.replace(/<span class="redactor-ie-paste"><\/span>/gi,"</p>"+c+"<p>")+"</p>",a(b).replaceWith(e)},ie11PasteFrag:function(a){this.selection.get(),this.range.deleteContents();var b=document.createElement("div");b.innerHTML=a;for(var d,e,c=document.createDocumentFragment();d=b.firstChild;)e=c.appendChild(d);this.range.insertNode(c)}}},keydown:function(){return{init:function(b){if(!a(b.target).is("input, textarea")&&!this.rtePaste){var c=b.which,d=c>=37&&40>=c;
this.keydown.ctrl=b.ctrlKey||b.metaKey,this.keydown.current=this.selection.getCurrent(),this.keydown.parent=this.selection.getParent(),this.keydown.block=this.selection.getBlock(),this.keydown.pre=this.utils.isTag(this.keydown.current,"pre"),this.keydown.blockquote=this.utils.isTag(this.keydown.current,"blockquote"),this.keydown.figcaption=this.utils.isTag(this.keydown.current,"figcaption"),this.shortcuts.init(b,c),this.keydown.checkEvents(d,c),this.keydown.setupBuffer(b,c),this.keydown.addArrowsEvent(d);var e=this.core.setCallback("keydown",b);
if(e===!1)return b.preventDefault(),!1;if(this.opts.enterKey&&(this.utils.browser("msie")||this.utils.browser("mozilla"))&&(c===this.keyCode.DOWN||c===this.keyCode.RIGHT)){var f=!1,g=!1;if(this.keydown.block&&"TD"===this.keydown.block.tagName&&(g=a(this.keydown.block).closest("table")),g&&g.find("td").last()[0]===this.keydown.block&&(f=!0),this.utils.isEndOfElement()&&f){var h=a(this.opts.emptyHtml);g.after(h),this.caret.setStart(h)}}if(this.opts.enterKey&&c===this.keyCode.DOWN&&this.keydown.onArrowDown(),!this.opts.enterKey&&c===this.keyCode.ENTER)return b.preventDefault(),this.range.collapsed||this.range.deleteContents(),void 0;
if(c==this.keyCode.ENTER&&!b.shiftKey&&!b.ctrlKey&&!b.metaKey){var i=this.core.setCallback("enter",b);if(i===!1)return b.preventDefault(),!1;var j,k;if(this.keydown.pre)return this.keydown.insertNewLine(b);if("text"==this.utils.getEditableContentType(this.keydown.block))return j=this.selection.getEndNode(),k=a(j).next(),0!==k.size()&&"BR"==k[0].tagName?this.keydown.insertBreakLine(b):this.utils.isEndOfElement()&&j&&"SPAN"!=j?this.keydown.insertDblBreakLine(b):this.keydown.insertBreakLine(b);if(this.opts.linebreaks&&!this.keydown.block)return j=this.selection.getCurrent(),k=a(this.keydown.current).next(),j!==!1&&a(j).hasClass("redactor-invisible-space")?(a(j).remove(),this.keydown.insertDblBreakLine(b)):0===k.length&&j===!1&&"undefined"!=typeof k.context?this.keydown.insertDblBreakLine(b):this.keydown.insertBreakLine(b);
if(this.opts.linebreaks&&this.keydown.block)setTimeout(a.proxy(this.keydown.replaceDivToBreakLine,this),1);else if(!this.opts.linebreaks&&this.keydown.block&&"LI"!==this.keydown.block.tagName)setTimeout(a.proxy(this.keydown.replaceDivToParagraph,this),1);else if(!this.opts.linebreaks&&!this.keydown.block)return this.keydown.insertParagraph(b)}return c===this.keyCode.ENTER&&(b.ctrlKey||b.shiftKey)?this.keydown.onShiftEnter(b):c===this.keyCode.TAB||b.metaKey&&221===c||b.metaKey&&219===c?this.keydown.onTab(b,c):(c===this.keyCode.BACKSPACE&&(this.keydown.removeInvisibleSpace(),this.keydown.removeEmptyListInTable(b)),void 0)
}},checkEvents:function(a,b){a||"click"!=this.core.getEvent()&&"arrow"!=this.core.getEvent()||(this.core.addEvent(!1),this.keydown.checkKeyEvents(b)&&this.buffer.set())},checkKeyEvents:function(b){var c=this.keyCode,d=[c.BACKSPACE,c.DELETE,c.ENTER,c.SPACE,c.ESC,c.TAB,c.CTRL,c.META,c.ALT,c.SHIFT];return-1==a.inArray(b,d)?!0:!1},addArrowsEvent:function(a){return a?"click"==this.core.getEvent()||"arrow"==this.core.getEvent()?(this.core.addEvent(!1),void 0):(this.core.addEvent("arrow"),void 0):void 0},setupBuffer:function(a,b){return this.keydown.ctrl&&90===b&&!a.shiftKey&&!a.altKey&&this.opts.buffer.length?(a.preventDefault(),this.buffer.undo(),void 0):this.keydown.ctrl&&90===b&&a.shiftKey&&!a.altKey&&0!==this.opts.rebuffer.length?(a.preventDefault(),this.buffer.redo(),void 0):(this.keydown.ctrl||(b==this.keyCode.BACKSPACE||b==this.keyCode.DELETE||b==this.keyCode.ENTER&&!a.ctrlKey&&!a.shiftKey||b==this.keyCode.SPACE)&&this.buffer.set(),void 0)
},onArrowDown:function(){for(var a=[this.keydown.blockquote,this.keydown.pre,this.keydown.figcaption],b=0;b<a.length;b++)if(a[b])return this.keydown.insertAfterLastElement(a[b]),!1},onShiftEnter:function(a){return this.buffer.set(),this.utils.isEndOfElement()?this.keydown.insertDblBreakLine(a):this.keydown.insertBreakLine(a)},onTab:function(a,b){if(!this.opts.tabKey)return!0;a.preventDefault();if((!this.keydown.pre||a.shiftKey)&&this.opts.tabAsSpaces===!1)return a.metaKey&&219===b?this.indent.decrease():a.metaKey&&221===b?this.indent.increase():a.shiftKey?this.indent.decrease():this.indent.increase(),!1
},replaceDivToBreakLine:function(){var b=this.selection.getBlock(),c=b.innerHTML.replace(/<br\s?\/?>/gi,"");if(("DIV"===b.tagName||"P"===b.tagName)&&""===c&&!a(b).hasClass("redactor-editor")){var d=document.createElement("br");return a(b).replaceWith(d),this.caret.setBefore(d),!1}},replaceDivToParagraph:function(){var b=this.selection.getBlock(),c=b.innerHTML.replace(/<br\s?\/?>/gi,"");if("DIV"===b.tagName&&""===c&&!a(b).hasClass("redactor-editor")){var d=document.createElement("p");return d.innerHTML=this.opts.invisibleSpace,a(b).replaceWith(d),this.caret.setStart(d),!1
}this.opts.cleanStyleOnEnter&&"P"==b.tagName&&a(b).removeAttr("class").removeAttr("style")},insertParagraph:function(a){a.preventDefault(),this.selection.get();var b=document.createElement("p");return b.innerHTML=this.opts.invisibleSpace,this.range.deleteContents(),this.range.insertNode(b),this.caret.setStart(b),!1},exitFromBlockquote:function(b){if(this.utils.isEndOfElement()){var c=a.trim(a(this.keydown.block).html());if(-1!=c.search(/(<br\s?\/?>){2}$/i)){if(b.preventDefault(),this.opts.linebreaks){var d=document.createElement("br");
a(this.keydown.blockquote).after(d),this.caret.setBefore(d),a(this.keydown.block).html(c.replace(/<br\s?\/?>$/i,""))}else{var e=a(this.opts.emptyHtml);a(this.keydown.blockquote).after(e),this.caret.setStart(e)}return!0}}},insertAfterLastElement:function(b){if(this.utils.isEndOfElement())if(this.buffer.set(),this.opts.linebreaks){var c=a("<div>").append(a.trim(this.$editor.html())).contents(),d=c.last()[0];if("SPAN"==d.tagName&&""===d.innerHTML&&(d=c.prev()[0]),this.utils.getOuterHtml(d)!=this.utils.getOuterHtml(b))return;
var e=document.createElement("br");a(b).after(e),this.caret.setAfter(e)}else{if(this.$editor.contents().last()[0]!==b)return;var f=a(this.opts.emptyHtml);a(b).after(f),this.caret.setStart(f)}},insertNewLine:function(a){a.preventDefault();var b=document.createTextNode("\n");return this.selection.get(),this.range.deleteContents(),this.range.insertNode(b),this.caret.setAfter(b),!1},insertBreakLine:function(a){return this.keydown.insertBreakLineProcessing(a)},insertDblBreakLine:function(a){return this.keydown.insertBreakLineProcessing(a,!0)
},insertBreakLineProcessing:function(a,b){a.stopPropagation(),this.selection.get();var c=document.createElement("br");if(this.range.deleteContents(),this.range.insertNode(c),b===!0){var d=document.createElement("br");this.range.insertNode(d),this.caret.setAfter(d)}else this.caret.setAfter(c);return!1},removeInvisibleSpace:function(){var b=a(this.keydown.current);0===b.text().search(/^\u200B$/g)&&b.is(":not([contenteditable])")&&b.remove()},removeEmptyListInTable:function(b){var c=a(this.keydown.current),d=a(this.keydown.parent),e=c.closest("td");
if(0!==e.size()&&c.closest("li")&&1===d.children("li").size()){if(!this.utils.isEmpty(c.text()))return;b.preventDefault(),c.remove(),d.remove(),this.caret.setStart(e)}}}},keyup:function(){return{init:function(b){if(!a(b.target).is("input, textarea")&&!this.rtePaste){var c=b.which;this.keyup.current=this.selection.getCurrent(),this.keyup.parent=this.selection.getParent();var d=this.utils.isRedactorParent(a(this.keyup.parent).parent()),e=this.core.setCallback("keyup",b);if(e===!1)return b.preventDefault(),!1;if(!this.opts.linebreaks&&3==this.keyup.current.nodeType&&this.keyup.current.length<=1&&(this.keyup.parent===!1||"BODY"==this.keyup.parent.tagName)&&this.keyup.replaceToParagraph(),!this.opts.linebreaks&&this.utils.isRedactorParent(this.keyup.current)&&"DIV"===this.keyup.current.tagName&&this.keyup.replaceToParagraph(!1),this.opts.linebreaks||!a(this.keyup.parent).hasClass("redactor-invisible-space")||d!==!1&&"BODY"!=d[0].tagName||(a(this.keyup.parent).contents().unwrap(),this.keyup.replaceToParagraph()),c===this.keyCode.DELETE||c===this.keyCode.BACKSPACE)return this.clean.clearUnverified(),this.$editor.find("p:not([contenteditable])").each(a.proxy(this.utils.removeEmpty,this)),this.keyup.current&&"DIV"==this.keyup.current.tagName&&this.utils.isEmpty(this.keyup.current.innerHTML)&&this.opts.linebreaks&&(a(this.keyup.current).after(this.selection.getMarkerAsHtml()),this.selection.restore(),a(this.keyup.current).remove()),this.keyup.formatEmpty(b);
{var f=this.utils.getEditableContainer(b.target),g=this.utils.getEditableContentType(b.target);a(f)}"text"==g&&""==a(f).text()&&(f.innerHTML=this.opts.invisibleSpace,this.caret.setEnd(f))}},replaceToParagraph:function(b){return},formatEmpty:function(b){var c=this.utils.getEditableContainer(b.target),d=this.utils.getEditableContentType(b.target),e=a(c);if("html"===d){var f=a.trim(e.html());if(this.utils.isEmpty(f)){if(b.preventDefault(),this.opts.linebreaks)e.html(this.selection.getMarkerAsHtml()),this.selection.restore();
else{var g=document.createElement("p");g.innerHTML=this.opts.invisibleSpace,e.empty().append(g),this.caret.setEnd(g)}return!1}}}}},list:function(){return{toggle:function(b){this.utils.browser("msie")||this.$editor.focus(),this.buffer.set(),this.selection.save();var c=this.selection.getParent(),d=a(c).closest("ol, ul"),e=a(c).closest(EBD.block);this.utils.isRedactorParent(d)||0===d.size()||(d=!1);var f,g,h=!1;if(d&&d.length){h=!0;var i=d[0].tagName;f="orderedlist"===b&&"UL"===i,g="unorderedlist"===b&&"OL"===i
}f?this.utils.replaceToTag(d,"ol"):g?this.utils.replaceToTag(d,"ul"):h?this.list.remove(b):this.list.insert(b),this.$editor.trigger("composerListFormat",[e]),this.selection.restore()},insert:function(b){var c=this.selection.getParent(),d=this.selection.getCurrent(),e=a(d).closest("td, th");this.utils.browser("msie")&&this.opts.linebreaks?this.list.insertInIe(b):document.execCommand("insert"+b);var f=a(this.selection.getParent()).closest("ol, ul");if(0!==e.size()){var g=e.prev(),h=e.html();e.html(""),!g||1!==g.length||"TD"!==g[0].tagName&&"TH"!==g[0].tagName?a(c).prepend(e):a(g).after(e),e.html(h)
}if(this.utils.isEmpty(f.find("li").text())){var i=f.children("li");i.find("br").remove(),i.append(this.selection.getMarkerAsHtml())}if(f.length){var j=f.parent();this.utils.isRedactorParent(j)&&"LI"!=j[0].tagName&&this.utils.isBlock(j[0])&&j.replaceWith(j.contents())}this.utils.browser("msie")||this.$editor.focus(),this.clean.clearUnverified()},insertInIe:function(b){var c=this.selection.wrap("div"),d=a(c).html(),e="orderedlist"==b?a("<ol>"):a("<ul>"),f=a("<li>");if(""===a.trim(d))f.append(this.selection.getMarkerAsHtml()),e.append(f),this.$editor.find("#selection-marker-1").replaceWith(e);
else{var g=d.split(/<br\s?\/?>/gi);if(g)for(var h=0;h<g.length;h++)""!==a.trim(g[h])&&e.append(a("<li>").html(g[h]));else f.append(d),e.append(f);a(c).replaceWith(e)}},remove:function(b){document.execCommand("insert"+b);var c=a(this.selection.getCurrent());this.indent.fixEmptyIndent(),this.opts.linebreaks||0!==c.closest("li, th, td").size()||(document.execCommand("formatblock",!1,"p"),this.$editor.find("ul, ol, blockquote").each(a.proxy(this.utils.removeEmpty,this)));var d=a(this.selection.getCurrent()).closest("table"),e=d.prev();
this.opts.linebreaks||0===d.size()||0===e.size()||"BR"!=e[0].tagName||e.remove(),this.clean.clearUnverified()}}},paragraphize:function(){return{load:function(b){return this.opts.linebreaks?b:""===b||"<p></p>"===b?this.opts.emptyHtml:(this.paragraphize.blocks=["table","div","pre","form","ul","ol","h1","h2","h3","h4","h5","h6","dl","blockquote","figcaption","address","section","header","footer","aside","article","object","style","script","iframe","select","input","textarea","button","option","map","area","math","hr","fieldset","legend","hgroup","nav","figure","details","menu","summary","p"],b+="\n",this.paragraphize.safes=[],this.paragraphize.z=0,b=b.replace(/(<br\s?\/?>){1,}\n?<\/blockquote>/gi,"</blockquote>"),b=this.paragraphize.getSafes(b),b=this.paragraphize.getSafesComments(b),b=this.paragraphize.replaceBreaksToNewLines(b),b=this.paragraphize.replaceBreaksToParagraphs(b),b=this.paragraphize.clear(b),b=this.paragraphize.restoreSafes(b),b=b.replace(new RegExp("<br\\s?/?>\n?<("+this.paragraphize.blocks.join("|")+")(.*?[^>])>","gi"),"<p><br /></p>\n<$1$2>"),a.trim(b))
},getSafes:function(b){var c=a("<div />").append(b);return c.find("blockquote p").replaceWith(function(){return a(this).append("<br />").contents()}),b=c.html(),c.find(this.paragraphize.blocks.join(", ")).each(a.proxy(function(a,c){this.paragraphize.z++,this.paragraphize.safes[this.paragraphize.z]=c.outerHTML,b=b.replace(c.outerHTML,"\n{replace"+this.paragraphize.z+"}")},this)),b},getSafesComments:function(b){var c=b.match(/<!--([\w\W]*?)-->/gi);return c?(a.each(c,a.proxy(function(a,c){this.paragraphize.z++,this.paragraphize.safes[this.paragraphize.z]=c,b=b.replace(c,"\n{replace"+this.paragraphize.z+"}")
},this)),b):b},restoreSafes:function(b){return a.each(this.paragraphize.safes,function(a,c){b=b.replace("{replace"+a+"}",c)}),b},replaceBreaksToParagraphs:function(a){var b=a.split(new RegExp("\n","g"),-1);if(a="",b)for(var c=b.length,d=0;c>d;d++){if(!b.hasOwnProperty(d))return;-1==b[d].search("{replace")?(b[d]=b[d].replace(/<p>\n\t?<\/p>/gi,""),b[d]=b[d].replace(/<p><\/p>/gi,""),""!==b[d]&&(a+="<p>"+b[d].replace(/^\n+|\n+$/g,"")+"</p>")):a+=b[d]}return a},replaceBreaksToNewLines:function(a){return a=a.replace(/<br \/>\s*<br \/>/gi,"\n\n"),a=a.replace(/<br\s?\/?>\n?<br\s?\/?>/gi,"\n<br /><br />"),a=a.replace(new RegExp("\r\n","g"),"\n"),a=a.replace(new RegExp("\r","g"),"\n"),a=a.replace(new RegExp("/\n\n+/"),"g","\n\n")
},clear:function(a){return a=a.replace(new RegExp("</blockquote></p>","gi"),"</blockquote>"),a=a.replace(new RegExp("<p></blockquote>","gi"),"</blockquote>"),a=a.replace(new RegExp("<p><blockquote>","gi"),"<blockquote>"),a=a.replace(new RegExp("<blockquote></p>","gi"),"<blockquote>"),a=a.replace(new RegExp("<p><p ","gi"),"<p "),a=a.replace(new RegExp("<p><p>","gi"),"<p>"),a=a.replace(new RegExp("</p></p>","gi"),"</p>"),a=a.replace(new RegExp("<p>\\s?</p>","gi"),""),a=a.replace(new RegExp("\n</p>","gi"),"</p>"),a=a.replace(new RegExp("<p>	?	?\n?<p>","gi"),"<p>"),a=a.replace(new RegExp("<p>	*</p>","gi"),"")
}}},paste:function(){return{init:function(b){if(!a(b.target).is("input, textarea")&&this.opts.cleanOnPaste){this.rtePaste=!0,this.buffer.set(),this.selection.save();var c=b.originalEvent.clipboardData;if(c){var d=c.types,e="";a.indexOf(d,"text/html")>-1?e=c.getData("text/html"):a.indexOf(d,"text/plain")>-1&&(e=c.getData("text/plain")),this.selection.restore();var f=a("<div>").html(e);f.find(":not(p, br, ol, ul, li, span, b, i, u, a, small, strong, sup, sub, pre)").each(function(){a(this).replaceWith(a(this).text())
}),e=f.html(),this.paste.insert(e),b.preventDefault()}else this.utils.saveScroll(),this.paste.createPasteBox(),a(window).on("scroll.redactor-freeze",a.proxy(function(){a(window).scrollTop(this.saveBodyScroll)},this)),setTimeout(a.proxy(function(){var b=this.$pasteBox.html();this.$pasteBox.remove(),this.selection.restore(),this.utils.restoreScroll(),this.paste.insert(b),a(window).off("scroll.redactor-freeze")},this),1)}},createPasteBox:function(){this.$pasteBox=a("<div>").html("").attr("contenteditable","true").css({position:"fixed",width:0,top:0,left:"-9999px"}),this.$box.parent().append(this.$pasteBox),this.$pasteBox.focus()
},insert:function(b){b=this.core.setCallback("pasteBefore",b);var c=this.selection.getCurrent(),d=this.utils.getEditableContentType(c);"text"==d&&(this.opts.pastePlainText=!0),b=this.clean.onPaste(b),"text"==d&&(b=this.clean.replaceParagraphsToBr(b)),b=this.core.setCallback("paste",b),this.insert.html(b,!1),this.opts.pastePlainText=!1,this.rtePaste=!1,setTimeout(a.proxy(this.clean.clearUnverified,this),10),setTimeout(a.proxy(function(){var b=this.$editor.find("span");a.each(b,function(b,c){var d=c.innerHTML.replace(/[\u200B-\u200D\uFEFF]/,"");
""===d&&0===c.attributes.length&&a(c).remove()})},this),10)}}},selection:function(){return{get:function(){return this.sel=document.getSelection(),this.range=document.getSelection&&this.sel.getRangeAt&&this.sel.rangeCount?this.sel.getRangeAt(0):document.createRange(),this.sel},addRange:function(){try{this.sel.removeAllRanges()}catch(a){}this.sel.addRange(this.range)},getCurrent:function(){var a=!1;return this.selection.get(),this.sel&&this.sel.rangeCount>0&&(a=this.sel.getRangeAt(0).startContainer),this.utils.isRedactorParent(a)
},getStartNode:function(){var a=!1;return this.selection.get(),this.sel&&this.sel.rangeCount>0&&(a=this.range.startContainer,/3|4|8/.test(a.nodeType)||(a=a.childNodes[this.range.startOffset])),this.utils.isRedactorParent(a)},getEndNode:function(){var a=!1;return this.sel&&this.sel.rangeCount>0&&(a=this.range.endContainer,/3|4|8/.test(a.nodeType)||(a=a.childNodes[this.range.endOffset])),this.utils.isRedactorParent(a)},getParent:function(b){return b=b||this.selection.getCurrent(),b?this.utils.isRedactorParent(a(b).parent()[0]):!1
},getBlock:function(b){for(b=b||this.selection.getCurrent();b;){if(this.utils.isBlockTag(b.tagName))return a(b).hasClass("ebd")?!1:b;b=b.parentNode}return!1},getInlines:function(b){if(this.selection.get(),this.range&&this.range.collapsed)return!1;var c=[];b="undefined"==typeof b?this.selection.getNodes():b;var d=this.opts.inlineTags;return d.push("span"),a.each(b,a.proxy(function(b,e){-1!=a.inArray(e.tagName.toLowerCase(),d)&&c.push(e)},this)),0===c.length?!1:c},getBlocks:function(b){if(this.selection.get(),this.range&&this.range.collapsed)return[this.selection.getBlock()];
var c=[];return b="undefined"==typeof b?this.selection.getNodes():b,a.each(b,a.proxy(function(b,d){return 0==a(d).parents("div.ebd").size()?!1:(this.utils.isBlock(d)&&(this.selection.lastBlock=d,c.push(d)),void 0)},this)),0===c.length?[this.selection.getBlock()]:c},getLastBlock:function(){return this.selection.lastBlock},getNodes:function(){this.selection.get();var b=this.selection.getNodesMarker(1),c=this.selection.getNodesMarker(2);this.selection.setNodesMarker(this.range,b,!0),this.range.collapsed===!1?this.selection.setNodesMarker(this.range,c,!1):c=b;
var d=[],e=0,f=this;this.$editor.find("*").each(function(){if(this==b){var g=a(this).parent();0!==g.length&&"BODY"!=g[0].tagName&&f.utils.isRedactorParent(g[0])&&d.push(g[0]),d.push(this),e=1}else e>0&&(d.push(this),e+=1);return this==c?!1:void 0});for(var g=[],h=d.length,i=0;h>i;i++)"nodes-marker-1"!=d[i].id&&"nodes-marker-2"!=d[i].id&&g.push(d[i]);return this.selection.removeNodesMarkers(),g},getNodesInRange:function(b){function c(a){if(a.firstChild)return a.firstChild;for(;a;){if(a.nextSibling)return a.nextSibling;
a=a.parentNode}}var i,b=b||this.range,d=b.startContainer.childNodes[b.startOffset]||b.endContainer.childNodes[b.endOffset],e=b.startContainer.childNodes[b.startOffset]||b.startContainer,f=b.endContainer.childNodes[b.endOffset]||b.endContainer,g=b.commonAncestorContainer,h=[];for(i=e.parentNode;i&&(h.push(i),i!=g);i=i.parentNode);for(h.reverse(),i=e;i&&(!d||a(i.parentNode).closest(g)[0])&&(h.push(i),i!=f);i=c(i));return h},getNodesMarker:function(b){return a('<span id="nodes-marker-'+b+'" class="redactor-nodes-marker" data-verified="redactor">'+this.opts.invisibleSpace+"</span>")[0]
},setNodesMarker:function(a,b,c){a=a.cloneRange();try{a.collapse(c),a.insertNode(b)}catch(d){}},removeNodesMarkers:function(){a(document).find("span.redactor-nodes-marker").remove(),this.$editor.find("span.redactor-nodes-marker").remove()},fromPoint:function(a,b){this.caret.setOffset(a,b)},wrap:function(a){if(this.selection.get(),this.range.collapsed)return!1;var b=document.createElement(a);return b.appendChild(this.range.extractContents()),this.range.insertNode(b),b},selectElement:function(a){this.caret.set(a,0,a,1)
},selectAll:function(){this.selection.get(),this.range.selectNodeContents(this.$editor[0]),this.selection.addRange()},remove:function(){this.selection.get(),this.sel.removeAllRanges()},save:function(){this.selection.createMarkers()},createMarkers:function(){this.selection.get();var a=this.selection.getMarker(1);if(this.selection.setMarker(this.range,a,!0),this.range.collapsed===!1){var b=this.selection.getMarker(2);this.selection.setMarker(this.range,b,!1)}this.savedSel=this.$editor.html()},getMarker:function(b){return"undefined"==typeof b&&(b=1),a('<span id="selection-marker-'+b+'" class="redactor-selection-marker"  data-verified="redactor">'+this.opts.invisibleSpace+"</span>")[0]
},getMarkerAsHtml:function(a){return this.utils.getOuterHtml(this.selection.getMarker(a))},setMarker:function(a,b,c){a=a.cloneRange();try{a.collapse(c),a.insertNode(b)}catch(d){this.focus.setStart()}},restore:function(){var a=this.$editor.find("span#selection-marker-1"),b=this.$editor.find("span#selection-marker-2");0!==a.length&&0!==b.length?this.caret.set(a,0,b,0):0!==a.length?this.caret.set(a,0,a,0):this.$editor.focus(),this.selection.removeMarkers(),this.savedSel=!1},removeMarkers:function(){this.$editor.find("span.redactor-selection-marker").remove()
},getText:function(){return this.selection.get(),this.sel.toString()},getHtml:function(){var a="";if(this.selection.get(),this.sel.rangeCount){for(var b=document.createElement("div"),c=this.sel.rangeCount,d=0;c>d;++d)b.appendChild(this.sel.getRangeAt(d).cloneContents());a=b.innerHTML}return this.clean.onSync(a)}}},shortcuts:function(){return{init:function(b,c){return this.opts.shortcuts?(a.each(this.opts.shortcuts,a.proxy(function(c,d){for(var e=c.split(","),f=e.length,g=0;f>g;g++)"string"==typeof e[g]&&this.shortcuts.handler(b,a.trim(e[g]),a.proxy(function(){var a;
"-1"!=d.func.search(/\./)?(a=d.func.split("."),"undefined"!=typeof this[a[0]]&&this[a[0]][a[1]].apply(this,d.params)):this[d.func].apply(this,d.params)},this))},this)),void 0):(!b.ctrlKey&&!b.metaKey||66!==c&&73!==c||b.preventDefault(),!1)},handler:function(b,c,d){var e={8:"backspace",9:"tab",10:"return",13:"return",16:"shift",17:"ctrl",18:"alt",19:"pause",20:"capslock",27:"esc",32:"space",33:"pageup",34:"pagedown",35:"end",36:"home",37:"left",38:"up",39:"right",40:"down",45:"insert",46:"del",59:";",61:"=",96:"0",97:"1",98:"2",99:"3",100:"4",101:"5",102:"6",103:"7",104:"8",105:"9",106:"*",107:"+",109:"-",110:".",111:"/",112:"f1",113:"f2",114:"f3",115:"f4",116:"f5",117:"f6",118:"f7",119:"f8",120:"f9",121:"f10",122:"f11",123:"f12",144:"numlock",145:"scroll",173:"-",186:";",187:"=",188:",",189:"-",190:".",191:"/",192:"`",219:"[",220:"\\",221:"]",222:"'"},f={"`":"~",1:"!",2:"@",3:"#",4:"$",5:"%",6:"^",7:"&",8:"*",9:"(",0:")","-":"_","=":"+",";":": ","'":'"',",":"<",".":">","/":"?","\\":"|"};
c=c.toLowerCase().split(" ");var g=e[b.keyCode],h=String.fromCharCode(b.which).toLowerCase(),i="",j={};a.each(["alt","ctrl","meta","shift"],function(a,c){b[c+"Key"]&&g!==c&&(i+=c+"+")}),g&&(j[i+g]=!0),h&&(j[i+h]=!0,j[i+f[h]]=!0,"shift+"===i&&(j[f[h]]=!0));for(var k=0,l=c.length;l>k;k++)if(j[c[k]])return b.preventDefault(),d.apply(this,arguments)}}},tabifier:function(){return{get:function(a){if(!this.opts.tabifier)return a;var b=["area","body","head","hr","i?frame","link","meta","noscript","style","script","table","tbody","thead","tfoot"],c=["li","dt","dt","h[1-6]","option","script"],d=["blockquote","div","dl","fieldset","form","frameset","map","ol","p","pre","select","td","th","tr","ul"];
this.tabifier.lineBefore=new RegExp("^<(/?"+b.join("|/?")+"|"+c.join("|")+")[ >]"),this.tabifier.lineAfter=new RegExp("^<(br|/?"+b.join("|/?")+"|/"+c.join("|/")+")[ >]"),this.tabifier.newLevel=new RegExp("^</?("+d.join("|")+")[ >]");var e=0,f=a.length,g=0,h=null,i=null,j="",k="",l="";for(this.tabifier.cleanlevel=0;f>e;e++){if(g=e,-1==a.substr(e).indexOf("<"))return k+=a.substr(e),this.tabifier.finish(k);for(;f>g&&"<"!=a.charAt(g);)g++;for(e!=g&&(l=a.substr(e,g-e),l.match(/^\s{2,}$/g)||("\n"==k.charAt(k.length-1)?k+=this.tabifier.getTabs():"\n"==l.charAt(0)&&(k+="\n"+this.tabifier.getTabs(),l=l.replace(/^\s+/,"")),k+=l),l.match(/\n/)&&(k+="\n"+this.tabifier.getTabs())),h=g;f>g&&">"!=a.charAt(g);)g++;
j=a.substr(h,g-h),e=g;var m;if("!--"==j.substr(1,3)){if(!j.match(/--$/)){for(;"-->"!=a.substr(g,3);)g++;g+=2,j=a.substr(h,g-h),e=g}"\n"!=k.charAt(k.length-1)&&(k+="\n"),k+=this.tabifier.getTabs(),k+=j+">\n"}else"!"==j[1]?k=this.tabifier.placeTag(j+">",k):"?"==j[1]?k+=j+">\n":(m=j.match(/^<(script|style|pre)/i))?(m[1]=m[1].toLowerCase(),j=this.tabifier.cleanTag(j),k=this.tabifier.placeTag(j,k),i=String(a.substr(e+1)).toLowerCase().indexOf("</"+m[1]),i&&(l=a.substr(e+1,i),e+=i,k+=l)):(j=this.tabifier.cleanTag(j),k=this.tabifier.placeTag(j,k))
}return this.tabifier.finish(k)},getTabs:function(){for(var a="",b=0;b<this.tabifier.cleanlevel;b++)a+="	";return a},finish:function(a){return a=a.replace(/\n\s*\n/g,"\n"),a=a.replace(/^[\s\n]*/,""),a=a.replace(/[\s\n]*$/,""),a=a.replace(/<script(.*?)>\n<\/script>/gi,"<script$1></script>"),this.tabifier.cleanlevel=0,a},cleanTag:function(a){var b="";a=a.replace(/\n/g," "),a=a.replace(/\s{2,}/g," "),a=a.replace(/^\s+|\s+$/g," ");var c="";a.match(/\/$/)&&(c="/",a=a.replace(/\/+$/,""));for(var d;d=/\s*([^= ]+)(?:=((['"']).*?\3|[^ ]+))?/.exec(a);)d[2]?b+=d[1].toLowerCase()+"="+d[2]:d[1]&&(b+=d[1].toLowerCase()),b+=" ",a=a.substr(d[0].length);
return b.replace(/\s*$/,"")+c+">"},placeTag:function(a,b){var c=a.match(this.tabifier.newLevel);return(a.match(this.tabifier.lineBefore)||c)&&(b=b.replace(/\s*$/,""),b+="\n"),c&&"/"==a.charAt(1)&&this.tabifier.cleanlevel--,"\n"==b.charAt(b.length-1)&&(b+=this.tabifier.getTabs()),c&&"/"!=a.charAt(1)&&this.tabifier.cleanlevel++,b+=a,(a.match(this.tabifier.lineAfter)||a.match(this.tabifier.newLevel))&&(b=b.replace(/ *$/,""),b+="\n"),b}}},tidy:function(){return{setupAllowed:function(){if(this.opts.allowedTags&&(this.opts.deniedTags=!1),this.opts.allowedAttr&&(this.opts.removeAttr=!1),!this.opts.linebreaks){var a=["p","section"];
this.opts.allowedTags&&this.tidy.addToAllowed(a),this.opts.deniedTags&&this.tidy.removeFromDenied(a)}},addToAllowed:function(b){for(var c=b.length,d=0;c>d;d++)-1==a.inArray(b[d],this.opts.allowedTags)&&this.opts.allowedTags.push(b[d])},removeFromDenied:function(b){for(var c=b.length,d=0;c>d;d++){var e=a.inArray(b[d],this.opts.deniedTags);-1!=e&&this.opts.deniedTags.splice(e,1)}},load:function(b,c){return this.tidy.settings={deniedTags:this.opts.deniedTags,allowedTags:this.opts.allowedTags,removeComments:this.opts.removeComments,replaceTags:this.opts.replaceTags,replaceStyles:this.opts.replaceStyles,removeDataAttr:this.opts.removeDataAttr,removeAttr:this.opts.removeAttr,allowedAttr:this.opts.allowedAttr,removeWithoutAttr:this.opts.removeWithoutAttr,removeEmpty:this.opts.removeEmpty},a.extend(this.tidy.settings,c),b=this.tidy.removeComments(b),this.tidy.$div=a("<div />").append(b),this.tidy.replaceTags(),this.tidy.replaceStyles(),this.tidy.removeTags(),this.tidy.removeAttr(),this.tidy.removeEmpty(),this.tidy.removeParagraphsInLists(),this.tidy.removeDataAttr(),this.tidy.removeWithoutAttr(),b=this.tidy.$div.html(),this.tidy.$div.remove(),b
},removeComments:function(a){return this.tidy.settings.removeComments?a.replace(/<!--[\s\S]*?-->/gi,""):a},replaceTags:function(b){if(!this.tidy.settings.replaceTags)return b;for(var c=this.tidy.settings.replaceTags.length,d=[],e=[],f=0;c>f;f++)e.push(this.tidy.settings.replaceTags[f][1]),d.push(this.tidy.settings.replaceTags[f][0]);return this.tidy.$div.find(d.join(",")).each(a.proxy(function(b,c){var d=e[b];a(c).replaceWith(function(){for(var b=a("<"+d+" />").append(a(this).contents()),c=0;c<this.attributes.length;c++)b.attr(this.attributes[c].name,this.attributes[c].value);
return b})},this)),b},replaceStyles:function(){if(this.tidy.settings.replaceStyles){var b=this.tidy.settings.replaceStyles.length;this.tidy.$div.find("span").each(a.proxy(function(c,d){for(var e=a(d),f=e.attr("style"),g=0;b>g;g++)if(f&&f.match(new RegExp("^"+this.tidy.settings.replaceStyles[g][0],"i"))){var h=this.tidy.settings.replaceStyles[g][1];e.replaceWith(function(){var b=document.createElement(h);return a(b).append(a(this).contents())})}},this))}},removeTags:function(){!this.tidy.settings.deniedTags&&this.tidy.settings.allowedTags&&this.tidy.$div.find("*").not(this.tidy.settings.allowedTags.join(",")).each(function(b,c){""===c.innerHTML?a(c).remove():a(c).contents().unwrap()
}),this.tidy.settings.deniedTags&&this.tidy.$div.find(this.tidy.settings.deniedTags.join(",")).each(function(b,c){""===c.innerHTML?a(c).remove():a(c).contents().unwrap()})},removeAttr:function(){var b;if(!this.tidy.settings.removeAttr&&this.tidy.settings.allowedAttr){var c=[],d=[];b=this.tidy.settings.allowedAttr.length;for(var e=0;b>e;e++)c.push(this.tidy.settings.allowedAttr[e][0]),d.push(this.tidy.settings.allowedAttr[e][1]);this.tidy.$div.find("*").each(a.proxy(function(b,e){var f=a(e),g=a.inArray(f[0].tagName.toLowerCase(),c),h=this.tidy.removeAttrGetRemoves(g,d,f);
h&&a.each(h,function(a,b){f.removeAttr(b)})},this))}if(this.tidy.settings.removeAttr){b=this.tidy.settings.removeAttr.length;for(var e=0;b>e;e++){var f=this.tidy.settings.removeAttr[e][1];a.isArray(f)&&(f=f.join(" ")),this.tidy.$div.find(this.tidy.settings.removeAttr[e][0]).removeAttr(f)}}},removeAttrGetRemoves:function(b,c,d){var e=[];return-1==b?a.each(d[0].attributes,function(a,b){e.push(b.name)}):"*"==c[b]?e=[]:a.each(d[0].attributes,function(d,f){a.isArray(c[b])?-1==a.inArray(f.name,c[b])&&e.push(f.name):c[b]!=f.name&&e.push(f.name)
}),e},removeAttrs:function(b,c){return c=new RegExp(c,"g"),b.each(function(){for(var b=a(this),d=this.attributes.length-1,e=d;e>=0;e--){var f=this.attributes[e];f&&f.specified&&f.name.search(c)>=0&&b.removeAttr(f.name)}})},removeEmpty:function(){this.tidy.settings.removeEmpty&&this.tidy.$div.find(this.tidy.settings.removeEmpty.join(",")).each(function(){var b=a(this),c=b.text();c=c.replace(/[\u200B-\u200D\uFEFF]/g,""),c=c.replace(/&nbsp;/gi,""),c=c.replace(/\s/g,""),""===c&&0===b.children().length&&b.remove()
})},removeParagraphsInLists:function(){this.tidy.$div.find("li p").contents().unwrap()},removeDataAttr:function(){if(this.tidy.settings.removeDataAttr){var b=this.tidy.settings.removeDataAttr;a.isArray(this.tidy.settings.removeDataAttr)&&(b=this.tidy.settings.removeDataAttr.join(",")),this.tidy.removeAttrs(this.tidy.$div.find(b),"^(data-)")}},removeWithoutAttr:function(){this.tidy.settings.removeWithoutAttr&&this.tidy.$div.find(this.tidy.settings.removeWithoutAttr.join(",")).each(function(){0===this.attributes.length&&a(this).contents().unwrap()
})}}},utils:function(){return{isMobile:function(){return/(iPhone|iPod|BlackBerry|Android)/.test(navigator.userAgent)},isDesktop:function(){return!/(iPhone|iPod|iPad|BlackBerry|Android)/.test(navigator.userAgent)},isString:function(a){return"[object String]"==Object.prototype.toString.call(a)},isEmpty:function(b,c){return b=b.replace(/[\u200B-\u200D\uFEFF]/g,""),b=b.replace(/&nbsp;/gi,""),b=b.replace(/<\/?br\s?\/?>/g,""),b=b.replace(/\s/g,""),b=b.replace(/^<p>[^\W\w\D\d]*?<\/p>$/i,""),b=b.replace(/<iframe(.*?[^>])>$/i,"iframe"),c!==!1&&(b=b.replace(/<[^\/>][^>]*><\/[^>]+>/gi,""),b=b.replace(/<[^\/>][^>]*><\/[^>]+>/gi,"")),b=a.trim(b),""===b
},normalize:function(a){return"undefined"==typeof a?0:parseInt(a.replace("px",""),10)},hexToRgb:function(a){if("undefined"!=typeof a){if(-1==a.search(/^#/))return a;var b=/^#?([a-f\d])([a-f\d])([a-f\d])$/i;a=a.replace(b,function(a,b,c,d){return b+b+c+c+d+d});var c=/^#?([a-f\d]{2})([a-f\d]{2})([a-f\d]{2})$/i.exec(a);return"rgb("+parseInt(c[1],16)+", "+parseInt(c[2],16)+", "+parseInt(c[3],16)+")"}},getOuterHtml:function(b){return a("<div>").append(a(b).eq(0).clone()).html()},getAlignmentElement:function(b){return-1!==a.inArray(b.tagName,this.opts.alignmentTags)?a(b):a(b).closest(this.opts.alignmentTags.toString().toLowerCase(),this.$editor[0])
},removeEmptyAttr:function(b,c){var d=a(b);return"undefined"==typeof d.attr(c)?!0:""===d.attr(c)?(d.removeAttr(c),!0):!1},removeEmpty:function(b,c){var d=a(c);if(d.find(".redactor-invisible-space").removeAttr("style").removeAttr("class"),0===d.find("hr, br, img, iframe").length){var e=a.trim(d.text());this.utils.isEmpty(e,!1)&&d.remove()}},saveScroll:function(){this.saveEditorScroll=this.$editor.scrollTop(),this.saveBodyScroll=a(window).scrollTop(),this.opts.scrollTarget&&(this.saveTargetScroll=a(this.opts.scrollTarget).scrollTop())
},restoreScroll:function(){("undefined"!=typeof this.saveScroll||"undefined"!=typeof this.saveBodyScroll)&&(a(window).scrollTop(this.saveBodyScroll),this.$editor.scrollTop(this.saveEditorScroll),this.opts.scrollTarget&&a(this.opts.scrollTarget).scrollTop(this.saveTargetScroll))},createSpaceElement:function(){var a=document.createElement("span");return a.className="redactor-invisible-space",a.innerHTML=this.opts.invisibleSpace,a},removeInlineTags:function(b){var c=this.opts.inlineTags;c.push("span"),"PRE"==b.tagName&&c.push("a"),a(b).find(c.join(",")).not("span.redactor-selection-marker").contents().unwrap()
},replaceWithContents:function(b,c){var d=this;a(b).replaceWith(function(){return c===!0&&d.utils.removeInlineTags(this),a(this).contents()})},replaceToTag:function(b,c,d){var e,f=this;return a(b).replaceWith(function(){e=a("<"+c+" />").append(a(this).contents());for(var b=0;b<this.attributes.length;b++)e.attr(this.attributes[b].name,this.attributes[b].value);return d===!0&&f.utils.removeInlineTags(e),e}),e},isStartOfElement:function(){var a=this.selection.getBlock();if(!a)return!1;var b=this.caret.getOffsetOfElement(a);
return 0===b?!0:!1},isEndOfElement:function(){var b=this.selection.getBlock();if(!b)return!1;var c=this.caret.getOffsetOfElement(b),d=a.trim(a(b).text()).replace(/\n\r\n/g,"");return c==d.length?!0:!1},isBlock:function(a){return a=a[0]||a,a&&this.utils.isBlockTag(a.tagName)},isBlockTag:function(a){return"undefined"==typeof a?!1:this.reIsBlock.test(a)},isTag:function(b,c){var d=a(b).closest(c);return 1==d.size()?d[0]:!1},isRedactorParent:function(b){return b?0===a(b).parents(".ebd").length||a(b).hasClass("ebd")?!1:b:!1
},isCurrentOrParentHeader:function(){return this.utils.isCurrentOrParent(["H1","H2","H3","H4","H5","H6"])},isCurrentOrParent:function(b){var c=this.selection.getParent(),d=this.selection.getCurrent();if(a.isArray(b)){var e=0;return a.each(b,a.proxy(function(a,b){this.utils.isCurrentOrParentOne(d,c,b)&&e++},this)),0===e?!1:!0}return this.utils.isCurrentOrParentOne(d,c,b)},isCurrentOrParentOne:function(a,b,c){return c=c.toUpperCase(),b&&b.tagName===c?b:a&&a.tagName===c?a:!1},isOldIe:function(){return this.utils.browser("msie")&&parseInt(this.utils.browser("version"),10)<9?!0:!1
},isLessIe10:function(){return this.utils.browser("msie")&&parseInt(this.utils.browser("version"),10)<10?!0:!1},isIe11:function(){return!!navigator.userAgent.match(/Trident\/7\./)},browser:function(a){var b=navigator.userAgent.toLowerCase(),c=/(opr)[\/]([\w.]+)/.exec(b)||/(chrome)[ \/]([\w.]+)/.exec(b)||/(webkit)[ \/]([\w.]+).*(safari)[ \/]([\w.]+)/.exec(b)||/(webkit)[ \/]([\w.]+)/.exec(b)||/(opera)(?:.*version|)[ \/]([\w.]+)/.exec(b)||/(msie) ([\w.]+)/.exec(b)||b.indexOf("trident")>=0&&/(rv)(?::| )([\w.]+)/.exec(b)||b.indexOf("compatible")<0&&/(mozilla)(?:.*? rv:([\w.]+)|)/.exec(b)||[];
return"version"==a?c[2]:"webkit"==a?"chrome"==c[1]||"webkit"==c[1]:"rv"==c[1]?"msie"==a:"opr"==c[1]?"webkit"==a:a==c[1]},getEditableContainer:function(b){var c=a(b).parentsUntil(this.$editor).andSelf().closest("[contenteditable=true]")[0];return this.utils.isRedactorParent(c)},isEditableContent:function(a){return!!this.utils.getEditableContainer(a)},getEditableContentType:function(b){var c=this.utils.getEditableContainer(b),d=a(c).attr("data-content-type");return"html"==d?"html":"text"==d?"text":"text"}}}},d.prototype.init.prototype=d.prototype,b.resolve()
}),EasyBlog.module("composer/location",function(a){var b=this;EasyBlog.Controller("Composer.Location",{elements:["[data-eb-composer-location-{remove-button|label|textfield|places|autocomplete|form|map|form-message|detect-button}]",".eb-composer-{field}-location"],defaultOptions:{foursquare:{client_id:null,client_secret:null,v:"20140905",m:"foursquare",intent:"browse",radius:800},geomode:"native",searchmode:"detect","{container}":"[data-eb-composer-location]","{place}":"[data-eb-composer-location-places] li","{addLocationButton}":".eb-document-add-location-button"}},function(b,c,d,e,f){return{init:function(){d=b.container(),navigator.geolocation||(c.geomode="external"),b.setupAutocomplete()
},setupAutocomplete:function(){e=b.autocomplete().detach(),f=e.find(b.places),textfield=b.textfield(),a(document).on("click",function(b){var c=a(b.target).parents().andSelf();c.filter(textfield).length<1&&e.detach()})},searching:function(a){b.form().toggleClass("is-searching",a);var c=b.textfield();c.attr("placeholder",a?c.data("placeholder-searching"):c.data("placeholder"))},userCoords:null,getUserCoords:function(){var d=a.Deferred(),e=b.userCoords;return e?(d.resolve(e),d):("native"==c.geomode?navigator.geolocation.getCurrentPosition(function(a){var b=a.coords;
d.resolve({latitude:b.latitude,longitude:b.longitude})},function(){b.getUserCoordsByIP().done(d.resolve).fail(d.reject)}):d=b.getUserCoordsByIP(),d.done(function(a){b.userCoords=a}))},getUserCoordsByIP:function(){a.getJSON("//www.telize.com/geoip?callback=?").then(function(a){return{latitude:a.latitude,longitude:a.longitude}})},search:function(a){var c=b.getUserCoords().then(function(c){b.searching(!0);var d=EasyBlog.ajax("site/views/composer/getLocations",{latitude:c.latitude,longitude:c.longitude,query:a||""});
return d}).fail(function(c){b.container().addClass("has-errors"),b.formMessage().html(c),b.search.reset(a)}).always(function(){b.searching(!1)});return c},searchManual:a.memoize(function(c){var d=a.Deferred();b.searching(!0);var e=EasyBlog.ajax("site/views/composer/getLocations",{query:c}).done(function(){d.resolve()}).always(function(){b.searching(!1)});return e}),populate:function(){var c=b.textfield(),d=a.trim(c.val()),e=b.searchmode;if("detect"==e)b.search(d).done(a.debounce(function(c){var d=[];a.each(c,function(b,c){var e=a.create("li").html("<strong>"+c.name+"</strong><small>"+c.address+"</small>").data("venue",c)[0];
d.push(e)}),f.empty().append(d),b.reposition()},50)).fail(function(){});else{if(""==d)return;b.searchManual(d).done(a.debounce(function(c){var d=[];a.each(c,function(b,c){var e=a.create("li").html("<strong>"+c.name+"</strong><small>"+c.address+"</small>").data("venue",c)[0];d.push(e)}),f.empty().append(d),b.reposition()},100)).fail(function(){})}},_populate:a.debounce(function(){b.populate()},350),show:function(){b.composer.document.artboard.show("location")},hide:function(){b.composer.document.artboard.hide("location")
},reposition:function(){var a=b.textfield();e.appendTo(b.composer.document.artboard.container()).css({width:a.outerWidth()}).position({my:"left top",at:"left bottom",of:a})},currentLocation:null,setLocation:function(c){b.currentLocation=c;var e=b.field();e.addClass("has-location"),e.find("[name=address]").val(c.name),e.find("[name=latitude]").val(c.latitude),e.find("[name=longitude]").val(c.longitude),b.label().html(c.name),b.addLocationButton().addClass("has-location"),d.addClass("has-location is-loading has-art");
var f=b.map(),g=c.latitude+","+c.longitude,h=a.param({size:"1280x1280",sensor:!0,scale:2,zoom:15}),i="//maps.googleapis.com/maps/api/staticmap?"+h+"&center="+g+"&markers="+g;a.Image.get(i).done(function(){f.css("backgroundImage",a.cssUrl(i)),setTimeout(function(){f.addClass("is-ready")},1)}).always(function(){d.removeClass("is-loading")})},removeLocation:function(){var a=b.map();a.removeClass("is-ready"),d.removeClass("has-location has-art"),b.addLocationButton().removeClass("has-location");var c=b.field();c.removeClass("has-location"),c.find("[name=address]").val(""),c.find("[name=latitude]").val(""),c.find("[name=longitude]").val(""),b.label().html("")
},"{window} resize":function(){e.parent().length<1||b.reposition()},"{label} click":function(){b[b.field().hasClass("active")?"hide":"show"]()},"{self} composerArtboardShow":function(a,c,d){b.field().toggleClass("active","location"==d)},"{self} composerArtboardHide":function(){b.field().removeClass("active")},"{textfield} input":function(){b.searchmode="manual",e.detach(),b._populate()},"{detectButton} click":function(){b.textfield().val(""),b.searchmode="detect",e.detach(),b.populate()},"{place} click":function(a){var c=a.data("venue");
b.setLocation(c)},"{removeButton} click":function(){b.removeLocation()}}}),b.resolve()}),EasyBlog.module("composer/media",function(){var b=this;EasyBlog.require().script("mediamanager").done(function(){EasyBlog.Controller("Composer.Media",{defaultOptions:{}},function(a,b,c,d){return{init:function(){d=a.composer}}}),b.resolve()})}),EasyBlog.module("mediamanager",function(a){var b=this,c="is-searching",d="is-search-result",e="has-search-results",f="is-notfound";EasyBlog.require().library("pageslide","plupload2","ui/draggable").script("mediamanager/uploader").done(function(){var g=EasyBlog.Controller("MediaManager",{hostname:"mediaManager",pluginExtendsInstance:!0,elements:["[data-eb-mm-{frame|close-button}]","[data-eb-mm-{pages|places|place|hints}]","[data-eb-mm-{folder|filegroup|filelist}]","[data-eb-mm-{folder-back-button|folder-upload-button|folder-upload-dropzone}]","[data-eb-mm-{file|filegroup|filegroup-header|file-title}]","[data-eb-mm-{info-viewport|info-container|info|info-back-button|info-filename}]","^media [data-eb-mm-{workarea|document}]","[data-eb-mm-{show-new-files-button|show-all-files-button}]","[data-eb-mm-{search-panel|search-input|search-toggle-button}]","[data-eb-mm-{upload-thumbnail|upload-name-upload-size}]","[data-eb-mm-{folder-upload-current-file|folder-upload-stat|folder-upload-completed|folder-upload-total|folder-upload-progress-bar}]","[data-eb-mm-{new-file-count}]","[data-eb-mm-{filegroup-show-all-button}]","[data-eb-mm-{file-remove-button|file-insert-button|file-rename-button|file-move-button}]","[data-eb-mm-{folder-content-panel}]","[data-eb-mm-{foldertree|tree|tree-item}]","[data-eb-mm-{show-move-dialog-button|move-filename}]","[data-eb-mm-{folder-rename-button|folder-move-button|folder-remove-button}]","[data-eb-mm-{open-button}]","[data-eb-mm-{upload-template}]","[data-eb-mm-{folder-title}]","[data-eb-mm-{browse-button}]","[data-eb-mm-{selecting-cancel}]","[data-eb-mm-{go-to-folder|close-message-button}]","[data-eb-mm-{insert-gallery}]","[data-eb-mm-{pagination-previous|pagination-next|pagination-current|pagination-total}]"],defaultOptions:{types:{image:["jpg","jpeg","png","gif"],video:["3gp","m4v","mp4","flv","wmv","mp3","webm","swf"],audio:["mp3","m4a","aac","ogg"]},templates:{},"{thumbnail}":"[data-eb-mm-file].type-image i[data-thumbnail]","{flickrButton}":"[data-flickr-login]","{createFolder}":"[data-eb-mm-create-folder]"}},function(b,g,h,i){return{init:function(){g.templates.upload=b.uploadTemplate().detach().html(),a.each(g.types,function(a,c){for(var e,d=0;e=c[d++];)b.types[e]=a
}),b.addPlugin("uploader"),b.places.node=b.places()[0],b.hints.node=b.hints().detach()[0],window.ebmm=b,EasyBlog.MediaManager=b},"{self} composerReady":function(){i=EasyBlog.Composer},types:{"":"file"},getExtension:function(a){var a=b.getUri(a),c=a.lastIndexOf(".");return c>-1?a.slice(c+1).toLowerCase():""},getType:function(a){return b.types[b.getExtension(a)]||"file"},getKey:function(b){return"_"==b.substring(0,1)?b:"_"+a.moxie.btoa(b).replace(/\+/g,".").replace(/\=/g,"-").replace(/\//g,"~")},getUri:function(b){if(b instanceof a){var c=b;
b=c.data("key")||""}return"_"!==b.substring(0,1)?b:a.moxie.atob(b.slice(1).replace(/\./g,"+").replace(/\-/g,"="))},getParent:function(a){var a=b.getUri(a),c=a.lastIndexOf("/");return c>-1?a.slice(0,c):null},getFilename:function(a){var a=b.getUri(a),c=a.lastIndexOf("/");return c>-1?a.slice(c+1):a},isRoot:function(a){return b.getUri(a).indexOf("/")<0},getCurrentPostUri:function(){return"post:"+EasyBlog.Composer.getPostId()},medias:{},mediaLoaders:{},getMedia:function(a){var c=b.getKey(a),d=b.mediaLoaders[a];return d||(d=EasyBlog.ajax("site/views/mediamanager/media",{key:c}).done(function(a){var c=a.uri;
b.setMedia(c,a)})),d},setMedia:function(c,d){b.medias[c]=d,b.mediaLoaders[c]=a.Deferred().resolve(d)},getVariations:function(a){var c=b.medias[a];if(c)return c.meta.variations||{}},getVariation:function(c,d){if(a.isString(d)){var e=d;switch(e){case"icon":d=["system/icon","system/small","system/small 320","system/thumbnail","system/original"];break;case"small":d=["system/small","system/small 320","system/thumbnail","system/original"];break;case"medium":d=["system/medium","system/large","system/original"];break;
case"thumbnail":d=["system/thumbnail","system/original"];break;case"large":d=["system/large","system/original"];break;case"original":d=["system/original"];break;default:d=[e,"system/original"]}}var g,f=b.getVariations(c);return a.each(d,function(b,c){return a.has(f,c)?(g=f[c],!1):void 0}),g},createVariation:function(a,c,d,e){var f=b.getKey(a),g=EasyBlog.ajax("site/views/mediamanager/createVariation",{key:f,name:c,width:d,height:e}).done(function(c){b.setMedia(a,c)});return g},removeVariation:function(a,c){var d=b.getKey(a),e=EasyBlog.ajax("site/views/mediamanager/deleteVariation",{key:d,name:c}).done(function(c){b.setMedia(a,c)
});return e},mode:"standard",currentFilterType:"all",currentBrowseButton:null,currentFolderUri:null,closeMediaManager:function(){i.views.hide("media"),i.frame().removeClass("layout-media"),b.currentFilterType="all",b.mode="standard",b.currentBrowseButton=null,b.frame().removeClass("is-selecting"),b.frame().switchClass("filter-"+b.currentFilterType)},openMediaManager:function(a,c){i.views.show("media"),c&&(b.currentFilterType=c),a&&b.navigate(a)},currentUri:"places",places:{node:null},"{place} click":function(a){var c=a.data("id"),d=a.data("key"),e=b.getUri(d);
"post"==c&&(e=b.getCurrentPostUri()),b.navigate(e)},open:function(a){b.navigate(a)},navigate:function(c){var d=b.currentUri;if(d!==c){var e,f=0===d.indexOf(c)?"prev":"next",g=/post(s)*|user(s)*/.test(d)?d:null;switch(c){case"places":e=b.places.node,f="prev";break;case"posts":e=b.getHint("loading"),/post\:(.*)/.test(g)&&(f="prev"),EasyBlog.ajax("site/views/mediamanager/posts",{}).done(function(a){e.replaceWith(a)});break;case"users":e=b.getHint("loading"),/user\:(.*)/.test(g)&&(f="prev"),EasyBlog.ajax("site/views/mediamanager/users",{}).done(function(a){e.replaceWith(a)
});break;case"Flickr":case"flickr":e=b.getHint("loading"),EasyBlog.ajax("site/views/mediamanager/flickr",{}).done(function(a){e.replaceWith(a),b.revealThumbnails()});break;case"easysocial":case"jomsocial":e=b.getHint("loading"),EasyBlog.ajax("site/views/mediamanager/folder",{key:b.getKey(c)}).done(function(a){e.replaceWith(a);var d=b.getFolder(c);b.trigger("mediaFolderDisplay",[d])});break;default:var e=b.getFolder(c);e.length<1?(e=b.getHint("loading"),contentNode=e[0],b.loadFolder(c).done(function(c){a(contentNode).replaceWith(c),b.revealThumbnails(),g&&c.data("referer",g)
})):b.refreshFolder(e)}e&&(b.currentUri=c,b.display(e,f),b.trigger("mediaNavigate",[c,d,e]))}},display:function(a,c){b.pages().pageslide(a,c),b.destroyInfo()},"{folderBackButton} click":function(a){var c=b.folder.of(a),d=b.getUri(c.data("key")),e=c.data("referer");c.removeClass("folder-moved").removeClass("file-moved"),targetUri=e?e:b.isRoot(d)?"places":b.getParent(d),b.navigate(targetUri)},"{infoBackButton} click":function(a){var c=b.info.of(a),d=b.getUri(c.data("key")),e=b.getParent(d);b.destroyInfo(),b.navigate(e)
},hints:{node:null},getHint:function(c){var d=a(b.hints.node).find(".hint-"+c).clone();return("loading"==c||"error"==c)&&b.folderBackButton.inside(d).attr("data-key",b.getKey(b.currentUri)),d},getUploadTemplate:function(b){var c=a(g.templates.upload);return c.attr("data-id",b.id),c.find("[data-eb-mm-upload-name]").html(b.name),c[0]},folder:{nodes:{},get:function(a){var a=b.getKey(a),c=b.folder.selector+"[data-key='"+a+"']",d=h.find(c);return d},insert:function(a,c){a.removeClass("is-empty").find(".eb-mm-filegroup.type-folder").removeClass("is-empty"),b.getFilelist(a,"folder").prepend(c)
}},getCurrentFolder:function(){},getFolder:function(c){return a(b.folder.nodes[c])},setFolder:function(a,c){b.folder.nodes[a]=c[0]},folderLoaders:{},loadFolder:function(c){var d=b.getMedia(c).then(function(d){var e=a(d.folder).filter(b.folder.selector);return b.setFolder(c,e),b.initFolder(e),e});return b.folderLoaders[c]=d,d},initFolder:function(c){var d=b.getUri(c),e=a.Script(function(){c.data("inited")||(c.hasClass("can-upload")&&b.uploader.register(c),c.data("inited",!0),b.trigger("mediaFolderInit",[d,c]),b.refreshFolder(c))
});c.append(e)},renameFolder:function(c,d){EasyBlog.ajax("site/views/mediamanager/rename",{key:c,filename:d}).done(function(d,e,f){var g=b.folder.get(c),h=a(f);b.initFolder(h),g.replaceWith(h);var i=b.getUri(h);b.currentUri=i;var j=b.getParent(i),k=b.getFolder(j),l=k.find(b.file.getSelector(c));l.replaceWith(d)}).fail(function(){})},refreshFolder:function(a){b.syncUploadItems(a),b.trigger("mediaFolderRefresh",[a])},uploadItems:{},createUploadItem:function(c){var d=b.getUploadTemplate(c);if(b.uploadItems[c.id]=d,c.type.match("image")){var e=new a.moxie.Image;
e.onload=function(){e.downsize(100),b.uploadThumbnail.inside(d).css("backgroundImage",a.cssUrl(e.getAsDataURL()))},e.load(c.getSource())}return b.uploader.addItem(c,d),d},addUploadItem:function(a,c){var d=b.uploadItems[c.id]||b.createUploadItem(c),e=b.getType(c.name);b.getFilelist(a,e).prepend(d),b.filegroup.inside(a).filter(".type-"+e).addClass("has-new-files")},syncUploadItems:function(a){for(var f,h,c=a.data("uri"),d=b.uploader.getFiles(c),e={image:[],video:[],audio:[],file:[]},g=0;file=d[g++];)f=b.uploadItems[file.id],f||(f=b.createUploadItem(file)),h=b.getType(file.name),i[h].push(f);
for(h in e){var i=e[h],j=i.length<1,k=b.getFilelist(a,h).toggleClass("is-uploading",!j);j||k.prepend(i)}},"{selectingCancel} click":function(){b.closeMediaManager()},"{browseButton} click":function(a){var d=a.data("eb-mm-filter"),e=a.data("eb-mm-start-uri"),f=b.getUri(e),g=a.data("eb-mm-browse-place"),h=a.data("eb-mm-browse-type");"post"==f&&(f=b.getCurrentPostUri()),b.mode="select",b.currentBrowseType=h,b.currentBrowseButton=a,b.currentBrowseButton.trigger("mediaSelectStart",[b.currentBrowseButton]),b.openMediaManager(f,d),b.frame().switchClass("filter-"+b.currentFilterType),b.frame().addClass("is-selecting"),"local"==g?b.frame().addClass("show-local"):b.frame().removeClass("show-local")
},"{self} mediaUploaderFileFiltered":function(a,c,d,e){var f=d.uri,g=b.getFolder(f);g.length<1||(g.addClass("is-uploading"),g.removeClass("is-empty").find(".eb-mm-filegroup").removeClass("is-empty"),f==b.currentUri&&b.addUploadItem(g,e))},"{self} mediaUploaderFileUploaded":function(c,d,e,f,g){var h=g.response,i=h.media;b.setMedia(i.uri,i),setTimeout(function(){var c=b.uploadItems[f.id];if(c){var d=a(i.file).addClass("is-new");a(c).replaceWith(d)}},600)},"{self} mediaUploaderUploadComplete":function(){},"{self} mediaUploaderChange":function(c,d,e){var j,f=a.plupload2,g=e.uri,h=b.getFolder(g),i=b.uploader.getFiles(g),k=0,l=0,m=0;
a.each(i,function(a,b){b.finalized||b.status==f.FAILED||(b.status==f.UPLOADING&&(j=b),b.status==f.DONE&&k++,m+=b.percent,l++)}),l>0&&l!==k?(h.addClass("is-uploading"),j&&b.folderUploadCurrentFile().html(j.name),b.folderUploadTotal().html(l),b.folderUploadCompleted().html(k),b.folderUploadProgressBar().width(m/(100*l)*100+"%")):(h.removeClass("is-uploading"),a.each(i,function(a,b){b.finalized=!0})),b.newFileCount().html(b.file(".is-new").length)},getFilelist:function(a,c){var d=b.filegroup.inside(a).filter(".type-"+c).find(b.filelist);
return d},file:{active:a(),get:function(a){var a=b.getKey(a),c=b.file.getSelector(a);return h.find(c)},getSelector:function(a){return b.file.selector+"[data-key='"+a+"']"},activate:function(a){b.file.deactivate(),b.file.active=a.addClass("active")},deactivate:function(){b.file.active.removeClass("active")},rename:function(a,c){EasyBlog.ajax("site/views/mediamanager/rename",{key:a,filename:c}).done(function(c,d){b.file.get(a).replaceWith(c),b.info.get(a).replaceWith(d)}).fail(function(){})}},"{file} click":function(a){var c=a.data("key"),d=b.getUri(c);
if(b.file.activate(a),a.hasClass("type-folder"))return b.navigate(d),void 0;b.folder.of(a);b.showInfo(d)},"{filegroupHeader} click":function(a){var c=b.filegroup.of(a);c[c.hasClass("is-collapsed")?"removeTransitionClass":"addTransitionClass"]("is-collapsed",500)},"{showNewFilesButton} click":function(a){b.folder.of(a).addClass("filter-new")},"{showAllFilesButton} click":function(a){b.folder.of(a).removeClass("filter-new")},info:{get:function(a){var c=b.getKey(a);return b.info().where("key",c)}},showInfo:function(c){b.destroyInfo(),b.trigger("mediaInfoShow",[c]);
var d=b.getHint("loading"),e=b.getParent(c),f=b.getKey(e);b.folderBackButton.inside(d).attr("data-key",f),b.pages().pageslide(d,"next"),b.currentUri=c,b.getMedia(c).done(function(c){var e=a(c.info);d.replaceWith(e),"cover"!=b.currentBrowseType&&b.trigger("mediaInfoDisplay",[e,c])}).fail(function(){var a=b.getHint("error");d.replaceWith(a)})},destroyInfo:function(){var a=b.info(),c=a.data("uri");if(b.trigger("mediaInfoHide",[c]),c){var d=b.medias[c];b.trigger("mediaInfoDestroy",[a,d])}},"{flickrButton} click":function(a){var c=a.data("url"),e=(b.folder.of(a),960),f=650,g=screen.width/2-e/2,h=screen.height/2-f/2;
window.doneLogin=function(){var a=b.getHint("loading");b.display(a,"next"),EasyBlog.ajax("site/views/mediamanager/flickr").done(function(a){b.display(a,"next")})},window.open(c,"","scrollbars=no,resizable=no, width="+e+",height="+f+",left="+g+",top="+h)},toggleSearch:function(a){a.hasClass(c)?b.deactivateSearch(a):b.activateSearch(a)},activateSearch:function(a){a.addClass(c),b.searchInput.inside(a).val("").focus()},deactivateSearch:function(a){a.removeClass(c),b.resetSearch(a)},resetSearch:function(a){b.searchInput.inside(a).val(""),b.search(a,"")
},search:function(c,g){var g=g.toUpperCase(),h=""!==g;c.removeClass(f).toggleClass(e,h);var i=b.filegroup.inside(c),j=b.file.inside(c);if(!h)return j.removeClass(d),i.removeClass(e),void 0;var k={},l=0;j.each(function(){var b=a(this),c=b.text().toUpperCase().indexOf(g)>=0;c&&(k[b.data("type")]=!0,l++),b.toggleClass(d,c)}),a.each(k,function(a){i.filter(".type-"+a).addClass(e)}),c.toggleClass(f,1>l)},"{searchToggleButton} click":function(a){var c=b.folder.of(a);b.toggleSearch(c)},"{searchInput} keyup":function(a,c){if(27===c.keyCode){var d=b.folder.of(a),e=a.val();
""==e?b.deactivateSearch(d):b.resetSearch(d)}},"{searchInput} input":a.debounce(function(c){var d=b.folder.of(c),e=a.trim(c.val()).toUpperCase();b.search(d,e)},150),"{createFolder} click":function(a){var c=b.folder.of(a),d=b.getKey(b.currentUri);EasyBlog.dialog({content:EasyBlog.ajax("site/views/mediamanager/createFolderDialog"),bindings:{"{submitButton} click":function(){EasyBlog.ajax("site/views/mediamanager/createFolder",{key:d,folder:this.folderName().val()}).done(function(a){b.folder.insert(c,a),EasyBlog.dialog().close()
})}}})},"{self} mediaFolderDisplay":function(){},"{self} mediaRemove":function(a,c,d){var e=b.getKey(d);b.file().where("key",e).remove(),b.infoViewport().removeClass("active");var f=b.getParent(d),g=b.getFolder(f),h=g.find("[data-eb-mm-file][data-key='"+e+"']");h.remove(),setTimeout(function(){b.info().where("key",e).detach()},500)},"{filegroupShowAllButton} click":function(a){b.filegroup.of(a).addClass("show-all"),b.revealThumbnails()},revealThumbnails:function(){var c=b.folderContentPanel();if(!(c.length<1)){{var d=c.offset().top;
d+c.height()}b.thumbnail.inside(c).each(function(){var b=a(this);if(!b.is(":hidden")){{var c=b.offset().top;c+b.height()}return b.css("backgroundImage",a.cssUrl(b.data("thumbnail"))).removeAttr("data-thumbnail"),!0}})}},"{pages} pageslidestop":function(){b.revealThumbnails()},"{folderContentPanel} scrolly":a.debounce(function(){b.revealThumbnails()},150),"{fileInsertButton} click":function(a){var c=b.info.of(a),d=c.data("key"),e=b.getUri(d),f=b.mediaDocument(),g=f.find(EBD.standaloneBlock);b.pauseVideoObject(),b.getMedia(e).done(function(a){"select"==b.mode?(b.currentBrowseButton.trigger("mediaSelect",[a]),i.blocks.panel.fieldgroup.hide()):b.trigger("mediaInsert",[a,g]),b.closeMediaManager()
}).fail(function(){}).always(function(){})},"{fileRemoveButton} click":function(a){var c=b.info.of(a),d=c.data("key"),e=b.getUri(d);b.getMedia(e).done(function(a){EasyBlog.dialog({content:EasyBlog.ajax("site/views/mediamanager/deleteFileDialog",{file:a.title}),bindings:{"{submitButton} click":function(){EasyBlog.ajax("site/views/mediamanager/delete",{key:d}).done(function(){EasyBlog.dialog().close(),b.removeMedia(e);var a=b.getParent(e);b.navigate(a)}).fail(function(){})}}})})},"{fileRenameButton} click":function(c){var d=b.info.of(c),e=d.data("key"),f=a.trim(b.infoFilename.inside(d).text());
EasyBlog.dialog({content:EasyBlog.ajax("site/views/mediamanager/renameFileDialog",{current:f}),bindings:{"{submitButton} click":function(){var c=this.fileName().val();""!=a.trim(c)&&b.file.rename(e,c)}}})},"{fileMoveButton} click":function(c){var d=b.treeItem(".active");if(!(d.length<1)){var e=c.data("key"),f=b.getUri(e),g=d.data("key"),h=b.getUri(g),i=b.getParent(f),j=b.getFolder(i);EasyBlog.dialog({content:EasyBlog.ajax("site/views/mediamanager/confirmMoveItem",{source:e,target:g}),bindings:{"{submitButton} click":function(){EasyBlog.ajax("site/views/mediamanager/move",{source:e,target:g}).done(function(c){b.removeMedia(e),b.refreshMedia(h),EasyBlog.dialog().close();
var f=a(c),g=f.data("type");"folder"==g?(j.addClass("folder-moved"),b.frame().removeClass("show-foldermove-message show-filemove-message has-messages").addClass("show-foldermove-message")):(j.addClass("file-moved"),b.frame().removeClass("show-foldermove-message show-filemove-message has-messages").addClass("show-filemove-message")),b.goToFolder().on("click",function(){j.removeClass("folder-moved").removeClass("file-moved"),b.navigate(h)}),b.navigate(i)}).fail(function(){alert("Unable to move file.")})}}})}},refreshMedia:function(a){a=b.getUri(a),delete b.medias[a],delete b.mediaLoaders[a],delete b.folderLoaders[a],delete b.folder.nodes[a]
},removeMedia:function(a){a=b.getUri(a),b.refreshMedia(a),b.trigger("mediaRemove",[a])},"{showMoveDialogButton} click":function(a){var c=b.getHint("move"),d=b.info.of(a),e=b.folder.of(a),g=(e.data("key"),d.data("key")),h=b.getUri(g),i=b.infoFilename.inside(d).text(),j=b.getParent(h),k=b.getKey(j);b.openButton.inside(c).attr("data-key",k),b.moveFilename.inside(c).html(i),b.fileMoveButton.inside(c).attr("data-key",g),b.pages().pageslide(c,"next"),b.destroyInfo(),b.currentUri=h+"/?move"},"{treeItem} click":function(a,c){if(c.stopPropagation(),b.treeItem().removeClass("active"),a.addClass("active").toggleClass("is-expanded"),a.hasClass("is-expanded")&&!a.data("childTree")){a.addClass("is-loading");
var d=a.data("key"),e=b.getUri(d);"post"==e&&(e=b.getCurrentPostUri(),d=b.getKey(e),a.attr("data-key",d)),EasyBlog.ajax("site/views/mediamanager/tree",{key:d}).done(function(b){a.append(b).data("childTree",b)}).fail(function(){}).always(function(){a.removeClass("is-loading")})}},"{openButton} click":function(a){var c=a.data("key"),d=b.getUri(c);b.navigate(d)},"{insertGallery} click":function(a){var c=b.folder.of(a),d=c.data("key"),e=b.getUri(d),f=EasyBlog.Composer,g={uri:e},h="[embed=gallery]"+JSON.stringify(g)+"[/embed]";
f.document.insertContent(h),b.closeMediaManager()},"{folderMoveButton} click":function(a){var c=b.getHint("move"),d=b.folder.of(a),e=d.data("key"),f=b.getUri(e),g=b.getFilename(e);b.openButton.inside(c).attr("data-key",e),b.moveFilename.inside(c).html(g),b.fileMoveButton.inside(c).attr("data-key",e),b.pages().pageslide(c,"next"),b.currentUri=f+"/?move"},"{folderRenameButton} click":function(c){var d=b.folder.of(c),e=d.data("key"),f=b.getFilename(e);EasyBlog.dialog({content:EasyBlog.ajax("site/views/mediamanager/renameFolderDialog",{current:f}),bindings:{"{submitButton} click":function(){var c=this.folderName().val();
""!=a.trim(c)&&(b.renameFolder(e,c),EasyBlog.dialog().close())}}})},"{folderRemoveButton} click":function(a){var c=b.folder.of(a),d=c.data("key"),e=b.getUri(d);EasyBlog.dialog({content:EasyBlog.ajax("site/views/mediamanager/deleteFolderDialog"),bindings:{"{submitButton} click":function(){EasyBlog.ajax("site/views/mediamanager/delete",{key:d}).done(function(){EasyBlog.dialog().close(),b.navigate(b.getParent(e)),b.removeMedia(e)}).fail(function(){})}}})},"{paginationPrevious} click, {paginationNext} click":function(a){var c=a.data("page"),d=b.getHint("loading");
EasyBlog.ajax("site/views/mediamanager/users",{page:c}).done(function(a){d.replaceWith(a)}),b.display(d)},"{file} mouseover":function(a){if("folder"!=a.data("type")){var b=EasyBlog.Composer;b.document.isLegacy()||a.data("uiDraggable")||a.draggable({helper:function(){var b=a.clone();return"image"==a.data("type")?b.addClass("layout-tile").css({width:a.outerWidth(),height:a.outerHeight()}):b.addClass("layout-list"),b},start:function(b,c){var d=c.helper;if(d.hasClass("layout-list")){var e=b.pageX-a.offset().left,f=c.helper.width(),g=e-f/2;
c.helper.css("margin-left",g)}},appendTo:b.ghosts(),connectToSortable:EBD.root})}},"{file} dragstart":function(a){{var d=a.data("key");b.getUri(d)}b.getMedia(d),b.closeMediaManager()},"{closeButton} click":function(){b.pauseVideoObject(),b.closeMediaManager()},"{closeMessageButton} click":function(){b.frame().removeClass("show-foldermove-message show-filemove-message has-messages")},pauseVideoObject:function(){a("video").length>0&&a("video").get(0).pause()}}});a("body").addController(g),b.resolve(g)})}),EasyBlog.module("mediamanager/uploader",function(a){var b=this;
EasyBlog.require().library("plupload2").done(function(){EasyBlog.Controller("MediaManager.Uploader",{elements:["[data-eb-mm-{upload-progress|upload-name|upload-size|upload-progress-value|upload-progress-bar}]","[data-eb-mm-upload-{error-text|error-retry}]"],defaultOptions:{}},function(b,c,d,e){return{init:function(){e=b.mediaManager;var c={runtimes:"html5, html4",autostart:!0},d=e.frame().htmlData("mm-uploader");b.defaultUploadOptions=a.extend(c,d)},instances:{},register:function(c,d){var d=a.extend({},b.defaultUploadOptions,d),f=c.data("key"),g=EasyBlog.MediaManager.getUri(f);
"post"==g&&(f=EasyBlog.MediaManager.getKey(EasyBlog.MediaManager.getCurrentPostUri()));var h=d.extensions.split(",");a.each(EasyBlog.MediaManager.options.types,function(b,c){a(c).filter(function(b,c){return a.inArray(c,h)})}),EasyBlog.MediaManager.options.types.file=h;var i=c.data("type")||"file";d.extensions=EasyBlog.MediaManager.options.types[i].join(","),d.url=a.uri(d.url).replaceQueryParam("key",f).toString();var j=c.plupload2(d,!1),k=j.id;return j.uri=e.getUri(f),j.container=c,b.instances[k]=j,a.each(b.plupload,function(a,d){j.bind(a,function(){d.apply(this,arguments),b.trigger("mediaUploader"+a,arguments),c.trigger("mediaUploader"+a,arguments),b.trigger("mediaUploaderChange",arguments),c.trigger("mediaUploaderChange",arguments)
})}),j.init(),j},plupload:{FileFiltered:function(a,b){b.items=[],b.addedDate=(new Date).getTime()},FilesAdded:function(a){a.settings.autostart&&a.start()},BeforeUpload:function(a,c){b.updateAllItems(c)},UploadFile:function(a,c){b.updateAllItems(c)},UploadProgress:function(a,c){b.updateAllItems(c)},ChunkUploaded:function(a,c){b.updateAllItems(c)},FileUploaded:function(c,d,e){try{var f=a.parseJSON(e.response);e.response=f}catch(g){}b.updateAllItems(d)},Error:function(c,d){var e=d.file;if(e){if("-600"==d.code)return e.status=4,e.error=d.message,EasyBlog.dialog({content:EasyBlog.ajax("site/views/composer/cancelFileSizeWarning")}),b.updateAllItems(e),b.trigger("mediaUploaderFileError",arguments),c.container.trigger("mediaUploaderFileError",arguments),void 0;
e.status=4,e.error=a.parseJSON(d.response),b.updateAllItems(e),b.trigger("mediaUploaderFileError",arguments),c.container.trigger("mediaUploaderFileError",arguments)}},FilesRemoved:function(a,c){c.status=6,b.updateAllItems(c)},Destroy:function(a){delete b.instances[a.id]},Init:a.noop,PostInit:a.noop,OptionChanged:a.noop,StateChanged:a.noop,QueueChanged:a.noop,Refresh:a.noop,UploadComplete:a.noop},getInstances:function(c){return a.map(b.instances,function(a){return a.uri==c?a:null})},getFiles:function(c){var d=b.getInstances(c),e=a.chain(d).pluck("files").flatten(!0).sortBy("addedDate").value();
return e},status:{0:"idle",1:"queued",2:"uploading",3:"unused",4:"failed",5:"done",6:"removed"},addItem:function(a,c){a.items.push(c),b.updateItem(a,c)},updateItem:function(c,d){var d=a(d),e=b.status[c.status];return d.switchClass("state-"+e),c.error?(d.find(b.errorText).html(c.error.message),d.find(b.errorRetry).off("click.mmupload.retry").on("click.mmupload.retry",function(){d.switchClass("state-idle")}),void 0):(d.find(b.uploadName).html(c.name),d.find(b.uploadSize).html(a.plupload2.formatSize(c.size)),d.find(b.uploadProgressValue).html(c.percent+"%"),d.find(b.uploadProgressBar).width(c.percent+"%"),void 0)
},updateAllItems:function(c){c.items&&a.each(c.items,function(a,d){b.updateItem(c,d)})},removeItem:function(b,c){a.pull(b.items,c)}}}),b.resolve()})}),EasyBlog.module("composer/panels/authorship",function(a){var b=this;EasyBlog.Controller("Composer.Panels.Authorship",{defaultOptions:{"{authorArea}":"[data-eb-composer-author]","{currentAuthor}":"[data-eb-composer-current-author]","{searchAssociates}":"[data-associates-search]","{cancelSearchAssociates}":"[data-associates-search-cancel]","{searchAuthor}":"[data-author-search]","{cancelSearchAuthor}":"[data-author-search-cancel]","{tab}":"[data-author-type]","{tabContent}":"[data-tab-content]","{changeAuthor}":"[data-eb-composer-switch-author]","{authorPicker}":"[data-eb-composer-author-picker]","{authorItem}":"[data-eb-author-item]","{authorList}":"[data-eb-composer-author-list]","{authorCheckbox}":"[data-eb-composer-authoritem]","{activeAuthorId}":"[data-eb-composer-authorid]","{activeAuthorAvatar}":"[data-eb-composer-authoravatar]","{activeAuthorName}":"[data-eb-composer-authorname]","{authorPrevBtn}":"[data-eb-author-prev]","{authorNextBtn}":"[data-eb-author-next]","{associatesList}":"[data-eb-composer-associates-list]","{associateItem}":"[data-associates-item]","{associateCheckbox}":"[data-associates-checkbox]","{activeAssociateName}":"[data-eb-composer-associatename]","{activeAssociateId}":"[data-eb-composer-associateid]","{activeAssociateType}":"[data-eb-composer-associatetype]","{activeAssociateAvatar}":"[data-eb-composer-associateavatar]"}},function(b){return{init:function(){},"{cancelSearchAssociates} click":function(){b.associateItem().removeClass("hide"),b.searchAssociates().val("")
},"{cancelSearchAuthor} click":function(){b.authorItem().removeClass("hide");var c=a.trim(b.searchAuthor().val());b.searchAuthor().val(""),c&&b.loadAuthors(0,"")},"{searchAssociates} keydown":a.debounce(function(c){var e=a.trim(c.val()).toLowerCase();if(!e)return b.associateItem().removeClass("hide"),void 0;var f=b.associateItem().filter(function(){var b=a.trim(a(this).data("title")).toLowerCase();return 0==b.indexOf(e)?!0:!1});f&&(b.associateItem().addClass("hide"),f.removeClass("hide"))},300),"{searchAuthor} keydown":a.debounce(function(c){var e=a.trim(c.val()).toLowerCase();
""!=e&&b.loadAuthors(0,e)},300),associatesLoaded:!1,"{tab} click":function(a){var d=a.data("type");"associates"==d&&b.loadAssociates(),b.tab().removeClass("active"),b.tab().where("type",d).addClass("active"),b.tabContent().removeClass("active"),b.tabContent().where("type",d).addClass("active")},"{changeAuthor} click":function(){return b.authorArea().toggleClass("is-opened"),b.authorPicker().toggleClass("pulled"),1==b.tab().length?(b.loadAssociates(),void 0):(b.loadAuthors("0",""),void 0)},"{authorPrevBtn} click":function(c,d){d.preventDefault();
var e=a.trim(b.searchAuthor().val()).toLowerCase(),f=a(c).data("start");f=parseInt(f),0>f&&(f=0),b.loadAuthors(f,e)},"{authorNextBtn} click":function(c,d){d.preventDefault();var e=a(c).data("start"),f=a.trim(b.searchAuthor().val()).toLowerCase();b.loadAuthors(e,f)},loadAuthors:function(c,d){var e=a("<div />",{"class":"loading-authors"});e.html('<i class="fa fa-circle-o-notch fa-spin"></i>'),b.authorList().html(e),EasyBlog.ajax("site/views/composer/listAuthors",{selected:b.activeAuthorId().val(),limitstart:c,search:d}).done(function(a){b.authorList().html(a)
})},loadAssociates:function(){b.associatesLoaded||EasyBlog.ajax("site/views/composer/listAssociates",{source_id:b.activeAssociateId().val(),source_type:b.activeAssociateType().val()}).done(function(a){b.associatesLoaded=!0,b.associatesList().html(a)})},"{authorCheckbox} change":function(a){var d=a.parents(b.authorItem.selector).data("avatar"),e=a.parents(b.authorItem.selector).data("id"),f=a.parents(b.authorItem.selector).data("title");b.setActiveAuthor(e,f,d)},"{associateCheckbox} change":function(a){var d=a.parents(b.associateItem.selector).data("avatar"),e=a.parents(b.associateItem.selector).data("id"),f=a.parents(b.associateItem.selector).data("title"),g=a.parents(b.associateItem.selector).data("type");
return"easyblog.sitewide"==g?(b.removeAssociate(),void 0):(b.setActiveAssociate(e,g,f,d),void 0)},removeAssociate:function(){b.activeAssociateId().val(0),b.activeAssociateType().val("easyblog.sitewide"),b.activeAssociateName().addClass("hidden"),b.activeAssociateAvatar().addClass("hide")},setActiveAssociate:function(a,c,d,e){b.activeAssociateId().val(a),b.activeAssociateName().html(d).removeClass("hidden"),b.activeAssociateType().val(c),b.activeAssociateAvatar().attr("src",e).removeClass("hide")},setActiveAuthor:function(a,c,d){b.activeAuthorId().val(a),b.activeAuthorName().html(c),b.activeAuthorAvatar().attr("src",d),composer.options.authorId!=a?b.currentAuthor().removeClass("hide"):b.currentAuthor().addClass("hide")
},"{self} composerValidate":function(){}}}),b.resolve()}),EasyBlog.module("composer/panels/autopost",function(a){var b=this;EasyBlog.Controller("Composer.Panels.AutoPost",{defaultOptions:{"{twitterCheckbox}":"[data-autopost-twitter]","{facebookCheckbox}":"[data-autopost-facebook]","{linkedinCheckbox}":"[data-autopost-linkedin]"}},function(b){return{init:function(){},itemUpdated:function(b){var c=a(b).is(":checked");return c?(a(b).parent().addClass("checked"),void 0):(a(b).parent().removeClass("checked"),void 0)
},"{twitterCheckbox} change":function(a){b.itemUpdated(a)},"{facebookCheckbox} change":function(a){b.itemUpdated(a)},"{linkedinCheckbox} change":function(a){b.itemUpdated(a)}}}),b.resolve()}),EasyBlog.module("composer/panels/post",function(a){var b=this;EasyBlog.Controller("Composer.Panels.Post",{defaultOptions:{"{title}":"[data-post-title]",permalink:"","{permalinkData}":"[data-permalink-data]","{permalinkInput}":"[data-permalink-input]","{savePermalink}":"[data-permalink-save]","{editPermalink}":"[data-permalink-edit]","{cancelEditPermalink}":"[data-permalink-edit-cancel]","{permalinkEditor}":"[data-permalink-editor]","{permalinkPreview}":"[data-permalink-preview]","{languageSelect}":"[data-composer-language]"}},function(b,c){return{init:function(){c.permalink=b.permalinkInput().val()
},hidePermalinkForm:function(){b.permalinkEditor().addClass("hide"),b.permalinkPreview().removeClass("hide")},showPermalinkForm:function(){b.permalinkPreview().addClass("hide"),b.permalinkEditor().removeClass("hide")},savePermalinkForm:function(){var a=b.permalinkInput().val();EasyBlog.ajax("site/views/composer/normalizePermalink",{permalink:a}).done(function(a){c.permalink=a,b.permalinkInput().val(c.permalink),b.permalinkData().html(a),b.hidePermalinkForm()})},"{languageSelect} change":function(b){var d=a(b).val();
"*"==d?a("[data-composer-association]").addClass("hide"):(a("[data-composer-association]").removeClass("hide"),a("[data-composer-association-item]").each(function(){var b=a(this),c=b.data("id"),e=b.data("code");e==d?(a(this).find("input#assoc-postname"+c).val(""),a(this).find("input#assoc-postid"+c).val(""),a(this).addClass("hide")):a(this).hasClass("hide")&&a(this).removeClass("hide")}))},"{cancelEditPermalink} click":function(){b.permalinkInput().val(c.permalink),b.hidePermalinkForm()},"{permalinkInput} keyup":function(a,c){var d=c.keyCode?c.keyCode:c.which;
13==d&&b.savePermalinkForm()},"{savePermalink} click":function(){b.savePermalinkForm()},"{editPermalink} click":function(){b.showPermalinkForm()},"{title} change":function(d){var f=a(d).val();return""!=c.permalink?!1:(b.permalinkInput().val(f),b.savePermalinkForm(),void 0)},"{self} composerSelectTemplate":function(a,c,d,e,f){e&&b.title().val(e),f&&(b.permalinkInput().val(f),b.savePermalinkForm())}}}),b.resolve()}),EasyBlog.module("composer/panels/seo",function(a){var b=this;EasyBlog.require().library("textboxlist").done(function(){EasyBlog.Controller("Composer.Panels.Seo",{defaultOptions:{"{keywordTemplate}":"[data-keyword-template]","{metaInput}":"[data-meta-description]","{metaCounter}":"[data-meta-counter]","{keywordCounter}":"[data-keyword-counter]","{textboxlist}":"[data-eb-composer-seo-keywords-textboxlist]","{autofillButton}":"[data-eb-composer-seo-keywords-autofill-button]","{jsondata}":"[data-eb-composer-keywords-jsondata]"}},function(b){return{init:function(){if(0!=b.metaInput().length){a.template("composer/textboxlist/keywords",b.keywordTemplate().detach().html()),b.textboxlist().textboxlist({component:"eb",view:{item:"composer/textboxlist/keywords"}}),b.tagger=b.textboxlist().textboxlist("controller");
var d=JSON.parse(b.jsondata().val());a.each(d,function(a,c){b.tagger.addItem(c)})}},"{textboxlist} listChange":a.debounce(function(){b.keywordCounter().html(b.tagger.getAddedItems().length)},15),"{metaInput} keyup":function(c){var e=a(c).val().length;b.metaCounter().html(e)},"{autofillButton} click":function(c){var d=b.textboxlist().textboxlist("controller"),e=EasyBlog.Composer.document.getText(),f=a(c).parent();a(f).addClass("is-loading"),EasyBlog.ajax("site/views/composer/suggestKeywords",{data:e}).done(function(c){a(f).removeClass("is-loading"),c&&(a.each(c,function(a,b){d.addItem(b.title)
}),b.metaCounter().text(c.length))})},"{self} composerSave":function(c,d,e){e.data.keywords=0==b.metaInput().length?"":a.pluck(b.tagger.getAddedItems(),"title").join(", ")}}}),b.resolve()})}),EasyBlog.module("composer/panels",function(a){var b=this;EasyBlog.Controller("Composer.Panels",{hostname:"panels",defaultOptions:{"{panel}":"[data-eb-composer-panel]","{panelTab}":"[data-eb-composer-panel-tab]","{showDrawer}":"[data-eb-composer-panel-show-drawer]","{fieldset}":".eb-composer-fieldset","{fieldsetToggle}":".eb-composer-fieldset-toggle input"}},function(b){return{init:function(){var c=["autopost","association","seo","post","category","authorship"];
a.each(c,function(a,c){b.addPlugin(c)})},panel:{get:a.memoize(function(a){return b.panel().where("id",a)})},panelTab:{get:a.memoize(function(a){return b.panelTab().where("id",a)})},fieldset:{get:function(a){return b.fieldset().where("name",a)},enable:function(a,c){void 0===c&&(c=!0),b.fieldset.get(a).toggleClass("is-disabled",!c).find(b.fieldsetToggle).prop("checked",!!c)},disable:function(a,c){void 0===c&&(c=!1),b.fieldset.enable(a,c)},show:function(a){b.fieldset.get(a).removeClass("is-hidden")},hide:function(a){b.fieldset.get(a).addClass("is-hidden")
},toggle:function(a,c){b.fieldset.get(a).toggleClass("is-hidden",void 0===c?void 0:!c)}},activate:function(a){b.deactivate(),b.panel.get(a).addClass("active"),b.panelTab.get(a).addClass("active"),b.trigger("composerPanelActivate",[a])},deactivate:function(a){a||(a=b.panel(".active").data("id")),b.panel.get(a).removeClass("active"),b.panelTab.get(a).removeClass("active"),b.trigger("composerPanelDeactivate",[a])},"{panelTab} click":function(a){var c=a.data("id");b.activate(c)},"{showDrawer} click":function(){a("[data-eb-composer-frame]").toggleClass("show-drawer")
},"{fieldsetToggle} change":function(a){b.fieldset.of(a).toggleClass("is-disabled",!a.is(":checked"))}}}),b.resolve()}),EasyBlog.module("composer/posts",function(a){var b=this;EasyBlog.Controller("Composer.Posts",{elements:["[data-eb-posts-{close-button}]","[data-eb-composer-{posts}]","[data-eb-composer-posts-{search-toggle-button|search-cancel-button}]"],defaultOptions:{"{searchPanel}":"[data-eb-composer-sidebar-search-panel]","{hideSearch}":"[data-eb-composer-sidebar-search-cancel-button]","{wrapper}":"[data-eb-composer-posts]","{result}":"[data-eb-composer-posts-result]","{searchTextfield}":"[data-eb-composer-posts-search-textfield]","{openPostButton}":"[data-eb-composer-open-post]","{insertLinkButton}":"[data-eb-composer-insert-link]","{openMediaButton}":"[data-eb-composer-open-media]","{postTitle}":"[data-eb-composer-posts-item-title]"}},function(b,c,d,e){return{loaded:!1,initialResult:null,init:function(){e=b.composer,blocks=e.blocks,blocks.loadBlockHandler("post")
},"{closeButton} click":function(){b.hideViewport()},"{searchTextfield} keydown":a.debounce(function(c){var d=a.trim(c.val());return d.length<1?(b.wrapper().removeClass("searching"),void 0):(b.wrapper().removeClass("empty"),b.wrapper().addClass("searching"),EasyBlog.ajax("site/views/search/search",{query:d}).done(function(a){return b.wrapper().removeClass("searching"),0==a.length?(b.wrapper().addClass("empty"),void 0):(b.result().append(a),void 0)}).fail(function(){}),void 0)},500),insertPostLink:function(){},hideViewport:function(){e.views.hide("posts")
},"{searchToggleButton} click":function(){b.posts().addClass("is-searching")},"{searchCancelButton} click":function(){b.posts().removeClass("is-searching")},"{toggleSearch} click":function(){b.searchPanel().toggleClass("active")},"{hideSearch} click":function(){b.searchPanel().toggleClass("active"),b.wrapper().removeClass("empty"),b.searchTextfield().val(""),b.result().html(b.initialResult)},"{insertLinkButton} click":function(c){var e=EasyBlog.Composer.getDoctype(),f=c.data("title"),g=c.data("permalink"),h=c.data("image"),i=c.data("content");
if("ebd"==e){var j=blocks.constructBlock("post",{title:f,url:g,image:h,intro:i});blocks.addBlock(j)}else link=a.create("a").attr({href:g,title:f}).html(f),EasyBlog.LegacyEditor.insert(link.toHTML());b.hideViewport()},"{postTitle} click":function(c){var e=a(c).data("title"),f=a(c).data("permalink");b.insert(f,e)},"{composer} composerViewShow":function(a,c,d){"posts"!==d||b.loaded||(b.posts().addClass("is-loading"),EasyBlog.ajax("site/views/composer/listArticles",{exclude:e.getPostId()}).done(function(a){return b.posts().removeClass("is-loading"),b.loaded=!0,0==a.length?(b.posts().addClass("is-empty"),void 0):(b.posts().addClass("is-ready"),b.initialResult=a,b.result().append(a),void 0)
}).fail(function(){}))},"{composer} sidebarDeactivate":function(a,b,c){}}}),b.resolve()}),EasyBlog.module("composer/tags",function(a){var b=this,c={BACKSPACE:8,COMMA:188,DELETE:46,DOWN:40,ENTER:13,ESCAPE:27,LEFT:37,RIGHT:39,SPACE:32,TAB:9,UP:38},d={38:"up",40:"down",37:"left",39:"right"};EasyBlog.require().library("textboxlist","nearest","scrollTo").done(function(){EasyBlog.Controller("Composer.Tags",{elements:["[data-eb-composer-tags-{textboxlist}]"],defaultOptions:{templates:{},"{tagTemplate}":"[data-tag-template]",pagination:30,"{tags}":"[data-eb-composer-tags]","{tag}":".textboxlist-item","{total}":"[data-eb-composer-tags-total]","{count}":"[data-eb-composer-tags-count]","{suggestions}":".eb-composer-tags-suggestions","{selection}":".eb-composer-tags-selection","{toggleButton}":"[data-eb-composer-tags-toggle-button]","{autofillButton}":"[data-eb-composer-tags-autofill-button]","{itemgroup}":".eb-composer-tags-selection-itemgroup","{item}":".eb-composer-tags-selection-itemgroup > div","{textfield}":"[data-textboxlist-textField]","{jsondata}":"[data-eb-composer-tags-jsondata]"}},function(b,e,f,g,h,i){return{init:function(){if("0"!=EasyBlog.Composer.options.tags.enabled){a.template("composer/textboxlist/item",b.tagTemplate().detach().html()),h=b.selection,g=b.suggestions;
var c=parseInt(b.tags().attr("data-eb-composer-tags-max"))||null;b.textboxlist().textboxlist({component:"eb",max:c,ignoreLocked:!0,view:{item:"composer/textboxlist/item"},filterItem:function(b){return a.isString(b)?i.sanitize(b):(b.title=i.sanitize(b.title),b)}}),i=b.tagger=a.extend(b.textboxlist().textboxlist("controller"),b.tagger),g.populate("",!0);for(var d=0,e=JSON.parse(b.jsondata().val());existingTag=e[d++];)i.addItem({id:existingTag.id,title:existingTag.title,key:i.getItemKey(existingTag.title),locked:!1});
window.tagz=b}},tagger:{sanitize:function(b){return a.trim(b).replace(/,/g,"")},addLockedItem:function(b){b=a.trim(b);var c=i.get(b),d=c&&!c.locked;c&&i.deleteItem(c.id),i.addItem({id:a.uid("item-"),title:b,key:i.getItemKey(b),locked:!0,assigned:d},!0)}},"{textfield} keydown":function(a,e){var f=e.which,i=h.activeItem;switch(f){case c.UP:case c.DOWN:case c.LEFT:case c.RIGHT:var j=d[f];(i.length>0||"down"==j)&&(g.navigate(j),e.preventDefault());break;case c.ESCAPE:i.length>0?h.deactivate(i):b.suggestions().hasClass("is-showing")?g.collapse():a.val("");
break;case c.ENTER:i.length>0&&(h.use(i),e.preventDefault());break;default:g.populateFromTextfield()}},"{item} mouseover":function(a){h.deactivate(),h.activate(a)},"{item} click":function(a){h.use(a)},"{textboxlist} addItem":function(b,c,d){a(h.get(d.title)).addClass("is-used")},"{textboxlist} removeItem":function(b,c,d){d.assigned?i.addItem(d.title):a(h.get(d.title)).removeClass("is-used")},"{textboxlist} listChange":a.debounce(function(){g.refresh();var a=b.tagger.getAddedItems().length;b.count().text(a)},15),"{self} categoryselect":function(b,c,d){if(!(d.tags.length<=0)){var e=(d.tags||"").split(",");
a.each(e,function(a,b){i.addLockedItem(b)})}},"{self} categorydeselect":function(c,d,e){if(!(e.tags.length<=0)){var f=b.composer.category.toArray(),g=(e.tags||"").split(","),h=a.pluck(f,"tags").join(",").split(","),j=a.without.apply(null,[g].concat(h));a.each(j,function(a,b){var c=i.get(b);c&&i.removeItem(c.id)})}},"{toggleButton} click":function(){g[b.suggestions().hasClass("is-showing")?"collapse":"expand"]()},"{autofillButton} click":function(c){var d=b.composer.document.getText(),e=a(c).parent();a(e).addClass("is-loading"),EasyBlog.ajax("site/views/composer/suggestKeywords",{data:d}).done(function(b){a(e).removeClass("is-loading"),b&&a.each(b,function(a,b){i.addItem(b.title)
})})},suggestions:{index:0,tags:[],expand:function(){g.tick++,b.suggestions().addClass("is-showing")},collapse:function(){g.tick++,b.suggestions().removeClass("is-showing")},refresh:function(){var a=b.item(":not(.is-used)");b.suggestions().toggleClass("is-empty",a.length<1),g.count()},show:function(){g.tick++,g.refresh(),g.expand()},hide:function(){var a=++g.tick;g.collapse(),setTimeout(function(){a===g.tick&&g.reset()},500)},set:function(a){a.length<1?(g.hide(),g.tags=[]):(g.reset(),g.tags=a)},reset:function(){g.tags=[],g.i=0,b.itemgroup().empty()
},pid:0,tick:0,currentQuery:null,query:a.memoize(function(a){return EasyBlog.ajax("site/views/tags/suggest",{search:a}).fail(function(){g.query.reset(a)})}),populate:function(a,c){g.tick++;var d=++g.pid;g.currentQuery&&g.currentQuery.abort(),a=i.sanitize(a),b.suggestions().addClass("is-busy"),g.currentQuery=g.query(a).done(function(a){g.pid===d&&(g.set(a),g.suggest(c))}).fail(function(){g.pid!==d}).always(function(){b.suggestions().removeClass("is-busy"),g.currentQuery=null})},populateTimer:null,populateFromTextfield:function(){g.tick++,clearTimeout(g.populateTimer),setTimeout(function(){var a=b.textfield(),c=i.sanitize(a.val());
""===c?(g.hide(),g.populate("",!0)):g.query.cache.hasOwnProperty(c)?g.populate(c):g.populateTimer=setTimeout(function(){g.populate(c)},250)},1)},suggest:function(c){var d=g.tags;if(!(d.length<1)){for(var k,l,n,f=0,j=e.pagination,m=[];j>f&&(k=d[g.i]);)l=k.title,n=h.get(l)||h.create(l),m.push(n),i.get(l)?a(n).addClass("is-used"):f++,g.i++;b.itemgroup().append(m),c?g.refresh():g.show()}},navigate:function(c){var d=b.item(),e=b.itemgroup(),f=h.activeItem,i=a(f[0]||b.textfield()[0]).nearest(d,c);i.length>0?(h.activate(i),e.scrollIntoView(i)):f.length>0&&("down"==c&&(g.suggest(),e.scrollIntoView(f)),"up"==c&&h.deactivate())
},count:function(){var c=a.pluck(g.tags,"title"),d=a.keys(i.itemsByTitle),e=a.without.apply(null,[c].concat(d)),f=e.length;b.total().text(f+"")}},selection:{items:{},activeItem:a(),create:function(a){var b=document.createElement("div");return b.innerHTML=a,h.items[a]=b},get:function(a){return h.items[a]},activate:function(a){h.deactivate(),h.activeItem=a.addClass("active")},deactivate:function(){h.activeItem.removeClass("active"),h.activeItem=a()},use:function(c){var c=a(c),d=c.text(),e=i.addItem(d);e&&(b.textfield().focus(),c.is(h.activeItem)&&(nextItem=c.next(b.item)[0]||c.prev(b.item)[0],h.deactivate(c),nextItem&&h.activate(a(nextItem))),g.refresh())
}},"{self} composerSave":function(c,d,e){if("0"!=EasyBlog.Composer.options.tags.enabled){var f=b.tagger.getAddedItems();e.data.tags=a.pluck(f,"title").join(",")}}}}),b.resolve()})}),EasyBlog.module("composer/templates",function(a){var b=this;EasyBlog.Controller("Composer.Templates",{defaultOptions:{"{updateTemplate}":"[data-eb-composer-update-template-button]","{templateId}":"[data-eb-composer-template-id]","{saveNewTemplate}":"[data-eb-composer-save-template-button]","{selectTemplate}":"[data-template-item]","{templateBlocks}":"[data-template-blocks]","{deleteTemplate}":"[data-template-delete]","{posts}":"[data-eb-composer-posts]","{searchTextfield}":"[data-eb-composer-posts-search-textfield]","{itemGroup}":"[data-eb-composer-posts-item-group]","{list}":"[data-eb-composer-templates-list]"}},function(b,c,d,e){return{init:function(){e=b.composer
},selectedTemplate:function(a){e.manager().addClass("is-editing-template"),b.templateId().val(a)},"{selectTemplate} click":function(a){var c=a.data("uid"),d=a.data("blank");return d?(e.frame().removeClass("show-templates"),void 0):(EasyBlog.ajax("site/views/composer/renderTemplate",{uid:c}).done(function(a,d,f){b.selectedTemplate(c),f&&e.document.loadDocument(f),e.frame().removeClass("show-templates"),b.trigger("composerSelectTemplate",[c,a,d,f])}),void 0)},"{deleteTemplate} click":function(a,c){c.stopPropagation();
var d=a.parents(b.selectTemplate.selector),e=d.data("uid");EasyBlog.dialog({content:EasyBlog.ajax("site/views/templates/confirmDelete",{id:e,deleteAction:"ajax"}),bindings:{"{submitButton} click":function(){EasyBlog.ajax("site/controllers/templates/delete",{ids:[e]}).done(function(){EasyBlog.dialog().close(),d.remove()})}}})},save:function(c){var d=a.Task();e.getSaveData(d.data),b.trigger("composerSave",[d,e]),c.template_id&&a.extend(d.data,{template_id:c.template_id}),c.title&&a.extend(d.data,{template_title:c.title}),c.system&&a.extend(d.data,{system:c.system}),d.process().done(function(){EasyBlog.ajax("site/views/templates/save",d.data).done(function(a,c){b.selectedTemplate(c.id),b.trigger("composerSave",[d,e,c]),e.setMessage(a)
})})},"{updateTemplate} click":function(){var c=b.templateId().val();b.save({template_id:c})},"{saveNewTemplate} click":function(){EasyBlog.dialog({content:EasyBlog.ajax("site/views/templates/saveTemplateDialog"),bindings:{"{submitButton} click":function(){var a=this.system().is(":checked")?1:0;b.save({template_id:"0",title:this.title().val(),system:a}),EasyBlog.dialog().close()}}})},"{composer} composerSidebarActivate":function(a,c,d){"templates"===d&&EasyBlog.ajax("site/views/templates/listTemplates",{}).done(function(a){return 0==a.length?(b.posts().addClass("empty"),void 0):(b.insertTemplates(a),void 0)
}).fail(function(){})},"{composer} composerSaveTemplate":function(){},"{composer} sidebarDeactivate":function(a,b,c){}}}),b.resolve()}),EasyBlog.module("composer",function(a){var b=this,c=window.EBD={};c.root=".ebd",c.block=".ebd-block:not(is-helper):not(.is-placeholder):not(.is-dropzone)",c.childBlock="> "+c.block,c.nest=".ebd-nest",c.nestedBlock=c.block+".is-nested",c.immediateNestedBlock=c.nestedBlock+":not("+c.nest+" "+c.nest+" "+c.nestedBlock+")",c.standaloneBlock=c.block+".is-standalone",c.isolatedBlock=c.block+".is-isolated",c.workarea="[data-ebd-workarea]",c.dropzone="[data-ebd-dropzone]",c.blockToolbar="[data-ebd-block-toolbar]",c.blockSortHandle="[data-ebd-block-sort-handle]",c.blockViewport="[data-ebd-block-viewport]",c.blockContent="[data-ebd-block-content]",c.immediateBlockSortHandle="> "+c.blockToolbar+" > "+c.blockSortHandle,c.immediateBlockViewport="> "+c.blockViewport,c.immediateBlockContent=c.immediateBlockViewport+"> "+c.blockContent,c.editableContent=c.block+".is-editable [contenteditable=true]",c.selectors={"{workarea}":c.workarea,"{root}":c.workarea+" "+c.root,"{nest}":c.workarea+" "+c.root+" "+c.nest,"{block}":c.workarea+" "+c.root+" "+c.block,"{dropzone}":c.workarea+" "+c.root+" "+c.dropzone};
var e=3,f=4,g=1,i=0;EasyBlog.require().library("scrolly","history").script("composer/debugger","composer/document","composer/blocks","composer/category","composer/tags","composer/revisions","composer/media","composer/posts","composer/templates","composer/blogimage","composer/location","composer/panels","composer/panels/post","composer/panels/authorship","composer/panels/category","composer/panels/seo","composer/panels/autopost").done(function(){EasyBlog.Controller("Composer",{hostname:"composer",pluginExtendsInstance:!0,elements:["[data-eb-composer-{frame|manager|actions|form|ghosts|alerts|saving-redirect-message|saving-message|saving-info-message|saving-progress-bar|saving-close-button|saving-entry-button|apply-post-button|publish-post-button|update-post-button|submit-post-button|reject-post-button|approve-post-button|preview-post-button|save-post-button|unpublish-post-button|delete-post-button|published-field}]","[data-eb-composer-{views|view|viewport|viewport-content}]","[data-eb-composer-{autosave|autosave-message}]","[data-eb-{alert-template}]","[data-eb-composer-toolbar-{messages}]","[data-eb-composer-{close-message}]"],defaultOptions:{templates:{},postUid:null,authorId:null,"{retryButton}":"[data-eb-composer-instance-entry-button]"}},function(b,c,d,h){return{saveOptions:{autosave:!1,showSaveMessage:!0,updateRevisionStatus:!0,updateAddressBar:!0},init:function(){try{window.parent.EasyBlog.ComposerLauncher.ready()
}catch(e){}a(window).on("beforeunload",function(a){return a.preventDefault(),!1}),c.templates.alert=b.alertTemplate().detach().html(),h=b.frame(),c.authorId=h.data("author-id"),d.noscroll(),EasyBlog.Composer=b,a.extend(c,h.htmlData("eb-composer")),b.installPlugins(["debugger","media","templates","blocks","posts","panels","document","blogimage","location","artboard","tags","category","revisions"]),b.keepalive.start(),1!=c.autosave.enabled||b.frame().hasClass("show-templates")||b.autosave.start(),EasyBlog.debug&&b.debugger.activate(),b.trigger("composerReady")
},"{self} composerDocumentReady":function(){b.frame().removeClass("is-loading")},installPlugins:function(c){a.each(c,function(a,c){b.addPlugin(c)})},settings:{get:function(a){return d.find("input[name='"+a+"']").val()},set:function(a,c){return d.find("input[name='"+a+"']").val(c),b.trigger("composerSettingsChange",[a,c]),c}},getPostId:function(){return h.attr("data-post-id")},getPostUid:function(){return h.attr("data-post-uid")},getRevisionId:function(){return b.getPostUid().split(".")[1]},getDoctype:function(){return h.attr("data-post-doctype")
},views:{show:function(a){h.switchClass("view-"+a),b.view().removeClass("active").where("name",a).addClass("active"),"revisions"==a&&b.manager().removeClass("has-messages"),b.trigger("composerViewShow",[a])},hide:function(a){b.trigger("composerViewHide",[a]),b.views.show("document")}},keepalive:{timer:null,start:function(d){var e=b.keepalive,d=d||c.keepalive.interval;e.stop(),1>d||(e.timer=a.delay(function(){e.run(d)},d))},run:function(a){EasyBlog.ajax("site/views/composer/keepAlive").always(function(){b.keepalive.start(a)
})},stop:function(){clearTimeout(b.keepalive.timer)}},autosave:{timer:null,counter:0,start:function(d){var e=b.autosave,d=d||c.autosave.interval;e.stop(),1>d||!d||(e.timer=a.delay(function(){e.run(d)},d))},run:function(a){b.autosave.save(),b.autosave.start(a)},stop:function(){clearTimeout(b.autosave.timer)},save:function(){b.saving||(0==b.autosave.counter&&b.publishedField().val(e),b.autosave.counter++,b.save({autosave:!0,showSaveMessage:!1}).done(function(a,c){200==c.code&&(b.autosave().removeClass("hide"),b.autosaveMessage().html(c.message))
}))}},validate:function(){var c=a.Task();return b.trigger("composerValidate",[c]),c.process().done(function(){}).fail(function(){var d=c.list,e=[];a.each(d,function(a,b){"rejected"==b.state()&&b.fail(function(a){e.push(a)})}),b.setMessage(e)}),c},"{self} composerValidate":function(){},saving:!1,getSaveData:function(c){b.form().each(function(){var b=a(this).serializeObject();a.extend(c,b)})},save:function(c){if(!b.saving){b.saving=!0;var e=a.Deferred();return d.addClass("is-saving"),b.validate().done(function(){c=a.extend(b.saveOptions,c);
var f=a.Task();f.data.autosave=c.autosave?c.autosave:0,b.initSaving(c.autosave),b.updateProgressBar("15"),c.isapply?f.data.isapply=c.isapply:(f.data.isapply=0,c.updateAddressBar=0),b.getSaveData(f.data),b.trigger("composerSave",[f,b]),b.updateProgressBar("25"),f.process().done(function(){b.updateProgressBar("35"),EasyBlog.ajax("site/controllers/posts/save",f.data).done(function(a,e,f,i){if(b.updateProgressBar("65"),!c.isapply&&c.showSaveMessage&&b.setMessage(e),b.trigger("composerSaveSuccess",a),c.updateRevisionStatus){var j=d.find("[data-eb-revisions-fieldset]");
j.children().html(f),composer.revisions.preventParentScrolling()}c.isapply&&c.updateAddressBar&&History.pushState({state:1},"",i),b.publishedField().val()==g&&b.manager().removeClass("revision-draft").addClass("revision-finalized"),b.updateProgressBar("85"),d.find(".eb-composer-actions input[name=uid]").val(a.uid),d.find(".eb-composer-actions input[name=revision_id]").val(a.revision_id),h.attr("data-post-uid",a.uid),b.doneSaving(c.isapply,c.autosave,e.message)}).fail(function(a){b.manager().removeClass("is-saving is-auto-saving"),b.setMessage(a),b.trigger("composerSaveError",[a])
}).always(function(){b.saving=!1}).done(e.resolve).fail(e.reject)}).fail(function(){b.manager().removeClass("is-saving is-auto-saving"),b.trigger("composerSaveError"),b.saving=!1}).always(function(){d.removeClass("is-saving is-auto-saving")})}).fail(function(){b.saving=!1,d.removeClass("is-saving")}),e}},trash:function(){EasyBlog.dialog({content:EasyBlog.ajax("site/views/composer/confirmDelete",{uid:b.getPostUid()})})},setMessage:function(c){a.isArray(c)||(c=[c]),a.each(c,function(a,c){b.manager().addClass("has-messages");
var d="green";/error|danger/.test(c.type)&&(d="red"),/success/.test(c.type)&&(d="green"),b.messages().switchClass("style-"+d),b.messages().find("[data-message]").html(c.message)})},"{closeMessage} click":function(){b.manager().removeClass("has-messages")},"{previewPostButton} click":function(){var a=b.publishedField().val();a!=f&&b.publishedField().val(e),b.save({autosave:0,isapply:1}).done(function(a,b,c,d,e){window.open(e)}).always(function(){})},"{savePostButton} click":function(a){var c=b.publishedField().val();
c!=f&&b.publishedField().val(e),a.addClass("is-saving"),b.save({autosave:1,isapply:0}).done(function(){}).always(function(){a.removeClass("is-saving")})},"{submitPostButton} click":function(){b.disableLeavePrompt(),b.publishedField().val(f),b.save({autosave:0,isapply:0})},"{approvePostButton} click":function(a){b.publishedField().val(g),a.addClass("is-saving"),b.disableLeavePrompt(),b.save({autosave:0,isapply:0}).done(function(){}).always(function(){a.removeClass("is-saving")})},"{rejectPostButton} click":function(){b.publishedField().val(e),b.disableLeavePrompt(),b.save({autosave:0,isapply:0}).done(function(){})
},"{publishPostButton} click":function(a){b.publishedField().val(g),a.addClass("is-saving"),b.disableLeavePrompt(),b.save({autosave:0,isapply:0}).done(function(){}).always(function(){a.removeClass("is-saving")})},"{applyPostButton} click":function(a){b.publishedField().val(g),a.addClass("is-saving"),b.save({autosave:0,isapply:1}).done(function(){}).always(function(){a.removeClass("is-saving")})},"{updatePostButton} click":function(a){b.publishedField().val(g),b.disableLeavePrompt(),a.addClass("is-saving"),b.save({autosave:0,isapply:0}).done(function(){}).always(function(){a.removeClass("is-saving")
})},"{unpublishPostButton} click":function(){b.publishedField().val(i),b.save({autosave:0,isapply:0})},"{deletePostButton} click":function(){b.trash()},"{self} composerSelectTemplate":function(){setTimeout(function(){b.autosave.start()},5e3)},"{savingEntryButton} click":function(){b.disableLeavePrompt();var a=b.savingEntryButton().attr("href");EasyBlog.ComposerLauncher.redirect(a)},"{savingCloseButton} click":function(){b.manager().removeClass("is-saving")},initSaving:function(a){a?b.manager().addClass("is-auto-saving"):(b.manager().removeClass("is-auto-saving"),b.savingEntryButton().addClass("hide"),b.savingCloseButton().addClass("hide"),b.savingProgressBar().removeClass("hide"),b.savingInfoMessage().text(""),b.savingInfoMessage().addClass("hide"),b.savingMessage().removeClass("hide"),b.manager().addClass("is-saving"))
},doneSaving:function(a,c,d){if(b.updateProgressBar("100"),b.savingMessage().addClass("hide"),b.savingInfoMessage().text(d),b.savingInfoMessage().removeClass("hide"),c)b.manager().removeClass("is-auto-saving");else if(a)b.savingEntryButton().removeClass("hide"),b.savingCloseButton().removeClass("hide"),b.savingMessage().addClass("hide");else{b.disableLeavePrompt(),b.savingRedirectMessage().removeClass("hide");var e=b.savingEntryButton().attr("href");EasyBlog.ComposerLauncher.redirect(e)}},disableLeavePrompt:function(){a(window).off("beforeunload"),a(window).unbind("beforeunload"),window.onbeforeunload=function(){}
},updateProgressBar:function(a){b.savingProgressBar().children(".progress-bar").css("width",a+"%")}}}),a("body").addController("EasyBlog.Controller.Composer"),b.resolve()})}),EasyBlog.module("composer/revisions",function(a){var b=this;EasyBlog.Controller("Composer.Revisions",{defaultOptions:{"{revisionsFieldset}":"[data-eb-revisions-fieldset]","{revisionToggle}":"[data-eb-revisions-dropdown-toggle]","{revisionDropdown}":"[data-eb-pilot-dropdown]","{revisionHandler}":"[data-eb-revisions-handler]","{revisionList}":"[data-eb-revisions-list]","{closeComparison}":"[data-revisions-close-comparison]","{compareScreen}":"[data-eb-composer-revisions-compare-screen]","{item}":"[data-eb-composer-revisions-item]","{compareRevision}":"[data-eb-composer-revisions-compare]","{openRevision}":"[data-eb-composer-revisions-open]","{useRevision}":"[data-eb-composer-revisions-use]","{deleteRevision}":"[data-eb-composer-revisions-delete]","{revisionBlocks}":".eb-composer-revisions .ebd-block"}},function(b,c,d,e,f,g){return{init:function(){e=b.composer,g=e.panels,f=e.blocks,b.preventParentScrolling()
},preventParentScrolling:function(){b.revisionList().on("mousewheel",function(a){a.stopPropagation()})},"{item} click":function(a){var c=a.hasClass("active");a.hasClass("is-current")||(b.item().removeClass("active"),a.toggleClass("active",!c))},revisionsLoaded:!1,getRevisionItem:function(c){var d=a(c).parents(b.item.selector);return d},"{revisionBlocks} mouseover":function(b){var d=a(b).data("uid"),e=f.getBlock(d);f.highlight(e)},"{revisionBlocks} mouseout":function(b){var d=a(b).data("uid"),e=f.getBlock(d);
f.unhighlight(e)},"{closeComparison} click":function(){e.views.show("document"),b.compareScreen().html("")},"{compareRevision} click":function(c){e.views.show("revisions");var f=b.getRevisionItem(c),g=a(f).data("id"),h=EasyBlog.Composer.getRevisionId();EasyBlog.ajax("site/views/revisions/compare",{current:h,target:g}).done(function(a){b.compareScreen().html(a)})},"{useRevision} click":function(c){var e=b.getRevisionItem(c),f=a(e).data("id");EasyBlog.dialog({content:EasyBlog.ajax("site/views/revisions/confirmUseRevision",{uid:EasyBlog.Composer.getPostId()+"."+f})})
},"{deleteRevision} click":function(c){var e=a(c).parents(b.item.selector),f=a(e).data("id");EasyBlog.dialog({content:EasyBlog.ajax("site/views/revisions/deleteRevision",{id:f}),bindings:{"{submitButton} click":function(){EasyBlog.ajax("site/controllers/posts/deleteRevision",{id:f}).done(function(){a(e).remove(),EasyBlog.dialog().close()})}}})},"{revisionToggle} click":function(){b.revisionsFieldset().toggleClass("show-revision-list"),EasyBlog.ajax("site/views/revisions/getRevisions",{uid:EasyBlog.Composer.getPostUid()}).done(function(a){b.revisionsLoaded=!0,b.revisionList().html(a)
})},"{composer} composerSaveSuccess":function(){b.revisionsLoaded=!1}}}),b.resolve()}),EasyBlog.module("composer/panels/category",function(){var b=this;EasyBlog.require().done(function(a){EasyBlog.Controller("Composer.Panels.Category",{defaultOptions:{fields:null,templates:{},"{template}":"[data-category-primary-template]","{fieldsTab}":"[data-eb-composer-panel-tab][data-id=fields]","{fieldsPanel}":"[data-eb-composer-panel][data-id=fields]","{fieldsPanelForm}":"[data-eb-composer-panel][data-id=fields] [data-eb-composer-form]","{fieldsForm}":"[data-eb-composer-panel-fields]","{empty}":"[data-eb-composer-fields-empty]","{categories}":"[data-category-primary-items]","{category}":"[data-category-primary-item]","{categoryText}":"[data-title-text]","{primaryCategoryInput}":"[data-category-primary-input]","{primaryCategoryTitle}":"[data-category-primary-title]"}},function(b,c,d,e){return{init:function(){c.templates.primaryCategory=b.template().detach().html(),e=EasyBlog.Composer
},getTemplate:function(b){var d=a(c.templates[b]);return d},insertCategory:function(a){var c=b.getTemplate("primaryCategory");c.attr("data-title",a.title).attr("data-id",a.id).find(b.categoryText).html(a.title),b.categories().append(c)},removeCategory:function(c){if(1!=b.categories().children().length&&(b.categories().children('[data-id="'+c.id+'"]').remove(),1==b.categories().children().length||c.id==b.primaryCategoryInput().val())){var d=a(b.categories().children()[0]),e=d.data("id"),f=d.data("title");b.assignPrimaryCategory(e,f)
}},assignPrimaryCategory:function(a,c){b.primaryCategoryInput().val(a),b.primaryCategoryTitle().html(c);var d={id:a,title:c};b.trigger("categorysetprimary",d)},categoryExists:function(a){var a=b.categories().children('[data-id="'+a.id+'"]');return a.length>0},"{category} click":function(a){var d=a.data("id"),e=a.data("title");b.assignPrimaryCategory(d,e)},"{self} categorydeselect":function(a,c,d){b.fieldsPanel().find('[data-category-id="'+d.id+'"]').remove(),0==b.fieldsPanel().find("[data-panel-field]").length&&b.empty().show(),b.removeCategory(d)
},"{self} categoryselect":function(a,c,d){b.categoryExists(d)||b.insertCategory(d),EasyBlog.ajax("site/views/categories/getCustomFields",{id:d.id,postId:EasyBlog.Composer.getPostId()}).done(function(a){if(a.length>0){var c=e.panels.panelTab.get("fields");c.removeClass("hide"),b.empty().hide(),b.fieldsPanelForm().append(a)}})},"{self} composerSaveError":function(a,c,d){d.customCode&&-500==d.customCode?b.fieldsTab().addClass("has-error"):b.fieldsTab().removeClass("has-error")}}}),b.resolve()})})});