FD50.installer("EasyBlog","definitions",function(a){a.module(["easyblog/easyblog","easyblog/layout/template","easyblog/layout/responsive","easyblog/layout/dialog","easyblog/layout/elements","easyblog/layout/launcher","easyblog/layout/placeholder","easyblog/layout/image/popup","easyblog/layout/image/gallery","easyblog/layout/image/legacy","easyblog/subscribe","easyblog/layout/image/caption","easyblog/quickpost/form","easyblog/quickpost/standard","easyblog/quickpost/quote","easyblog/quickpost/link","easyblog/quickpost/photo","easyblog/quickpost/video","easyblog/dashboard/blogimage","easyblog/dashboard/categories","easyblog/dashboard/form","easyblog/dashboard/comments","easyblog/dashboard/editor","easyblog/dashboard/medialink","easyblog/dashboard/moderate","easyblog/dashboard/posts","easyblog/dashboard/templates","easyblog/dashboard"])
}),FD50.installer("EasyBlog","scripts",function($){EasyBlog.require().library("ui/position").script("layout/template","layout/responsive","layout/dialog","layout/elements","layout/launcher","layout/placeholder","layout/image/popup","layout/image/gallery","layout/image/legacy","subscribe").done(),EasyBlog.module("layout/template",function(a){var b=this,c=EasyBlog.template=function(b){if(b){if(c.cache.hasOwnProperty(b))return c.cache[b];var d='.eb-template[data-name="'+b+'"]',e=a.trim(a(d).detach().html());return e&&(c.cache[b]=e),e
}};c.cache={},b.resolve()}),EasyBlog.module("layout/responsive",function(a){var b=this;a(function(){a.responsive(".eb-responsive",[{at:1200,switchTo:"wide"},{at:960,switchTo:"wide w960"},{at:818,switchTo:"wide w960 w768"},{at:600,switchTo:"wide w960 w768 w600"},{at:560,switchTo:"wide w960 w768 w600 w480"},{at:480,switchTo:"wide w960 w768 w600 w480 w320"}])});var c="#fd.eb [data-responsive]",d=function(){a(c).each(function(){for(var e,b=a(this),c=b.outerWidth(),d=b.data("responsive").split(","),f=[],g=[];e=d.shift();)(e>=c?g:f).push("w"+e);
b.removeClass(f.join(" ")).addClass(g.join(" "))})};a(document).ready(d),a(window).on("load.responsive",d).on("resize.responsive_",a.debounce(d,350)),b.resolve()}),EasyBlog.module("layout/dialog",function($){var module=this,dialogHtml='<div id="fd" class="eb eb-dialog has-footer"><div class="eb-dialog-modal"><div class="eb-dialog-header"><div class="row-table"><div class="col-cell cell-ellipse"><span class="eb-dialog-title"></span></div><div class="col-cell cell-tight eb-dialog-close-button"><i class="fa fa-close"></i></div></div></div><div class="eb-dialog-body"><div class="eb-dialog-container"><div class="eb-dialog-content"></div><div class="eb-hint hint-loading layout-overlay style-gray size-sm"><div><i class="eb-hint-icon"><span class="eb-loader-o size-lg"></span></i></div></div><div class="eb-hint hint-failed layout-overlay style-gray size-sm"><div><i class="eb-hint-icon fa fa-warning"></i><span class="eb-hint-text"><span class="eb-dialog-error-message"></span></span></div></div></div></div><div class="eb-dialog-footer"><div class="row-table"><div class="col-cell eb-dialog-footer-content"></div></div></div></div></div>',dialog_=".eb-dialog",dialogModal_=".eb-dialog-modal",dialogContent_=".eb-dialog-content",dialogHeader_=".eb-dialog-header",dialogFooter_=".eb-dialog-footer",dialogFooterContent_=".eb-dialog-footer-content",dialogCloseButton_=".eb-dialog-close-button",dialogTitle_=".eb-dialog-title",dialogErrorMessage_=".eb-dialog-error-message",isFailed="is-failed",isLoading="is-loading",rxBraces=/\{|\}/gi,self=EasyBlog.dialog=function(a){if(void 0===a)return self;
$.isString(a)&&(a={content:a});var b=self.open;return window.parentEasyBlogDialog&&(b=window.parentEasyBlogDialog.open),b.apply(self,[a]),self};$.extend(self,{defaultOptions:{title:"",content:"",buttons:"",classname:"",width:"auto",height:"auto",escapeKey:!0},open:function(a){var b=$(dialog_);b.length<1&&(b=$(dialogHtml).appendTo("body"));var a=$.extend({},self.defaultOptions,a),c=$(dialogTitle_);c.text(a.title);var d=$(dialogFooterContent_);d.html(a.buttons),b.toggleClass("has-footer",!!a.buttons),self.setBindings(a);
var e=$(dialogContent_).empty(),f=a.content,g=self.getContentType(f);b.switchClass("type-"+g);var h=$(dialogModal_),i=a.width,j=a.height;if($.isNumeric(j)){var k=$(dialogHeader_),l=$(dialogFooter_);j+=k.height()+l.height()}switch(h.css({width:i,height:j}),b.addClassAfter("active"),g){case"html":e.html(f);break;case"iframe":var m=$("<iframe>"),n=f;m.appendTo(e).one("load",function(){try{m[0].contentWindow.parentEasyBlogDialog=self}catch(a){}}).attr("src",n);break;case"deferred":return b.switchClass(isLoading),f.done(function(c){$.isPlainObject(c)?self.reopen($.extend(!0,a,c)):$.isString(c)?(a.content=c,self.reopen(a)):b.switchClass(isFailed)
}).fail(function(a){b.switchClass(isFailed);var c=$(dialogErrorMessage_);$.isString(a)&&c.html(a),$.isPlainObject(a)&&a.message&&c.html(a.message)}),void 0;case"dialog":var o=self.parseXMLOptions(f);return self.open($.extend(!0,a,o)),void 0}},reopen:function(a){self.close(),self.open(a)},close:function(){self.unsetBindings();var a=$(dialog_);a.remove()},getContentType:function(a){return/<dialog>(.*?)/.test(a)?"dialog":$.isUrl(a)?"iframe":$.isDeferred(a)?"deferred":"html"},parseXMLOptions:function(xml){var xmlOptions=$.buildHTML(xml),newOptions={};
return $.each(xmlOptions.children(),function(i,node){var node=$(node),key=$.String.camelize(this.nodeName.toLowerCase()),val=node.html(),type=node.attr("type");switch(type){case"json":try{val=$.parseJSON(val)}catch(e){}break;case"javascript":try{val=eval("(function($){ return "+$.trim(val)+" })("+$.globalNamespace+")")}catch(e){}break;case"text":val=node.text()}$.isNumeric(val)&&(val=parseFloat(val)),newOptions[key]=val}),newOptions},bindings:{},setBindings:function(a){self.unsetBindings();var b=a.selectors,c=a.bindings;
if(b&&c){var d={parent:self},e=$(dialog_);$.each(b,function(a,b){var a=a.replace(rxBraces,""),c=d[a]=function(){return e.find(b)};c.selector=b}),$.each(c,function(a,b){var c=a.split(" "),f=c[0].replace(rxBraces,""),g=c[1]+".eb.dialog",h=d[f];if(h){var i=h.selector;e.on(g,i,function(){b.apply(d,[this].concat(arguments))}),self.bindings[g]=b}})}a.escapeKey&&$(document).on("keydown.eb.dialog",function(a){27==a.keyCode&&self.close()})},unsetBindings:function(){var a=$(dialog_);$.each(self.bindings,function(b){a.off(b)
}),$(document).off("keydown.eb.dialog")}}),$(document).on("click",dialogCloseButton_,function(){self.close()}).on("click",dialog_,function(a){var b=$(dialog_);a.target==b[0]&&self.close()}),module.resolve()}),EasyBlog.module("layout/elements",function(a){var b=this;a(document).on("click.button.data-bp-api","[data-bp-toggle-value]",function(){var b=a(this),d=(b.siblings("[data-bp-toggle-value]"),b.parents('[data-bp-toggle="radio-buttons"]'));if(!d.hasClass("disabled")&&d.length>0){var e=b.data("bp-toggle-value");
return d.find("input[type=hidden]").val(e).trigger("change"),void 0}}),a(document).on("change.data-bp-input",'[data-bp-toggle="radio-buttons"] input[type=hidden]',function(){{var b=a(this),c=b.siblings("[data-bp-toggle-value]");b.val()}c.removeClass("active").filter('[data-bp-toggle-value="'+b.val()+'"]').addClass("active")}),a(document).on("mouseover.tooltip.data-eb-api","[data-eb-provide=tooltip]",function(){a(this).tooltip({delay:{show:200,hide:100},animation:!1,template:'<div id="fd" class="eb tooltip tooltip-eb"><div class="tooltip-arrow"></div><div class="tooltip-inner"></div></div>',container:"body"}).tooltip("show")
}),a(document).on("mouseover.popover.data-eb-api","[data-eb-provide=popover]",function(){a(this).popover({delay:{show:200,hide:100},animation:!1,trigger:"hover",container:"body"}).popover("show")});var c=function(a){return a%400?a%100?a%4?!1:!0:!1:!0};a(document).on("keyup","[data-date-form] [data-date-day]",function(){if(a.trim(a(this).val())){var b=parseInt(a(this).siblings("[data-date-year]").val()||a(this).siblings("[data-date-year]").data("dateDefault")),d=parseInt(a(this).siblings("[data-date-month]").val()||a(this).siblings("[data-date-month]").data("dateDefault")),e=parseInt(a(this).val()||a(this).data("dateDefault")),f=/1|3|5|7|8|10|12/.test(d)?31:30;
2==d&&(f=c(b)?29:28),1>e&&(e=1),e>f&&(e=f),a.isNumeric(e)?a(this).val(e):a(this).val("")}}),a(document).on("keyup","[data-date-form] [data-date-year]",function(){if(a.trim(a(this).val())){var b=parseInt(a(this).val());1>b&&(b=1),a.isNumeric(b)?a(this).val(b):a(this).val("")}}),a.fn.listbox=function(b){var c=this;if(a.isPlainObject(b)||void 0===b)return c.each(function(){var c=a(this),e=d.get(c);e?e.update(b):e=new d(c,b)}),this;if(a.isString(b)){var h,e=a(this[0]),f=d.get(e)||new d(e),g=f[b];return a.isFunction(g)&&(h=g.apply(f,a.makeArray(arguments).slice(1))),h||this
}return this},a.fn.listboxitem=function(b){var c=this;if(void 0===b)return c.each(function(){var b=a(this);d.Item.init(b)}),this;if(a.isString(b)){var e=a(this[0]);d.Item.init(e);var h,f=e.data("listboxitem"),g=f[b];return a.isFunction(g)&&(h=g.apply(f,a.makeArray(arguments).slice(1))),h||this}return this};var d=function(b,c,e){var f=this,g={};f.container=b,b.data("listbox",f),a.each(d.defaultOptions,function(a){var d=b.attr("data-listbox-"+a);void 0!==d&&(g[a]=isNaN(parseInt(d))?d:parseInt(d))}),e&&f.extend(e),f.update(a.extend(!0,{},d.defaultOptions,g,c)),f.init()
};d.defaultOptions={toggleDefault:!0,sortable:!0,allowAdd:!0,allowRemove:!0,max:0,min:1,customHTML:"",itemTitle:"Title"},d.get=function(b){var c=a(b).data("listbox");return c instanceof d?c:void 0},a.extend(d.prototype,{options:{},addButton:function(){return this.container.find("[data-listbox-button-add]")},update:function(b){var c=this;a.extend(!0,c.options,b)},extend:function(b){a.each(b,function(b,c){a.isFunction(c)&&(d.prototype[b]=c)})},getItems:function(a){var c=this.container.find("[data-listbox-item]");
return a&&(c=c.filter(a)),d.Item.init(c),c},getParentItem:function(b){var c=a(b).closest("[data-listbox-item]");return d.Item.init(c),c},init:function(){var a=this,b=a.container,c=b.find("[data-listbox-custom-html]");a.options.customHTML=c.html(),c.remove(),a.options.toggleDefault&&b.on("click.listbox.toggleDefault","[data-listbox-button-default]",function(){return a.toggleDefault(this)}),a.options.allowAdd&&b.on("click.listbox.addItem","[data-listbox-button-add]",function(){return a.add(this)}),a.options.allowRemove&&b.on("click.listbox.removeItem","[data-listbox-button-remove]",function(){return a.remove(this)
}),a.options.sortable&&this.initSortable(),!a.options.customHTML&&this.getItems().find("[data-listbox-item-content]").editable(!0)},initSortable:function(){},toggleDefault:function(a){var b=this.getItems(),c=this.getParentItem(a);0!=c.length&&(this.container.trigger("listboxBeforeToggleDefault",[c]),c&&(b.removeClass("is-default"),c.addClass("is-default"),this.container.trigger("listboxAfterToggleDefault",[c])))},isDefault:function(a){return a.hasClass("is-default")},add:function(){var a=this.getItems();if(!(this.options.max>0&&a.length>=this.options.max)){var b=d.Item.newItem(this.options);
this.container.trigger("listboxBeforeAddItem",[b]),b&&(this.addButton().before(b),this.container.trigger("listboxAfterAddItem",[b]),0==this.getItems(".is-default").length&&this.toggleDefault(this.getItems(":first")))}},remove:function(a){var b=this.getItems();if(!(this.options.min>0&&b.length<=this.options.min)){var c=this.getParentItem(a);this.container.trigger("listboxBeforeRemoveItem",[c]),c&&(c.remove(),this.container.trigger("listboxAfterRemoveItem",[c]),this.isDefault(c)&&this.toggleDefault(this.getItems(":first")))
}},populate:function(b,c){var e=this;e.getItems().remove(),a.each(b,function(b,f){var g=d.Item.newItem(e.options);a.isFunction(c)&&c(g,f.content),f.default&&g.addClass("is-default"),e.container.trigger("listboxBeforePopulateItem",[f]),e.addButton().before(g),e.container.trigger("listboxAfterPopulateItem",[f])})},toData:function(){var b=[];return a.each(this.getItems(),function(c,d){b.push(a(d).listboxitem("toData"))}),b}}),d.Item=function(a){this.item=a,this.parent=a.parents("[data-listbox]").data("listbox")
},d.Item.get=function(b){var c=a(b).data("listboxitem");return c instanceof d.Item?c:void 0},d.Item.init=function(b){return b=a(b),a.each(b,function(b,c){c=a(c),d.Item.get(c)||c.data("listboxitem",new d.Item(c))}),b},d.Item.newItem=function(b){var c=a("<div></div>",{"data-listbox-item":"","class":"eb-composer-manage-tab row-table"}),e=a("<div></div>",{"class":"col-cell eb-composer-manage-tab-handler"});b.sortable&&e.append('<i class="fa fa-bars"></i>'),b.toggleDefault&&e.append(' <i class="fa fa-star" data-listbox-button-default></i>'),c.append(e);
var f=a("<div></div>",{"data-listbox-item-content":"","class":"col-cell eb-composer-manage-tab-name"}).html(b.customHTML?a.buildHTML(b.customHTML):b.itemTitle);return!b.customHTML&&f.editable(!0),c.append(f),b.allowRemove&&c.append(a("<div></div>",{"data-listbox-button-remove":"","class":"col-cell eb-composer-manage-tab-remove"}).html("&times;")),d.Item.init(c),c},a.extend(d.Item.prototype,{isDefault:function(){return this.item.hasClass("is-default")},content:function(a){var b=this.item.find("[data-listbox-item-content]");
return void 0!==a?(b.html(a),this):b.html()},remove:function(){this.parent.remove(this.item)},setDefault:function(){this.parent.toggleDefault(this.item)},toData:function(){var a=this;return{"default":a.isDefault()?1:0,content:a.content()}}}),EasyBlog.UI=function(b){var c=b.document;a(c).on("click.ebtabs",".eb-tabs-menu-item",function(){var b=a(this),c=b.closest(".eb-tabs"),d=c.find("> .eb-tabs-menu"),e=d.find("> .eb-tabs-menu-item"),f=c.find("> .eb-tabs-content"),g=f.find("> .eb-tabs-content-item");"toggle"==c.data("eb-tabs-mode")&&b.hasClass("active")?(e.removeClass("active"),g.removeClass("active")):(e.removeClass("active"),b.addClass("active"),g.removeClass("active").where("id",b.data("id")).addClass("active")),c[g.filter(".active").length>0?"addClassAfter":"removeClassAfter"]("is-open",1)
})},EasyBlog.UI(window),b.resolve()}),EasyBlog.module("layout/launcher",function(a){var b=this,c='<div id="fd" class="eb eb-composer-launcher is-loading" data-eb-composer-launcher><div class="eb-composer-launcher-header"><div class="eb-composer-launcher-close-button" data-eb-composer-launcher-close-button><i class="fa fa-close"></i></div></div><div class="eb-composer-launcher-container" data-eb-composer-launcher-container><div class="eb-loader-o size-lg"></div></div></div>',d='<iframe class="eb-composer-launcher-instance" data-eb-composer-launcher-instance />',e="[data-eb-composer-launcher]",f="[data-eb-composer]",g="[data-eb-composer-launcher-close-button]",h="[data-eb-composer-launcher-container]",j=EasyBlog.ComposerLauncher={open:function(b){j.close(),a("body").noscroll(!0);
{var e=a(c),f=e.find(h);a(d).attr("src",b).one("load",j.ready).appendTo(f)}e.appendTo("body").addClassAfter("active")},close:function(){a(e).remove(),a("body").noscroll(!1)},ready:function(){a(e).removeClass("is-loading")},redirect:function(a){parent.window.location=a}};a(document).on("composerSaveError",function(){}),a(document).on("composerSaveSuccess",function(){}),a(document).on("click",f,function(b){if(!(b.shiftKey||b.ctrlKey||b.metaKey||/Android|webOS|iPhone|iPad|iPod|BlackBerry|IEMobile|Opera Mini/i.test(navigator.userAgent))){var c=a(this),d=c.attr("href");
j.open(d),b.preventDefault()}}).on("click",g,function(){EasyBlog.dialog({content:EasyBlog.ajax("site/views/composer/confirmClose"),bindings:{"{cancelButton} click":function(){EasyBlog.dialog.close()},"{closeButton} click":function(){EasyBlog.dialog.close(),j.close()}}})}),b.resolve()}),EasyBlog.module("layout/placeholder",function(a){var b=this;if(a.IE<=9){var c="textarea[placeholder]:not(.placeholder), :input[placeholder]:not(.placeholder)";EasyBlog.require().library("placeholder").done(function(){EasyBlog.fixPlaceholder=function(){a(c).placeholder()
},a(EasyBlog.fixPlaceholder),a(document).on("mouseover",c,function(){a(this).placeholder()})})}b.resolve()}),EasyBlog.module("layout/image/popup",function(a){var b=this,c=EasyBlog.template("site/layout/image/popup"),d=EasyBlog.template("site/layout/image/popup/thumb"),e=EasyBlog.template("site/layout/image/container"),f=".eb-image-popup",g=".eb-image-popup-button",h=".eb-image-popup-close-button",i=".eb-image-popup-container",j=".eb-image-popup-footer",k=".eb-image-popup-thumbs",l=".eb-image-popup-thumb",m=".eb-image",n=".eb-image-viewport",o=".eb-image-caption > span",p=".eb-thumbs",q="keyup.eb.imagepopup",r="click.eb.imagepopup",s="resize.eb.imagepopup",t="keydown.eb.imagepopup",u=EasyBlog.ImagePopup={open:function(){u.close(),a("body").noscroll(!0),a(window).off(q).on(q,function(a){27==a.which&&u.close()
}).off(r).on(r,function(b){var c=a(b.target).parentsUntil(f).andSelf().filter(m);c.length||u.close()}).off(s).on(s,function(){u.refresh()}).off(t).on(t,function(b){if(a(l).length){var c=b.which;if(/37|38|39|40/.test(c)){var e,d=a(l+".active");/37|38/.test(c)&&(e=d.prev(l)),/39|40/.test(c)&&(e=d.next(l)),e.length&&u.openPopupThumb(e),b.preventDefault()}}});var b=a(c);b.appendTo("body")},close:function(){a(window).off(q).off(r).off(s).off(t),a(f).data("destoyed",!0).remove(),a("body").noscroll(!1)},openThumbnails:function(b,c){u.open();
var i,e=a(j),f=a(k),h=0;e.show(),b.find(m).each(function(){var b=a(this),e=b.find("img"),j=b.find(g),k=e.attr("src"),l=j.attr("href"),m=a(d).attr("data-url",l).find("img").attr("src",k).end().appendTo(f);h+=m.outerWidth(!0),b[0]==c[0]&&(i=m)}),f.css("width",h),u.openPopupThumb(i)},openImage:function(a){u.open();var b=a.find(o),c=a.find(g),d=c.attr("href"),e=b.text();e||(e=c.attr("title")),u.showImage(d,e)},openPopupThumb:function(b){var c=b.attr("data-url");a(l).removeClass("active"),b.addClass("active"),u.showImage(c,""),u._reposition()
},showImage:function(b,c){var d=a(f),g=d.find(i);d.addClass("is-loading"),d.find(m).remove();var h=a(e),j=h.find(n),k=h.find(o);k.text(c).css("display",c?"block":"none"),h.addClass("style-popup").appendTo(g);var l=a("<img>");l.on("load",function(){d.data("destroyed")||(d.removeClass("is-loading").addClass("is-preparing"),u.resize(),d.removeClassAfter("is-preparing"))}).on("error",function(){d.removeClass("is-loading").addClass("is-failed")}).appendTo(j).attr("src",b)},refresh:function(){u.resize(),u.reposition()
},resize:function(){var b=a(f),c=a(j),d=b.find(m),e=d.find("img"),g=c.height(),h=e.width(),i=e.height(),k=b.width(),l=b.height(),n=.75*k,o=.75*l-g,p=n/h;targetWidth=h*p,targetHeight=i*p;var q=targetHeight>o;q&&(p=o/i,targetWidth=h*p,targetHeight=i*p),e.css({width:targetWidth,height:targetHeight});var r=d.width(),s=d.height()-g;d.css({top:(l-s)/2-g,left:(k-r)/2})},reposition:function(){var b=a(j),c=a(k),d=a(l+".active"),e=b.width()/2,f=d.position().left+d.width()/2,g=e-f;c.css("left",g)},_reposition:a.debounce(function(){u.reposition()
},350)};a(document).on("click",n,function(){var c=a(this),d=c.attr("href");"javascript:void(0)"===d&&c.siblings(g).click()}).on("click",g,function(b){if(!(b.shiftKey||b.ctrlKey||b.metaKey)){var c=a(this),d=c.closest(m),e=d.closest(p);e.length?u.openThumbnails(e,d):u.openImage(d),b.stopPropagation(),b.preventDefault()}}).on("click",n,function(b){var c=a(this);if(!c.attr("href")){var d=c.closest(m),e=d.find(g);e.length&&(e.click(),b.stopPropagation(),b.preventDefault())}}).on("click",l,function(b){var c=a(this);
u.openPopupThumb(c),b.stopPropagation(),b.preventDefault()}).on("click",h,function(){u.close()}),b.resolve()}),EasyBlog.module("layout/image/gallery",function(a){var b=this,c=".eb-gallery",d=".eb-gallery-viewport",e=".eb-gallery-item",g=".eb-gallery-next-button",i=".eb-gallery-button",k=".eb-gallery-menu-item",l=EasyBlog.ImageGallery={setLayout:function(b){var c=b.find(e);c.each(function(b){var c=a(this),d=100*b;c.css("left",d+"%")});var d=b.data("autoplay");d&&this.autoplay.start(b)},autoplay:{start:function(a){var b=1e3*a.data("interval");
l.autoplay.stop(a);var c=setTimeout(function(){l.next(a),l.autoplay.start(a)},b);a.data("timer",c)},stop:function(a){var b=a.data("timer");clearTimeout(b)}},checkAutoplay:function(a){var b=1e3*a.data("interval");this.stopMonitoringAutoplay(a),setTimeout(function(){l.next(a),l.startMonitoringAutoplay(a)},b)},go:function(a,b){var c=l.getMenuItems(a).length-1;0>b&&(b=c),b>c&&(b=0),l.setActiveIndex(a,b);var e=a.find(d),f=-100*b;e.css("left",f+"%")},next:function(a){var b=l.getActiveIndex(a),c=b+1;l.go(a,c)},prev:function(a){var b=l.getActiveIndex(a),c=b-1;
l.go(a,c)},setActiveIndex:function(a,b){var c=l.getMenuItems(a);c.removeClass("active").eq(b).addClass("active")},getActiveIndex:function(a){var b=l.getMenuItems(a),c=b.filter(".active").index();return 0>c&&(c=0),c},getMenuItems:function(a){return a.find(k)}};a(document).on("click.eb.gallery.button",i,function(){var d=a(this),e=d.closest(c);if(!(e.length<1)){var f=d.is(g)?"next":"prev";l[f](e)}}).on("click.eb.gallery.menuItem",k,function(){var d=a(this),e=d.closest(c);if(!(e.length<1)){var f=e.find(k).index(d);
l.go(e,f)}}).ready(function(){a(c).each(function(){var b=a(this);l.setLayout(b)})}),b.resolve()}),EasyBlog.module("layout/image/legacy",function(a){function c(a){var b=a.parent(),c=b.css("float");if("none"==c&&(c=a.css("float")),"none"==c){var d=a[0].style;"auto"==d.marginLeft&&"auto"==d.marginRight&&(c="center")}return"none"==c&&(c=b.attr("align"),(void 0===c||"none"==c)&&(c=a.attr("align"))),/none|middle/.test(c)&&(c="center"),c}var b=this,d=".easyblog-thumb-preview img, img.easyblog-image-caption, img[data-popup], img[data-style]";
a(document).ready(function(){a(d).each(function(){var b=a(this),d=b.parent(),e=b.attr("src"),f=a('<div class="eb-image">'),g=a('<div class="eb-image-figure">');g.appendTo(f);var h=a('<a class="eb-image-viewport"><img /></a>');h.appendTo(g);{var i=d.is(".easyblog-thumb-preview"),j=!!b.attr("data-popup"),k=i||j;d.is("a:not(.easyblog-thumb-preview)")}if(k){var m=i?d.attr("href"):b.attr("data-popup");h.addClass("eb-image-popup-button").attr({href:m,title:d.attr("title")})}else h.attr({href:d.attr("href"),title:d.attr("title"),target:d.attr("target")});
var n=f.find("img");n.attr({src:e,width:b.attr("width"),height:b.attr("height"),alt:b.attr("alt")});var o=b.is(".easyblog-image-caption");if(o){var p=a('<div class="eb-image-caption"><span></span></div>'),q=b.attr("title");p.appendTo(f).find("span").append(q);var r=b.attr("width");r?p.css("width",r):(p.hide(),n.on("load",function(){p.css("width",n.width()).show()}))}var s=b.attr("data-style")||(o?"gray":"");s&&f.addClass("style-"+s);var t=c(b),u=a('<div class="ebd-block" data-type="image">');/left|right/.test(t)&&u.addClass("is-nested nest-"+t).css("width","auto"),/center/.test(t)&&u.css("text-align","center"),u.append(f),k&&!j?d.replaceWith(u):b.replaceWith(u)
})}),b.resolve()}),EasyBlog.module("subscribe",function(a){var b=this;a(document).on("click.eb.subscribe","[data-blog-subscribe]",function(){var b=a(this).data("type"),c=a(this).data("id");EasyBlog.dialog({content:EasyBlog.ajax("site/views/subscription/form",{type:b,id:c})})}),a(document).on("click.eb.unsubscribe","[data-blog-unsubscribe]",function(){var b=a(this).data("subscription-id"),c=a(this).data("return");console.log(b,c),EasyBlog.dialog({content:EasyBlog.ajax("site/views/subscription/confirmUnsubscribe",{id:b,"return":c}),bindings:{"{submitButton} click":function(){this.form().submit()
}}})}),b.resolve()}),EasyBlog.module("quickpost/form",function(){var b=this;EasyBlog.require().script("quickpost/standard").script("quickpost/quote").script("quickpost/link").script("quickpost/photo").script("quickpost/video").done(function(a){EasyBlog.Controller("Quickpost.Form",{defaultOptions:{"{form}":"[data-quickpost-form]","{publishButton}":"[data-quickpost-publish]","{alert}":"[data-quickpost-alert]","{toggleExtended}":"[data-quickpost-extended-toggle]","{extended}":"[data-quickpost-extended]","{extendedPanel}":"[data-quickpost-extended-panel]","{autopost}":"[data-autopost-item]","{loader}":"[data-quickpost-loader]"}},function(b){return{init:function(){b.addPlugin("standard","EasyBlog.Controller.Quickpost.Form.Standard"),b.addPlugin("quote","EasyBlog.Controller.Quickpost.Form.Quote"),b.addPlugin("link","EasyBlog.Controller.Quickpost.Form.Link"),b.addPlugin("photo","EasyBlog.Controller.Quickpost.Form.Photo"),b.addPlugin("video","EasyBlog.Controller.Quickpost.Form.Video")
},"{toggleExtended} click":function(a){var d=b.extended.of(a),e=d.find(b.extendedPanel.selector);e.toggleClass("hide")},"{publishButton} click":function(c){var e=b.form.of(c),f=e.data("type"),g=a.Task();b.trigger("onPublishQuickPost",[g,f,e]),g.data.autopost=[],e.find(b.autopost.selector+":checked").each(function(){var b=a(this).val();g.data.autopost.push(b)}),b.loader().removeClass("hide"),g.process().done(function(){EasyBlog.ajax("site/views/quickpost/save",g.data).done(function(a){b.alert().addClass("alert-success").removeClass("hide alert-danger").html(a.message),b.trigger("onClearForm",[g,f,e])
}).fail(function(a){b.alert().addClass("alert-danger").removeClass("hide alert-success").html(a.message)}).always(function(){b.loader().addClass("hide")})})}}}),b.resolve()})}),EasyBlog.module("quickpost/standard",function(a){var b=this;EasyBlog.Controller("Quickpost.Form.Standard",{defaultOptions:{"{title}":"[data-quickpost-title]","{content}":"[data-quickpost-content]","{tags}":"[data-quickpost-tags]","{privacy}":"[data-quickpost-privacy]","{category}":"[data-quickpost-category]"}},function(b){return{init:function(){},"{self} onPublishQuickPost":function(c,d,e,f,g){"standard"==f&&(e.data={title:a(g).find(b.title).val(),type:"text",content:a(g).find(b.content).val(),tags:a(g).find(b.tags).val(),privacy:a(g).find(b.privacy).val(),category:a(g).find(b.category).val()})
},"{self} onClearForm":function(c,d,e,f,g){"standard"==f&&(a(g).find(b.title.selector).val(""),a(g).find(b.content.selector).val(""),a(g).find(b.tags.selector).val(""))}}}),b.resolve()}),EasyBlog.module("quickpost/quote",function(a){var b=this;EasyBlog.Controller("Quickpost.Form.Quote",{defaultOptions:{"{quote}":"[data-quickpost-content]","{content}":"[data-quickpost-source]","{tags}":"[data-quickpost-tags]","{privacy}":"[data-quickpost-privacy]","{category}":"[data-quickpost-category]"}},function(b){return{init:function(){},"{self} onPublishQuickPost":function(c,d,e,f,g){"quote"==f&&(e.data={quote:a(g).find(b.quote).val(),type:"quote",source:a(g).find(b.content).val(),tags:a(g).find(b.tags).val(),privacy:a(g).find(b.privacy).val(),category:a(g).find(b.category).val()})
},"{self} onClearForm":function(c,d,e,f,g){"quote"==f&&(a(g).find(b.quote).val(""),a(g).find(b.content.selector).val(""),a(g).find(b.tags.selector).val(""))}}}),b.resolve()}),EasyBlog.module("quickpost/link",function(a){var b=this;EasyBlog.Controller("Quickpost.Form.Link",{defaultOptions:{"{crawl}":"[data-quickpost-crawl-link]","{loader}":"[data-quickpost-crawl-loader]","{form}":"[data-quickpost-form]","{link}":"[data-quickpost-link]","{preview}":"[data-quickpost-link-preview]","{title}":"[data-quickpost-title]","{content}":"[data-quickpost-content]","{tags}":"[data-quickpost-tags]","{privacy}":"[data-quickpost-privacy]","{category}":"[data-quickpost-category]"}},function(b){return{init:function(){},"{crawl} click":function(c,d){d.preventDefault();
var e=b.link().val();form=a(c).parents(b.form.selector),b.loader().removeClass("hidden"),EasyBlog.ajax("site/views/crawler/crawl",{url:e}).done(function(a){b.loader().addClass("hidden");var c=a[e],d=c.description,f=c.title;form.find(b.title.selector).val(f),form.find(b.content.selector).val(d),b.preview().removeClass("hide")})},"{self} onPublishQuickPost":function(c,d,e,f,g){"link"==f&&(e.data={title:a(g).find(b.title.selector).val(),type:"link",content:a(g).find(b.content.selector).val(),link:a(g).find(b.link.selector).val(),tags:a(g).find(b.tags.selector).val(),privacy:a(g).find(b.privacy.selector).val(),category:a(g).find(b.category.selector).val()})
},"{self} onClearForm":function(c,d,e,f,g){"link"==f&&(a(g).find(b.title.selector).val(""),a(g).find(b.content.selector).val(""),a(g).find(b.link.selector).val(""),a(g).find(b.tags.selector).val(""),b.preview().addClass("hide"))}}}),b.resolve()}),EasyBlog.module("quickpost/photo",function(){var b=this;EasyBlog.require().library("webcam","plupload2").done(function(a){EasyBlog.Controller("Quickpost.Form.Photo",{defaultOptions:{"{capture}":"[data-photo-camera-capture]","{canvas}":"[data-photo-camera-canvas]","{preview}":"[data-photo-camera-preview]","{recapture}":"[data-photo-camera-recapture]",dataType:"upload","{container}":"[data-photo-upload-container]","{uploadPreview}":"[data-photo-upload-preview]","{reupload}":"[data-photo-upload-reupload]","{tabs}":"[data-quickpost-photo-tab]","{tabUpload}":"[data-quickpost-photo-tab-upload]","{tabWebcam}":"[data-quickpost-photo-tab-webcam]","{fileName}":"[data-photo-filename]","{form}":"[data-microblog-form]","{link}":"[data-quickpost-link]","{title}":"[data-quickpost-title]","{content}":"[data-quickpost-content]","{tags}":"[data-quickpost-tags]","{privacy}":"[data-quickpost-privacy]","{category}":"[data-quickpost-category]"}},function(b){return{init:function(){b.implementUpload(),b.hasFlash()||a("ul.eb-quick-photo-tab").hide()
},hasFlash:function(){var a=!1;try{var b=new ActiveXObject("ShockwaveFlash.ShockwaveFlash");b&&(a=!0)}catch(c){navigator.mimeTypes&&void 0!=navigator.mimeTypes["application/x-shockwave-flash"]&&navigator.mimeTypes["application/x-shockwave-flash"].enabledPlugin&&(a=!0)}return a},implementUpload:function(){var e=b.container().plupload2();e.bind("FilesAdded",function(){e.start()}),e.bind("FileUploaded",function(c,d,e){var f=JSON.parse(e.response),g=new Image;a(g).attr("src",f.url),b.fileName().val(f.file),b.container().addClass("hidden"),b.uploadPreview().removeClass("hidden").append(g),b.reupload().removeClass("hidden")
})},"{reupload} click":function(){b.reupload().addClass("hidden"),b.container().removeClass("hidden"),b.uploadPreview().addClass("hidden").html("")},"{tabs} click":function(c){b.options.dataType=a(c).data("type")},webcamStarted:!1,"{capture} click":function(){webcam.capture()},"{recapture} click":function(){b.capture().removeClass("hidden"),b.recapture().addClass("hidden"),b.canvas().removeClass("hidden"),b.preview().find("img").remove(),b.preview().addClass("hidden")},"{tabWebcam} click":function(){var g,e=0,f=null,h=[],i=document.createElement("canvas");
i.setAttribute("width",320),i.setAttribute("height",240),i.toDataURL?(f=i.getContext("2d"),h=f.getImageData(0,0,320,240),g=function(c){for(var d=c.split(";"),g=h,j=0;320>j;j++){var k=parseInt(d[j]);g.data[e+0]=k>>16&255,g.data[e+1]=k>>8&255,g.data[e+2]=255&k,g.data[e+3]=255,e+=4}e>=307200&&(f.putImageData(g,0,0),EasyBlog.ajax("site/controllers/quickpost/saveWebcam",{type:"data",image:i.toDataURL("image/png")}).done(function(c){var d=c.url,e=new Image;b.preview().removeClass("hidden"),a(e).attr("src",d).appendTo(b.preview()),b.canvas().addClass("hidden"),b.capture().addClass("hidden"),b.recapture().removeClass("hidden"),b.fileName().val(c.file)
}),e=0)}):g=function(b){h.push(b),e+=1280,e>=307200&&(a.post("/upload.php",{type:"pixel",image:h.join("|")}),e=0)},b.webcamStarted||(b.canvas().webcam({width:320,height:240,mode:"callback",swffile:a.basePath+"/media/foundry/4.0/scripts/webcam/jscam.swf",onSave:g,onCapture:function(){console.log("finishing"),webcam.save()},debug:function(a,b){console.log(a+": "+b)}}),b.webcamStarted=!0)},"{self} onPublishQuickPost":function(c,d,e,f,g){"photo"==f&&(e.data={dataType:b.options.dataType,title:a(g).find(b.title.selector).val(),type:"photo",content:a(g).find(b.content.selector).val(),link:a(g).find(b.link.selector).val(),tags:a(g).find(b.tags.selector).val(),privacy:a(g).find(b.privacy.selector).val(),category:a(g).find(b.category.selector).val(),fileName:b.fileName().val()})
},"{self} onClearForm":function(c,d,e,f,g){"photo"==f&&(a(g).find(b.title.selector).val(""),a(g).find(b.content.selector).val(""),a(g).find(b.link.selector).val(""),a(g).find(b.tags.selector).val(""),b.fileName().val(""),b.reupload().addClass("hidden"),b.container().removeClass("hidden"),b.uploadPreview().addClass("hidden").html(""))}}}),b.resolve()})}),EasyBlog.module("quickpost/video",function(){var b=this;EasyBlog.require().done(function(a){EasyBlog.Controller("Quickpost.Form.Video",{defaultOptions:{"{form}":"[data-microblog-form]","{loader}":"[data-quickpost-video-loader]","{getVideo}":"[data-quickpost-video-retrieve]","{title}":"[data-quickpost-video-title]","{content}":"[data-quickpost-video-source]","{tags}":"[data-quickpost-tags]","{privacy}":"[data-quickpost-privacy]","{category}":"[data-quickpost-category]","{preview}":"[data-quickpost-video-preview]"}},function(b){return{init:function(){},"{getVideo} click":function(a,c){c.preventDefault(),b.loader().removeClass("hidden"),EasyBlog.ajax("site/views/quickpost/getVideo",{link:b.content().val()}).done(function(a){b.loader().addClass("hidden"),b.preview().addClass("has-preview"),b.preview().html(a)
})},"{self} onPublishQuickPost":function(c,d,e,f,g){"video"==f&&(e.data={title:a(g).find(b.title.selector).val(),type:"video",content:a(g).find(b.content.selector).val(),tags:a(g).find(b.tags.selector).val(),privacy:a(g).find(b.privacy.selector).val(),category:a(g).find(b.category.selector).val()})},"{self} onClearForm":function(c,d,e,f,g){"video"==f&&(a(g).find(b.title.selector).val(""),a(g).find(b.content.selector).val(""),a(g).find(b.tags.selector).val(""),b.preview().removeClass("has-preview"),b.preview().html(""))
}}}),b.resolve()})}),EasyBlog.module("dashboard/blogimage",function(a){var b=this;EasyBlog.require().library("image").done(function(){EasyBlog.Controller("Dashboard.BlogImage",{defaultOptions:{"{placeHolder}":".blogImagePlaceHolder","{imageData}":".imageData","{image}":".image","{selectBlogImageButton}":".selectBlogImage","{removeBlogImageButton}":".removeBlogImage"}},function(b){return{init:function(){EasyBlog.dashboard.registerPlugin("blogImage",b);var c=a.trim(b.imageData().val());c&&b.setImage(a.parseJSON(c))
},"{selectBlogImageButton} click":function(){EasyBlog.mediaManager.browse(null,"blogimage")},"{removeBlogImageButton} click":function(a){b.removeImage(),a.blur()},removeImage:function(){b.image().remove(),b.element.addClass("empty"),b.imageData().val("")},setImage:function(c){if(c){b.removeImage(),b.element.addClass("loading"),clearTimeout(b.imageTimer);var c=a.extend({},c);delete c.data,a.Image.get(c.thumbnail.url).done(function(d){var e=function(){var c=b.placeHolder();maxWidth=c.width(),maxHeight=c.height();
var e=a.Image.resizeWithin(d.data("width"),d.data("height"),maxWidth,maxHeight);return e.top=(maxHeight-e.height)/2,e.left=(maxWidth-e.width)/2,e},f=e(),g=function(){0===f.width||0===f.height?b.imageTimer=setTimeout(function(){f=e(),g()},1e3):d.css(f)};g(),d.addClass("image").css(f).appendTo(b.placeHolder()),b.imageData().val(JSON.stringify(c)),b.element.removeClass("empty")}).fail(function(){b.element.addClass("empty")}).always(function(){b.element.removeClass("loading")})}}}}),b.resolve()})}),EasyBlog.module("dashboard/categories",function(){var b=this;
EasyBlog.require().script("dashboard/form").done(function(a){EasyBlog.Controller("Dashboard.Categories",{defaultOptions:{"{item}":"[data-eb-category-item]","{create}":"[data-eb-categories-create]"}},function(a){return{init:function(){a.element.implement(EasyBlog.Controller.Dashboard.Form),a.item().implement(EasyBlog.Controller.Dashboard.Categories.Item)},"{create} click":function(){EasyBlog.dialog({content:EasyBlog.ajax("site/views/dashboard/categoryForm")})}}}),EasyBlog.Controller("Dashboard.Categories.Item",{defaultOptions:{id:null,"{action}":"[data-action]"}},function(b){return{init:function(){b.options.id=b.element.data("id")
},showDialog:function(a){EasyBlog.dialog({content:EasyBlog.ajax(a,{ids:[b.options.id]}),bindings:{"{submitButton} click":function(){this.form().submit()}}})},"{action} click":function(c){var e=a(c).data("type"),f=a(c).data("action");"dialog"==e&&b.showDialog(f)}}}),b.resolve()})}),EasyBlog.module("dashboard/form",function(a){var b=this;EasyBlog.Controller("Dashboard.Form",{defaultOptions:{"{checkAll}":"[data-eb-form-checkall]","{actions}":"[data-eb-form-actions]","{checkboxes}":"[data-eb-form-checkbox]","{applyButton}":"[data-eb-form-apply]","{taskSelection}":"[data-eb-form-task]","{taskInput}":"[data-table-grid-task]","{filter}":"[data-eb-form-filter]","{search}":"[data-eb-form-search]"}},function(b){return{init:function(){},submitForm:function(){b.element.submit()
},getSelectedCheckboxes:function(){var c=[],d=b.checkboxes(":checked");return d.each(function(b,d){c.push(a(d).val())}),c},"{checkboxes} change":function(){var d=b.checkboxes(":checked").length>0;d?b.actions().removeClass("hide"):b.actions().addClass("hide")},"{search} click":function(){b.submitForm()},"{filter} click":function(){b.taskInput().val(""),b.submitForm()},"{applyButton} click":function(){var d=b.taskSelection().val(),e=b.taskSelection().find(":selected").data("confirmation");if(""==d)return!1;if(e){var f=this.getSelectedCheckboxes();
return f.length<=0?!1:(EasyBlog.dialog({content:EasyBlog.ajax(e,{ids:f}),bindings:{"{submitButton} click":function(){b.taskInput().val(d),b.submitForm()}}}),!1)}b.taskInput().val(d),b.element.submit()},"{checkAll} change":function(){var d=b.checkAll().is(":checked");d?b.actions().removeClass("hide"):b.actions().addClass("hide"),b.checkboxes().prop("checked",d)}}}),b.resolve()}),EasyBlog.module("dashboard/comments",function(){var b=this;EasyBlog.require().script("dashboard/form").done(function(a){EasyBlog.Controller("Dashboard.Comments",{defaultOptions:{"{item}":"[data-eb-comment-item]"}},function(a){return{init:function(){a.element.implement(EasyBlog.Controller.Dashboard.Form),a.item().implement(EasyBlog.Controller.Dashboard.Comments.Item)
}}}),EasyBlog.Controller("Dashboard.Comments.Item",{defaultOptions:{id:null,"{action}":"[data-action]","{unpublish}":"[data-unpublish]","{publish}":"[data-publish]","{edit}":"[data-edit]","{delete}":"[data-delete]"}},function(b){return{init:function(){b.options.id=b.element.data("id")},showDialog:function(a){EasyBlog.dialog({content:EasyBlog.ajax(a,{ids:[b.options.id]}),bindings:{"{submitButton} click":function(){this.form().submit()}}})},"{action} click":function(c){var e=a(c).data("type"),f=a(c).data("action");
"dialog"==e&&b.showDialog(f)}}}),b.resolve()})}),EasyBlog.module("dashboard/editor",function(){var b=this;EasyBlog.Controller("Dashboard.Editor",{defaultOptions:{editorId:"write_content"}},function(a){return{init:function(){EasyBlog.dashboard.registerPlugin("editor",a)},insert:function(b){window.jInsertEditorText(b,a.options.editorId)},content:function(a){return void 0!==a&&window.eblog.editor.setContent(a),window.eblog.editor.getContent()}}}),b.resolve()}),EasyBlog.module("dashboard/medialink",function(){var b=this;
EasyBlog.Controller("Dashboard.MediaLink",{defaultOptions:{"{menu}":".ui-togmenu","{content}":".ui-togbox"}},function(a){return{init:function(){},"{menu} click":function(b){var c=b.hasClass("active");a.menu().removeClass("active"),a.content().removeClass("active"),c||(b.addClass("active"),a.content("."+b.attr("togbox")).addClass("active"))}}}),b.resolve()}),EasyBlog.module("dashboard/moderate",function(){var b=this;EasyBlog.require().script("dashboard/form").done(function(a){EasyBlog.Controller("Dashboard.Moderate",{defaultOptions:{"{item}":"[data-eb-moderate-item]"}},function(a){return{init:function(){a.element.implement(EasyBlog.Controller.Dashboard.Form),a.item().implement(EasyBlog.Controller.Dashboard.Moderate.Item)
}}}),EasyBlog.Controller("Dashboard.Moderate.Item",{defaultOptions:{id:null,"{action}":"[data-action]"}},function(b){return{init:function(){b.options.id=b.element.data("id")},showDialog:function(a){EasyBlog.dialog({content:EasyBlog.ajax(a,{ids:[b.options.id]}),bindings:{"{submitButton} click":function(){this.form().submit()}}})},"{action} click":function(c){var e=a(c).data("type"),f=a(c).data("action");"dialog"==e&&b.showDialog(f)}}}),b.resolve()})}),EasyBlog.module("dashboard/posts",function(){var b=this;EasyBlog.require().script("dashboard/form").script("layout/dialog").done(function(){EasyBlog.Controller("Dashboard.Posts",{defaultOptions:{"{item}":"[data-eb-post-item]"}},function(a){return{init:function(){a.element.implement(EasyBlog.Controller.Dashboard.Form),a.item().implement(EasyBlog.Controller.Dashboard.Posts.Item)
}}}),EasyBlog.Controller("Dashboard.Posts.Item",{defaultOptions:{id:null,"{unpublish}":"[data-post-unpublish]","{publish}":"[data-post-publish]","{feature}":"[data-post-feature]","{unfeature}":"[data-post-unfeature]","{delete}":"[data-post-delete]","{autopost}":"[data-post-autopost]"}},function(a){return{init:function(){a.options.id=a.element.data("id")},"{delete} click":function(){EasyBlog.dialog({content:EasyBlog.ajax("site/views/dashboard/confirmDelete",{ids:[a.options.id]})})},"{publish} click":function(){EasyBlog.dialog({content:EasyBlog.ajax("site/views/dashboard/confirmPublish",{ids:[a.options.id]})})
},"{unpublish} click":function(){EasyBlog.dialog({content:EasyBlog.ajax("site/views/dashboard/confirmUnpublish",{ids:[a.options.id]})})},"{feature} click":function(){EasyBlog.dialog({content:EasyBlog.ajax("site/views/dashboard/confirmFeature",{id:a.options.id})})},"{unfeature} click":function(){EasyBlog.dialog({content:EasyBlog.ajax("site/views/dashboard/confirmUnfeature",{id:a.options.id})})},"{autopost} click":function(b){var c=b.data("autopost-type");EasyBlog.dialog({content:EasyBlog.ajax("site/views/dashboard/confirmAutopost",{id:a.options.id,type:c})})
}}}),b.resolve()})}),EasyBlog.module("dashboard/templates",function(){var b=this;EasyBlog.require().done(function(){EasyBlog.Controller("Dashboard.Templates",{defaultOptions:{"{item}":"[data-template-item]","{delete}":"[data-template-delete]"}},function(a){return{init:function(){},"{delete} click":function(b){var d=a.item.of(b),e=d.data("id");EasyBlog.dialog({content:EasyBlog.ajax("site/views/templates/confirmDeleteTemplate",{ids:[e]})})}}}),b.resolve()})})});